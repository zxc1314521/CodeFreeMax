import{D as de,k as Te,aD as kr,H as ue,E as B,K as T,Q as F,P as y,a3 as Ce,S as j,T as D,O as z,o as e,R as s,a1 as H,a2 as se,aH as _t,G as r,I as Se,J as he,aR as Qt,aC as Ot,F as Ze,w as Ft,aI as Po,ah as Gs,Y as J,$ as le,a5 as Ve,Z as Le,a0 as G,a7 as tt,M as $r,_ as Ct,a4 as Qe,a8 as ps,y as mo,az as ts,ag as gt,av as xt,V as xe,a6 as gs,X as Me,ad as br,j as Sa,L as Ta,af as Ia,N as xa,ao as qo,bk as Gt,bl as Bs,b5 as Io,ae as Ps,ay as xo,aA as Is,aN as Uo,ai as Ms,W as Ss,be as yr,ba as ys,l as Es,bm as Ua,b6 as Wo,bn as Ea}from"./debounce-BNOmQ76Y.js";import{t as Bt,b as Ca,s as fo,f as Eo,a as wr}from"./index-DJ8YNXIh.js";import{I as Oe,a as Nt}from"./IconButtonAugment-DO0xxfgT.js";import{a as _o,C as Sr,s as Aa,M as ws,b as La}from"./Markdown-9Uvf-DZ6.js";import{B as Ut}from"./ButtonAugment-BCcs6kST.js";import{T as We,a as Ht,o as Tr,H as Ir,C as Wt,c as za}from"./TextTooltipAugment-CGvqFHAr.js";import{I as ve,T as re,S as vs}from"./Icon-CohttyM7.js";import{n as cs}from"./noop-CVINQ7cR.js";import{F as es}from"./Filespan-FcScXFRk.js";import{C as Vt,i as xr,E as Zt,b as Cs,c as Na,d as Ra}from"./message-broker-DUQuEFlt.js";import{b as st,bT as Ma,bU as Da,bV as Oa,bW as Fa,bX as Pa,bY as qa,bZ as Wa,b_ as Ba,b$ as ja,z as Dt,n as Ga,c0 as Va,c1 as ks,c2 as Ha,c3 as Ka,c as Ja,c4 as ht,c5 as nt,q as kt,D as Ge,c6 as As,c7 as Co,c8 as to,c9 as Ya,ca as Xa,cb as us,cc as Qa,cd as Bo,ce as Ur,T as Za,cf as en,cg as tn,ch as sn,ci as on,o as Ts,cj as rn,ck as an,a as $t,i as Et,cl as Er,v as so,cm as Cr,U as mt,V as ft,cn as nn,$ as ln,co as cn,cp as dn,bg as un,cq as Ar,cr as Xe,cs as vn,ct as pn,cu as jo,cv as gn,e as ge,cw as Go,cx as hn,aL as Vo,aM as Ho,R as mn,cy as fn,cz as _n,cA as Vs,cB as kn,cC as ko,cD as $n,cE as co,cF as bn,cG as yn,aO as Ke,cH as Lr,cI as wn,h as Sn,cJ as zr,cK as Nr,cL as Rr,cM as Mr,cN as Dr,cO as Or,cP as Tn,cQ as In,x as xn,cR as Un,cS as En,cT as Cn,cU as Fr,y as An,cV as Ln,cW as zn,cX as Nn,cY as Rn}from"./extension-client-context-CN64fWtK.js";import{t as Ko,S as Ao,g as Mn}from"./SimpleMonaco-BBDXOnfl.js";import{bx as Dn,aC as On}from"./mermaid-BF5da6U1.js";import{O as oo,D as $o,R as as}from"./OpenFileButton-gT822Pcb.js";import{T as Rs,C as rs}from"./CopyButton-DWjSvbZb.js";import{S as Lo}from"./SuccessfulButton-BTRD1tJd.js";import{C as Fn}from"./Chevron-DgXCK6y3.js";import{L as zo}from"./LanguageIcon-BFxv44vU.js";import{n as Pn,g as qn}from"./file-type-utils-CHwkiE7w.js";import{b as Wn,C as ro,g as Bn,k as jn,a as Gn}from"./CollapseButtonAugment-D7C6pQtq.js";import{o as pt}from"./keypress-fD7XHdyk.js";import{a as Pr}from"./await-B0-dHWqK.js";import{d as Jo,c as Vn,s as Yo,a as is,i as Hn,S as St,h as Yt,j as Kn,k as Xo,l as Jn,b as Yn,O as Xn}from"./index-BcYmouan.js";import"./legacy-2-VBD5Kq.js";import{i as Xs}from"./lifecycle-CWu4CNTE.js";import{s as Qn,d as Zn}from"./index-C6s5m6Q5.js";import{d as qr}from"./utils-C8k4ijpS.js";import{e as Us,U as Qo}from"./toggleHighContrast-nRmgfX6B.js";import{b as Hs,B as Ks}from"./types-M1pd3FSp.js";import{F as el}from"./index-Dqp5W2S2.js";import{M as tl}from"./index-Ba8SPQX6.js";try{_s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Fo=new _s.Error().stack)&&(_s._sentryDebugIds=_s._sentryDebugIds||{},_s._sentryDebugIds[Fo]="a4164d84-c4d4-4aa9-ad1d-729ae513459c",_s._sentryDebugIdIdentifier="sentry-dbid-a4164d84-c4d4-4aa9-ad1d-729ae513459c")}catch{}var _s,Fo;function sl(n){return n.type===Vt.AGENT_MEMORY||n.type===Vt.TOOL_USE&&n.tool_use?.tool_name==="remember"}function ol(n){return n.type===Vt.TOOL_USE&&n.tool_use?.tool_name==="view"}function rl(n){return n.type===Vt.TOOL_USE&&n.tool_use?.tool_name==="str-replace-editor"||n.tool_use?.tool_name==="save-file"}function Zo(n){const t=new Set;for(const o of n)if(o.type===Vt.TOOL_USE&&o.tool_use?.input_json)try{const i=JSON.parse(o.tool_use.input_json);t.add(i.path)}catch{}return t.delete(void 0),t.size}const al=Symbol("undefined"),nl=Symbol("null");function Wr(n){const t=new WeakMap;return o=>{const i=(_=al,c=nl,(g=o)===void 0?_:g===null?c:g);var g,_,c;return t.has(i)||t.set(i,n(o)),((p,A)=>{if(!p.has(A))throw new Error("Value not found in cache");return p.get(A)})(t,i)}}const ll=Wr((function(n){if(!n)return;const t=n.filter((o=>xr(o))).map((o=>{return"response_text"in(i=o)?i.response_text??"":"";var i})).filter((o=>o.length>0));return t.length>0?t.join(`
`):void 0})),il=Wr((function(n){let t=[];if(!n)return t;for(const o of n)xr(o)&&o.structured_output_nodes&&(t=t.concat(o.structured_output_nodes));return t}));function Tt(n,t){return n==null?t:typeof n=="string"?n:t}function bo(n,t){de(t,!0);const o=st(),i=g=>{const _=Ma(),c=Da(_);return o(Oa(c.concat(t.name),g)),()=>{o(Fa(c.concat(t.name),g))}};Te((()=>{if(!t.isDisabled&&t.handler)return t.debounce?i(kr(t.handler,typeof t.debounce=="number"?t.debounce:300,{leading:!0,trailing:!0})):i(t.handler)})),ue()}var cl=T('<span class="c-shortcut-hint__icon svelte-1mrhglx"> </span>'),dl=T('<span class="c-shortcut-hint__icon-delimeter svelte-1mrhglx">or</span>'),ul=T('<span> <span class="c-shortcut-hint svelte-1mrhglx"></span></span>');function yo(n,t){de(t,!0);const o=()=>he(e(p),"$keyBindingString",i),[i,g]=Se();let _=B(t,"keysOnly",3,!1);const c=Pa(),p=r((()=>t.keybinding?Qt(ja(t.keybinding)):Ba(t.commandName))),A=r((()=>o()?Wa(o()):[])),h=r((()=>o()&&t.commandName&&he(c,"$keybindingsMetadata",i)[t.commandName]?.name||""));var a=ul(),U=y(a),S=F(U);Ce(S,21,(()=>e(A)),_t,((w,d)=>{var l=j(),u=D(l),f=k=>{var b=cl(),x=y(b);H((()=>se(x,e(d).icon))),s(k,b)},v=k=>{var b=dl();s(k,b)};z(u,(k=>{qa(e(d))?k(f):k(v,!1)})),s(w,l)})),H((()=>se(U,`${(_()?"":e(h))??""} `))),s(n,a),ue(),g()}function Br(n){if(!n)return"";const t=n instanceof Date?n:new Date(n),o=new Date().getTime()-t.getTime(),i=Math.floor(o/1e3),g=Math.floor(i/60);return Math.floor(g/60)<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function jr(n){if(!n)return"";const t=n instanceof Date?n:new Date(n);return t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Pg(n,t){const o=n.getTime()-t.getTime();return Math.floor(o/864e5)}var Ds=(n=>(n.agentEdits="agent-edits",n.tasks="tasks",n.messageHistory="message-history",n.agentGitEdits="agent-git-edits",n.memory="memory",n))(Ds||{});class os{static CTX_KEY=Symbol("chat-thread-body-model");static setInContext(t){return Ot(os.CTX_KEY,t),t}static getFromContext(){const t=Ze(os.CTX_KEY);if(!t)throw new Error("ChatThreadBodyModel not found in context. Did you forget to set it?");return t}static tryGetFromContext(){try{return Ze(os.CTX_KEY)}catch{return}}_activeTab;_config;activeTab;config;availableTabs;shouldShowTabs;constructor(t){const{initialConfig:o,enableAgentGitTracker:i,externalState:g,isAgentConversation:_}=t;this._config=Ft(o),this._activeTab=Ft(o.defaultTab),this.activeTab=Po(this._activeTab),this.config=Po(this._config),this.availableTabs=Gs([g,i,_],(([c,p,A])=>{const h=[];return c.showMessageHistory&&h.push("message-history"),c.showTasks&&h.push("tasks"),c.showAgentEdits&&h.push("agent-edits"),A&&p&&h.push("agent-git-edits"),h})),this.shouldShowTabs=Gs(this.availableTabs,(c=>c.length>0)),this.setupTabAutoSelection()}setActiveTab(t){this._activeTab.set(t)}getCurrentActiveTab(){let t;return this.activeTab.subscribe((o=>t=o))(),t}getCurrentAvailableTabs(){let t=[];return this.availableTabs.subscribe((o=>t=o))(),t}switchToNextTab(){const t=this.getCurrentActiveTab(),o=this.getCurrentAvailableTabs();if(o.length===0)return void this.setActiveTab(void 0);const i=((t?o.indexOf(t):-1)+1)%o.length;this.setActiveTab(o[i])}switchToPreviousTab(){const t=this.getCurrentActiveTab(),o=this.getCurrentAvailableTabs();if(o.length===0)return void this.setActiveTab(void 0);const i=t?o.indexOf(t):-1,g=i<=0?o.length-1:i-1;this.setActiveTab(o[g])}selectDefaultTab(t){if(t.length!==0)return t.includes("message-history")?"message-history":t.find((o=>o!=="agent-git-edits"))||void 0}setupTabAutoSelection(){Gs([this.availableTabs,this.activeTab],(([t,o])=>({available:t,active:o}))).subscribe((({available:t,active:o})=>{o&&!t.includes(o)?t.length>0?this.setActiveTab(this.selectDefaultTab(t)):this.setActiveTab(void 0):!o&&t.length>0&&this.setActiveTab(this.selectDefaultTab(t))}))}destroy(){}}function qg(n,t,o,i={}){const g={defaultTab:"message-history",...i};return new os({initialConfig:g,enableAgentGitTracker:n,externalState:t,isAgentConversation:o})}var vl=T('<div class="c-edit-change-summary svelte-10rin2e"><!> <!></div>'),pl=T('<div class="c-edit-change-summary svelte-10rin2e"><!></div>');function Gr(n,t){de(t,!0);const o=d=>{Hs(d,{color:"success",get size(){return c()},variant:"soft",children:(l,u)=>{var f=J();H((()=>se(f,`+${g()??""}`))),s(l,f)},$$slots:{default:!0}})},i=d=>{Hs(d,{color:"error",get size(){return c()},variant:"soft",children:(l,u)=>{var f=J();H((()=>se(f,`-${_()??""}`))),s(l,f)},$$slots:{default:!0}})};let g=B(t,"totalAddedLines",3,0),_=B(t,"totalRemovedLines",3,0),c=B(t,"size",3,0),p=B(t,"tooltips",3,!1),A=B(t,"loading",3,!1);function h(d,l){return l===0?"":`${Dt(l,"line")} ${d}`}var a=j(),U=D(a),S=d=>{},w=d=>{var l=j(),u=D(l),f=k=>{var b=vl(),x=y(b),R=I=>{var $=j(),m=D($),E=N=>{{let O=r((()=>h("added",g())));We(N,{get content(){return e(O)},children:(P,W)=>{o(P)},$$slots:{default:!0}})}},C=N=>{o(N)};z(m,(N=>{p()?N(E):N(C,!1)})),s(I,$)};z(x,(I=>{g()>0&&I(R)}));var L=F(x,2),M=I=>{var $=j(),m=D($),E=N=>{{let O=r((()=>h("removed",_())));We(N,{get content(){return e(O)},children:(P,W)=>{i(P)},$$slots:{default:!0}})}},C=N=>{i(N)};z(m,(N=>{p()?N(E):N(C,!1)})),s(I,$)};z(L,(I=>{_()>0&&I(M)})),Bt(3,b,(()=>Ca),(()=>({duration:150,start:.9}))),s(k,b)},v=k=>{var b=pl(),x=y(b);Hs(x,{color:"neutral",get size(){return c()},variant:"soft",children:(R,L)=>{var M=J("No changes");s(R,M)},$$slots:{default:!0}}),s(k,b)};z(u,(k=>{g()>0||_()>0?k(f):k(v,!1)}),!0),s(d,l)};z(U,(d=>{A()?d(S):d(w,!1)})),s(n,a),ue()}const Vr="taskMetricsContext";var uo,gl=((uo=gl||{}).v1="v1",uo.v2="v2",uo);class Wg{store;reportedMetrics=new Set;version;constructor(t){this.store=t.store,this.version=t.version||"v2"}getConversationId(){const t=Ga.select(this.store.getState());return Va.select(this.store.getState(),t)?.request_id||t}buildTaskListUsageData(t,o=ks.user){return{action:t,totalTasksCount:Ha.select(this.store.getState(),this.getConversationId()).total,triggeredBy:o}}reportMetric(t,o=ks.user,i){try{const g={...this.buildTaskListUsageData(t,o),taskListVersion:this.version,...i},_=this.getConversationId(),c={taskListUsageData:g};this.store.dispatch(Ka({eventName:Ja.taskListUsage,conversationId:_,eventData:c}))}catch(g){console.error("Failed to report task metric:",g)}}reportViewTaskList(t=!0){const o="viewTaskList";t&&this.reportedMetrics.has(o)||(this.reportMetric(ht.viewTaskList),t&&this.reportedMetrics.add(o))}reportUpdateTaskStatus(){this.reportMetric(ht.updateTaskStatus)}reportUpdateTaskName(){this.reportMetric(ht.updateTaskName)}reportUpdateTaskDescription(){this.reportMetric(ht.updateTaskDescription)}reportAddTask(){this.reportMetric(ht.addTask)}reportAddSubtask(){this.reportMetric(ht.addSubtask)}reportDeleteTask(){this.reportMetric(ht.deleteTask)}reportReorganizeTaskList(){this.reportMetric(ht.reorganizeTaskList)}reportRunSingleTask(){this.reportMetric(ht.runSingleTask)}reportRunAllTasks(){this.reportMetric(ht.runAllTasks)}reportExportTaskList(){this.reportMetric(ht.exportTaskList)}reportImportTaskList(){this.reportMetric(ht.importTaskList)}reportSyncTaskList(){this.reportMetric(ht.syncTaskList)}reportClearCompletedTasks(){this.reportMetric(ht.clearCompletedTasks,ks.user)}reportClearAllTasks(){this.reportMetric(ht.clearAllTasks,ks.user)}reportContinueTasksInNewChat(){this.reportMetric(ht.continueTasksInNewChat,ks.user)}reportCustomAction(t,o=ks.user,i){this.reportMetric(t,o,i)}resetReportedMetrics(){this.reportedMetrics.clear()}getVersion(){return this.version}}function ao(){return Ze(Vr)}function Bg(n){return Ot(Vr,n),n}function er(n,t){de(t,!0);let o=B(t,"size",3,1);const i={[nt.NOT_STARTED]:"circle-dashed",[nt.IN_PROGRESS]:"circle-dot-dashed",[nt.COMPLETE]:"circle-check-big",[nt.CANCELLED]:"circle-minus"};ve(n,{get name(){return i[t.taskState]},get size(){return o()}}),ue()}var hl=T("<!> <!>",1);function ml(n,t){de(t,!0);const o=()=>he(h,"$currentConversationId",i),[i,g]=Se(),_=b=>{{let x=r((()=>!p()));Oe(b,{size:.5,get variant(){return e(w)},get color(){return e(S)},get readonly(){return e(x)},onclick:()=>{p()&&G(d,!e(d))},children:(R,L)=>{er(R,{get taskState(){return t.taskState},size:2})},$$slots:{default:!0}})}},c=B(t,"taskUuid",19,(()=>{})),p=B(t,"interactive",3,!0),A=B(t,"initialDropdownOpen",3,!1),h=kt(),a=st(),U=ao(),S=r((()=>Ya(t.taskState))),w=r((()=>Xa(t.taskState)));let d=le(Ve(A()));const l=Object.values(nt);var u=j(),f=D(u),v=b=>{var x=j(),R=D(x);{let L=r((()=>[Ht.Click]));Le(R,(()=>Ge.Root),((M,I)=>{I(M,{get triggerOn(){return e(L)},get open(){return e(d)},onOpenChange:$=>G(d,$,!0),children:($,m)=>{var E=hl(),C=D(E);Le(C,(()=>Ge.Trigger),((O,P)=>{P(O,{children:(W,q)=>{{let Y=r((()=>[Ht.Hover]));We(W,{content:"Change Status",get triggerOn(){return e(Y)},children:(V,te)=>{_(V)},$$slots:{default:!0}})}},$$slots:{default:!0}})}));var N=F(C,2);Le(N,(()=>Ge.Content),((O,P)=>{P(O,{size:1,side:"bottom",align:"start",children:(W,q)=>{var Y=j(),V=D(Y);Ce(V,16,(()=>l),(te=>te),((te,K)=>{var X=j(),ee=D(X);{const Q=oe=>{er(oe,{get taskState(){return K},size:1})};let Z=r((()=>K===t.taskState));Le(ee,(()=>Ge.Item),((oe,ae)=>{ae(oe,{onSelect:()=>(async function(ie){c()&&o()&&p()&&ie!==t.taskState&&(U?.reportUpdateTaskStatus(),a(Co(o(),c(),{state:ie},to.USER)),G(d,!1))})(K),get highlight(){return e(Z)},iconLeft:Q,children:(ie,ne)=>{var ce=J();H((pe=>se(ce,pe)),[()=>As(K)]),s(ie,ce)},$$slots:{iconLeft:!0,default:!0}})}))}s(te,X)})),s(W,Y)},$$slots:{default:!0}})})),s($,E)},$$slots:{default:!0}})}))}s(b,x)},k=b=>{_(b)};z(f,(b=>{p()?b(v):b(k,!1)})),s(n,u),ue(),g()}var fl=T('<div class="c-task-action-buttons svelte-1raumhf"><!> <!></div>');const Hr=Symbol("task-focus-context");class _l{#e=le(null);get _focusedTaskId(){return e(this.#e)}set _focusedTaskId(t){G(this.#e,t,!0)}_deletionTimeout=null;#t=le(null);get _pendingDeletionTaskId(){return e(this.#t)}set _pendingDeletionTaskId(t){G(this.#t,t,!0)}#s=le(null);get _lastTopLevelTaskId(){return e(this.#s)}set _lastTopLevelTaskId(t){G(this.#s,t,!0)}get focusedTaskId(){return this._focusedTaskId}get deletionTimeout(){return this._deletionTimeout}setFocusedTask(t){this._focusedTaskId=t,this._pendingDeletionTaskId===t&&this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}clearFocusedTask(t){this._focusedTaskId===t&&(this._focusedTaskId=null)}scheduleDeletion(t,o){this._deletionTimeout&&clearTimeout(this._deletionTimeout),this._pendingDeletionTaskId=t,this._deletionTimeout=setTimeout((async()=>{this._focusedTaskId!==t&&await o(),this._deletionTimeout=null,this._pendingDeletionTaskId=null}),500)}cancelDeletion(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}isTaskFocused(t){return this._focusedTaskId===t}isLastTopLevelTask(t){return t===this._lastTopLevelTaskId}setLastTopLevelTask(t){this._lastTopLevelTaskId=t}cleanup(){this._deletionTimeout&&(clearTimeout(this._deletionTimeout),this._deletionTimeout=null,this._pendingDeletionTaskId=null)}delayBlur(){return new Promise((t=>setTimeout(t,10)))}}function No(){return Ze(Hr)}var kl=T('<div class="c-task-details svelte-a83104"><!></div>');function $l(n,t){de(t,!0);const o=()=>he(U,"$conversationId",i),[i,g]=Se();let _=B(t,"editable",3,!0),c=B(t,"showIfEmpty",3,!1),p=B(t,"hasFocus",15,!1);const A=ao(),h=No(),a=st(),U=kt();let S=le(Ve(t.task.description)),w=le(void 0);const d=r((()=>!t.task.description.trim())),l=r((()=>!e(d)||p()||c()));function u(){p(!0),h?.setFocusedTask(t.task.uuid)}async function f(){_()&&o()&&(e(S).trim()!==t.task.description?(A?.reportUpdateTaskDescription(),a(Co(o(),t.task.uuid,{description:e(S).trim()},to.USER))):e(S).trim()||t.task.name.trim()||(h?.isLastTopLevelTask(t.task.uuid)?h.scheduleDeletion(t.task.uuid,(async()=>{a(us(o(),t.task.uuid))})):a(us(o(),t.task.uuid))),e(w)?.blur()),await h?.delayBlur(),p(!1),h?.clearFocusedTask(t.task.uuid)}async function v(R){if(R.key==="Escape"&&(R.preventDefault(),R.stopPropagation(),G(S,t.task.description,!0),e(w)?.blur()),R.key==="Enter"&&!R.shiftKey&&!R.ctrlKey&&!R.metaKey){if(R.preventDefault(),R.stopPropagation(),!o())return;a(Ur(o(),t.task.uuid))}}var k=j(),b=D(k),x=R=>{var L=kl(),M=y(L);{let I=r((()=>!_()));Rs(M,{size:1,variant:"ghost",placeholder:"Add task description...",onkeydown:v,onfocus:u,onblur:f,get disabled(){return e(I)},resize:"none",outline:!1,maxHeight:"10lh",get textInput(){return e(w)},set textInput($){G(w,$,!0)},get value(){return e(S)},set value($){G(S,$,!0)}})}Bt(3,L,(()=>fo),(()=>({duration:150}))),s(R,L)};z(b,(R=>{e(l)&&R(x)})),s(n,k),ue(),g()}var bl=T("<div><!></div>");function yl(n,t){de(t,!0);const o=()=>he(U,"$conversationId",i),[i,g]=Se();let _=B(t,"editable",3,!0),c=B(t,"hasFocus",15,!1),p=B(t,"isEmpty",31,(()=>!t.task.name.trim()));const A=ao(),h=No(),a=st(),U=kt();let S=le(Ve(t.task.name));{let w=r((()=>!_()));(function(d,l){de(l,!0);let u=B(l,"value",15,""),f=B(l,"disabled",3,!1),v=B(l,"placeholder",3,""),k=B(l,"clickToEdit",3,!1),b=B(l,"variant",3,"surface"),x=B(l,"size",3,2),R=B(l,"outline",3,!0),L=B(l,"editing",15,!1),M=$r(l,["$$slots","$$events","$$legacy","value","disabled","placeholder","clickToEdit","variant","size","color","class","outline","editing","onstartEdit","onacceptEdit","oncancelEdit","onkeydown","onclick","onblur","onfocus","onchange"]),I=le(Ve(u())),$=le(void 0),m=le(void 0);async function E(q){f()||!e($)||L()||(G(I,u(),!0),l.onstartEdit?.({value:u()}),e($).focus(),q?.selectAll&&(await mo(),e($)?.select()),L(!0))}function C(){const q=u(),Y=e(I).trim();q!==Y?(u(Y),l.onacceptEdit?.({oldValue:q,newValue:Y}),document.activeElement===e($)&&e($)?.blur(),L(!1)):N()}function N(){G(I,u(),!0),l.oncancelEdit?.({value:u()}),document.activeElement===e($)&&e($)?.blur(),L(!1)}Te((()=>{L()&&l.onchange?.({value:e(I)})}));var O={startEdit:E,acceptEdit:C,cancelEdit:N},P=bl(),W=y(P);Za(W,tt({get size(){return x()},get variant(){return b()},get color(){return l.color},get placeholder(){return v()},get disabled(){return f()},get outline(){return R()}},(()=>M),{onkeydown:function(q){const Y=q;Y.key==="Enter"?C():Y.key==="Escape"&&N(),l.onkeydown?.(Y)},onfocus:function(q){!k()||f()||L()||E(),l.onfocus?.(q)},onblur:function(q){C(),l.onblur?.(q)},onclick:function(q){l.onclick?.(q)},get textInput(){return e($)},set textInput(q){G($,q,!0)},get value(){return e(I)},set value(q){G(I,q,!0)}})),Ct(P,(q=>G(m,q)),(()=>e(m))),H((()=>Qe(P,1,ps(["c-editable-text",l.class]),"svelte-1ujyjwr"))),s(d,P),ue(O)})(n,{class:"c-task-name-editor",variant:"ghost",placeholder:"Name this task...",size:1,get disabled(){return e(w)},clickToEdit:!0,outline:!1,onchange:function({value:d}){p(!d.trim())},onacceptEdit:async function(d){if(!_()||!o())return;const l=d.newValue.trim();l||t.task.description.trim()?l!==t.task.name&&l&&(A?.reportUpdateTaskName(),a(Co(o(),t.task.uuid,{name:l},to.USER))):h?.isLastTopLevelTask(t.task.uuid)?h.scheduleDeletion(t.task.uuid,(async()=>{a(us(o(),t.task.uuid))})):a(us(o(),t.task.uuid))},oncancelEdit:async function({value:d}){await h?.delayBlur(),c(!1),h?.clearFocusedTask(t.task.uuid),d.trim()||t.task.description.trim()||!o()||!_()||(h?.isLastTopLevelTask(t.task.uuid)?h.scheduleDeletion(t.task.uuid,(async()=>{a(us(o(),t.task.uuid))})):a(us(o(),t.task.uuid)))},onfocus:function(){c(!0),h?.setFocusedTask(t.task.uuid)},onblur:async function(){await h?.delayBlur(),c(!1),h?.clearFocusedTask(t.task.uuid)},onkeydown:async function(d){if(d.key==="Enter"&&!d.shiftKey&&!d.ctrlKey&&!d.metaKey&&_()){if(await mo(),!e(S).trim()||!o())return;a(Ur(o(),t.task.uuid)),d.preventDefault(),d.stopPropagation()}},get value(){return e(S)},set value(d){G(S,d,!0)}})}ue(),g()}var wl=T('<div class="c-draggable-list-item__handle svelte-1oucz2t"><!></div>'),Sl=T('<div data-testid="draggable-list-item" tabindex="0" role="button"><div class="c-draggable-list-item__content svelte-1oucz2t"><!> <!> <div class="c-draggable-list-item__main svelte-1oucz2t"><!></div> <div class="c-draggable-list-item__actions"><!></div></div> <div><!></div></div>');function Kr(n,t){de(t,!0);let o=B(t,"disabled",3,!1),i=B(t,"hasNestedItems",3,!1),g=B(t,"expanded",15,!0),_=B(t,"selected",3,!1),c=B(t,"showConnectors",19,i),p=B(t,"expandable",19,i),A=B(t,"element",15);function h(){g(!g())}var a=Sl();let U;a.__mousedown=function(...m){t.onmousedown?.apply(this,m)},a.__click=function(...m){t.onclick?.apply(this,m)},a.__keydown=function(...m){t.onkeydown?.apply(this,m)},a.__keyup=function(...m){t.onkeyup?.apply(this,m)},a.__focusin=function(...m){t.onfocusin?.apply(this,m)},a.__focusout=function(...m){t.onfocusout?.apply(this,m)};var S=y(a),w=y(S),d=m=>{var E=wl(),C=y(E);xe(C,(()=>t.handle),(()=>t.item)),s(m,E)};z(w,(m=>{t.handle&&m(d)}));var l=F(w,2),u=m=>{{let E=r((()=>g()?"Collapse":"Expand"));Oe(m,{class:"c-draggable-list-item__expand-collapse-button",size:.5,variant:"ghost-block",color:"neutral",onclick:h,get"aria-expanded"(){return g()},get"aria-label"(){return e(E)},children:(C,N)=>{{let O=r((()=>g()?"chevron-down":"chevron-right"));ve(C,{get name(){return e(O)},size:2})}},$$slots:{default:!0}})}};z(l,(m=>{p()&&i()&&m(u)}));var f=F(l,2),v=y(f),k=m=>{var E=j(),C=D(E);xe(C,(()=>t.headerContents),(()=>t.item)),s(m,E)};z(v,(m=>{t.headerContents&&m(k)}));var b=F(f,2),x=y(b),R=m=>{var E=j(),C=D(E);xe(C,(()=>t.actions),(()=>t.item)),s(m,E)};z(x,(m=>{t.actions&&m(R)}));var L=F(S,2);let M;var I=y(L),$=m=>{var E=j(),C=D(E);xe(C,(()=>t.contents),(()=>t.item)),s(m,E)};z(I,(m=>{t.contents&&m($)})),Ct(a,(m=>A(m)),(()=>A())),H((()=>{U=Qe(a,1,ps(["c-draggable-list-item",t.class]),"svelte-1oucz2t",U,{"is-disabled":o(),"has-nested-items":i(),"is-expanded":g(),"is-selected":_()}),gt(a,"id",t.id),gt(a,"data-item-id",t.id),M=Qe(L,1,"c-draggable-list-item__contents",null,M,{"c-draggable-list-item__show-connectors":c(),"c-draggable-list-item__has-handle":t.handle})})),xt("keypress",a,(function(...m){t.onkeypress?.apply(this,m)})),xt("focus",a,(function(...m){t.onfocus?.apply(this,m)})),xt("blur",a,(function(...m){t.onblur?.apply(this,m)})),s(n,a),ue()}ts(["mousedown","click","keydown","keyup","focusin","focusout"]);const Ro="taskFilterContext";class jg{#e=le(Ve(new Set(Object.values(nt))));get activeFilters(){return e(this.#e)}set activeFilters(t){G(this.#e,t,!0)}allStates=Object.values(nt);#t=r((()=>[{value:nt.NOT_STARTED,label:As(nt.NOT_STARTED)},{value:nt.IN_PROGRESS,label:As(nt.IN_PROGRESS)},{value:nt.COMPLETE,label:As(nt.COMPLETE)},{value:nt.CANCELLED,label:As(nt.CANCELLED)}]));get taskFilters(){return e(this.#t)}set taskFilters(t){G(this.#t,t)}#s=r((()=>this.activeFilters.size<this.allStates.length));get hasActiveFilters(){return e(this.#s)}set hasActiveFilters(t){G(this.#s,t)}#o=r((()=>this.activeFilters.size===this.allStates.length));get allSelected(){return e(this.#o)}set allSelected(t){G(this.#o,t)}#r=r((()=>this.activeFilters.size>0&&this.activeFilters.size<this.allStates.length));get isIndeterminate(){return e(this.#r)}set isIndeterminate(t){G(this.#r,t)}constructor(t){t&&(this.activeFilters=t)}toggleFilter(t){const o=new Set(this.activeFilters);o.has(t)?o.delete(t):o.add(t),this.activeFilters=o}toggleAll(){const t=this.activeFilters.size===this.allStates.length,o=this.activeFilters.size>0;this.activeFilters=o&&!t?new Set(this.allStates):t?new Set:new Set(this.allStates)}resetFilters(){this.activeFilters=new Set(this.allStates)}clearAll(){this.activeFilters=new Set}selectAll(){this.activeFilters=new Set(this.allStates)}isFilterActive(t){return this.activeFilters.has(t)}}function Gg(){const n=Ze(Ro);if(!n)throw new Error("TaskFilterContext not found. Make sure to call setTaskFilterContext first.");return n}function Tl(){return Ze(Ro)}function Vg(n){return Ot(Ro,n),n}var Il=T('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),xl=T('<div class="c-task-tree__spacer svelte-1gknqtu"><!></div>'),Ul=T('<div class="c-task-tree__root-children svelte-1gknqtu"><!> <!></div>'),El=T('<div class="c-task-tree__item-action-buttons svelte-1gknqtu"><!></div>'),Cl=T('<div class="c-task-tree__item-header svelte-1gknqtu"><div class="c-task-tree__item-status-cell svelte-1gknqtu"><!></div> <div><!></div></div>'),Al=T('<div class="c-task-tree__item-animation-wrapper svelte-1gknqtu"><!></div>'),Ll=T('<div class="c-task-tree__item-subtasks svelte-1gknqtu"></div>'),zl=T('<div class="c-task-tree__item-details svelte-1gknqtu"><!></div> <!>',1);function Qs(n,t){de(t,!0);const o=()=>he(e(U),"$task",_),i=()=>he(e(x),"$visibleSubTasks",_),g=()=>he(a,"$conversationId",_),[_,c]=Se();let p=B(t,"editable",3,!0),A=B(t,"isRootTask",3,!0);const h=st(),a=kt(),U=r((()=>Bo(t.taskUuid))),S=Tl();let w=No();A()&&!w&&(w=new _l,Ot(Hr,w)),A()&&w&&gs((()=>{w?.cleanup()}));let d=le(!0),l=le(!1),u=le(!1),f=le(!0);const v=r((()=>e(l)||e(u))),k=r((()=>o()?.state===nt.CANCELLED)),b=r((()=>tn(t.taskUuid))),x=r((()=>en(t.taskUuid,S?.activeFilters)));Te((()=>{if(A()&&w&&i().length>0){const m=i().at(-1);m&&w.setLastTopLevelTask(m.uuid)}}));const R=r((()=>!o()?.name.trim()&&!o()?.description.trim()));var L=j(),M=D(L),I=m=>{var E=Ul(),C=y(E);Ce(C,1,i,(P=>P.uuid),((P,W)=>{var q=Il();Qs(y(q),{get taskUuid(){return e(W).uuid},get editable(){return p()},isRootTask:!1}),Bt(3,q,(()=>fo),(()=>({duration:150}))),s(P,q)}));var N=F(C,2),O=P=>{var W=xl(),q=y(W);Ut(q,{variant:"soft",color:"neutral",size:.5,onclick:()=>(async function(V){if(g()&&p()){if(S?.resetFilters(),A()){const te=i().at(-1);if(te&&!te.name.trim()&&!te.description.trim())return void sn(te.uuid)}h(on(g()))}})(),iconLeft:V=>{ve(V,{name:"circle-fading-plus"})},children:(V,te)=>{var K=J("Add Task");s(V,K)},$$slots:{iconLeft:!0,default:!0}}),s(P,W)};z(N,(P=>{p()&&P(O)})),s(m,E)},$=m=>{var E=j(),C=D(E),N=O=>{const P=(W,q=Me)=>{var Y=El();(function(V,te){de(te,!0);const K=()=>he(oe,"$currentConversationId",ee),X=()=>he(e(ae),"$task",ee),[ee,Q]=Se();let Z=B(te,"editable",3,!0);const oe=kt(),ae=r((()=>Bo(te.taskUuid))),ie=st(),ne=ao(),ce=os.tryGetFromContext();async function pe(){Z()&&K()&&(ne?.reportDeleteTask(),ie(us(K(),te.taskUuid)))}async function fe(){X()&&Z()&&X().state===nt.NOT_STARTED&&K()&&(ce&&ce.setActiveTab(Ds.messageHistory),ne?.reportRunSingleTask(),ie(Qa(K(),te.taskUuid)))}const _e=r((()=>X()?.state===nt.NOT_STARTED));var me=fl(),ke=y(me),ye=$e=>{{let Ie=r((()=>[Ht.Hover]));We($e,{content:"Run Task",get triggerOn(){return e(Ie)},children:(Ue,Je)=>{Oe(Ue,{size:.5,variant:"ghost-block",color:"neutral",onclick:fe,title:"Run task",class:"c-task-action-button c-task-action-button--play",children:(be,Ee)=>{ve(be,{name:"circle-play",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}};z(ke,($e=>{e(_e)&&$e(ye)}));var we=F(ke,2);{let $e=r((()=>[Ht.Hover]));We(we,{content:"Delete Task",get triggerOn(){return e($e)},children:(Ie,Ue)=>{Oe(Ie,{size:.5,variant:"ghost-block",color:"neutral",onclick:pe,title:"Delete task",class:"c-task-action-button c-task-action-button--delete",children:(Je,be)=>{ve(Je,{name:"trash-2",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}s(V,me),ue(),Q()})(y(Y),{get taskUuid(){return q().uuid},get editable(){return p()}}),s(W,Y)};{const W=(X,ee=Me)=>{var Q=Cl(),Z=y(Q);ml(y(Z),{get taskState(){return ee().state},get taskUuid(){return ee().uuid},get interactive(){return p()}});var oe=F(Z,2);let ae;yl(y(oe),{get task(){return ee()},get editable(){return p()},get hasFocus(){return e(l)},set hasFocus(ie){G(l,ie,!0)},get isEmpty(){return e(f)},set isEmpty(ie){G(f,ie,!0)}}),H((()=>ae=Qe(oe,1,"c-task-tree__item-name svelte-1gknqtu",null,ae,{"c-task-tree__item-text--cancelled":e(k)}))),s(X,Q)},q=(X,ee=Me)=>{var Q=zl(),Z=D(Q),oe=y(Z);{let ne=r((()=>e(v)&&!e(f)));$l(oe,{get task(){return ee()},get editable(){return p()},get showIfEmpty(){return e(ne)},get hasFocus(){return e(u)},set hasFocus(ce){G(u,ce,!0)}})}var ae=F(Z,2),ie=ne=>{var ce=Ll();Ce(ce,5,i,(pe=>pe.uuid),((pe,fe)=>{var _e=Al();Qs(y(_e),{get taskUuid(){return e(fe).uuid},get editable(){return p()},isRootTask:!1}),Bt(3,_e,(()=>fo),(()=>({duration:150}))),s(pe,_e)})),s(ne,ce)};z(ae,(ne=>{i()&&i().length>0&&e(d)&&ne(ie)})),s(X,Q)};let Y=r((()=>`task-${t.taskUuid}`)),V=r((()=>!!o().subTasks?.length)),te=r((()=>!p())),K=r((()=>p()&&!e(R)?P:void 0));Kr(O,{class:"c-task-tree__item",get item(){return o()},get id(){return e(Y)},get hasNestedItems(){return e(V)},get disabled(){return e(te)},expandable:!1,get actions(){return e(K)},get expanded(){return e(d)},set expanded(X){G(d,X,!0)},headerContents:W,contents:q,$$slots:{headerContents:!0,contents:!0}})}};z(C,(O=>{o()&&he(e(b),"$isTaskVisible",_)&&O(N)}),!0),s(m,E)};z(M,(m=>{A()?m(I):m($,!1)})),s(n,L),ue(),c()}const Jr=Symbol("transient-data-manager-context");function Mo(){return Ze(Jr)||(console.warn("TransientDataManager not found in context. Call setTransientDataManagerContext first."),new Map)}function Hg(){const n=Ot(Jr,new Map);return gs((()=>{n.clear()})),n}function Js(n){if(!n)return 0;if(n.nodeType===Node.TEXT_NODE)return 1;if(n.nodeType===Node.ELEMENT_NODE){let t=1;return n.childNodes.forEach((o=>{t+=Js(o)})),t}return 0}class Yr{constructor({enabled:t=!0,...o}={},i){this.onChange=i,this.enabled.set(t),this.enabled.subscribe((g=>{console.warn("IntersectionObserverManager: "+(g?"enabled":"disabled"))})),this.config=o}observers=new Map;_intersectionObserver=void 0;_isIntersection=new Map;enabled=Ft(!0);config={};isEnabled(){return br(this.enabled)}get intersectionObserver(){return this._intersectionObserver||this.setConfig(this.config),this._intersectionObserver}setConfig({enabled:t,...o}){const i=!Qn(this.config,o),g=t??this.isEnabled(),_=g!==this.isEnabled();if(i||_||!this._intersectionObserver)if(this.config={root:void 0,rootMargin:void 0,threshold:void 0,...o},this._intersectionObserver?.disconnect(),this.enabled.set(g),this.isEnabled()){this._intersectionObserver=new IntersectionObserver(this.handleIntersection,o);for(const c of this.observers.keys())this._intersectionObserver.observe(c)}else this._intersectionObserver=void 0}handleIntersection=t=>{for(const o of t){const i=this.observers.get(o.target);if(this._isIntersection.set(o.target,o.isIntersecting),i)for(const g of i)g(o)}this.onChange?.(this.stats())};stats(){let t=0;for(const i of this._isIntersection.values())i&&t++;let o=0;for(const i of this.observers.values())o+=i.size;return{visible:t,total:this.observers.size,totalListeners:o,domNodes:this.countNodes()}}observe(t,o){if(!this.isEnabled())return()=>{};let i=this.observers.get(t);return i&&this._intersectionObserver?i.add(o):(this.observers.set(t,i=new Set),i.add(o),this.intersectionObserver.observe(t)),()=>{const g=this.observers.get(t);g?.delete(o)&&(g?.size||(this.observers.delete(t),this._intersectionObserver?.unobserve(t)))}}once(t,o){const i=this.observe(t,(g=>{g.isIntersecting&&(o(g),i())}));return i}onVisibilityChange=(t,o)=>{let i=this.observe(t,o);return{destroy(){i()},update:g=>{i(),i=this.observe(t,g)}}};destroy(){if(this._intersectionObserver){for(const t of this.observers.keys())this._intersectionObserver?.unobserve(t);this._intersectionObserver.disconnect(),this._intersectionObserver=void 0}this.observers.clear(),this._isIntersection.clear()}countNodes(){const t=this.config.root??document?.documentElement;return t instanceof HTMLElement?Js(t):t instanceof Document?Js(t.body):t?Js(t):0}}const wo=Symbol("intersection-observer-manager-context");function Kg(n,t){const o=Ze(wo);if(o)return o.setConfig(n),o;const i=new Yr(n,t);return Ot(wo,i),gs((()=>{i.destroy()})),i}function Xr(){return Ze(wo)||(console.warn("IntersectionObserverManager not found in context.  Call setIntersectionObserverManagerContext first."),{enabled:Qt(!1)})}const Zs=Symbol("intersection-display-context");function tr(n=crypto.randomUUID(),t=Mo()){if(!n)return console.warn("intersectionId key not provided.  Using default context, this will not work if you have multiple IntersectionDisplay components in the hierarchy."),Ot(Zs,[void 0,Ft()]);const o=Ft(t?.has(n)?t.get(n):void 0);return t?o.subscribe((i=>{t.set(n,i)})):console.warn("No transient data manager found.  Intersection state will not be persisted."),Ot(Zs,o),o}function Qr(n,t,o=Zn,i=Mo()){return(...g)=>{const _=i.get(t);if(_&&o(_.args,g))return _.result;const c=n(...g);return i.set(t,{args:g,result:c}),c}}var Nl=T("<div><!></div>");const Jg=Object.freeze(Object.defineProperty({__proto__:null,default:function(n,t){de(t,!0);let o=B(t,"minHeight",3,"0px"),i=B(t,"debounceMeasureMs",3,100),g=B(t,"fixedHeight",3,!1),_=$r(t,["$$slots","$$events","$$legacy","minHeight","className","debounceMeasureMs","value","estimatedHeight","children","intersectionId","fixedHeight"]);tr(`intersection-display-${t.intersectionId}`);let c,p=le(!1),A=le(!1),h=le(void 0),a=Xr()?.onVisibilityChange;function U(x){G(p,x.isIntersecting,!0)}Te((()=>{return x=e(p),clearTimeout(c),void(c=setTimeout((()=>{G(A,x,!0)}),i()));var x})),gs((()=>{clearTimeout(c)})),Sa((()=>{e(A)&&G(h,e(u),!0)}));let S,w=le(0),d=r((()=>t.estimatedHeight?.(t.value,e(w)))),l=r((()=>{return Math.round(e(h)??e(d)??(x=o()?.replace("px",""),x==null?void 0:Number(x))??0);var x})),u=le(0),f=r((()=>g()&&e(h)?`height:${e(h)}px`:e(A)?"":`height:${e(l)}px;min-height:0px`));var v=Nl();Ta(v,(()=>({..._,class:["c-intersection-display",t.className],style:e(f),"data-intersection-estimated":e(d),"data-intersection-height":e(l),"data-intersection-id":t.intersectionId,"data-intersection-visible":e(A),[xa]:{"c-intersection-display__visible":e(p),"c-intersection-display__hidden":!e(p)},[Ia]:{"--intersection-height":`${e(l)??""}px`,"--intersection-cache-height":e(h)??"100px"}})),void 0,void 0,void 0,"svelte-1fhs4v0");var k=y(v),b=x=>{var R=j(),L=D(R);xe(L,(()=>t.children??Me)),s(x,R)};z(k,(x=>{e(A)&&x(b)})),qo((()=>Jo(v,"offsetHeight",(x=>G(u,x))))),Nt(v,((x,R)=>a?.(x,R)),(()=>U)),Ct(v,(x=>S=x),(()=>S)),qo((()=>Jo(v,"clientWidth",(x=>G(w,x))))),s(n,v),ue()},getIntersectionStoreContext:function(n){const t=Ze(Zs);return t?(br(t)||t.update((o=>o??n)),t):(console.warn("IntersectionDisplay context not found.  Call setIntersectionContext first."),Ft(n))},getTransientContextMemo:Qr,intersectionContextKey:Zs,setIntersectionContext:tr},Symbol.toStringTag,{value:"Module"}));var Rl=T('<div><!> <div class="c-codeblocks__action-bar-status svelte-191e2kt"> </div></div>');function sr(n,t){de(t,!0);let o=B(t,"location",3,"bottomBar"),i=B(t,"align",3,"right"),g=le(""),_=le(void 0);Ot("augment-codeblock-actions-message",{setMessageText:U=>{G(g,U,!0),e(_)&&clearTimeout(e(_)),G(_,setTimeout((()=>{G(g,"")}),2500),!0)}});var c=Rl();let p;var A=y(c);xe(A,(()=>t.children??Me));var h=F(A,2),a=y(h);H((()=>{p=Qe(c,1,"c-codeblocks__action-bar svelte-191e2kt",null,p,{"c-codeblocks__loc-top-bar":o()==="topBar","c-codeblocks__loc-bottom-bar":o()==="bottomBar","c-codeblocks__loc-left-align":i()==="left"}),se(a,e(g)||"")})),s(n,c),ue()}function Zr(n){return n?[".ipynb",".rmd",".qmd",".jl",".zmd"].some((t=>n.toLowerCase().endsWith(t))):!1}function ea(n){navigator.clipboard.writeText(n)}function ta(n,t,o){t.createFile(n,o||void 0),t.reportWebviewClientEvent(Gt.chatCodeblockCreate)}function or(n,t){let o=r((()=>t.data.title)),i=r((()=>t.data.onClick)),g=r((()=>t.data.onSuccessMessage)),_=r((()=>t.data.iconName)),c=r((()=>t.data.buttonText)),p=r((()=>t.data.onMouseDown)),A=r((()=>t.data.onMouseLeave)),h=r((()=>t.data.onMouseOver)),a=r((()=>t.data.onBlur)),U=r((()=>t.data.onFocus)),S=le(void 0),w=le(void 0),d=le(void 0);function l(u){u.stopPropagation(),e(i)(),G(S,e(g),!0),clearTimeout(e(d)),G(d,setTimeout((()=>e(w)?.requestClose()),1500),!0)}{let u=r((()=>e(S)??e(o)));Ct(We(n,{onOpenChange:function(f){f||(clearTimeout(e(d)),G(S,void 0),G(d,void 0))},get content(){return e(u)},children:(f,v)=>{{const k=I=>{var $=j(),m=D($),E=C=>{ve(C,{get name(){return e(_)}})};z(m,(C=>{e(_)&&C(E)})),s(I,$)};let b=r((()=>e(h)||cs)),x=r((()=>e(A)||cs)),R=r((()=>e(a)||cs)),L=r((()=>e(U)||cs)),M=r((()=>e(p)||cs));Ut(f,{variant:"ghost-block",color:"neutral",size:1,onclick:l,get onmouseover(){return e(b)},get onmouseleave(){return e(x)},get onblur(){return e(R)},get onfocus(){return e(L)},get onmousedown(){return e(M)},iconLeft:k,children:(I,$)=>{var m=j(),E=D(m),C=O=>{var P=j(),W=D(P);xe(W,(()=>t.children)),s(O,P)},N=O=>{var P=j(),W=D(P),q=Y=>{re(Y,{size:1,children:(V,te)=>{var K=J();H((()=>se(K,e(c)))),s(V,K)},$$slots:{default:!0}})};z(W,(Y=>{e(c)&&Y(q)}),!0),s(O,P)};z(E,(O=>{t.children?O(C):O(N,!1)})),s(I,m)},$$slots:{iconLeft:!0,default:!0}})}},$$slots:{default:!0}}),(f=>G(w,f,!0)),(()=>e(w)))}}var De=(n=>(n[n.copy=0]="copy",n[n.insert=1]="insert",n[n.smartPaste=2]="smartPaste",n[n.goTo=3]="goTo",n[n.directApply=4]="directApply",n))(De||{});function sa(n,t){return{codeblockActionType:De.copy,title:"Copy to clipboard",onClick:function(){const o=n();o&&ea(o)},onSuccessMessage:"Copied",iconName:"files",buttonText:"Copy",primary:!!t}}function oa(n,t,o,i){return{codeblockActionType:De.insert,title:t?.relPath?`Create new file at ${t.relPath}`:"Create new file",onClick:function(){const g=n();g&&o&&ta(g,o,t?.relPath)},onSuccessMessage:"Creating new file...",iconName:"file-plus",buttonText:"Create",primary:!!i}}function ra(n,t,o,i,g){return{codeblockActionType:De.goTo,title:`Go to ${o?.relPath}`,onClick:function(){o?.relPath&&(i.reportWebviewClientEvent(Gt.chatCodeblockGoToFile),g(Ts({repoRoot:"",pathName:o?.relPath??"",snippet:t?n:void 0})))},onSuccessMessage:"Opening file...",iconName:"external-link",buttonText:"Go to",primary:!1}}function aa(n,t){const{onVisible:o,onHidden:i,scrollTarget:g,threshold:_=.25,visibilityDuration:c=250,throttleDuration:p=100,ignoreScroll:A=!1}=t;let h=!1,a=null,U=!1,S=null;const w=new IntersectionObserver((f=>{f.forEach((v=>{h=v.isIntersecting,l()}))}),{threshold:_}),d=()=>{a!==null&&(clearTimeout(a),a=null),S!==null&&(clearTimeout(S),S=null)},l=Ko((()=>{h&&!U?a===null&&(a=setTimeout((()=>{o?.(),a=null}),c)):(i?.(),d())}),p),u=Ko((()=>{A||(U=!0,d(),S=setTimeout((()=>{U=!1,l()}),p))}),p);return w.observe(n),g.addEventListener("scroll",u,!0),{destroy(){w.disconnect(),g.removeEventListener("scroll",u),a!==null&&clearTimeout(a),S!==null&&clearTimeout(S)}}}function ns(n,t){const o=aa(n,{...t,onVisible:()=>{t.onVisible&&(t.onVisible(),o.destroy())},onHidden:()=>{t.onHidden&&(t.onHidden(),o.destroy())}});return{destroy:()=>{o.destroy()}}}function na(n,t,o,i,g,_,c,p,A,h,a){const U=!!t?.relPath,S=!!t?.mode&&t?.mode==="EDIT",w=(rn.select(n.getState()),kt.select(n.getState())),{enableDirectApply:d,enableSmartPaste:l,smartPastePrecomputeMode:u}=a;function f(){return!!l&&!!g&&!!(U&&S&&_)}function v(){if(!f()||!S)return!1;switch(u){case Bs.off:return!1;case Bs.visible:return c;case Bs.visibleHover:return c&&p;case Bs.on:return!0;default:return!1}}function k(L){L.dryRun&&!v()||o.text&&i&&w&&n.dispatch(an(w,i,o.text,t?.relPath,{...L,requireFileConfirmation:!U}))}const b=L=>({...L,iconName:"check",onMouseDown:M=>M.preventDefault(),onMouseOver:()=>k({dryRun:!0}),onFocus:()=>k({dryRun:!0})});let x,R;return d?(x=b({codeblockActionType:De.smartPaste,title:"Review changes before applying",stateTitle:{neutral:"Review changes before applying",success:"Opened",failure:"Failed to apply"},onClick:()=>{h(!0),k({})},onSuccessMessage:"Opening diff view...",buttonText:"Review"}),R=b({codeblockActionType:De.directApply,title:"Apply changes directly to file",stateTitle:{neutral:"Apply changes directly to file",success:"Applied",failure:"Failed to apply"},onClick:()=>{h(!0),k({instantApply:!0})},onSuccessMessage:"Applying changes directly...",buttonText:"Apply"})):x=b({codeblockActionType:De.smartPaste,title:"Apply changes",stateTitle:{neutral:"Apply changes",success:"Applied",failure:"Failed to apply"},onClick:()=>{h(!0),k({})},onSuccessMessage:"Opening diff view...",buttonText:"Apply"}),{smartPaste:k,canTriggerSmartPaste:f(),canPrecomputeSmartPaste:v(),smartPasteButton:x,directApplyButton:R}}function la(n,t,o){let i,g;return i?.destroy(),i=aa(n,{onVisible:()=>t(!0),onHidden:()=>t(!1),scrollTarget:document.body,threshold:.1}),g?.destroy(),g=Tr(n,new Ir({onHoverStart:()=>o(!0),onHoverEnd:()=>{},hoverTriggerDuration:600})),()=>{i?.destroy(),g?.destroy()}}var Ml=T("<span></span>"),Dl=T('<div class="c-codeblock__buttons-container svelte-p0xryu"><!></div>'),Ol=T("<!> <!>",1),Fl=T('<div class="c-codeblock__buttons-container svelte-p0xryu"><!> <!></div>');function Pl(n,t){de(t,!0);const[o,i]=Se();let g=B(t,"actionButtons",19,(()=>{})),_=B(t,"removeDefaultButtons",3,!1),c=B(t,"height",19,(()=>{})),p=le(void 0);const A=Ze("requestId");let h=r((()=>he(A,"$requestIdModel",o)));const a=kt(),U=$t();let S=le(void 0),w=le(!1),d,l=le(!1),u=le(void 0),f=le(!1),v=le(!1);Te((()=>{var $e;return!e(l)&&e(u)&&($e=e(u),d?.destroy(),d=ns($e,{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>G(l,!0)})),()=>{d?.destroy()}})),Te((()=>{e(l)&&t.codeblockMetadata?.relPath&&(async function(){t.codeblockMetadata?.relPath&&e(l)&&!e(w)&&(G(S,await U.resolvePath({rootPath:"",relPath:t.codeblockMetadata?.relPath}),!0),G(w,!0))})()}));let k=r((()=>g()?.find(($e=>$e.primary)))),b=r((()=>!!t.codeblockMetadata?.relPath)),x=r((()=>Zr(t.codeblockMetadata?.relPath??""))),R=r((()=>!!t.codeblockMetadata?.mode)),L=r((()=>e(R)&&t.codeblockMetadata?.mode==="EXCERPT"));const M=Et("enableDirectApply"),I=Et("enableSmartPaste"),$=Er(),m=so();let E=le(!1);const C=Cr(a,A);let N=r((()=>he(C,"$exchange",o)?.status===Zt.success)),O=r((()=>na(m.store,t.codeblockMetadata,t.token,e(h),e(N),!!e(S),e(f),e(v),0,($e=>G(E,$e,!0)),{enableDirectApply:he(M,"$enableDirectApply",o),enableSmartPaste:he(I,"$enableSmartPaste",o),smartPastePrecomputeMode:he($,"$smartPastePrecomputeMode",o)}))),P=r((()=>e(O).smartPaste)),W=r((()=>e(O).canTriggerSmartPaste)),q=r((()=>e(O).canPrecomputeSmartPaste)),Y=r((()=>e(O).smartPasteButton)),V=r((()=>e(O).directApplyButton));Te((()=>{e(q)&&e(P)({dryRun:!0})}));let te,K=r((()=>!e(k)&&e(b)&&e(w)&&!e(S))),X=r((()=>!e(k)&&e(W)&&!e(x))),ee=r((()=>e(K)||e(X)||e(k))),Q=r((()=>()=>e(p)?.getContents())),Z=r((()=>sa(e(Q),!e(ee)))),oe=r((()=>oa(e(Q),t.codeblockMetadata,U,e(K)))),ae=r((()=>e(b)&&e(S))),ie=r((()=>ra(t.token.text,e(L),t.codeblockMetadata,U,st()))),ne=r((()=>[e(Z),e(oe),...e(V)?[{...e(V),primary:e(X)}]:[],{...e(Y),primary:!e(V)&&e(X)}])),ce=r((()=>[...g()??[],...e(ae)?[e(ie)]:[],..._()?[]:e(ne)])),pe=r((()=>e(ce).reduce((([$e,Ie],Ue)=>Ue.primary?[[...$e,Ue],Ie]:[$e,[...Ie,Ue]]),[[],[]]))),fe=r((()=>Io(e(pe),2))),_e=r((()=>e(fe)[0])),me=r((()=>e(fe)[1])),ke=r((()=>t.codeblockMetadata?.language??t.token.lang));Te((()=>(e(u)&&e(N)&&(te=la(e(u),($e=>G(f,$e,!0)),($e=>G(v,$e,!0)))),()=>{te?.()})));let ye=le(void 0),we=r((()=>()=>e(ye)?.requestClose()));Ct(_o(n,{get token(){return t.token},get language(){return e(ke)},get height(){return c()},get element(){return e(u)},set element(Ue){G(u,Ue,!0)},topBarLeft:Ue=>{sr(Ue,{location:"topBar",children:(Je,be)=>{var Ee=Dl(),He=y(Ee),Be=Ae=>{{let ze=r((()=>({codeblockActionType:De.goTo,title:`Go to ${t.codeblockMetadata.relPath}`,onClick:e(ie).onClick,onSuccessMessage:"Opening file..."})));or(Ae,{get data(){return e(ze)},children:(Fe,lt)=>{es(Fe,{get filepath(){return t.codeblockMetadata.relPath},leftIcon:Pe=>{var Ye=Ml();s(Pe,Ye)},$$slots:{leftIcon:!0}})}})}};z(He,(Ae=>{t.codeblockMetadata?.relPath&&Ae(Be)})),s(Je,Ee)},$$slots:{default:!0}})},topBarRight:Ue=>{sr(Ue,{location:"topBar",align:"left",children:(Je,be)=>{var Ee=Fl(),He=y(Ee);Ce(He,17,(()=>e(_e)),_t,((ze,Fe)=>{or(ze,{get data(){return e(Fe)}})}));var Be=F(He,2),Ae=ze=>{var Fe=j(),lt=D(Fe);Le(lt,(()=>Ge.Root),((dt,Pe)=>{Ct(Pe(dt,{nested:!1,children:(Ye,ot)=>{var bt=Ol(),At=D(bt);Le(At,(()=>Ge.Trigger),((rt,je)=>{je(rt,{children:(it,yt)=>{Oe(it,{variant:"ghost-block",color:"neutral",size:1,children:(ct,wt)=>{ve(ct,{name:"ellipsis-vertical"})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var Lt=F(At,2);Le(Lt,(()=>Ge.Content),((rt,je)=>{je(rt,{side:"bottom",align:"end",children:(it,yt)=>{var ct=j(),wt=D(ct);Ce(wt,17,(()=>e(me)),_t,((Rt,at)=>{(function(zt,et){de(et,!0);let Kt,ls=r((()=>et.data.onClick)),no=r((()=>et.data.onSuccessMessage)),ut=r((()=>et.data.iconName)),Pt=r((()=>et.data.buttonText)),jt=r((()=>et.data.onMouseDown)),hs=r((()=>et.data.onMouseLeave)),Jt=r((()=>et.data.onMouseOver)),xs=r((()=>et.data.onBlur)),lo=r((()=>et.data.onFocus)),ms=le(void 0);function ba(){Kt||(e(ls)(),G(ms,e(no),!0),Kt=setTimeout((()=>{G(ms,void 0),Kt=void 0,et.closeDropdown()}),1500))}var Do=j(),ya=D(Do);{const wa=io=>{var Ws=j(),Mt=D(Ws),Oo=fs=>{ve(fs,{get name(){return e(ut)}})};z(Mt,(fs=>{e(ut)&&fs(Oo)})),s(io,Ws)};Le(ya,(()=>Ge.Item),((io,Ws)=>{Ws(io,{onSelect:ba,onmouseover:Mt=>e(Jt)?.(Mt),onmouseleave:Mt=>e(hs)?.(Mt),onblur:Mt=>e(xs)?.(Mt),onfocus:Mt=>e(lo)?.(Mt),onmousedown:Mt=>e(jt)?.(Mt),iconLeft:wa,children:(Mt,Oo)=>{var fs=J();H((()=>se(fs,e(ms)??e(Pt)))),s(Mt,fs)},$$slots:{iconLeft:!0,default:!0}})}))}s(zt,Do),ue()})(Rt,{get data(){return e(at)},get closeDropdown(){return e(we)}})})),s(it,ct)},$$slots:{default:!0}})})),s(Ye,bt)},$$slots:{default:!0}}),(Ye=>G(ye,Ye,!0)),(()=>e(ye)))})),s(ze,Fe)};z(Be,(ze=>{e(me).length&&ze(Ae)})),s(Je,Ee)},$$slots:{default:!0}})},$$slots:{topBarLeft:!0,topBarRight:!0}}),(Ue=>G(p,Ue,!0)),(()=>e(p))),ue(),i()}var ql=T('<div class="c-mermaid-block svelte-mbq130"><div style="position: relative"><!> <div><div class="c-mermaid-diagram svelte-mbq130"></div></div> <div><!> <!> <!> <!> <!> <!> <div class="c-mermaid-controls-container__down svelte-mbq130"><!></div></div></div></div>');function ia(n,t){de(t,!0);const[o,i]=Se(),g=$t();Ps((()=>{g?.reportWebviewClientEvent(Gt.chatMermaidblockInitialize)}));let _=le(!1),c=le(!0),p=le(!1),A=le(void 0),h=le(void 0),a=le(void 0);function U(){return e(_)&&!e(c)&&!e(p)}let S=!1;function w(){G(_,!e(_)),S||(S=!0,g?.reportWebviewClientEvent(Gt.chatMermaidblockToggle))}function d(K){K&&(G(_,!1),G(c,!1),e(p)||g?.reportWebviewClientEvent(Gt.chatMermaidBlockError)),G(p,K,!0)}function l(K){e(h)&&(e(h).style.top=`${K}px`)}function u(K){G(A,K,!0),e(A).setOnPan(v),e(A).setOnZoom(v)}let f=!1;function v(){f||(g?.reportWebviewClientEvent(Gt.chatMermaidblockInteract),f=!0)}function k(K){G(a,K,!0)}let b=r((()=>he(xo,"$themeStore",o)?.category));Te((()=>{t.token.raw.trim().endsWith("```")&&!e(p)&&(G(c,!1),G(_,!0))}));const x=r((()=>{if(!e(p)&&!e(c)){const K=[{codeblockActionType:De.goTo,title:e(_)?"Show Code":"Show Diagram",onClick:w,iconName:e(_)?"braces":"network",buttonText:e(_)?"Code":"Diagram",primary:!0},{codeblockActionType:De.goTo,title:"Open in New Tab",onClick:()=>{g?.openMermaidDiagramPanel(t.token.text,t.title||"Mermaid Diagram")},iconName:"external-link",buttonText:"Open",onSuccessMessage:"Opened",primary:!0}];return e(_)&&K?.push({codeblockActionType:De.copy,title:"Copy SVG",onClick:()=>{e(a)&&ea(e(a))},iconName:"files",buttonText:"Copy SVG",onSuccessMessage:"Copied SVG"},{codeblockActionType:De.insert,title:"Create SVG",onClick:()=>{if(e(a)){const X=t.codeblockMetadata?.relPath?.replace(/\.[^/.]+$/,".svg");ta(e(a),g,X)}},iconName:"image-plus",buttonText:"Create SVG",onSuccessMessage:"Created SVG"}),K}}));var R=ql(),L=y(R),M=y(L);{let K=r((()=>e(_)?{...t.token,text:""}:t.token));Pl(M,{get token(){return e(K)},get codeblockMetadata(){return t.codeblockMetadata},get height(){return Dn},get actionButtons(){return e(x)},get removeDefaultButtons(){return e(_)}})}var I=F(M,2);let $;var m=y(I);Nt(m,((K,X)=>On?.(K,X)),(()=>({text:e(c)||e(p)?"":t.token.text,canRender:U,setError:d,setContainerPosition:l,setPanZoomController:u,themeCategory:e(b),setSvg:k}))),Ct(I,(K=>G(h,K)),(()=>e(h)));var E=F(I,2);let C;var N=y(E);Oe(N,{onclick:()=>e(A)?.zoomIn(),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"zoom-in"})},$$slots:{default:!0}});var O=F(N,2);Oe(O,{onclick:()=>e(A)?.panBy({x:0,y:32}),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"chevron-up"})},$$slots:{default:!0}});var P=F(O,2);Oe(P,{onclick:()=>e(A)?.zoomOut(),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"zoom-out"})},$$slots:{default:!0}});var W=F(P,2);Oe(W,{onclick:()=>e(A)?.panBy({x:32,y:0}),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"chevron-left"})},$$slots:{default:!0}});var q=F(W,2);{let K=r((()=>e(A)?.reset||cs));Oe(q,{get onclick(){return e(K)},color:"neutral",variant:"ghost",children:(X,ee)=>{ve(X,{name:"refresh-ccw"})},$$slots:{default:!0}})}var Y=F(q,2);Oe(Y,{onclick:()=>e(A)?.panBy({x:-32,y:0}),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"chevron-right"})},$$slots:{default:!0}});var V=F(Y,2),te=y(V);Oe(te,{onclick:()=>e(A)?.panBy({x:0,y:-32}),color:"neutral",variant:"ghost",children:(K,X)=>{ve(K,{name:"chevron-down"})},$$slots:{default:!0}}),H((()=>{$=Qe(I,1,"c-mermaid-diagram-container svelte-mbq130",null,$,{"c-mermaid-diagram-hidden":!e(_)}),C=Qe(E,1,"c-mermaid-controls-container svelte-mbq130",null,C,{"c-mermaid-diagram-hidden":!e(_)})})),s(n,R),ue(),i()}var Wl=T('<span class="c-code-insert-button svelte-qm16ig"><!></span>'),Bl=T('<span class="c-collapsible-button-false svelte-1bu2x6f"><!></span>');function jl(n,t){de(t,!0);const o=async()=>(t.primaryButton.onClick(),"success");var i={onClickForSuccessButton:o},g=Bl(),_=y(g),c=A=>{rs(A,{size:.5,iconSize:1,onCopy:o})},p=A=>{var h=j(),a=D(h),U=w=>{oo(w,{size:.5,onOpenLocalFile:o})},S=w=>{(function(d,l){de(l,!0);let u=B(l,"size",3,1),f=B(l,"variant",3,"ghost-block"),v=B(l,"color",3,"neutral"),k=B(l,"successText",19,(()=>{})),b=B(l,"tooltip",3,"Insert"),x=B(l,"stickyColor",3,!1);const R=r((()=>u()===.5?1:u()));var L=Wl(),M=y(L);{const I=E=>{var C=j(),N=D(C),O=W=>{ve(W,{name:"file-plus",get size(){return e(R)}})},P=W=>{var q=j(),Y=D(q),V=K=>{ve(K,{name:"file-diff",get size(){return e(R)}})},te=K=>{var X=j(),ee=D(X),Q=Z=>{ve(Z,{name:"check",get size(){return e(R)}})};z(ee,(Z=>{l.codeblockActionType===De.directApply&&Z(Q)}),!0),s(K,X)};z(Y,(K=>{l.codeblockActionType===De.smartPaste?K(V):K(te,!1)}),!0),s(W,q)};z(N,(W=>{l.codeblockActionType===De.insert?W(O):W(P,!1)})),s(E,C)};let $=r((()=>!l.text)),m=r((()=>({neutral:b(),success:k()})));Lo(M,{get defaultColor(){return v()},get size(){return u()},get variant(){return f()},loading:!1,get stickyColor(){return x()},get icon(){return e($)},get tooltip(){return e(m)},stateVariant:{success:"soft",neutral:"ghost-block",failure:"soft"},get onClick(){return l.onClick},iconLeft:I,children:(E,C)=>{var N=j(),O=D(N),P=W=>{var q=j(),Y=D(q);xe(Y,(()=>l.text)),s(W,q)};z(O,(W=>{l.text&&W(P)})),s(E,N)},$$slots:{iconLeft:!0,default:!0}})}s(d,L),ue()})(w,{get codeblockActionType(){return t.primaryButton.codeblockActionType},size:.5,onClick:o,get successText(){return t.primaryButton.onSuccessMessage}})};z(a,(w=>{t.primaryButton.codeblockActionType===De.goTo?w(U):w(S,!1)}),!0),s(A,h)};return z(_,(A=>{t.primaryButton.codeblockActionType===De.copy?A(c):A(p,!1)})),s(n,g),ue(i)}function ca(n,t){const o=B(t,"expanded",3,!1),i=r((()=>o()?"up":"down"));{let g=r((()=>["c-expand-button",t.class])),_=r((()=>o()?"Collapse":"Expand"));Ut(n,{variant:"soft",color:"neutral",size:.5,get onclick(){return t.onClick},get class(){return e(g)},get"aria-label"(){return e(_)},children:(c,p)=>{Fn(c,{get direction(){return e(i)}})},$$slots:{default:!0}})}}const Gl=10;var Vl=T('<div><span class="c-collapsible-icon-wrapper c-collapsible-icon-expand svelte-7kz44h"><!></span> <span class="c-collapsible-icon-wrapper svelte-7kz44h"><!></span></div>');function da(n,t){de(t,!0);let o=B(t,"expandable",3,!0),i=B(t,"collapsed",3,!1);{let g=r((()=>o()?i()?"Expand":"Collapse":"")),_=r((()=>[Ht.Hover]));We(n,{get content(){return e(g)},get triggerOn(){return e(_)},children:(c,p)=>{var A=Vl();let h;var a=y(A),U=y(a);Wn(U,{get collapsed(){return i()}});var S=F(a,2),w=y(S),d=l=>{var u=j(),f=D(u);xe(f,(()=>t.children)),s(l,u)};z(w,(l=>{t.children&&l(d)})),H((()=>h=Qe(A,1,"c-collapsible-icon svelte-7kz44h",null,h,{"is-not-expandable":!o()}))),s(c,A)},$$slots:{default:!0}})}ue()}function Os(n,t){let o,i=B(t,"showIcon",3,!1);function g(_){_.stopPropagation(),_.preventDefault(),o.openFile()}We(n,{get content(){return`Open ${t.filepath??""}`},class:"c-collapsible-button-false",children:(_,c)=>{es(_,{get filepath(){return t.filepath},onClick:g,size:1,get showIcon(){return i()},rightIcon:A=>{Ct(oo(A,{get path(){return t.filepath},get start(){return t.start},get stop(){return t.stop},get metric(){return t.metric},tooltip:!1,get codeSnippetToLocate(){return t.codeSnippetToLocate}}),(h=>o=h),(()=>o))},$$slots:{rightIcon:!0}})},$$slots:{default:!0}})}var Hl=T('<div class="c-codeblock__loading svelte-m8hfpi"><!></div>'),Kl=T("<!> <!>",1),Jl=T('<div class="c-codeblock__header-content svelte-m8hfpi"><!> <div class="c-codeblock__relpath svelte-m8hfpi"><!></div> <div class="c-codeblock__action-bar-right svelte-m8hfpi"><!> <!></div></div>'),Yl=T('<div class="c-codeblock__truncated-surface svelte-m8hfpi"><!></div>'),Xl=T("<div><!> <!></div>"),Ql=T("<div><!></div>");function Zl(n,t){de(t,!0);const[o,i]=Se();let g=B(t,"codeblockMetadata",19,(()=>{})),_=B(t,"collapsed",15,!0),c=B(t,"element",15),p=B(t,"lineHeight",19,(()=>$o.lineHeight??18)),A=B(t,"truncateLines",3,10),h=B(t,"requestStatus",19,(()=>{})),a=B(t,"truncate",15,!1),U=B(t,"opened",15,!1),S=B(t,"codeContainerElement",15),w=le(!1);const d=r((()=>he(xo,"$themeStore",o)?.category)),l=r((()=>Pn(g()?.relPath??""))),u=r((()=>g()?.language||t.token.lang)),f=r((()=>h()===Zt.sent));var v=Ql();let k;var b=y(v);ro(b,{get stickyHeaderTop(){return Gl},stickyHeader:!0,toggleHeader:!0,expandable:!0,class:"c-codeblock__container",get isHeaderStuck(){return e(w)},set isHeaderStuck(R){G(w,R,!0)},get collapsed(){return _()},set collapsed(R){_(R)},header:R=>{var L=Jl(),M=y(L);da(M,{get collapsed(){return _()},expandable:!0,children:(W,q)=>{zo(W,{get language(){return e(u)},get filename(){return e(l)},class:"c-icon-file-path__lang-icon"})},$$slots:{default:!0}});var I=F(M,2),$=y(I),m=W=>{Os(W,{get filepath(){return e(l)},get metric(){return Gt.chatCodeblockGoToFile},get codeSnippetToLocate(){return t.token.text}})};z($,(W=>{g()?.relPath&&W(m)}));var E=F(I,2),C=y(E),N=W=>{var q=Hl(),Y=y(q);vs(Y,{size:1}),s(W,q)},O=W=>{jl(W,{get primaryButton(){return t.primaryButton}})};z(C,(W=>{e(f)?W(N):W(O,!1)}));var P=F(C,2);Le(P,(()=>Ge.Root),((W,q)=>{q(W,{nested:!1,children:(Y,V)=>{var te=Kl(),K=D(te);Le(K,(()=>Ge.Trigger),((ee,Q)=>{Q(ee,{children:(Z,oe)=>{Oe(Z,{variant:"ghost-block",color:"neutral",size:.5,"data-collapsible-button":"false",children:(ae,ie)=>{ve(ae,{name:"ellipsis",size:0})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var X=F(K,2);Le(X,(()=>Ge.Content),((ee,Q)=>{Q(ee,{size:1,side:"bottom",align:"end",children:(Z,oe)=>{var ae=j(),ie=D(ae);Ce(ie,17,(()=>t.buttons),_t,((ne,ce)=>{var pe=j(),fe=D(pe);{const _e=me=>{var ke=j(),ye=D(ke),we=$e=>{ve($e,{get name(){return e(ce).iconName}})};z(ye,($e=>{e(ce).iconName&&$e(we)})),s(me,ke)};Le(fe,(()=>Ge.Item),((me,ke)=>{ke(me,{get onSelect(){return e(ce).onClick},get disabled(){return e(ce).disabled},iconLeft:_e,children:(ye,we)=>{var $e=J();H((()=>se($e,e(ce).buttonText))),s(ye,$e)},$$slots:{iconLeft:!0,default:!0}})}))}s(ne,pe)})),s(Z,ae)},$$slots:{default:!0}})})),s(Y,te)},$$slots:{default:!0}})})),s(R,L)},children:(R,L)=>{var M=Xl();let I;var $=y(M),m=O=>{var P=j(),W=D(P);xe(W,(()=>t.children)),s(O,P)},E=O=>{{let P=r((()=>e(u)||t.token.lang));Ao(O,{get options(){return $o},get text(){return t.token.text},get lang(){return e(P)}})}};z($,(O=>{t.children?O(m):O(E,!1)}));var C=F($,2),N=O=>{var P=Yl();ca(y(P),{expanded:!1,onClick:()=>{a(!1),U(!0)}}),s(O,P)};z(C,(O=>{a()&&O(N)})),Ct(M,(O=>S(O)),(()=>S())),H((()=>I=Qe(M,1,"c-codeblock__container-inner svelte-m8hfpi",null,I,{"c-codeblock__truncated":a()}))),s(R,M)},$$slots:{header:!0,default:!0}}),Ct(v,(x=>c(x)),(()=>c())),H((()=>{k=Qe(v,1,`c-codeblock c-codeblock__${e(d)}`,"svelte-m8hfpi",k,{"is-sticky":e(w)}),Is(v,`--codeblock-line-height: ${p()}px; --codeblock-truncate-lines: ${A()};`)})),s(n,v),ue(),i()}function ei(n,t){de(t,!0);const o=()=>he(d,"$enableSmartPaste",g),i=()=>he(l,"$enableDirectApply",g),[g,_]=Se();let c=B(t,"collapsed",3,!1),p=B(t,"lineHeight",19,(()=>$o.lineHeight??18)),A=B(t,"truncateLines",3,10),h=B(t,"defaultActionButtons",31,(()=>Ve([De.smartPaste,De.copy,De.insert,De.goTo])));const a=Ze("requestId"),U=Ze("requestStatus"),S=$t(),w=Ze(as.key),d=Et("enableSmartPaste"),l=Et("enableDirectApply"),u=Er();let f=le(!1),v=le(!1),k=le(void 0),b=le(!1),x=le(!1),R=le(void 0);const L=me=>Uo(M,me),M=Ft(!1);let I=le(!1),$=!1,m=le(void 0),E=le(void 0);gs((()=>{e(R)?.(),e(m)?.disconnect(),G(m,void 0)}));let C=r((()=>he(a,"$requestIdModel",g))),N=r((()=>he(U,"$requestStatusModel",g))),O=r((()=>!!w?.isActive));Te((()=>{e(O)&&h([De.copy])}));let P=r((()=>t.codeblockMetadata?.mode==="EXCERPT"));Te((()=>{t.codeblockMetadata?.relPath&&(async function(){G(v,!0),t.codeblockMetadata?.relPath&&G(f,!!await S.resolvePath({rootPath:"",relPath:t.codeblockMetadata?.relPath}))})()}));let W=r((()=>e(N)===Zt.success)),q=r((()=>e(N)===Zt.sent)),Y=r((()=>!t.token.raw.trimEnd().endsWith("```")));Te((()=>{e(k)&&e(W)&&o()&&G(R,la(e(k),(me=>G(b,me,!0)),(me=>G(x,me,!0))),!0)}));let V=r((()=>na(so().store,t.codeblockMetadata,t.token,e(C),e(W),e(f),e(b),e(x),0,L,{enableDirectApply:i(),enableSmartPaste:o(),smartPastePrecomputeMode:he(u,"$smartPastePrecomputeMode",g)}))),te=r((()=>e(V).smartPaste)),K=r((()=>e(V).canTriggerSmartPaste)),X=r((()=>e(V).canPrecomputeSmartPaste)),ee=r((()=>e(V).smartPasteButton)),Q=r((()=>e(V).directApplyButton)),Z=r((()=>(function(me,ke,ye,we=!1){const $e=!!me?.relPath,Ie=$e&&Zr(me?.relPath??"");return we&&ke&&!Ie?De.directApply:ke&&!Ie?De.smartPaste:$e&&ye?De.insert:De.copy})(t.codeblockMetadata,e(K),e(v)&&!e(f),!!i()&&!!e(Q)))),oe=r((()=>ra(t.token.text,e(P),t.codeblockMetadata,S,st()))),ae=r((()=>sa((()=>t.token.text)))),ie=r((()=>oa((()=>t.token.text),t.codeblockMetadata,S)));Te((()=>{e(X)&&e(te)({dryRun:!0})}));let ne=r((()=>({[De.smartPaste]:{...e(ee),disabled:e(q)},...i()&&e(Q)&&!e(O)?{[De.directApply]:{...e(Q),disabled:e(q)}}:{},[De.copy]:{...e(ae),disabled:e(Y)&&e(q)},[De.insert]:{...e(ie),disabled:e(Y)&&e(q)},[De.goTo]:{...e(oe)}}))),ce=r((()=>e(ne)[e(Z)])),pe=r((()=>i()&&e(Q)?[De.directApply,...h()]:h())),fe=r((()=>e(pe).map((me=>e(ne)[me])).filter((me=>me!==void 0)))),_e=r((()=>e(fe).filter((me=>me.codeblockActionType!==e(Z)))));Te((()=>{e(E)&&!e(m)&&(G(m,new ResizeObserver((me=>{if(!e(I)&&t.codeblockMetadata?.relPath){const ke=me[0].contentRect.height;G(I,ke>A()*p())}})),!0),e(m).observe(e(E)))}));{let me=r((()=>e(q)?e(fe):e(_e)));Zl(n,{get truncate(){return e(I)},opened:$,get token(){return t.token},get codeblockMetadata(){return t.codeblockMetadata},get collapsed(){return c()},get lineHeight(){return p()},get truncateLines(){return A()},get requestStatus(){return e(N)},get primaryButton(){return e(ce)},get buttons(){return e(me)},get element(){return e(k)},set element(ke){G(k,ke,!0)},get codeContainerElement(){return e(E)},set codeContainerElement(ke){G(E,ke,!0)}})}ue(),_()}function Ls(n,t){de(t,!0);let o=B(t,"text",3,"");const i=r((()=>t.lang?(function(a){const U=/^`{3,}(\w+)?/.exec(a),S=U?.[1]??null;if(!U)return{language:null,relPath:null,mode:null};const w=a.slice(U[0].length);let d=null;const l=" path=",u=w.indexOf(l);if(u!==-1){const k=w.slice(u+6),b=k.indexOf(" mode=");d=(b!==-1?k.slice(0,b):k).trim()}let f=null;const v=w.indexOf(" mode=");return v!==-1&&(f=w.slice(v+6).trim()),{language:S,relPath:d,mode:f}})(`\`\`\`${t.lang}`):{language:null,relPath:null,mode:null})),g=r((()=>e(i)?.language??t.lang??"")),_=r((()=>({type:"code",lang:e(g),text:o(),raw:t.raw??`\`\`\`${t.lang??""}
${o()}
\`\`\``})));var c=j(),p=D(c),A=a=>{ia(a,{get token(){return e(_)},get codeblockMetadata(){return e(i)}})},h=a=>{ei(a,{get token(){return e(_)},get codeblockMetadata(){return e(i)}})};z(p,(a=>{e(g)==="mermaid"?a(A):a(h,!1)})),s(n,c),ue()}function ti(n){return n!==void 0}var Ys=(n=>(n.directory="Directory",n.file="File",n.other="Other",n))(Ys||{}),si=T('<span class="c-chat-codespan__content svelte-12i2pat" role="button" tabindex="0"><!> <!></span>'),oi=T("<div><!></div>");function rr(n,t){de(t,!0);let o=B(t,"element",15);var i=oi();let g;var _=y(i);Sr(_,{get raw(){return t.raw},get element(){return o()},set element(p){o(p)},children:(p,A=Me)=>{var h=si();h.__click=function(...S){t.onclick?.apply(this,S)},h.__keydown=function(...S){t.onkeydown?.apply(this,S)};var a=y(h);xe(a,(()=>t.icon??Me));var U=F(a,2);xe(U,(()=>t.content??Me)),xt("cut",h,(function(...S){t.oncut?.apply(this,S)})),xt("paste",h,(function(...S){t.onpaste?.apply(this,S)})),s(p,h)},$$slots:{default:!0}}),H((()=>g=Qe(i,1,"c-chat-codespan svelte-12i2pat",null,g,{"c-chat-codespan--linkable":t.linkable}))),s(n,i),ue()}function zs(n,t){de(t,!0);const o=()=>he(l,"$currentExchange",i),[i,g]=Se();let _=B(t,"raw",3,"");const c=Ze("requestId"),p=$t(),A=kt();let h=le(void 0),a=le(void 0),U=r((()=>e(h)!==void 0&&(e(h).fileType===void 0||e(h).fileType===Ys.file)||e(a)!==void 0&&e(a).length>0));const S=st(),w=m=>{e(U)&&(p.reportWebviewClientEvent(Gt.chatCodespanGoToFile),S(Ts(m)))},d=m=>{p.reportWebviewClientEvent(Gt.chatCodespanGoToSymbol),S(Ts(m))},l=Cr(A,c);function u(){return(o()?.workspace_file_chunks?.map((m=>m.file))??[]).filter(ti).map((m=>({repoRoot:m.repoRoot,pathName:m.pathName})))}let f=r((()=>Aa(_())));async function v(m){const E=await p.resolveSymbols(m,{files:u()})??[];return m===e(f)&&G(a,E,!0),E}const k=kr((async m=>{m.length<=1||u().length===0||((async function(E){const C=await p.resolvePath?.({rootPath:"",relPath:E},{files:u()});E===e(f)&&G(h,C,!0)})(m),v(m))}),500,{leading:!1,trailing:!0});let b,x=le(!1),R=le(void 0);Te((()=>{e(x)&&k(e(f))})),Te((()=>(!e(x)&&e(R)&&(b?.destroy(),b=ns(e(R),{scrollTarget:document.body,threshold:.25,visibilityDuration:250,onVisible:()=>G(x,!0)})),()=>{b?.destroy()})));var L=j(),M=D(L),I=m=>{},$=m=>{var E=j(),C=D(E),N=P=>{const W=r((()=>e(h))),q=V=>{var te=j(),K=D(te),X=Q=>{ve(Q,{name:"file"})},ee=Q=>{var Z=j(),oe=D(Z),ae=ie=>{ve(ie,{name:"folder-open"})};z(oe,(ie=>{e(W).fileType===Ys.directory&&ie(ae)}),!0),s(Q,Z)};z(K,(Q=>{e(W).fileType===Ys.file?Q(X):Q(ee,!1)})),s(V,te)},Y=V=>{var te=J();H((()=>se(te,e(f)))),s(V,te)};{let V=r((()=>pt("Enter",(()=>w(e(W))))));rr(P,{get linkable(){return e(U)},get raw(){return _()},onclick:()=>w(e(W)),get onkeydown(){return e(V)},oncut:()=>navigator.clipboard.writeText(e(f)),onpaste:te=>te.preventDefault(),get icon(){return q},get content(){return Y},get element(){return e(R)},set element(te){G(R,te,!0)}})}},O=P=>{var W=j(),q=D(W),Y=te=>{const K=r((()=>e(a)[0])),X=Q=>{ve(Q,{name:"braces"})},ee=Q=>{var Z=J();H((()=>se(Z,e(f)))),s(Q,Z)};{let Q=r((()=>pt("Enter",(()=>d(e(K).file)))));rr(te,{get linkable(){return e(U)},get raw(){return _()},onclick:async()=>{const Z=await v(e(f)),oe=Z&&Z.length>0?Z[0]:e(K);d(oe.file)},get onkeydown(){return e(Q)},oncut:()=>navigator.clipboard.writeText(e(f)),onpaste:Z=>Z.preventDefault(),get icon(){return X},get content(){return ee}})}},V=te=>{Sr(te,{get raw(){return _()},get element(){return e(R)},set element(K){G(R,K,!0)},children:(K,X)=>{var ee=J();H((()=>se(ee,e(f)))),s(K,ee)},$$slots:{default:!0}})};z(q,(te=>{e(a)!==void 0&&e(a).length>0?te(Y):te(V,!1)}),!0),s(P,W)};z(C,(P=>{e(h)!==void 0?P(N):P(O,!1)}),!0),s(m,E)};z(M,(m=>{_()?m($,!1):m(I)})),s(n,L),ue(),g()}ts(["click","keydown"]);var ri=T('<a class="markdown-active-link svelte-1ip4w5g"><span class="markdown-base-link svelte-1ip4w5g"><!><!></span></a>'),ai=T('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!><!></span></span>'),ni=T('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!><!></span></span>'),li=T('<span class="markdown-active-link svelte-1ip4w5g" role="button" tabindex="0"><span class="markdown-base-link svelte-1ip4w5g"><!><!></span></span>'),ii=T('<span class="markdown-base-link svelte-1ip4w5g"><!><!></span>'),ci=T('<span class="markdown-base-link svelte-1ip4w5g"><!><!></span>'),di=T('<span class="markdown-base-link svelte-1ip4w5g"><!><!></span>');function Ns(n,t){de(t,!0);let o=B(t,"href",3,""),i=B(t,"text",3,"");const g=st(),_=$t(),c=d=>{g(Ts(d))},p=d=>{Ms.postMessage({type:Ss.augmentLink,data:d})},A=d=>{Ms.postMessage({type:Ss.executeCommand,data:d})},h=r((()=>i().replace(/`/g,"")));var a=j(),U=D(a),S=d=>{var l=ri(),u=y(l),f=y(u);xe(f,(()=>t.children??Me));var v=F(f),k=b=>{var x=J();H((()=>se(x,e(h)))),s(b,x)};z(v,(b=>{t.children||b(k)})),H((()=>{gt(l,"href",o()),gt(l,"title",t.title)})),s(d,l)},w=d=>{var l=j(),u=D(l),f=k=>{var b=ai();b.__click=()=>p(o());var x=r((()=>pt("Enter",(()=>p(o())))));b.__keydown=function(...$){e(x)?.apply(this,$)};var R=y(b),L=y(R);xe(L,(()=>t.children??Me));var M=F(L),I=$=>{var m=J();H((()=>se(m,e(h)))),s($,m)};z(M,($=>{t.children||$(I)})),xt("cut",b,(()=>navigator.clipboard.writeText(e(h)))),xt("paste",b,($=>$.preventDefault())),s(k,b)},v=k=>{var b=j(),x=D(b),R=M=>{var I=ni();I.__click=()=>A(o().substring(8));var $=r((()=>pt("Enter",(()=>A(o().substring(8))))));I.__keydown=function(...O){e($)?.apply(this,O)};var m=y(I),E=y(m);xe(E,(()=>t.children??Me));var C=F(E),N=O=>{var P=J();H((()=>se(P,e(h)))),s(O,P)};z(C,(O=>{t.children||O(N)})),xt("cut",I,(()=>navigator.clipboard.writeText(e(h)))),xt("paste",I,(O=>O.preventDefault())),s(M,I)},L=M=>{var I=j(),$=D(I);Pr($,(()=>_.resolvePath?.({rootPath:"",relPath:o()})),(m=>{var E=di(),C=y(E);xe(C,(()=>t.children??Me));var N=F(C),O=P=>{var W=J();H((()=>se(W,e(h)))),s(P,W)};z(N,(P=>{t.children||P(O)})),s(m,E)}),((m,E)=>{var C=j(),N=D(C),O=W=>{var q=li();q.__click=()=>c(e(E));var Y=r((()=>pt("Enter",(()=>c(e(E))))));q.__keydown=function(...ee){e(Y)?.apply(this,ee)};var V=y(q),te=y(V);xe(te,(()=>t.children??Me));var K=F(te),X=ee=>{var Q=J();H((()=>se(Q,e(h)))),s(ee,Q)};z(K,(ee=>{t.children||ee(X)})),xt("cut",q,(()=>navigator.clipboard.writeText(e(h)))),xt("paste",q,(ee=>ee.preventDefault())),s(W,q)},P=W=>{var q=ii(),Y=y(q);xe(Y,(()=>t.children??Me));var V=F(Y),te=K=>{var X=J();H((()=>se(X,e(h)))),s(K,X)};z(V,(K=>{t.children||K(te)})),s(W,q)};z(N,(W=>{e(E)?W(O):W(P,!1)})),s(m,C)}),(m=>{var E=ci(),C=y(E);xe(C,(()=>t.children??Me));var N=F(C),O=P=>{var W=J();H((()=>se(W,e(h)))),s(P,W)};z(N,(P=>{t.children||P(O)})),s(m,E)})),s(M,I)};z(x,(M=>{/^command:/.test(o())?M(R):M(L,!1)}),!0),s(k,b)};z(u,(k=>{/^augment:\/\//.test(o())?k(f):k(v,!1)}),!0),s(d,l)};z(U,(d=>{/^https?:\/\//.test(o())?d(S):d(w,!1)})),s(n,a),ue()}ts(["click","keydown"]);var ui=T('<button class="gallery-button svelte-5tvx6v" title="Open in Augment Images" data-test-id="open-image-gallery-button"><!></button>'),vi=T('<div class="markdown-image-container svelte-5tvx6v" role="img"><img class="markdown-image svelte-5tvx6v"/> <!></div>'),pi=T('<span class="markdown-image-loading svelte-5tvx6v"> </span>');function gi(n,t){de(t,!0);const[o,i]=Se();let g=B(t,"href",3,""),_=B(t,"text",3,""),c=B(t,"title",3,null),p=le(!1),A=le(null),h=le(null);const a=$t(),U=Et("canvasExtensionFeatureEnable"),S=st(),w=new Set(["width","height","max-width","max-height","min-width","min-height","object-fit","object-position","border","border-radius","margin","padding","display","float","opacity"]);function d(I){const $=[],m=I.split(";");for(const E of m){const C=E.trim();if(!C)continue;const N=C.indexOf(":");if(N===-1)continue;const O=C.substring(0,N).trim().toLowerCase(),P=C.substring(N+1).trim();if(w.has(O)&&P){const W=P.replace(/[<>"'()]/g,"");$.push(`${O}: ${W}`)}}return $.join("; ")+($.length>0?";":"")}const l=r((()=>(function(I){if(!I)return{title:null,style:""};const $=I.match(/^(.*)=(\d+)(?:x(\d+))?(\s.*)?$/);if($){const[,E,C,N,O]=$;let P=`width: ${C}px;`;return N&&(P+=` height: ${N}px;`),{title:(E?.trim()||"")+(O?.trim()||"")||null,style:P}}const m=I.indexOf("|");return m!==-1?{title:I.substring(0,m).trim()||null,style:d(I.substring(m+1).trim())}:I.includes(":")&&I.includes(";")&&/^\s*[\w-]+\s*:\s*[^;]+;/.test(I)?{title:null,style:d(I)}:{title:I,style:""}})(c())));function u(I){return I.startsWith("data:")?"data":/^https?:/.test(I)?"remote":"local"}function f(){e(A)&&(S(mt(ft.WEBVIEW.IMAGE_OPENED_IN_CANVAS,{imageSource:u(g())})),S(nn({type:Ss.openImageGallery,data:{imagePath:e(A)}})))}let v=!1;function k(){var I,$;v||(v=!0,I=g(),$=e(l).style.length>0,S(mt(ft.WEBVIEW.IMAGE_RENDERED,{imageSource:u(I),hasCustomStyles:$})))}function b(){var I,$;v||(v=!0,I=g(),$=e(l).style.length>0,S(mt(ft.WEBVIEW.IMAGE_RENDER_FAILED,{imageSource:u(I),hasCustomStyles:$})))}Te((()=>{(async function(I){if(/^(https?|data):/.test(I))return void G(h,I,!0);if(/^vscode-webview-resource:/.test(I))return void G(h,I,!0);let $=I;I.startsWith("file://")&&($=I.substring(7));try{const E=await a.resolvePath?.({rootPath:"",relPath:$});if(E){const C=E.repoRoot?`${E.repoRoot}/${E.pathName}`.replace(/\/+/g,"/"):E.pathName;if(G(A,C,!0),E.webviewUri)return void G(h,E.webviewUri,!0)}}catch(E){console.error("[Image.svelte] Failed to resolve image path:",$,E)}e(A)||G(A,$,!0),G(h,I,!0)})(g())}));var x=j(),R=D(x),L=I=>{var $=vi(),m=y($),E=F(m,2),C=N=>{var O=ui();O.__click=f;var P=y(O);ve(P,{name:"image",size:2}),s(N,O)};z(E,(N=>{e(p)&&e(A)&&he(U,"$canvasExtensionFeatureEnabled",o)&&N(C)})),H((()=>{gt(m,"src",e(h)),gt(m,"alt",_()),gt(m,"title",e(l).title),Is(m,e(l).style)})),xt("mouseenter",$,(()=>G(p,!0))),xt("mouseleave",$,(()=>G(p,!1))),xt("load",m,k),xt("error",m,b),s(I,$)},M=I=>{var $=pi(),m=y($);H((()=>se(m,_()||"Loading image..."))),s(I,$)};z(R,(I=>{e(h)?I(L):I(M,!1)})),s(n,x),ue(),i()}ts(["click"]);var hi=T('<div class="c-thinking__title svelte-1dba5s8"> </div>'),mi=T("<span>Thinking</span>"),fi=T("<!> <!>",1),_i=T('<details class="c-thinking__details svelte-1dba5s8"><summary class="c-thinking__summary svelte-1dba5s8"><!></summary> <div class="c-thinking__row svelte-1dba5s8"><div class="c-thinking__vr svelte-1dba5s8"><!></div> <div class="c-thinking__content svelte-1dba5s8"><!></div></div></details>'),ki=T('<div class="c-thinking__summary svelte-1dba5s8"><!></div>'),$i=T('<div class="c-thinking svelte-1dba5s8"><!></div>'),bi=T('<div class="c-thinking-container hidden-when-empty"></div>');function ar(n){n.scrollIntoView({block:"nearest",behavior:"smooth"})}var yi=T('<div class="c-bugreport-form svelte-helebu"><!> <div><!> <!></div> <div class="l-bugreport__send svelte-helebu"><!> <div class="l-bugreport__send-btns svelte-helebu"><!></div></div></div>'),wi=T('<div class="c-bugreport-form-container"><!></div>'),Si=T('<div class="c-feedback-form svelte-1q34grt"><!> <div class="l-feedback__send svelte-1q34grt"><!> <div class="l-feedback__send-btns svelte-1q34grt"><!></div></div></div>'),Ti=T('<div class="c-feedback-form-container svelte-1q34grt"><!></div>');function ds(n,t){de(t,!0);let o,i=B(t,"successDuration",3,500),g=B(t,"disabled",3,!1),_=le(void 0);async function c(){try{await t.onSelect?.(),G(_,"success"),clearTimeout(o),o=setTimeout((()=>{G(_,void 0)}),i())}catch{G(_,"error"),o=setTimeout((()=>{G(_,void 0)}),i())}}Te((()=>()=>{clearTimeout(o)}));var p=j(),A=D(p);{const h=a=>{var U=j(),S=D(U),w=d=>{ve(d,{size:1,get name(){return t.iconName}})};z(S,(d=>{t.iconName&&d(w)})),s(a,U)};Le(A,(()=>Ge.Item),((a,U)=>{U(a,{get color(){return e(_)},onSelect:c,get disabled(){return g()},iconLeft:h,children:(S,w)=>{var d=j(),l=D(d),u=v=>{var k=J("Action failed");s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=J();H((()=>se(M,t.successLabel))),s(L,M)},R=L=>{var M=J();H((()=>se(M,t.idleLabel))),s(L,M)};z(b,(L=>{e(_)==="success"?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{e(_)==="error"?v(u):v(f,!1)})),s(S,d)},$$slots:{iconLeft:!0,default:!0}})}))}s(n,p),ue()}var Ii=T('<div class="c-feedback__thankyou"><!></div>'),xi=T("<!> <!>",1),Ui=T("<!> <!> <!> <!> <!> <!> <!> <!>",1),Ei=T("<!> <!>",1),Ci=T('<!> <div class="c-feedback-panel svelte-j9wesd"><div class="c-feedback__ratings svelte-j9wesd"><!> <div class="c-feedback__buttons svelte-j9wesd"><!> <!> <!></div></div> <!> <!></div>',1);function Ai(n,t){de(t,!0);const o=()=>he(k,"$currentConversation",_),i=()=>he(d,"$feedbackRating",_),g=()=>he(w,"$currentConversationId",_),[_,c]=Se(),p="augment-marketplace-review-clicked",A="none",h="bugreport",a="feedback",U="none",S="bugreport",w=kt(),d=cn(t.requestId,t.chatMode),l=Ze(as.key);let u=le(Ve(A)),f=le(Ve(U));const v=st(),k=dn(),b=be=>({get:()=>e(u)===be,set:Ee=>{Ee?(G(u,be,!0),G(f,U,!0)):G(u,A,!0)}}),x=Et("enableConversationDebugUtils");let R=r((()=>x&&!l?.isActive)),L=r((()=>o()?.extraData?.isForked&&!l?.isActive));const M=b(h),I=b(a),$=()=>{G(u,A,!0)};function m(be,Ee=""){be===i()&&be!==Xe.unset?v(jo(t.requestId,Xe.unset,Ee,t.chatMode)):v(jo(t.requestId,be,Ee,t.chatMode))}function E(be){be==="dislike"?v(mt(ft.WEBVIEW.NEGATIVE_FEEDBACK_REPORT_BUTTON,{})):be==="menu"&&v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Report an Issue"})),M.set(!0)}function C(){v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Leave a Review"})),$(),(function(){try{localStorage.setItem(p,"true")}catch{}})(),Ms.postMessage({type:Ss.augmentLink,data:e(Q)})}function N(){return v(mt(ft.WEBVIEW.POSITIVE_FEEDBACK_BUTTON,{action:i()===Xe.positive?"unset":"set"})),m(Xe.positive)}function O(){return v(mt(ft.WEBVIEW.NEGATIVE_FEEDBACK_BUTTON,{action:i()===Xe.negative?"unset":"set"})),i()!==Xe.negative?(G(f,S,!0),G(Z,!0),G(oe,"dislike")):(G(f,U,!0),G(Z,!1),G(oe,"none")),m(Xe.negative)}async function P(be){$(),m(Xe.negative,be),K(Xe.negative)}async function W(be){$(),m(Xe.unset,be),K(Xe.unset)}gs((()=>{q&&clearTimeout(q)}));let q,Y=le("");const V="Thanks for the feedback!",te="Your issue was reported!";function K(be){G(Y,be===Xe.negative?te:V,!0),clearTimeout(q),q=setTimeout((()=>{G(Y,"")}),3e3)}const X=r((()=>i()===Xe.positive)),ee=r((()=>i()===Xe.negative)),Q=r((()=>yr()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews"));let Z=le(!1),oe=le("none");function ae(be){if(G(Z,be,!0),!be)return G(oe,"none"),void G(f,U,!0);e(oe)==="more"&&G(f,U,!0)}var ie=Ci(),ne=D(ie);un(ne,{sagaName:"saveFeedback"});var ce=F(ne,2),pe=y(ce),fe=y(pe),_e=be=>{var Ee=Ii(),He=y(Ee);re(He,{size:1,weight:"regular",color:"secondary",children:(Be,Ae)=>{var ze=J();H((()=>se(ze,e(Y)))),s(Be,ze)},$$slots:{default:!0}}),Bt(3,Ee,(()=>Eo),(()=>({duration:300}))),s(be,Ee)};z(fe,(be=>{e(Y)&&be(_e)}));var me=F(fe,2),ke=y(me);{let be=r((()=>"c-feedback__positive "+(e(X)?"c-feedback--selected":""))),Ee=r((()=>e(X)?"soft":"ghost-block")),He=r((()=>e(X)?"success":"neutral")),Be=r((()=>pt("Enter",N)));Oe(ke,{get class(){return e(be)},title:"Feedback Positive",get variant(){return e(Ee)},size:1,get color(){return e(He)},get onkeyup(){return e(Be)},onclick:N,children:(Ae,ze)=>{ve(Ae,{name:"thumbs-up",size:1})},$$slots:{default:!0}})}var ye=F(ke,2);{let be=r((()=>"c-feedback__negative "+(e(ee)?"c-feedback--selected":""))),Ee=r((()=>e(ee)?"soft":"ghost-block")),He=r((()=>e(ee)?"error":"neutral")),Be=r((()=>pt("Enter",O)));Oe(ye,{get class(){return e(be)},title:"Feedback Negative",get variant(){return e(Ee)},size:1,get color(){return e(He)},get onkeyup(){return e(Be)},onclick:O,children:(Ae,ze)=>{ve(Ae,{name:"thumbs-down",size:1})},$$slots:{default:!0}})}var we=F(ye,2);Le(we,(()=>Ge.Root),((be,Ee)=>{Ee(be,{get open(){return e(Z)},onOpenChange:ae,nested:!1,children:(He,Be)=>{var Ae=Ei(),ze=D(Ae);Le(ze,(()=>Ge.Trigger),((lt,dt)=>{dt(lt,{children:(Pe,Ye)=>{Oe(Pe,{variant:"ghost-block",size:1,title:"More",onclick:()=>{e(Z)||v(mt(ft.WEBVIEW.VIEW_MESSAGE_OPTIONS,{})),G(oe,"more"),G(f,U,!0),G(Z,!e(Z))},children:(ot,bt)=>{ve(ot,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var Fe=F(ze,2);Le(Fe,(()=>Ge.Content),((lt,dt)=>{dt(lt,{size:1,side:"bottom",align:"start",children:(Pe,Ye)=>{var ot=j(),bt=D(ot),At=rt=>{var je=j(),it=D(je);Le(it,(()=>Ge.Item),((yt,ct)=>{ct(yt,{onSelect:()=>{E("dislike"),G(Z,!1),G(f,U,!0)},children:(wt,Rt)=>{var at=J("Report an Issue");s(wt,at)},$$slots:{default:!0}})})),s(rt,je)},Lt=rt=>{const je=r((()=>t.getResponseText()));var it=Ui(),yt=D(it);ds(yt,{iconName:"share-2",idleLabel:"Share",successLabel:"Copied link",onSelect:async()=>{v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Share"})),g()&&v(Ar(g()))}});var ct=F(yt,2),wt=ut=>{ds(ut,{iconName:"copy",idleLabel:"Copy Response",successLabel:"Copied Response",onSelect:async()=>{v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Copy Response"})),await navigator.clipboard.writeText(e(je)||"")}})};z(ct,(ut=>{e(je)&&ut(wt)}));var Rt=F(ct,2);ds(Rt,{iconName:"clipboard",idleLabel:"Copy Request ID",successLabel:"Copied Request ID",onSelect:async()=>{v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Copy Request ID"})),await navigator.clipboard.writeText(t.requestId)}});var at=F(Rt,2),zt=ut=>{var Pt=xi(),jt=D(Pt);ds(jt,{iconName:"git-branch-plus",idleLabel:"Fork Conversation",successLabel:"Forking Conversation",onSelect:async()=>{v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Fork Conversation"})),g()&&v(vn(g(),{preserveContext:!0,switchToForked:!0,forkFromExchangeId:t.requestId}))}});var hs=F(jt,2),Jt=xs=>{ds(xs,{iconName:"arrow-left",idleLabel:"Go to Parent Conversation",successLabel:"Going to Parent Conversation",onSelect:async()=>{if(v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Go to Parent Conversation"})),!o())return;const lo=o().extraData,ms=lo?.forkedFrom?.conversationId;ms&&v(pn(ms,{}))}})};z(hs,(xs=>{e(L)&&xs(Jt)})),s(ut,Pt)};z(at,(ut=>{e(R)&&ut(zt)}));var et=F(at,2);Le(et,(()=>Ge.Separator),((ut,Pt)=>{Pt(ut,{})}));var Kt=F(et,2);Le(Kt,(()=>Ge.Item),((ut,Pt)=>{Pt(ut,{onSelect:()=>{E("menu"),G(Z,!1),G(f,U,!0)},children:(jt,hs)=>{var Jt=J("Report an Issue");s(jt,Jt)},$$slots:{default:!0}})}));var ls=F(Kt,2);Le(ls,(()=>Ge.Item),((ut,Pt)=>{Pt(ut,{onSelect:()=>{v(mt(ft.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Give Feedback"})),I.set(!0),G(Z,!1)},children:(jt,hs)=>{var Jt=J("Give Feedback");s(jt,Jt)},$$slots:{default:!0}})}));var no=F(ls,2);Le(no,(()=>Ge.Item),((ut,Pt)=>{Pt(ut,{onSelect:()=>{C()},children:(jt,hs)=>{var Jt=J("Leave a Review");s(jt,Jt)},$$slots:{default:!0}})})),s(rt,it)};z(bt,(rt=>{e(f)===S?rt(At):rt(Lt,!1)})),s(Pe,ot)},$$slots:{default:!0}})})),s(He,Ae)},$$slots:{default:!0}})}));var $e=F(pe,2),Ie=be=>{var Ee=M.get,He=M.set;(function(Be,Ae){de(Ae,!0);let ze=B(Ae,"showBugreportForm",15,!1),Fe=Ve({explanation:"",stepsToReproduce:""});function lt(){Ae.onSubmit(`
Explanation: ${Fe.explanation}
Steps to reproduce: ${Fe.stepsToReproduce}
`)}function dt(){ze(!1)}var Pe=wi(),Ye=y(Pe);Wt(Ye,{size:0,variant:"surface",children:(ot,bt)=>{var At=yi(),Lt=y(At);Rs(Lt,{name:"explanation",rows:3,placeholder:"Explanation of the time issue was encountered here...",color:"neutral",variant:"soft",label:"Report an issue*",required:!0,focus:!0,get value(){return Fe.explanation},set value(zt){Fe.explanation=zt},topRightAction:zt=>{{let et=r((()=>pt("Enter",dt)));Oe(zt,{title:"Cancel",variant:"ghost-block",color:"neutral",get onkeyup(){return e(et)},onclick:dt,size:.5,children:(Kt,ls)=>{ve(Kt,{name:"x"})},$$slots:{default:!0}})}},$$slots:{topRightAction:!0}});var rt=F(Lt,2),je=y(rt);Rs(je,{name:"stepsToReproduce",rows:3,placeholder:"Steps to reproduce the issue...",color:"neutral",variant:"soft",label:"How to reproduce*",required:!0,get value(){return Fe.stepsToReproduce},set value(at){Fe.stepsToReproduce=at}});var it=F(je,2);re(it,{size:0,weight:"light",color:"secondary",children:(at,zt)=>{var et=J("* required fields");s(at,et)},$$slots:{default:!0}});var yt=F(rt,2),ct=y(yt);rs(ct,{get text(){return Ae.requestId},tooltip:"Copy request ID",children:(at,zt)=>{var et=J("Request ID");s(at,et)},$$slots:{default:!0}});var wt=F(ct,2),Rt=y(wt);{let at=r((()=>Fe.explanation.trim().length===0||Fe.stepsToReproduce.trim().length===0)),zt=r((()=>pt("Enter",lt)));Ut(Rt,{type:"submit",title:"Share ",color:"accent",get disabled(){return e(at)},size:1,get onkeyup(){return e(zt)},onclick:lt,children:(et,Kt)=>{var ls=J("Submit");s(et,ls)},$$slots:{default:!0}})}Nt(yt,(at=>ar?.(at))),s(ot,At)},$$slots:{default:!0}}),s(Be,Pe),ue()})(be,{get showBugreportForm(){return Ee()},set showBugreportForm(Be){He(Be)},get requestId(){return t.requestId},onSubmit:P})};z($e,(be=>{M.get()&&be(Ie)}));var Ue=F($e,2),Je=be=>{var Ee=I.get,He=I.set;(function(Be,Ae){de(Ae,!0);let ze=B(Ae,"showFeedbackForm",15,!1),Fe=le("");function lt(){Ae.onSubmit(`
Feedback: ${e(Fe)}
`)}function dt(){ze(!1)}var Pe=Ti(),Ye=y(Pe);Wt(Ye,{size:0,variant:"surface",children:(ot,bt)=>{var At=Si(),Lt=y(At);Rs(Lt,{name:"explanation",rows:3,placeholder:"Tell us what you think of Augment...",color:"neutral",variant:"soft",label:"Give Feedback",required:!0,focus:!0,get value(){return e(Fe)},set value(wt){G(Fe,wt,!0)},topRightAction:wt=>{{let Rt=r((()=>pt("Enter",dt)));Oe(wt,{title:"Cancel",variant:"ghost-block",color:"neutral",get onkeyup(){return e(Rt)},onclick:dt,size:.5,children:(at,zt)=>{ve(at,{name:"x"})},$$slots:{default:!0}})}},$$slots:{topRightAction:!0}});var rt=F(Lt,2),je=y(rt);rs(je,{get text(){return Ae.requestId},tooltip:"Copy request ID",iconName:"clipboard",children:(ct,wt)=>{var Rt=J("Request ID");s(ct,Rt)},$$slots:{default:!0}});var it=F(je,2),yt=y(it);{let ct=r((()=>e(Fe).trim().length===0)),wt=r((()=>pt("Enter",lt)));Ut(yt,{type:"submit",title:"Share ",color:"accent",get disabled(){return e(ct)},size:1,get onkeyup(){return e(wt)},onclick:lt,children:(Rt,at)=>{var zt=J("Submit");s(Rt,zt)},$$slots:{default:!0}})}Nt(rt,(ct=>ar?.(ct))),s(ot,At)},$$slots:{default:!0}}),s(Be,Pe),ue()})(be,{get showFeedbackForm(){return Ee()},set showFeedbackForm(Be){He(Be)},get requestId(){return t.requestId},onSubmit:W})};z(Ue,(be=>{I.get()&&be(Je)})),s(n,ie),ue(),c()}var Li=T("<strong>Here are some questions you can ask Augment:</strong>"),zi=T('<!> <div class="l-questions svelte-1nimdct"></div>',1);function Ni(n,t){de(t,!0);let o=B(t,"showIntroText",3,!0);const i=st();function g(h){i(gn(t.conversationId,h))}let _=r((()=>t.turn.questions||[]));var c=j(),p=D(c),A=h=>{var a=zi(),U=D(a),S=d=>{La(d,{children:(l,u)=>{var f=Li();s(l,f)}})};z(U,(d=>{o()&&d(S)}));var w=F(U,2);Ce(w,20,(()=>e(_)),(d=>d),((d,l)=>{{const u=v=>{ve(v,{name:"send-horizontal",size:2})};let f=r((()=>pt("Enter",(()=>g(l)))));Ut(d,{variant:"ghost",size:1,color:"accent",alignment:"left",get onkeyup(){return e(f)},onclick:()=>g(l),iconLeft:u,children:(v,k)=>{var b=J();H((()=>se(b,l))),s(v,b)},$$slots:{iconLeft:!0,default:!0}})}})),s(h,a)};z(p,(h=>{t.turn.questionsLoaded&&e(_).length>0&&h(A)})),s(n,c),ue()}var Ri=T('<div class="c-tooluse-filepath svelte-1bzkivf" role="button" tabindex="0" data-testid="file-link"><!></div>');ts(["click","keydown"]);var Mi=T('<span class="c-tooluse-arg"><!></span>');function Di(n,t){de(t,!0);const o=st(),i=$t(),g=U=>{o(Ts(U))};let _=le(!1),c=le(void 0);Te((()=>{e(_)&&(async function(U){if(typeof U=="string")try{G(c,await i.resolvePath?.({rootPath:"",relPath:U}),!0)}catch{G(c,void 0)}})(t.value)}));var p=Mi(),A=y(p),h=U=>{(function(S,w){de(w,!0);{let d=r((()=>[Ht.Hover]));We(S,{get content(){return w.fileDetails.pathName},get triggerOn(){return e(d)},children:(l,u)=>{var f=Ri();f.__click=()=>w.onOpenLocalFile(w.fileDetails);var v=r((()=>pt("Enter",(()=>w.onOpenLocalFile(w.fileDetails)))));f.__keydown=function(...b){e(v)?.apply(this,b)};var k=y(f);es(k,{get filepath(){return w.fileDetails.pathName},showIcon:!0}),s(l,f)},$$slots:{default:!0}})}ue()})(U,{get fileDetails(){return e(c)},onOpenLocalFile:g})},a=U=>{re(U,{size:1,children:(S,w)=>{var d=J();H((()=>se(d,t.value))),s(S,d)},$$slots:{default:!0}})};z(A,(U=>{e(c)?U(h):U(a,!1)})),Nt(p,((U,S)=>ns?.(U,S)),(()=>({onVisible:()=>G(_,!0),scrollTarget:document.body}))),s(n,p),ue()}var Oi=T('<div class="c-tooluse__value svelte-rbof7e"><!></div>'),Fi=T('<div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!>',1),Pi=T('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),qi=T('<img alt="Tool result" class="c-tooluse__image svelte-rbof7e"/>'),Wi=T('<div class="c-tooluse__image-container svelte-rbof7e"><!></div>'),Bi=T('<div class="c-tooluse__structured-content svelte-rbof7e"></div>'),ji=T('<pre class="c-tooluse__value-monospace svelte-rbof7e"> </pre>'),Gi=T('<div class="tool-output svelte-rbof7e"><div class="c-tooluse__details__heading svelte-rbof7e"><!></div> <!></div>'),Vi=T('<div class="c-tooluse__details svelte-rbof7e"><!> <!></div>');function ua(n,t){de(t,!0);let o=B(t,"showOutput",3,!0),i=r((()=>Object.entries(t.toolUseInput).reduce(((a,[U,S])=>(Array.isArray(S)?a[U]=S.map((w=>JSON.stringify(w))):a[U]=[JSON.stringify(S)],a)),{}))),g=r((()=>t.toolUseState?.result?.contentNodes&&t.toolUseState.result.contentNodes.length>0));function _(a){return a.image_data?`data:${a.media_type};base64,${a.image_data}`:null}var c=Vi(),p=y(c);Ce(p,17,(()=>Object.entries(e(i))),(([a,U])=>a),((a,U)=>{var S=r((()=>Io(e(U),2))),w=Fi(),d=D(w),l=y(d);re(l,{size:1,weight:"medium",children:(f,v)=>{var k=J();H((()=>se(k,e(S)[0]))),s(f,k)},$$slots:{default:!0}});var u=F(d,2);Ce(u,17,(()=>e(S)[1]),_t,((f,v)=>{var k=Oi();Di(y(k),{get value(){return e(v)}}),s(f,k)})),s(a,w)}));var A=F(p,2),h=a=>{var U=Gi(),S=y(U),w=y(S);re(w,{size:1,weight:"medium",children:(f,v)=>{var k=J("output");s(f,k)},$$slots:{default:!0}});var d=F(S,2),l=f=>{var v=Bi();Ce(v,21,(()=>t.toolUseState.result.contentNodes),_t,((k,b)=>{var x=j(),R=D(x),L=I=>{re(I,{size:0,type:"monospace",children:($,m)=>{var E=Pi(),C=y(E);H((N=>se(C,N)),[()=>e(b).text_content.trim()]),s($,E)},$$slots:{default:!0}})},M=I=>{var $=j(),m=D($),E=C=>{var N=j(),O=D(N),P=q=>{var Y=Wi(),V=y(Y);Wt(V,{insetContent:!0,size:1,class:"c-image-card",children:(te,K)=>{var X=qi();H((ee=>gt(X,"src",ee)),[()=>_(e(b).image_content)]),s(te,X)},$$slots:{default:!0}}),s(q,Y)},W=q=>{re(q,{size:1,color:"error",children:(Y,V)=>{var te=J("Failed to load image: Image data not found");s(Y,te)},$$slots:{default:!0}})};z(O,(q=>{_(e(b).image_content)?q(P):q(W,!1)})),s(C,N)};z(m,(C=>{e(b).type===Go.ContentImage&&e(b).image_content&&C(E)}),!0),s(I,$)};z(R,(I=>{e(b).type===Go.ContentText&&e(b).text_content?I(L):I(M,!1)})),s(k,x)})),s(f,v)},u=f=>{re(f,{size:1,type:"monospace",children:(v,k)=>{var b=ji(),x=y(b);H((R=>se(x,R)),[()=>t.toolUseState.result?.text?.trim()]),s(v,b)},$$slots:{default:!0}})};z(d,(f=>{e(g)&&t.toolUseState.result?.contentNodes?f(l):f(u,!1)})),s(a,U)};z(A,(a=>{!o()||t.toolUseState.phase!==ge.completed&&t.toolUseState.phase!==ge.error||a(h)})),s(n,c),ue()}function eo(n){if(n==null)return"";if(Array.isArray(n))return n.map((t=>eo(t))).join(", ");if(typeof n=="object"){const t=Object.entries(n);return t.length===0?"{}":t.map((([o,i])=>`${o}: ${eo(i)}`)).join(", ")}return String(n)}function Hi(n,t){const o=(function(i){let g=[];for(const _ of Object.values(i))Array.isArray(_)?g=g.concat(_.map((c=>eo(c)))):g.push(eo(_));return g.join(" ")})(t);return n==="apply_patch"&&o&&o.length>10?o.substring(0,10)+"...":o}const va=Symbol("toolContext");function vt(){const n=Ze(va);if(!n)throw new Error("ToolUseContext context not found");return n}function Ki(n){const t=Ft(n);let o;const i=Gs(t,((g,_)=>{if(g.toolUse.tool_use_id===o?.toolUse.tool_use_id&&g.toolUse.input_json===o?.toolUse.input_json&&g.toolUse.tool_name===o?.toolUse.tool_name&&g.toolUseState.phase===o?.toolUseState.phase&&g.toolUseState.result?.isError===o?.toolUseState.result?.isError&&g.toolUseState.result?.text===o?.toolUseState.result?.text&&g.isLastTurn===o?.isLastTurn&&g.requestId===o?.requestId&&g.turnIndex===o?.turnIndex)return;o=g;const c=(function(p){try{return JSON.parse(p)??{}}catch(A){return console.error("Failed to parse tool input JSON",A),{}}})(g.toolUse.input_json);_({...o,toolUseInput:c??{}})}));return Ot(va,i),{writableCtx:t,readableCtx:i}}var Ji=T('<div class="svelte-xpcnzb"><!></div>'),Yi=T('<span class="c-tool-approval-panel__approve-btn-text svelte-xpcnzb">Approve</span>'),Xi=T('<div class="c-tool-approval-panel__content svelte-xpcnzb"><!> <div class="c-tool-approval-panel__actions svelte-xpcnzb"><!> <!></div></div>'),Qi=T('<div class="c-tool-approval-panel svelte-xpcnzb"><!> <div class="tooltip-pointer svelte-xpcnzb"></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Zi=T('<div class="c-cancel-hover svelte-172oyl5"><!></div>'),ec=T('<div class="c-tooluse-status svelte-3yk79m"><!></div>');function qs(n,t){de(t,!0);const o=()=>he(_,"$ctx",i),[i,g]=Se(),_=vt();let c=B(t,"isCommandError",3,!1),p=B(t,"toolUseState",31,(()=>Ve(o().toolUseState)));function A(w){w.stopPropagation(),o().onToolCancel(o().requestId,o().toolUse.tool_use_id)}Te((()=>{p(o().toolUseState)}));var h=ec(),a=y(h),U=w=>{var d=j(),l=D(d),u=f=>{ve(f,{name:"pause"})};z(l,(f=>{o().isLastTurn&&f(u)})),s(w,d)},S=w=>{var d=j(),l=D(d),u=v=>{is(v,{status:"error",content:"Command failed"})},f=v=>{var k=j(),b=D(k),x=L=>{is(L,{content:"Waiting for end of message...",children:(M,I)=>{vs(M,{size:1})},$$slots:{default:!0}})},R=L=>{var M=j(),I=D(M),$=E=>{is(E,{content:"Looking up tool...",children:(C,N)=>{vs(C,{size:1})},$$slots:{default:!0}})},m=E=>{var C=j(),N=D(C),O=W=>{(function(q,Y){de(Y,!0);let V=le(!0);const te=new Ir({onHoverStart(){G(V,!1)},onHoverEnd(){G(V,!0)},hoverTriggerDuration:0});var K=Zi(),X=y(K);{let ee=r((()=>[Ht.Hover]));We(X,{get triggerOn(){return e(ee)},content:"Cancel",children:(Q,Z)=>{Oe(Q,{size:0,color:"neutral",get onclick(){return Y.onClick},variant:"ghost-block",class:"c-cancel-hover__btn",get loading(){return e(V)},children:(oe,ae)=>{ve(oe,{name:"x"})},$$slots:{default:!0}})},$$slots:{default:!0}})}Nt(K,((ee,Q)=>Tr?.(ee,Q)),(()=>te)),s(q,K),ue()})(W,{onClick:A})},P=W=>{var q=j(),Y=D(q),V=K=>{is(K,{status:"error",content:"Cancelled"})},te=K=>{var X=j(),ee=D(X),Q=oe=>{is(oe,{status:"error",content:"Failed"})},Z=oe=>{var ae=j(),ie=D(ae),ne=pe=>{is(pe,{status:"error",content:"Cancelling...",children:(fe,_e)=>{vs(fe,{size:1})},$$slots:{default:!0}})},ce=pe=>{is(pe,{status:"success",content:"Completed"})};z(ie,(pe=>{p().phase===ge.cancelling?pe(ne):pe(ce,!1)}),!0),s(oe,ae)};z(ee,(oe=>{p().phase===ge.error?oe(Q):oe(Z,!1)}),!0),s(K,X)};z(Y,(K=>{p().phase===ge.cancelled?K(V):K(te,!1)}),!0),s(W,q)};z(N,(W=>{p().phase===ge.running?W(O):W(P,!1)}),!0),s(E,C)};z(I,(E=>{p().phase===ge.checkingSafety?E($):E(m,!1)}),!0),s(L,M)};z(b,(L=>{p().phase===ge.new?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{c()?v(u):v(f,!1)}),!0),s(w,d)};z(a,(w=>{p().phase===ge.runnable?w(U):w(S,!1)})),H((()=>gt(h,"data-tool-use-state",p().phase))),s(n,h),ue(),g()}var tc=T('<span class="c-tooluse__tool-name-text svelte-l7l81c"> </span>'),sc=T('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),oc=T('<div class="c-tooluse__content-secondary-2 svelte-l7l81c"><!></div>'),rc=T('<span class="svelte-l7l81c"></span>'),ac=T('<div><div class="c-tooluse-header__label svelte-l7l81c"><!> <!> <!> <!> <div class="c-tooluse__main-bar__tool-status svelte-l7l81c"><div class="c-tooluse__header-actions svelte-l7l81c"><!></div> <!></div></div></div>');function Ne(n,t){de(t,!0);const o=()=>he(a,"$collapsed",g),i=()=>he(U,"$expandable",g),[g,_]=Se(),c=vt();let p=B(t,"toolUseInput",31,(()=>Ve(he(c,"$ctx",g).toolUseInput)));Te((()=>{t.formattedToolArgs&&p({args:t.formattedToolArgs})}));let A=r((()=>()=>Hi(t.toolName,p())));const h=Bn(),a=h.collapsed,U=h.expandable;var S=ac();let w;var d=y(S),l=y(d),u=N=>{da(N,{get expandable(){return i()},get collapsed(){return o()},children:(O,P)=>{var W=j(),q=D(W);xe(q,(()=>t.icon??Me)),s(O,W)},$$slots:{default:!0}})};z(l,(N=>{t.icon&&N(u)}));var f=F(l,2);re(f,{size:1,weight:"medium",color:"primary",class:"c-tooluse__content-btn-name",children:(N,O)=>{var P=j(),W=D(P),q=V=>{var te=j(),K=D(te);xe(K,(()=>t.toolNameSnippet)),s(V,te)},Y=V=>{var te=j(),K=D(te),X=ee=>{var Q=tc(),Z=y(Q);H((()=>se(Z,t.toolName))),s(ee,Q)};z(K,(ee=>{t.toolName&&ee(X)}),!0),s(V,te)};z(W,(V=>{t.toolNameSnippet?V(q):V(Y,!1)})),s(N,P)},$$slots:{default:!0}});var v=F(f,2),k=N=>{var O=sc(),P=y(O);xe(P,(()=>t.secondary??Me),(()=>({toolName:t.toolName,formattedToolArgs:t.formattedToolArgs}))),s(N,O)},b=N=>{var O=j(),P=D(O),W=q=>{var Y=oc(),V=y(Y);re(V,{size:1,class:"c-tooluse__content-btn-args",children:(te,K)=>{var X=J();H((ee=>se(X,ee)),[()=>e(A)()]),s(te,X)},$$slots:{default:!0}}),s(q,Y)};z(P,(q=>{e(A)()&&q(W)}),!0),s(N,O)};z(v,(N=>{t.secondary?N(k):N(b,!1)}));var x=F(v,2),R=N=>{var O=j(),P=D(O);xe(P,(()=>t.toolAction)),s(N,O)},L=N=>{var O=rc();s(N,O)};z(x,(N=>{t.toolAction?N(R):N(L,!1)}));var M=F(x,2),I=y(M),$=y(I);xe($,(()=>t.headerActions??Me));var m=F(I,2),E=N=>{var O=j(),P=D(O);xe(P,(()=>t.toolStatus)),s(N,O)},C=N=>{qs(N,{})};z(m,(N=>{t.toolStatus?N(E):N(C,!1)})),H((()=>w=Qe(S,1,ps(["c-tooluse__main-bar",t.class]),"svelte-l7l81c",w,{"is-collapsed":o(),"is-expandable":i()}))),s(n,S),ue(),_()}var nc=T('<div class="c-tool-use__header-container svelte-kv049e" role="button"><div class="c-tool-use__header svelte-kv049e"><div class="c-tool-use__content svelte-kv049e"><!></div></div></div>'),lc=T('<div class="c-tool-use__details svelte-kv049e"><!> <!></div>'),ic=T("<div><!> <!> <!></div>");function Re(n,t){de(t,!0);const o=()=>he(_,"$ctx",i),[i,g]=Se(),_=vt(),c=za(0);let p=B(t,"showToolOutput",3,!0),A=B(t,"toolUse",27,(()=>Ve(o().toolUse))),h=B(t,"toolUseState",27,(()=>Ve(o().toolUseState))),a=B(t,"toolUseInput",27,(()=>Ve(o().toolUseInput))),U=B(t,"collapsed",15,!0),S=B(t,"toggle",15),w=r((()=>p()===void 0?!Hn(A().tool_name):p())),d=le(void 0);var l=ic();let u;var f=y(l);ro(f,{class:"c-tool-use__container",get expandable(){return e(w)},get toggle(){return S()},set toggle(L){S(L)},get collapsed(){return U()},set collapsed(L){U(L)},get isHeaderStuck(){return e(d)},set isHeaderStuck(L){G(d,L,!0)},header:L=>{var M=nc();gt(M,"tabindex",0),M.__click=function(...N){S()?.apply(this,N)};var I=y(M),$=y(I),m=y($),E=N=>{var O=j(),P=D(O);xe(P,(()=>t.header),(()=>({toolUseInput:a(),toolUse:A()}))),s(N,O)},C=N=>{Ne(N,{get toolUseInput(){return a()},get toolName(){return A().tool_name}})};z(m,(N=>{t.header?N(E):N(C,!1)})),s(L,M)},children:(L,M)=>{var I=lc(),$=y(I),m=N=>{var O=j(),P=D(O);xe(P,(()=>t.details),(()=>({toolUseInput:a()}))),s(N,O)},E=N=>{ua(N,{get toolUseInput(){return a()},get toolUseState(){return h()},get showOutput(){return e(w)}})};z($,(N=>{t.details?N(m):N(E,!1)}));var C=F($,2);xe(C,(()=>t.error??Me)),s(L,I)},$$slots:{header:!0,default:!0}});var v=F(f,2);xe(v,(()=>t.secondary??Me));var k=F(v,2),b=R=>{var L=j(),M=D(L);xe(M,(()=>t.actions)),s(R,L)},x=R=>{(function(L,M){de(M,!1);const I=()=>he(E,"$ctx",$),[$,m]=Se(),E=vt();function C(){I().onToolSkip(I().requestId,I().toolUse.tool_use_id)}function N(){I().onToolRun(I().requestId,I().toolUse,I().toolUseInput)}function O(Y){Y.stopPropagation(),N()}Xs();var P=j(),W=D(P),q=Y=>{var V=Qi(),te=y(V);bo(0,{name:"allowTool",handler:N});var K=F(te,4);Vn(K,(()=>({"--after-box-shadow":"none"}))),Wt(K.lastChild,{borderless:!0,children:(X,ee)=>{var Q=Xi(),Z=y(Q);re(Z,{size:1,children:(ne,ce)=>{var pe=J("Waiting for user input");s(ne,pe)},$$slots:{default:!0}});var oe=F(Z,2),ae=y(oe);Ut(ae,{size:1,variant:"solid",color:"neutral",onclick:C,children:(ne,ce)=>{var pe=J("Skip");s(ne,pe)},$$slots:{default:!0}});var ie=F(ae,2);{const ne=pe=>{var fe=Ji();yo(y(fe),{commandName:"allowTool",keysOnly:!0}),s(pe,fe)};let ce=ys((()=>[Ht.Hover]));We(ie,{get triggerOn(){return e(ce)},delayDurationMs:300,content:ne,children:(pe,fe)=>{Ut(pe,{size:1,variant:"solid",color:"accent",class:"c-tool-approval-panel__approve-btn-pulse",onclick:O,iconLeft:me=>{ve(me,{name:"circle-play"})},children:(me,ke)=>{var ye=Yi();s(me,ye)},$$slots:{iconLeft:!0,default:!0}})},$$slots:{content:!0,default:!0}})}s(X,Q)},$$slots:{default:!0}}),Bt(5,V,(()=>Yo),(()=>({axis:"y",duration:300}))),Bt(6,V,(()=>Yo),(()=>({axis:"y",duration:150}))),s(Y,V)};z(W,(Y=>{I().toolUseState.phase===ge.runnable&&I().isLastTurn&&Y(q)})),s(L,P),ue(),m()})(R,{})};z(k,(R=>{t.actions?R(b):R(x,!1)})),Nt(l,(R=>c?.(R))),H((()=>u=Qe(l,1,"c-tool-use svelte-kv049e",null,u,{"is-sticky":e(d),"is-expandable":e(w)}))),Bt(5,l,(()=>wr),(()=>({duration:300,y:-5}))),s(n,l),ue(),g()}ts(["click"]);var cc=T("<div><!></div>"),dc=T('<div class="c-message-actions svelte-109jn4a"></div>');function uc(n,t){var o=dc();Ce(o,21,(()=>t.items),(i=>i.id),((i,g)=>{{let _=r((()=>`${e(g).id}-button`)),c=r((()=>({neutral:e(g).label,success:e(g).successMessage})));Lo(i,{get"data-testid"(){return e(_)},variant:"ghost-block",size:1,defaultColor:"neutral",get disabled(){return e(g).disabled},icon:!0,stickyColor:!1,onClick:p=>(e(g).action(p),e(g).successMessage?"success":"neutral"),get tooltip(){return e(c)},children:(p,A)=>{var h=j(),a=D(h),U=S=>{ve(S,{get name(){return e(g).lucideIconName}})};z(a,(S=>{e(g).lucideIconName&&S(U)})),s(p,h)},$$slots:{default:!0}})}})),s(n,o)}var vc=T("<!> <!>",1),pc=T("<!> <!>",1),gc=T('<span class="c-feedback__thankyou svelte-1muhiky"> </span>'),hc=T('<!> <div class="l-feedback__send svelte-1muhiky"><!> <div class="l-feedback__send-btns svelte-1muhiky"><!> <!></div></div>',1),mc=T('<div class="c-feedback__input-container svelte-1muhiky"><!></div>'),fc=T('<div class="c-feedback svelte-1muhiky"><div class="c-feedback__ratings svelte-1muhiky"><div class="c-feedback__buttons svelte-1muhiky"><!> <!> <!> <!></div> <!></div> <!></div>');function _c(n,t){de(t,!0);const o="augment-marketplace-review-clicked";let i=B(t,"showFeedbackInput",15,!1),g=B(t,"tooltipItems",19,(()=>[])),_=le(Ve({selectedRating:t.feedbackState?.selectedRating??Xe.unset,feedbackNote:t.feedbackState?.feedbackNote??""})),c=le(!1),p=le(void 0),A=le(void 0),h=r((()=>yr()?"https://marketplace.visualstudio.com/items?itemName=augment.vscode-augment&ssr=false#review-details":"https://plugins.jetbrains.com/plugin/24072-augment/reviews"));function a(){i(!1),t.onSendUserRating(t.requestId,e(_).selectedRating,e(_).feedbackNote),G(l,"Thanks for the feedback!"),clearTimeout(d),d=setTimeout((()=>{G(l,"")}),3e3)}async function U(C){e(_).selectedRating=C,i(!0),await mo(),e(A)?.focus()}function S(){i(!1),t.feedbackState?G(_,{...t.feedbackState},!0):e(_).selectedRating=Xe.unset}function w(C){C.key==="Escape"&&(C.preventDefault(),S())}let d,l=le("");var u=fc(),f=y(u),v=y(f),k=y(v);We(k,{content:"Give feedback",children:(C,N)=>{{let O=r((()=>"c-feedback__positive "+(e(_).selectedRating===Xe.positive?"c-feedback--selected":""))),P=r((()=>e(_).selectedRating===Xe.positive?"success":"neutral")),W=r((()=>pt("Enter",(()=>U(Xe.positive)))));Oe(C,{get class(){return e(O)},title:"Feedback Positive",variant:"ghost-block",size:1,get color(){return e(P)},get onkeyup(){return e(W)},onclick:()=>U(Xe.positive),children:(q,Y)=>{ve(q,{name:"thumbs-up"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var b=F(k,2);We(b,{content:"Give feedback",children:(C,N)=>{{let O=r((()=>"c-feedback__negative "+(e(_).selectedRating===Xe.negative?"c-feedback--selected":""))),P=r((()=>e(_).selectedRating===Xe.negative?"error":"neutral")),W=r((()=>pt("Enter",(()=>U(Xe.negative)))));Oe(C,{get class(){return e(O)},title:"Feedback Negative",variant:"ghost-block",size:1,get color(){return e(P)},get onkeyup(){return e(W)},onclick:()=>U(Xe.negative),children:(q,Y)=>{ve(q,{name:"thumbs-down"})},$$slots:{default:!0}})}},$$slots:{default:!0}});var x=F(b,2),R=C=>{rs(C,{get text(){return t.reponseText},tooltip:"Copy response"})};z(x,(C=>{t.reponseText&&C(R)}));var L=F(x,2);Le(L,(()=>Ge.Root),((C,N)=>{Ct(N(C,{children:(O,P)=>{var W=pc(),q=D(W);Le(q,(()=>Ge.Trigger),((V,te)=>{te(V,{children:(K,X)=>{{let ee=r((()=>[Ht.Hover]));We(K,{content:"More options",get triggerOn(){return e(ee)},children:(Q,Z)=>{Oe(Q,{title:"More options",variant:"ghost-block",size:1,color:"neutral",children:(oe,ae)=>{ve(oe,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})}));var Y=F(q,2);Le(Y,(()=>Ge.Content),((V,te)=>{te(V,{size:1,side:"right",align:"end",children:(K,X)=>{var ee=vc(),Q=D(ee),Z=oe=>{var ae=j(),ie=D(ae);Ce(ie,17,g,(ne=>ne.id),((ne,ce)=>{{let pe=r((()=>e(ce).successMessage??`${e(ce).label} completed`));ds(ne,{get iconName(){return e(ce).lucideIconName},get idleLabel(){return e(ce).label},get successLabel(){return e(pe)},get disabled(){return e(ce).disabled},onSelect:async()=>{e(ce).action(new Event("click"))}})}})),s(oe,ae)};z(Q,(oe=>{g().length>0&&oe(Z)})),ds(F(Q,2),{iconName:"clipboard",idleLabel:"Copy request ID",successLabel:"Copied request ID",onSelect:async()=>{await navigator.clipboard?.writeText(t.requestId)}}),s(K,ee)},$$slots:{default:!0}})})),s(O,W)},$$slots:{default:!0}}),(O=>G(p,O,!0)),(()=>e(p)))}));var M=F(v,2),I=C=>{Ut(C,{size:1,onclick:()=>{G(c,!0),(function(){try{localStorage.setItem(o,"true")}catch{}})(),Ms.postMessage({type:Ss.augmentLink,data:e(h)})},variant:"ghost",color:"neutral",iconLeft:O=>{ve(O,{name:"star"})},children:(O,P)=>{var W=J("Leave a review for Augment!");s(O,W)},$$slots:{iconLeft:!0,default:!0}})},$=C=>{var N=gc(),O=y(N);H((()=>se(O,e(l)))),s(C,N)};z(M,(C=>{e(_).selectedRating!==Xe.positive||!e(c)&&(function(){try{return localStorage.getItem(o)==="true"}catch{return!0}})()?C($,!1):C(I)}));var m=F(f,2),E=C=>{var N=mc(),O=y(N);Wt(O,{size:2,children:(P,W)=>{var q=hc(),Y=D(q);Rs(Y,{class:"c-feedback__textarea",rows:3,placeholder:"Enter your feedback...",color:"neutral",variant:"soft",onkeydown:w,get value(){return e(_).feedbackNote},set value(Q){e(_).feedbackNote=Q},get textInput(){return e(A)},set textInput(Q){G(A,Q,!0)}});var V=F(Y,2),te=y(V);rs(te,{get text(){return t.requestId},tooltip:"Copy request ID",children:(Q,Z)=>{var oe=J("Request ID");s(Q,oe)},$$slots:{default:!0}});var K=F(te,2),X=y(K);{let Q=r((()=>pt("Enter",S)));Ut(X,{title:"Cancel",variant:"soft",color:"neutral",get onkeyup(){return e(Q)},onclick:S,size:1,children:(Z,oe)=>{var ae=J("Cancel");s(Z,ae)},$$slots:{default:!0}})}var ee=F(X,2);{let Q=r((()=>!e(_).feedbackNote.trim())),Z=r((()=>pt("Enter",a)));Ut(ee,{title:"Share ",color:"accent",get disabled(){return e(Q)},get onkeyup(){return e(Z)},onclick:a,size:1,children:(oe,ae)=>{var ie=J();H((()=>se(ie,t.feedbackState?"Update feedback":"Share feedback"))),s(oe,ie)},$$slots:{default:!0}})}Nt(V,(Q=>{return Z=Q,void Z.scrollIntoView({block:"end",behavior:"smooth"});var Z})),s(P,q)},$$slots:{default:!0}}),s(C,N)};z(m,(C=>{i()&&C(E)})),s(n,u),ue()}var kc=T('<div class="memory-meta svelte-fikraf"><!></div>');function $c(n,t){de(t,!0);const[o,i]=Se(),g=Et("enableDebugFeatures"),_=$t(),c=hn();var p=kc();_c(y(p),{get requestId(){return t.requestId},get reponseText(){return t.memoryData.memory},feedbackState:void 0,onSendUserRating:async(A,h,a)=>{const U=`${a||""}

Memory version: ${he(c,"$memoriesParams",o)?.memory_retrieval_version}`,S=`${U}

Created memory: ${t.memoryData.memory}`,w=he(g,"$enableDebugFeatures",o)?S:U;await _.sendUserRating(A,Cs.memories,h,w)}}),s(n,p),ue(),i()}var bc=T("<div><!></div> <div><!></div>",1),yc=T('<div class="memory-content svelte-15shl9p"><!> <div><!></div> <div><!></div> <!></div>'),wc=T("<div><!></div>"),Sc=T('<div><div class="c-show-more__content svelte-rs6o7w"><!></div> <!></div>');function Fs(n,t){de(t,!0);let o,i=B(t,"expanded",15),g=B(t,"maxHeight",3,200),_=B(t,"collapseText",3,"Show less"),c=B(t,"paddingBottom",3,30),p=B(t,"showOnHover",3,!1),A=B(t,"overflowThreshold",3,10),h=le(0),a=le(!1),U=!!i(),S=r((()=>t.transitionDurationMs??Math.min(Math.max(500,e(h)+g()),200)));function w(){U=!0,i(!i()),clearTimeout(o),o=setTimeout((()=>{U=!1}),e(S))}var d=Sc();let l;var u=y(d),f=y(u);xe(f,(()=>t.children??Me)),Nt(u,(b=>(function(x){let R;function L(I){if(U)return;const $=I.scrollHeight;G(h,$+I.clientHeight),G(a,$>g()+A())}function M(I){R?.disconnect(),R=new ResizeObserver((()=>{requestAnimationFrame((()=>{L(I)}))})),R.observe(I)}return i()&&G(h,x.scrollHeight+x.clientHeight),L(x),M(x),{update(I){M(I),L(I)},destroy(){R?.disconnect()}}})(b)));var v=F(u,2),k=b=>{var x=wc();let R;var L=y(x),M=I=>{ca(I,{get expanded(){return i()},onClick:w})};z(L,(I=>{i()&&!_()||I(M)})),H((()=>R=Qe(x,1,"c-show-more__button-container svelte-rs6o7w",null,R,{"c-show-more__button-container--no-overflow":i()}))),s(b,x)};z(v,(b=>{(i()||!i()&&e(a))&&b(k)})),H((()=>{l=Qe(d,1,ps(["c-show-more",t.class]),"svelte-rs6o7w",l,{"c-show-more--expanded":i(),"c-show-more--show-on-hover":p()}),Is(u,`max-height: ${i()?e(h)?e(h)+c()+"px":"unset":g()+"px"};--show-more-transition: ${e(S)??""}ms ease-in-out;`)})),s(n,d),ue()}var Tc=T('<span class="c-tool-memory-retrieval__header__icon svelte-1dwosli"><!></span>'),Ic=T('<span class="c-tool-memory-retrieval__metadata__source svelte-1dwosli"><!></span>'),xc=T("<!> <!>",1),Uc=T('<div class="c-tool-memory-retrieval__secondary svelte-1dwosli"><!></div>'),Ec=T('<div class="c-tool-memory-retrieval__details svelte-1dwosli"> </div>');function So(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=B(t,"noRetrieval",3,!1);Re(n,{header:c=>{Ne(c,{class:"c-tool-memory-retrieval__header",toolName:"Augment Context Engine",icon:h=>{var a=Tc(),U=y(a);ve(U,{name:"augment-logo"}),s(h,a)},secondary:h=>{var a=Uc(),U=y(a),S=w=>{var d=xc(),l=D(d);re(l,{size:1,muted:!0,truncate:!0,children:(f,v)=>{var k=J("Retrieving from:");s(f,k)},$$slots:{default:!0}});var u=F(l,2);re(u,{size:1,color:"neutral",children:(f,v)=>{var k=Ic(),b=y(k),x=L=>{var M=j(),I=D(M);xe(I,(()=>t.retrieval)),s(L,M)},R=L=>{var M=J();H((()=>se(M,t.retrievalText))),s(L,M)};z(b,(L=>{t.retrieval?L(x):L(R,!1)})),s(f,k)},$$slots:{default:!0}}),s(w,d)};z(U,(w=>{i()||w(S)})),s(h,a)},$$slots:{icon:!0,secondary:!0}})},details:c=>{Fs(c,{maxHeight:150,showOnHover:!0,overflowThreshold:0,children:(p,A)=>{var h=Ec(),a=y(h);H((()=>se(a,o().information_request||o().query||""))),s(p,h)},$$slots:{default:!0}})},$$slots:{header:!0,details:!0}}),ue()}var Cc=T("<!>Commit History",1),Ac=T("<span><!></span>"),Lc=T('<span class="c-open-terminal-button-wrapper"><!></span>');function zc(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=B(t,"size",3,.5),g=B(t,"color",3,"neutral"),_=B(t,"variant",3,"ghost-block"),c=B(t,"stickyColor",3,!1),p=le(!1),A=le(!1),h=le(!1);const a=$t();let U;async function S(k){return k?.stopPropagation?.(),k?.preventDefault?.(),await a.showTerminal(t.terminalId,e(w))?"success":(G(p,!1),"failure")}let w=r((()=>o().command)),d=r((()=>t.phase===ge.running));Te((()=>{t.terminalId,e(w),t.phase,t.toolResult,Es((()=>{G(A,!1),U!==void 0&&(clearTimeout(U),U=void 0)}))}));let l=r((()=>(t.terminalId!==void 0||e(w)!==void 0||e(d))&&e(h)&&!e(A)));Te((()=>{e(l)&&(async function(){if(!e(A))try{const k=await a.canShowTerminal(t.terminalId,e(w));G(p,k,!0),G(A,!0),!k&&t.terminalId===void 0&&e(d)&&(U=setTimeout((()=>{G(A,!1),U=void 0}),1e3))}catch(k){console.warn("Failed to check terminal availability:",k),G(A,!0)}})()}));var u=Lc(),f=y(u),v=k=>{var b=Ac(),x=y(b);{const R=M=>{{let I=r((()=>i()===.5?1:i()));ve(M,{name:"external-link",get size(){return e(I)}})}};let L=r((()=>!t.text));Lo(x,{get defaultColor(){return g()},get stickyColor(){return c()},get size(){return i()},get variant(){return _()},tooltip:{neutral:"Open Terminal",success:"Opening terminal..."},stateVariant:{success:"soft"},onClick:S,get icon(){return e(L)},iconLeft:R,children:(M,I)=>{var $=j(),m=D($);xe(m,(()=>t.text??Me)),s(M,$)},$$slots:{iconLeft:!0,default:!0}})}H((()=>Qe(b,1,`c-open-terminal-button-container c-open-terminal-button__size--${i()??""}`,"svelte-w84z3c"))),s(k,b)};z(f,(k=>{e(p)&&k(v)})),Nt(u,((k,b)=>ns?.(k,b)),(()=>({onVisible:()=>G(h,!0),scrollTarget:document.body}))),s(n,u),ue()}var Nc=T('<pre class="svelte-aj3tks"> </pre>'),Rc=T('<div class="c-shell-error__message svelte-aj3tks"><!></div>'),Mc=T('<div class="c-shell-error svelte-aj3tks"><div class="c-shell-error__code svelte-aj3tks"><!> <!></div> <!></div>');function It(n,t){de(t,!0);let o=B(t,"isError",3,!1),i=B(t,"text",3,""),g=B(t,"hideDetailedMessage",3,!1),_=r((()=>i()?i().split(`
`)[0]:"")),c=r((()=>g()?e(_):i()));var p=j(),A=D(p),h=a=>{var U=Mc(),S=y(U),w=y(S);re(w,{size:1,weight:"medium",children:(f,v)=>{var k=J("Error");s(f,k)},$$slots:{default:!0}});var d=F(w,2);{let f=r((()=>i()??""));rs(d,{get text(){return e(f)}})}var l=F(S,2),u=f=>{Fs(f,{maxHeight:90,children:(v,k)=>{var b=Rc(),x=y(b);re(x,{size:1,weight:"light",type:"monospace",children:(R,L)=>{var M=Nc(),I=y(M);H((()=>se(I,e(c)))),s(R,M)},$$slots:{default:!0}}),s(v,b)},$$slots:{default:!0}})};z(l,(f=>{e(c)&&f(u)})),s(a,U)};z(A,(a=>{o()&&a(h)})),s(n,p),ue()}var Dc=T('<pre class="c-shell-tooluse__value"> </pre>'),Oc=T('<div class="c-shell-tooluse__content"><!></div>'),Fc=T('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <!></div>'),Pc=T('<pre class="c-shell-tooluse__value"> </pre>'),qc=T('<div class="c-shell-tooluse__details__group"><div class="c-shell-tooluse__details__heading"><!> <!></div> <div class="c-shell-tooluse__content"><!></div></div>'),Wc=T('<div class="c-shell-tooluse__details svelte-huxgkx"><!> <!></div>');function Bc(n,t){de(t,!0);let o=r((()=>{let p=[];return typeof t.toolUseInput.command_type=="string"?t.toolUseInput.command_type==="simple"&&Array.isArray(t.toolUseInput.simple_command)&&t.toolUseInput.simple_command.length>0?p=[["Command",[t.toolUseInput.simple_command[0]]],["Args",t.toolUseInput.simple_command.slice(1)]]:t.toolUseInput.command_type==="complex"&&typeof t.toolUseInput.complex_command=="string"&&(p=[["Command",[t.toolUseInput.complex_command]]]):typeof t.toolUseInput.command=="string"&&(p=[["Command",[t.toolUseInput.command]]]),p}));var i=Wc(),g=y(i);Ce(g,17,(()=>e(o)),(([p,A])=>p),((p,A)=>{var h=r((()=>Io(e(A),2)));let a=()=>e(h)[1];var U=Fc(),S=y(U),w=y(S);re(w,{size:1,weight:"medium",color:"primary",children:(u,f)=>{var v=J();H((()=>se(v,e(h)[0]))),s(u,v)},$$slots:{default:!0}});var d=F(w,2);{let u=r((()=>a().join(`
`)));rs(d,{get text(){return e(u)}})}var l=F(S,2);Ce(l,17,a,_t,((u,f)=>{var v=Oc();Fs(y(v),{maxHeight:90,children:(k,b)=>{re(k,{size:1,color:"neutral",children:(x,R)=>{var L=Dc(),M=y(L);H((()=>se(M,e(f)))),s(x,L)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(u,v)})),s(p,U)}));var _=F(g,2),c=p=>{var A=qc(),h=y(A),a=y(h);re(a,{size:1,weight:"medium",color:"primary",children:(w,d)=>{var l=J("Output");s(w,l)},$$slots:{default:!0}});var U=F(a,2);rs(U,{get text(){return t.result.output}});var S=F(h,2);Fs(y(S),{maxHeight:90,children:(w,d)=>{re(w,{size:1,color:"neutral",type:"monospace",children:(l,u)=>{var f=Pc(),v=y(f);H((k=>se(v,k)),[()=>t.result.output?.trim()]),s(l,f)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(p,A)};z(_,(p=>{t.result.output&&t.toolUseState.phase!==ge.error&&p(c)})),s(n,i),ue()}const nr=16e3;function jc(n){if(!n)return{reason:"",returnCode:0,output:""};if(n.length>nr)return{reason:"Output too large",returnCode:0,output:n.slice(-1*nr)};const t=n.includes("<return-code>"),o=n.includes("<output>");if(!t&&!o)return{reason:"",returnCode:0,output:n};const i=t?/<return-code>\s*(-?\d+)\s*<\/return-code>/.exec(n):null,g=o?/<output>\s*(.*?)\s*<\/output>/s.exec(n):null;let _="",c="0",p=n;return i&&(c=i[1],_=n.substring(0,i.index)),g&&(p=g[1],i||(_=n.substring(0,g.index))),{reason:_,returnCode:Number(c),output:p}}function ss(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({})));const i=Qr(jc,`shell-tool-component-${t.toolUse.tool_use_id}`);let g=r((()=>(function(p){if(typeof p.command_type=="string"){if(p.command_type==="simple"&&Array.isArray(p.simple_command)&&p.simple_command.length>0)return p.simple_command.join(" ");if(p.command_type==="complex"&&typeof p.complex_command=="string")return p.complex_command}else if(typeof p.command=="string")return p.command;return""})(o()))),_=r((()=>i(t.toolUseState.result?.text??""))),c=r((()=>(function(p,A,h){if(A.terminal_id!==null&&A.terminal_id!==void 0)return A.terminal_id;if(p==="launch-process"&&h){const a=h.match(/[Tt]erminal ID (\d+)/);if(a)return parseInt(a[1],10)}})(t.toolUse.tool_name,o(),t.toolUseState.result?.text)));Re(n,{header:a=>{Ne(a,{toolName:"Terminal",icon:l=>{ve(l,{name:"square-terminal"})},secondary:l=>{var u=j(),f=D(u),v=b=>{We(b,{get content(){return e(g)},class:"c-shell-tool-component__secondary",children:(x,R)=>{re(x,{size:1,color:"neutral",truncate:!0,children:(L,M)=>{var I=J();H(($=>se(I,`$${$??""}`)),[()=>e(g).replace(/^\s*\$/,"").trim()]),s(L,I)},$$slots:{default:!0}})},$$slots:{default:!0}})},k=b=>{re(b,{size:1,color:"neutral",truncate:!0,children:(x,R)=>{var L=J();H((M=>se(L,M)),[()=>(function(M,I){const $=!(I===ge.completed||I===ge.error);switch(M){case"launch-process":return $?"Launching Process...":"Launched Process";case"kill-process":return $?"Killing Process...":"Killed Process";case"read-process":return $?"Reading from Process...":"Read from Process";case"write-process":return $?"Writing to Process...":"Wrote to Process";case"list-processes":return $?"Listing Processes":"Listed Processes";case"wait-process":return $?"Waiting for Process...":"Waited for Process";case"read-terminal":return $?"Reading from Terminal...":"Read from Terminal"}return""})(t.toolUse.tool_name,t.toolUseState.phase)]),s(x,L)},$$slots:{default:!0}})};z(f,(b=>{e(g)?b(v):b(k,!1)})),s(l,u)},toolAction:l=>{{let u=r((()=>t.toolUseState.result?.text));zc(l,{get terminalId(){return e(c)},get toolUseInput(){return o()},get toolResult(){return e(u)},get phase(){return t.toolUseState.phase}})}},toolStatus:l=>{{let u=r((()=>!!e(_).returnCode&&e(_).returnCode!==0));qs(l,{get isCommandError(){return e(u)}})}},$$slots:{icon:!0,secondary:!0,toolAction:!0,toolStatus:!0}})},details:a=>{Bc(a,{get toolUseInput(){return o()},get result(){return e(_)},get toolUseState(){return t.toolUseState}})},error:a=>{{let U=r((()=>!e(_).returnCode&&t.toolUseState.phase===ge.error)),S=r((()=>t.toolUseState.result?.text));It(a,{get isError(){return e(U)},get text(){return e(S)}})}},$$slots:{header:!0,details:!0,error:!0}}),ue()}var Gc=T('<div><div class="editor-container svelte-1vyiv45"></div></div>');function pa(n,t){de(t,!0);const[o,i]=Se();let g,_,c=le(void 0),p=le(void 0);gs((()=>{e(c)?.dispose(),g?.dispose(),_?.dispose()})),Ps((()=>{e(p)&&(G(c,Us.createDiffEditor(e(p),{lineNumbers:"off",hideUnchangedRegions:{enabled:!0,revealLineCount:3,minimumLineCount:3,contextLineCount:3},scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},lightbulb:{enabled:Us.ShowLightbulbIconMode.Off},automaticLayout:!0,enableSplitViewResizing:!1,diffCodeLens:!1,renderOverviewRuler:!1,renderSideBySide:!1,glyphMargin:!1,folding:!1,showFoldingControls:"never",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineDecorationsWidth:0}),!0),e(c).getOriginalEditor().updateOptions({lineNumbers:"off"}),e(c).getModifiedEditor().updateOptions({lineNumbers:"off"}))})),Te((()=>{(function(a,U,S){const w=[g,_];U=U||"",S=S||"",g=Us.createModel(U,void 0,a!==void 0?Qo.parse("file://"+a+`#${crypto.randomUUID()}`):void 0),_=Us.createModel(S,void 0,a!==void 0?Qo.parse("file://"+a+`#${crypto.randomUUID()}`):void 0),e(c)&&e(c).setModel({original:g,modified:_}),w.forEach((d=>d?.dispose()))})(t.path,t.originalCode,t.modifiedCode)})),Te((()=>{if(e(c)){const a=he(xo,"$themeStore",o),U=Mn(a?.category,a?.intensity),S={theme:U};Us.setTheme(U),e(c).getModifiedEditor().updateOptions(S),e(c).getOriginalEditor().updateOptions(S),e(c).layout()}}));var A=Gc(),h=y(A);Is(h,"height:200px"),Ct(h,(a=>G(p,a)),(()=>e(p))),s(n,A),ue(),i()}function ga(n){return n.command==="str_replace"&&typeof n.old_str_start_line_number_1=="number"&&typeof n.old_str_end_line_number_1=="number"?{start:n.old_str_start_line_number_1,stop:n.old_str_end_line_number_1}:null}function lr(n){return ga(n)||(n.view_range&&Array.isArray(n.view_range)?{start:n.view_range[0],stop:n.view_range[1]}:{start:0,stop:0})}var Vc=T("<!> <!>",1),Hc=T('<div class="c-edit-file-tool-use-details__loading">Loading...</div>'),Kc=T('<div class="c-edit-file-tool-use-details svelte-1wof8pl"><div class="c-edit-file-tool-use-details__header svelte-1wof8pl"><!> <div class="c-edit-file-tool-use-details__header__counts svelte-1wof8pl"><!></div></div> <!></div>');function Jc(n,t){de(t,!0);const o=()=>he(c,"$ctx",g),i=()=>he(u,"$remoteAgentsModel",g),[g,_]=Se(),c=vt();let p=B(t,"toolUseInput",31,(()=>Ve(o().toolUseInput))),A=B(t,"toolUseState",31,(()=>Ve(o().toolUseState))),h=B(t,"requestId",31,(()=>Ve(o().requestId))),a=B(t,"turnIndex",19,(()=>o().turnIndex));const U=r((()=>ga(p()))),S=r((()=>e(U)?.start)),w=r((()=>e(U)?.stop));let d=le(!1),l=le(!1);const u=Ze(as.key),f=$t();let v=r((()=>A().phase===ge.completed)),k=le(void 0);async function b(){if(!e(x))return;if(e(R))return void(function(){if(!e(R)||e(d))return;const W=qr(i()?.currentConversation?.exchanges??[],a());if(!W)return void console.warn("no changed files for remote agent turn",a());let q=W.find((Y=>Y.new_path===p().path));q||(q=W.find((Y=>p().path.includes(Y.new_path)))),q?(G(k,{relPath:q.new_path||q.old_path,originalCode:q.old_contents,modifiedCode:q.new_contents},!0),G(d,!0)):console.warn("no changed file for path",p().path)})();const P=(await f.getAgentEditContentsByRequestId(h())).at(0);P?(P.originalCode===P.modifiedCode&&console.warn("no changes for requestId",h()),G(k,P,!0),G(d,!0)):console.warn("no contents for requestId",h())}Te((()=>{h(h()),p(p()),A(A()),G(d,!1)}));let x=r((()=>e(v)&&!e(d)&&e(l)));Te((()=>{e(x)&&b()}));let R=r((()=>!!u?.isActive)),L=r((()=>Tt(p().path,"").split("/").at(-1)??""));var M=Kc(),I=y(M),$=y(I);re($,{size:1,color:"primary",class:"c-edit-file-tool-use-details__header__icon",children:(P,W)=>{var q=Vc(),Y=D(q);zo(Y,{get filename(){return e(L)}});var V=F(Y,2);es(V,{get filepath(){return e(L)}}),s(P,q)},$$slots:{default:!0}});var m=F($,2),E=y(m);{let P=r((()=>Tt(p().path,""))),W=r((()=>Tt(p().snippet,"")));oo(E,{get path(){return e(P)},get codeSnippetToLocate(){return e(W)},get start(){return e(S)},get stop(){return e(w)},size:1})}var C=F(I,2),N=P=>{pa(P,tt((()=>e(k)),{get path(){return e(L)}}))},O=P=>{var W=Hc();s(P,W)};z(C,(P=>{e(k)?P(N):P(O,!1)})),Nt(M,((P,W)=>ns?.(P,W)),(()=>({onVisible:()=>G(l,!0),scrollTarget:document.body}))),s(n,M),ue(),_()}var Yc=T('<div class="c-line-diff-count svelte-14dvwb6"><!></div>');function ha(n,t){de(t,!0);const o=()=>he(A,"$intersectionStore",i),[i,g]=Se(),_=vt(),c=$t(),{enabled:p}=Xr(),A=(function(d,l,u=Mo()){if(u.has(d))return Ft(u.get(d));const f=Ft(l);return f.subscribe((v=>{u.set(d,v)})),f})(`line-diff-count-${t.requestId}`,{totalAddedLines:0,totalRemovedLines:0,hasLoaded:!1,isError:!1});let h=he(p,"$intersectionObserverEnabled",i);Te((()=>{he(_,"$ctx",i).toolUseState.phase!==ge.completed||o().hasLoaded||!h||o().isError||U(t.requestId)}));let a=le(0);async function U(d){try{const l=await c.getAgentEditChangesByRequestId(d);if(!(l&&l.length>0))throw new Error("No changes found");{const u=l.reduce(((f,v)=>({totalAddedLines:f.totalAddedLines+(v.totalAddedLines??0),totalRemovedLines:f.totalRemovedLines+(v.totalRemovedLines??0)})),{totalAddedLines:0,totalRemovedLines:0});Uo(A,{totalAddedLines:u.totalAddedLines,totalRemovedLines:u.totalRemovedLines,hasLoaded:!0,isError:!1})}}catch(l){console.warn(`Loading changes  for ${d} retry ${e(a)}: `,l),Ua(a)>3?(Wo(A,Es(o).hasLoaded=!0,Es(o)),Wo(A,Es(o).isError=!0,Es(o)),console.warn(`Loading changes failed for ${d}: `,l)):d&&(await new Promise((u=>setTimeout(u,500))),await U(d))}}var S=Yc(),w=y(S);{let d=r((()=>!o().hasLoaded));Gr(w,{get loading(){return e(d)},get totalAddedLines(){return o().totalAddedLines},get totalRemovedLines(){return o().totalRemovedLines},size:0,tooltips:!0})}Nt(S,((d,l)=>ns?.(d,l)),(()=>({onVisible:()=>h=!0,scrollTarget:document.body}))),s(n,S),ue(),g()}var Xc=T("<!> <!>",1),Qc=T('<div class="c-str-replace__details"><!></div>');function ma(n,t){de(t,!0);const[o,i]=Se(),g=vt();let _=B(t,"toolUseInput",19,(()=>({}))),c=r((()=>Tt(_().path||_().file_path,""))),p=r((()=>_().command==="str_replace"));Re(n,{get showToolOutput(){return e(p)},header:U=>{Ne(U,{icon:u=>{var f=j(),v=D(f),k=x=>{ve(x,{name:"file-pen"})},b=x=>{ve(x,{name:"file"})};z(v,(x=>{e(p)?x(k):x(b,!1)})),s(u,f)},toolNameSnippet:u=>{{let f=r((()=>lr(_())));(function(v,k){de(k,!0);const b=()=>he(I,"$ctx",x),[x,R]=Se();let L=B(k,"start",19,(()=>{})),M=B(k,"stop",19,(()=>{}));const I=vt();var $=j(),m=D($),E=N=>{var O=J();H((()=>se(O,b().toolUseInput.edit_summary??b().toolUseState.phase===ge.running?"Reading file...":L()&&M()?`Read lines ${L()}-${M()}`:"Read file"))),s(N,O)},C=N=>{var O=J();H((()=>se(O,b().toolUseState.phase===ge.running?"Editing file...":"Edited file"))),s(N,O)};z(m,(N=>{b().toolUseInput.command==="view"?N(E):N(C,!1)})),s(v,$),ue(),R()})(u,tt((()=>e(f))))}},secondary:u=>{{let f=r((()=>lr(_())));Os(u,tt({get filepath(){return e(c)}},(()=>e(f)),{showIcon:!0}))}},toolStatus:u=>{var f=Xc(),v=D(f);ha(v,{get requestId(){return he(g,"$ctx",o).requestId}}),qs(F(v,2),{}),s(u,f)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0,toolStatus:!0}})},details:U=>{var S=Qc(),w=y(S),d=l=>{Jc(l,{})};z(w,(l=>{t.toolUseState.phase===ge.completed&&l(d)})),s(U,S)},error:U=>{var S=j(),w=D(S),d=l=>{It(l,tt((()=>t.toolUseState.result??{})))};z(w,(l=>{t.toolUseState.phase===ge.error&&l(d)})),s(U,S)},$$slots:{header:!0,details:!0,error:!0}}),ue(),i()}const ir="*** Add File: ",cr="*** Delete File: ",dr="*** Update File: ";function Zc(n){const{added:t,updated:o,deleted:i}=(function(g){const _=g.trim().split(`
`),c=new Set,p=new Set,A=new Set;for(const h of _)h.startsWith(ir)&&c.add(h.slice(ir.length)),h.startsWith(dr)&&p.add(h.slice(dr.length)),h.startsWith(cr)&&A.add(h.slice(cr.length));return{added:[...c],updated:[...p],deleted:[...A]}})(n);return[...new Set([...t,...o,...i])]}var ed=T('<div class="c-apply-patch-tool-use-details__error svelte-1yvt4wj"><!></div>'),td=T('<span class="c-apply-patch-tool-use-details__move-path svelte-1yvt4wj"><!> <span class="c-apply-patch-tool-use-details__move-arrow svelte-1yvt4wj"></span> <!></span>'),sd=T("<!> <!>",1),od=T('<div><div class="c-apply-patch-tool-use-details__header svelte-1yvt4wj"><!> <div class="c-apply-patch-tool-use-details__header__actions svelte-1yvt4wj"><!></div></div> <!></div>'),rd=T('<div class="c-apply-patch-tool-use-details__loading svelte-1yvt4wj">Loading...</div>'),ad=T('<div class="c-apply-patch-tool-use-details svelte-1yvt4wj"><!></div>');function nd(n,t){de(t,!0);const o=()=>he(c,"$ctx",g),i=()=>he(d,"$remoteAgentsModel",g),[g,_]=Se(),c=vt();let p=B(t,"toolUseInput",27,(()=>Ve(o().toolUseInput))),A=B(t,"toolUseState",27,(()=>Ve(o().toolUseState))),h=B(t,"requestId",27,(()=>Ve(o().requestId))),a=B(t,"turnIndex",19,(()=>o().turnIndex)),U=le(!1),S=le(!1);const w=$t(),d=Ze(as.key);let l=r((()=>A().phase===ge.completed)),u=le(Ve([])),f=le(void 0);async function v(){if(e(k))if(e(b))(function(){if(e(b)&&!e(U))try{const I=qr(i()?.currentConversation?.exchanges??[],a());if(!I||I.length===0)return console.warn("no changed files for remote agent turn",a()),void G(U,!0);G(u,I.map(($=>({relPath:$.new_path||$.old_path,originalCode:$.old_contents,modifiedCode:$.new_contents,oldPath:$.change_type===el.renamed?$.old_path:void 0}))),!0),G(U,!0)}catch(I){console.error("Error loading remote agent contents:",I),G(f,"Failed to load file changes from remote agent"),G(U,!0)}})();else try{const I=await w.getAgentEditContentsByRequestId(h());I.length===0&&console.warn("No contents found for requestId:",h()),G(u,I.map(($=>({relPath:$.relPath,originalCode:$.originalCode,modifiedCode:$.modifiedCode,oldPath:void 0}))),!0),G(U,!0)}catch(I){console.error("Error loading contents:",I),G(f,"Failed to load file changes"),G(U,!0)}}Te((()=>{h(),p(),A(),G(U,!1),G(f,void 0)}));let k=r((()=>e(l)&&!e(U)&&e(S)));Te((()=>{e(k)&&v()}));let b=r((()=>!!d?.isActive));var x=ad(),R=y(x),L=I=>{var $=ed(),m=y($);re(m,{size:1,color:"error",children:(E,C)=>{var N=J();H((()=>se(N,e(f)))),s(E,N)},$$slots:{default:!0}}),s(I,$)},M=I=>{var $=j(),m=D($),E=N=>{var O=j(),P=D(O);Ce(P,17,(()=>e(u)),(W=>W.relPath),((W,q)=>{const Y=r((()=>!!e(q).oldPath)),V=r((()=>qn(e(q).relPath)));var te=od();let K;var X=y(te),ee=y(X);re(ee,{size:1,color:"primary",class:"c-apply-patch-tool-use-details__header__icon",children:(oe,ae)=>{var ie=sd(),ne=D(ie);zo(ne,{get filename(){return e(V)}});var ce=F(ne,2),pe=_e=>{var me=td(),ke=y(me);es(ke,{get filepath(){return e(q).oldPath}});var ye=F(ke,4);es(ye,{get filepath(){return e(q).relPath}}),s(_e,me)},fe=_e=>{es(_e,{get filepath(){return e(V)}})};z(ce,(_e=>{e(Y)&&e(q).oldPath?_e(pe):_e(fe,!1)})),s(oe,ie)},$$slots:{default:!0}});var Q=F(ee,2),Z=y(Q);oo(Z,{get path(){return e(q).relPath},size:1}),pa(F(X,2),{get originalCode(){return e(q).originalCode},get modifiedCode(){return e(q).modifiedCode},get path(){return e(q).relPath}}),H((()=>K=Qe(te,1,"c-apply-patch-tool-use-details__file svelte-1yvt4wj",null,K,{"c-apply-patch-tool-use-details__file--move":e(Y)}))),s(W,te)})),s(N,O)},C=N=>{var O=rd();s(N,O)};z(m,(N=>{e(u).length>0?N(E):N(C,!1)}),!0),s(I,$)};z(R,(I=>{e(f)?I(L):I(M,!1)})),Nt(x,((I,$)=>ns?.(I,$)),(()=>({onVisible:()=>G(S,!0),scrollTarget:document.body}))),s(n,x),ue(),_()}var ld=T("<!> <!>",1);function fa(n,t){de(t,!0);let o=B(t,"size",3,0),i=B(t,"iconSize",3,1),g=B(t,"href",19,(()=>{}));function _(h){h?.preventDefault(),h?.stopPropagation(),Ms.postMessage({type:Ss.augmentLink,data:g()})}var c=j(),p=D(c),A=h=>{Oe(h,{variant:"ghost-block",color:"neutral",get size(){return o()},onclick:_,children:(a,U)=>{ve(a,{name:"external-link",get size(){return i()}})},$$slots:{default:!0}})};z(p,(h=>{g()&&h(A)})),s(n,c),ue()}var id=T("<img/>"),cd=T('<div class="c-web-fetch-container svelte-1s8mpu9"><span class="c-web-fetch-favicon-container svelte-1s8mpu9"><!> <span class="c-web-fetch-url svelte-1s8mpu9"> </span></span></div>');function _a(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({})));function i(c,p){switch(c){case ge.running:return`Getting information from ${p}...`;case ge.error:return"Error";case ge.cancelled:return"Cancelled";case ge.runnable:return`Waiting for user approval to get ${p}`;case ge.completed:default:return""}}let g=r((()=>Tt(o().url,""))),_=r((()=>(function(c){try{return new URL(c).hostname}catch{return""}})(e(g))));Re(n,{header:A=>{{const h=S=>{ve(S,{name:"globe"})},a=S=>{fa(S,{get href(){return e(g)},size:.5,iconSize:1})};let U=r((()=>[i(t.toolUseState.phase,e(_))]));Ne(A,{get toolName(){return t.toolName},get formattedToolArgs(){return e(U)},icon:h,toolAction:a,$$slots:{icon:!0,toolAction:!0}})}},details:A=>{var h=cd(),a=y(h),U=y(a),S=u=>{var f=j(),v=D(f);Pr(v,(()=>(async function(k){return new Promise(((b,x)=>{const R=new Image,L=`https://www.google.com/s2/favicons?domain=${k}&sz=12`;L?(R.onload=()=>{b(L)},R.onerror=M=>{console.warn(M),x(M)},R.src=L):x(new Error("No favicon URL"))}))})(e(_)||"")),(k=>{vs(k,{size:1,class:"c-web-fetch-favicon"})}),((k,b)=>{var x=id();H((()=>{gt(x,"src",e(b)),gt(x,"alt",`Website favicon ${e(b)??""}`)})),s(k,x)})),s(u,f)},w=u=>{vs(u,{size:1,class:"c-web-fetch-favicon"})};z(U,(u=>{e(_)?u(S):u(w,!1)}));var d=F(U,2),l=y(d);H((()=>se(l,o().url||""))),s(A,h)},$$slots:{header:!0,details:!0}}),ue()}var dd=T("<!> Codebase",1),ud=T("<span></span>"),vd=T("Pattern Search <!> <!>",1),pd=T('<div class="c-view-secondary svelte-1dzy6ao"><!></div>');function gd(n,t){de(t,!0);const[o,i]=Se(),g=vt();let _=B(t,"start",19,(()=>{})),c=B(t,"stop",19,(()=>{})),p=B(t,"isDirectory",3,!1),A=B(t,"searchQueryRegex",19,(()=>{})),h=B(t,"caseSensitive",3,!1),a=B(t,"isRulesFile",3,!1);var U=pd(),S=y(U),w=l=>{var u=j(),f=D(u),v=b=>{var x=J("Searching for pattern...");s(b,x)},k=b=>{var x=j(),R=D(x),L=I=>{var $=J("Reading directory...");s(I,$)},M=I=>{var $=j(),m=D($),E=N=>{var O=J("Reading rules file...");s(N,O)},C=N=>{var O=J("Reading file...");s(N,O)};z(m,(N=>{a()?N(E):N(C,!1)}),!0),s(I,$)};z(R,(I=>{p()?I(L):I(M,!1)}),!0),s(b,x)};z(f,(b=>{A()?b(v):b(k,!1)})),s(l,u)},d=l=>{var u=j(),f=D(u),v=b=>{var x=J("Read directory");s(b,x)},k=b=>{var x=j(),R=D(x),L=I=>{var $=vd(),m=F(D($));re(m,{size:1,color:"neutral",truncate:!0,children:(N,O)=>{var P=J();H((()=>se(P,A()))),s(N,P)},$$slots:{default:!0}});var E=F(m,2),C=N=>{re(N,{size:1,muted:!0,truncate:!0,children:(O,P)=>{var W=J("(case-sensitive)");s(O,W)},$$slots:{default:!0}})};z(E,(N=>{h()&&N(C)})),s(I,$)},M=I=>{var $=j(),m=D($),E=N=>{var O=J("Read rules file");s(N,O)},C=N=>{var O=j(),P=D(O),W=Y=>{var V=J("Read file");s(Y,V)},q=Y=>{var V=J();H((()=>se(V,`Read lines ${_()??""}-${c()??""}`))),s(Y,V)};z(P,(Y=>{_()&&c()?Y(q,!1):Y(W)}),!0),s(N,O)};z(m,(N=>{a()?N(E):N(C,!1)}),!0),s(I,$)};z(R,(I=>{A()?I(L):I(M,!1)}),!0),s(b,x)};z(f,(b=>{p()?b(v):b(k,!1)}),!0),s(l,u)};z(S,(l=>{he(g,"$ctx",o).toolUseState.phase<=ge.running?l(w):l(d,!1)})),s(n,U),ue(),i()}var hd=T('<code class="c-view-tool-use-details__value svelte-1uvztgz"> </code>'),md=T('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div> <div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>',1),fd=T('<div class="c-view-tool-use-details__section svelte-1uvztgz"><!> <!></div>'),_d=T('<div class="c-view-tool-use-details svelte-1uvztgz"><div class="c-view-tool-use-details__content svelte-1uvztgz"><!> <!></div></div>');function kd(n,t){de(t,!0);const[o,i]=Se(),g=vt();let _=B(t,"toolUseInput",19,(()=>he(g,"$ctx",o).toolUseInput)),c=r((()=>typeof _().search_query_regex=="string"?_().search_query_regex:void 0)),p=r((()=>typeof _().case_sensitive=="boolean"&&_().case_sensitive)),A=r((()=>typeof _().context_lines_before=="number"?_().context_lines_before:5)),h=r((()=>typeof _().context_lines_after=="number"?_().context_lines_after:5)),a=r((()=>_().view_range&&Array.isArray(_().view_range)&&(_().view_range[0]!==0||_().view_range[1]!==0)?_().view_range:void 0));var U=j(),S=D(U),w=d=>{var l=_d(),u=y(l),f=y(u),v=x=>{var R=md(),L=D(R),M=y(L);re(M,{size:1,class:"c-view-tool-use-details__label",children:(P,W)=>{var q=J("Search Pattern");s(P,q)},$$slots:{default:!0}});var I=F(M,2);re(I,{size:1,color:"secondary",children:(P,W)=>{var q=hd(),Y=y(q);H((()=>se(Y,e(c)))),s(P,q)},$$slots:{default:!0}});var $=F(L,2),m=y($);re(m,{size:1,class:"c-view-tool-use-details__label",children:(P,W)=>{var q=J("Case Sensitive");s(P,q)},$$slots:{default:!0}});var E=F(m,2);re(E,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(P,W)=>{var q=J();H((()=>se(q,e(p)?"Yes":"No"))),s(P,q)},$$slots:{default:!0}});var C=F($,2),N=y(C);re(N,{size:1,class:"c-view-tool-use-details__label",children:(P,W)=>{var q=J("Context Lines");s(P,q)},$$slots:{default:!0}});var O=F(N,2);re(O,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(P,W)=>{var q=J();H((()=>se(q,`${e(A)??""} before, ${e(h)??""} after`))),s(P,q)},$$slots:{default:!0}}),s(x,R)};z(f,(x=>{e(c)&&x(v)}));var k=F(f,2),b=x=>{var R=fd(),L=y(R);re(L,{size:1,class:"c-view-tool-use-details__label",children:(I,$)=>{var m=J("View Range");s(I,m)},$$slots:{default:!0}});var M=F(L,2);re(M,{size:1,color:"secondary",class:"c-view-tool-use-details__value",children:(I,$)=>{var m=J();H((()=>se(m,`Lines ${e(a)[0]??""} to ${(e(a)[1]===-1?"end":e(a)[1])??""}`))),s(I,m)},$$slots:{default:!0}}),s(x,R)};z(k,(x=>{e(a)&&x(b)})),s(d,l)};z(S,(d=>{(e(c)||e(a))&&d(w)})),s(n,U),ue(),i()}const $d="Here's the result of running `cat -n`",bd="Total lines in file:";function vo(n){return n.view_range&&Array.isArray(n.view_range)?{start:n.view_range[0],stop:n.view_range[1]}:{start:0,stop:0}}function ur(n){return typeof n.search_query_regex=="string"?n.search_query_regex:void 0}var yd=T("<span>Render Mermaid</span>"),wd=T('<div class="c-mermaid-wrapper svelte-pw0otf"><!></div>'),Sd=T('<div class="c-mermaid-loading svelte-pw0otf"><!></div>'),Td=T('<div class="c-mermaid-error svelte-pw0otf"><!></div>'),Id=T('<div class="c-mermaid-tool"><!></div>'),xd=T("<!> ",1),Ud=T("<!> ",1),Ed=T("<!> ",1),Cd=T('<div class="c-task-diff-badges svelte-6ivqgh"><!> <!> <!></div>');function po(n,t){de(t,!0);var o=Cd(),i=y(o),g=h=>{We(h,{content:"Added",children:(a,U)=>{var S=j(),w=D(S);Le(w,(()=>Ks.Root),((d,l)=>{l(d,{color:"neutral",size:0,children:(u,f)=>{var v=xd(),k=D(v);ve(k,{name:"circle-fading-plus",size:1});var b=F(k);H((()=>se(b,` ${t.taskCounts.created??""}`))),s(u,v)},$$slots:{default:!0}})})),s(a,S)},$$slots:{default:!0}})};z(i,(h=>{t.taskCounts.created>0&&h(g)}));var _=F(i,2),c=h=>{We(h,{content:"Updated",children:(a,U)=>{var S=j(),w=D(S);Le(w,(()=>Ks.Root),((d,l)=>{l(d,{color:"neutral",size:0,children:(u,f)=>{var v=Ud(),k=D(v);ve(k,{name:"circle-fading-arrow-up",size:1});var b=F(k);H((()=>se(b,` ${t.taskCounts.updated??""}`))),s(u,v)},$$slots:{default:!0}})})),s(a,S)},$$slots:{default:!0}})};z(_,(h=>{t.taskCounts.updated>0&&h(c)}));var p=F(_,2),A=h=>{We(h,{content:"Deleted",children:(a,U)=>{var S=j(),w=D(S);Le(w,(()=>Ks.Root),((d,l)=>{l(d,{color:"neutral",size:0,children:(u,f)=>{var v=Ed(),k=D(v);ve(k,{name:"trash-2",size:1});var b=F(k);H((()=>se(b,` ${t.taskCounts.deleted??""}`))),s(u,v)},$$slots:{default:!0}})})),s(a,S)},$$slots:{default:!0}})};z(p,(h=>{t.taskCounts.deleted>0&&h(A)})),s(n,o),ue()}function ka(n,t=new Set(Object.values(nt))){const o={...n,isVisible:!1,subTasksData:[]};let i=!1;if(n.subTasksData&&n.subTasksData.length>0){const _=[];for(const c of n.subTasksData){const p=ka(c,t);_.push(p),p.isVisible&&(i=!0)}o.subTasksData=_}const g=(function(_,c){return c.size!==0&&c.has(_.state)})(n,t);return o.isVisible=g||i,o}function Ad(n,t){const o=n.map((i=>ka(i)));return{uuid:`dummy-root-${t}`,name:`${t} Tasks`,description:`Tasks that were ${t.toLowerCase()}`,state:nt.NOT_STARTED,subTasks:n.map((i=>i.uuid)),subTasksData:o,lastUpdated:Date.now(),lastUpdatedBy:to.AGENT,isVisible:!0}}function vr(n,t){try{n(fn()),t()}catch(o){throw console.error(o),Ea(o),o}finally{n(_n())}}const Ld=(n,t=Me)=>{var o=zd(),i=D(o);Oe(i,{size:.5,variant:"ghost-block",color:"neutral",readonly:!0,children:(c,p)=>{ve(c,{get name(){return t().icon},size:2})},$$slots:{default:!0}});var g=F(i,2),_=y(g);re(_,{size:1,children:(c,p)=>{var A=J();H((()=>se(A,t().name))),s(c,A)},$$slots:{default:!0}}),s(n,o)};var zd=T('<!> <div class="c-task-diff-renderer__item-name svelte-ui33ty"><!></div>',1),Nd=T('<div class="c-task-diff-renderer__empty svelte-ui33ty"><!></div>'),Rd=T('<div class="c-task-diff-renderer"><!></div>');function go(n,t){de(t,!0);const[o,i]=Se(),g=(u,f=Me)=>{var v=j(),k=D(v),b=x=>{Qs(x,{get taskUuid(){return e(a)[f().name]},editable:!1})};z(k,(x=>{e(a)[f().name]&&x(b)})),s(u,v)},_=kt(),c=Vs(_),p=st(),A=r((()=>kn(t.text,he(c,"$rootTaskUuid",o)))),h=r((()=>[{name:"Created",icon:"circle-fading-plus",tasks:e(A).created},{name:"Updated",icon:"circle-fading-arrow-up",tasks:e(A).updated},{name:"Deleted",icon:"trash-2",tasks:e(A).deleted}].filter((u=>u.tasks.length>0))));let a=le(Ve({}));Te((()=>{const u={},f=[];return vr(p,(()=>{for(const v of e(h)){for(const b of v.tasks)p(ko(b)),f.push(b.uuid);const k=Ad(v.tasks,v.name);u[v.name]=k.uuid,p(ko(k)),f.push(k.uuid)}})),G(a,u,!0),()=>{vr(p,(()=>{for(const v of f)p($n(v))}))}}));const U=r((()=>e(h).length>0));var S=Rd(),w=y(S),d=u=>{var f=j(),v=D(f);Ce(v,17,(()=>e(h)),(k=>k.name),((k,b)=>{{let x=r((()=>`id-${e(b).name}`));Kr(k,{get id(){return e(x)},class:"c-task-tree-item",get item(){return e(b)},hasNestedItems:!0,disabled:!0,expandable:!1,expanded:!0,get headerContents(){return Ld},get contents(){return g}})}})),s(u,f)},l=u=>{var f=Nd(),v=y(f);re(v,{size:1,color:"neutral",children:(k,b)=>{var x=J("No task changes to display");s(k,x)},$$slots:{default:!0}}),s(u,f)};z(w,(u=>{e(U)?u(d):u(l,!1)})),s(n,S),ue(),i()}function js(n,t){de(t,!1);const o=os.tryGetFromContext();Xs(),Oe(n,{variant:"ghost-block",color:"neutral",size:.5,onclick:function(i){i?.stopPropagation(),o?.setActiveTab(Ds.tasks)},children:(i,g)=>{ve(i,{name:"external-link",size:1})},$$slots:{default:!0}}),ue()}var Md=T('<div class="c-task-list-tool__no-diff svelte-177zs5s"><!></div>'),Dd=T('<div class="c-task-list-tool__details svelte-177zs5s"><!></div>'),Od=T('<div class="c-task-list-tool-use-details__empty svelte-vshkmb"><!></div>'),Fd=T('<div class="c-task-list-tool-use-details__section svelte-vshkmb"><div class="c-task-list-tool-use-details__section-header svelte-vshkmb"><!></div> <div class="c-task-list-tool-use-details__task-list"><!></div></div>'),Pd=T('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),qd=T('<div class="c-task-list-tool-use-details__loading svelte-vshkmb"><!></div>'),Wd=T('<div class="c-task-list-tool-use-details svelte-vshkmb"><!></div>'),Bd=T('<div class="c-view-task-list-tool__details svelte-1mvzn7s"><!></div>'),jd=T('<div class="c-reorganize-task-list-tool__no-diff svelte-1528ctp"><!></div>'),Gd=T('<div class="c-reorganize-task-list-tool__details svelte-1528ctp"><!></div>'),Vd=T('<div class="c-add-tasks-tool__no-diff svelte-1rjuhj"><!></div>'),Hd=T('<div class="c-add-tasks-tool__details svelte-1rjuhj"><!></div>'),Kd=T('<div class="searching svelte-c2wciv">Searching...</div>'),Jd=T('<div class="no-results svelte-c2wciv">No search results available</div>'),Yd=T('<div class="tool-content svelte-c2wciv"><!></div>'),Xd=T('<span class="total-info svelte-h9oju"> </span>'),Qd=T('<span class="range-info svelte-h9oju"> <!></span>'),Zd=T("<span><!></span>"),eu=T('<span class="context-info svelte-z37tjo"> </span>'),tu=T('<span class="search-info svelte-z37tjo">Pattern <code class="svelte-z37tjo"> </code> <!></span>'),su=T("<span><!></span>");const pr={[St.shell]:ss,[St.webFetch]:function(n,t){let o=B(t,"toolUseInput",19,(()=>({})));_a(n,{toolName:"Web Fetch",get toolUseInput(){return o()},get toolUseState(){return t.toolUseState}})},[St.strReplaceEditor]:ma,[St.applyPatch]:function(n,t){de(t,!0);const[o,i]=Se(),g=vt();let _=B(t,"toolUseInput",19,(()=>({})));Re(n,{showToolOutput:!0,header:h=>{Ne(h,{toolName:"Apply Patch",icon:w=>{ve(w,{name:"file-diff"})},secondary:w=>{(function(d,l){de(l,!0);const u=()=>he(k,"$ctx",f),[f,v]=Se(),k=vt();let b=r((()=>{const x=u().toolUseInput.input;return typeof x=="string"?Zc(x).length:0}));re(d,{size:1,color:"neutral",children:(x,R)=>{var L=j(),M=D(L),I=m=>{var E=J();H((C=>se(E,`Changing ${C??""}`)),[()=>Dt(e(b),"file")]),s(m,E)},$=m=>{var E=j(),C=D(E),N=O=>{var P=J();H((W=>se(P,`Changed ${W??""}`)),[()=>Dt(e(b),"file")]),s(O,P)};z(C,(O=>{u().toolUseState.phase===ge.completed&&O(N)}),!0),s(m,E)};z(M,(m=>{u().toolUseState.phase===ge.running?m(I):m($,!1)})),s(x,L)},$$slots:{default:!0}}),ue(),v()})(w,{})},toolStatus:w=>{var d=ld(),l=D(d);ha(l,{get requestId(){return he(g,"$ctx",o).requestId}}),qs(F(l,2),{}),s(w,d)},$$slots:{icon:!0,secondary:!0,toolStatus:!0}})},details:h=>{var a=j(),U=D(a),S=w=>{nd(w,{get toolUseInput(){return _()},get toolUseState(){return t.toolUseState}})};z(U,(w=>{t.toolUseState.phase===ge.completed&&w(S)})),s(h,a)},error:h=>{var a=j(),U=D(a),S=w=>{It(w,tt((()=>t.toolUseState.result??{})))};z(U,(w=>{t.toolUseState.phase===ge.error&&w(S)})),s(h,a)},$$slots:{header:!0,details:!0,error:!0}}),ue(),i()},[St.codebaseRetrieval]:function(n,t){de(t,!0);const o=()=>he(c,"$enableCommitIndexing",i),[i,g]=Se();let _=B(t,"toolUseInput",19,(()=>({})));const c=Et("enableCommitIndexing");{const p=h=>{var a=j(),U=D(a),S=w=>{var d=dd(),l=D(d);ve(l,{name:"code",size:1}),s(w,d)};z(U,(w=>{o()&&w(S)})),s(h,a)};let A=r((()=>!o()));So(n,{get toolUseInput(){return _()},get noRetrieval(){return e(A)},retrieval:p,$$slots:{retrieval:!0}})}ue(),g()},[St.removeFiles]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=r((()=>Array.isArray(o().file_paths)?o().file_paths.filter((g=>typeof g=="string")):[]));Re(n,{showToolOutput:!1,header:_=>{Ne(_,{toolName:"Remove",icon:A=>{ve(A,{name:"file-minus"})},secondary:A=>{var h=ud();Ce(h,20,(()=>e(i)),(a=>a),((a,U)=>{es(a,{get filepath(){return U},showIcon:!0})})),s(A,h)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ue()},[St.view]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Tt(o().path||o().file_path,""))),_=r((()=>o().type==="directory")),c=r((()=>ur(o())!==void 0)),p=r((()=>!e(_)&&!e(c)&&(function(h){if(!h)return!1;const a=h.replace(/\\/g,"/"),U=`${Vo}/${Ho}/`,S=`${Vo}\\${Ho}\\`;return a.includes(U)||a.includes(S)})(e(g))&&t.toolUseState.phase===ge.completed)),A=r((()=>e(p)&&t.toolUseState.result?.text?(function(h){if(!h)return"";const a=h.split(`
`);let U=0,S=a.length;for(let d=0;d<a.length;d++){const l=a[d];if(l.startsWith($d)&&(U=d+1),l.startsWith(bd)||l.trim()===""){S=d;break}}const w=a.slice(U,S).map((d=>{const l=d.match(/^\s*(\d+)\s+(.*)$/);return l?l[2]:d})).join(`
`).trim();return mn.extractContent(w)})(t.toolUseState.result.text):""));{const h=w=>{Ne(w,{icon:f=>{var v=j(),k=D(v),b=R=>{ve(R,{name:"folder"})},x=R=>{var L=j(),M=D(L),I=m=>{ve(m,{name:"search"})},$=m=>{ve(m,{name:"file"})};z(M,(m=>{e(c)?m(I):m($,!1)}),!0),s(R,L)};z(k,(R=>{e(_)?R(b):R(x,!1)})),s(f,v)},toolNameSnippet:f=>{{let v=r((()=>vo(o()))),k=r((()=>ur(o()))),b=r((()=>(function(x){return typeof x.case_sensitive=="boolean"&&x.case_sensitive})(o())));gd(f,tt((()=>e(v)),{get isDirectory(){return e(_)},get searchQueryRegex(){return e(k)},get caseSensitive(){return e(b)},get isRulesFile(){return e(p)}}))}},secondary:f=>{var v=j(),k=D(v),b=R=>{{let L=r((()=>vo(o())));es(R,tt({get filepath(){return e(g)}},(()=>e(L))))}},x=R=>{{let L=r((()=>vo(o())));Os(R,tt({get filepath(){return e(g)}},(()=>e(L)),{showIcon:!0}))}};z(k,(R=>{e(_)?R(b):R(x,!1)})),s(f,v)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0}})},a=w=>{var d=j(),l=D(d),u=v=>{Fs(v,{maxHeight:90,children:(k,b)=>{{let x=r((()=>({text:e(A),lang:"text",type:"code",raw:e(A)})));_o(k,{get token(){return e(x)}})}},$$slots:{default:!0}})},f=v=>{kd(v,{get toolUseInput(){return o()}})};z(l,(v=>{e(p)&&t.toolUseState.result?.text?v(u):v(f,!1)})),s(w,d)},U=w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)};let S=r((()=>e(c)||e(p)));Re(n,{get showToolOutput(){return e(S)},get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:h,details:a,error:U,$$slots:{header:!0,details:!0,error:!0}})}ue()},[St.viewTaskList]:function(n,t){de(t,!0);let o=le(!0);Re(n,{showToolOutput:!0,get collapsed(){return e(o)},set collapsed(c){G(o,c,!0)},header:c=>{Ne(c,{toolName:"View Task List",icon:h=>{ve(h,{name:"list-checks"})},secondary:h=>{js(h,{})},$$slots:{icon:!0,secondary:!0}})},details:c=>{var p=Bd(),A=y(p),h=a=>{(function(U,S){de(S,!0);const w=()=>he(u,"$ctx",d),[d,l]=Se(),u=vt();let f=B(S,"toolUseInput",31,(()=>Ve(w().toolUseInput))),v=B(S,"toolUseState",31,(()=>Ve(w().toolUseState))),k=B(S,"requestId",31,(()=>Ve(w().requestId)));const b=st();Te((()=>{f(w().toolUseInput)})),Te((()=>{v(w().toolUseState)})),Te((()=>{k(w().requestId)}));let x=le(!1);const R=r((()=>v().phase===ge.completed));let L=le(void 0),M=le(void 0);Te((()=>{if(e(R)&&!e(x)&&v().result?.text){G(x,!0),G(L,v().result.text,!0);try{G(M,bn(yn(e(L))),!0),b(ko(e(M)))}catch(C){console.error("Failed to parse task list markdown:",C)}}}));var I=Wd(),$=y(I),m=C=>{Qs(C,{get taskUuid(){return e(M).uuid},editable:!1})},E=C=>{var N=j(),O=D(N),P=q=>{var Y=Od(),V=y(Y);re(V,{size:1,color:"neutral",children:(te,K)=>{var X=J("No tasks to display");s(te,X)},$$slots:{default:!0}}),s(q,Y)},W=q=>{var Y=j(),V=D(Y),te=X=>{var ee=Fd(),Q=y(ee),Z=y(Q);re(Z,{size:1,weight:"medium",color:"primary",children:(ie,ne)=>{var ce=J("Task List");s(ie,ce)},$$slots:{default:!0}});var oe=F(Q,2),ae=y(oe);ws(ae,{get markdown(){return e(L)}}),s(X,ee)},K=X=>{var ee=j(),Q=D(ee),Z=ae=>{var ie=Pd(),ne=y(ie);re(ne,{size:1,color:"neutral",children:(ce,pe)=>{var fe=J("Loading...");s(ce,fe)},$$slots:{default:!0}}),s(ae,ie)},oe=ae=>{var ie=qd(),ne=y(ie);re(ne,{size:1,color:"neutral",children:(ce,pe)=>{var fe=J("Waiting for task list...");s(ce,fe)},$$slots:{default:!0}}),s(ae,ie)};z(Q,(ae=>{e(R)?ae(Z):ae(oe,!1)}),!0),s(X,ee)};z(V,(X=>{e(L)?X(te):X(K,!1)}),!0),s(q,Y)};z(O,(q=>{e(M)!==void 0?q(P):q(W,!1)}),!0),s(C,N)};z($,(C=>{e(M)!==void 0&&e(M).subTasks?.length>0?C(m):C(E,!1)})),s(U,I),ue(),l()})(a,{get toolUseState(){return t.toolUseState},editable:!1})};z(A,(a=>{t.toolUseState.phase===ge.completed&&a(h)})),s(c,p)},error:c=>{var p=j(),A=D(p),h=a=>{It(a,tt((()=>t.toolUseState.result??{}),{hideDetailedMessage:!0}))};z(A,(a=>{t.toolUseState.phase===ge.error&&a(h)})),s(c,p)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[St.reorganizeTaskList]:function(n,t){de(t,!0);const[o,i]=Se();let g=le(!0);const _=kt(),c=Vs(_),p=r((()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError)),A=r((()=>t.toolUseState.result?.text||"")),h=r((()=>e(p)?co(e(A),he(c,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0})),a=r((()=>e(h).created>0||e(h).updated>0||e(h).deleted>0));Re(n,{get collapsed(){return e(g)},set collapsed(d){G(g,d,!0)},header:d=>{Ne(d,{toolName:"Reorganize Task List",icon:v=>{ve(v,{name:"list-checks"})},secondary:v=>{js(v,{})},headerActions:v=>{var k=j(),b=D(k),x=R=>{po(R,{get taskCounts(){return e(h)}})};z(b,(R=>{e(a)&&R(x)})),s(v,k)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:d=>{var l=Gd(),u=y(l),f=k=>{go(k,{get text(){return e(A)}})},v=k=>{var b=j(),x=D(b),R=L=>{var M=jd(),I=y(M);re(I,{size:1,color:"neutral",children:($,m)=>{var E=J("No task changes to display");s($,E)},$$slots:{default:!0}}),s(L,M)};z(x,(L=>{e(p)&&!e(a)&&L(R)}),!0),s(k,b)};z(u,(k=>{e(p)&&e(a)?k(f):k(v,!1)})),s(d,l)},error:d=>{It(d,tt((()=>t.toolUseState.result??{}),{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),ue(),i()},[St.updateTasks]:function(n,t){de(t,!0);const[o,i]=Se();let g=le(!0);const _=kt(),c=Vs(_),p=r((()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError)),A=r((()=>t.toolUseState.result?.text||"")),h=r((()=>e(p)?co(e(A),he(c,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0})),a=r((()=>e(h).created>0||e(h).updated>0||e(h).deleted>0));Re(n,{get collapsed(){return e(g)},set collapsed(d){G(g,d,!0)},header:d=>{Ne(d,{toolName:"Update Task List",icon:v=>{ve(v,{name:"list-checks"})},secondary:v=>{js(v,{})},headerActions:v=>{var k=j(),b=D(k),x=R=>{po(R,{get taskCounts(){return e(h)}})};z(b,(R=>{e(a)&&R(x)})),s(v,k)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:d=>{var l=Dd(),u=y(l),f=k=>{go(k,{get text(){return e(A)}})},v=k=>{var b=j(),x=D(b),R=L=>{var M=Md(),I=y(M);re(I,{size:1,color:"neutral",children:($,m)=>{var E=J("No task changes to display");s($,E)},$$slots:{default:!0}}),s(L,M)};z(x,(L=>{e(p)&&!e(a)&&L(R)}),!0),s(k,b)};z(u,(k=>{e(p)&&e(a)?k(f):k(v,!1)})),s(d,l)},error:d=>{var l=j(),u=D(l),f=v=>{It(v,tt((()=>t.toolUseState.result??{}),{hideDetailedMessage:!0}))};z(u,(v=>{t.toolUseState.phase===ge.error&&v(f)})),s(d,l)},$$slots:{header:!0,details:!0,error:!0}}),ue(),i()},[St.addTasks]:function(n,t){de(t,!0);const[o,i]=Se();let g=le(!0);const _=kt(),c=Vs(_),p=r((()=>t.toolUseState.result?.text&&!t.toolUseState.result.isError)),A=r((()=>t.toolUseState.result?.text||"")),h=r((()=>e(p)?co(e(A),he(c,"$rootTaskUuid",o)):{created:0,updated:0,deleted:0})),a=r((()=>e(h).created>0||e(h).updated>0||e(h).deleted>0));Re(n,{get collapsed(){return e(g)},set collapsed(d){G(g,d,!0)},header:d=>{Ne(d,{toolName:"Add Tasks",icon:v=>{ve(v,{name:"list-checks"})},secondary:v=>{js(v,{})},headerActions:v=>{var k=j(),b=D(k),x=R=>{po(R,{get taskCounts(){return e(h)}})};z(b,(R=>{e(a)&&R(x)})),s(v,k)},$$slots:{icon:!0,secondary:!0,headerActions:!0}})},details:d=>{var l=Hd(),u=y(l),f=k=>{go(k,{get text(){return e(A)}})},v=k=>{var b=j(),x=D(b),R=L=>{var M=Vd(),I=y(M);re(I,{size:1,color:"neutral",children:($,m)=>{var E=J("No task changes to display");s($,E)},$$slots:{default:!0}}),s(L,M)};z(x,(L=>{e(p)&&!e(a)&&L(R)}),!0),s(k,b)};z(u,(k=>{e(p)&&e(a)?k(f):k(v,!1)})),s(d,l)},error:d=>{It(d,tt((()=>t.toolUseState.result??{}),{hideDetailedMessage:!0}))},$$slots:{header:!0,details:!0,error:!0}}),ue(),i()},[St.renderMermaid]:function(n,t){de(t,!0);let o=le(!1);const i=$t();let g=r((()=>t.toolUseInput.title||"Mermaid Diagram")),_=r((()=>t.toolUseInput.diagram_definition||"")),c=r((()=>({type:"code",lang:"mermaid",text:e(_),raw:"```mermaid\n"+e(_)+"\n```"})));function p(A){A?.stopPropagation(),i?.openMermaidDiagramPanel(e(_),e(g))}Re(n,{showToolOutput:!0,get collapsed(){return e(o)},set collapsed(a){G(o,a,!0)},header:a=>{Ne(a,{icon:l=>{ve(l,{name:"workflow"})},toolNameSnippet:l=>{var u=yd();s(l,u)},secondary:l=>{re(l,{size:1,color:"neutral",truncate:!0,children:(u,f)=>{var v=J();H((()=>se(v,e(g)))),s(u,v)},$$slots:{default:!0}})},headerActions:l=>{var u=j(),f=D(u),v=k=>{We(k,{content:"Open in new tab",side:"bottom",children:(b,x)=>{Oe(b,{variant:"ghost-block",color:"neutral",size:.5,onclick:p,children:(R,L)=>{ve(R,{name:"external-link",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})};z(f,(k=>{t.toolUseState.phase===ge.completed&&e(_)&&k(v)})),s(l,u)},$$slots:{icon:!0,toolNameSnippet:!0,secondary:!0,headerActions:!0}})},details:a=>{var U=Id(),S=y(U),w=l=>{var u=wd();ia(y(u),{get token(){return e(c)},get title(){return e(g)}}),s(l,u)},d=l=>{var u=j(),f=D(u),v=b=>{var x=Sd(),R=y(x);re(R,{children:(L,M)=>{var I=J("Rendering Mermaid diagram...");s(L,I)},$$slots:{default:!0}}),s(b,x)},k=b=>{var x=j(),R=D(x),L=M=>{var I=Td(),$=y(I);re($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`Error rendering Mermaid diagram: ${(t.toolUseState.result?.text||"Unknown error")??""}`))),s(m,C)},$$slots:{default:!0}}),s(M,I)};z(R,(M=>{t.toolUseState.phase===ge.error&&M(L)}),!0),s(b,x)};z(f,(b=>{t.toolUseState.phase===ge.running?b(v):b(k,!1)}),!0),s(l,u)};z(S,(l=>{t.toolUseState.phase===ge.completed&&e(c)?l(w):l(d,!1)})),s(a,U)},$$slots:{header:!0,details:!0}}),ue()},[St.grepSearch]:function(n,t){de(t,!0);var o={toolUseInput:{}};return Re(n,{header:_=>{Ne(_,{toolName:"Grep Search",icon:p=>{ve(p,{name:"search"})},$$slots:{icon:!0}})},details:_=>{var c=Yd(),p=y(c),A=a=>{{let U=r((()=>({text:t.toolUseState.result.text,lang:"text",type:"code",raw:t.toolUseState.result.text})));_o(a,{get token(){return e(U)}})}},h=a=>{var U=j(),S=D(U),w=l=>{var u=Kd();s(l,u)},d=l=>{var u=Jd();s(l,u)};z(S,(l=>{t.toolUseState?.phase==="running"?l(w):l(d,!1)}),!0),s(a,U)};z(p,(a=>{t.toolUseState?.result?.text?a(A):a(h,!1)})),s(_,c)},$$slots:{header:!0,details:!0}}),ue(o)},[St.viewRangeUntruncated]:function(n,t){de(t,!1);const o=()=>he(_,"$ctx",i),[i,g]=Se(),_=vt();function c(a){return typeof a.start_line=="number"?a.start_line:void 0}function p(a){return typeof a.end_line=="number"?a.end_line:void 0}function A(a){if(!a)return;const U=a.match(/<!-- toolType: ([^>]+) -->/);return U?U[1]:void 0}function h(a){return a?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(a):!1}Xs(),Re(n,{header:U=>{{const S=l=>{ve(l,{name:"zoom-in"})},w=l=>{var u=Zd(),f=y(u);re(f,{size:1,class:"c-view-range-untruncated__secondary",children:(v,k)=>{var b=j(),x=D(b),R=M=>{var I=J();H(($=>se(I,$)),[()=>h(A(o().toolUseState.result?.text))?"Reading terminal output range...":"Reading full output range..."]),s(M,I)},L=M=>{var I=j(),$=D(I),m=C=>{const N=ys((()=>c(o().toolUseInput))),O=ys((()=>p(o().toolUseInput))),P=ys((()=>(function(te){if(!te)return;const K=te.match(/lines \d+-\d+ of (\d+) total lines/);if(K)return parseInt(K[1],10);const X=te.match(/Viewing lines \d+-\d+ \((\d+) total lines\)/);return X?parseInt(X[1],10):void 0})(o().toolUseState.result?.text)));var W=Qd(),q=y(W),Y=F(q),V=te=>{var K=Xd(),X=y(K);H((()=>se(X,`of ${e(P)??""} total lines`))),s(te,K)};z(Y,(te=>{e(P)&&te(V)})),H((()=>se(q,`View lines ${e(N)??""}-${e(O)??""} `))),s(C,W)},E=C=>{var N=J();H((O=>se(N,O)),[()=>h(A(o().toolUseState.result?.text))?"View terminal output range":"View full output range"]),s(C,N)};z($,(C=>{c(o().toolUseInput)&&p(o().toolUseInput)?C(m):C(E,!1)}),!0),s(M,I)};z(x,(M=>{o().toolUseState.phase<=ge.running?M(R):M(L,!1)})),s(v,b)},$$slots:{default:!0}}),s(l,u)};let d=ys((()=>{return h(l=A(o().toolUseState.result?.text))?"View Terminal Output":l==="web-fetch"?"View Web Page":"View Full Output";var l}));Ne(U,{get toolName(){return e(d)},icon:S,secondary:w,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ue(),g()},[St.searchUntruncated]:function(n,t){de(t,!1);const o=()=>he(_,"$ctx",i),[i,g]=Se(),_=vt();function c(a){return typeof a.search_term=="string"?a.search_term:void 0}function p(a){return typeof a.context_lines=="number"?a.context_lines:2}function A(a){if(!a)return;const U=a.match(/<!-- toolType: ([^>]+) -->/);return U?U[1]:void 0}function h(a){return a?["launch-process","kill-process","read-process","write-process","list-processes","wait-process"].includes(a):!1}Xs(),Re(n,{header:U=>{{const S=l=>{ve(l,{name:"search"})},w=l=>{var u=su(),f=y(u);re(f,{size:1,class:"c-search-untruncated__secondary",children:(v,k)=>{var b=j(),x=D(b),R=M=>{var I=J();H(($=>se(I,$)),[()=>h(A(o().toolUseState.result?.text))?"Searching terminal output...":"Searching full output..."]),s(M,I)},L=M=>{var I=j(),$=D(I),m=C=>{var N=tu(),O=F(y(N)),P=y(O),W=F(O,2),q=Y=>{var V=eu(),te=y(V);H((K=>se(te,`(${K??""} context lines)`)),[()=>p(o().toolUseInput)]),s(Y,V)};z(W,(Y=>{p(o().toolUseInput)!==2&&Y(q)})),H((Y=>se(P,Y)),[()=>c(o().toolUseInput)]),s(C,N)},E=C=>{var N=J();H((O=>se(N,O)),[()=>h(A(o().toolUseState.result?.text))?"Search terminal output":"Search full output"]),s(C,N)};z($,(C=>{c(o().toolUseInput)?C(m):C(E,!1)}),!0),s(M,I)};z(x,(M=>{o().toolUseState.phase<=ge.running?M(R):M(L,!1)})),s(v,b)},$$slots:{default:!0}}),s(l,u)};let d=ys((()=>{return h(l=A(o().toolUseState.result?.text))?"Search Terminal Output":l==="web-fetch"?"Search Web Page":"Search Full Output";var l}));Ne(U,{get toolName(){return e(d)},icon:S,secondary:w,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ue(),g()}};var ou=T('<button class="c-monaco-output-block__overlay svelte-1jc5ewx" aria-label="Focus editor"></button>'),ru=T('<div class="c-monaco-output-block__monaco-container svelte-1jc5ewx"><!> <!></div>'),au=T('<div class="c-monaco-output-block__empty-state svelte-1jc5ewx"><!></div>'),nu=T('<div class="c-monaco-output-block svelte-1jc5ewx"><div class="c-monaco-output-block__header svelte-1jc5ewx"><!> <div class="c-monaco-output-block__actions svelte-1jc5ewx"><!> <!> <!></div></div> <!></div>');function gr(n,t){de(t,!0);let o,i=B(t,"label",19,(()=>{})),g=B(t,"doScrollToBottom",3,!1),_=B(t,"monacoOptions",19,(()=>({lineNumbers:"off",wordWrap:"off",lineDecorationsWidth:0,folding:!1,showFoldingControls:"never",readOnly:!0,stickyScroll:{enabled:!1},overviewRulerLanes:0,scrollbar:{vertical:"auto",horizontal:"auto",alwaysConsumeMouseWheel:!1,verticalScrollbarSize:5}}))),c=B(t,"showCopyButton",3,!0),p=B(t,"showViewInFileButton",3,!0),A=le(void 0),h=le(void 0),a=le(!1);function U(E){E||(o&&clearTimeout(o),o=void 0,G(A,void 0))}async function S(){if(t.content){o&&clearTimeout(o);try{await navigator.clipboard.writeText(t.content),G(A,"Copied!"),o=setTimeout((()=>e(h)?.requestClose()),1500)}catch(E){console.error("Failed to copy:",E),G(A,"Copy failed"),o=setTimeout((()=>e(h)?.requestClose()),1500)}}}let w=le(void 0);Te((()=>{g()&&e(w)&&g()&&e(w)&&(e(w)?.layout(),e(w).revealLine(e(w).getModel().getLineCount()))})),Te((()=>{e(w)&&e(w)&&(e(w).onDidFocusEditorText((()=>{G(a,!0)})),e(w).onDidBlurEditorText((()=>{G(a,!1)})))}));var d=nu(),l=y(d),u=y(l),f=E=>{var C=j(),N=D(C);xe(N,(()=>t.labelSnippet)),s(E,C)},v=E=>{re(E,{size:1,weight:"medium",children:(C,N)=>{var O=J();H((()=>se(O,i()))),s(C,O)},$$slots:{default:!0}})};z(u,(E=>{t.labelSnippet?E(f):E(v,!1)}));var k=F(u,2),b=y(k),x=E=>{{let C=r((()=>e(A)||"Copy to clipboard")),N=r((()=>[Ht.Hover]));Ct(We(E,{onOpenChange:U,get content(){return e(C)},side:"bottom",get triggerOn(){return e(N)},children:(O,P)=>{{let W=r((()=>!t.content));Oe(O,{variant:"ghost-block",color:"neutral",size:1,onclick:S,get disabled(){return e(W)},children:(q,Y)=>{ve(q,{name:"copy"})},$$slots:{default:!0}})}},$$slots:{default:!0}}),(O=>G(h,O,!0)),(()=>e(h)))}};z(b,(E=>{c()&&E(x)}));var R=F(b,2),L=E=>{We(E,{content:"View full content in editor",side:"bottom",children:(C,N)=>{{let O=r((()=>!t.content));Oe(C,{variant:"ghost-block",color:"neutral",size:1,get onclick(){return t.onViewInFile},get disabled(){return e(O)},children:(P,W)=>{ve(P,{name:"external-link"})},$$slots:{default:!0}})}},$$slots:{default:!0}})};z(R,(E=>{p()&&E(L)}));var M=F(R,2);xe(M,(()=>t.actions??Me));var I=F(l,2),$=E=>{var C=ru(),N=y(C),O=W=>{var q=ou();q.__click=()=>e(w)?.focus(),s(W,q)};z(N,(W=>{e(a)||W(O)}));var P=F(N,2);Le(P,(()=>tl.Root),((W,q)=>{q(W,{children:(Y,V)=>{Ao(Y,{height:100,get options(){return _()},get text(){return t.content},get lang(){return t.language},get editorInstance(){return e(w)},set editorInstance(te){G(w,te,!0)}})},$$slots:{default:!0}})})),s(E,C)},m=E=>{var C=au(),N=y(C);re(N,{size:1,color:"secondary",children:(O,P)=>{var W=J("No content available.");s(O,W)},$$slots:{default:!0}}),s(E,C)};z(I,(E=>{t.content?E($):E(m,!1)})),s(n,d),ue()}ts(["click"]);var Xt=(n=>(n.SUCCESS="SUCCESS",n.SKIPPED="SKIPPED",n.FAILED="FAILED",n))(Xt||{}),lu=T("<div><!></div>");function ho(n,t){var o=lu(),i=y(o),g=c=>{vs(c,{size:1})},_=c=>{var p=j(),A=D(p),h=U=>{ve(U,{name:"circle-check"})},a=U=>{var S=j(),w=D(S),d=u=>{ve(u,{name:"circle-x"})},l=u=>{var f=j(),v=D(f),k=b=>{ve(b,{name:"ban"})};z(v,(b=>{t.commandResult==="skipped"&&b(k)}),!0),s(u,f)};z(w,(u=>{t.commandResult==="error"?u(d):u(l,!1)}),!0),s(U,S)};z(A,(U=>{t.commandResult==="success"?U(h):U(a,!1)}),!0),s(c,p)};z(i,(c=>{t.commandResult==="loading"?c(g):c(_,!1)})),H((()=>Qe(o,1,`c-setup-script-command-status c-setup-script-command-status--${t.commandResult??""}`,"svelte-n0cgm1"))),s(n,o)}var iu=T(" <!>",1),cu=T('<div class="c-setup-script-tool__save-button svelte-pndipf"><!></div>'),du=T('<div class="c-setup-script-tool__save-option-icon svelte-pndipf"><!></div>'),uu=T('<div class="c-setup-script-tool__save-option-container svelte-pndipf"><span> </span> <!></div>'),vu=T("<!> <!>",1),pu=T("<div><!></div>"),gu=T('<div class="c-setup-script-tool__row svelte-pndipf"><div><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div></div>'),hu=T("View <!>",1),mu=T('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <!></div>'),fu=T("View <!>",1),_u=T('<div class="c-setup-script-tool__row svelte-pndipf"><div class="c-setup-script-tool__row__status svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__title svelte-pndipf"><!></div> <div class="c-setup-script-tool__row__actions"><!></div></div>'),ku=T('<div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div>'),$u=T('<div class="c-setup-script-tool svelte-pndipf"><div class="c-setup-script-tool__id svelte-pndipf"></div> <div class="c-setup-script-tool__script svelte-pndipf"><!> <div class="c-setup-script-tool__script__actions svelte-pndipf"><!></div></div> <div class="c-setup-script-tool__section svelte-pndipf"><!> <!></div> <!></div>');function qe(n,t){let o=B(t,"color",3,"neutral"),i=B(t,"size",3,0);var g=j(),_=D(g);Le(_,(()=>Ks.Root),((c,p)=>{p(c,{get color(){return o()},get size(){return i()},children:(A,h)=>{var a=j(),U=D(a);xe(U,(()=>t.children)),s(A,a)},$$slots:{default:!0}})})),s(n,g)}var bu=T('<strong> </strong> <span class="c-collapsible-content__toggle-icon svelte-i6ryvq"> </span>',1),yu=T("<div><div><!></div></div>"),wu=T('<div class="c-collapsible-content"><button class="c-collapsible-content__toggle svelte-i6ryvq"><!></button> <!></div>');ts(["click"]);var Su=T("<strong> </strong>"),Tu=T('<div class="c-tool-result-fields__status-row svelte-1ckik1b"><!> <!></div>'),Iu=T("<strong> </strong>"),xu=T("<!> <!>",1),Uu=T("<strong> </strong> ",1),Eu=T('<div class="c-tool-result-fields__field svelte-1ckik1b"><!></div>'),Cu=T('<div class="c-tool-result-fields svelte-1ckik1b"></div>');function $s(n,t){function o(_,c){return c.split(".").reduce(((p,A)=>p?.[A]),_)}de(t,!0);let i=r((()=>t.fields.filter((_=>{const c=o(t.data,_.key);return!(!c&&c!==0&&c!==!1)&&!(_.condition&&!_.condition(t.data))}))));var g=Cu();Ce(g,21,(()=>e(i)),(_=>_.key),((_,c)=>{const p=r((()=>(function(S){const w=o(t.data,S.key);return S.transform?S.transform(w):String(w||"")})(e(c))));var A=j(),h=D(A),a=S=>{{let w=r((()=>e(c).maxHeight||"300px"));(function(d,l){de(l,!0);let u=B(l,"expanded",15,!1),f=B(l,"maxHeight",3,"300px"),v=B(l,"showBorder",3,!0);const k=`collapsible-${Math.random().toString(36).substring(2,11)}`;var b=wu(),x=y(b);x.__click=function(){u(!u())};var R=y(x);re(R,{size:1,color:"neutral",children:(I,$)=>{var m=bu(),E=D(m),C=y(E),N=F(E,2),O=y(N);H((()=>{se(C,`${l.label??""}:`),se(O,u()?"":"")})),s(I,m)},$$slots:{default:!0}});var L=F(x,2),M=I=>{var $=yu(),m=y($);let E;var C=y(m);xe(C,(()=>l.children??Me)),H((()=>{Qe($,1,ps(["c-collapsible-content__display",l.contentClass]),"svelte-i6ryvq"),gt($,"id",k),Is($,`max-height: ${f()??""};`),E=Qe(m,1,"c-collapsible-content__inner svelte-i6ryvq",null,E,{bordered:v()})})),s(I,$)};z(L,(I=>{u()&&I(M)})),H((()=>{gt(x,"aria-expanded",u()),gt(x,"aria-controls",k)})),s(d,b),ue()})(S,{get label(){return e(c).label},get maxHeight(){return e(w)},children:(d,l)=>{var u=j(),f=D(u),v=b=>{{let x=r((()=>e(c).color||"neutral"));re(b,{size:1,type:"monospace",get color(){return e(x)},children:(R,L)=>{var M=J();H((()=>se(M,e(p)))),s(R,M)},$$slots:{default:!0}})}},k=b=>{{let x=r((()=>e(c).color||"neutral"));re(b,{size:1,get color(){return e(x)},children:(R,L)=>{var M=J();H((()=>se(M,e(p)))),s(R,M)},$$slots:{default:!0}})}};z(f,(b=>{e(c).type==="monospace"?b(v):b(k,!1)})),s(d,u)},$$slots:{default:!0}})}},U=S=>{var w=Eu(),d=y(w),l=f=>{var v=Tu(),k=y(v);re(k,{size:1,color:"neutral",children:(x,R)=>{var L=Su(),M=y(L);H((()=>se(M,`${e(c).label??""}:`))),s(x,L)},$$slots:{default:!0}});var b=F(k,2);{let x=r((()=>e(c).statusColor||"neutral"));qe(b,{get color(){return e(x)},children:(R,L)=>{var M=J();H((()=>se(M,e(p)))),s(R,M)},$$slots:{default:!0}})}s(f,v)},u=f=>{var v=j(),k=D(v),b=R=>{var L=xu(),M=D(L);re(M,{size:1,color:"neutral",children:($,m)=>{var E=Iu(),C=y(E);H((()=>se(C,`${e(c).label??""}:`))),s($,E)},$$slots:{default:!0}});var I=F(M,2);{let $=r((()=>e(c).color||"neutral"));re(I,{size:1,type:"monospace",get color(){return e($)},children:(m,E)=>{var C=J();H((()=>se(C,e(p)))),s(m,C)},$$slots:{default:!0}})}s(R,L)},x=R=>{{let L=r((()=>e(c).color||"neutral"));re(R,{size:1,get color(){return e(L)},children:(M,I)=>{var $=Uu(),m=D($),E=y(m),C=F(m);H((()=>{se(E,`${e(c).label??""}:`),se(C,` ${e(p)??""}`)})),s(M,$)},$$slots:{default:!0}})}};z(k,(R=>{e(c).type==="monospace"?R(b):R(x,!1)}),!0),s(f,v)};z(d,(f=>{e(c).type==="status"?f(l):f(u,!1)})),s(S,w)};z(h,(S=>{e(c).collapsible?S(a):S(U,!1)})),s(_,A)})),s(n,g),ue()}var Au=T('<div class="c-start-worker-tool__counts svelte-1tg2ggt"><!> <!></div>'),Lu=T('<div class="c-start-worker-tool__running"><!></div>'),zu=T(" <!>",1),Nu=T("<strong>Agent ID:</strong> ",1),Ru=T("<strong>Status:</strong> ",1),Mu=T('<div class="c-start-worker-tool__success-details"><!> <!></div>'),Du=T("<strong>Error:</strong> ",1),Ou=T('<div class="c-start-worker-tool__error-details"><!></div>'),Fu=T('<div class="c-start-worker-tool__worker-header svelte-1tg2ggt"><div class="c-start-worker-tool__worker-title svelte-1tg2ggt"><!> <!></div></div> <div class="c-start-worker-tool__worker-details svelte-1tg2ggt"><!> <!></div>',1),Pu=T('<div class="c-start-worker-tool__results svelte-1tg2ggt"></div>'),qu=T('<div class="c-start-worker-tool__no-results"><!></div>'),Wu=T('<div class="c-start-worker-tool__details svelte-1tg2ggt"><!></div>'),Bu=T('<div class="c-send-instruction-tool__counts svelte-cnqzvu"><!> <!></div>'),ju=T('<div class="c-send-instruction-tool__running"><!></div>'),Gu=T(" <!>",1),Vu=T("<strong>Agent ID:</strong> ",1),Hu=T('<div class="c-send-instruction-tool__success-details"><!> <!></div>'),Ku=T("<strong>Error:</strong> ",1),Ju=T("<strong>Target Agent ID:</strong> ",1),Yu=T('<div class="c-send-instruction-tool__error-details"><!> <!></div>'),Xu=T('<div class="c-send-instruction-tool__instruction-header svelte-cnqzvu"><div class="c-send-instruction-tool__instruction-title svelte-cnqzvu"><!> <!></div></div> <div class="c-send-instruction-tool__instruction-details svelte-cnqzvu"><!></div>',1),Qu=T('<div class="c-send-instruction-tool__results svelte-cnqzvu"></div>'),Zu=T('<div class="c-send-instruction-tool__no-results"><!></div>'),ev=T('<div class="c-send-instruction-tool__details svelte-cnqzvu"><!></div>'),tv=T('<div class="c-read-worker-state-tool__counts svelte-1a2g1md"><!> <!></div>'),sv=T('<div class="c-read-worker-state-tool__running"><!></div>'),ov=T("<strong>Status:</strong>"),rv=T('<div class="c-read-worker-state-tool__status-row svelte-1a2g1md"><!> <!></div>'),av=T('<div class="c-read-worker-state-tool__success-details"><!> <!> <!></div>'),nv=T("<strong>Error:</strong> ",1),lv=T('<div class="c-read-worker-state-tool__error-details"><!></div>'),iv=T('<div class="c-read-worker-state-tool__worker-header svelte-1a2g1md"><div class="c-read-worker-state-tool__worker-title svelte-1a2g1md"><!> <!></div></div> <div class="c-read-worker-state-tool__worker-details svelte-1a2g1md"><!></div>',1),cv=T('<div class="c-read-worker-state-tool__results svelte-1a2g1md"></div>'),dv=T('<div class="c-read-worker-state-tool__no-results"><!></div>'),uv=T('<div class="c-read-worker-state-tool__details svelte-1a2g1md"><!></div>'),vv=T('<div class="c-wait-worker-tool__counts svelte-116gs6l"><!> <!></div>'),pv=T('<div class="c-wait-worker-tool__running"><!></div>'),gv=T("<strong>Target Status:</strong>"),hv=T("<strong>Final Status:</strong>"),mv=T("<strong>Wait Time:</strong> ",1),fv=T('<div class="c-wait-worker-tool__success-details"><div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <div class="c-wait-worker-tool__status-row svelte-116gs6l"><!> <!></div> <!></div>'),_v=T("<strong>Error:</strong> ",1),kv=T("<strong>Agent ID:</strong> ",1),$v=T("<strong>Target Status:</strong> ",1),bv=T("<strong>Timeout:</strong> ",1),yv=T('<div class="c-wait-worker-tool__error-details"><!> <!> <!> <!></div>'),wv=T('<div class="c-wait-worker-tool__wait-header svelte-116gs6l"><div class="c-wait-worker-tool__wait-title svelte-116gs6l"><!> <!></div></div> <div class="c-wait-worker-tool__wait-details svelte-116gs6l"><!></div>',1),Sv=T('<div class="c-wait-worker-tool__results svelte-116gs6l"></div>'),Tv=T('<div class="c-wait-worker-tool__no-results"><!></div>'),Iv=T('<div class="c-wait-worker-tool__details svelte-116gs6l"><!></div>'),xv=T('<div class="c-stop-worker-tool__counts svelte-1s0pbm1"><!> <!></div>'),Uv=T('<div class="c-stop-worker-tool__running"><!></div>'),Ev=T("<strong>Agent ID:</strong> ",1),Cv=T('<div class="c-stop-worker-tool__success-details"><!> <!></div>'),Av=T("<strong>Error:</strong> ",1),Lv=T("<strong>Agent ID:</strong> ",1),zv=T('<div class="c-stop-worker-tool__error-details"><!> <!></div>'),Nv=T('<div class="c-stop-worker-tool__agent-header svelte-1s0pbm1"><div class="c-stop-worker-tool__agent-title svelte-1s0pbm1"><!> <!></div></div> <div class="c-stop-worker-tool__agent-details svelte-1s0pbm1"><!></div>',1),Rv=T('<div class="c-stop-worker-tool__results svelte-1s0pbm1"></div>'),Mv=T('<div class="c-stop-worker-tool__no-results"><!></div>'),Dv=T('<div class="c-stop-worker-tool__details svelte-1s0pbm1"><!></div>'),Ov=T('<div class="c-delete-worker-tool__counts svelte-1wenjkg"><!> <!></div>'),Fv=T('<div class="c-delete-worker-tool__running"><!></div>'),Pv=T("<strong>Agent ID:</strong> ",1),qv=T('<div class="c-delete-worker-tool__success-details"><!> <!></div>'),Wv=T("<strong>Error:</strong> ",1),Bv=T("<strong>Agent ID:</strong> ",1),jv=T('<div class="c-delete-worker-tool__error-details"><!> <!></div>'),Gv=T('<div class="c-delete-worker-tool__agent-header svelte-1wenjkg"><div class="c-delete-worker-tool__agent-title svelte-1wenjkg"><!> <!></div></div> <div class="c-delete-worker-tool__agent-details svelte-1wenjkg"><!></div>',1),Vv=T('<div class="c-delete-worker-tool__results svelte-1wenjkg"></div>'),Hv=T('<div class="c-delete-worker-tool__no-results"><!></div>'),Kv=T('<div class="c-delete-worker-tool__details svelte-1wenjkg"><!></div>'),Jv=T('<div class="c-read-edits-tool__counts svelte-spvkd4"><!> <!> <!></div>'),Yv=T('<div class="c-read-edits-tool__running"><!></div>'),Xv=T("<strong>Agent ID:</strong> ",1),Qv=T("<strong> </strong>"),Zv=T('<div class="c-read-edits-tool__file-edit svelte-spvkd4"><div class="c-read-edits-tool__file-header svelte-spvkd4"><!> <!></div> <!></div>'),ep=T('<div class="c-read-edits-tool__file-edits svelte-spvkd4"><!> <!></div>'),tp=T('<div class="c-read-edits-tool__success-details"><!> <!></div>'),sp=T("<strong>Error:</strong> ",1),op=T("<strong>Agent ID:</strong> ",1),rp=T('<div class="c-read-edits-tool__error-details"><!> <!></div>'),ap=T('<div class="c-read-edits-tool__agent-header svelte-spvkd4"><div class="c-read-edits-tool__agent-title svelte-spvkd4"><!> <!></div></div> <div class="c-read-edits-tool__agent-details svelte-spvkd4"><!></div>',1),np=T('<div class="c-read-edits-tool__results svelte-spvkd4"></div>'),lp=T('<div class="c-read-edits-tool__no-results"><!></div>'),ip=T('<div class="c-read-edits-tool__details svelte-spvkd4"><!></div>'),cp=T('<div class="c-apply-edits-tool__counts svelte-8hutmy"><!> <!> <!></div>');const hr={[Ke.editFile]:ma,[Ke.readFile]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=r((()=>Tt(o().file_path,"")));Re(n,{header:_=>{{const c=h=>{ve(h,{name:"file"})},p=h=>{Os(h,{get filepath(){return e(i)},showIcon:!0})};let A=r((()=>[e(i)]));Ne(_,{toolName:"Read",get formattedToolArgs(){return e(A)},icon:c,secondary:p,$$slots:{icon:!0,secondary:!0}})}},$$slots:{header:!0}}),ue()},[Ke.saveFile]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=r((()=>Tt(o().path,Tt(o().file_path,"")))),g=r((()=>t.toolUseState.phase===ge.cancelled?"File creation cancelled":t.toolUseState.phase===ge.cancelling?"Cancelling creation of file":t.toolUseState.phase===ge.completed?"Created file":t.toolUseState.phase===ge.error?"File creation failed.":"Creating file..."));{const _=A=>{Ne(A,{get toolName(){return e(g)},icon:U=>{ve(U,{name:"file-plus"})},secondary:U=>{Os(U,{get filepath(){return e(i)},showIcon:!0})},$$slots:{icon:!0,secondary:!0}})},c=A=>{var h=cc(),a=y(h);{let U=r((()=>Tt(o().file_content,""))),S=r((()=>Tt(o().path,"")));Ao(a,{get text(){return e(U)},get pathName(){return e(S)}})}s(A,h)};let p=r((()=>t.toolUseState.phase===ge.completed));Re(n,{get showToolOutput(){return e(p)},header:_,details:c,$$slots:{header:!0,details:!0}})}ue()},[Ke.launchProcess]:ss,[Ke.killProcess]:ss,[Ke.readProcess]:ss,[Ke.writeProcess]:ss,[Ke.listProcesses]:ss,[Ke.waitProcess]:ss,[Ke.openBrowser]:function(n,t){let o=B(t,"toolUseInput",19,(()=>({})));_a(n,{toolName:"Open in Browser",get toolUseInput(){return o()},get toolUseState(){return t.toolUseState}})},[Ke.remember]:function(n,t){de(t,!0);const[o,i]=Se();let g=B(t,"toolUseInput",19,(()=>({})));const _=Et("enableMemoryRetrieval");var c=j(),p=D(c),A=a=>{Re(a,{header:w=>{{const d=u=>{ve(u,{name:"archive"})};let l=r((()=>[Tt(g().memory,"")]));Ne(w,{toolName:"Remember",get formattedToolArgs(){return e(l)},icon:d,$$slots:{icon:!0}})}},details:w=>{{let d=r((()=>({memoriesRequestId:"",memory:Tt(g().memory,""),isFlushed:!0})));(function(l,u){de(u,!0);let f=r((()=>u.memoryData?(function(E){const C=E.match(/^\[SCOPE:\s*([^\]]+)\]/);if(C)return C[1].trim()})(u.memoryData.memory):void 0)),v=r((()=>u.memoryData?u.memoryData.memory.replace(/^\[SCOPE:\s*[^\]]+\]\s*/,"").trim():void 0));var k=yc(),b=y(k),x=E=>{var C=bc(),N=D(C),O=y(N);re(O,{size:1,weight:"light",color:"secondary",children:(q,Y)=>{var V=J("Scope");s(q,V)},$$slots:{default:!0}});var P=F(N,2),W=y(P);re(W,{size:1,weight:"light",children:(q,Y)=>{var V=J();H((()=>se(V,e(f)))),s(q,V)},$$slots:{default:!0}}),s(E,C)};z(b,(E=>{e(f)&&E(x)}));var R=F(b,2),L=y(R);re(L,{size:1,weight:"light",color:"secondary",children:(E,C)=>{var N=J("Content");s(E,N)},$$slots:{default:!0}});var M=F(R,2),I=y(M);re(I,{size:1,weight:"light",children:(E,C)=>{var N=J();H((()=>se(N,e(v)))),s(E,N)},$$slots:{default:!0}});var $=F(M,2),m=E=>{$c(E,{get memoryData(){return u.memoryData},get requestId(){return u.requestId}})};z($,(E=>{u.requestId&&E(m)})),s(l,k),ue()})(w,{get memoryData(){return e(d)},get requestId(){return t.toolUseState.requestId}})}},$$slots:{header:!0,details:!0}})},h=a=>{Re(a,{header:S=>{{const w=l=>{ve(l,{name:"archive"})};let d=r((()=>[Tt(g().memory,"")]));Ne(S,{toolName:"Remember",get formattedToolArgs(){return e(d)},icon:w,$$slots:{icon:!0}})}},$$slots:{header:!0}})};z(p,(a=>{he(_,"$enableMemoryRetrieval",o)?a(A):a(h,!1)})),s(n,c),ue(),i()},[Ke.diagnostics]:function(n){Re(n,{header:o=>{Ne(o,{toolName:"Diagnostics",icon:g=>{ve(g,{name:"circle-alert",size:2})},$$slots:{icon:!0}})},$$slots:{header:!0}})},[Ke.setupScript]:function(n,t){de(t,!0);let o=r((()=>{try{const V=t.toolUse?.input_json||"{}";return typeof V=="string"?JSON.parse(V):{}}catch(V){return console.error("Failed to parse tool input JSON:",V),{}}})),i=r((()=>{try{const V=t.toolUseState.result?.text||"{}";return typeof V=="string"?JSON.parse(V):V}catch(V){return console.error("Failed to parse tool result:",V),null}})),g=r((()=>e(o).script_content||"")),_=r((()=>e(i)?.script_result||null)),c=r((()=>e(i)?.test_results||[])),p=r((()=>t.toolUseState.phase===ge.running)),A=r((()=>{try{return e(p)&&e(o).test_commands&&Array.isArray(e(o).test_commands)?e(o).test_commands:[]}catch(V){return console.error("Failed to parse test commands:",V),[]}})),h=le(Ve([])),a=le(void 0);const U=$t(),S=Ze(as.key),w="setup.sh",d=st();function l(V){d(Ts({repoRoot:"",pathName:V.path,allowOutOfWorkspace:!0,openLocalUri:V.location==="home"}))}async function u(V){V.stopPropagation();const te=e(h).length>0?e(h)[0]:null;try{te?l(te):U.openScratchFile(e(g),"shellscript")}catch(K){console.error("Error opening script in editor:",K)}}function f(V,te="plaintext"){U.openScratchFile(V,te)}async function v(){if(S)try{const V=(await S.listSetupScripts()).filter((te=>te.content.trim()===e(g).trim()));G(h,V,!0)}catch(V){console.error("Error checking existing scripts:",V)}}let k=r((()=>{const V=e(h).some((te=>te.location==="git"));return[{id:"home",...e(h).some((te=>te.location==="home"))?{label:"Saved locally (in home directory)",lucideIcon:"check"}:{label:"Save locally (in home directory)",endIcon:void 0,lucidIcon:void 0}},{id:"git",...V?{label:"Saved in git repository",lucideIcon:"check"}:{label:"Save in git repository",endIcon:void 0,lucidIcon:void 0}}]}));Ps((async()=>{await v()}));const b={[Xt.SUCCESS]:"success",[Xt.FAILED]:"error",[Xt.SKIPPED]:"skipped"};let x=r((()=>e(p)?"Running script...":t.toolUseState.phase===ge.completed?"Script ran successfully":t.toolUseState.phase===ge.error?e(_)?.status===Xt.FAILED?"Script failed to run":e(c).some((V=>V.status===Xt.FAILED))?"Script ran with failed tests":e(c).some((V=>V.status===Xt.SKIPPED))?"Script ran but skipped tests":"Script failed":t.toolUseState.phase===ge.cancelled?"Script cancelled":t.toolUseState.phase===ge.runnable?"Waiting for user approval to run":""));var R={toolUseInput:{}},L=$u(),M=y(L),I=F(M,2),$=y(I);re($,{size:2,weight:"medium",children:(V,te)=>{var K=J("Setup script created");s(V,K)},$$slots:{default:!0}});var m=F($,2),E=y(m);re(E,{size:1,children:(V,te)=>{var K=iu(),X=D(K);qs(F(X),{}),H((()=>se(X,`${e(x)??""} `))),s(V,K)},$$slots:{default:!0}});var C=F(I,2),N=y(C),O=V=>{gr(V,{label:"Generated script",get content(){return e(g)},language:"bash",onViewInFile:u,actions:K=>{var X=pu(),ee=y(X);Le(ee,(()=>Ge.Root),((Q,Z)=>{Ct(Z(Q,{children:(oe,ae)=>{var ie=vu(),ne=D(ie);Le(ne,(()=>Ge.Trigger),((pe,fe)=>{fe(pe,{children:(_e,me)=>{We(_e,{content:"Save script",side:"bottom",children:(ke,ye)=>{var we=cu(),$e=y(we);Ut($e,{variant:"ghost-block",color:"neutral",size:1,onclick:()=>e(a)?.requestOpen(),iconLeft:Ue=>{ve(Ue,{name:"save"})},children:(Ue,Je)=>{var be=J("Save");s(Ue,be)},$$slots:{iconLeft:!0,default:!0}}),s(ke,we)},$$slots:{default:!0}})},$$slots:{default:!0}})}));var ce=F(ne,2);Le(ce,(()=>Ge.Content),((pe,fe)=>{fe(pe,{side:"bottom",align:"start",children:(_e,me)=>{var ke=j(),ye=D(ke);Ce(ye,17,(()=>e(k)),(we=>we.id),((we,$e)=>{var Ie=j(),Ue=D(Ie);Le(Ue,(()=>Ge.Item),((Je,be)=>{be(Je,{onSelect:Ee=>{(async function(He,Be){He.stopPropagation();const Ae=e(h).find((ze=>ze.location===Be));if(Ae&&l(Ae),S){try{const ze=Be,Fe=await S.saveSetupScript(w,e(g),ze);if(Fe.success&&Fe.path){const lt={name:w,path:Fe.path,content:e(g),location:ze};e(h).push(lt),l(lt)}else console.error("Failed to save script:",Fe.error)}catch(ze){console.error("Error saving script:",ze)}await v()}else console.error("RemoteAgentsModel not available")})(Ee,e($e).id)},children:(Ee,He)=>{var Be=uu(),Ae=y(Be),ze=y(Ae),Fe=F(Ae,2),lt=dt=>{var Pe=du(),Ye=y(Pe);ve(Ye,{get name(){return e($e).lucideIcon}}),s(dt,Pe)};z(Fe,(dt=>{e($e).lucideIcon&&dt(lt)})),H((()=>se(ze,e($e).label))),s(Ee,Be)},$$slots:{default:!0}})})),s(we,Ie)})),s(_e,ke)},$$slots:{default:!0}})})),s(oe,ie)},$$slots:{default:!0}}),(oe=>G(a,oe,!0)),(()=>e(a)))})),s(K,X)},$$slots:{actions:!0}})};z(N,(V=>{e(g)&&V(O)}));var P=F(N,2),W=V=>{var te=j(),K=D(te),X=ee=>{gr(ee,{get content(){return e(_).output},language:"bash",doScrollToBottom:!0,onViewInFile:()=>f(e(_).output||"No output available","bash"),labelSnippet:Z=>{var oe=gu(),ae=y(oe),ie=y(ae);{let pe=r((()=>e(p)?"loading":e(_).status?b[e(_).status]:"none"));ho(ie,{get commandResult(){return e(pe)}})}var ne=F(ae,2),ce=y(ne);re(ce,{size:1,weight:"medium",children:(pe,fe)=>{var _e=j(),me=D(_e),ke=we=>{var $e=J("Running script...");s(we,$e)},ye=we=>{var $e=j(),Ie=D($e),Ue=be=>{var Ee=J("Script ran successfully");s(be,Ee)},Je=be=>{var Ee=j(),He=D(Ee),Be=Ae=>{var ze=J("Script failed to run");s(Ae,ze)};z(He,(Ae=>{e(_).status===Xt.FAILED&&Ae(Be)}),!0),s(be,Ee)};z(Ie,(be=>{e(_).status===Xt.SUCCESS?be(Ue):be(Je,!1)}),!0),s(we,$e)};z(me,(we=>{e(p)?we(ke):we(ye,!1)})),s(pe,_e)},$$slots:{default:!0}}),s(Z,oe)},$$slots:{labelSnippet:!0}})};z(K,(ee=>{e(_)?.output&&ee(X)})),s(V,te)};z(P,(V=>{(e(_)||e(p))&&V(W)}));var q=F(C,2),Y=V=>{var te=ku(),K=y(te);re(K,{size:1,weight:"medium",class:"c-setup-script-tool__section-header",children:(Z,oe)=>{var ae=J("Test Results:");s(Z,ae)},$$slots:{default:!0}});var X=F(K,2),ee=Z=>{var oe=j(),ae=D(oe);Ce(ae,17,(()=>e(A)),_t,((ie,ne)=>{var ce=mu(),pe=y(ce);ho(y(pe),{commandResult:"loading"});var fe=F(pe,2),_e=y(fe);We(_e,{get content(){return e(ne)},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(ke,ye)=>{re(ke,{size:1,weight:"medium",children:(we,$e)=>{var Ie=J();H((()=>se(Ie,e(ne)))),s(we,Ie)},$$slots:{default:!0}})},$$slots:{default:!0}});var me=F(fe,2);We(me,{content:"View full test result in editor",side:"bottom",children:(ke,ye)=>{Ut(ke,{variant:"ghost-block",color:"neutral",size:1,onclick:()=>f(e(ne)),children:(we,$e)=>{var Ie=hu(),Ue=F(D(Ie));ve(Ue,{name:"external-link"}),s(we,Ie)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(ie,ce)})),s(Z,oe)},Q=Z=>{var oe=j(),ae=D(oe);Ce(ae,17,(()=>e(c)),_t,((ie,ne)=>{var ce=_u(),pe=y(ce),fe=y(pe);{let we=r((()=>e(ne).status?b[e(ne).status]:"none"));ho(fe,{get commandResult(){return e(we)}})}var _e=F(pe,2),me=y(_e);We(me,{get content(){return e(ne).command},side:"bottom",class:"c-setup-script-tool__row__title__container",children:(we,$e)=>{re(we,{size:1,type:"monospace",children:(Ie,Ue)=>{var Je=J();H((()=>se(Je,e(ne).command))),s(Ie,Je)},$$slots:{default:!0}})},$$slots:{default:!0}});var ke=F(_e,2),ye=y(ke);We(ye,{content:"View full test result in editor",side:"bottom",children:(we,$e)=>{Ut(we,{variant:"ghost-block",color:"neutral",size:1,onclick:()=>f(e(ne).output||"No output available"),children:(Ie,Ue)=>{var Je=fu(),be=F(D(Je));ve(be,{name:"external-link"}),s(Ie,Je)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(ie,ce)})),s(Z,oe)};z(X,(Z=>{e(p)&&e(A).length>0?Z(ee):Z(Q,!1)})),s(V,te)};return z(q,(V=>{(e(c).length>0||e(p)&&e(A).length>0)&&V(Y)})),H((()=>gt(M,"data-tool-id",t.toolUse.tool_use_id))),s(n,L),ue(R)},[Ke.readTerminal]:ss,[Ke.gitCommitRetrieval]:function(n,t){let o=B(t,"toolUseInput",19,(()=>({})));So(n,{retrievalText:"Commit History",get toolUseInput(){return o()},retrieval:g=>{re(g,{size:1,color:"neutral",children:(_,c)=>{var p=Cc(),A=D(p);ve(A,{name:"git-commit-horizontal"}),s(_,p)},$$slots:{default:!0}})},$$slots:{retrieval:!0}})},[Ke.memoryRetrieval]:function(n,t){let o=B(t,"toolUseInput",19,(()=>({})));So(n,{retrievalText:"Memories",get toolUseInput(){return o()}})},[Ke.startWorkerAgent]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().workers)?o().workers:[])),_=r((()=>(()=>{const a=[];return e(g).length>0&&a.push(Dt(e(g).length,"worker")),a})())),c=r((()=>(()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),U=Array.isArray(a.startedWorkers)?a.startedWorkers:[],S=Array.isArray(a.failedWorkers)?a.failedWorkers:[];return[...U,...S]}catch(a){console.error("Failed to parse start worker agent tool response:",a)}return[]})())),p=r((()=>e(c).filter((a=>a.success)).length)),A=r((()=>e(c).filter((a=>!a.success)).length)),h=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:w=>{Ne(w,{toolName:"Start Worker Agents",get formattedToolArgs(){return e(_)},icon:u=>{ve(u,{name:"users-round"})},secondary:u=>{var f=j(),v=D(f),k=b=>{var x=Au(),R=y(x),L=$=>{qe($,{color:"success",children:(m,E)=>{var C=J();H((()=>se(C,`${e(p)??""} started`))),s(m,C)},$$slots:{default:!0}})};z(R,($=>{e(p)>0&&$(L)}));var M=F(R,2),I=$=>{qe($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`${e(A)??""} failed`))),s(m,C)},$$slots:{default:!0}})};z(M,($=>{e(A)>0&&$(I)})),s(b,x)};z(v,(b=>{e(h)&&e(i)&&b(k)})),s(u,f)},$$slots:{icon:!0,secondary:!0}})},details:w=>{var d=Wu(),l=y(d),u=v=>{var k=Lu(),b=y(k);re(b,{size:1,color:"neutral",children:(x,R)=>{var L=J("Starting worker agents...");s(x,L)},$$slots:{default:!0}}),s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=Pu();Ce(M,21,(()=>e(c)),(I=>I.index),((I,$)=>{const m=r((()=>e(g)[e($).index]||{}));Wt(I,{class:"c-start-worker-tool__worker-card",children:(E,C)=>{var N=Fu(),O=D(N),P=y(O),W=y(P);re(W,{size:1,weight:"medium",children:(X,ee)=>{var Q=zu(),Z=D(Q),oe=F(Z),ae=ie=>{var ne=J();H((()=>se(ne,`- ${e(m).summary??""}`))),s(ie,ne)};z(oe,(ie=>{e(m).summary&&ie(ae)})),H((()=>se(Z,`Worker ${e($).index+1} `))),s(X,Q)},$$slots:{default:!0}});var q=F(W,2);{let X=r((()=>e($).success?"success":"error"));qe(q,{get color(){return e(X)},children:(ee,Q)=>{var Z=J();H((()=>se(Z,e($).success?"Started":"Failed"))),s(ee,Z)},$$slots:{default:!0}})}var Y=F(O,2),V=y(Y),te=X=>{var ee=Mu(),Q=y(ee);re(Q,{size:1,color:"neutral",children:(ae,ie)=>{var ne=Nu(),ce=F(D(ne));H((()=>se(ce,` ${e($).workerAgentId??""}`))),s(ae,ne)},$$slots:{default:!0}});var Z=F(Q,2),oe=ae=>{re(ae,{size:1,color:"neutral",children:(ie,ne)=>{var ce=Ru(),pe=F(D(ce));H((()=>se(pe,` ${e($).status??""}`))),s(ie,ce)},$$slots:{default:!0}})};z(Z,(ae=>{e($).status&&ae(oe)})),s(X,ee)},K=X=>{var ee=Ou(),Q=y(ee);re(Q,{size:1,color:"error",children:(Z,oe)=>{var ae=Du(),ie=F(D(ae));H((()=>se(ie,` ${(e($).error||"Unknown error")??""}`))),s(Z,ae)},$$slots:{default:!0}}),s(X,ee)};z(V,(X=>{e($).success?X(te):X(K,!1)})),$s(F(V,2),{get data(){return e(m)},fields:[{key:"initial_prompt",label:"Initial Prompt",type:"monospace",collapsible:!0}]}),s(E,N)},$$slots:{default:!0}})})),s(L,M)},R=L=>{var M=j(),I=D(M),$=m=>{var E=qu(),C=y(E);re(C,{size:1,color:"neutral",children:(N,O)=>{var P=J("No worker agents were started.");s(N,P)},$$slots:{default:!0}}),s(m,E)};z(I,(m=>{t.toolUseState.phase!==ge.completed||e(h)||m($)}),!0),s(L,M)};z(b,(L=>{t.toolUseState.phase===ge.completed&&e(h)?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{t.toolUseState.phase===ge.running?v(u):v(f,!1)})),s(w,d)},error:w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.sendInstructionToWorkerAgent]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().instruction_operations)?o().instruction_operations:[])),_=r((()=>(()=>{const a=[];return e(g).length>0&&a.push(Dt(e(g).length,"instruction")),a})())),c=r((()=>(()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),U=Array.isArray(a.instructionResults)?a.instructionResults:[],S=Array.isArray(a.failedInstructions)?a.failedInstructions:[];return[...U,...S]}catch(a){console.error("Failed to parse send instruction tool response:",a)}return[]})())),p=r((()=>e(c).filter((a=>a.success)).length)),A=r((()=>e(c).filter((a=>!a.success)).length)),h=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:w=>{Ne(w,{toolName:"Send Instructions",get formattedToolArgs(){return e(_)},icon:u=>{ve(u,{name:"message-square"})},secondary:u=>{var f=j(),v=D(f),k=b=>{var x=Bu(),R=y(x),L=$=>{qe($,{color:"success",children:(m,E)=>{var C=J();H((()=>se(C,`${e(p)??""} sent`))),s(m,C)},$$slots:{default:!0}})};z(R,($=>{e(p)>0&&$(L)}));var M=F(R,2),I=$=>{qe($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`${e(A)??""} failed`))),s(m,C)},$$slots:{default:!0}})};z(M,($=>{e(A)>0&&$(I)})),s(b,x)};z(v,(b=>{e(h)&&e(i)&&b(k)})),s(u,f)},$$slots:{icon:!0,secondary:!0}})},details:w=>{var d=ev(),l=y(d),u=v=>{var k=ju(),b=y(k);re(b,{size:1,color:"neutral",children:(x,R)=>{var L=J("Sending instructions to worker agents...");s(x,L)},$$slots:{default:!0}}),s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=Qu();Ce(M,21,(()=>e(c)),(I=>I.index),((I,$)=>{const m=r((()=>e(g)[e($).index]||{}));Wt(I,{class:"c-send-instruction-tool__instruction-card",children:(E,C)=>{var N=Xu(),O=D(N),P=y(O),W=y(P);re(W,{size:1,weight:"medium",children:(X,ee)=>{var Q=Gu(),Z=D(Q),oe=F(Z),ae=ie=>{var ne=J();H((()=>se(ne,`- ${e(m).summary??""}`))),s(ie,ne)};z(oe,(ie=>{e(m).summary&&ie(ae)})),H((()=>se(Z,`Instruction ${e($).index+1} `))),s(X,Q)},$$slots:{default:!0}});var q=F(W,2);{let X=r((()=>e($).success?"success":"error"));qe(q,{get color(){return e(X)},children:(ee,Q)=>{var Z=J();H((()=>se(Z,e($).success?"Sent":"Failed"))),s(ee,Z)},$$slots:{default:!0}})}var Y=F(O,2),V=y(Y),te=X=>{var ee=Hu(),Q=y(ee);re(Q,{size:1,color:"neutral",children:(Z,oe)=>{var ae=Vu(),ie=F(D(ae));H((()=>se(ie,` ${e($).agentId??""}`))),s(Z,ae)},$$slots:{default:!0}}),$s(F(Q,2),{get data(){return e($)},fields:[{key:"instructionSent",label:"Instruction",type:"monospace",collapsible:!0}]}),s(X,ee)},K=X=>{var ee=Yu(),Q=y(ee);re(Q,{size:1,color:"error",children:(ae,ie)=>{var ne=Ku(),ce=F(D(ne));H((()=>se(ce,` ${(e($).error||"Unknown error")??""}`))),s(ae,ne)},$$slots:{default:!0}});var Z=F(Q,2),oe=ae=>{re(ae,{size:1,color:"neutral",children:(ie,ne)=>{var ce=Ju(),pe=F(D(ce));H((()=>se(pe,` ${e(m).worker_agent_id??""}`))),s(ie,ce)},$$slots:{default:!0}})};z(Z,(ae=>{e(m).worker_agent_id&&ae(oe)})),s(X,ee)};z(V,(X=>{e($).success?X(te):X(K,!1)})),s(E,N)},$$slots:{default:!0}})})),s(L,M)},R=L=>{var M=j(),I=D(M),$=m=>{var E=Zu(),C=y(E);re(C,{size:1,color:"neutral",children:(N,O)=>{var P=J("No instructions were sent.");s(N,P)},$$slots:{default:!0}}),s(m,E)};z(I,(m=>{t.toolUseState.phase!==ge.completed||e(h)||m($)}),!0),s(L,M)};z(b,(L=>{t.toolUseState.phase===ge.completed&&e(h)?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{t.toolUseState.phase===ge.running?v(u):v(f,!1)})),s(w,d)},error:w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.readWorkerState]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[])),_=r((()=>e(g).length>0?[Dt(e(g).length,"agent")]:["all agents"])),c=r((()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),U=Array.isArray(a.workerStates)?a.workerStates:[],S=Array.isArray(a.failedReads)?a.failedReads:[];return[...U,...S]}catch(a){console.error("Failed to parse read worker state tool response:",a)}return[]})),p=r((()=>e(c).filter((a=>a.success)).length)),A=r((()=>e(c).filter((a=>!a.success)).length)),h=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:w=>{Ne(w,{toolName:"Read Worker States",get formattedToolArgs(){return e(_)},icon:u=>{ve(u,{name:"info"})},secondary:u=>{var f=j(),v=D(f),k=b=>{var x=tv(),R=y(x),L=$=>{qe($,{color:"success",children:(m,E)=>{var C=J();H((()=>se(C,`${e(p)??""} read`))),s(m,C)},$$slots:{default:!0}})};z(R,($=>{e(p)>0&&$(L)}));var M=F(R,2),I=$=>{qe($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`${e(A)??""} failed`))),s(m,C)},$$slots:{default:!0}})};z(M,($=>{e(A)>0&&$(I)})),s(b,x)};z(v,(b=>{e(h)&&e(i)&&b(k)})),s(u,f)},$$slots:{icon:!0,secondary:!0}})},details:w=>{var d=uv(),l=y(d),u=v=>{var k=sv(),b=y(k);re(b,{size:1,color:"neutral",children:(x,R)=>{var L=J("Reading worker agent states...");s(x,L)},$$slots:{default:!0}}),s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=cv();Ce(M,21,(()=>e(c)),_t,((I,$,m)=>{Wt(I,{class:"c-read-worker-state-tool__worker-card",children:(E,C)=>{var N=iv(),O=D(N),P=y(O),W=y(P);re(W,{size:1,weight:"medium",children:(X,ee)=>{var Q=J();H((()=>se(Q,`Agent ${(e($).agentId||`${m+1}`)??""}`))),s(X,Q)},$$slots:{default:!0}});var q=F(W,2);{let X=r((()=>e($).success?"success":"error"));qe(q,{get color(){return e(X)},children:(ee,Q)=>{var Z=J();H((()=>se(Z,e($).success?"Active":"Error"))),s(ee,Z)},$$slots:{default:!0}})}var Y=F(O,2),V=y(Y),te=X=>{var ee=av(),Q=y(ee),Z=ae=>{var ie=rv(),ne=y(ie);re(ne,{size:1,color:"neutral",children:(pe,fe)=>{var _e=ov();s(pe,_e)},$$slots:{default:!0}});var ce=F(ne,2);{let pe=r((()=>(function(fe){switch(fe?.toLowerCase()){case"running":case"active":return"success";case"idle":case"waiting":return"info";case"stopped":case"paused":return"warning";case"error":case"failed":return"error";default:return"neutral"}})(e($).status)));qe(ce,{get color(){return e(pe)},children:(fe,_e)=>{var me=J();H((()=>se(me,e($).status))),s(fe,me)},$$slots:{default:!0}})}s(ae,ie)};z(Q,(ae=>{e($).status&&ae(Z)}));var oe=F(Q,2);$s(oe,{get data(){return e($)},fields:[{key:"lastExchangeSummary",label:"Latest Exchange",type:"monospace",collapsible:!0}]}),$s(F(oe,2),{get data(){return e($)},fields:[{key:"sessionSummary",label:"Session Summary",type:"monospace",collapsible:!0}]}),s(X,ee)},K=X=>{var ee=lv(),Q=y(ee);re(Q,{size:1,color:"error",children:(Z,oe)=>{var ae=nv(),ie=F(D(ae));H((()=>se(ie,` ${(e($).error||"Unknown error")??""}`))),s(Z,ae)},$$slots:{default:!0}}),s(X,ee)};z(V,(X=>{e($).success?X(te):X(K,!1)})),s(E,N)},$$slots:{default:!0}})})),s(L,M)},R=L=>{var M=j(),I=D(M),$=m=>{var E=dv(),C=y(E);re(C,{size:1,color:"neutral",children:(N,O)=>{var P=J("No worker agent states were read.");s(N,P)},$$slots:{default:!0}}),s(m,E)};z(I,(m=>{t.toolUseState.phase!==ge.completed||e(h)||m($)}),!0),s(L,M)};z(b,(L=>{t.toolUseState.phase===ge.completed&&e(h)?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{t.toolUseState.phase===ge.running?v(u):v(f,!1)})),s(w,d)},error:w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.waitForWorkerAgent]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().wait_operations)?o().wait_operations:[])),_=r((()=>(()=>{const S=[];return e(g).length>0&&S.push(Dt(e(g).length,"agent")),S})())),c=r((()=>(()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const S=JSON.parse(t.toolUseState.result.text),w=Array.isArray(S.waitResults)?S.waitResults:[],d=Array.isArray(S.failedWaits)?S.failedWaits:[];return[...w,...d]}catch(S){console.error("Failed to parse wait for worker agent tool response:",S)}return[]})())),p=r((()=>e(c).filter((S=>S.success)).length)),A=r((()=>e(c).filter((S=>!S.success)).length)),h=r((()=>e(c).length>0));function a(S){switch(S?.toLowerCase()){case"idle":return"success";case"failed":return"error";case"running":case"active":return"info";default:return"neutral"}}function U(S){if(S<60)return`${S}s`;if(S<3600){const w=Math.floor(S/60),d=S%60;return d>0?`${w}m ${d}s`:`${w}m`}{const w=Math.floor(S/3600),d=Math.floor(S%3600/60);return d>0?`${w}h ${d}m`:`${w}h`}}Re(n,{get collapsed(){return e(i)},set collapsed(l){G(i,l,!0)},header:l=>{Ne(l,{toolName:"Wait for Worker Agents",get formattedToolArgs(){return e(_)},icon:v=>{ve(v,{name:"clock"})},secondary:v=>{var k=j(),b=D(k),x=R=>{var L=vv(),M=y(L),I=E=>{qe(E,{color:"success",children:(C,N)=>{var O=J();H((()=>se(O,`${e(p)??""} completed`))),s(C,O)},$$slots:{default:!0}})};z(M,(E=>{e(p)>0&&E(I)}));var $=F(M,2),m=E=>{qe(E,{color:"error",children:(C,N)=>{var O=J();H((()=>se(O,`${e(A)??""} failed`))),s(C,O)},$$slots:{default:!0}})};z($,(E=>{e(A)>0&&E(m)})),s(R,L)};z(b,(R=>{e(h)&&e(i)&&R(x)})),s(v,k)},$$slots:{icon:!0,secondary:!0}})},details:l=>{var u=Iv(),f=y(u),v=b=>{var x=pv(),R=y(x);re(R,{size:1,color:"neutral",children:(L,M)=>{var I=J("Waiting for worker agents...");s(L,I)},$$slots:{default:!0}}),s(b,x)},k=b=>{var x=j(),R=D(x),L=I=>{var $=Sv();Ce($,21,(()=>e(c)),(m=>m.index),((m,E)=>{const C=r((()=>e(g)[e(E).index]||{}));Wt(m,{class:"c-wait-worker-tool__wait-card",children:(N,O)=>{var P=wv(),W=D(P),q=y(W),Y=y(q);re(Y,{size:1,weight:"medium",children:(Q,Z)=>{var oe=J();H((()=>se(oe,`Wait ${e(E).index+1} - Agent ${e(E).agentId??""}`))),s(Q,oe)},$$slots:{default:!0}});var V=F(Y,2);{let Q=r((()=>e(E).success?"success":"error"));qe(V,{get color(){return e(Q)},children:(Z,oe)=>{var ae=J();H((()=>se(ae,e(E).success?"Completed":"Failed"))),s(Z,ae)},$$slots:{default:!0}})}var te=F(W,2),K=y(te),X=Q=>{var Z=fv(),oe=y(Z),ae=y(oe);re(ae,{size:1,color:"neutral",children:(me,ke)=>{var ye=gv();s(me,ye)},$$slots:{default:!0}});var ie=F(ae,2);{let me=r((()=>a(e(E).targetStatus)));qe(ie,{get color(){return e(me)},children:(ke,ye)=>{var we=J();H((()=>se(we,e(E).targetStatus))),s(ke,we)},$$slots:{default:!0}})}var ne=F(oe,2),ce=y(ne);re(ce,{size:1,color:"neutral",children:(me,ke)=>{var ye=hv();s(me,ye)},$$slots:{default:!0}});var pe=F(ce,2);{let me=r((()=>a(e(E).status)));qe(pe,{get color(){return e(me)},children:(ke,ye)=>{var we=J();H((()=>se(we,e(E).status))),s(ke,we)},$$slots:{default:!0}})}var fe=F(ne,2),_e=me=>{re(me,{size:1,color:"neutral",children:(ke,ye)=>{var we=mv(),$e=F(D(we));H((Ie=>se($e,` ${Ie??""}`)),[()=>U(e(E).waitedSeconds)]),s(ke,we)},$$slots:{default:!0}})};z(fe,(me=>{e(E).waitedSeconds!==void 0&&me(_e)})),s(Q,Z)},ee=Q=>{var Z=yv(),oe=y(Z);re(oe,{size:1,color:"error",children:(_e,me)=>{var ke=_v(),ye=F(D(ke));H((()=>se(ye,` ${(e(E).error||"Unknown error")??""}`))),s(_e,ke)},$$slots:{default:!0}});var ae=F(oe,2),ie=_e=>{re(_e,{size:1,color:"neutral",children:(me,ke)=>{var ye=kv(),we=F(D(ye));H((()=>se(we,` ${e(C).worker_agent_id??""}`))),s(me,ye)},$$slots:{default:!0}})};z(ae,(_e=>{e(C).worker_agent_id&&_e(ie)}));var ne=F(ae,2),ce=_e=>{re(_e,{size:1,color:"neutral",children:(me,ke)=>{var ye=$v(),we=F(D(ye));H((()=>se(we,` ${e(C).target_status??""}`))),s(me,ye)},$$slots:{default:!0}})};z(ne,(_e=>{e(C).target_status&&_e(ce)}));var pe=F(ne,2),fe=_e=>{re(_e,{size:1,color:"neutral",children:(me,ke)=>{var ye=bv(),we=F(D(ye));H(($e=>se(we,` ${$e??""}`)),[()=>U(e(C).timeout_seconds)]),s(me,ye)},$$slots:{default:!0}})};z(pe,(_e=>{e(C).timeout_seconds&&_e(fe)})),s(Q,Z)};z(K,(Q=>{e(E).success?Q(X):Q(ee,!1)})),s(N,P)},$$slots:{default:!0}})})),s(I,$)},M=I=>{var $=j(),m=D($),E=C=>{var N=Tv(),O=y(N);re(O,{size:1,color:"neutral",children:(P,W)=>{var q=J("No wait operations were completed.");s(P,q)},$$slots:{default:!0}}),s(C,N)};z(m,(C=>{t.toolUseState.phase!==ge.completed||e(h)||C(E)}),!0),s(I,$)};z(R,(I=>{t.toolUseState.phase===ge.completed&&e(h)?I(L):I(M,!1)}),!0),s(b,x)};z(f,(b=>{t.toolUseState.phase===ge.running?b(v):b(k,!1)})),s(l,u)},error:l=>{var u=j(),f=D(u),v=k=>{It(k,tt((()=>t.toolUseState.result??{})))};z(f,(k=>{t.toolUseState.phase===ge.error&&k(v)})),s(l,u)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.stopWorkerAgent]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[])),_=r((()=>e(g).length>0?[Dt(e(g).length,"agent")]:["all agents"])),c=r((()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),U=Array.isArray(a.stopResults)?a.stopResults:[],S=Array.isArray(a.failedStops)?a.failedStops:[];return[...U,...S]}catch(a){console.error("Failed to parse stop worker agent tool response:",a)}return[]})),p=r((()=>e(c).filter((a=>a.success)).length)),A=r((()=>e(c).filter((a=>!a.success)).length)),h=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:w=>{Ne(w,{toolName:"Stop Worker Agents",get formattedToolArgs(){return e(_)},icon:u=>{ve(u,{name:"square"})},secondary:u=>{var f=j(),v=D(f),k=b=>{var x=xv(),R=y(x),L=$=>{qe($,{color:"success",children:(m,E)=>{var C=J();H((()=>se(C,`${e(p)??""} stopped`))),s(m,C)},$$slots:{default:!0}})};z(R,($=>{e(p)>0&&$(L)}));var M=F(R,2),I=$=>{qe($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`${e(A)??""} failed`))),s(m,C)},$$slots:{default:!0}})};z(M,($=>{e(A)>0&&$(I)})),s(b,x)};z(v,(b=>{e(h)&&e(i)&&b(k)})),s(u,f)},$$slots:{icon:!0,secondary:!0}})},details:w=>{var d=Dv(),l=y(d),u=v=>{var k=Uv(),b=y(k);re(b,{size:1,color:"neutral",children:(x,R)=>{var L=J("Stopping worker agents...");s(x,L)},$$slots:{default:!0}}),s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=Rv();Ce(M,21,(()=>e(c)),_t,((I,$,m)=>{Wt(I,{class:"c-stop-worker-tool__agent-card",children:(E,C)=>{var N=Nv(),O=D(N),P=y(O),W=y(P);re(W,{size:1,weight:"medium",children:(X,ee)=>{var Q=J();H((()=>se(Q,`Agent ${(e($).agentId||`${m+1}`)??""}`))),s(X,Q)},$$slots:{default:!0}});var q=F(W,2);{let X=r((()=>e($).success?"success":"error"));qe(q,{get color(){return e(X)},children:(ee,Q)=>{var Z=J();H((()=>se(Z,e($).success?"Stopped":"Failed"))),s(ee,Z)},$$slots:{default:!0}})}var Y=F(O,2),V=y(Y),te=X=>{var ee=Cv(),Q=y(ee);re(Q,{size:1,color:"neutral",children:(oe,ae)=>{var ie=Ev(),ne=F(D(ie));H((()=>se(ne,` ${e($).agentId??""}`))),s(oe,ie)},$$slots:{default:!0}});var Z=F(Q,2);re(Z,{size:1,color:"success",children:(oe,ae)=>{var ie=J("Worker agent has been successfully stopped.");s(oe,ie)},$$slots:{default:!0}}),s(X,ee)},K=X=>{var ee=zv(),Q=y(ee);re(Q,{size:1,color:"error",children:(ae,ie)=>{var ne=Av(),ce=F(D(ne));H((()=>se(ce,` ${(e($).error||"Unknown error")??""}`))),s(ae,ne)},$$slots:{default:!0}});var Z=F(Q,2),oe=ae=>{re(ae,{size:1,color:"neutral",children:(ie,ne)=>{var ce=Lv(),pe=F(D(ce));H((()=>se(pe,` ${e($).agentId??""}`))),s(ie,ce)},$$slots:{default:!0}})};z(Z,(ae=>{e($).agentId&&ae(oe)})),s(X,ee)};z(V,(X=>{e($).success?X(te):X(K,!1)})),s(E,N)},$$slots:{default:!0}})})),s(L,M)},R=L=>{var M=j(),I=D(M),$=m=>{var E=Mv(),C=y(E);re(C,{size:1,color:"neutral",children:(N,O)=>{var P=J("No worker agents were stopped.");s(N,P)},$$slots:{default:!0}}),s(m,E)};z(I,(m=>{t.toolUseState.phase!==ge.completed||e(h)||m($)}),!0),s(L,M)};z(b,(L=>{t.toolUseState.phase===ge.completed&&e(h)?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{t.toolUseState.phase===ge.running?v(u):v(f,!1)})),s(w,d)},error:w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.deleteWorkerAgent]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[])),_=r((()=>{const a=[];return e(g).length>0?a.push(Dt(e(g).length,"agent")):a.push("all agents"),a})),c=r((()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const a=JSON.parse(t.toolUseState.result.text),U=Array.isArray(a.deleteResults)?a.deleteResults:[],S=Array.isArray(a.failedDeletes)?a.failedDeletes:[];return[...U,...S]}catch(a){console.error("Failed to parse delete worker agent tool response:",a)}return[]})),p=r((()=>e(c).filter((a=>a.success)).length)),A=r((()=>e(c).filter((a=>!a.success)).length)),h=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(w){G(i,w,!0)},header:w=>{Ne(w,{toolName:"Delete Worker Agents",get formattedToolArgs(){return e(_)},icon:u=>{ve(u,{name:"trash-2"})},secondary:u=>{var f=j(),v=D(f),k=b=>{var x=Ov(),R=y(x),L=$=>{qe($,{color:"success",children:(m,E)=>{var C=J();H((()=>se(C,`${e(p)??""} deleted`))),s(m,C)},$$slots:{default:!0}})};z(R,($=>{e(p)>0&&$(L)}));var M=F(R,2),I=$=>{qe($,{color:"error",children:(m,E)=>{var C=J();H((()=>se(C,`${e(A)??""} failed`))),s(m,C)},$$slots:{default:!0}})};z(M,($=>{e(A)>0&&$(I)})),s(b,x)};z(v,(b=>{e(h)&&e(i)&&b(k)})),s(u,f)},$$slots:{icon:!0,secondary:!0}})},details:w=>{var d=Kv(),l=y(d),u=v=>{var k=Fv(),b=y(k);re(b,{size:1,color:"neutral",children:(x,R)=>{var L=J("Deleting worker agents...");s(x,L)},$$slots:{default:!0}}),s(v,k)},f=v=>{var k=j(),b=D(k),x=L=>{var M=Vv();Ce(M,21,(()=>e(c)),_t,((I,$,m)=>{Wt(I,{class:"c-delete-worker-tool__agent-card",children:(E,C)=>{var N=Gv(),O=D(N),P=y(O),W=y(P);re(W,{size:1,weight:"medium",children:(X,ee)=>{var Q=J();H((()=>se(Q,`Agent ${(e($).agentId||`${m+1}`)??""}`))),s(X,Q)},$$slots:{default:!0}});var q=F(W,2);{let X=r((()=>e($).success?"success":"error"));qe(q,{get color(){return e(X)},children:(ee,Q)=>{var Z=J();H((()=>se(Z,e($).success?"Deleted":"Failed"))),s(ee,Z)},$$slots:{default:!0}})}var Y=F(O,2),V=y(Y),te=X=>{var ee=qv(),Q=y(ee);re(Q,{size:1,color:"neutral",children:(oe,ae)=>{var ie=Pv(),ne=F(D(ie));H((()=>se(ne,` ${e($).agentId??""}`))),s(oe,ie)},$$slots:{default:!0}});var Z=F(Q,2);re(Z,{size:1,color:"success",children:(oe,ae)=>{var ie=J("Worker agent and its resources have been successfully deleted.");s(oe,ie)},$$slots:{default:!0}}),s(X,ee)},K=X=>{var ee=jv(),Q=y(ee);re(Q,{size:1,color:"error",children:(ae,ie)=>{var ne=Wv(),ce=F(D(ne));H((()=>se(ce,` ${(e($).error||"Unknown error")??""}`))),s(ae,ne)},$$slots:{default:!0}});var Z=F(Q,2),oe=ae=>{re(ae,{size:1,color:"neutral",children:(ie,ne)=>{var ce=Bv(),pe=F(D(ce));H((()=>se(pe,` ${e($).agentId??""}`))),s(ie,ce)},$$slots:{default:!0}})};z(Z,(ae=>{e($).agentId&&ae(oe)})),s(X,ee)};z(V,(X=>{e($).success?X(te):X(K,!1)})),s(E,N)},$$slots:{default:!0}})})),s(L,M)},R=L=>{var M=j(),I=D(M),$=m=>{var E=Hv(),C=y(E);re(C,{size:1,color:"neutral",children:(N,O)=>{var P=J("No worker agents were deleted.");s(N,P)},$$slots:{default:!0}}),s(m,E)};z(I,(m=>{t.toolUseState.phase!==ge.completed||e(h)||m($)}),!0),s(L,M)};z(b,(L=>{t.toolUseState.phase===ge.completed&&e(h)?L(x):L(R,!1)}),!0),s(v,k)};z(l,(v=>{t.toolUseState.phase===ge.running?v(u):v(f,!1)})),s(w,d)},error:w=>{var d=j(),l=D(d),u=f=>{It(f,tt((()=>t.toolUseState.result??{})))};z(l,(f=>{t.toolUseState.phase===ge.error&&f(u)})),s(w,d)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.readWorkerAgentEdits]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[])),_=r((()=>e(g).length>0?[Dt(e(g).length,"agent")]:["all agents"])),c=r((()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text&&!t.toolUseState.result.isError)try{const U=JSON.parse(t.toolUseState.result.text),S=Array.isArray(U.editResults)?U.editResults:[],w=Array.isArray(U.failedReads)?U.failedReads:[];return[...S,...w]}catch(U){console.error("Failed to parse read worker agent edits tool response:",U)}return[]})),p=r((()=>e(c).filter((U=>U.success)).length)),A=r((()=>e(c).filter((U=>!U.success)).length)),h=r((()=>e(c).reduce(((U,S)=>U+(S.success&&S.fileEdits?S.fileEdits.length:0)),0))),a=r((()=>e(c).length>0));Re(n,{get collapsed(){return e(i)},set collapsed(d){G(i,d,!0)},header:d=>{Ne(d,{toolName:"Read Worker Agent Edits",get formattedToolArgs(){return e(_)},icon:f=>{ve(f,{name:"file"})},secondary:f=>{var v=j(),k=D(v),b=x=>{var R=Jv(),L=y(R),M=C=>{qe(C,{color:"success",children:(N,O)=>{var P=J();H((W=>se(P,W)),[()=>Dt(e(p),"agent")]),s(N,P)},$$slots:{default:!0}})};z(L,(C=>{e(p)>0&&C(M)}));var I=F(L,2),$=C=>{qe(C,{color:"info",children:(N,O)=>{var P=J();H((W=>se(P,W)),[()=>Dt(e(h),"edit")]),s(N,P)},$$slots:{default:!0}})};z(I,(C=>{e(h)>0&&C($)}));var m=F(I,2),E=C=>{qe(C,{color:"error",children:(N,O)=>{var P=J();H((()=>se(P,`${e(A)??""} failed`))),s(N,P)},$$slots:{default:!0}})};z(m,(C=>{e(A)>0&&C(E)})),s(x,R)};z(k,(x=>{e(a)&&e(i)&&x(b)})),s(f,v)},$$slots:{icon:!0,secondary:!0}})},details:d=>{var l=ip(),u=y(l),f=k=>{var b=Yv(),x=y(b);re(x,{size:1,color:"neutral",children:(R,L)=>{var M=J("Reading worker agent file edits...");s(R,M)},$$slots:{default:!0}}),s(k,b)},v=k=>{var b=j(),x=D(b),R=M=>{var I=np();Ce(I,21,(()=>e(c)),_t,(($,m,E)=>{Wt($,{class:"c-read-edits-tool__agent-card",children:(C,N)=>{var O=ap(),P=D(O),W=y(P),q=y(W);re(q,{size:1,weight:"medium",children:(ee,Q)=>{var Z=J();H((()=>se(Z,`Agent ${(e(m).agentId||`${E+1}`)??""}`))),s(ee,Z)},$$slots:{default:!0}});var Y=F(q,2);{let ee=r((()=>e(m).success?"success":"error"));qe(Y,{get color(){return e(ee)},children:(Q,Z)=>{var oe=J();H((()=>se(oe,e(m).success?"Read":"Failed"))),s(Q,oe)},$$slots:{default:!0}})}var V=F(P,2),te=y(V),K=ee=>{var Q=tp(),Z=y(Q);re(Z,{size:1,color:"neutral",children:(ne,ce)=>{var pe=Xv(),fe=F(D(pe));H((()=>se(fe,` ${e(m).agentId??""}`))),s(ne,pe)},$$slots:{default:!0}});var oe=F(Z,2),ae=ne=>{var ce=ep(),pe=y(ce);re(pe,{size:1,color:"neutral",children:(_e,me)=>{var ke=Qv(),ye=y(ke);H((()=>se(ye,`File Edits (${e(m).fileEdits.length??""}):`))),s(_e,ke)},$$slots:{default:!0}});var fe=F(pe,2);Ce(fe,17,(()=>e(m).fileEdits),(_e=>_e.filePath),((_e,me)=>{var ke=Zv(),ye=y(ke),we=y(ye);re(we,{size:1,weight:"medium",type:"monospace",children:(Ie,Ue)=>{var Je=J();H((()=>se(Je,e(me).filePath))),s(Ie,Je)},$$slots:{default:!0}});var $e=F(we,2);{let Ie=r((()=>(function(Ue){switch(Ue?.toLowerCase()){case"created":case"added":return"success";case"modified":case"updated":return"info";case"deleted":case"removed":return"error";case"renamed":case"moved":return"warning";default:return"neutral"}})(e(me).changeType)));qe($e,{get color(){return e(Ie)},children:(Ue,Je)=>{var be=J();H((()=>se(be,e(me).changeType))),s(Ue,be)},$$slots:{default:!0}})}$s(F(ye,2),{get data(){return e(me)},fields:[{key:"content",label:"Content",type:"monospace",collapsible:!0}]}),s(_e,ke)})),s(ne,ce)},ie=ne=>{re(ne,{size:1,color:"neutral",children:(ce,pe)=>{var fe=J("No file edits found for this agent.");s(ce,fe)},$$slots:{default:!0}})};z(oe,(ne=>{e(m).fileEdits&&e(m).fileEdits.length>0?ne(ae):ne(ie,!1)})),s(ee,Q)},X=ee=>{var Q=rp(),Z=y(Q);re(Z,{size:1,color:"error",children:(ie,ne)=>{var ce=sp(),pe=F(D(ce));H((()=>se(pe,` ${(e(m).error||"Unknown error")??""}`))),s(ie,ce)},$$slots:{default:!0}});var oe=F(Z,2),ae=ie=>{re(ie,{size:1,color:"neutral",children:(ne,ce)=>{var pe=op(),fe=F(D(pe));H((()=>se(fe,` ${e(m).agentId??""}`))),s(ne,pe)},$$slots:{default:!0}})};z(oe,(ie=>{e(m).agentId&&ie(ae)})),s(ee,Q)};z(te,(ee=>{e(m).success?ee(K):ee(X,!1)})),s(C,O)},$$slots:{default:!0}})})),s(M,I)},L=M=>{var I=j(),$=D(I),m=E=>{var C=lp(),N=y(C);re(N,{size:1,color:"neutral",children:(O,P)=>{var W=J("No worker agent edits were found.");s(O,W)},$$slots:{default:!0}}),s(E,C)};z($,(E=>{t.toolUseState.phase!==ge.completed||e(a)||E(m)}),!0),s(M,I)};z(x,(M=>{t.toolUseState.phase===ge.completed&&e(a)?M(R):M(L,!1)}),!0),s(k,b)};z(u,(k=>{t.toolUseState.phase===ge.running?k(f):k(v,!1)})),s(d,l)},error:d=>{var l=j(),u=D(l),f=v=>{It(v,tt((()=>t.toolUseState.result??{})))};z(u,(v=>{t.toolUseState.phase===ge.error&&v(f)})),s(d,l)},$$slots:{header:!0,details:!0,error:!0}}),ue()},[Ke.applyWorkerAgentEdits]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=le(!0),g=r((()=>Array.isArray(o().worker_agent_ids)?o().worker_agent_ids:[])),_=r((()=>{const v=[];return e(g).length>0&&v.push(Dt(e(g).length,"agent")),v})),c=r((()=>{if(t.toolUseState.phase===ge.completed&&t.toolUseState.result?.text)try{return JSON.parse(t.toolUseState.result.text)}catch{return null}return null})),p=r((()=>t.toolUseState.phase===ge.completed&&e(c))),A=r((()=>e(c)?.appliedFiles?.length||0)),h=r((()=>e(c)?.conflictFiles?.length||0)),a=r((()=>e(c)?.errors?.length||0));const U={icon:void 0,color:"error",text:"Errors",lucideIconName:"x"},S={icon:void 0,color:"warning",text:"Conflicts",lucideIconName:"circle-alert"},w={icon:void 0,color:"success",text:"Success",lucideIconName:"circle-check"},d={icon:void 0,color:"neutral",text:"Apply",lucideIconName:"circle-check"};let l=r((()=>{if(t.toolUseState.phase===ge.error)return U;if(e(c)){const v=e(c).errors&&e(c).errors.length>0,k=e(c).conflictFiles&&e(c).conflictFiles.length>0;if(v)return U;if(k)return S;if(e(c).success)return w}return d})),u=r((()=>{const v={};e(g).length>0&&(v.workerAgentIds=e(g).join(", "));const k=o().application_method||"direct_files";v.applicationMethod=k;const b=o().target_files||[];b.length>0&&(v.targetFiles=b.join(", "));const x=o().target_branch||"current";return x!=="current"&&(v.targetBranch=x),e(c)?(e(c).message&&(v.status=e(c).message),e(c).appliedFiles&&Array.isArray(e(c).appliedFiles)&&e(c).appliedFiles.length>0&&(v.appliedFiles=e(c).appliedFiles.join(", ")),e(c).conflictFiles&&Array.isArray(e(c).conflictFiles)&&e(c).conflictFiles.length>0&&(v.conflictFiles=e(c).conflictFiles.join(", ")),e(c).errors&&Array.isArray(e(c).errors)&&e(c).errors.length>0&&(v.errors=e(c).errors.join("; ")),e(c).method&&(v.method=e(c).method)):t.toolUseState.result?.text&&(v.result=t.toolUseState.result.text),v})),f=r((()=>[{key:"workerAgentIds",label:"Worker Agent IDs",type:"text",color:"neutral"},{key:"applicationMethod",label:"Application Method",type:"text",color:"neutral"},{key:"method",label:"Applied Method",type:"text",color:"accent",condition:()=>e(u).method&&e(u).method!==e(u).applicationMethod},{key:"targetFiles",label:"Target Files",type:"text",color:"neutral",condition:()=>e(u).targetFiles},{key:"targetBranch",label:"Target Branch",type:"text",color:"neutral",condition:()=>e(u).targetBranch},{key:"status",label:"Status",type:"text",color:e(c)?.success?"success":"neutral"},{key:"appliedFiles",label:"Applied Files",type:"text",color:"success",condition:()=>e(u).appliedFiles},{key:"conflictFiles",label:"Conflict Files",type:"text",color:"error",condition:()=>e(u).conflictFiles},{key:"errors",label:"Errors",type:"text",color:"error",condition:()=>e(u).errors,collapsible:!0},{key:"result",label:"Raw Result",type:"monospace",color:"neutral",condition:()=>e(u).result,collapsible:!0}]));Re(n,{showToolOutput:!0,get collapsed(){return e(i)},set collapsed(b){G(i,b,!0)},header:b=>{Ne(b,{toolName:"Apply Worker Edits",get formattedToolArgs(){return e(_)},icon:L=>{ve(L,{get name(){return e(l).lucideIconName}})},secondary:L=>{var M=j(),I=D(M),$=m=>{var E=cp(),C=y(E),N=Y=>{qe(Y,{color:"success",children:(V,te)=>{var K=J();H((()=>se(K,`${e(A)??""} applied`))),s(V,K)},$$slots:{default:!0}})};z(C,(Y=>{e(A)>0&&Y(N)}));var O=F(C,2),P=Y=>{qe(Y,{color:"warning",children:(V,te)=>{var K=J();H((()=>se(K,`${e(h)??""} conflicts`))),s(V,K)},$$slots:{default:!0}})};z(O,(Y=>{e(h)>0&&Y(P)}));var W=F(O,2),q=Y=>{qe(Y,{color:"error",children:(V,te)=>{var K=J();H((()=>se(K,`${e(a)??""} errors`))),s(V,K)},$$slots:{default:!0}})};z(W,(Y=>{e(a)>0&&Y(q)})),s(m,E)};z(I,(m=>{e(p)&&e(i)&&m($)})),s(L,M)},$$slots:{icon:!0,secondary:!0}})},details:b=>{$s(b,{get data(){return e(u)},get fields(){return e(f)}})},$$slots:{header:!0,details:!0}}),ue()}};function mr(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({})));Re(n,{showToolOutput:!1,header:g=>{{const _=p=>{ve(p,{name:"globe"})};let c=r((()=>[Tt(o().query,"")]));Ne(g,{toolName:"Web",get formattedToolArgs(){return e(c)},icon:_,$$slots:{icon:!0}})}},$$slots:{header:!0}}),ue()}function bs(n,t){de(t,!0);const o=()=>he(_,"$ctx",i),[i,g]=Se(),_=vt();let c=r((()=>(function(h={}){const{summary:a,...U}=h;let S=a??U.query;return{formattedToolArgs:S?[S]:void 0,toolUseInput:U}})(o().toolUseInput))),p=r((()=>e(c).formattedToolArgs)),A=r((()=>e(c).toolUseInput));Re(n,{showToolOutput:!0,header:U=>{Ne(U,{get toolName(){return t.toolName},get formattedToolArgs(){return e(p)},icon:d=>{var l=j(),u=D(l);xe(u,(()=>t.icon??Me)),s(d,l)},toolAction:d=>{{let l=r((()=>(function(u={}){const{href:f}=u;return typeof f=="string"?f:void 0})(e(A))));fa(d,{get href(){return e(l)}})}},$$slots:{icon:!0,toolAction:!0}})},details:U=>{ua(U,{get toolUseInput(){return e(A)},get toolUseState(){return o().toolUseState}})},$$slots:{header:!0,details:!0}}),ue(),g()}var dp=T('<span class="c-supabase-tool__summary svelte-c6z2oa"><!></span>');const fr={[Yt.webSearch]:mr,[Yt.webSearchV1]:mr,[Yt.gitHub]:function(n){bs(n,{toolName:"GitHub",icon:o=>{ve(o,{name:"github"})},$$slots:{icon:!0}})},[Yt.linear]:function(n){bs(n,{toolName:"Linear",icon:o=>{ve(o,{name:"linear"})},$$slots:{icon:!0}})},[Yt.notion]:function(n){bs(n,{toolName:"Notion",icon:o=>{ve(o,{name:"notion"})},$$slots:{icon:!0}})},[Yt.jira]:function(n){bs(n,{toolName:"Jira",icon:o=>{ve(o,{name:"jira"})},$$slots:{icon:!0}})},[Yt.confluence]:function(n){bs(n,{toolName:"Confluence",icon:o=>{ve(o,{name:"confluence"})},$$slots:{icon:!0}})},[Yt.supabase]:function(n,t){de(t,!0);let o=B(t,"toolUseInput",19,(()=>({}))),i=r((()=>o().summary||""));Re(n,{showToolOutput:!1,header:_=>{Ne(_,{toolName:"Supabase",get toolUseInput(){return o()},icon:A=>{ve(A,{name:"supabase"})},secondary:A=>{var h=dp(),a=y(h);re(a,{size:1,children:(U,S)=>{var w=J();H((()=>se(w,e(i)))),s(U,w)},$$slots:{default:!0}}),s(A,h)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ue()},[Yt.glean]:function(n){bs(n,{toolName:"Glean",icon:o=>{ve(o,{name:"glean"})},$$slots:{icon:!0}})}};var up=T('<span class="c-mcp-tool__summary svelte-1jljdf0"><!></span>');function vp(n,t){de(t,!0);const o=()=>he(p,"$ctx",g),i=()=>he(h,"$toolIdentity",g),[g,_]=Se();let c=B(t,"toolUseInput",19,(()=>({})));const p=vt();let A=r((()=>o().toolUse.tool_name));const h=Lr(o().toolUse.tool_name);let a=r((()=>i()?.found?i().mcpServerName:o().toolUse.mcp_server_name)),U=r((()=>i()?.found?i().mcpToolName:o().toolUse.mcp_tool_name)),S=r((()=>Kn(e(a)??""))),w=r((()=>e(a)&&e(a)in Xo?Xo[e(a)].displayName:void 0)),d=r((()=>e(a)?e(w)??e(a).replace(/_+/g," "):e(U)||e(A)||"MCP")),l=r((()=>e(a)&&e(U)||""));Re(n,{showToolOutput:!0,header:f=>{Ne(f,{get toolName(){return e(d)},get toolUseInput(){return c()},icon:b=>{{let x=r((()=>e(S)||"mcp"));ve(b,{get name(){return e(x)}})}},secondary:b=>{var x=up(),R=y(x);re(R,{size:1,children:(L,M)=>{var I=J();H((()=>se(I,e(l)))),s(L,I)},$$slots:{default:!0}}),s(b,x)},$$slots:{icon:!0,secondary:!0}})},$$slots:{header:!0}}),ue(),_()}function pp(n,t){const o=((i=n.tool_name)in hr?hr[i]:void 0)??(function(_){return _ in fr?fr[_]:void 0})(n.tool_name)??(function(_){return _ in pr?pr[_]:void 0})(n.tool_name);var i;return o||(function(_){if(_&&_.found&&(_.mcpToolName||_.mcpServerName))return vp})(t)||Re}var gp=T('<div class="c-post-tool-use-message svelte-yykrgs"><!></div>'),hp=T('<div class="c-post-tool-use-messages svelte-yykrgs"></div>'),mp=T("<!>  <!>",1);function To(n,t){de(t,!0);const o=()=>he(w,"$toolIdentity",_),i=()=>he(e(v),"$toolUseState",_),g=()=>he(k,"$readableCtx",_),[_,c]=Se();let p=B(t,"onToolRun",3,(()=>{})),A=B(t,"onToolCancel",3,(()=>{})),h=B(t,"onToolSkip",3,(()=>{})),a=B(t,"turnIndex",3,0),U=B(t,"isGroupListItem",3,!1),S=B(t,"postToolUseMessages",19,(()=>[]));const w=Lr(t.toolUse.tool_name);Te((()=>{o()||f(wn(t.toolUse.tool_name))}));let d=r((()=>pp(t.toolUse,o())));const l=Sn(),u=Ze(as.key),f=st(),v=r((()=>he(l,"$isRemote",_)?Qt(u.getToolUseState(t.toolUse.tool_use_id)):zr(t.requestId,t.toolUse.tool_use_id))),{readableCtx:k,writableCtx:b}=Ki({toolUse:t.toolUse,toolUseState:i(),isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:p(),onToolCancel:A(),onToolSkip:h(),turnIndex:a(),isGroupListItem:U()});Te((()=>{Uo(b,{toolUse:t.toolUse,toolUseState:i(),isLastTurn:t.isLastTurn,requestId:t.requestId,onToolRun:p(),onToolCancel:A(),onToolSkip:h(),turnIndex:a(),isGroupListItem:U()})}));var x=mp(),R=D(x),L=$=>{var m=j(),E=D(m);Le(E,(()=>e(d)),((C,N)=>{N(C,tt(g))})),s($,m)};z(R,($=>{i()&&$(L)}));var M=F(R,2),I=$=>{var m=hp();Ce(m,21,S,_t,((E,C)=>{var N=gp(),O=y(N);{let P=r((()=>({code:Ls,codespan:zs,link:Ns})));ws(O,{get renderers(){return e(P)},get markdown(){return e(C)}})}s(E,N)})),s($,m)};z(M,($=>{S().length>0&&$(I)})),s(n,x),ue(),c()}var fp=T('<div class="l-tooluse-list svelte-1jzshyv"></div>');function _p(n,t){de(t,!0);const[o,i]=Se();let g=B(t,"remoteAgentsModel",19,(()=>{})),_=B(t,"turnIndex",3,0),c=B(t,"postToolUseMessagesByToolId",19,(()=>({})));const p=st();function A(u,f,v){p(Mr(t.conversationId,u,f.tool_use_id,v))}function h(u,f){p(Rr(u,f))}function a(u,f){p(Nr(u,f))}const U=r((()=>he(g(),"$remoteAgentsModel",o)?.isActive?Qt(Or(t.requestId,t.toolUseNodes,g())):Dr(t.conversationId,t.requestId))),S=r((()=>he(e(U),"$displayableToolUseNodes",o).map((u=>u.tool_use)).filter((u=>!!u))));var w=j(),d=D(w),l=u=>{var f=fp();Ce(f,21,(()=>e(S)),(v=>v.tool_use_id),((v,k)=>{{let b=r((()=>c()[e(k).tool_use_id]??[]));To(v,{get toolUse(){return e(k)},get isLastTurn(){return t.isLastTurn},get requestId(){return t.requestId},onToolRun:A,onToolCancel:h,onToolSkip:a,get turnIndex(){return _()},isGroupListItem:!0,get postToolUseMessages(){return e(b)}})}})),s(u,f)};z(d,(u=>{t.toolUseNodes!==void 0&&t.toolUseNodes.length>0&&u(l)})),s(n,w),ue(),i()}ts(["click","keydown"]);const kp={time:Br,timeDateFull:jr,timeDate:function(n){return(n instanceof Date?n:new Date(n)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}};var $p=T("<div><!></div>"),bp=T("<div><!></div>");const $a=Symbol("conversationNavigationItems");function Yg(n={all:[]}){const t=Ft(n);return Ot($a,t),t}function yp(){return Ze($a)}var wp=T('<div class="c-conversation-navigation__tooltip svelte-m1594">Up <!></div>'),Sp=T("<!> <!>",1),Tp=T('<div class="c-conversation-navigation__tooltip svelte-m1594">Down <!></div>'),Ip=T("<!> <!>",1),xp=T('<div class="c-conversation-navigation svelte-m1594"><!> <!></div>'),Up=T("<div><!></div>");const Ep={Controls:function(n,t){de(t,!0);const o=()=>he(c,"$conversationNavigationItems",i),[i,g]=Se(),_=B(t,"trackNavigationInDirection",19,(()=>{})),c=yp(),p=r((()=>o().prev)),A=r((()=>o().next)),h=r((()=>o().scrollTo)),a=r((()=>o().scrollToBottom)),U=r((()=>o().canScrollToBottom)),S=r((()=>e(U)));function w(v){Tn()&&(_()?.("down",v),e(S)&&(e(A)&&e(h)?e(h)(e(A).offsetTop-45):e(U)&&e(a)&&e(a)()))}function d(v){_()?.("up",v),e(p)&&e(h)&&e(h)(e(p).offsetTop-45)}var l=j(),u=D(l),f=v=>{var k=xp(),b=y(k);We(b,{side:"top",nested:!1,content:L=>{var M=wp();yo(F(y(M)),{commandName:"scrollConversationUp",keysOnly:!0}),s(L,M)},children:(L,M)=>{var I=Sp(),$=D(I);bo(0,{name:"scrollConversationUp",handler:()=>d("keybinding")});var m=F($,2);{let E=r((()=>!e(p)));Oe(m,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>d("button"),get disabled(){return e(E)},children:(C,N)=>{ve(C,{name:"arrow-up"})},$$slots:{default:!0}})}s(L,I)},$$slots:{content:!0,default:!0}});var x=F(b,2);We(x,{side:"top",nested:!1,content:L=>{var M=Tp();yo(F(y(M)),{commandName:"scrollConversationDown",keysOnly:!0}),s(L,M)},children:(L,M)=>{var I=Ip(),$=D(I);bo(0,{name:"scrollConversationDown",handler:()=>w("keybinding")});var m=F($,2);{let E=r((()=>!e(S)));Oe(m,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>w("button"),get disabled(){return e(E)},children:(C,N)=>{ve(C,{name:"arrow-down"})},$$slots:{default:!0}})}s(L,I)},$$slots:{content:!0,default:!0}}),s(v,k)};z(u,(v=>{(e(p)||e(U))&&v(f)})),s(n,l),ue(),g()},Item:function(n,t){var o=Up(),i=y(o);xe(i,(()=>t.children??Me)),H((()=>gt(o,"data-navigation-id",t.id))),s(n,o)}};var Cp=T('<div class="c-chat-message__content hidden-when-empty svelte-6ub04x"><!></div>'),Ap=T('<div class="c-chat-message__user-actions svelte-6ub04x"><!></div>'),Lp=T('<!> <div class="c-chat-message__user svelte-6ub04x"><!> <div><!></div></div>',1),zp=T("<div><!></div> <!> <!>",1);function Np(n,t){de(t,!0);let o=B(t,"isAugment",3,!1),i=B(t,"isEditing",11,!1);var g=zp(),_=D(g);let c;var p=y(_),A=S=>{var w=j(),d=D(w),l=u=>{var f=Cp(),v=y(f);xe(v,(()=>t.content??Me)),s(u,f)};z(d,(u=>{t.content&&u(l)})),s(S,w)},h=S=>{var w=Lp(),d=D(w);{let x=r((()=>String(t.timestamp)));Le(d,(()=>Ep.Item),((R,L)=>{L(R,{get id(){return e(x)},children:(M,I)=>{(function($,m){de(m,!0);let E=B(m,"timestamp",19,(()=>{})),C=B(m,"showTooltip",3,!0),N=B(m,"tooltipSide",3,"right"),O=B(m,"textColor",3,"secondary"),P=B(m,"textSize",3,1),W=B(m,"format",3,Br),q=r((()=>typeof W()=="function"?W():kp[W()]));var Y=j(),V=D(Y),te=K=>{var X=j(),ee=D(X),Q=oe=>{{let ae=r((()=>jr(E())));We(oe,{get content(){return e(ae)},get side(){return N()},children:(ie,ne)=>{var ce=$p(),pe=y(ce);re(pe,{get color(){return O()},get size(){return P()},children:(fe,_e)=>{var me=J();H((ke=>se(me,ke)),[()=>e(q)(E())]),s(fe,me)},$$slots:{default:!0}}),H((()=>Qe(ce,1,ps(["c-timestamp-display",m.class]),"svelte-81luuj"))),s(ie,ce)},$$slots:{default:!0}})}},Z=oe=>{var ae=bp(),ie=y(ae);re(ie,{get color(){return O()},get size(){return P()},children:(ne,ce)=>{var pe=J();H((fe=>se(pe,fe)),[()=>e(q)(E())]),s(ne,pe)},$$slots:{default:!0}}),H((()=>Qe(ae,1,ps(["c-timestamp-display",m.class]),"svelte-81luuj"))),s(oe,ae)};z(ee,(oe=>{C()?oe(Q):oe(Z,!1)})),s(K,X)};z(V,(K=>{E()&&K(te)})),s($,Y),ue()})(M,{get timestamp(){return t.timestamp},textSize:0})},$$slots:{default:!0}})}))}var l=F(d,2),u=y(l),f=x=>{var R=Ap(),L=y(R);xe(L,(()=>t.userActions??Me)),s(x,R)};z(u,(x=>{t.userActions&&!i()&&x(f)}));var v=F(u,2);let k;var b=y(v);re(b,{size:1,children:(x,R)=>{var L=j(),M=D(L);xe(M,(()=>t.content??Me)),s(x,L)},$$slots:{default:!0}}),H((()=>k=Qe(v,1,"c-chat-message__content svelte-6ub04x",null,k,{"c-chat-message__content--editing":i()}))),s(S,w)};z(p,(S=>{o()?S(A):S(h,!1)}));var a=F(_,2);xe(a,(()=>t.footer??Me));var U=F(a,2);xe(U,(()=>t.edit??Me)),H((()=>c=Qe(_,1,"c-chat-message svelte-6ub04x",null,c,{"c-chat-message--augment":o()}))),s(n,g),ue()}function Rp(n){return async()=>{if(n.currentAgentId)try{const t=await n.getConversationUrl(n.currentAgentId);t&&await navigator.clipboard.writeText(t)}catch(t){console.error("Failed to get conversation URL: ",t)}}}var Mp=T("<div><!></div>");function Dp(n,t){de(t,!0);const o=()=>he(h,"$currentConversationId",i),[i,g]=Se(),_=Ze(as.key),c={share:"share-2",retry:"refresh-ccw"},p=w=>({lucideIconName:c[w]}),A=Et("enableShareService"),h=kt(),a=st(),U=r((()=>[...(function(d,l,u){return{tooltipItems:[{label:"Share",action:u?.isActive?Rp(u):d,id:"share-message",disabled:!l,icon:"share",successMessage:"Link copied!"}]}})((()=>{o()&&a(Ar(o()))}),he(A,"$enableShareService",i),he(_,"$remoteAgentsModel",i)).tooltipItems.map((d=>({...d,...p(d.icon)}))),...t.isLastTurn&&t.turn?.status===Zt.failed?[{label:"Retry",action:()=>{o()&&t.turn&&(a(In(o(),t.turn)),a(mt(ft.WEBVIEW.MESSAGE_SEND_RETRY_CLICKED,{source:"button",errorMessagePreview:t.turn.display_error_message?.substring(0,100),requestId:t.turn.request_id})))},id:"retry-message",disabled:!1,...p("retry")}]:[]]));var S=Mp();Qe(S,1,"c-aug-msg__actions svelte-h10o63",null,{},{"c-aug-msg__actions-visible":!1}),uc(y(S),{get items(){return e(U)}}),Bt(3,S,(()=>Eo),(()=>({duration:200}))),s(n,S),ue(),g()}var Op=T('<span class="c-animated-number-indicator svelte-tgxfrx"><!></span>');function Fp(n,t){de(t,!0);let o=B(t,"value",3,0),i=B(t,"size",3,1),g=B(t,"maxDuration",3,500),_=B(t,"delay",3,0),c=B(t,"autoStart",3,!1),p=B(t,"skipAnimation",3,!1);const A=new Jn(0),h=Ve({value:0}),a=r((()=>String(h.value).length));Ps((()=>A.on("change",(w=>{h.value=Math.round(w)})))),Te((()=>{if(!c())return A.set(0),void(h.value=0);if(p())return A.set(o()),void(h.value=o());const w=(function(l){if(l===0)return .016;const u=Math.log10(l+1)/Math.log10(1e3),f=300+(g()-300)*Math.min(u,1);return(l<20?Math.max(300,400):f)/1e3})(o()),d=Yn(A,o(),{duration:w,delay:_()/1e3,ease:[.42,0,.58,1]});return()=>{d.stop()}}));var U=Op(),S=y(U);re(S,{get size(){return i()},get color(){return t.color},children:(w,d)=>{var l=J();H((()=>se(l,h.value))),s(w,l)},$$slots:{default:!0}}),H((()=>Is(U,`--digits:${e(a)??""}`))),s(n,U),ue()}var Pp=T('<!> <span class="c-turn-summary-item__label-container svelte-1jr8nef"><!> <span class="c-turn-summary__label svelte-1jr8nef"><!></span></span>',1),qp=T('<span class="c-turn-summary-item__content svelte-1jr8nef"><!></span>'),Wp=T('<div class="c-turn-summary-item svelte-1jr8nef"><!></div>');function Bp(n,t){de(t,!0);const o=r((()=>xn(t.entry.value,t.entry.singularLabel,t.entry.pluralLabel)));function i(){t.entry.callback&&t.entry.callback()}const g={difference:"file-diff"};var _=Wp(),c=y(_);We(c,{get content(){return e(o)},children:(p,A)=>{{let h=r((()=>t.entry.callback?i:cs)),a=r((()=>!t.entry.callback));Ut(p,{get onclick(){return e(h)},variant:"ghost",color:"neutral",size:.5,get readonly(){return e(a)},children:(U,S)=>{var w=qp();(d=>{var l=Pp(),u=D(l);{let x=r((()=>g[t.entry.icon]||t.entry.icon));ve(u,{get name(){return e(x)},size:2})}var f=F(u,2),v=y(f);jn(v,(()=>`${t.animationResetKey}-${t.index}-${t.entry.value}`),(x=>{{let R=r((()=>t.index*t.fadeInDelay*1.1));Fp(x,{get value(){return t.entry.value},size:1,get autoStart(){return t.shouldStartNumbers},get delay(){return e(R)},get skipAnimation(){return t.entry.skipAnimation}})}}));var k=F(v,2),b=y(k);re(b,{size:1,children:(x,R)=>{var L=J();H((()=>se(L,`${e(o)??""}`))),s(x,L)},$$slots:{default:!0}}),s(d,l)})(y(w)),s(U,w)},$$slots:{default:!0}})}},$$slots:{default:!0}}),s(n,_),ue()}var jp=T('<div class="c-scroll-navigation-buttons svelte-14n31ol"><!> <!></div>'),Gp=T('<div class="c-turn-summary__item svelte-n2atb8"><!></div>'),Vp=T('<div class="c-turn-summary__list svelte-n2atb8"></div>'),Hp=T("<!> <!>",1),Kp=T('<div class="c-turn-summary svelte-n2atb8"><!></div>');function Jp(n,t){de(t,!0);const o=B(t,"entries",19,(()=>[]));let i=le(!1),g=le(void 0),_=le(void 0);const c=r((()=>(o()||[]).filter((A=>A.value>0))));let p;Te((()=>{if(e(g))return p||(p=new Yr({threshold:1})),p.once(e(g),(()=>{G(i,!0),p?.destroy()}))})),ro(n,{expandable:!1,header:h=>{var a=Kp(),U=y(a),S=d=>{var l=Hp(),u=D(l);Xn(u,{stretch:!0,get containerElement(){return e(_)},set containerElement(f){G(_,f,!0)},children:(f,v)=>{var k=Vp();Ce(k,23,(()=>e(c)),(b=>b.singularLabel),((b,x,R)=>{var L=Gp();Bp(y(L),{get entry(){return e(x)},get index(){return e(R)},animationResetKey:0,get shouldStartNumbers(){return e(i)},fadeInDelay:100}),Bt(5,L,(()=>wr),(()=>({duration:250,x:40,delay:100*e(R)}))),s(b,L)})),s(f,k)},$$slots:{default:!0}}),(function(f,v){de(v,!0);let k=B(v,"scrollableElement",3,null),b=le(!1),x=le(!1),R=le(!1);function L(){if(!k())return G(x,!1),void G(R,!1);const{scrollLeft:N,scrollWidth:O,clientWidth:P}=k(),W=O-P;G(x,N>0),G(R,N<W-1)}function M(){k()?(G(b,k().scrollWidth>k().clientWidth),L()):G(b,!1)}function I(){if(!k()||!e(x))return;const N=(k().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle(k()).gap)||0);k().scrollBy({left:-N,behavior:"smooth"})}function $(){if(!k()||!e(R))return;const N=(k().children[0]?.getBoundingClientRect().width||0)+(parseInt(getComputedStyle(k()).gap)||0);k().scrollBy({left:N,behavior:"smooth"})}Te((()=>{if(k())return M(),k().addEventListener("scroll",L),()=>{k().removeEventListener("scroll",L)}})),Ps((()=>{if(typeof ResizeObserver<"u"&&k()){const N=new ResizeObserver((()=>{M()}));return N.observe(k()),k().parentElement&&N.observe(k().parentElement),L(),()=>{N.disconnect()}}}));var m=j(),E=D(m),C=N=>{var O=jp(),P=y(O);{let q=r((()=>!e(x)));Oe(P,{size:.5,variant:"ghost-block",color:"neutral",onclick:I,get disabled(){return e(q)},class:"c-scroll-navigation-buttons__button-left",children:(Y,V)=>{ve(Y,{name:"chevron-left",size:1})},$$slots:{default:!0}})}var W=F(P,2);{let q=r((()=>!e(R)));Oe(W,{size:.5,variant:"ghost-block",color:"neutral",onclick:$,get disabled(){return e(q)},children:(Y,V)=>{ve(Y,{name:"chevron-right",size:1})},$$slots:{default:!0}})}s(N,O)};z(E,(N=>{e(b)&&N(C)})),s(f,m),ue()})(F(u,2),{get scrollableElement(){return e(_)}}),s(d,l)},w=d=>{re(d,{size:1,color:"secondary",children:(l,u)=>{var f=J("No activity to report.");s(l,f)},$$slots:{default:!0}})};z(U,(d=>{e(i)&&e(c).length>0?d(S):d(w,!1)})),Ct(a,(d=>G(g,d)),(()=>e(g))),s(h,a)},$$slots:{header:!0}}),ue()}const qt={PENDING_MEMORY:{SINGULAR:"Pending Memory",PLURAL:"Pending Memories"},MEMORY_CREATED:{SINGULAR:"Memory Created",PLURAL:"Memories Created"},FILE_CHANGED:{SINGULAR:"File Changed",PLURAL:"Files Changed"},FILE_EXAMINED:{SINGULAR:"File Examined",PLURAL:"Files Examined"},TOOL_USED:{SINGULAR:"Tool Used",PLURAL:"Tools Used"},CREDITS_CONSUMED:{SINGULAR:"Credit",PLURAL:"Credits"},FILE_INDEXED:{SINGULAR:"File Indexed",PLURAL:"Files Indexed"},SECOND:{SINGULAR:"Second",PLURAL:"Seconds"}};function Yp(n,t){de(t,!0);const o=()=>he(a,"$enableMemoryRetrieval",i),[i,g]=Se(),_=Et("enableCreditsConsumedInTurnSummary"),c=Un(),p=os.getFromContext(),{availableTabs:A}=p,h=st(),a=Et("enableMemoryRetrieval"),U=En,S=kt(),w=r((()=>Fr(he(S,"$currentConversationId",i),t.requestId)));let d=r((()=>he(A,"$availableTabs",i).includes(Ds.agentEdits))),l=r((()=>{const x=il(he(e(w),"$exchangesGroup",i))||[],R=[],L=[];let M=0,I=0;for(const m of x)o()&&sl(m)&&M++,m.type===Vt.TOOL_USE&&I++,rl(m)&&R.push(m),ol(m)&&L.push(m);const $=(function(m){const E=new Map;for(const C of m)if(C.type===Vt.BILLING_METADATA&&C.billing_metadata){const{transaction_id:N,credits_consumed:O}=C.billing_metadata;N&&typeof O=="number"&&E.set(N,O)}return Array.from(E.values()).reduce(((C,N)=>C+(typeof N=="number"?N:0)),0)})(x);return{conversationMemoryCount:M,conversationToolUseCount:I,conversationStrReplaceFiles:Zo(R),conversationViewFiles:Zo(L),conversationCreditsConsumed:$}}));const u=r((()=>[...he(_,"$enableCreditsConsumedInTurnSummary",i)?[{singularLabel:qt.CREDITS_CONSUMED.SINGULAR,pluralLabel:qt.CREDITS_CONSUMED.PLURAL,value:e(l).conversationCreditsConsumed,icon:"coins"}]:[],...o()?[{singularLabel:qt.PENDING_MEMORY.SINGULAR,pluralLabel:qt.PENDING_MEMORY.PLURAL,value:he(c,"$memories",i).length,icon:"archive",callback:()=>{o()&&h(U(Cn.memories))}},{singularLabel:qt.MEMORY_CREATED.SINGULAR,pluralLabel:qt.MEMORY_CREATED.PLURAL,value:e(l).conversationMemoryCount,icon:"archive"}]:[],{singularLabel:qt.FILE_CHANGED.SINGULAR,pluralLabel:qt.FILE_CHANGED.PLURAL,value:e(l).conversationStrReplaceFiles,icon:"file-diff",callback:e(d)?()=>{e(d)&&p.setActiveTab(Ds.agentEdits)}:void 0},{singularLabel:qt.FILE_EXAMINED.SINGULAR,pluralLabel:qt.FILE_EXAMINED.PLURAL,value:e(l).conversationViewFiles,icon:"file-search-2"},{singularLabel:qt.TOOL_USED.SINGULAR,pluralLabel:qt.TOOL_USED.PLURAL,value:e(l).conversationToolUseCount,icon:"wrench"}])),f=r((()=>e(u).some((x=>x.value>0))));var v=j(),k=D(v),b=x=>{Jp(x,{get entries(){return e(u)}})};z(k,(x=>{e(f)&&x(b)})),s(n,v),ue(),g()}function _r(n){return[Ke.strReplaceEditor,Ke.editFile].includes(n.tool_name)}var Xp=T('<div class="l-tooluse-list svelte-t0psfi"></div>'),Qp=T('<div><div class="l-tooluse-list__container svelte-t0psfi"><div class="l-tooluse-list__container__left svelte-t0psfi"><!> <!></div> <div class="l-tooluse-list__container__right svelte-t0psfi"><!> <!></div></div></div>'),Zp=T('<div class="l-tooluse-list svelte-t0psfi"></div>');function eg(n,t){de(t,!0);const o=()=>he(c(),"$remoteAgentsModel",g),i=()=>he(e(S),"$displayableToolUseNodes",g),[g,_]=Se();let c=B(t,"remoteAgentsModel",19,(()=>{})),p=B(t,"turnIndex",3,0),A=B(t,"postToolUseMessagesByToolId",19,(()=>({})));const h=st(),{store:a}=so(),U=$t(),S=r((()=>o()?.isActive?Qt(Or(t.requestId,t.toolUseNodes,c())):Dr(t.conversationId,t.requestId)));function w(m,E,C){h(Mr(t.conversationId,m,E.tool_use_id,C))}function d(m,E){h(Rr(m,E))}function l(m,E){h(Nr(m,E))}function u(m,E){return zr.select(a.getState(),m,E)}let f=le(!1),v=le(0),k=le(0),b=le(!1);const x=r((()=>t.toolUseNodes.filter((m=>m.tool_use!==void 0&&_r(m.tool_use))))),R=r((()=>e(x).every((m=>{const E=m.tool_use,C=m.requestId??t.requestId;return(o()?.isActive?o().getToolUseState(E.tool_use_id):u(C,E.tool_use_id)).phase===ge.completed}))));Te((()=>{e(R)&&e(f)&&!e(b)&&(async function(){if(e(b)||!e(f))return;let m=0,E=0;const C=t.toolUseNodes.filter((N=>{if(!N.tool_use||!_r(N.tool_use))return!1;const O=N.tool_use,P=N.requestId??t.requestId;return(o()?.isActive?o().getToolUseState(O.tool_use_id):u(P,O.tool_use_id)).phase===ge.completed}));for(const N of C)try{const O=N.requestId??t.requestId,P=await U.getAgentEditChangesByRequestId(O);if(P&&P.length>0)for(const W of P)m+=W.totalAddedLines??0,E+=W.totalRemovedLines??0}catch(O){console.warn("Failed to load changes for tool use:",N.tool_use?.tool_use_id,O)}G(v,m,!0),G(k,E,!0),G(b,!0)})()}));const L=r((()=>i().filter((m=>!!m.tool_use))));var M=j(),I=D(M),$=m=>{var E=j(),C=D(E),N=P=>{var W=Xp();Ce(W,21,(()=>e(L)),(q=>q.tool_use.tool_use_id),((q,Y)=>{{let V=r((()=>e(Y).requestId??t.requestId)),te=r((()=>A()[e(Y).tool_use.tool_use_id]??[]));To(q,{get toolUse(){return e(Y).tool_use},get isLastTurn(){return t.isLastTurn},get requestId(){return e(V)},onToolRun:w,onToolCancel:d,onToolSkip:l,get turnIndex(){return p()},get postToolUseMessages(){return e(te)}})}})),s(P,W)},O=P=>{ro(P,{stickyHeader:!1,stickyHeaderTop:0,header:q=>{var Y=Qp(),V=y(Y),te=y(V),K=y(te);Hs(K,{color:"neutral",size:1,variant:"soft",children:(oe,ae)=>{var ie=J();H((()=>se(ie,t.toolUseNodes.length))),s(oe,ie)},$$slots:{default:!0}});var X=F(K,2);re(X,{size:1,weight:"medium",color:"secondary",children:(oe,ae)=>{var ie=J("Tools used");s(oe,ie)},$$slots:{default:!0}});var ee=F(te,2),Q=y(ee);Gr(Q,{get totalAddedLines(){return e(v)},get totalRemovedLines(){return e(k)}});var Z=F(Q,2);Gn(Z,{}),Nt(V,((oe,ae)=>ns?.(oe,ae)),(()=>({onVisible:()=>G(f,!0),scrollTarget:document.body}))),s(q,Y)},children:(q,Y)=>{var V=Zp();Ce(V,21,(()=>e(L)),(te=>te.tool_use?.tool_use_id),((te,K)=>{{let X=r((()=>e(K).requestId??t.requestId)),ee=r((()=>A()[e(K).tool_use.tool_use_id]??[]));To(te,{get toolUse(){return e(K).tool_use},get isLastTurn(){return t.isLastTurn},get requestId(){return e(X)},onToolRun:w,onToolCancel:d,onToolSkip:l,get turnIndex(){return p()},isGroupListItem:!0,get postToolUseMessages(){return e(ee)}})}})),s(q,V)},$$slots:{header:!0,default:!0}})};z(C,(P=>{i().length===1?P(N):P(O,!1)})),s(m,E)};z(I,(m=>{i()?.length&&m($)})),s(n,M),ue(),_()}var tg=T('<div class="c-aug-msg__hook-messages c-aug-msg__hook-messages--pre svelte-18c6goi"></div>'),sg=T('<div class="c-aug-msg__hook-messages c-aug-msg__hook-messages--stop svelte-18c6goi"></div>'),og=T("<!> <!> <!> <!> <!>",1),rg=T('<div class="c-aug-msg__suggestions svelte-18c6goi"><!></div>'),ag=T('<div class="c-aug-msg__feedback svelte-18c6goi"><!></div>'),ng=T('<div class="l-turn-summary-container svelte-18c6goi"><!></div> <div class="c-aug-msg__actions-row svelte-18c6goi"><!></div> <!>',1),lg=T('<div class="c-aug-msg__footer hidden-when-empty svelte-18c6goi"><!> <!></div>'),ig=T("<div><!></div>");function Xg(n,t){de(t,!0);const o=()=>he(e(u),"$isLastTurn",g),i=()=>he(d,"$currentConversationId",g),[g,_]=Se();let c=B(t,"turn",19,(()=>{})),p=B(t,"requestId",19,(()=>{})),A=B(t,"turnIndex",3,0),h=B(t,"showFooter",3,!0);const a=Ze(as.key),U=Et("showThinkingSummary"),S=Et("enableGroupedTools"),w=Et("canvasExtensionFeatureEnable"),d=kt(),l=An(d),u=r((()=>t.isLastTurn?Qt(t.isLastTurn):Ln(d,p()))),{store:f}=so(),v=$t(),k=r((()=>he(a,"$remoteAgentsModel",g)?.isActive?Cs.remoteAgent:he(l,"$isAgentic",g)?Cs.agent:Cs.chat));let b=r((()=>Na(c())));const x=r((()=>p()?zn(p()):Qt([]))),R=r((()=>p()?Nn(p()):Qt([]))),L=r((()=>p()?Rn(p()):Qt({}))),M=r((()=>he(e(x),"$hookMessagesStore",g))),I=r((()=>he(e(R),"$stopHookMessagesStore",g))),$=r((()=>he(e(L),"$postToolUseMessagesStore",g))),m=Ft(p()||"");Te((()=>{p()&&p()!==he(m,"$requestIdStore",g)&&m.set(p())})),Ot("requestId",m);const E=Ft(c()?.status);Te((()=>{c()&&c().status!==he(E,"$requestStatusStore",g)&&E.set(c().status)})),Ot("requestStatus",E);let C=le(!1),N=r((()=>{let P=[];return P=c()&&c().status!==Zt.sent&&p()&&o()&&c().structured_output_nodes&&c().structured_output_nodes.length>0?c().structured_output_nodes.find((W=>W.type===Vt.SUGGESTED_QUESTIONS))?.content.split(`
`)??[]:[],P}));Te((()=>{e(N).length>0&&!e(C)&&(G(C,!0),v.reportWebviewClientEvent(Gt.chatDisplaySuggestedQuestions))}));var O=ig();{const P=q=>{var Y=og(),V=D(Y),te=ne=>{const ce=r((()=>c().structured_output_nodes.filter((pe=>pe.type===Vt.THINKING&&pe.thinking?.summary))));(function(pe,fe){de(fe,!0);var _e=j(),me=D(_e),ke=ye=>{var we=bi();Ce(we,21,(()=>fe.nodes),($e=>$e.id),(($e,Ie)=>{var Ue=j(),Je=D(Ue),be=Ee=>{const He=r((()=>(function(Pe,Ye=30){if(!Pe)return{title:"",summary:""};const ot=Pe.match(/^\s*(\*\*|__)(.+?)\1\s*\n?/);if(ot)return{title:ot[2].trim(),summary:Pe.slice(ot[0].length).trimStart()};const bt=Pe.trimStart();return{title:bt.length>Ye?bt.slice(0,Ye)+"...":bt,summary:Pe}})(e(Ie).thinking?.summary))),Be=r((()=>e(He).summary.trim().length>0));var Ae=$i();const ze=Pe=>{var Ye=fi(),ot=D(Ye),bt=je=>{var it=hi(),yt=y(it);H((()=>se(yt,e(He).title))),s(je,it)},At=je=>{var it=mi();s(je,it)};z(ot,(je=>{e(He).title?je(bt):je(At,!1)}));var Lt=F(ot,2),rt=je=>{ve(je,{name:"chevron-right",class:"c-thinking__chevron"})};z(Lt,(je=>{e(Be)&&je(rt)})),s(Pe,Ye)};var Fe=y(Ae),lt=Pe=>{var Ye=_i(),ot=y(Ye),bt=y(ot);ze(bt);var At=F(ot,2),Lt=y(At),rt=y(Lt);ln(rt,{orientation:"vertical",size:4});var je=F(Lt,2),it=y(je);{let yt=r((()=>({code:Ls,codespan:zs,link:Ns})));ws(it,{get renderers(){return e(yt)},get markdown(){return e(He).summary}})}s(Pe,Ye)},dt=Pe=>{var Ye=ki(),ot=y(Ye);ze(ot),s(Pe,Ye)};z(Fe,(Pe=>{e(Be)?Pe(lt):Pe(dt,!1)})),s(Ee,Ae)};z(Je,(Ee=>{e(Ie).thinking?.summary&&Ee(be)})),s($e,Ue)})),s(ye,we)};z(me,(ye=>{fe.nodes.length>0&&ye(ke)})),s(pe,_e),ue()})(ne,{get nodes(){return e(ce)}})};z(V,(ne=>{c()&&p()&&c().structured_output_nodes&&he(U,"$showThinkingSummary",g)&&ne(te)}));var K=F(V,2),X=ne=>{var ce=tg();Ce(ce,21,(()=>e(M)),_t,((pe,fe)=>{{let _e=r((()=>({code:Ls,codespan:zs,link:Ns})));ws(pe,{get renderers(){return e(_e)},get markdown(){return e(fe)}})}})),s(ne,ce)};z(K,(ne=>{e(M)&&e(M).length>0&&ne(X)}));var ee=F(K,2),Q=ne=>{{let ce=r((()=>({code:Ls,codespan:zs,link:Ns,...he(w,"$canvasExtensionFeatureEnabled",g)?{image:gi}:{}})));ws(ne,{get renderers(){return e(ce)},get markdown(){return t.markdown}})}};z(ee,(ne=>{t.markdown.trim().length>0&&ne(Q)}));var Z=F(ee,2),oe=ne=>{const ce=r((()=>c().structured_output_nodes.filter((me=>me.type===Vt.TOOL_USE))));var pe=j(),fe=D(pe),_e=me=>{var ke=j(),ye=D(ke),we=Ie=>{{let Ue=r((()=>e($)??{}));eg(Ie,{get requestId(){return p()},get remoteAgentsModel(){return a},get conversationId(){return i()},get toolUseNodes(){return e(ce)},get isLastTurn(){return o()},get turnIndex(){return A()},get postToolUseMessagesByToolId(){return e(Ue)}})}},$e=Ie=>{{let Ue=r((()=>e($)??{}));_p(Ie,{get requestId(){return p()},get remoteAgentsModel(){return a},get conversationId(){return i()},get toolUseNodes(){return e(ce)},get isLastTurn(){return o()},get turnIndex(){return A()},get postToolUseMessagesByToolId(){return e(Ue)}})}};z(ye,(Ie=>{he(S,"$enableGroupedTools",g)?Ie(we):Ie($e,!1)})),s(me,ke)};z(fe,(me=>{e(ce).length>0&&me(_e)})),s(ne,pe)};z(Z,(ne=>{i()&&e(k)!==Cs.chat&&c()&&p()&&c().structured_output_nodes&&ne(oe)}));var ae=F(Z,2),ie=ne=>{var ce=sg();Ce(ce,21,(()=>e(I)),_t,((pe,fe)=>{{let _e=r((()=>({code:Ls,codespan:zs,link:Ns})));ws(pe,{get renderers(){return e(_e)},get markdown(){return e(fe)}})}})),s(ne,ce)};z(ae,(ne=>{e(I)&&e(I).length>0&&ne(ie)})),s(q,Y)},W=q=>{var Y=lg(),V=y(Y),te=ee=>{var Q=rg(),Z=y(Q);{let oe=r((()=>({questionsLoaded:!0,questions:e(N),status:c().status,request_message:c().request_message,request_id:c().request_id,chatItemType:Ra.summaryResponse})));Ni(Z,{get conversationId(){return i()},get turn(){return e(oe)},showIntroText:!1})}s(ee,Q)};z(V,(ee=>{i()&&c()&&e(N).length>0&&ee(te)}));var K=F(V,2),X=ee=>{var Q=ng(),Z=D(Q),oe=y(Z);{let fe=r((()=>c()?.request_id));Yp(oe,{get requestId(){return e(fe)}})}var ae=F(Z,2),ie=y(ae),ne=fe=>{var _e=ag();Ai(y(_e),{get requestId(){return p()},getResponseText:()=>{const me=f.getState(),ke=t.group?t.group.map((({turn:ye})=>ye)):Fr.select(me,i(),p());return ll(ke)},get chatMode(){return e(k)}}),Bt(3,_e,(()=>Eo),(()=>({duration:200}))),s(fe,_e)},ce=fe=>{Dp(fe,{get turn(){return c()},get isLastTurn(){return o()}})};z(ie,(fe=>{c()&&i()&&[Zt.success,Zt.failed,Zt.cancelled].includes(c().status)&&p()?fe(ne):fe(ce,!1)}));var pe=F(ae,2);z(pe,(fe=>{})),s(ee,Q)};z(K,(ee=>{h()&&e(b)&&ee(X)})),s(q,Y)};Np(y(O),{isAugment:!0,content:P,footer:W,$$slots:{content:!0,footer:!0}})}s(n,O),ue(),_()}export{Xg as A,qt as B,Ds as C,Ep as D,Gr as E,Ai as F,jr as G,qg as H,Yg as I,Jg as J,Ns as L,uc as M,bo as R,qe as S,er as T,yo as a,ho as b,os as c,Pg as d,ao as e,No as f,Gg as g,Wg as h,gl as i,Bg as j,jg as k,Qs as l,Xr as m,yp as n,Np as o,ds as p,Jp as q,Ni as r,Vg as s,Tl as t,da as u,ns as v,Wr as w,Kg as x,Hg as y,Xt as z};
//# sourceMappingURL=AugmentMessage-DdGCJFWr.js.map
