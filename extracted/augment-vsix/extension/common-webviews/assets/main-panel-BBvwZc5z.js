const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RemoteAgentThreadTitle-Dap5uKV9.js","./debounce-BNOmQ76Y.js","./debounce-gEfD9N47.css","./OpenFileButton-gT822Pcb.js","./index-Dqp5W2S2.js","./message-broker-DUQuEFlt.js","./extension-client-context-CN64fWtK.js","./index-C6s5m6Q5.js","./file-type-utils-CHwkiE7w.js","./IconButtonAugment-DO0xxfgT.js","./Icon-CohttyM7.js","./Icon-G8pV5hDU.css","./IconButtonAugment-Bl2UDpj9.css","./TextTooltipAugment-CGvqFHAr.js","./TextTooltipAugment-BrStpLh1.css","./file-type-utils-CiHxamUn.css","./_commonjsHelpers-CwkBNZ52.js","./types-M1pd3FSp.js","./types-C7x8CSUc.css","./await-B0-dHWqK.js","./SimpleMonaco-BBDXOnfl.js","./SimpleMonaco-C0nJVisN.css","./legacy-2-VBD5Kq.js","./lifecycle-CWu4CNTE.js","./Chevron-DgXCK6y3.js","./Chevron-BvwCR8GX.css","./input-rvYD24wa.js","./BaseTextInput-D02l0mHz.js","./BaseTextInput-DRN2HXtk.css","./extension-client-context-Dj7vR6Ei.css","./remote-agents-client-DkZKHKJj.js","./SuccessfulButton-BTRD1tJd.js","./ButtonAugment-BCcs6kST.js","./ButtonAugment-iVcKiwhY.css","./SuccessfulButton-BDZRP7A9.css","./OpenFileButton-Dz9EvsKp.css","./design-system-init-DYAh9Pko.js","./design-system-init-BibngO5H.css","./index-Ba8SPQX6.js","./index-BcYmouan.js","./index-Dt79ugWJ.js","./index-BfCo9mu2.css","./RemoteAgentStatusIndicator-gpVGge6K.js","./utils-C8k4ijpS.js","./RemoteAgentStatusIndicator-wc-ehh4U.css","./AugmentMessage-DdGCJFWr.js","./index-DJ8YNXIh.js","./Markdown-9Uvf-DZ6.js","./toggleHighContrast-nRmgfX6B.js","./toggleHighContrast-C5ZQUaPo.css","./Markdown-cZ8KU4Mk.css","./noop-CVINQ7cR.js","./Filespan-FcScXFRk.js","./LanguageIcon-BFxv44vU.js","./LanguageIcon-6rdAPCNm.css","./Filespan-DUaXIvng.css","./mermaid-BF5da6U1.js","./CopyButton-DWjSvbZb.js","./CopyButton-C3YgGx7o.css","./CollapseButtonAugment-D7C6pQtq.js","./CollapseButtonAugment-CNgvQjXU.css","./keypress-fD7XHdyk.js","./AugmentMessage-C1UumbaH.css","./CalloutAugment-BTDUhyqD.js","./CalloutAugment-VvLaGQMh.css","./shared-app-state-Cv5sumpT.js","./shared-app-state-BGYlKK18.css","./shared-webview-store-model-CL3-OUxX.js","./ra-diff-ops-model-BShDGWD3.js","./Keybindings-SM11jtx_.js","./TextCombo-CIszZzGN.js","./TextCombo-Dxv2hqZN.css","./Keybindings-Bev7Io0D.css","./IconFilePath-BzwPVm4g.js","./next-edit-types-B8NR3rVy.js","./IconFilePath-C0VZBFTj.css","./GitAgentEditTab-BKezyaYi.js","./GitAgentEditTab-DNQY3qU8.css","./GitAgentEditTabContent-CHICxg86.js","./GitAgentEditTabContent-sGTQGzvQ.css","./RemoteMessageSection-BUoObpWa.js","./diff-operations-Z7nGHKvy.js","./RepoBadge-DNGwkTuQ.js","./RepoBadge-DzN41so8.css","./RemoteMessageSection-CcniEv0I.css"])))=>i.map(i=>d[i]);
import{aX as nc,br as sc,bs as rc,ah as At,ad as It,W as jt,w as Xt,D as Ce,E as H,K as h,o as t,G as d,P as _,Q as f,Y as ae,a1 as ge,a2 as qe,R as s,O as k,H as Ee,Z as be,a7 as es,M as Os,a4 as ct,a8 as $n,F as Tt,S as P,T as b,_ as Dt,$ as Te,a0 as Z,J as G,I as Xe,a3 as Pt,a5 as Dn,k as ot,ae as Jt,av as Ft,aw as fn,y as Cn,L as xr,V as et,X as pt,az as gn,ag as nt,aH as Ga,aI as vn,aC as Rn,a6 as ls,aA as Un,bt as oc,ao as ac,aR as Fs,b3 as ic,aO as ps,aN as lc,aQ as cc,ai as an,ba as dc,bb as uc,aD as Ua,b7 as Bo,bc as vc,b0 as gc,b1 as yr,b2 as hc,l as xs,af as mc,be as pc,bu as as,ax as fc}from"./debounce-BNOmQ76Y.js";import"./design-system-init-DYAh9Pko.js";import"./legacy-2-VBD5Kq.js";import{M as Va}from"./index-Ba8SPQX6.js";import{bJ as os,cZ as is,c_ as ja,c$ as go,d0 as As,d1 as Cs,d2 as Fo,U as lt,V as tt,d3 as ho,ct as br,D as je,d4 as ir,b as ut,i as Ct,d5 as Ka,d6 as mo,d7 as _c,d8 as yc,d9 as bc,da as $c,db as Rr,dc as Ya,dd as Xa,cq as wc,T as Ja,de as $r,c0 as Qa,Z as Zs,df as Za,dg as qs,dh as kc,z as Mr,H as wr,x as Ac,$ as Dr,v as rs,k as Cc,q as ln,di as Ec,dj as qr,dk as Tc,dl as lr,g as Ic,dm as Sc,dn as no,dp as xc,dq as Rc,dr as Mc,ds as Dc,dt as ei,du as zc,dv as qo,dw as Nc,dx as Oc,dy as Lc,dz as Pc,n as Nn,y as jn,dA as Bc,dB as Fc,a as Fn,dC as qc,o as vs,dD as Hc,dE as so,dF as Wc,dG as Gc,dH as Uc,dI as Vc,dJ as jc,dK as Kc,ch as Yc,ci as ti,dL as Xc,dM as Jc,c5 as Hr,dN as Qc,cf as Zc,dO as ed,e as td,dP as nd,dQ as Ys,dR as sd,dS as ni,dT as rd,dU as od,ba as ad,dV as si,dW as id,aC as ld,ay as cd,aD as dd,az as ud,aA as vd,aB as Wr,dX as Ho,aE as gd,dY as Wo,c as hd,aJ as md,dZ as pd,d_ as fd,aI as _d,d$ as yd,e0 as bd,e1 as $d,aN as wd,e2 as ri,e3 as po,e4 as kd,e5 as Ad,a7 as Cd,e6 as Ed,e7 as Td,e8 as Id,e9 as Sd,ea as hr,eb as Go,ec as oi,L as Rs,ed as Uo,O as xd,P as ts,ee as ai,ef as fo,eg as Rd,eh as Md,B as _o,h as ii,ei as li,ej as Dd,ek as Vo,el as jo,em as ci,en as di,eo as zd,ep as ui,eq as Nd,ae as vi,er as Od,es as Ld,et as Pd,eu as gi,ev as Bd,cQ as Fd,ew as hi,bE as yo,ex as Ko,ey as qd,ez as mi,eA as pi,eB as Hd,eC as fi,eD as kr,eE as Wd,eF as Gd,eG as _i,cP as Gr,eH as Yo,eI as Xo,eJ as Ud,eK as yi,eL as Vd,eM as jd,eN as Kd,eO as bi,eP as Yd,eQ as Xd,eR as Jd,eS as Qd,eT as Zd,eU as eu,eV as tu,E as er,bF as $i,eW as wi,b9 as bs,eX as nu,eY as su,eZ as ru,e_ as ou,e$ as au,f0 as iu,f1 as lu,ac as cu,aa as du,a2 as uu,a9 as Yn,f2 as vu,f3 as gu,f4 as hu,I as ro,J as Ar,f5 as Jo,K as mu,f6 as pu,t as fu,X as _u,f7 as yu,Y as bu,f8 as $u,f9 as ki,fa as wu,fb as ku,fc as Au,fd as Ai,fe as Cu,c2 as Eu,cR as Tu,ff as Iu,fg as Ur,fh as Su,fi as xu,cn as Xs,fj as Ru,fk as Ci,fl as Ei,fm as Mu,fn as Du,fo as zu,fp as Nu,fq as Ou,fr as Qo,fs as Lu,ft as Pu,fu as Bu,fv as Fu,fw as qu,fx as Hu,fy as Wu,bT as Gu,fz as Uu,bU as Vu,fA as ju,fB as Zo,fC as oo,cT as Qn,fD as In,fE as Ku,bX as Yu,fF as Xu,fG as Ju,fH as Ti,fI as Qu,fJ as Zu,w as Ii,d as ev,fK as tv,fL as nv,fM as sv,fN as rv,fO as ov,u as Si,fP as av,fQ as iv,fR as lv,fS as cv,cS as ea,fT as dv,F as uv,S as vv}from"./extension-client-context-CN64fWtK.js";import{I as St,a as kn,B as gv}from"./IconButtonAugment-DO0xxfgT.js";import{_ as Ms,t as Js,S as hv}from"./SimpleMonaco-BBDXOnfl.js";import{a as Ds}from"./await-B0-dHWqK.js";import{d as ao,O as xi,s as Cr,c as zs}from"./index-BcYmouan.js";import{b as gs,A as Pn,S as Er,E as An,i as tr,h as ta,e as bo,f as $o,g as Ri,j as Tr,k as mv,l as Mi,m as pv,n as Di,M as nr,o as fv}from"./message-broker-DUQuEFlt.js";import{g as _v,b as yv,c as bv,R as $v,d as wv,S as zi,v as kv,a as Av}from"./RemoteAgentStatusIndicator-gpVGge6K.js";import{R as un,a as Ni}from"./OpenFileButton-gT822Pcb.js";import{d as Oi,R as on,a as _n,E as wo,c as sr,C as mn,g as Cv,T as Ev,e as na,t as ko,f as Tv,s as Iv,h as Sv,i as xv,j as Rv,k as Mv,l as Dv,m as zv,w as Li,n as sa,o as zr,M as Nv,A as Pi,p as Ov,L as Lv,q as Pv,B as cr,r as Bv,F as Fv,u as qv,v as Hv,x as Bi,y as Nr,z as Vr,D as Wv,G as Gv,H as Uv,I as Vv}from"./AugmentMessage-DdGCJFWr.js";import{I as Se,T as Fe,S as Vn,d as Fi,b as jv}from"./Icon-CohttyM7.js";import{T as at,a as nn,H as Kv,o as Yv,b as jr,C as qi,t as Xv}from"./TextTooltipAugment-CGvqFHAr.js";import{B as Et}from"./ButtonAugment-BCcs6kST.js";import{C as hs}from"./CalloutAugment-BTDUhyqD.js";import{k as fs,b as Jv,g as Qv,C as Hi,a as Zv}from"./CollapseButtonAugment-D7C6pQtq.js";import{B as Mn}from"./types-M1pd3FSp.js";import"./Chevron-DgXCK6y3.js";import"./BaseTextInput-D02l0mHz.js";import{P as cs,s as eg,N as io,C as Wi,a as tg,w as lo,E as ng,S as sg,e as ra,f as oa,h as rg,c as og,H as ag,b as ig,d as Hn,m as lg,j as cg,k as Gi,v as dg,l as ug}from"./shared-app-state-Cv5sumpT.js";import{R as mr,a as Gn,b as $s}from"./index-Dqp5W2S2.js";import{e as vg,f as gg,h as hg}from"./utils-C8k4ijpS.js";import{t as Zt,a as ns,s as Ao,b as ms,f as aa}from"./index-DJ8YNXIh.js";import{S as Ui}from"./shared-webview-store-model-CL3-OUxX.js";import{R as ia}from"./ra-diff-ops-model-BShDGWD3.js";import{b as la,a as mg}from"./input-rvYD24wa.js";import{F as pr}from"./Filespan-FcScXFRk.js";import{n as Ps}from"./noop-CVINQ7cR.js";import{i as Kn}from"./lifecycle-CWu4CNTE.js";import{T as pg}from"./CopyButton-DWjSvbZb.js";import"./toggleHighContrast-nRmgfX6B.js";import{M as fg,C as _g,a as yg}from"./Markdown-9Uvf-DZ6.js";import{e as bg}from"./LanguageIcon-BFxv44vU.js";import"./mermaid-BF5da6U1.js";import"./SuccessfulButton-BTRD1tJd.js";import{C as Kr,b as $g,c as wg,d as kg,e as rr,K as Ag,A as Co,P as Eo,R as ds,n as Cg,g as ca,a as Eg,f as Vi}from"./Keybindings-SM11jtx_.js";import{s as ji,d as To}from"./index-C6s5m6Q5.js";import{g as Ki,a as da,t as Tg,e as Ig}from"./file-type-utils-CHwkiE7w.js";import{I as Sg}from"./IconFilePath-BzwPVm4g.js";import{o as xg}from"./keypress-fD7XHdyk.js";import{T as Yi}from"./TextCombo-CIszZzGN.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./index-Dt79ugWJ.js";import"./remote-agents-client-DkZKHKJj.js";import"./next-edit-types-B8NR3rVy.js";try{_s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Po=new _s.Error().stack)&&(_s._sentryDebugIds=_s._sentryDebugIds||{},_s._sentryDebugIds[Po]="1e84256e-2572-44d3-bab4-bc19a5a424d8",_s._sentryDebugIdIdentifier="sentry-dbid-1e84256e-2572-44d3-bab4-bc19a5a424d8")}catch{}var _s,Po;const Rg=[];function co(o,e=!1,n=!1){return fr(o,new Map,"",Rg,null,n)}function fr(o,e,n,r,a=null,i=!1){if(typeof o=="object"&&o!==null){var l=e.get(o);if(l!==void 0)return l;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(nc(o)){var c=Array(o.length);e.set(o,c),a!==null&&e.set(a,c);for(var u=0;u<o.length;u+=1){var g=o[u];u in o&&(c[u]=fr(g,e,n,r,null,i))}return c}if(sc(o)===rc){for(var p in c={},e.set(o,c),a!==null&&e.set(a,c),o)c[p]=fr(o[p],e,n,r,null,i);return c}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function"&&!i)return fr(o.toJSON(),e,n,r,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Xi(o,e,n,r,a){var i=e.$$slots?.[n],l=!1;i===!0&&(i=e.children,l=!0),i===void 0||i(o,l?()=>r:r)}const Mg=os((o=>o.mainPanel.visibleApp)),_r={chat:{icon:"message-square",type:"chat",primaryText:"Chat",bannerText:"Running locally"},localAgent:{icon:"wand-sparkles",type:"localAgent",primaryText:"Agent",bannerText:"Running locally"},remoteAgent:{icon:"cloud-upload",type:"remoteAgent",primaryText:"Remote Agent",bannerText:"Running in the cloud"}};function Io(o){return o==="remoteAgent"?_r.remoteAgent:o==="chat"?_r.chat:_r.localAgent}const Or=(o,e)=>({chatMode:o,agentExecution:e}),Dg=Or(gs.chat),ua=Or(gs.agent,is.manual),va=Or(gs.agent,is.auto),zg=Or(gs.remoteAgent);class us{constructor(e,n,r){this._reduxStore=e,this._remoteAgentsModel=n,this._config=r,this._chatModeType=At([this.isAgentic,this._remoteAgentsModel],(([a,i])=>{const l=(function(c,u){return u?.isActive?"remoteAgent":c?"localAgent":"chat"})(a,i);return Io(l).type})),this._remoteAgentsModel.subscribe((a=>{a.isRemoteAgentSshWindow===this._prevRemoteAgentWindowOpts.isRemoteAgentSshWindow&&a.remoteAgentSshWindowId===this._prevRemoteAgentWindowOpts.remoteAgentId||(this._prevRemoteAgentWindowOpts={remoteAgentId:a.remoteAgentSshWindowId,isRemoteAgentSshWindow:a.isRemoteAgentSshWindow},this.handleisRemoteAgentSshWindow(a))}))}static key="chatModeModel";_prevRemoteAgentWindowOpts={remoteAgentId:void 0,isRemoteAgentSshWindow:!1};_chatModeType;get isAgentic(){return ja.withStore(this._reduxStore)()}get agentExecutionMode(){return go.withStore(this._reduxStore)()}handleisRemoteAgentSshWindow(e){e.isRemoteAgentSshWindow&&this.setToRemoteAgent(e.remoteAgentSshWindowId)}getCurrentModeSelectorMode(){const e=It(this.isAgentic);return this._remoteAgentsModel.isActive?As.remoteAgent:e?As.agent:As.chat}async reportModeSelectorEvent(e,n){try{const r=n||this.getCurrentModeSelectorMode();this._config.enableBackgroundAgents&&await this._remoteAgentsModel.reportChatModeEvent(e,r)}catch(r){console.error("Failed to report chat mode event:",r)}}reportModeSelectorOpen(){this.reportModeSelectorEvent(Cs.open)}reportModeSelectorClose(){this.reportModeSelectorEvent(Cs.close)}reportModeSelectorInit(){this.reportModeSelectorEvent(Cs.init)}async toggleChatAgentAutoMode(e){if(!this.isInAgentState())return;const n=It(this.agentExecutionMode)===is.auto?is.manual:is.auto;this._reduxStore.dispatch(Fo(n)),this._reduxStore.dispatch(lt(tt.WEBVIEW.AGENT_EXECUTION_MODE_TOGGLED,{source:e,newMode:n}))}isInAgentState(){const e=this.getCurrentModeState();return e===va||e===ua}getCurrentModeState(){const e=It(this.isAgentic),n=It(this.agentExecutionMode);return this._remoteAgentsModel.isActive?zg:e&&n===is.auto?va:e&&n===is.manual?ua:Dg}get isRemoteAgentSshWindow(){return this._remoteAgentsModel.isRemoteAgentSshWindow}get remoteAgentSshWindowId(){return this._remoteAgentsModel.remoteAgentSshWindowId}get isRemoteAgentActive(){return this._remoteAgentsModel.isActive}async setToLocal(e){this.isRemoteAgentSshWindow||(this._remoteAgentsModel.setIsActive(!1),e&&this._reduxStore.dispatch(Fo(e)))}async setToRemoteAgent(e){if(this.isRemoteAgentSshWindow&&(e&&this.remoteAgentSshWindowId&&e!==this.remoteAgentSshWindowId&&(e=this.remoteAgentSshWindowId),!e&&this.remoteAgentSshWindowId&&(e=this.remoteAgentSshWindowId)),this._remoteAgentsModel.setIsActive(!0),e)this._remoteAgentsModel.setCurrentAgent(e);else if(e===null)this._remoteAgentsModel.clearCurrentAgent();else if(!this._remoteAgentsModel?.currentAgent){const n=this._remoteAgentsModel.agentOverviews.length>0?this._remoteAgentsModel.agentOverviews[0]:void 0;n&&this._remoteAgentsModel.setCurrentAgent(n.remote_agent_id)}}async createNewThread(e){e==="remoteAgent"&&(this._remoteAgentsModel.setIsActive(!0),this.setToRemoteAgent(null))}findLatestRemoteAgentThread(){if(this._remoteAgentsModel.currentAgent)return this._remoteAgentsModel.currentAgent.remote_agent_id;const e=this._remoteAgentsModel.agentOverviews||[];return e.length>0?e[0].remote_agent_id:void 0}get chatModeType(){return this._chatModeType}async handleSetToThreadType(e,n){if(e!=="remoteAgent")return void console.error("Dont use chat mode model for anything else besides remote agent");if(!this._remoteAgentsModel)return void console.error("No remote agents model found");const r=this.findLatestRemoteAgentThread();r?await this.switchToThread("remoteAgent",r,n):await this.createNewThread("remoteAgent")}switchToThread(e,n,r){return(!this.isRemoteAgentSshWindow||!(e!=="remoteAgent"||this.remoteAgentSshWindowId&&n!==this.remoteAgentSshWindowId))&&(e==="remoteAgent"?ho(n)?this.setToRemoteAgent(null):this.setToRemoteAgent(n):(this._reduxStore.dispatch(br(n,{noopIfSameConversation:!0})),this.setToLocal(r)),!0)}handleMessageFromExtension(e){const n=e.data;return n.type===jt.remoteAgentSelectAgentId&&(this.setToRemoteAgent(n.data.agentId),!0)}}var wn=(o=>(o.Pinned="Pinned",o.Active="Ready for Review",o.Today="Today",o.New="New",o.ThisWeek="Last 7 days",o.ThisMonth="Last 30 days",o.Older="Older",o))(wn||{});const Ng=300,Og=[wn.Active,wn.Pinned,wn.New,wn.Today,wn.ThisWeek,wn.ThisMonth,wn.Older];function Lg(o){return o.sort(((e,n)=>n.sortTimestamp.getTime()-e.sortTimestamp.getTime()))}function ga(o,e,n=Ng){const r=new Map,a=new Date(new Date().setHours(0,0,0,0)),i=[{age:wn.Today,date:a},{age:wn.ThisWeek,date:new Date(a.getTime()-6048e5)},{age:wn.ThisMonth,date:new Date(a.getTime()-2592e6)}];for(const g of o){const p=g.sortTimestamp;let y;y=g.isNew?wn.New:e[g.id]?wn.Pinned:g.type==="remoteAgent"&&g.has_updates?wn.Active:i.find((m=>p>=m.date))?.age||wn.Older,r.set(y,[...r.get(y)||[],g])}const l=Og.map((g=>({groupTitle:g,threads:Lg(r.get(g)||[])}))).filter((g=>g.threads.length>0));let c=0;const u=[];for(const g of l){const p=[];for(const y of g.threads){if(c>=n)break;p.push(y),c++}u.push({groupTitle:g.groupTitle,threads:p})}return u}function Pg(o,e,n){const r=e===o.id?n:void 0;if(r)return r.exchanges.slice(0,20).map((i=>i.exchange.request_message||"")).join(" ");const a=o.agent;return a?[a.session_summary||"",...a.turn_summaries||[]].join(" "):""}function Bg(o){if(!o.agent||!o.agent.workspace_setup?.starting_files?.github_commit_ref)return"";const e=o.agent.workspace_setup.starting_files.github_commit_ref.repository_url;return[e,_v(e),yv(e)].filter(Boolean).join(" ")}const ha=new WeakMap,Fg=o=>o.type==="remoteAgent";class Ir{constructor(e){this._asyncMsgSender=e}static key="gitReferenceModel";_githubTimeoutMs=9e4;_currentRepositoryUrl=Xt(void 0);async listUserRepos(e){try{const n=await this._asyncMsgSender.send({type:jt.listGithubReposForAuthenticatedUserRequest,data:{page:e}},this._githubTimeoutMs);return{repos:n.data.repos,hasNextPage:n.data.hasNextPage,nextPage:n.data.nextPage,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to list user repos:",n),{repos:[],hasNextPage:!1,nextPage:0,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async listRepoBranches(e,n){try{const r=await this._asyncMsgSender.send({type:jt.listGithubRepoBranchesRequest,data:{repo:e,page:n}},this._githubTimeoutMs);return{branches:r.data.branches,hasNextPage:r.data.hasNextPage,nextPage:r.data.nextPage,error:r.data.error,isDevDeploy:r.data.isDevDeploy}}catch(r){return console.error("Failed to list repo branches:",r),{branches:[],hasNextPage:!1,nextPage:0,error:`Error: ${r instanceof Error?r.message:String(r)}`}}}async getGithubRepo(e){try{const n=await this._asyncMsgSender.send({type:jt.getGithubRepoRequest,data:{repo:e}},this._githubTimeoutMs);return{repo:n.data.repo,error:n.data.error,isDevDeploy:n.data.isDevDeploy}}catch(n){return console.error("Failed to get GitHub repo:",n),{repo:e,error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async getCurrentLocalBranch(){try{return(await this._asyncMsgSender.send({type:jt.getCurrentLocalBranchRequest},1e4)).data.branch}catch(e){return void console.error("Failed to get current local branch:",e)}}async listBranches(e=""){try{return{branches:(await this._asyncMsgSender.send({type:jt.getGitBranchesRequest,data:{prefix:e}},1e4)).data.branches}}catch(n){return console.error("Failed to fetch branches:",n),{branches:[]}}}async getWorkspaceDiff(e){try{return(await this._asyncMsgSender.send({type:jt.getWorkspaceDiffRequest,data:{branchName:e}},1e4)).data.diff}catch(n){return console.error("Failed to get workspace diff:",n),""}}get currentRepositoryUrl(){return this._currentRepositoryUrl}async getRemoteUrl(){const e=It(this._currentRepositoryUrl);if(e)return{remoteUrl:e};try{const n=await this._asyncMsgSender.send({type:jt.getRemoteUrlRequest},1e4);return n.data.error?this._currentRepositoryUrl.set(void 0):this._currentRepositoryUrl.set(n.data.remoteUrl),{remoteUrl:n.data.remoteUrl}}catch(n){return console.error("Failed to get remote url:",n),{remoteUrl:"",error:`Error: ${n instanceof Error?n.message:String(n)}`}}}async fetch(){try{await this._asyncMsgSender.send({type:jt.gitFetchRequest},1e4)}catch(e){console.error("Failed to fetch remote branch:",e)}}async isGitRepository(){try{return(await this._asyncMsgSender.send({type:jt.isGitRepositoryRequest},1e4)).data.isGitRepository}catch(e){return console.error("Failed to check if is git repository:",e),!1}}async isGithubAuthenticated(){try{return(await this._asyncMsgSender.send({type:jt.isGithubAuthenticatedRequest},this._githubTimeoutMs)).data.isAuthenticated}catch(e){return console.error("Failed to check GitHub authentication status:",e),!1}}async authenticateGithub(){try{const e=await this._asyncMsgSender.send({type:jt.authenticateGithubRequest},this._githubTimeoutMs);return{success:e.data.success,message:e.data.message,url:e.data.url}}catch(e){return console.error("Failed to authenticate with GitHub:",e),{success:!1,message:`Error: ${e instanceof Error?e.message:String(e)}`}}}async revokeGithubAccess(){try{const e=await this._asyncMsgSender.send({type:jt.revokeGithubAccessRequest},1e4);return{success:e.data.success,message:e.data.message}}catch(e){return console.error("Failed to revoke GitHub access:",e),{success:!1,message:`Error: ${e instanceof Error?e.message:String(e)}`}}}}var qg=h('<div class="c-mode-display__bottom svelte-dxxia1"><!></div>'),Hg=h('<div class="c-mode-display svelte-dxxia1"><div class="c-mode-display__top svelte-dxxia1"><!> <!> <!></div> <!></div>'),Wg=h('<div class="c-mode-display-item svelte-3vmnfj"><!></div>'),Gg=h("<div><!></div>");function Es(o,e){let n=H(e,"description",3,""),r=H(e,"selected",3,!1),a=Os(e,["$$slots","$$events","$$legacy","onSelect","description","chatMode","selected","class"]);var i=Gg();let l;var c=_(i);be(c,(()=>je.Item),((u,g)=>{g(u,es({get onSelect(){return e.onSelect}},(()=>a),{children:(p,y)=>{var m=Wg();(function(v,w){Ce(w,!0);let E=H(w,"description",3,""),A=H(w,"doShowSecondaryText",3,!0),$=d((()=>Io(w.chatMode)));var C=Hg(),L=_(C),S=_(L);Se(S,{get name(){return t($).icon},size:1});var I=f(S,2);Fe(I,{size:1,children:(j,V)=>{var R=ae();ge((()=>qe(R,t($).primaryText))),s(j,R)},$$slots:{default:!0}});var O=f(I,2),D=j=>{Fe(j,{size:1,class:"c-mode-secondary-label",children:(V,R)=>{var x=ae();ge((()=>qe(x,t($).secondaryText))),s(V,x)},$$slots:{default:!0}})};k(O,(j=>{t($).secondaryText&&j(D)}));var z=f(L,2),K=j=>{var V=qg(),R=_(V);Fe(R,{size:0,class:"c-mode-secondary-label",color:"secondary",children:(x,B)=>{var q=ae();ge((()=>qe(q,E()))),s(x,q)},$$slots:{default:!0}}),s(j,V)};k(z,(j=>{E()&&A()&&j(K)})),s(v,C),Ee()})(_(m),{get chatMode(){return e.chatMode},get description(){return n()}}),s(p,m)},$$slots:{default:!0}}))})),ge((()=>l=ct(i,1,$n(["c-mode-display-item-container",e.class]),"svelte-3vmnfj",l,{"c-mode-display-item--selected":r()}))),s(o,i)}function Ji(o){switch(o){case"remoteAgent":return ir.remoteAgent;case"localAgent":return ir.agent;case"chat":return ir.chat;default:return ir.unknown}}const ma="new-thread-button";var Ug=h('<div class="c-new-thread-dropdown__tooltip svelte-7ts7rl">New Thread</div>'),Vg=h('<div class="c-new-thread-dropdown__button-container"><!></div>'),jg=h("<!> <!>",1),Kg=h('<div class="c-new-thread-dropdown__content"><!> <!> <!></div>'),Yg=h("<!> <!>",1);function Xg(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"isDropdownOpen",15,!1),i=H(e,"showLabel",3,!0),l=H(e,"onNewThreadCreated",3,(()=>{}));const c=Tt(un.key),u=Tt(us.key),g=ut(),p=Ct("enableBackgroundAgents"),y=Ct("enableAgentMode");async function m($){$==="remoteAgent"?(await c.reportRemoteAgentNewThreadButtonEvent(Ka.click,Ji($)),u.createNewThread($)):(g(mo($)),g(lt(tt.WEBVIEW.THREAD_CREATION_ATTEMPTED,{source:"button"}))),t(v)?.requestClose(),l()($)}let v=Te(void 0);function w($){a($)}var E=P(),A=b(E);be(A,(()=>je.Root),(($,C)=>{Dt(C($,{onOpenChange:w,nested:!1,children:(L,S)=>{var I=Yg(),O=b(I);be(O,(()=>je.Trigger),((z,K)=>{K(z,{children:(j,V)=>{{const R=B=>{var q=Ug();s(B,q)};let x=d((()=>!a()&&void 0));at(j,{side:"top",nested:!1,get open(){return t(x)},content:R,children:(B,q)=>{var M=Vg(),W=_(M),U=T=>{Et(T,{size:.5,variant:"ghost",color:"neutral","data-testid":ma,iconLeft:J=>{Se(J,{name:"plus"})},children:(J,Y)=>{Fe(J,{size:1,truncate:!0,children:(Q,X)=>{var ee=ae("New Thread");s(Q,ee)},$$slots:{default:!0}})},$$slots:{iconLeft:!0,default:!0}})},F=T=>{St(T,{size:.5,variant:"ghost-block",color:"neutral","data-testid":ma,children:(N,J)=>{Se(N,{name:"plus"})},$$slots:{default:!0}})};k(W,(T=>{i()?T(U):T(F,!1)})),s(B,M)},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})}));var D=f(O,2);be(D,(()=>je.Content),((z,K)=>{K(z,{size:1,side:"bottom",align:"start",children:(j,V)=>{var R=Kg(),x=_(R),B=U=>{Es(U,{chatMode:"localAgent",onSelect:()=>m("localAgent"),isConversationAgentic:!0,description:"Complete coding tasks autonomously."})};k(x,(U=>{G(y,"$enableAgentMode",n)&&U(B)}));var q=f(x,2);Es(q,{chatMode:"chat",onSelect:()=>m("chat"),isConversationAgentic:!1,description:"Ask questions, collaborate on projects."});var M=f(q,2),W=U=>{var F=jg(),T=b(F);be(T,(()=>je.Separator),((N,J)=>{J(N,{})})),Es(f(T,2),{chatMode:"remoteAgent",onSelect:()=>m("remoteAgent"),isBackgroundAgent:!0,description:"Run agents remotely."}),s(U,F)};k(M,(U=>{G(p,"$enableRemoteAgents",n)&&U(W)})),s(j,R)},$$slots:{default:!0}})})),s(L,I)},$$slots:{default:!0}}),(L=>Z(v,L,!0)),(()=>t(v)))})),s(o,E),Ee(),r()}var Jg=h('<div class="c-thread-bulk-delete-prompt__content svelte-9nu469">Large number of threads can slow down the extension.<br/> Consider deleting some threads. <div class="c-thread-bulk-delete-prompt__action svelte-9nu469"><!> <!></div></div>'),Qg=h('<div class="c-thread-bulk-delete-prompt svelte-9nu469"><!></div>'),Zg=h("<!> <!>",1),eh=h("<!> <!>",1),th=h("<!> <!> <!> <!>",1),nh=h("<!> <!> <!> <!>",1),sh=h('<div class="c-thread-menu svelte-p0wrmr"><!> <!> <!> <!> <!> <!></div>'),rh=h("<!> <!>",1);function Qi(o,e){Ce(e,!0);const n=()=>G(t(m),"$isThreadPinned",i),r=()=>G(t(p),"$conversation",i),a=()=>G(A,"$agentIdCopyTextMap",i),[i,l]=Xe(),c=Tt(un.key);let u=H(e,"type",3,"chat");const g=d((()=>e.thread.conversation?.id)),p=d((()=>bc(t(g)))),y=d((()=>$c(t(g)))),m=d((()=>Rr(e.thread.id)));let v=Te(void 0),w=Te(void 0),E=Te("");const A=Xt(new Map),$=d((()=>t(E)?t(E):t(w)==="retrieving"?"Creating link":t(w)==="copied"?"Link copied":t(w)==="failure"?"Unable to create link":"Share link to session")),C=ut();function L(){e.onOptionSelected?.(n()?"Unpin":"Pin"),e.onTogglePinned?e.onTogglePinned():u()==="remoteAgent"?c?.toggleAgentPinned(e.thread.id,n()||!1):C(Ya(e.thread.id))}const S=Ct("enableDebugFeatures"),I=Ct("enableConversationDebugUtils");async function O(){if(e.onOptionSelected?.("Delete"),u()==="remoteAgent"){if(!await c?.deleteAgent(e.thread.id))return}else C(Xa([e.thread.id],{}));e.afterDelete?.()}function D(){e.onOptionSelected?.("Rename"),e.onRename?.(e.thread.id),t(v)?.requestClose()}function z(){e.onOptionSelected?.("Copy ID"),navigator.clipboard.writeText(e.thread.id),A.update((R=>(R.set(e.thread.id,"Copied!"),R))),setTimeout((()=>{A.update((R=>(R.delete(e.thread.id),R)))}),1e3)}async function K(){if(e.onOptionSelected?.("Share link to session"),r()?.id&&t(w)===void 0){Z(w,r()?.lastUrl?"copied":"retrieving",!0);try{C(wc(r().id)),Z(w,"copied")}catch(R){console.error("Failed to get conversation URL: ",R),Z(E,R instanceof Error?R.message:"Unknown error",!0),Z(w,"failure")}finally{setTimeout((()=>{Z(w,void 0)}),1200)}}}var j=P(),V=b(j);be(V,(()=>je.Root),((R,x)=>{Dt(x(R,{onOpenChange:B=>{B&&e.onOptionsOpened?.()},nested:!1,children:(B,q)=>{var M=rh(),W=b(M);be(W,(()=>je.Trigger),((F,T)=>{T(F,{children:(N,J)=>{St(N,{variant:"ghost-block",color:"neutral",size:.5,class:"c-agent-header__options-btn",onkeydown:Y=>{Y.key!=="Enter"&&Y.key!==" "||Y.stopPropagation()},children:(Y,Q)=>{Se(Y,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var U=f(W,2);be(U,(()=>je.Content),((F,T)=>{T(F,{size:1,side:"bottom",align:"end",children:(N,J)=>{var Y=sh(),Q=_(Y),X=ce=>{var ue=Zg(),ke=b(ue),re=de=>{var le=P(),_e=b(le);{const oe=ve=>{Se(ve,{name:"square-pen",size:1})};be(_e,(()=>je.Item),((ve,ye)=>{ye(ve,{onSelect:D,iconLeft:oe,children:(Ne,Re)=>{var Oe=ae("Rename");s(Ne,Oe)},$$slots:{iconLeft:!0,default:!0}})}))}s(de,le)};k(ke,(de=>{e.onRename&&de(re)}));var ie=f(ke,2),he=de=>{var le=P(),_e=b(le);{const oe=ve=>{var ye=P(),Ne=b(ye),Re=Be=>{Vn(Be,{size:1})},Oe=Be=>{var Ge=P(),xe=b(Ge),ze=Le=>{Se(Le,{name:"check",size:1})},He=Le=>{var De=P(),pe=b(De),fe=We=>{Se(We,{name:"x",size:1})},Pe=We=>{Se(We,{name:"share-2",size:1})};k(pe,(We=>{t(w)==="failure"?We(fe):We(Pe,!1)}),!0),s(Le,De)};k(xe,(Le=>{t(w)==="copied"?Le(ze):Le(He,!1)}),!0),s(Be,Ge)};k(Ne,(Be=>{t(w)==="retrieving"?Be(Re):Be(Oe,!1)})),s(ve,ye)};be(_e,(()=>je.Item),((ve,ye)=>{ye(ve,{class:"c-thread-menu__share-link",onSelect:K,iconLeft:oe,children:(Ne,Re)=>{var Oe=ae();ge((()=>qe(Oe,t($)))),s(Ne,Oe)},$$slots:{iconLeft:!0,default:!0}})}))}s(de,le)};k(ie,(de=>{G(t(y),"$isShareable",i)&&de(he)})),s(ce,ue)};k(Q,(ce=>{u()!=="remoteAgent"&&ce(X)}));var ee=f(Q,2);{const ce=ue=>{Se(ue,{name:"pin",size:1})};be(ee,(()=>je.Item),((ue,ke)=>{ke(ue,{onSelect:L,iconLeft:ce,children:(re,ie)=>{var he=ae();ge((()=>qe(he,n()?"Unpin":"Pin"))),s(re,he)},$$slots:{iconLeft:!0,default:!0}})}))}var se=f(ee,2),we=ce=>{var ue=eh(),ke=b(ue);{const ie=he=>{Se(he,{name:"copy",size:1})};be(ke,(()=>je.Item),((he,de)=>{de(he,{onSelect:z,iconLeft:ie,children:(le,_e)=>{var oe=P(),ve=b(oe),ye=Re=>{var Oe=ae();ge((Be=>qe(Oe,Be)),[()=>a().get(e.thread.id)]),s(Re,Oe)},Ne=Re=>{var Oe=ae("Copy ID");s(Re,Oe)};k(ve,(Re=>{a().get(e.thread.id)?Re(ye):Re(Ne,!1)})),s(le,oe)},$$slots:{iconLeft:!0,default:!0}})}))}var re=f(ke,2);{const ie=he=>{Se(he,{name:"square-pen",size:1})};be(re,(()=>je.Item),((he,de)=>{de(he,{onSelect:D,iconLeft:ie,children:(le,_e)=>{var oe=ae("Rename");s(le,oe)},$$slots:{iconLeft:!0,default:!0}})}))}s(ce,ue)};k(se,(ce=>{u()==="remoteAgent"&&ce(we)}));var $e=f(se,2);{const ce=ue=>{Se(ue,{name:"trash",size:1})};be($e,(()=>je.Item),((ue,ke)=>{ke(ue,{color:"error",onSelect:O,iconLeft:ce,children:(re,ie)=>{var he=ae("Delete");s(re,he)},$$slots:{iconLeft:!0,default:!0}})}))}var te=f($e,2),Ie=ce=>{var ue=th(),ke=b(ue);be(ke,(()=>je.Separator),((de,le)=>{le(de,{})}));var re=f(ke,2);be(re,(()=>je.Label),((de,le)=>{le(de,{children:(_e,oe)=>{var ve=ae("Debug");s(_e,ve)},$$slots:{default:!0}})}));var ie=f(re,2);{const de=le=>{Se(le,{name:"upload",size:1})};be(ie,(()=>je.Item),((le,_e)=>{_e(le,{onSelect:async()=>{r()?.id&&(C(_c(r()?.id,{includeMetadata:!0,notes:`Exported from thread menu on ${new Date().toISOString()}`,openFile:!0})),t(v)?.requestClose())},iconLeft:de,children:(oe,ve)=>{var ye=ae("Export conversation");s(oe,ye)},$$slots:{iconLeft:!0,default:!0}})}))}var he=f(ie,2);{const de=le=>{Se(le,{name:"download",size:1})};be(he,(()=>je.Item),((le,_e)=>{_e(le,{onSelect:async()=>{C(yc({generateNewId:!0,namePrefix:"[Imported] ",markAsImported:!0})),t(v)?.requestClose()},iconLeft:de,children:(oe,ve)=>{var ye=ae("Import conversation");s(oe,ye)},$$slots:{iconLeft:!0,default:!0}})}))}s(ce,ue)};k(te,(ce=>{u()!=="remoteAgent"&&I&&ce(Ie)}));var me=f(te,2),Ae=ce=>{var ue=nh(),ke=b(ue);be(ke,(()=>je.Separator),((de,le)=>{le(de,{})}));var re=f(ke,2);be(re,(()=>je.Label),((de,le)=>{le(de,{children:(_e,oe)=>{var ve=ae("INTERNAL Debug Features");s(_e,ve)},$$slots:{default:!0}})}));var ie=f(re,2);{const de=le=>{Se(le,{name:"pause",size:1})};be(ie,(()=>je.Item),((le,_e)=>{_e(le,{onSelect:()=>c.pauseRemoteAgentWorkspace(e.thread.id),iconLeft:de,children:(oe,ve)=>{var ye=ae("Pause");s(oe,ye)},$$slots:{iconLeft:!0,default:!0}})}))}var he=f(ie,2);{const de=le=>{Se(le,{name:"play",size:1})};be(he,(()=>je.Item),((le,_e)=>{_e(le,{onSelect:()=>c.resumeRemoteAgentWorkspace(e.thread.id),iconLeft:de,children:(oe,ve)=>{var ye=ae("Resume");s(oe,ye)},$$slots:{iconLeft:!0,default:!0}})}))}s(ce,ue)};k(me,(ce=>{u()==="remoteAgent"&&G(S,"$enableDebugFeatures",i)&&ce(Ae)})),s(N,Y)},$$slots:{default:!0}})})),s(B,M)},$$slots:{default:!0}}),(B=>Z(v,B,!0)),(()=>t(v)))})),s(o,j),Ee(),l()}var oh=h('<div class="agent-chat-history__item svelte-ndjqhw">|</div>'),ah=h('<div class="agent-chat-history svelte-ndjqhw"></div>');function Zi(o,e){Ce(e,!0);var n=P(),r=b(n),a=i=>{var l=P(),c=b(l);fs(c,(()=>JSON.stringify(e.userMessages.slice(-9))),(u=>{var g=ah();Pt(g,23,(()=>e.userMessages.slice(-9)),((p,y)=>p+"-"+y),((p,y)=>{{let m=d((()=>(function(w="",E){return w.length<=E?w:w.slice(0,E-3)+"..."})(t(y)||"",170))),v=d((()=>[nn.Hover]));at(p,{delayDurationMs:0,get content(){return t(m)},side:"bottom",nested:!1,hasPointerEvents:!1,get triggerOn(){return t(v)},children:(w,E)=>{var A=oh();s(w,A)},$$slots:{default:!0}})}})),s(u,g)})),s(i,l)};k(r,(i=>{e.userMessages.length>0&&i(a)})),s(o,n),Ee()}var ih=h('<div class="c-thread-title-editor svelte-4d5y91"><!></div>');function el(o,e){Ce(e,!0);let n=H(e,"value",3,""),r=H(e,"size",3,1),a=H(e,"variant",3,"ghost"),i=H(e,"onRename",3,(()=>{})),l=H(e,"onCancel",3,(()=>{})),c=Te(void 0),u=Te(!1),g=Te(Dn(n()));function p(){i()(t(g))}ot((()=>{Z(g,n())})),Jt((()=>{setTimeout((()=>t(c)?.focus()),0)}));var y=ih();Ft("click",fn,(function(){t(c)&&!t(u)&&p(),Z(u,!1)}));var m=_(y);{let v=d((()=>["c-thread-title-editor__input",e.className]));Ja(m,{get size(){return r()},get variant(){return a()},outline:!1,onkeydown:function(w){w.key==="Enter"?(w.preventDefault(),p()):w.key==="Escape"&&(w.preventDefault(),Z(g,n()),l()()),w.stopPropagation()},onclick:w=>w.stopPropagation(),onblur:()=>{t(u)||p()},onselectionchange:()=>{Z(u,!!document.getSelection()?.toString().length)},onmouseup:()=>{Z(u,!1)},get class(){return t(v)},get textInput(){return t(c)},set textInput(w){Z(c,w,!0)},get value(){return t(g)},set value(w){Z(g,w,!0)}})}s(o,y),Ee()}const Qs="focusable-item";function pa(o,e){return(o%e+e)%e}function fa(o){const e=document.activeElement?.closest(`.${Qs}`);return o.findIndex((n=>n===e))}function _a(o,e){let n=e;e===-1||e>=o.length?n=o.length-1:e<0&&(n=0),o[n]?.focus()}function lh(o){const e=n=>{const r=document.activeElement;if(r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA")||!r.closest(`.${Qs}`)&&!o.contains(r))return;const a=(function(i){return Array.from(i.querySelectorAll(`.${Qs}`))})(o);if(a.length!==0)switch(n.key){case"ArrowUp":n.preventDefault(),(function(i){const l=pa(fa(i)-1,i.length);i[l]?.focus()})(a);break;case"ArrowDown":n.preventDefault(),(function(i){const l=pa(fa(i)+1,i.length);i[l]?.focus()})(a);break;case"Home":n.preventDefault(),_a(a,0);break;case"End":n.preventDefault(),_a(a,-1)}};return document.addEventListener("keydown",e),{destroy(){document.removeEventListener("keydown",e)}}}function tl(o,e){let n=!1;const r=a=>{a&&!n&&Cn().then((()=>{o.focus()})),n=a};return r(e),{update:r,destroy(){}}}function So(o=document.activeElement){if(!o)return!1;if(o.getAttribute("role")==="textbox")return!0;const e=o.tagName.toLowerCase();if(e==="textarea")return!0;if(e==="input"){const n=o.type.toLowerCase();if(["text","password","email","search","tel","url","number"].includes(n))return!0}return!(!o.hasAttribute("contenteditable")&&!o.closest("[contenteditable]"))}function ya(){const o=document.activeElement;if(!o)return!1;const e=o.tagName.toLowerCase();if(e==="select"||e==="button"||e==="input"||So(o)||o.hasAttribute("tabindex")&&o.getAttribute("tabindex")!=="-1")return!0;const n=o.getAttribute("role");return n==="textbox"||n==="combobox"||n==="listbox"||n==="button"||n==="menuitem"||n==="option"}var ch=h('<div><div></div> <div class="status-label svelte-1gr0zn2"> </div></div>');function dh(o,e){Ce(e,!0);const[n,r]=Xe();function a(E){switch(E){case"unseen":return"accent";case"awaitUserAction":return"iris";case"running":return"success";default:return"neutral"}}const i=$r(e.conversationId),l=Qa(e.conversationId);let c=d((()=>{return E=G(i,"$agentExchangeStatus",n),A=G(l,"$lastExchange",n),E===Pn.running?"running":E===Pn.awaitingUserAction?"awaitUserAction":E===Pn.notRunning&&A?.seen_state===Er.unseen?"unseen":void 0;var E,A})),u=d((()=>a(t(c))));var g={getStatusBadgeColor:a},p=P(),y=b(p),m=E=>{var A=ch();xr(A,(I=>({class:"status-indicator-container collapsed",role:"status","aria-label":`Agent status: ${t(c)??""}`,title:`Status: ${t(c)??""}`,...I})),[()=>Fi(t(u))],void 0,void 0,"svelte-1gr0zn2");var $=_(A);let C;var L=f($,2),S=_(L);ge((()=>{C=ct($,1,"status-dot svelte-1gr0zn2",null,C,{"pulse-opacity":t(c)==="running"}),qe(S,t(c))})),s(E,A)},v=E=>{var A=P(),$=b(A);et($,(()=>e.fallback??pt)),s(E,A)};k(y,(E=>{t(c)?E(m):E(v,!1)})),s(o,p);var w=Ee(g);return r(),w}const uh="thread-list-item",vh={chat:"Chat",localAgent:"Agent",remoteAgent:"Remote Agent"};var gh=h('<div class="agent-icon svelte-7gavtm"><!></div>'),hh=h("<div><!></div>"),mh=h('<div class="agent-title-content svelte-7gavtm"><!> <!></div>'),ph=h('<!> <div class="agent-actions svelte-7gavtm"><!></div>',1),fh=h('<div class="agent-content svelte-7gavtm"><div class="agent-details svelte-7gavtm"><div class="agent-details--left svelte-7gavtm"><!> <!> <div class="agent-title svelte-7gavtm"><!></div></div></div> <!></div>'),_h=h('<div role="button" tabindex="0"><!></div>');function yh(o,e){Ce(e,!0);const n=()=>G(y,"$threadTitle",a),r=()=>G(t(v),"$isThreadPinned",a),[a,i]=Xe();let l=H(e,"isSelected",3,!1),c=H(e,"showIfPinned",3,!1),u=H(e,"afterDelete",19,(()=>{})),g=Te(!1);const p=ut(),y=e.thread.title,m=Zs(e.thread.id),v=d((()=>Rr(e.thread.id))),w=Tt(Ro);async function E(q){if(q.trim()&&q!==n()){const M=n();p(Za(e.thread.id,q)),p(lt(tt.SHARED.THREAD_RENAMED,{...w(e.thread),oldTitleLength:M.length,newTitleLength:q.length}))}A()}function A(){Z(g,!1)}function $(){Z(g,!0)}let C=d((()=>e.thread.isNew)),L=d((()=>_r[e.thread.type])),S=d((()=>e.thread.type));const I=d((()=>qs(e.thread.conversation?.id)));function O(){e.onSelect(e.thread)}function D(){p(lt(tt.SHARED.THREAD_OPTIONS_OPENED,w(e.thread)))}function z(q){p(lt(tt.SHARED.THREAD_OPTION_SELECTED,{...w(e.thread),option:q}))}function K(){u()?.(e.thread)}function j(q){q?.stopPropagation(),e.onTogglePinned(e.thread,q)}function V(q){q&&(q.key!=="Enter"&&q.key!==" "||j(q))}var R=_h();let x;R.__click=O,R.__keydown=function(q){q.key!=="Enter"&&q.key!==" "||O()},nt(R,"data-testid",uh);var B=_(R);fs(B,(()=>`${n()}--${r()}`),(q=>{var M=fh(),W=_(M),U=_(W),F=_(U);dh(F,{get conversationId(){return e.thread.conversation.id},fallback:se=>{var we=gh(),$e=_(we);Se($e,{get name(){return t(L).icon},size:2}),s(se,we)},$$slots:{fallback:!0}});var T=f(F,2),N=ee=>{var se=hh();let we;var $e=_(se);{let te=d((()=>r()?"Unpin thread":"Pin thread"));at($e,{nested:!1,hasPointerEvents:!1,get content(){return t(te)},children:(Ie,me)=>{{let Ae=d((()=>r()?"Unpin thread":"Pin thread"));St(Ie,{variant:"ghost-block",color:"accent",size:.5,class:"pin-icon__button",onclick:j,onkeydown:V,type:"button",get"aria-label"(){return t(Ae)},children:(ce,ue)=>{Se(ce,{name:"pin",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}ge((()=>we=ct(se,1,"pin-icon svelte-7gavtm",null,we,{"is-pinned":r()}))),s(ee,se)};k(T,(ee=>{!t(C)&&r()&&c()&&ee(N)}));var J=f(T,2),Y=_(J);{let ee=d((()=>(function(se="",we){return se.length<=we?se:se.slice(0,we-3)+"..."})(n(),200)));at(Y,{nested:!1,hasPointerEvents:!1,get content(){return t(ee)},delayDurationMs:1e3,children:(se,we)=>{var $e=mh(),te=_($e),Ie=ue=>{at(ue,{nested:!1,hasPointerEvents:!1,content:"Draft message",children:(ke,re)=>{var ie=P(),he=b(ie);be(he,(()=>Mn.Root),((de,le)=>{le(de,{color:"neutral",size:0,variant:"soft",children:(_e,oe)=>{Fe(_e,{size:0,children:(ve,ye)=>{var Ne=ae("Draft");s(ve,Ne)},$$slots:{default:!0}})},$$slots:{default:!0}})})),s(ke,ie)},$$slots:{default:!0}})};k(te,(ue=>{t(C)&&G(m,"$draft",a)?.exchange?.request_message&&ue(Ie)}));var me=f(te,2),Ae=ue=>{Fe(ue,{size:1,truncate:!0,class:"draft-title",children:(ke,re)=>{var ie=ae();ge((()=>qe(ie,n()||e.thread.conversation?.draftExchange?.request_message||`New ${vh[e.thread.type]}`))),s(ke,ie)},$$slots:{default:!0}})},ce=ue=>{var ke=P(),re=b(ke),ie=de=>{el(de,{get value(){return n()},onRename:E,onCancel:A})},he=de=>{Fe(de,{size:1,truncate:!0,weight:"regular",children:(le,_e)=>{var oe=ae();ge((()=>qe(oe,n()))),s(le,oe)},$$slots:{default:!0}})};k(re,(de=>{t(g)?de(ie):de(he,!1)}),!0),s(ue,ke)};k(me,(ue=>{t(C)?ue(Ae):ue(ce,!1)})),s(se,$e)},$$slots:{default:!0}})}var Q=f(W,2),X=ee=>{var se=ph(),we=b(se);Zi(we,{get userMessages(){return G(t(I),"$userMessages",a)}});var $e=f(we,2);Qi(_($e),{get thread(){return e.thread},get type(){return t(S)},afterDelete:K,onTogglePinned:j,onRename:$,onOptionsOpened:D,onOptionSelected:z}),s(ee,se)};k(Q,(ee=>{t(C)||ee(X)})),s(q,M)})),kn(R,((q,M)=>tl?.(q,M)),(()=>l()&&!So())),ge((()=>x=ct(R,1,`agent-row agent-row--${e.thread.type??""} ${Qs}`,"svelte-7gavtm",x,{"agent-row--active":l()}))),s(o,R),Ee(),i()}gn(["click","keydown"]);const bh=6048e5;function nl(o,e){if(!o?.expires_at)return!1;const n=new Date(o.expires_at).getTime(),r=Date.now(),a=n-r;return e&&r<new Date(o.updated_at).getTime()+24*e*60*60*1e3?!1:a<bh}var $h=h('<div class="remote-agent-icon svelte-84e7gj"><!></div>');function wh(o,e){Ce(e,!0);const[n,r]=Xe(),a=kc();let i=d((()=>nl(e.remoteAgent.agent,G(a,"$remoteAgentsResumeHintAvailableTtlDays",n)))),l=d((()=>e.remoteAgent.agent?.expires_at?Oi(new Date(e.remoteAgent.agent.expires_at),new Date):0)),c=d((()=>t(l)<0?"This remote agent will be deleted soon due to inactivity.":`${Mr(t(l),"day")} remaining`));var u=$h(),g=_(u),p=m=>{at(m,{get content(){return t(c)},class:"remote-agent-icon__warning",children:(v,w)=>{Se(v,{name:"circle-alert",size:2})},$$slots:{default:!0}})},y=m=>{Se(m,{name:"cloud-upload",size:2})};k(g,(m=>{t(i)?m(p):m(y,!1)})),s(o,u),Ee(),r()}var kh=h("<!> <!>",1),Ah=h("<div><!></div>");function Ch(o,e){Ce(e,!0);const n=()=>G(g,"$remoteAgentsModel",r),[r,a]=Xe();let i=H(e,"agentId",19,(()=>{})),l=H(e,"status",19,(()=>{})),c=H(e,"workspaceStatus",19,(()=>{})),u=H(e,"hasUpdates",3,!1);const g=Tt("remoteAgentsModel");let p=d((()=>c()===mr.workspaceRunning?vg(l()):gg(c()))),y=d((()=>(l()===Gn.agentIdle||l()===Gn.agentFailed)&&u())),m=d((()=>i()??n().currentAgentId)),v=d((()=>n().newAgentDraft)),w=d((()=>t(m)?n().notificationSettings[t(m)]??!0:!!t(v)&&t(v).enableNotification)),E=d((()=>t(w)?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review. "+(i()===n().currentAgentId?"You will not be notified while you're actively viewing this agent.":"")));(function(A,$){Ce($,!0);let C=H($,"enabled",3,!1),L=H($,"isUnread",3,!1),S=H($,"unreadCount",3,1),I=H($,"statusColor",3,"neutral"),O=H($,"tooltipText",3,"");function D(j){j.stopPropagation(),$.ontoggle?.()}var z=Ah(),K=_(z);{let j=d((()=>[nn.Hover]));at(K,{get content(){return O()},hasPointerEvents:!1,get triggerOn(){return t(j)},children:(V,R)=>{{let x=d((()=>L()?I():"neutral")),B=d((()=>L()?"soft":"ghost-block"));St(V,{get color(){return t(x)},size:1,get variant(){return t(B)},onclick:D,onkeydown:q=>{q.key!=="Enter"&&q.key!==" "||q.stopPropagation()},radius:"full",children:(q,M)=>{var W=kh(),U=b(W),F=Y=>{Se(Y,{name:"bell",size:2})},T=Y=>{Se(Y,{name:"bell-off",size:2})};k(U,(Y=>{C()?Y(F):Y(T,!1)}));var N=f(U,2),J=Y=>{var Q=ae();ge((()=>qe(Q,S()))),s(Y,Q)};k(N,(Y=>{L()&&S()&&Y(J)})),s(q,W)},$$slots:{default:!0}})}},$$slots:{default:!0}})}ge((()=>ct(z,1,"c-notify-button "+(C()?"c-notify-button--enabled":"")))),s(A,z),Ee()})(o,{get enabled(){return t(w)},get isUnread(){return t(y)},get statusColor(){return t(p)},get tooltipText(){return t(E)},ontoggle:async function(){if(t(m))g.setNotificationEnabled(t(m),!t(w));else{const A=g.newAgentDraft;if(A){const $=t(w);g.setNewAgentDraft({...A,enableNotification:!$});try{const C=$?wr.disableNotifications:wr.enableNotifications;await g.reportRemoteAgentSetupWindowEvent(C)}catch(C){console.error("Failed to report notification toggle event:",C)}}}}}),Ee(),a()}var Eh=h('<div class="repo-pill svelte-u5mc2n"><div class="repo-pill-icon svelte-u5mc2n"><!></div> <div class="repo-pill-text svelte-u5mc2n"> </div></div>');const Th="thread-list-item";var Ih=h('<div class="update-indicator svelte-17il0gn"></div>'),Sh=h("<div><!></div>"),xh=h('<div class="setup-script-badge svelte-17il0gn"><!></div>'),Rh=h('<div class="agent-title-content svelte-17il0gn"><!> <!> <!></div>'),Mh=h('<div class="agent-status svelte-17il0gn"><!></div> <!>',1),Dh=h('<div class="agent-actions svelte-17il0gn"><!></div>'),zh=h('<div class="agent-content svelte-17il0gn"><div class="agent-details svelte-17il0gn"><div class="agent-details--left svelte-17il0gn"><div class="agent-icon svelte-17il0gn"><!> <!></div> <!> <!> <div class="agent-title svelte-17il0gn"><!></div></div> <!></div> <!> <!></div>'),Nh=h('<div role="button" tabindex="0"><!></div>');function ba(o,e){Ce(e,!0);const n=()=>G(v,"$threadTitle",a),r=()=>G(t(E),"$isThreadPinned",a),[a,i]=Xe();let l=H(e,"isSelected",3,!1),c=H(e,"showIfPinned",3,!1),u=H(e,"containerWidth",3,0),g=H(e,"afterDelete",19,(()=>{})),p=H(e,"currentRepoUrl",3,""),y=Te(!1);const m=ut(),v=e.thread.title,w=Zs(e.thread.id),E=d((()=>Rr(e.thread.id))),A=Tt(Ro);async function $(q){if(q.trim()&&q!==n()){const M=n();await e.remoteAgentsModel.updateRemoteAgentTitle(e.thread.id,q),m(lt(tt.SHARED.THREAD_RENAMED,{...A(e.thread),oldTitleLength:M.length,newTitleLength:q.length}))}C()}function C(){Z(y,!1)}function L(){Z(y,!0)}let S=d((()=>e.thread.isNew)),I=d((()=>e.thread.type));const O=d((()=>qs(e.thread.conversation?.id)));function D(){e.onSelect(e.thread)}function z(){m(lt(tt.SHARED.THREAD_OPTIONS_OPENED,A(e.thread)))}function K(q){m(lt(tt.SHARED.THREAD_OPTION_SELECTED,{...A(e.thread),option:q}))}function j(){g()?.(e.thread)}function V(q){e.onTogglePinned(e.thread,q)}var R=Nh();let x;R.__click=D,R.__keydown=function(q){q.key!=="Enter"&&q.key!==" "||D()},nt(R,"data-testid",Th);var B=_(R);fs(B,(()=>`${n()}--${r()}`),(q=>{var M=zh(),W=_(M),U=_(W),F=_(U),T=_(F),N=Ae=>{var ce=Ih();s(Ae,ce)};k(T,(Ae=>{e.thread.has_updates&&Ae(N)})),wh(f(T,2),{get remoteAgent(){return e.thread}});var J=f(F,2),Y=Ae=>{var ce=Sh();let ue;var ke=_(ce);{let re=d((()=>r()?"Unpin thread":"Pin thread"));at(ke,{nested:!1,hasPointerEvents:!1,get content(){return t(re)},children:(ie,he)=>{{let de=d((()=>r()?"Unpin thread":"Pin thread"));St(ie,{variant:"ghost-block",color:"accent",size:.5,class:"pin-icon__button",onclick:le=>{le.stopPropagation(),V(le)},onkeydown:le=>{le.key!=="Enter"&&le.key!==" "||(le.stopPropagation(),V(le))},type:"button",get"aria-label"(){return t(de)},children:(le,_e)=>{Se(le,{name:"pin",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}ge((()=>ue=ct(ce,1,"pin-icon svelte-17il0gn",null,ue,{"is-pinned":r()}))),s(Ae,ce)};k(J,(Ae=>{!t(S)&&r()&&c()&&Ae(Y)}));var Q=f(J,2),X=Ae=>{const ce=d((()=>wv(e.thread.agent)));(function(ue,ke){Ce(ke,!0);{let re=d((()=>`Repository: ${ke.repoInfo.fullPath}`));at(ue,{nested:!1,hasPointerEvents:!1,get content(){return t(re)},children:(ie,he)=>{var de=Eh(),le=_(de),_e=_(le);Se(_e,{name:"github",size:0});var oe=f(le,2),ve=_(oe);ge((()=>qe(ve,ke.repoInfo.name))),s(ie,de)},$$slots:{default:!0}})}Ee()})(Ae,{get repoInfo(){return t(ce)}})};k(Q,(Ae=>{bv(e.thread.agent,p())&&Ae(X)}));var ee=f(Q,2),se=_(ee);{let Ae=d((()=>(function(ce="",ue){return ce.length<=ue?ce:ce.slice(0,ue-3)+"..."})(n(),200)));at(se,{nested:!1,hasPointerEvents:!1,get content(){return t(Ae)},delayDurationMs:1e3,children:(ce,ue)=>{var ke=Rh(),re=_(ke),ie=ve=>{at(ve,{nested:!1,hasPointerEvents:!1,content:"Setup Script Agent",children:(ye,Ne)=>{var Re=xh(),Oe=_(Re);Se(Oe,{name:"terminal"}),s(ye,Re)},$$slots:{default:!0}})};k(re,(ve=>{e.thread.is_setup_script_agent&&ve(ie)}));var he=f(re,2),de=ve=>{at(ve,{nested:!1,hasPointerEvents:!1,content:"Draft message",children:(ye,Ne)=>{var Re=P(),Oe=b(Re);be(Oe,(()=>Mn.Root),((Be,Ge)=>{Ge(Be,{color:"neutral",size:0,variant:"soft",children:(xe,ze)=>{Fe(xe,{size:0,children:(He,Le)=>{var De=ae("Draft");s(He,De)},$$slots:{default:!0}})},$$slots:{default:!0}})})),s(ye,Re)},$$slots:{default:!0}})};k(he,(ve=>{t(S)&&G(w,"$draft",a)?.exchange?.request_message&&ve(de)}));var le=f(he,2),_e=ve=>{Fe(ve,{size:1,truncate:!0,class:"setup-script-title",children:(ye,Ne)=>{var Re=ae("Generate a setup script");s(ye,Re)},$$slots:{default:!0}})},oe=ve=>{var ye=P(),Ne=b(ye),Re=Be=>{Fe(Be,{size:1,truncate:!0,class:"draft-title",children:(Ge,xe)=>{var ze=ae();ge((()=>qe(ze,n()||e.thread.conversation?.draftExchange?.request_message||"New Remote Agent"))),s(Ge,ze)},$$slots:{default:!0}})},Oe=Be=>{var Ge=P(),xe=b(Ge),ze=Le=>{el(Le,{get value(){return n()},onRename:$,onCancel:C})},He=Le=>{{let De=d((()=>e.thread.has_updates?"medium":"regular"));Fe(Le,{size:1,truncate:!0,get weight(){return t(De)},children:(pe,fe)=>{var Pe=ae();ge((()=>qe(Pe,n()))),s(pe,Pe)},$$slots:{default:!0}})}};k(xe,(Le=>{t(y)?Le(ze):Le(He,!1)}),!0),s(Be,Ge)};k(Ne,(Be=>{t(S)?Be(Re):Be(Oe,!1)}),!0),s(ve,ye)};k(le,(ve=>{e.thread.type==="remoteAgent"&&e.thread.is_setup_script_agent?ve(_e):ve(oe,!1)})),s(ce,ke)},$$slots:{default:!0}})}var we=f(U,2),$e=Ae=>{var ce=Mh(),ue=b(ce),ke=_(ue);{let re=d((()=>u()>300));$v(ke,{get workspaceStatus(){return e.thread.workspace_status},get status(){return e.thread.status},get isExpanded(){return t(re)},get hasUpdates(){return e.thread.has_updates}})}Ch(f(ue,2),{get agentId(){return e.thread.agent.remote_agent_id},get status(){return e.thread.status},get workspaceStatus(){return e.thread.workspace_status}}),s(Ae,ce)};k(we,(Ae=>{e.thread.status&&Ae($e)}));var te=f(W,2);Zi(te,{get userMessages(){return G(t(O),"$userMessages",a)}});var Ie=f(te,2),me=Ae=>{var ce=Dh();Qi(_(ce),{get thread(){return e.thread},get type(){return t(I)},afterDelete:j,onTogglePinned:V,onRename:L,onOptionsOpened:z,onOptionSelected:K}),s(Ae,ce)};k(Ie,(Ae=>{ho(e.thread.id)||Ae(me)})),s(q,M)})),kn(R,((q,M)=>tl?.(q,M)),(()=>l()&&!So())),ge((()=>x=ct(R,1,`agent-row agent-row--${e.thread.type??""} ${Qs}`,"svelte-17il0gn",x,{"agent-row--active":l(),"agent-row--setup-script":e.thread.is_setup_script_agent}))),s(o,R),Ee(),i()}gn(["click","keydown"]);var Oh=h('<div class="c-threads-list__group"><div class="c-threads-list__header svelte-1636rk3"><!> <div class="c-threads-list__actions svelte-1636rk3"><div class="c-threads-list__home-button svelte-1636rk3"><!></div></div></div> <div class="c-threads-list__items svelte-1636rk3"></div></div>'),Lh=h("<!> <!>",1),Ph=h('<div class="c-threads-list__group"><div class="c-threads-list__header svelte-1636rk3"><!> <div class="c-threads-list__options svelte-1636rk3"><!></div></div> <div class="c-threads-list__items svelte-1636rk3"></div></div>'),Bh=h('<div class="c-threads-list svelte-1636rk3"><!> <!></div>'),Fh=h('<div class="c-threads-search__icon-button"><!></div>'),qh=h('<div class="search-field-container__icon svelte-1icxmtj"><!></div>'),Hh=h('<div class="c-threads-search"><div class="c-threads-search__field-container svelte-1icxmtj"><!></div></div>'),Wh=h("<!> <!>",1),Gh=h('<div class="skeleton-row svelte-4a6h7v"><div class="skeleton-icon svelte-4a6h7v"></div> <div class="skeleton-text svelte-4a6h7v"></div></div>'),Uh=h('<div class="loading-state svelte-4a6h7v"></div>'),Vh=h('<div class="l-header-container svelte-12rln4c"><!></div>');function sl(o,e){var n=Vh(),r=_(n);et(r,(()=>e.children)),s(o,n)}class jh{_activeTabValue;_nullable;_size;_variant;_color;_loop;_isResizing;_scrollable;_hideLabelOnNarrow;_tabElements=[];activeTab;nullable;size;variant;color;loop;isResizing;scrollable;hideLabelOnNarrow;constructor(e){this._activeTabValue=Xt(e?.activeTab??void 0),this._nullable=Xt(e?.nullable??!1),this._size=Xt(e?.size??2),this._variant=Xt(e?.variant??"default"),this._color=Xt(e?.color??"accent"),this._loop=Xt(e?.loop??!0),this._isResizing=Xt(!1),this._scrollable=Xt(e?.scrollable??!0),this._hideLabelOnNarrow=Xt(e?.hideLabelOnNarrow??!1),this.activeTab=At([this._activeTabValue,this._nullable],(([n,r])=>r||n!==void 0?n:this._tabElements.filter((l=>!l.hasAttribute("disabled")&&l.getAttribute("aria-disabled")!=="true"))[0]?.getAttribute("data-value")||void 0)),this.nullable=vn(this._nullable),this.size=vn(this._size),this.variant=vn(this._variant),this.color=vn(this._color),this.loop=vn(this._loop),this.isResizing=vn(this._isResizing),this.scrollable=vn(this._scrollable),this.hideLabelOnNarrow=vn(this._hideLabelOnNarrow)}_getWritableStores(){return{activeTabValue:this._activeTabValue,nullable:this._nullable,size:this._size,variant:this._variant,color:this._color,loop:this._loop,isResizing:this._isResizing,scrollable:this._scrollable,hideLabelOnNarrow:this._hideLabelOnNarrow}}_updateTabElements(e){this._tabElements=e,this._activeTabValue.update((n=>n))}}class Kh{constructor(e){this._model=e,this._stores=this._model._getWritableStores(),this._activeTabUnsubscribe=this._model.activeTab.subscribe((()=>{this.updateSlidingBackground()}))}_stores;_tabListElement;_slidingBackgroundElement;_resizeObserver;_mutationObserver;_resizeTimeout;_scrollRafId;_activeTabUnsubscribe;_tabElements=[];setActiveTab(e){if(!It(this._stores.nullable)&&e===void 0){const n=this._tabElements.filter((a=>!a.hasAttribute("disabled")&&a.getAttribute("aria-disabled")!=="true")),r=n[0]?.getAttribute("data-value");return r?void this._stores.activeTabValue.set(r):void 0}this._stores.activeTabValue.set(e)}setNullable(e){this._stores.nullable.set(e)}setSize(e){this._stores.size.set(e)}setVariant(e){this._stores.variant.set(e)}setColor(e){this._stores.color.set(e)}setLoop(e){this._stores.loop.set(e)}setScrollable(e){this._stores.scrollable.set(e)}setHideLabelOnNarrow(e){this._stores.hideLabelOnNarrow.set(e)}registerTabList(e){return this._tabListElement&&this._tabListElement!==e&&this._cleanupObservers(),this._tabListElement=e,this._setupObservers(),()=>{this._tabListElement===e&&(this._tabListElement=void 0,this._cleanupObservers())}}registerSlidingBackground(e){return this._slidingBackgroundElement=e,this.updateSlidingBackground(),()=>{this._slidingBackgroundElement===e&&(this._slidingBackgroundElement=void 0)}}withTabList(){return e=>{const n=this.registerTabList(e);return this.updateTabElements(),{destroy:n}}}withSlidingBackground(){return e=>({destroy:this.registerSlidingBackground(e)})}updateTabElements(){this._tabListElement&&(this._tabElements=Array.from(this._tabListElement.querySelectorAll('[role="tab"]')),this._model._updateTabElements(this._tabElements))}getEnabledTabElements(){return this._tabElements.filter((e=>!e.hasAttribute("disabled")&&e.getAttribute("aria-disabled")!=="true"))}findNextEnabledTabIndex(e,n,r){const a=this.getEnabledTabElements();if(a.length===0)return-1;const i=this._tabElements[e],l=a.indexOf(i);if(l===-1)return this._tabElements.indexOf(a[0]);let c=l+n;return r?c>=a.length?c=0:c<0&&(c=a.length-1):c=Math.max(0,Math.min(a.length-1,c)),this._tabElements.indexOf(a[c])}handleKeyboardNavigation(e){if(!this._tabElements.length)return!1;const n=this._tabElements.findIndex((c=>c===e.target));if(n===-1)return!1;const r=this.getEnabledTabElements();if(r.length===0)return!1;let a=n,i=!1;const l=It(this._stores.loop);switch(e.key){case"ArrowLeft":e.preventDefault(),a=this.findNextEnabledTabIndex(n,-1,l),i=!0;break;case"ArrowRight":e.preventDefault(),a=this.findNextEnabledTabIndex(n,1,l),i=!0;break;case"Home":e.preventDefault(),a=this._tabElements.indexOf(r[0]),i=!0;break;case"End":e.preventDefault(),a=this._tabElements.indexOf(r[r.length-1]),i=!0;break;case"Escape":e.preventDefault(),It(this._stores.nullable)&&this.setActiveTab(void 0),i=!0;break}if(i&&a!==n){this._tabElements[a]?.focus();const c=this._tabElements[a]?.getAttribute("data-value");c&&this.setActiveTab(c)}return i}updateSlidingBackground(){const e=It(this._model.activeTab),n=this._tabListElement?.querySelector(`.c-tab-button-wrapper > button[data-value="${e}"]`);if(!this._tabListElement||!this._slidingBackgroundElement)return;if(!n)return this._slidingBackgroundElement.style.setProperty("--slider-opacity","0"),void this._slidingBackgroundElement.style.setProperty("--slider-visibility","hidden");const r=n.getBoundingClientRect(),a=this._tabListElement.getBoundingClientRect(),i=this._tabListElement.scrollLeft||0,l=r.left-a.left+i,c=r.width,u=r.height;this._slidingBackgroundElement.style.setProperty("--slider-opacity","1"),this._slidingBackgroundElement.style.setProperty("--slider-visibility","visible"),this._slidingBackgroundElement.style.setProperty("--slider-width",`${c}px`),this._slidingBackgroundElement.style.setProperty("--slider-height",`${u}px`),this._slidingBackgroundElement.style.setProperty("--slider-transform",`translateX(${l}px)`)}scrollActiveTabIntoView(){if(!this._tabListElement)return;const e=It(this._model.activeTab);if(!e)return;const n=this._tabListElement.querySelector(`[data-value="${e}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}_setupObservers(){this._tabListElement&&(this._cleanupObservers(),this._tabListElement.addEventListener("scroll",this._handleScroll,{passive:!0}),this._resizeObserver=new ResizeObserver((()=>{this._stores.isResizing.set(!0),this.updateSlidingBackground(),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((()=>{this._stores.isResizing.set(!1)}),100)})),this._tabListElement&&this._resizeObserver.observe(this._tabListElement),this._mutationObserver=new MutationObserver((()=>{this.updateTabElements(),this.updateSlidingBackground()})),this._tabListElement&&this._mutationObserver.observe(this._tabListElement,{childList:!0,subtree:!0}))}_handleScroll=()=>{this._scrollRafId!==void 0&&cancelAnimationFrame(this._scrollRafId),this._scrollRafId=requestAnimationFrame((()=>{this.updateSlidingBackground(),this._scrollRafId=void 0}))};_cleanupObservers(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._resizeObserver=void 0,this._mutationObserver=void 0,this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=void 0),this._scrollRafId!==void 0&&(cancelAnimationFrame(this._scrollRafId),this._scrollRafId=void 0),this._tabListElement&&this._tabListElement.removeEventListener("scroll",this._handleScroll),this._stores.isResizing.set(!1)}destroy(){this._cleanupObservers(),this._activeTabUnsubscribe?.(),this._tabListElement=void 0,this._slidingBackgroundElement=void 0,this._activeTabUnsubscribe=void 0}}const rl=Symbol("tab-group");function xo(){return Tt(rl)}var Yh=h('<div role="tablist"><!></div>');function ol(o,e){Ce(e,!0);const n=()=>G(A,"$activeTabStore",r),[r,a]=Xe();let i=H(e,"value",19,(()=>{})),l=H(e,"nullable",3,!1),c=H(e,"size",3,2),u=H(e,"variant",3,"default"),g=H(e,"color",3,"accent"),p=H(e,"loop",3,!0),y=H(e,"scrollable",3,!0),m=H(e,"hideLabelOnNarrow",3,!1);const v=(function(O){const D=new jh(O);return{model:D,controller:new Kh(D)}})({activeTab:i(),nullable:l(),size:c(),variant:u(),color:g(),loop:p(),scrollable:y(),hideLabelOnNarrow:m()}),{model:w,controller:E}=v,{activeTab:A,size:$,variant:C,color:L}=w;Rn(rl,v),ls((()=>{E.destroy()})),ot((()=>{E.setActiveTab(i())})),ot((()=>{E.setNullable(l())})),ot((()=>{E.setSize(c())})),ot((()=>{E.setVariant(u())})),ot((()=>{E.setColor(g())})),ot((()=>{E.setLoop(p())})),ot((()=>{E.setScrollable(y())})),ot((()=>{E.setHideLabelOnNarrow(m())})),ot((()=>{n()!==void 0&&e.onchange?.({value:n()})}));var S=Yh(),I=_(S);et(I,(()=>e.children??pt)),ge((()=>ct(S,1,$n(["ds-tabs",`ds-tabs--size-${G($,"$sizeStore",r)}`,`ds-tabs--variant-${G(C,"$variantStore",r)}`,`ds-tabs--color-${G(L,"$colorStore",r)}`,e.class]),"svelte-dgd3cy"))),s(o,S),Ee(),a()}function Xh(o,e){var n=P(),r=b(n);et(r,(()=>e.children??pt)),s(o,n)}var Jh=h("<!> <!>",1),Qh=h('<div class="ds-tab-list-dropdown"><!></div>'),Zh=h('<div class="background-slider svelte-1rv1smz" aria-hidden="true"></div>'),em=h('<div role="tablist" aria-label="Tab navigation" tabindex="-1"><!> <!></div>'),tm=h("<div><!> <!></div>");function al(o,e){Ce(e,!0);const n=()=>G(w,"$activeTabStore",l),r=()=>G(L,"$scrollableStore",l),a=()=>G($,"$colorStore",l),i=()=>G(E,"$sizeStore",l),[l,c]=Xe();let u=H(e,"showSlidingBackground",3,!1),g=H(e,"outline",3,!1),p=H(e,"expandToFit",3,!1);const y=xo();if(!y)throw new Error("TabListAugment must be used within a TabsAugment component");const{model:m,controller:v}=y,{activeTab:w,size:E,variant:A,color:$,isResizing:C,scrollable:L}=m,S=v.withTabList(),I=v.withSlidingBackground();function O(U){v.handleKeyboardNavigation(U)}ot((()=>{n()&&r()&&v.scrollActiveTabIntoView()}));const D=d((()=>r()?xi:Xh));let z=Te(void 0),K=Te(Dn([]));ot((()=>{if(t(z)){const U=Array.from(t(z).querySelectorAll('[role="tab"]'));Z(K,U.map((F=>{const T=F.getAttribute("data-value")||"";return{value:T,label:F.textContent?.trim()||T,disabled:F.getAttribute("aria-disabled")==="true"||F.hasAttribute("disabled")}})),!0)}}));const j=d((()=>t(K).find((U=>U.value===n()))?.label||"Select tab"));let V=Te(0);const R=d((()=>e.dropdownBreakpoint!==void 0&&t(V)>0&&t(V)<=e.dropdownBreakpoint));var x=tm();let B;var q=_(x),M=U=>{var F=Qh(),T=_(F);be(T,(()=>je.Root),((N,J)=>{J(N,{children:(Y,Q)=>{var X=Jh(),ee=b(X);be(ee,(()=>je.Trigger),((we,$e)=>{$e(we,{children:(te,Ie)=>{Et(te,{variant:"soft",get color(){return a()},get size(){return i()},class:"ds-tab-list-dropdown__trigger",iconRight:Ae=>{Se(Ae,{name:"chevron-down",size:2})},children:(Ae,ce)=>{Fe(Ae,{size:2,truncate:!0,children:(ue,ke)=>{var re=ae();ge((()=>qe(re,t(j)))),s(ue,re)},$$slots:{default:!0}})},$$slots:{iconRight:!0,default:!0}})},$$slots:{default:!0}})}));var se=f(ee,2);be(se,(()=>je.Content),((we,$e)=>{$e(we,{side:"bottom",align:"start",children:(te,Ie)=>{var me=P(),Ae=b(me);Pt(Ae,17,(()=>t(K)),(ce=>ce.value),((ce,ue)=>{var ke=P(),re=b(ke);{let ie=d((()=>t(ue).value===n()));be(re,(()=>je.Item),((he,de)=>{de(he,{get disabled(){return t(ue).disabled},get highlight(){return t(ie)},onSelect:()=>{return le=t(ue).value,void v.setActiveTab(le);var le},children:(le,_e)=>{Fe(le,{size:2,children:(oe,ve)=>{var ye=ae();ge((()=>qe(ye,t(ue).label))),s(oe,ye)},$$slots:{default:!0}})},$$slots:{default:!0}})}))}s(ce,ke)})),s(te,me)},$$slots:{default:!0}})})),s(Y,X)},$$slots:{default:!0}})})),s(U,F)};k(q,(U=>{e.dropdownBreakpoint!==void 0&&U(M)}));var W=f(q,2);be(W,(()=>t(D)),((U,F)=>{F(U,{stretch:!0,children:(T,N)=>{var J=em();let Y;J.__keydown=O;var Q=_(J);et(Q,(()=>e.children??pt));var X=f(Q,2),ee=se=>{var we=Zh();kn(we,($e=>I?.($e))),s(se,we)};k(X,(se=>{u()&&se(ee)})),Dt(J,(se=>Z(z,se)),(()=>t(z))),kn(J,(se=>S?.(se))),ge((()=>{Y=ct(J,1,$n(["ds-tab-list",`ds-tab-list--variant-${G(A,"$variantStore",l)}`,`ds-tab-list--color-${a()}`,`ds-tabs--size-${i()}`,e.class]),"svelte-1rv1smz",Y,{"ds-tab-list--with-sliding-background":u(),"ds-tab-list--outline":g(),"ds-tab-list--resizing":G(C,"$isResizingStore",l),"ds-tab-list--expand-to-fit":p()}),nt(J,"data-ds-color",a()),nt(J,"data-active-tab",n())})),s(T,J)},$$slots:{default:!0}})})),ge((()=>B=ct(x,1,"ds-tab-list-container svelte-1rv1smz",null,B,{"ds-tab-list-container--outline":g(),"ds-tab-list-container--collapsible":e.dropdownBreakpoint!==void 0,"ds-tab-list-container--collapsed":t(R)}))),ao(x,"clientWidth",(U=>Z(V,U))),s(o,x),Ee(),c()}gn(["keydown"]);var nm=h('<div class="c-tab-button__content svelte-13dwl2i"><!></div>'),sm=h('<div class="c-tab-button-wrapper svelte-13dwl2i"><!></div>'),rm=h('<div class="ds-tab__left-icon svelte-1ngox2z"><!></div>'),om=h("<div><!></div>"),am=h("<div><!></div>"),im=h("<div><!> <!> <!></div>"),lm=h("<div><!> <!></div>");function Hs(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"grow",3,!0),i=H(e,"disabled",3,!1);const l=xo(),{size:c,variant:u,color:g,activeTab:p,hideLabelOnNarrow:y}=l?.model||{};let m=d((()=>c?G(c,"$sizeStore",n):2)),v=d((()=>u?G(u,"$variantStore",n):"default")),w=d((()=>g?G(g,"$colorStore",n):"accent")),E=d((()=>!!p&&G(p,"$activeTabStore",n)===e.value)),A=d((()=>!!y&&G(y,"$hideLabelOnNarrowStore",n)));function $(D){!i()&&l&&l.controller.setActiveTab(e.value),e.onclick?.(D)}var C=lm();let L,S;var I=_(C);{let D=d((()=>t(m)===0?.5:t(m))),z=d((()=>t(E)?"ds-tab__separator--active":""));Dr(I,{orientation:"vertical",get size(){return t(D)},get class(){return`ds-tab__separator ${t(z)??""}`}})}var O=f(I,2);{let D=d((()=>["ds-tab",e.class]));(function(z,K){let j=H(K,"size",3,2),V=H(K,"variant",3,"default"),R=H(K,"color",3,"accent"),x=H(K,"active",3,!1),B=H(K,"disabled",3,!1),q=Os(K,["$$slots","$$events","$$legacy","size","variant","color","active","disabled","class","children"]),M=d((()=>(V(),x()?"soft":"ghost-block"))),W=d(R);var U=sm(),F=_(U);{let T=d((()=>V()==="pill"?"full":"medium")),N=d((()=>["c-tab-button",`c-tab-button--variant-${V()}`,{"c-tab-button--active":x(),"c-tab-button--disabled":B()},K.class])),J=d((()=>x()?0:-1));gv(F,es({get size(){return j()},get variant(){return t(M)},get color(){return t(W)},get disabled(){return B()},highContrast:!1,loading:!1,alignment:"center",get radius(){return t(T)},get class(){return t(N)},role:"tab",get"aria-selected"(){return x()},get tabindex(){return t(J)}},(()=>q),{children:(Y,Q)=>{var X=nm(),ee=_(X);et(ee,(()=>K.children??pt)),s(Y,X)},$$slots:{default:!0}}))}s(z,U)})(O,{get size(){return t(m)},get variant(){return t(v)},get color(){return t(w)},get active(){return t(E)},get disabled(){return i()},get class(){return t(D)},get"aria-controls"(){return`panel-${e.value??""}`},get id(){return`tab-${e.value??""}`},get"data-value"(){return e.value},onclick:$,onkeydown:function(z){z.key!=="Enter"&&z.key!==" "||i()||(z.preventDefault(),$(z)),e.onkeydown?.(z)},children:(z,K)=>{var j=im(),V=_(j),R=W=>{var U=rm(),F=_(U);et(F,(()=>e.leftIcon??pt)),s(W,U)};k(V,(W=>{e.leftIcon&&W(R)}));var x=f(V,2),B=W=>{var U=om();let F;var T=_(U);et(T,(()=>e.children??pt)),ge((()=>F=ct(U,1,"ds-tab__label svelte-1ngox2z",null,F,{"ds-tab__label--hide-on-narrow":t(A)}))),s(W,U)};k(x,(W=>{e.children&&W(B)}));var q=f(x,2),M=W=>{var U=am();let F;var T=_(U);et(T,(()=>e.rightIcon??pt)),ge((()=>F=ct(U,1,"ds-tab__right-icon svelte-1ngox2z",null,F,{"ds-tab__right-icon--hide-on-narrow":t(A)}))),s(W,U)};k(q,(W=>{e.rightIcon&&W(M)})),ge((()=>ct(j,1,`ds-tab__content ds-tab--size-${t(m)??""}`,"svelte-1ngox2z"))),s(z,j)},$$slots:{default:!0}})}ge((()=>{L=ct(C,1,"ds-tab svelte-1ngox2z",null,L,{"ds-tab--active":t(E)}),S=Un(C,"",S,{"--tab-button-flex":a()?"1":"0"})})),s(o,C),Ee(),r()}var cm=h('<div class="c-panel-card__header hidden-when-empty"><!></div>'),dm=h('<div class="c-panel-card__body hidden-when-empty svelte-b410ro"><!></div>'),um=h('<div class="c-panel-card__footer hidden-when-empty"><!></div>'),vm=h('<div class="c-panel-card svelte-b410ro"><!> <!> <!></div>');function On(o,e){const n=H(e,"minWidth",3,"250px"),r=H(e,"maxWidth",3,"auto");var a=vm();let i;var l=_(a),c=m=>{var v=cm(),w=_(v);et(w,(()=>e.header)),s(m,v)};k(l,(m=>{e.header&&m(c)}));var u=f(l,2),g=m=>{var v=dm(),w=_(v);et(w,(()=>e.children)),s(m,v)};k(u,(m=>{e.children&&m(g)}));var p=f(u,2),y=m=>{var v=um(),w=_(v);et(w,(()=>e.footer)),s(m,v)};k(p,(m=>{e.footer&&m(y)})),ge((()=>i=Un(a,"",i,{"--panel-card-min-width":n(),"--panel-card-max-width":r()}))),Zt(5,a,(()=>ns),(()=>({duration:150,y:-10}))),s(o,a)}var gm=h('<div class="c-thread-panel-empty svelte-1vgfmx"><div class="c-thread-panel-empty__card svelte-1vgfmx"><!></div> <div class="c-thread-panel-empty__footer svelte-1vgfmx"><!></div></div>');function Lr(o,e){var n=gm(),r=_(n),a=_(r);et(a,(()=>e.children??pt));var i=f(r,2),l=_(i);et(l,(()=>e.footer??pt)),s(o,n)}var hm=h('<div class="c-notifications-badge svelte-1gyhbvm"><!></div>');const mm=1e3,$a=30,Ro="threadAnalyticsMetadata";function pm(o){if(ho(o.id)||o.type!=="remoteAgent")return!1;const e=new Date(o.updated_at),n=new Date().getTime()-e.getTime();return Math.floor(n/1e3/60/60)<168}var fm=h('<div class="c-threads-panel__tooltip svelte-11ypmbd">Go back <!></div>'),_m=h('<div id="threads-search-button-container"></div>'),ym=h('<div class="reload-button"><!></div>'),bm=h('<div class="remote-tab__content svelte-11ypmbd"><!> Remote <!></div>'),$m=h("<!> <!>",1),wm=h('<div class="c-threads-panel__filters svelte-11ypmbd"><div class="c-threads-panel__filters-tabs svelte-11ypmbd"><!></div> <div id="threads-search-button-container"></div></div>'),km=h('<div class="c-threads-panel__header svelte-11ypmbd"><!> <!> <!> <div class="c-threads-panel__title"><!></div> <div class="c-threads-panel__header-right svelte-11ypmbd"><!> <!> <!></div></div> <div class="c-threads-panel__filters-panel svelte-11ypmbd"><!> <!></div>',1),Am=h('<div class="c-threads-panel svelte-11ypmbd"><!> <div class="c-threads-panel__list svelte-11ypmbd"><!> <!> <!></div></div>');function Cm(o,e){Ce(e,!0);const n=()=>G(v,"$remoteAgentsModel",p),r=()=>G(R,"$sortConversationsBy",p),a=()=>G(t(M),"$localAgentConversations",p),i=()=>G(t(q),"$chatConversations",p),l=()=>G(t(U),"$allPins",p),c=()=>G(t(B),"$newLocalConversation",p),u=()=>G(J,"$agentExecutionMode",p),g=()=>G(Be,"$bulkDeletePromptDismissed",p),[p,y]=Xe(),m=Tc,v=Tt(un.key),w=Tt(zi),E=Tt(Ir.key),A=Tt(us.key),$=ut();let C=H(e,"onClose",3,(()=>{}));const L=Ct("enableBulkDeleteThreads"),S=Ct("enableBackgroundAgents"),{store:I}=rs(),O=E.currentRepositoryUrl;function D(ne){const Me=I.getState(),Ue=t(ve).find((({threads:Ze})=>Ze.indexOf(ne)>=0)),Je=ne.type==="remoteAgent"?"Recent remote agents":Ue?.groupTitle,rt=qs.select(Me,ne.conversation?.id);return{threadType:ne.type,userMessages:rt.length,section:Je}}Rn(Ro,D),Jt((async()=>{try{E.getRemoteUrl()}catch(ne){console.error("Failed to get current repository URL:",ne)}}));let z=d((()=>n().currentAgentId)),K=d((()=>n().agentOverviews||[])),j=d((()=>n()&&G(S,"$enableBackgroundAgents",p)));const V="desc",R=Xt("lastMessageTimestamp");let x=d((()=>r()||"lastMessageTimestamp")),B=d(Dc),q=d((()=>Mc(r(),V))),M=d((()=>Rc(r(),V)));const W=d((()=>G(w,"$sharedWebviewStore",p).state?.pinnedAgents));ot((()=>{t(W)&&$(Cc(t(W)))}));const U=d((()=>Sc(a().map((({id:ne})=>ne)).concat(i().map((({id:ne})=>ne))).concat(t(K).map((({remote_agent_id:ne})=>ne))))));let F=d((()=>n().agentThreadsError)),T=d((()=>n().isLoading)),N=d((()=>n().hasFetchedOnce));const J=go();function Y(ne){if(!ne)return new Date(0);const Me=I.getState();return xc.select(Me,ne.id,t(x))}const Q=ln();let X=d((()=>n().isActive?t(z)??m:G(Q,"$currentConversationId",p)));const ee=Zs(Q);let se=d((()=>{if(n().isActive){if(n().isCreatingAgent)return;const ne=G(ee,"$draftExchange",p)?.exchange?.request_message;return{id:m,isNew:!0,type:Fs("remoteAgent"),title:ne,updated_at:new Date().toISOString(),started_at:new Date().toISOString(),conversation:void 0,sortTimestamp:new Date}}if(c())return{id:c().id,isNew:!0,type:c().extraData?.isAgentConversation?"localAgent":"chat",title:Fs(""),updated_at:c().lastInteractedAtIso,started_at:c().createdAtIso,conversation:c(),sortTimestamp:Y(c()),userMessages:[]}})),we=d((()=>i().map((ne=>({id:ne.id,isNew:!1,title:no(ne.id),type:"chat",updated_at:ne.lastInteractedAtIso,started_at:ne.createdAtIso,conversation:ne,sortTimestamp:Y(ne),userMessages:qs(ne.id)}))))),$e=d((()=>a().map((ne=>({id:ne.id,isNew:!1,title:no(ne.id),type:"localAgent",updated_at:ne.lastInteractedAtIso,started_at:ne.createdAtIso,conversation:ne,sortTimestamp:Y(ne),userMessages:qs(ne.id)}))))),te=d((()=>t(K).map((ne=>({id:ne.remote_agent_id,isNew:!1,title:Fs(Ic(ne)),type:"remoteAgent",updated_at:ne.updated_at,started_at:ne.started_at,status:ne.status,workspace_status:ne.workspace_status,is_setup_script_agent:ne.is_setup_script_agent,workspace_setup:ne.workspace_setup||{},agent:ne,sortTimestamp:new Date(ne.updated_at||ne.started_at),has_updates:ne.has_updates&&ne.remote_agent_id!==t(X)}))))),Ie=d((()=>t(se)&&t(X)===t(se).id));const me=d((()=>[t(Ie)&&t(se)?.type!=="remoteAgent"&&t(se),...t(we),...t($e)].filter(Boolean))),Ae=d((()=>[t(Ie)&&t(se)?.type==="remoteAgent"&&t(se),...t(te)].filter(Boolean)));let ce=Te(""),ue=Te("local");Jt((()=>{const ne=(Me=t(X),t(Ae).find((Ue=>Ue.id===Me))?"remote":"local");var Me;ne!==t(ue)&&Z(ue,ne,!0)}));let ke=d((()=>t(ue)==="local"?t(me):t(Ae)));const re=d((()=>t(ce).toLowerCase().split(/\s+/).filter((ne=>ne.length>0))));let ie=d((()=>t(re).length>0?t(ke).filter((ne=>(function(Me,Ue,Je,rt){if(Ue.length===0)return!0;const Ze=ha.get(Me)||(Fg(Me)?[It(Me.title),Bg(Me),Pg(Me,Je,rt)]:[It(Me.title),It(Me.userMessages).join(" ")]).filter(Boolean).join(" ").toLowerCase();return ha.set(Me,Ze),Ue.every((bt=>Ze.includes(bt)))})(ne,t(re),n().currentAgentId,n().currentConversation))):t(ke)));function he(ne){if(!ne)return!1;if(ne.type==="remoteAgent"&&ne.has_updates&&v.optimisticallyClearAgentUpdates(ne.id),v.setIsActive(ne.type==="remoteAgent"),ne.type==="remoteAgent"){const Me=A.switchToThread(ne.type,ne.id,u());return Me&&C()(),Me}return $(br(ne.id,{noopIfSameConversation:!0})),C()(),!0}let de=d((()=>t(F)?.errorMessage)),le=d((()=>t(T)&&!t(N))),_e=d((()=>!!t(de)&&t(N))),oe=d((()=>t(N)&&t(ie).length===0)),ve=d((()=>ga(t(ie),l()))),ye=()=>t(ie).filter(pm).length,Ne=d((()=>"Search "+(t(ue)==="local"?"Agent/Chat Threads":"Remote Threads")));async function Re(ne){const Me=[],Ue=[];for(const Je of ne)Je.type==="remoteAgent"?Ue.push(Je.id):Me.push(Je.id);if($(Xa(Me,{})),Ue.length>0&&v)for(const Je of Ue)try{await v.deleteAgent(Je,!0)}catch(rt){console.error(`Failed to delete remote agent ${Je}:`,rt)}}let Oe=Te(0);const Be=Ec(),Ge=d((function(){return ga(t(ke),l()).find((ne=>ne.groupTitle===wn.Older))?.threads||[]})),xe=d((()=>t(Ge).length)),ze=d((()=>t(me).length+t(Ae).length));let He=d((()=>t(ze)>mm)),Le=d((()=>G(L,"$enableBulkDeleteThreads",p)&&t(He)&&!g()));ot((()=>{t(Le)&&$(lt(tt.WEBVIEW.BULK_DELETE_BANNER_SHOWN,{oldThreadsCount:t(xe),totalThreadsCount:t(ze)}))})),ot((()=>{t(ze)>0&&!t(He)&&g()&&$(qr(void 0))}));const De=async()=>{if($(lt(tt.WEBVIEW.BULK_DELETE_BANNER_CLICKED,{oldThreadsCount:t(xe),totalThreadsCount:t(ze)})),t(xe)>0){const ne=t(xe),Me=t(ze);await Re(t(Ge)),$(lt(tt.WEBVIEW.BULK_DELETE_CONFIRMED,{deletedThreadsCount:ne,totalThreadsCount:Me})),$(qr(void 0))}},pe=()=>{$(lt(tt.WEBVIEW.BULK_DELETE_BANNER_DISMISSED,{oldThreadsCount:t(xe),totalThreadsCount:t(ze),dismissalDurationDays:$a})),$(qr({timestamp:new Date().toISOString(),dismissedFor:`${$a} days`}))};function fe(ne){ne.value!==t(ue)&&(ne.value!=="local"&&ne.value!=="remote"||($(lt(tt.WEBVIEW.THREADS_TAB_CHANGED,{newTab:ne.value,previousTab:t(ue)})),Z(ue,ne.value,!0)))}function Pe(ne){$(lt(ne?tt.SHARED.THREAD_SEARCH_OPENED:tt.SHARED.THREAD_SEARCH_CLOSED,{}))}var We=Am(),Ye=_(We);sl(Ye,{children:(ne,Me)=>{var Ue=km(),Je=b(Ue);{const Nt=ft=>{St(ft,{variant:"ghost-block",color:"neutral",size:.5,get onclick(){return C()},children:($t,qt)=>{Se($t,{name:"arrow-left",size:2})},$$slots:{default:!0}})};var rt=_(Je);on(rt,{name:"toggleThreadsPanel",get handler(){return C()}});var Ze=f(rt,2);on(Ze,{name:"closeThreadsPanel",get handler(){return C()}});var bt=f(Ze,2);at(bt,{side:"bottom",nested:!1,content:$t=>{var qt=fm(),ht=f(_(qt));_n(ht,{commandName:"toggleThreadsPanel",keysOnly:!0}),s($t,qt)},children:($t,qt)=>{Nt($t)},$$slots:{content:!0,default:!0}});var Bt=f(bt,2),Vt=_(Bt);Fe(Vt,{size:1,weight:"bold",children:(ft,$t)=>{var qt=ae("Threads");s(ft,qt)},$$slots:{default:!0}});var Qt=f(Bt,2),Kt=_(Qt),xt=ft=>{var $t=_m();s(ft,$t)};k(Kt,(ft=>{t(j)||ft(xt)}));var _t=f(Kt,2),kt=ft=>{var $t=ym(),qt=_($t);at(qt,{get content(){return`Failed to reload remote agents. Click to retry. ${t(de)??""}`},nested:!1,hasPointerEvents:!1,children:(ht,Ot)=>{St(ht,{variant:"ghost-block",color:"neutral",size:.5,onclick:Mt=>{Mt.stopPropagation(),n().refreshAgentThreads()},children:(Mt,cn)=>{Se(Mt,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}}),s(ft,$t)};k(_t,(ft=>{t(_e)&&ft(kt)})),Xg(f(_t,2),{get onNewThreadCreated(){return C()},showLabel:!1})}var gt=f(Je,2),Rt=_(gt),zt=Nt=>{var ft=wm(),$t=_(ft);ol(_($t),{size:1,color:"neutral",scrollable:!1,get value(){return t(ue)},onchange:fe,children:(qt,ht)=>{al(qt,{expandToFit:!1,showSlidingBackground:!0,children:(Ot,Mt)=>{var cn=$m(),Lt=b(cn);Hs(Lt,{value:"local",children:(Gt,Ut)=>{var Ht=ae("Local");s(Gt,Ht)},$$slots:{default:!0}}),Hs(f(Lt,2),{value:"remote",class:"remote-tab",children:(Gt,Ut)=>{var Ht=bm(),it=_(Ht);Se(it,{name:"cloud-upload"}),(function(mt,Wt){Ce(Wt,!0);const sn=()=>G(en,"$remoteAgentsModel",yn),[yn,En]=Xe(),en=Tt(un.key);let dn=d((()=>sn().isActive?sn().currentAgentId:null)),hn=d((()=>(sn().agentOverviews||[]).filter((Ln=>!!Ln.has_updates&&Ln.remote_agent_id!==t(dn)&&Ln.status===Gn.agentIdle)).length));var Tn=P(),bn=b(Tn),qn=Ln=>{var ar=hm(),Ql=_(ar);be(Ql,(()=>Mn.Root),((Zl,ec)=>{ec(Zl,{size:0,color:"accent",variant:"solid",children:(tc,J$)=>{io(tc,{get value(){return t(hn)},willChange:!0})},$$slots:{default:!0}})})),Zt(3,ar,(()=>ms),(()=>({duration:150,start:.8}))),s(Ln,ar)};k(bn,(Ln=>{t(hn)>0&&Ln(qn)})),s(mt,Tn),Ee(),En()})(f(it,2),{}),s(Gt,Ht)},$$slots:{default:!0}}),s(Ot,cn)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(Nt,ft)};k(Rt,(Nt=>{t(j)&&Nt(zt)})),(function(Nt,ft){Ce(ft,!0);let $t=H(ft,"searchQuery",15,""),qt=H(ft,"placeholder",3,"Search threads"),ht=H(ft,"isSearchActive",31,(()=>!!$t()));function Ot(){ft.trackSearchToggle?.(!ht()),$t(""),ht(!ht())}function Mt(){$t(""),ht(!1)}let cn=Te(void 0);function Lt(Wt){Wt.stopPropagation(),Wt.key==="Escape"&&Mt()}function Gt(){$t().trim()||(Mt(),ft.trackSearchToggle?.(!1))}ot((()=>{ht()&&t(cn)&&setTimeout((()=>{t(cn)?.focus()}),200)}));var Ut=Wh(),Ht=b(Ut);cs(Ht,{target:"#threads-search-button-container",children:(Wt,sn)=>{var yn=P(),En=b(yn),en=dn=>{var hn=Fh(),Tn=_(hn);at(Tn,{content:"Search threads",nested:!1,hasPointerEvents:!1,children:(bn,qn)=>{St(bn,{variant:"ghost-block",color:"neutral",size:.5,onclick:Ot,children:(Ln,ar)=>{Se(Ln,{name:"search"})},$$slots:{default:!0}})},$$slots:{default:!0}}),Zt(3,hn,(()=>ns),(()=>({y:6,duration:150}))),s(dn,hn)};k(En,(dn=>{ht()||dn(en)})),s(Wt,yn)},$$slots:{default:!0}});var it=f(Ht,2),mt=Wt=>{var sn=Hh(),yn=_(sn),En=_(yn);Ja(En,{get placeholder(){return qt()},size:1,variant:"surface",class:"search-input",onkeydown:Lt,onblur:Gt,get value(){return $t()},set value(dn){$t(dn)},get textInput(){return t(cn)},set textInput(dn){Z(cn,dn,!0)},iconLeft:dn=>{var hn=qh(),Tn=_(hn);Se(Tn,{name:"search",size:1}),s(dn,hn)},$$slots:{iconLeft:!0}}),Zt(3,yn,(()=>Ao),(()=>({duration:150,axis:"y"}))),s(Wt,sn)};k(it,(Wt=>{ht()&&Wt(mt)})),s(Nt,Ut),Ee()})(f(Rt,2),{get placeholder(){return t(Ne)},trackSearchToggle:Pe,get searchQuery(){return t(ce)},set searchQuery(Nt){Z(ce,Nt,!0)}}),s(ne,Ue)}});var Qe=f(Ye,2),st=_(Qe),Ke=ne=>{(function(Me,Ue){var Je=Qg(),rt=_(Je);hs(rt,{variant:"soft",color:"neutral",size:1,padding:"var(--ds-spacing-3)",icon:bt=>{Se(bt,{name:"info"})},children:(bt,Bt)=>{var Vt=Jg(),Qt=f(_(Vt),3),Kt=_(Qt);Et(Kt,{variant:"soft",color:"neutral",size:1,get onclick(){return Ue.bulkDeleteCallback},children:(_t,kt)=>{var gt=ae("Delete Old Threads");s(_t,gt)},$$slots:{default:!0}});var xt=f(Kt,2);Et(xt,{variant:"ghost",color:"neutral",size:1,get onclick(){return Ue.dismissBulkDeletePrompt},children:(_t,kt)=>{var gt=ae("Dismiss");s(_t,gt)},$$slots:{default:!0}}),s(bt,Vt)},$$slots:{icon:!0,default:!0}}),s(Me,Je)})(ne,{bulkDeleteCallback:De,dismissBulkDeletePrompt:pe})};k(st,(ne=>{t(Le)&&ne(Ke)}));var vt=f(st,2);(function(ne,Me){Ce(Me,!0);let Ue=H(Me,"recentRemoteAgents",19,(()=>[])),Je=H(Me,"displayedGroups",19,(()=>[])),rt=H(Me,"selectedThreadId",3,null),Ze=H(Me,"currentRepoUrl",3,"");function bt(){Me.remoteAgentsModel.showRemoteAgentHomePanel()}let Bt=d((()=>Ue().length)),Vt=Te(0);var Qt=Bh(),Kt=_(Qt),xt=kt=>{var gt=Oh(),Rt=_(gt),zt=_(Rt);Fe(zt,{size:1,weight:"light",color:"secondary",children:(ht,Ot)=>{var Mt=ae();ge((cn=>qe(Mt,`Recent remote ${cn??""}`)),[()=>Ac(t(Bt),"agent")]),s(ht,Mt)},$$slots:{default:!0}});var Nt=f(zt,2),ft=_(Nt),$t=_(ft);at($t,{content:"Expand remote agents dashboard",nested:!1,hasPointerEvents:!1,children:(ht,Ot)=>{St(ht,{variant:"ghost-block",color:"neutral",size:.5,onclick:bt,children:(Mt,cn)=>{Se(Mt,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}});var qt=f(Rt,2);Pt(qt,21,Ue,(ht=>ht.id),((ht,Ot)=>{{let Mt=d((()=>rt()===t(Ot).id));ba(ht,{get remoteAgentsModel(){return Me.remoteAgentsModel},get thread(){return t(Ot)},get containerWidth(){return t(Vt)},get currentRepoUrl(){return Ze()},get isSelected(){return t(Mt)},get afterDelete(){return Me.onThreadDelete},get onSelect(){return Me.onThreadSelect},get onTogglePinned(){return Me.onTogglePinned}})}})),s(kt,gt)};k(Kt,(kt=>{t(Bt)>0&&kt(xt)}));var _t=f(Kt,2);Pt(_t,17,Je,(kt=>`${kt.groupTitle}`),((kt,gt)=>{var Rt=Ph(),zt=_(Rt),Nt=_(zt);Fe(Nt,{size:1,weight:"light",color:"secondary",children:(ht,Ot)=>{var Mt=ae();ge((()=>qe(Mt,t(gt).groupTitle))),s(ht,Mt)},$$slots:{default:!0}});var ft=f(Nt,2),$t=_(ft);be($t,(()=>je.Root),((ht,Ot)=>{Ot(ht,{children:(Mt,cn)=>{var Lt=Lh(),Gt=b(Lt);be(Gt,(()=>je.Trigger),((Ht,it)=>{it(Ht,{children:(mt,Wt)=>{St(mt,{variant:"ghost-block",color:"neutral",size:.5,title:"Group options",children:(sn,yn)=>{Se(sn,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var Ut=f(Gt,2);be(Ut,(()=>je.Content),((Ht,it)=>{it(Ht,{size:1,side:"bottom",align:"end",children:(mt,Wt)=>{var sn=P(),yn=b(sn);{const En=en=>{Se(en,{name:"trash",size:1})};be(yn,(()=>je.Item),((en,dn)=>{dn(en,{color:"error",onSelect:()=>Me.onDeleteAllThreadsInGroup(t(gt).threads),iconLeft:En,children:(hn,Tn)=>{var bn=ae();ge((qn=>qe(bn,`Delete ${qn??""}`)),[()=>Mr(t(gt).threads.length,"thread")]),s(hn,bn)},$$slots:{iconLeft:!0,default:!0}})}))}s(mt,sn)},$$slots:{default:!0}})})),s(Mt,Lt)},$$slots:{default:!0}})}));var qt=f(zt,2);Pt(qt,21,(()=>t(gt).threads),(ht=>ht.id),((ht,Ot)=>{var Mt=P(),cn=b(Mt),Lt=Ut=>{{let Ht=d((()=>rt()===t(Ot).id));ba(Ut,{get remoteAgentsModel(){return Me.remoteAgentsModel},get thread(){return t(Ot)},get containerWidth(){return t(Vt)},get currentRepoUrl(){return Ze()},get isSelected(){return t(Ht)},get afterDelete(){return Me.onThreadDelete},get onSelect(){return Me.onThreadSelect},get onTogglePinned(){return Me.onTogglePinned}})}},Gt=Ut=>{{let Ht=d((()=>rt()===t(Ot).id));yh(Ut,{get thread(){return t(Ot)},showIfPinned:!0,get isSelected(){return t(Ht)},get afterDelete(){return Me.onThreadDelete},get onSelect(){return Me.onThreadSelect},get onTogglePinned(){return Me.onTogglePinned}})}};k(cn,(Ut=>{(function(Ht){return Ht.type==="remoteAgent"})(t(Ot))?Ut(Lt):Ut(Gt,!1)})),s(ht,Mt)})),s(kt,Rt)})),ao(Qt,"clientWidth",(kt=>Z(Vt,kt))),s(ne,Qt),Ee()})(vt,{get displayedGroups(){return t(ve)},get selectedThreadId(){return t(X)},get remoteAgentsModel(){return v},get currentRepoUrl(){return G(O,"$currentRepoUrl",p)},onThreadDelete:function(ne){if(ne.type==="remoteAgent"&&v.reportRemoteAgentThreadListEvent(lr.deleteAgent,ye(),ne.id),$(lt(tt.SHARED.THREAD_DELETED,D(ne))),t(X)!==ne.id)return;const Me=t(ve).find((({threads:Ze})=>Ze.indexOf(ne)>=0)),Ue=Me?.threads||[],Je=Ue.indexOf(ne),rt=Je>=0?Ue[Je+1]||Ue[Je-1]:void 0;rt&&he(rt)},onThreadSelect:function(ne){he(ne),ne.type==="remoteAgent"&&v.reportRemoteAgentThreadListEvent(lr.selectAgent,t(te).length,ne.id),$(lt(tt.SHARED.THREAD_SELECTED,D(ne)))},onTogglePinned:async function(ne,Me){if(Me&&Me.stopPropagation(),ne.isNew)return;const Ue=I.getState(),Je=ne.type==="remoteAgent"?l()[ne.id]||!1:Rr.select(Ue,ne.id);if(ne.type==="remoteAgent"){const rt=await v.toggleAgentPinned(ne.id,Je);w.update((Ze=>{if(Ze)return{...Ze,pinnedAgents:rt}})),v.reportRemoteAgentThreadListEvent(Je?lr.unpinAgent:lr.pinAgent,ye(),ne.id)}else["chat","localAgent"].includes(ne.type)&&$(Ya(ne.id))},onDeleteAllThreadsInGroup:Re});var dt=f(vt,2),yt=ne=>{(function(Me,Ue){Ce(Ue,!0);let Je=H(Ue,"rowCount",3,3),rt=d((()=>Array(Je()).fill(null)));var Ze=Uh();Pt(Ze,21,(()=>t(rt)),Ga,((bt,Bt)=>{var Vt=Gh();s(bt,Vt)})),s(Me,Ze),Ee()})(ne,{rowCount:3})},Ve=ne=>{var Me=P(),Ue=b(Me),Je=rt=>{Lr(rt,{children:(Ze,bt)=>{var Bt=P(),Vt=b(Bt),Qt=xt=>{(function(_t){On(_t,{header:gt=>{Fe(gt,{size:4,children:(Rt,zt)=>{var Nt=ae("No Results Found");s(Rt,Nt)},$$slots:{default:!0}})},children:(gt,Rt)=>{Fe(gt,{size:1,variant:"surface",children:(zt,Nt)=>{var ft=ae("Try updating your search or filter.");s(zt,ft)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(xt)},Kt=xt=>{var _t=P(),kt=b(_t),gt=zt=>{(function(Nt){On(Nt,{header:$t=>{Fe($t,{color:"primary",size:4,children:(qt,ht)=>{var Ot=ae("Work with Remote Agents");s(qt,Ot)},$$slots:{default:!0}})},children:($t,qt)=>{Fe($t,{color:"secondary",size:1,variant:"surface",children:(ht,Ot)=>{var Mt=ae(`Spin off a chunk of work to let your agent work in its own environment. When your agent is
    finished, you can review changes and create a PR.`);s(ht,Mt)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(zt)},Rt=zt=>{(function(Nt){On(Nt,{header:$t=>{Fe($t,{size:4,children:(qt,ht)=>{var Ot=ae("Work with Local Agents");s(qt,Ot)},$$slots:{default:!0}})},children:($t,qt)=>{Fe($t,{size:1,variant:"surface",children:(ht,Ot)=>{var Mt=ae("Create a new thread to get started");s(ht,Mt)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(zt)};k(kt,(zt=>{t(ue)==="remote"?zt(gt):zt(Rt,!1)}),!0),s(xt,_t)};k(Vt,(xt=>{t(ce).trim()!==""?xt(Qt):xt(Kt,!1)})),s(Ze,Bt)}})};k(Ue,(rt=>{t(oe)&&rt(Je)}),!0),s(ne,Me)};k(dt,(ne=>{t(le)?ne(yt):ne(Ve,!1)})),ac((()=>ao(We,"clientWidth",(ne=>Z(Oe,ne))))),kn(We,(ne=>lh?.(ne))),s(o,We),Ee(),y()}const Em={doHideStatusBars:!0,doHideSlashActions:!0,doHideAtMentions:!0,doHideNewThreadButton:!0,doHideMultimodalActions:!0,doHideContextBar:!0,doShowTurnSelector:!0},Tm="selectedTurnIndex";function Uw(o){const e={...Em};return o?.isRemoteAgentSshWindow&&(e.doHideAtMentions=!1),e}var Im=h('<div class="c-toggle-mode-button__icon"><!></div>'),Sm=h('<div class="c-toggle-mode-button__text svelte-587d52"> </div>');function xm(o,e){Ce(e,!0);const[n,r]=Xe(),a=H(e,"variant",3,"ghost"),i=H(e,"color",3,"neutral"),l=H(e,"disabled",3,!1),c=H(e,"hideText",3,!1),u=ei(),g=d((()=>Io(G(u,"$currentChatMode",n))));Et(o,{size:.5,get variant(){return a()},get color(){return i()},get disabled(){return l()},iconLeft:m=>{var v=Im(),w=_(v);Se(w,{get name(){return t(g).icon},size:1}),s(m,v)},iconRight:m=>{zc(m,{})},children:(m,v)=>{var w=P(),E=b(w),A=$=>{var C=Sm(),L=_(C);ge((()=>qe(L,t(g).primaryText))),s($,C)};k(E,($=>{c()||$(A)})),s(m,w)},$$slots:{iconLeft:!0,iconRight:!0,default:!0}}),Ee(),r()}const Rm="new-thread-button";var Mm=h('<div class="c-mode-display-dropdown"><!> <!> <!></div>'),Dm=h("<!> <!>",1),zm=h("<!> <!>",1),Nm=h('<div class="c-select-mode-dropdown__tooltip svelte-dwgejw"> <!></div>'),Om=h('<div class="c-select-mode-dropdown svelte-dwgejw"><!> <!></div>');function Lm(o,e){Ce(e,!0);const n=()=>G(y,"$currentChatMode",i),r=()=>G(p,"$enableAgentMode",i),a=()=>G(g,"$enableBackgroundAgents",i),[i,l]=Xe(),c=Tt(un.key),u=Tt(us.key),g=Ct("enableBackgroundAgents"),p=Ct("enableAgentMode"),y=ei(),m=ut();let v=d((()=>n()==="remoteAgent"?"New Remote Agent":n()==="localAgent"?"New Agent":"New Chat"));async function w(){E(),m(lt(tt.WEBVIEW.THREAD_CREATION_ATTEMPTED,{source:"button"}))}async function E(){await c.reportRemoteAgentNewThreadButtonEvent(Ka.click,Ji(n())),m(mo(n()))}let A=d((()=>c?.hasEverUsedRemoteAgent)),$=Te(void 0);function C(V){V?u.reportModeSelectorOpen():u.reportModeSelectorClose()}function L(){u.reportModeSelectorEvent(Cs.select,As.chat),m(qo("chat")),t($)?.requestClose()}async function S(){await u.reportModeSelectorEvent(Cs.select,As.agent),m(qo("localAgent")),t($)?.requestClose()}function I(){u.reportModeSelectorEvent(Cs.select,As.remoteAgent),u.handleSetToThreadType("remoteAgent"),G(t(A),"$hasEverUsedRemoteAgent",i)===!1&&c?.setHasEverUsedRemoteAgent(!0),t($)?.requestClose()}const O="neutral";var D=Om(),z=_(D),K=V=>{var R=zm(),x=b(R);on(x,{name:"newConversation",handler:E});var B=f(x,2);be(B,(()=>je.Root),((q,M)=>{Dt(M(q,{onOpenChange:C,nested:!1,children:(W,U)=>{var F=Dm(),T=b(F);be(T,(()=>je.Trigger),((J,Y)=>{Y(J,{children:(Q,X)=>{xm(Q,{hideText:!0,variant:"ghost",color:O})},$$slots:{default:!0}})}));var N=f(T,2);be(N,(()=>je.Content),((J,Y)=>{Y(J,{size:1,side:"bottom",align:"start",children:(Q,X)=>{var ee=Mm(),se=_(ee),we=me=>{{let Ae=d((()=>n()==="localAgent"));Es(me,{onSelect:S,chatMode:"localAgent",get selected(){return t(Ae)}})}};k(se,(me=>{r()&&me(we)}));var $e=f(se,2);{let me=d((()=>n()==="chat"));Es($e,{onSelect:L,chatMode:"chat",get selected(){return t(me)}})}var te=f($e,2),Ie=me=>{{let Ae=d((()=>n()==="remoteAgent"));Es(me,{onSelect:I,chatMode:"remoteAgent",get selected(){return t(Ae)}})}};k(te,(me=>{a()&&me(Ie)})),s(Q,ee)},$$slots:{default:!0}})})),s(W,F)},$$slots:{default:!0}}),(W=>Z($,W,!0)),(()=>t($)))})),s(V,R)};k(z,(V=>{(r()||a())&&V(K)}));var j=f(z,2);at(j,{side:"top",nested:!1,content:R=>{var x=Nm(),B=_(x),q=f(B);_n(q,{commandName:"newConversation",keysOnly:!0}),ge((()=>qe(B,`${t(v)??""} `))),s(R,x)},children:(R,x)=>{St(R,{size:.5,variant:"ghost-block",color:O,onclick:w,class:"c-select-mode-dropdown__new-thread-button","data-testid":Rm,children:(B,q)=>{Se(B,{name:"plus"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),s(o,D),Ee(),l()}var Pm=h('<div class="c-notification-content svelte-16xyaeg"><!></div>'),Bm=h('<div class="c-notification-badge svelte-16xyaeg"></div>'),Fm=h("<div><!> <!></div>");function qm(o,e){Ce(e,!0);const n=()=>G(i,"$remoteAgentsModel",r),[r,a]=Xe(),i=Tt(un.key);let l=d((()=>n().isActive?n().currentAgentId:null)),c=d((()=>(n().agentOverviews||[]).filter((A=>!!A.has_updates&&A.remote_agent_id!==t(l)&&A.status===Gn.agentIdle)).length));const u=Nc();let g=d((()=>G(u,"$hasUnseenThreads",r)||t(c)>0));var p=Fm();let y;var m=_(p),v=A=>{var $=Pm(),C=_($);et(C,(()=>e.children)),s(A,$)};k(m,(A=>{e.children&&A(v)}));var w=f(m,2),E=A=>{var $=Bm();Zt(3,$,(()=>ms),(()=>({duration:200,start:0}))),s(A,$)};k(w,(A=>{t(g)&&A(E)})),ge((()=>y=ct(p,1,"c-notification-wrapper svelte-16xyaeg",null,y,{"has-notification":t(g)}))),s(o,p),Ee(),a()}var Hm=h('<textarea style="field-sizing: content;" class="c-inline-edit-text-augment__input-field svelte-1grfd3z" rows="1"></textarea>'),Wm=h('<input style="field-sizing: content;" class="c-inline-edit-text-augment__input-field svelte-1grfd3z" type="text"/>'),Gm=h('<div class="c-inline-edit-text-augment__input svelte-1grfd3z"><!> <!></div>'),Um=h('<div role="button"><!></div>'),Vm=h("<div><!> <!></div>");function jm(o,e){Ce(e,!0);let n=H(e,"isEditable",3,!0),r=H(e,"isEditing",15,!1);at(o,{content:"Rename",nested:!1,hasPointerEvents:!1,children:(a,i)=>{(function(l,c){Ce(c,!0);let u=H(c,"value",15,""),g=H(c,"placeholder",3,""),p=H(c,"disabled",3,!1),y=H(c,"size",3,2),m=H(c,"isEditing",15,!1),v=H(c,"isEditable",3,!0),w=H(c,"multiline",3,!0),E=H(c,"showCommitButton",3,!0),A=H(c,"commitOnBlur",3,!0),$=H(c,"commitOnEnter",3,!0),C=H(c,"allowCtrlEnterForNewline",3,!0),L=H(c,"doubleClickToEdit",3,!0),S=H(c,"singleClickToEdit",3,!1),I=H(c,"onCancelEdit",3,(X=>{})),O=H(c,"onStartEdit",3,(()=>{})),D=H(c,"onChange",3,((X,ee)=>{})),z=H(c,"commitButtonVariant",3,"classic"),K=H(c,"commitButtonColor",3,"accent"),j=Te(void 0),V=Te(void 0),R=Te(Dn(u()));function x(){Z(R,u(),!0),m(!1),I()(u())}function B(X){$()&&X.key==="Enter"?w()&&C()&&(X.ctrlKey||X.metaKey||X.altKey||X.shiftKey)||(X.preventDefault(),M()):X.key==="Escape"&&(X.preventDefault(),x())}function q(){v()&&!p()&&(m()||(O()(),m(!0)),setTimeout((()=>{t(j)?.focus()}),0))}function M(){const X=t(R).trim(),ee=u();X!==ee&&(u(X),D()(X,ee)),setTimeout((()=>{t(j)?.blur()}),0),m(!1)}function W(){A()&&m()&&M()}function U(X){(S()||L()&&X.detail===2)&&q()}ot((()=>{m()||Z(R,u(),!0)})),ot((()=>{m()&&q()})),Jt((()=>{const X=ee=>{m()&&(c.outsideNode||t(V))?.contains(ee.target)===!1&&(A()?M():x())};return document.addEventListener("click",X),()=>{document.removeEventListener("click",X)}}));var F=Vm();let T;var N=_(F),J=X=>{var ee=Gm(),se=_(ee);Fe(se,{get size(){return y()},get weight(){return c.weight},get color(){return c.color},children:(te,Ie)=>{var me=P(),Ae=b(me),ce=ke=>{var re=Hm();re.__keydown=B,Dt(re,(ie=>Z(j,ie)),(()=>t(j))),ge((()=>{nt(re,"placeholder",g()),re.disabled=p()})),Ft("blur",re,W),la(re,(()=>t(R)),(ie=>Z(R,ie))),s(ke,re)},ue=ke=>{var re=Wm();re.__keydown=B,Dt(re,(ie=>Z(j,ie)),(()=>t(j))),ge((()=>{nt(re,"placeholder",g()),re.disabled=p()})),Ft("blur",re,W),la(re,(()=>t(R)),(ie=>Z(R,ie))),s(ke,re)};k(Ae,(ke=>{w()?ke(ce):ke(ue,!1)})),s(te,me)},$$slots:{default:!0}});var we=f(se,2),$e=te=>{St(te,{size:1,get variant(){return z()},get color(){return K()},get disabled(){return p()},onclick:M,children:(Ie,me)=>{Se(Ie,{name:"check"})},$$slots:{default:!0}})};k(we,(te=>{E()&&te($e)})),Zt(3,ee,(()=>Cr),(()=>({axis:"y",duration:150,scale:.9}))),s(X,ee)};k(N,(X=>{v()&&!p()&&m()&&X(J)}));var Y=f(N,2),Q=X=>{var ee=Um();let se;ee.__click=U,ee.__keydown=Ie=>{Ie.key==="Enter"&&q()};var we=_(ee),$e=Ie=>{var me=P(),Ae=b(me);et(Ae,(()=>c.children)),s(Ie,me)},te=Ie=>{Fe(Ie,{get size(){return y()},get weight(){return c.weight},get color(){return c.color},get value(){return u()},get placeholder(){return g()},children:(me,Ae)=>{var ce=ae();ge((()=>qe(ce,u()||g()))),s(me,ce)},$$slots:{default:!0}})};k(we,(Ie=>{c.children?Ie($e):Ie(te,!1)})),ge((()=>{se=ct(ee,1,"c-inline-edit-text-augment__text svelte-1grfd3z",null,se,{"c-inline-edit-text-augment__text--editable":v()&&!p()}),nt(ee,"tabindex",v()&&!p()?0:void 0),nt(ee,"aria-label",u()||g())})),Zt(3,ee,(()=>Cr),(()=>({axis:"y",duration:150,scale:.9}))),s(X,ee)};k(Y,(X=>{m()||X(Q)})),Dt(F,(X=>Z(V,X)),(()=>t(V))),ge((()=>T=ct(F,1,$n(["c-inline-edit-text-augment",c.class]),"svelte-1grfd3z",T,{"c-inline-edit-text-augment--is-editing":m(),"c-inline-edit-text-augment--disabled":p(),"c-inline-edit-text-augment--is-editable":v()}))),s(l,F),Ee()})(a,{size:1,weight:"bold",get value(){return e.title},color:"primary",get isEditable(){return n()},showCommitButton:!1,singleClickToEdit:!0,get onChange(){return e.onRename},get isEditing(){return r()},set isEditing(l){r(l)}})},$$slots:{default:!0}}),Ee()}function Km(o,e){Ce(e,!0);const n=()=>G(c,"$conversationId",r),[r,a]=Xe();let i=H(e,"isEditing",15,!1);const l=ut(),c=ln(),u=no(c);jm(o,{onRename:function(g){n()&&l(Za(n(),g))},get title(){return G(u,"$title",r)},get isEditing(){return i()},set isEditing(g){i(g)}}),Ee(),a()}function Ym(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"isEditing",15,!1);const i=Tt(un.key),l=ln();var c=P(),u=b(c),g=y=>{var m=P(),v=b(m);Ds(v,(()=>Ms((()=>import("./RemoteAgentThreadTitle-Dap5uKV9.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75]),import.meta.url)),null,((w,E)=>{var A=d((()=>{var{default:S}=t(E);return{RemoteAgentThreadTitle:S}})),$=d((()=>t(A).RemoteAgentThreadTitle)),C=P(),L=b(C);be(L,(()=>t($)),((S,I)=>{I(S,{get isEditing(){return a()},set isEditing(O){a(O)}})})),s(w,C)})),s(y,m)},p=y=>{var m=P(),v=b(m),w=E=>{Km(E,{get isEditing(){return a()},set isEditing(A){a(A)}})};k(v,(E=>{G(l,"$conversationId",n)&&E(w)}),!0),s(y,m)};k(u,(y=>{G(i,"$remoteAgentsModel",n)?.isActive?y(g):y(p,!1)})),s(o,c),Ee(),r()}gn(["keydown","click"]);var Xm=h('<div class="c-chat-header__tooltip svelte-1aejsn9">Toggle threads menu <!></div>'),Jm=h('<div class="c-chat-header__left svelte-1aejsn9"><!></div>'),Qm=h('<div class="c-chat-header__right-actions svelte-1aejsn9"><!></div>'),Zm=h('<div class="c-chat-header svelte-1aejsn9"><!> <div class="c-chat-header__title svelte-1aejsn9"><!></div> <!></div>');const Sn={header:"chat-layout-header-area",floating:"chat-layout-floating-area",message:"chat-layout-message-area",inputHint:"chat-layout-input-hint-area",notifications:"chat-layout-notifications-area",below_notifications:"chat-layout-below-notifications-area",divider:"chat-layout-divider-area",input:"chat-layout-input-area"};var ep=h('<div class="l-chat svelte-13iycb0" data-testid="main-chat"><div class="l-chat__header-area svelte-13iycb0"><!></div> <div class="l-chat__status-area svelte-13iycb0"><!></div> <div class="l-chat__msg-area svelte-13iycb0"><!></div> <div class="l-chat__input-hint hidden-when-empty svelte-13iycb0"><!></div> <div class="l-chat__notifications-area svelte-13iycb0"><div class="l-chat__notifications-area-container hidden-when-empty svelte-13iycb0"><!></div></div> <div class="l-chat__below_notifications-area hidden-when-empty svelte-13iycb0"></div> <div class="l-chat__divider-area hidden-when-empty svelte-13iycb0"><!></div> <div class="l-chat__input-area hidden-when-empty svelte-13iycb0"><!></div></div>');const il="thread-header-portal";var tp=h('<div class="l-thread-header__portal-container hidden-when-empty"></div>'),np=h('<div role="tabpanel"><!></div>');function dr(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"forceMount",3,!1);const i=xo();if(!i)throw new Error("TabPanelAugment must be used within a TabsAugment component");const{activeTab:l}=i.model;let c=d((()=>G(l,"$activeTab",n)===e.value)),u=d((()=>a()||t(c))),g=Te(!1),p=Te(!1),y=!1;function m(){Z(g,!1),Z(p,!1)}ot((()=>{t(c)!==y&&(t(c)?(Z(g,!0),Z(p,!1)):(Z(g,!1),Z(p,!0)),y=t(c))}));var v=P(),w=b(v),E=A=>{var $=np();let C;var L=_($);et(L,(()=>e.children??pt)),ge((()=>{C=ct($,1,$n(["ds-tab-panel",e.class]),"svelte-g8i1xj",C,{"ds-tab-panel--active":t(c),"ds-tab-panel--entering":t(g),"ds-tab-panel--leaving":t(p),"ds-tab-panel--hidden":!t(c)}),nt($,"aria-labelledby",`tab-${e.value??""}`),nt($,"aria-hidden",!t(c)),$.inert=!t(c),nt($,"data-state",t(c)?"active":"inactive")})),Ft("animationend",$,m),s(A,$)};k(w,(A=>{t(u)&&A(E)})),s(o,v),Ee(),r()}var sp=h("Discard All <!>",1),rp=h("<!> Keep All",1),op=h('<div class="c-bottom-controls svelte-2q851l"><!> <!></div>'),ap=h('<div class="edit-item__controls-container svelte-10i0l58"><!> <!> <!></div>'),ip=h('<button><div class="edit-item__info-container"><!></div> <!> <!></button>');function ll(o,e){Ce(e,!0);let n=H(e,"isFocused",3,!1),r=H(e,"onClickReview",3,Ps);var a=ip();let i;a.__click=function(...m){r()?.apply(this,m)};var l=_(a),c=_(l);at(c,{delayDurationMs:1e3,get content(){return e.qualifiedPathName.relPath},children:(m,v)=>{pr(m,{class:"edit-item__filespan",size:1,get filepath(){return e.qualifiedPathName.relPath},showIcon:!0})},$$slots:{default:!0}});var u=f(l,2),g=m=>{var v=ap(),w=_(v),E=S=>{var I=P(),O=b(I);et(O,(()=>e.actions)),s(S,I)};k(w,(S=>{e.actions&&S(E)}));var A=f(w,2),$=S=>{at(S,{content:"Open File",children:(I,O)=>{St(I,{size:.5,variant:"ghost-block",color:"neutral",onclick:D=>{D.stopPropagation(),e.onClickFile()},children:(D,z)=>{Se(D,{name:"external-link",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(A,(S=>{e.onClickFile&&S($)}));var C=f(A,2),L=S=>{at(S,{content:"Undo Changes",children:(I,O)=>{St(I,{size:.5,variant:"ghost-block",color:"neutral",onclick:D=>{D.stopPropagation(),e.onClickRevert()},children:(D,z)=>{Se(D,{name:"undo-2",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(C,(S=>{e.onClickRevert&&S(L)})),s(m,v)};k(u,(m=>{(e.onClickFile||e.onClickRevert||e.actions)&&m(g)}));var p=f(u,2),y=m=>{at(m,{content:"View Diff",children:(v,w)=>{wo(v,{size:0,get totalAddedLines(){return e.lineChanges.totalAddedLines},get totalRemovedLines(){return e.lineChanges.totalRemovedLines}})},$$slots:{default:!0}})};k(p,(m=>{e.lineChanges&&m(y)})),ge((()=>i=ct(a,1,"edit-item__container svelte-10i0l58",null,i,{"edit-item__container--focused":n()}))),Zt(3,a,(()=>Ao),(()=>({duration:150,axis:"y"}))),s(o,a),Ee()}function lp(o,e){Ce(e,!1);const n=sr.tryGetFromContext();Kn(),Lr(o,{footer:a=>{Et(a,{size:1,variant:"soft",onclick:()=>{n?.setActiveTab(mn.messageHistory)},iconLeft:l=>{Se(l,{name:"arrow-left"})},children:(l,c)=>{var u=ae("Return to Thread");s(l,u)},$$slots:{iconLeft:!0,default:!0}})},children:(a,i)=>{On(a,{header:c=>{Fe(c,{size:4,children:(u,g)=>{var p=ae("No Code Edits");s(u,p)},$$slots:{default:!0}})},children:(c,u)=>{Fe(c,{size:1,variant:"surface",children:(g,p)=>{var y=ae("Edits will appear here once your agent makes changes to files.");s(g,y)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})}}),Ee()}gn(["click"]);var cp=h('<div class="c-agent-edit-list-tab__header svelte-d13gz5"><!></div> <div class="c-edits-list svelte-d13gz5"><div class="c-edits-section svelte-d13gz5"></div></div>',1),dp=h('<div class="c-agent-edit-list-tab svelte-d13gz5"><!></div>');function up(o,e){Ce(e,!0);const n=()=>G(g,"$baselineTimestamp",r),[r,a]=Xe(),i=ut(),l=Nn(),c=jn(l),u=Bc(l),g=Fc(l),p=Fn();let y=d((()=>G(u,"$targetCheckpointSummary",r)?.filter((A=>A.changesSummary&&(A.changesSummary.totalAddedLines>0||A.changesSummary.totalRemovedLines>0)))));function m(A){i(qc(G(l,"$conversationId",r),A,n()))}var v=P(),w=b(v),E=A=>{var $=dp(),C=_($),L=I=>{var O=cp(),D=b(O);(function(j,V){Ce(V,!0);const R=()=>G(M,"$currentConversationId",B),x=()=>G(t(U),"$targetCheckpointHasChanges",B),[B,q]=Xe(),M=ln(),W=ut(),U=d((()=>Oc(R())));var F=op(),T=_(F);{let J=d((()=>!x()));Et(T,{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,get disabled(){return t(J)},onclick:async function(){W(Lc(R()))},children:(Y,Q)=>{{let X=d((()=>[nn.Hover])),ee=d((()=>x()?"Discard all changes":"No changes to undo"));at(Y,{get triggerOn(){return t(X)},get content(){return t(ee)},children:(se,we)=>{var $e=sp(),te=f(b($e));Se(te,{name:"trash-2"}),s(se,$e)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var N=f(T,2);{let J=d((()=>!x()));Et(N,{class:"c-bottom-controls__accept-btn",variant:"soft",color:"accent",size:1,get disabled(){return t(J)},onclick:async function(){W(Pc(R()))},children:(Y,Q)=>{{let X=d((()=>[nn.Hover])),ee=d((()=>x()?"Keep all changes and clear checkpoints":"No changes to keep"));at(Y,{get triggerOn(){return t(X)},get content(){return t(ee)},children:(se,we)=>{var $e=rp(),te=b($e);Se(te,{name:"check-check"}),s(se,$e)},$$slots:{default:!0}})}},$$slots:{default:!0}})}s(j,F),Ee(),q()})(_(D),{});var z=f(D,2),K=_(z);Pt(K,21,(()=>t(y)),(j=>j.qualifiedPathName.relPath),((j,V)=>{ll(j,{get qualifiedPathName(){return t(V).qualifiedPathName},get lineChanges(){return t(V).changesSummary},onClickFile:()=>{return R=t(V).qualifiedPathName,void i(vs({repoRoot:R.rootPath,pathName:R.relPath,allowOutOfWorkspace:!0}));var R},onClickReview:()=>{return R=t(V).qualifiedPathName,void p.showAgentReview(R,n(),void 0,!1,!0);var R},onClickRevert:()=>m(t(V).qualifiedPathName)})})),s(I,O)},S=I=>{lp(I,{})};k(C,(I=>{t(y).length>0?I(L):I(S,!1)})),s(A,$)};k(w,(A=>{G(c,"$isAgentic",r)&&A(E)})),s(o,v),Ee(),a()}const vp=og({component:"checkbox",parts:["root","group","group-label","input"]}),gp=new Wi("Checkbox.Group"),cl=new Wi("Checkbox.Root");class Mo{static create(e,n=null){return cl.set(new Mo(e,n))}opts;group;#t=d((()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current));get trueName(){return t(this.#t)}set trueName(e){Z(this.#t,e)}#e=d((()=>!(!this.group||!this.group.opts.required.current)||this.opts.required.current));get trueRequired(){return t(this.#e)}set trueRequired(e){Z(this.#e,e)}#n=d((()=>!(!this.group||!this.group.opts.disabled.current)||this.opts.disabled.current));get trueDisabled(){return t(this.#n)}set trueDisabled(e){Z(this.#n,e)}#r=d((()=>!(!this.group||!this.group.opts.readonly.current)||this.opts.readonly.current));get trueReadonly(){return t(this.#r)}set trueReadonly(e){Z(this.#r,e)}attachment;constructor(e,n){this.opts=e,this.group=n,this.attachment=tg(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),lo.pre([()=>co(this.group?.opts.value.current),()=>this.opts.value.current],(([r,a])=>{r&&a&&(this.opts.checked.current=r.includes(a))})),lo.pre((()=>this.opts.checked.current),(r=>{this.group&&(r?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))}))}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key===ng&&e.preventDefault(),e.key===sg&&(e.preventDefault(),this.#s()))}#s(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){this.trueDisabled||this.trueReadonly||(this.opts.type.current!=="submit"?(e.preventDefault(),this.#s()):this.#s())}#o=d((()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current})));get snippetProps(){return t(this.#o)}set snippetProps(e){Z(this.#o,e)}#a=d((()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":rg(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":oa(this.trueRequired),"aria-readonly":oa(this.trueReadonly),"data-disabled":ra(this.trueDisabled),"data-readonly":ra(this.trueReadonly),"data-state":hp(this.opts.checked.current,this.opts.indeterminate.current),[vp.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment})));get props(){return t(this.#a)}set props(e){Z(this.#a,e)}}class Do{static create(){return new Do(cl.get())}root;#t=d((()=>this.root.group?!(this.root.opts.value.current===void 0||!this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current));get trueChecked(){return t(this.#t)}set trueChecked(e){Z(this.#t,e)}#e=d((()=>!!this.root.trueName));get shouldRender(){return t(this.#e)}set shouldRender(e){Z(this.#e,e)}constructor(e){this.root=e,this.onfocus=this.onfocus.bind(this)}onfocus(e){this.root.opts.ref.current instanceof HTMLElement&&this.root.opts.ref.current.focus()}#n=d((()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly,onfocus:this.onfocus})));get props(){return t(this.#n)}set props(e){Z(this.#n,e)}}function hp(o,e){return e?"indeterminate":o?"checked":"unchecked"}var mp=h("<button><!></button>"),pp=h("<!> <!>",1);function fp(o,e){const n=ic();Ce(e,!0);let r=H(e,"checked",15,!1),a=H(e,"ref",15,null),i=H(e,"disabled",3,!1),l=H(e,"required",3,!1),c=H(e,"name",19,(()=>{})),u=H(e,"value",3,"on"),g=H(e,"id",19,(()=>ig(n))),p=H(e,"indeterminate",15,!1),y=H(e,"type",3,"button"),m=Os(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const v=gp.getOr(null);v&&u()&&(v.opts.value.current.includes(u())?r(!0):r(!1)),lo.pre((()=>u()),(()=>{v&&u()&&(v.opts.value.current.includes(u())?r(!0):r(!1))}));const w=Mo.create({checked:Hn((()=>r()),(S=>{r(S),e.onCheckedChange?.(S)})),disabled:Hn((()=>i()??!1)),required:Hn((()=>l())),name:Hn((()=>c())),value:Hn((()=>u())),id:Hn((()=>g())),ref:Hn((()=>a()),(S=>a(S))),indeterminate:Hn((()=>p()),(S=>{p(S),e.onIndeterminateChange?.(S)})),type:Hn((()=>y())),readonly:Hn((()=>!!e.readonly))},v),E=d((()=>lg({...m},w.props)));var A=pp(),$=b(A),C=S=>{var I=P(),O=b(I);{let D=d((()=>({props:t(E),...w.snippetProps})));et(O,(()=>e.child),(()=>t(D)))}s(S,I)},L=S=>{var I=mp();xr(I,(()=>({...t(E)})));var O=_(I);et(O,(()=>e.children??pt),(()=>w.snippetProps)),s(S,I)};k($,(S=>{e.child?S(C):S(L,!1)})),(function(S,I){Ce(I,!1);const O=Do.create();Kn();var D=P(),z=b(D),K=j=>{ag(j,es((()=>O.props)))};k(z,(j=>{O.shouldRender&&j(K)})),s(S,D),Ee()})(f($,2),{}),s(o,A),Ee()}var _p=ps('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.2892 4.96914C15.6744 5.221 15.7825 5.73746 15.5307 6.12266L9.86399 14.7894C9.73044 14.9936 9.51408 15.129 9.27203 15.1599C9.02996 15.1908 8.78652 15.114 8.60595 14.9499L4.93928 11.6166C4.59873 11.307 4.57364 10.7799 4.88323 10.4394C5.19281 10.0988 5.71985 10.0737 6.0604 10.3833L9.00389 13.0592L14.1357 5.21058C14.3876 4.82538 14.904 4.71728 15.2892 4.96914Z" fill="currentColor"></path></svg>'),yp=ps('<svg width="6" height="2" viewBox="0 0 6 2" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.666626 0.999992C0.666626 0.742261 0.875562 0.533325 1.13329 0.533325H4.86663C5.12436 0.533325 5.33329 0.742261 5.33329 0.999992C5.33329 1.25772 5.12436 1.46666 4.86663 1.46666H1.13329C0.875562 1.46666 0.666626 1.25772 0.666626 0.999992Z" fill="currentColor"></path></svg>'),bp=h('<div data-slot="checkbox-indicator" class="c-checkbox-augment__indicator svelte-1e15djx"><!></div>');function wa(o,e){Ce(e,!0);let n=H(e,"ref",15,null),r=H(e,"checked",15,!1),a=H(e,"indeterminate",15,!1),i=H(e,"size",3,2),l=H(e,"variant",3,"primary"),c=H(e,"state",19,(()=>{})),u=Os(e,["$$slots","$$events","$$legacy","ref","checked","indeterminate","size","variant","state","class"]);const g=d((()=>`c-checkbox-augment--size-${i()}`)),p=d((()=>`c-checkbox-augment--variant-${l()}`)),y=d((()=>c()==="hover"?"c-checkbox-augment--hover":c()==="active"?"c-checkbox-augment--active":""));var m=P(),v=b(m);{const w=(A,$)=>{var C=bp(),L=_(C),S=O=>{(function(D){var z=_p();s(D,z)})(O)},I=O=>{var D=P(),z=b(D),K=j=>{(function(V){var R=yp();s(V,R)})(j)};k(z,(j=>{$?.().indeterminate&&j(K)}),!0),s(O,D)};k(L,(O=>{$?.().checked?O(S):O(I,!1)})),s(A,C)};let E=d((()=>["c-checkbox-augment",t(g),t(p),t(y),e.class]));be(v,(()=>fp),((A,$)=>{$(A,es({"data-slot":"checkbox",get class(){return t(E)}},(()=>u),{get ref(){return n()},set ref(C){n(C)},get checked(){return r()},set checked(C){r(C)},get indeterminate(){return a()},set indeterminate(C){a(C)},children:w,$$slots:{default:!0}}))}))}s(o,m),Ee()}var $p=h('<div class="c-task-filter-dropdown__filter-item svelte-126g2tg"><!> <!> <div class="c-task-filter-dropdown__filter-item-count svelte-126g2tg"> </div></div>'),wp=h('<div class="c-task-filter-dropdown__filter-item svelte-126g2tg"><!> <!> <!> <div class="c-task-filter-dropdown__filter-item-count svelte-126g2tg"> </div></div>'),kp=h("<!> <!> <!>",1),Ap=h("<!> <!>",1);function Cp(o,e){Ce(e,!0);const n=()=>G(v,"$taskCounts",r),[r,a]=Xe();let i=H(e,"initiallyOpen",3,!1);const l=Cv(),c=ln(),u=d((()=>l.hasActiveFilters)),g=d((()=>l.allSelected)),p=d((()=>l.isIndeterminate)),y=d((()=>l.activeFilters)),m=d((()=>l.taskFilters)),v=Hc(c),w=d((()=>Object.values(n()).reduce((($,C)=>$+C),0)));var E=P(),A=b(E);be(A,(()=>je.Root),(($,C)=>{C($,{get defaultOpen(){return i()},children:(L,S)=>{var I=Ap(),O=b(I);be(O,(()=>je.Trigger),((z,K)=>{K(z,{children:(j,V)=>{Et(j,{size:.5,variant:"soft",color:"neutral",iconLeft:B=>{Se(B,{name:"sliders-vertical",size:1})},iconRight:B=>{var q=P(),M=b(q);be(M,(()=>je.Chevron),((W,U)=>{U(W,{})})),s(B,q)},children:(B,q)=>{Fe(B,{size:1,children:(M,W)=>{var U=P(),F=b(U),T=J=>{var Y=ae();ge((()=>qe(Y,`${t(y).size??""} Selected`))),s(J,Y)},N=J=>{var Y=ae("Filter Tasks");s(J,Y)};k(F,(J=>{t(u)?J(T):J(N,!1)})),s(M,U)},$$slots:{default:!0}})},$$slots:{iconLeft:!0,iconRight:!0,default:!0}})},$$slots:{default:!0}})}));var D=f(O,2);be(D,(()=>je.Content),((z,K)=>{K(z,{side:"bottom",align:"start",size:1,children:(j,V)=>{var R=kp(),x=b(R);be(x,(()=>je.Item),((M,W)=>{W(M,{onSelect:()=>{l.toggleAll()},children:(U,F)=>{var T=$p(),N=_(T);wa(N,{get indeterminate(){return t(p)},get checked(){return t(g)},onclick:X=>X.preventDefault(),size:1,variant:"primary"});var J=f(N,2);Fe(J,{size:1,color:"neutral",children:(X,ee)=>{var se=ae("All");s(X,se)},$$slots:{default:!0}});var Y=f(J,2),Q=_(Y);ge((()=>qe(Q,t(w)))),s(U,T)},$$slots:{default:!0}})}));var B=f(x,2);be(B,(()=>je.Separator),((M,W)=>{W(M,{})}));var q=f(B,2);Pt(q,17,(()=>t(m)),(M=>M.value),((M,W)=>{const U=d((()=>t(W).value)),F=d((()=>t(y).has(t(U))));var T=P(),N=b(T);be(N,(()=>je.Item),((J,Y)=>{Y(J,{onSelect:()=>(function(Q){l.toggleFilter(Q)})(t(U)),children:(Q,X)=>{var ee=wp(),se=_(ee);wa(se,{get checked(){return t(F)},onclick:me=>me.preventDefault(),size:1,variant:"primary"});var we=f(se,2);Ev(we,{get taskState(){return t(U)},size:2});var $e=f(we,2);Fe($e,{size:1,color:"neutral",children:(me,Ae)=>{var ce=ae();ge((()=>qe(ce,t(W).label))),s(me,ce)},$$slots:{default:!0}});var te=f($e,2),Ie=_(te);ge((()=>qe(Ie,n()[t(W).value]??0))),s(Q,ee)},$$slots:{default:!0}})})),s(M,T)})),s(j,R)},$$slots:{default:!0}})})),s(L,I)},$$slots:{default:!0}})})),s(o,E),Ee(),a()}var Ep=h("<!> <!> <!> <!> <!>",1),Tp=h("<!> <!>",1),Ip=h("<!> <!>",1),Sp=h('<div class="c-task-panel-header svelte-1bdxp6v"><!> <!> <!> <div class="c-task-panel-header__right svelte-1bdxp6v"><!></div></div>');function xp(o,e){Ce(e,!0);const n=()=>G(y,"$rootTask",a),r=()=>G(c,"$currentConversationId",a),[a,i]=Xe(),l=ut(),c=Nn(),u=ko(),g=na(),p=Tv(),y=so(c),m=sr.tryGetFromContext(),v=d((()=>n()?.subTasksData&&n().subTasksData.length>0));function w(V){for(const R of V)if(R.state===Hr.COMPLETE||R.subTasksData&&w(R.subTasksData))return!0;return!1}function E(V){for(const R of V)if(R.state===Hr.NOT_STARTED||R.state===Hr.IN_PROGRESS||R.subTasksData&&E(R.subTasksData))return!0;return!1}const A=d((()=>!!n()?.subTasksData&&w(n().subTasksData))),$=d((()=>!!n()?.subTasksData&&E(n().subTasksData)));async function C(){u?.resetFilters(),g?.reportAddTask();const V=n()?.subTasksData||[],R=V[V.length-1];if(R&&!R.name.trim()&&!R.description.trim())return p?.cancelDeletion(),void Yc(R.uuid);l(ti(r(),"",""))}async function L(){g?.reportClearCompletedTasks(),l(Xc(r()))}async function S(){m&&m.setActiveTab(mn.messageHistory),g?.reportRunAllTasks(),l(Jc(r()))}var I=Sp(),O=_(I);Cp(O,{});var D=f(O,2);{let V=d((()=>[nn.Hover]));at(D,{content:"Add New",get triggerOn(){return t(V)},children:(R,x)=>{St(R,{size:.5,variant:"ghost-block",color:"neutral",onclick:C,children:(B,q)=>{Se(B,{name:"circle-fading-plus",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})}var z=f(D,2),K=V=>{var R=Ip(),x=b(R);{let q=d((()=>t(A)?"Clear Completed":"No completed tasks")),M=d((()=>[nn.Hover]));at(x,{get content(){return t(q)},get triggerOn(){return t(M)},children:(W,U)=>{{let F=d((()=>!t(A)));St(W,{size:.5,variant:"ghost-block",color:"neutral",onclick:L,get disabled(){return t(F)},children:(T,N)=>{Se(T,{name:"brush-cleaning",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}var B=f(x,2);{let q=d((()=>t($)?"Run All":"No tasks to run")),M=d((()=>[nn.Hover]));at(B,{get content(){return t(q)},get triggerOn(){return t(M)},children:(W,U)=>{{let F=d((()=>!t($)));St(W,{size:.5,variant:"ghost-block",color:"neutral",onclick:S,get disabled(){return t(F)},children:(T,N)=>{Se(T,{name:"play",size:2})},$$slots:{default:!0}})}},$$slots:{default:!0}})}s(V,R)};k(z,(V=>{t(v)&&V(K)}));var j=f(z,2);(function(V,R){Ce(R,!0);const x=()=>G(T,"$rootTask",M),B=()=>G(N,"$isImportingExporting",M),q=()=>G(F,"$currentConversationId",M),[M,W]=Xe();let U=H(R,"initiallyOpen",3,!1);const F=Nn(),T=so(F),N=Wc(F),J=ut(),Y=na(),{store:Q}=rs();let X=Te(void 0);const ee=()=>t(X)?.requestClose(),se=d((()=>x()?.subTasksData&&x().subTasksData.length>0));async function we(){B()||(Y?.reportExportTaskList(),J(Gc(q())),ee?.())}async function $e(){B()||(Y?.reportImportTaskList(),J(Uc(q())),ee?.())}async function te(){if(Y?.reportContinueTasksInNewChat(),!x())return;const ce=Nn.select(Q.getState()),ue=J(Vc(ce)),ke=await ue.promise;J(jc({},{rootTask:ke})),ee?.()}async function Ie(){Y?.reportClearAllTasks(),J(Kc(q())),ee?.()}var me=P(),Ae=b(me);be(Ae,(()=>je.Root),((ce,ue)=>{Dt(ue(ce,{get defaultOpen(){return U()},children:(ke,re)=>{var ie=Tp(),he=b(ie);be(he,(()=>je.Trigger),((le,_e)=>{_e(le,{children:(oe,ve)=>{St(oe,{size:.5,variant:"ghost-block",color:"neutral",get disabled(){return B()},children:(ye,Ne)=>{var Re=P(),Oe=b(Re),Be=xe=>{Vn(xe,{size:1})},Ge=xe=>{Se(xe,{name:"ellipsis",size:2})};k(Oe,(xe=>{B()?xe(Be):xe(Ge,!1)})),s(ye,Re)},$$slots:{default:!0}})},$$slots:{default:!0}})}));var de=f(he,2);be(de,(()=>je.Content),((le,_e)=>{_e(le,{size:1,side:"bottom",align:"end",children:(oe,ve)=>{var ye=Ep(),Ne=b(ye);{const xe=He=>{Se(He,{name:"share",size:1})};let ze=d((()=>B()||!t(se)));be(Ne,(()=>je.Item),((He,Le)=>{Le(He,{onSelect:we,get disabled(){return t(ze)},iconLeft:xe,children:(De,pe)=>{var fe=ae("Export to Markdown");s(De,fe)},$$slots:{iconLeft:!0,default:!0}})}))}var Re=f(Ne,2);{const xe=ze=>{Se(ze,{name:"file-input",size:1})};be(Re,(()=>je.Item),((ze,He)=>{He(ze,{onSelect:$e,get disabled(){return B()},iconLeft:xe,children:(Le,De)=>{var pe=ae("Import from Markdown");s(Le,pe)},$$slots:{iconLeft:!0,default:!0}})}))}var Oe=f(Re,2);{const xe=He=>{Se(He,{name:"wand-sparkles",size:1})};let ze=d((()=>!t(se)));be(Oe,(()=>je.Item),((He,Le)=>{Le(He,{onSelect:te,get disabled(){return t(ze)},iconLeft:xe,children:(De,pe)=>{var fe=ae("Continue in New Chat");s(De,fe)},$$slots:{iconLeft:!0,default:!0}})}))}var Be=f(Oe,2);be(Be,(()=>je.Separator),((xe,ze)=>{ze(xe,{})}));var Ge=f(Be,2);{const xe=He=>{Se(He,{name:"trash-2",size:1})};let ze=d((()=>!t(se)));be(Ge,(()=>je.Item),((He,Le)=>{Le(He,{onSelect:Ie,get disabled(){return t(ze)},iconLeft:xe,children:(De,pe)=>{var fe=ae("Clear Task List");s(De,fe)},$$slots:{iconLeft:!0,default:!0}})}))}s(oe,ye)},$$slots:{default:!0}})})),s(ke,ie)},$$slots:{default:!0}}),(ke=>Z(X,ke,!0)),(()=>t(X)))})),s(V,me),Ee(),W()})(_(j),{}),s(o,I),Ee(),i()}function Rp(o,e){Ce(e,!1);const[n,r]=Xe(),a=ut(),i=Nn(),l=ko();async function c(){l?.resetFilters(),a(ti(G(i,"$currentConversationId",n),"",""))}const u=sr.tryGetFromContext();Kn(),Lr(o,{footer:p=>{Et(p,{size:1,variant:"soft",onclick:()=>{u?.setActiveTab(mn.messageHistory)},iconLeft:m=>{Se(m,{name:"arrow-left"})},children:(m,v)=>{var w=ae("Return to Thread");s(m,w)},$$slots:{iconLeft:!0,default:!0}})},children:(p,y)=>{On(p,{header:w=>{Fe(w,{color:"primary",size:4,children:(E,A)=>{var $=ae("Get Started with Tasks");s(E,$)},$$slots:{default:!0}})},footer:w=>{Et(w,{size:1,variant:"soft",onclick:()=>c(),iconLeft:A=>{Se(A,{name:"circle-fading-plus"})},children:(A,$)=>{var C=ae("Add Task");s(A,C)},$$slots:{iconLeft:!0,default:!0}})},children:(w,E)=>{Fe(w,{size:1,variant:"surface",children:(A,$)=>{var C=ae(`Ask your agent to make a plan which you can refine here in your agent task list. Or, make your
      own plan.`);s(A,C)},$$slots:{default:!0}})},$$slots:{header:!0,footer:!0,default:!0}})}}),Ee(),r()}function Mp(o,e){Ce(e,!1);const n=ko();Kn(),Lr(o,{children:(r,a)=>{On(r,{header:c=>{Fe(c,{size:4,children:(u,g)=>{var p=ae("No Results Found");s(u,p)},$$slots:{default:!0}})},footer:c=>{Et(c,{size:1,variant:"soft",onclick:()=>{n?.resetFilters()},iconLeft:g=>{Se(g,{name:"undo-2"})},children:(g,p)=>{var y=ae("Reset Filters");s(g,y)},$$slots:{iconLeft:!0,default:!0}})},children:(c,u)=>{Fe(c,{size:1,variant:"surface",children:(g,p)=>{var y=ae("Try updating your search or filter.");s(g,y)},$$slots:{default:!0}})},$$slots:{header:!0,footer:!0,default:!0}})}}),Ee()}var Dp=h('<div class="c-task-panel__list svelte-z43r1o"><!></div>'),zp=h('<div class="c-task-panel__empty svelte-z43r1o"><!></div>'),Np=h('<div class="c-task-panel svelte-z43r1o"><div class="c-task-panel__header svelte-z43r1o"><!></div> <!></div>');function Op(o,e){Ce(e,!0);const n=()=>G(p,"$rootTask",r),[r,a]=Xe(),i=ut(),l=Nn(),c=jn(l),{store:u}=rs(),g=new Mv,p=so(l),y=d((()=>Zc(n()?.uuid,g.activeFilters)));Iv(g);const m=new Sv({store:u,version:xv.v2});Rv(m),Jt((()=>{n()&&m.reportViewTaskList(),i(Qc(G(l,"$currentConversationId",r)))}));var v=P(),w=b(v),E=A=>{var $=Np(),C=_($);xp(_(C),{});var L=f(C,2),S=O=>{var D=Dp(),z=_(D);Dv(z,{get taskUuid(){return n().uuid},isRootTask:!0,editable:!0}),Zt(1,D,(()=>ns),(()=>({duration:150,y:10}))),s(O,D)},I=O=>{var D=P(),z=b(D),K=V=>{Mp(V,{})},j=V=>{var R=zp();Rp(_(R),{}),s(V,R)};k(z,(V=>{n()?.subTasks.length?V(K):V(j,!1)}),!0),s(O,D)};k(L,(O=>{G(t(y),"$visibleSubTasks",r).length>0&&n()?.subTasks?.length?O(S):O(I,!1)})),s(A,$)};k(w,(A=>{G(c,"$isAgentic",r)&&n()&&A(E)})),s(o,v),Ee(),a()}var Lp=h('<div class="c-lazy-loading-error"><!></div>');function Pp(o,e){Ce(e,!0);const[n,r]=Xe();let a=Os(e,["$$slots","$$events","$$legacy","children"]);const i=zv(),l=i?.enabled??Xt(!1);var c=P(),u=b(c),g=y=>{var m=P(),v=b(m);Ds(v,(()=>Ms((()=>import("./AugmentMessage-DdGCJFWr.js").then((w=>w.J))),__vite__mapDeps([45,1,2,46,9,10,11,12,47,22,48,20,21,49,50,32,33,13,14,51,52,8,5,15,53,54,55,6,7,16,17,18,19,23,24,25,26,27,28,29,56,3,4,30,31,34,35,57,58,59,60,61,39,40,41,43,38,62]),import.meta.url)),(w=>{}),((w,E)=>{var A=d((()=>{var{default:S}=t(E);return{IntersectionDisplay:S}})),$=d((()=>t(A).IntersectionDisplay)),C=P(),L=b(C);be(L,(()=>t($)),((S,I)=>{I(S,es((()=>a),{children:(O,D)=>{var z=P(),K=b(z);et(K,(()=>e.children??pt)),s(O,z)},$$slots:{default:!0}}))})),s(w,C)}),((w,E)=>{var A=Lp(),$=_(A);Fe($,{size:1,color:"error",type:"monospace",children:(C,L)=>{var S=ae();ge((()=>qe(S,t(E)+""))),s(C,S)},$$slots:{default:!0}}),s(w,A)})),s(y,m)},p=y=>{var m=P(),v=b(m);et(v,(()=>e.children??pt)),s(y,m)};k(u,(y=>{G(l,"$enabled",n)?y(g):y(p,!1)})),s(o,c),Ee(),r()}const dl=(o,e,n)=>(tr(e)&&bo(e)&&o.length>0||$o(e)&&o.length>0?o[o.length-1].push({turn:e,idx:n}):o.push([{turn:e,idx:n}]),o),Bp=Li((o=>o.reduce(dl,[]))),Fp=Li((o=>{if(!Array.isArray(o))return console.warn("groupByToolUses received non-array input:",o),[];const e=structuredClone(o),n=[];let r=0;for(let a=0;a<e.length;a++){const i=e[a],l=r;if(ta(i)&&i){i.structured_output_nodes=i.structured_output_nodes?.map((c=>({...c,requestId:i.request_id})));for(let c=a+1;c<e.length;c++){const u=e[c],g=!u.response_text;if(!(u.response_text&&u.response_text.length<100)&&!g||!ta(u))break;{const p=u.structured_output_nodes?.map((y=>({...y,requestId:u.request_id})));i.structured_output_nodes?.push(...p??[]),r++,e.splice(c,1),c--}}}dl(n,i,l),r++}return n})),qp=(o,e,n,r,a)=>{const i={retryMessage:void 0,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1};return((l,c)=>c&&ed(c)&&c.status===An.cancelled?!0:l?.status===An.cancelled)(o,e)?i.showStopped=!0:r===Pn.running?o?.isRetriable&&o?.display_error_message?i.retryMessage=o.display_error_message:a&&n&&o?.status!=="sent"&&(i.showRunningSpacer=!0):r===Pn.awaitingUserAction&&(i.showAwaitingUserInput=!0,i.showRunningSpacer=!0),i},Hp=(o,e,n=!1)=>{const r=e.getCurrentChatHistory(),a=r.findLast(tr),i=n?Fp(r):Bp(r),l=(u=>u.currentAgent?.workspace_status===mr.workspaceResuming||u.isCurrentAgentRunning?Pn.running:Pn.notRunning)(e),c=((u,g,p,y)=>{const m={retryMessage:void 0,showGeneratingResponse:!1,showResumingRemoteAgent:!1,showAwaitingUserInput:!1,showRunningSpacer:!1,showStopped:!1,remoteAgentErrorConfig:void 0,showPaused:!1};if(p===Pn.running?u?.isRetriable&&u?.display_error_message?m.retryMessage=u.display_error_message:y.currentAgent?.workspace_status===mr.workspaceResuming?m.showResumingRemoteAgent=!0:g.phase!==td.running?m.showGeneratingResponse=!0:m.showRunningSpacer=!0:p===Pn.awaitingUserAction&&(m.showAwaitingUserInput=!0,m.showRunningSpacer=!0),y.currentAgent?.workspace_status===mr.workspacePaused&&(m.showPaused=!0),y.sendMessageError&&y.currentAgentId){const w=y.currentAgentId,E=y.sendMessageError;m.remoteAgentErrorConfig={error:E,onRetry:E.canRetry&&E.failedExchangeId?()=>y.retryFailedMessage(w,E.failedExchangeId):void 0,onDelete:E.type===Ni.agentFailed?()=>y.deleteAgent(w):void 0}}else if(y.agentChatHistoryError&&y.currentAgentId){const w=y.currentAgentId;m.remoteAgentErrorConfig={error:y.agentChatHistoryError,onRetry:()=>y.refreshAgentChatHistory(w)}}return m})(a,o,l,e);return{chatHistory:Array.isArray(r)?r:[],groupedChatHistory:i,lastGroupConfig:c}};var Wp=h('Connection lost. Please <button class="svelte-1ks0fxf">try again</button> to restart the conversation!',1),Gp=h('We encountered an issue sending your message. Please <button class="svelte-1ks0fxf">try again</button>',1),Up=h('<div class="c-msg-list__request-id svelte-1ks0fxf"><span> </span> <!></div>'),Vp=h('<div class="c-msg-list__turn-response-failure svelte-1ks0fxf"><!> <!></div>');gn(["click"]);var jp=h("<div><!></div>"),Kp=h('<div class="c-expandable-box svelte-951e4z"><!> <!></div>');function Yp(o,e){Ce(e,!0);let n,r=Te(!1),a=Te(!1),i=Te(0);function l(){Z(r,!t(r))}function c(){(function(){t(r)&&n&&n.firstElementChild instanceof HTMLElement&&n.lastElementChild instanceof HTMLElement&&n.firstElementChild.offsetTop>=n.lastElementChild.offsetTop&&Z(r,!1)})(),(function(){n&&Z(i,n.clientHeight,!0)})()}Jt((()=>{c();const v=new ResizeObserver(c);return v.observe(n),()=>{v.disconnect()}}));var u=Kp();let g;var p=_(u);xi(p,{get hasOverflow(){return t(a)},set hasOverflow(v){Z(a,v,!0)},children:(v,w)=>{var E=jp();let A;var $=_(E);et($,(()=>e.children??pt)),Dt(E,(C=>n=C),(()=>n)),ge((()=>A=ct(E,1,"c-expandable-box__contents svelte-951e4z",null,A,{"is-expanded":t(r)}))),s(v,E)},$$slots:{default:!0}});var y=f(p,2),m=v=>{{let w=d((()=>t(r)?"Collapse context":"Expand context"));St(v,{variant:"ghost-block",color:"neutral",size:.5,get title(){return t(w)},onclick:l,children:(E,A)=>{Se(E,{name:"chevrons-up-down"})},$$slots:{default:!0}})}};k(y,(v=>{(t(a)||t(r))&&v(m)})),ge((()=>g=Un(u,"",g,{"--container-height":t(i)?t(i)+"px":"auto"}))),s(o,u),Ee()}var Xp=h('<span class="c-pin-button"><!></span>'),Jp=h('<div class="c-context-badge__left-icon svelte-1c0qk5u"><!></div>'),Qp=h("<!> <!>",1),Zp=h('<button class="c-context-badge__button svelte-1c0qk5u" type="button"><div class="c-context-badge__content svelte-1c0qk5u"><!> <!></div></button>'),ef=h('<div class="c-context-badge__content svelte-1c0qk5u"><!> <!></div>'),tf=h('<div class="c-context-badge svelte-1c0qk5u"><!></div>');function Ws(o,e){Ce(e,!0);const n=C=>{var L=P(),S=b(L),I=O=>{var D=P(),z=b(D);et(z,(()=>e.chaser)),s(O,D)};k(S,(O=>{e.chaser&&O(I)})),s(C,L)},r=C=>{var L=P(),S=b(L),I=D=>{var z=P(),K=b(z);et(K,(()=>e.leftButtons)),s(D,z)},O=D=>{var z=P(),K=b(z),j=V=>{var R=Jp(),x=_(R);be(x,(()=>Mn.IconButton),((B,q)=>{q(B,{disabled:!0,children:(M,W)=>{var U=P(),F=b(U),T=J=>{var Y=P(),Q=b(Y);et(Q,(()=>e.leftIcon)),s(J,Y)},N=J=>{Se(J,{name:"file"})};k(F,(J=>{e.leftIcon?J(T):J(N,!1)})),s(M,U)},$$slots:{default:!0}})})),s(V,R)};k(K,(V=>{g()||V(j)}),!0),s(D,z)};k(S,(D=>{e.leftButtons?D(I):D(O,!1)})),s(C,L)},a=C=>{var L=Qp(),S=b(L),I=z=>{var K=P(),j=b(K);et(j,(()=>e.rightButtons)),s(z,K)};k(S,(z=>{e.rightButtons&&z(I)}));var O=f(S,2),D=z=>{var K=P(),j=b(K);be(j,(()=>Mn.IconButton),((V,R)=>{R(V,{class:"c-context-badge__remove-btn",get title(){return c().title},onclick:v,get size(){return l()},variant:"ghost",color:"neutral",children:(x,B)=>{Se(x,{name:"x"})},$$slots:{default:!0}})})),s(z,K)};k(O,(z=>{c()&&z(D)})),s(C,L)};let i=H(e,"color",3,"neutral"),l=H(e,"size",3,1),c=H(e,"removeBtn",19,(()=>{})),u=H(e,"showWarning",19,(()=>{})),g=H(e,"hideLeftIcon",3,!1),p=H(e,"variant",3,"soft"),y=H(e,"asButton",3,!0),m=H(e,"square",3,!1);const v=C=>{if(C.stopPropagation(),c()===void 0)throw new Error("No remove button provided");c().onRemove()},w=d((()=>e.leftButtons||!g())),E=d((()=>e.rightButtons||c()));var A=tf(),$=_(A);{let C=d((()=>t(w)?r:void 0)),L=d((()=>t(E)?a:void 0));be($,(()=>Mn.Root),((S,I)=>{I(S,{get color(){return i()},get size(){return l()},get variant(){return p()},get square(){return m()},get chaser(){return n},get leftButtons(){return t(C)},get rightButtons(){return t(L)},children:(O,D)=>{var z=P(),K=b(z),j=V=>{var R=P(),x=b(R),B=M=>{var W=Zp();W.__click=function(...Y){e.onclick?.apply(this,Y)};var U=_(W),F=_(U),T=Y=>{var Q=P(),X=b(Q);et(X,(()=>e.children)),s(Y,Q)};k(F,(Y=>{e.children&&Y(T)}));var N=f(F,2),J=Y=>{Se(Y,{name:"circle-alert"})};k(N,(Y=>{u()&&Y(J)})),s(M,W)},q=M=>{var W=ef(),U=_(W),F=J=>{var Y=P(),Q=b(Y);et(Q,(()=>e.children)),s(J,Y)};k(U,(J=>{e.children&&J(F)}));var T=f(U,2),N=J=>{Se(J,{name:"circle-alert"})};k(T,(J=>{u()&&J(N)})),s(M,W)};k(x,(M=>{y()?M(B):M(q,!1)})),s(V,R)};k(K,(V=>{(e.children||u())&&V(j)})),s(O,z)},$$slots:{default:!0}})}))}s(o,A),Ee()}gn(["click"]);var nf=h("<div><!> <!></div>"),sf=h("<!> <!>",1),rf=h("<!> <!>",1);function of(o,e){Ce(e,!0);const[n,r]=Xe(),a=ut(),i=Fn(),l=ln();function c(p){const y=G(l,"$currentConversationId",n);y&&a(ni(y,[p.id]))}let u=d((()=>e.item.sourceFolderGroup.map((p=>({filePath:p.sourceFolder.folderRoot,name:Ki(p.sourceFolder.folderRoot),onRemove:y=>{y.stopPropagation(),c(p)},onEditGuideline:y=>{var m;y.stopPropagation(),m=p.sourceFolder.folderRoot,i.openGuidelines(m)}}))))),g=d((()=>t(u).some((p=>p.onEditGuideline))));Ws(o,{leftIcon:m=>{var v=P(),w=b(v);be(w,(()=>Mn.Root),((E,A)=>{A(E,{color:"accent",size:0,children:($,C)=>{var L=ae();ge((()=>qe(L,e.item.sourceFolderGroup.length))),s($,L)},$$slots:{default:!0}})})),s(m,v)},rightButtons:m=>{var v=P(),w=b(v);be(w,(()=>je.Root),((E,A)=>{A(E,{nested:!1,offset:[0,5],children:($,C)=>{var L=rf(),S=b(L);be(S,(()=>je.Trigger),((O,D)=>{D(O,{children:(z,K)=>{var j=P(),V=b(j);be(V,(()=>Mn.IconButton),((R,x)=>{x(R,{title:"Open menu",variant:"ghost",color:"neutral",size:1,children:(B,q)=>{Se(B,{name:"ellipsis"})},$$slots:{default:!0}})})),s(z,j)},$$slots:{default:!0}})}));var I=f(S,2);be(I,(()=>je.Content),((O,D)=>{D(O,{size:1,children:(z,K)=>{var j=sf(),V=b(j);be(V,(()=>je.Label),((x,B)=>{B(x,{children:(q,M)=>{var W=ae("Repos");s(q,W)},$$slots:{default:!0}})}));var R=f(V,2);Pt(R,17,(()=>t(u)),(x=>x.filePath),((x,B,q,M)=>{var W=P(),U=b(W);{const F=T=>{var N=nf();let J;var Y=_(N),Q=se=>{at(se,{content:"Edit repo instructions",children:(we,$e)=>{St(we,{variant:"ghost-block",color:"neutral",size:.5,get onclick(){return t(B).onEditGuideline},children:(te,Ie)=>{Se(te,{name:"cog"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(Y,(se=>{t(B).onEditGuideline&&se(Q)}));var X=f(Y,2),ee=se=>{at(se,{content:"Remove repo from context",children:(we,$e)=>{St(we,{variant:"ghost-block",color:"neutral",size:.5,get onclick(){return t(B).onRemove},children:(te,Ie)=>{Se(te,{name:"x"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(X,(se=>{t(B).onRemove&&se(ee)})),ge((()=>J=ct(N,1,"c-multi-repo-chip__dropdown-item__actions svelte-15zo2zj",null,J,{"c-multi-repo-chip__dropdown-item__guideline-space":t(g)&&!t(B).onEditGuideline}))),s(T,N)};be(U,(()=>je.Item),((T,N)=>{N(T,es((()=>t(B)),{class:"c-multi-repo-chip__dropdown-item",highlight:!1,get onclick(){return t(B).onEditGuideline},iconRight:F,children:(J,Y)=>{var Q=ae();ge((()=>qe(Q,t(B).name))),s(J,Q)},$$slots:{iconRight:!0,default:!0}}))}))}s(x,W)})),s(z,j)},$$slots:{default:!0}})})),s($,L)},$$slots:{default:!0}})})),s(m,v)},children:(m,v)=>{var w=ae("Repos");s(m,w)},$$slots:{leftIcon:!0,rightButtons:!0,default:!0}}),Ee(),r()}const Yr=new Map(bg.flatMap((([o,e])=>(e??[o]).map((n=>[n,o]))))),af=o=>{if(!o)return;const e=o.split("/").at(-1);if(!e)return;const n=e.toLocaleLowerCase(),r=n.split("."),a=Yr.get(n)??Yr.get(r.at(-1)??"")??Yr.get(r.slice(-2).join("."))??void 0;return a?{javascriptreact:"javascript",typescriptreact:"typescript",shellscript:"shell","cuda-cpp":"cpp",jsonc:"json",jsonl:"json",properties:"ini","objective-c":"objective-c","objective-cpp":"objective-cpp",restructuredtext:"restructuredtext"}[a]??a:void 0};var lf=h('<span class="c-selection-hover-contents__directory svelte-p1gwc6"> </span>'),cf=h('<div class="c-selection-hover-contents__path svelte-p1gwc6"><!> <!></div>'),df=h('<div class="c-selection-hover-contents__monaco svelte-p1gwc6"><!></div>'),uf=h('<pre class="c-selection-preview__code svelte-p1gwc6"><code> </code></pre>'),vf=h('<pre class="c-selection-preview__code svelte-p1gwc6"><code> </code></pre>'),gf=h('<div class="c-selection-hover-contents svelte-p1gwc6"><!> <!></div>'),hf=h('<div class="c-text-tooltip-content__shortcut svelte-1cimtn4"><!></div>'),mf=h('<div class="c-text-tooltip-content svelte-1cimtn4"><!> <!> <!></div>');function or(o,e){var n=mf(),r=_(n);Fe(r,{size:1,weight:"medium",block:!0,children:(c,u)=>{var g=ae();ge((()=>qe(g,e.heading))),s(c,g)},$$slots:{default:!0}});var a=f(r,2);Fe(a,{size:0,block:!0,noHyphens:!0,children:(c,u)=>{var g=ae();ge((()=>qe(g,e.description))),s(c,g)},$$slots:{default:!0}});var i=f(a,2),l=c=>{var u=hf(),g=_(u);_n(g,{get commandName(){return e.shortcutCommandName},keysOnly:!0}),s(c,u)};k(i,(c=>{e.shortcutCommandName&&c(l)})),s(o,n)}var pf=h('<span class="c-selection-chip__icon svelte-5u33zc"><!></span>'),ff=h("<div><!></div>");function _f(o,e){var n=ff(),r=_(n);{const a=l=>{var c=P(),u=b(c),g=y=>{(function(m,v){Ce(v,!0);let w=H(v,"pathName",19,(()=>{}));const E=Ms((()=>import("./SimpleMonaco-BBDXOnfl.js").then((x=>x.c))),__vite__mapDeps([20,1,2,21]),import.meta.url);let A=d((()=>af(w()??""))),$=Te(void 0),C=Te(""),L=Te(!1);const S=async(x,B)=>{Z(L,!0),Z(C,`
         --editor-width: ${x}px;
         --editor-height: min(${B}px, 30vh);
    `)};ot((()=>{t($)?.onDidContentSizeChange((x=>S(x.contentWidth,x.contentHeight)))})),ot((()=>{t($)&&!t(L)&&S(t($)?.getContentWidth(),t($)?.getContentHeight())}));const I=ut(),O=()=>{w()&&I(vs({repoRoot:"",pathName:w(),fullRange:v.range}))};let D=d((()=>({automaticLayout:!0,lineNumbers:v.range?x=>`${v.range.startLineNumber+x}`:"off",lineDecorationsWidth:0,wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,stickyScroll:{enabled:!1},renderWhitespace:"none",renderFinalNewline:"on"})));var z=gf(),K=_(z),j=x=>{var B=cf(),q=_(B);Et(q,{variant:"ghost-block",color:"neutral",size:1,onclick:O,children:(U,F)=>{{let T=d((()=>Ki(w())));Sg(U,{value:[],get filepath(){return t(T)},onCodeAction:O})}},$$slots:{default:!0}});var M=f(q,2),W=U=>{var F=lf(),T=_(F);ge((N=>qe(T,N)),[()=>da(w())]),s(U,F)};k(M,(U=>{da(w())&&U(W)})),s(x,B)};k(K,(x=>{w()&&x(j)}));var V=f(K,2),R=x=>{var B=P(),q=b(B);Ds(q,(()=>E),(M=>{var W=vf(),U=_(W),F=_(U);ge((()=>qe(F,v.originalCode??""))),s(M,W)}),((M,W)=>{var U=df(),F=_(U);{let T=d((()=>v.originalCode??""));be(F,(()=>t(W).default),((N,J)=>{J(N,{get text(){return t(T)},get lang(){return t(A)},get pathName(){return w()},get options(){return t(D)},get editorInstance(){return t($)},set editorInstance(Y){Z($,Y,!0)}})}))}s(M,U)}),(M=>{var W=uf(),U=_(W),F=_(U);ge((()=>qe(F,v.originalCode??""))),s(M,W)})),s(x,B)};k(V,(x=>{E&&x(R)})),ge((()=>Un(z,t(C)))),s(m,z),Ee()})(y,{get originalCode(){return e.originalCode},get pathName(){return e.pathName},get range(){return e.range}})},p=y=>{or(y,{heading:"No code selected",description:"Highlight code to add context"})};k(u,(y=>{e.originalCode?y(g):y(p,!1)})),s(l,c)};let i=d((()=>e.originalCode?"selection-chip-code":void 0));at(r,{maxWidth:"100%",get theme(){return t(i)},get onOpenChange(){return e.trackContextHover},content:a,children:(l,c)=>{{let u=d((()=>e.originalCode?"info":"neutral")),g=d((()=>e.originalCode?"soft":"ghost"));Ws(l,{get color(){return t(u)},get variant(){return t(g)},hideLeftIcon:!0,asButton:!1,square:!0,children:(p,y)=>{var m=pf(),v=_(m);Se(v,{name:"text-cursor",size:1}),s(p,m)},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}})}s(o,n)}var yf=h("<span> <!></span>"),bf=h("<!> <!>",1);function $f(o,e){Ce(e,!0);const n=()=>G(l,"$contextWorkspaceGuidelines",r),[r,a]=Xe(),i=Fn(),l=rd(),c=ln(),u=od(c);let g=d((()=>n()?n()[0]:void 0)),p=d((()=>t(g)?.lengthLimit)),y=d((()=>e.item.userGuidelines.lengthLimit));const m=ad();let v=d((()=>G(u,"$activeRules",r).map((K=>K.rule))||[])),w=d((()=>cg({rules:G(m,"$rules",r),workspaceGuidelinesContent:t(g)?.contents||"",contextRules:t(v),rulesAndGuidelinesLimit:t(p)}))),E=d((()=>t(w).isOverLimit)),A=d((()=>t(w).warningMessage));const $=Ct("enableRules");let C=d((()=>e.item.userGuidelines.overLimit)),L=d((()=>t(C)||t(E))),S=d((()=>G($,"$enableRules",r)?"Rules & Guidelines":"Guidelines"));function I(K){e.trackContextButton?.("guidelines",K),i.openSettingsPage("guidelines")}var O=bf(),D=b(O);on(D,{name:"openRulesAndGuidelinesSettings",handler:()=>I("keybinding")});var z=f(D,2);at(z,{content:j=>{var V=yf(),R=_(V),x=f(R);_n(x,{commandName:"openRulesAndGuidelinesSettings",keysOnly:!0}),ge((B=>qe(R,`${B??""} `)),[()=>t(L)?t(E)?t(A):t(C)?`Guidelines exceeded length limit of ${t(y)} characters`:void 0:`${t(S)}`]),s(j,V)},children:(j,V)=>{{let R=d((()=>t(L)?"warning":"neutral")),x=d((()=>xg("Enter",(()=>I("button")))));St(j,{size:.5,variant:"ghost-block",get color(){return t(R)},onclick:()=>I("button"),get onkeyup(){return t(x)},children:(B,q)=>{var M=P(),W=b(M),U=T=>{Se(T,{name:"circle-alert"})},F=T=>{Se(T,{name:"album"})};k(W,(T=>{t(L)?T(U):T(F,!1)})),s(B,M)},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}}),s(o,O),Ee(),a()}var wf=h("<!> <!>",1),kf=h("<div><!></div>");function Af(o,e){Ce(e,!0);const n=()=>G(t(m),"$item",l),r=()=>G(y,"$currentConversationId",l),a=()=>G(t(C),"$isPinned",l),i=()=>G(t(L),"$showWarning",l),[l,c]=Xe();let u=Te(!1);const g=new Kv({onHoverStart:()=>{Z(u,!0)},onHoverEnd:()=>{Z(u,!1)},hoverTriggerDuration:0}),p=Fn(),y=ln(),m=d((()=>id(y,e.itemId))),v=ut(),w=()=>{n()&&r()&&v(ni(r(),[e.itemId]))},E=(V,R)=>{v(lt(tt.WEBVIEW.CONTEXT_BUTTON_CLICKED,{button:V,source:R}))},A=V=>{V&&v(lt(tt.WEBVIEW.CONTEXT_CODE_SELECTION_HOVERED,{}))},$=si("agentMemoriesFilePathName"),C=d((()=>pd(r(),n()?.id))),L=d((()=>n()&&Wr(n())?_d(n().sourceFolder.folderRoot):Fs(!1))),S=d((()=>n()&&((V,R,x)=>{const B={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0};if(cd(V))return{...B,onClick:()=>v(vs(V.file)),removeTitle:"Remove file from context",filepath:V.file.pathName};if(dd(V))return{...B,onClick:()=>v(vs(V.recentFile)),removeTitle:"Remove file from context",filepath:V.recentFile.pathName};if(ud(V))return{...B,onClick:()=>v(vs(V.folder)),removeTitle:"Remove folder from context",filepath:V.folder.pathName,iconName:"folder-opened"};if(vd(V))return{...B,removeTitle:"Remove external source from context",filepath:V.label,iconName:"book"};if(Wr(V))return{...B,removeTitle:"Remove source folder from context",filepath:V.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1};if(Ho(V))return{...B,iconName:"root-folder",pinnable:!1};if(gd(V)){const q=V.rule.path;return{...B,onClick:()=>v(vs({repoRoot:"",pathName:q})),removeTitle:"Remove rule from context",filepath:q,iconName:"rule"}}return Wo(V)?{...B,onClick:()=>{const q=R;x&&p.reportAgentSessionEvent({eventName:hd.openedMemoriesFile,conversationId:x,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!q}}}),p.openSettingsPage("memories")},pinnable:!1}:B})(n(),G($,"$agentMemoriesFilePathName",l),r()))),I=d((()=>t(S)?.pinnable&&(t(u)||a()))),O=d((()=>n()&&!Wr(n()))),D=d((()=>t(O)&&t(S)?{title:t(S).removeTitle,onRemove:w}:void 0));var z=P(),K=b(z),j=V=>{var R=P(),x=b(R),B=M=>{_f(M,{get originalCode(){return n().selection.originalCode},get range(){return n().selection.fullRange},get pathName(){return n().selection.pathName},trackContextHover:A})},q=M=>{var W=P(),U=b(W),F=N=>{$f(N,{get item(){return n()},trackContextButton:E})},T=N=>{var J=P(),Y=b(J),Q=ee=>{of(ee,{get item(){return n()}})},X=ee=>{var se=P(),we=b(se),$e=Ie=>{{let me=d((()=>t(S).onClick||Ps));(function(Ae,ce){Ce(ce,!0);let ue=H(ce,"onClick",3,(()=>{}));const ke=de=>{ce.trackContextButton?.("memories",de),ue()()};var re=wf(),ie=b(re);on(ie,{name:"openAgentMemories",handler:()=>ke("keybinding")});var he=f(ie,2);at(he,{content:le=>{or(le,{heading:"Agent memories",description:"Add preferences about your workspace",shortcutCommandName:"openAgentMemories"})},children:(le,_e)=>{St(le,{size:.5,variant:"ghost-block",color:"neutral",onclick:()=>ke("button"),children:(oe,ve)=>{Se(oe,{name:"archive"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),s(Ae,re),Ee()})(Ie,{get onClick(){return t(me)},trackContextButton:E})}},te=Ie=>{var me=kf(),Ae=_(me),ce=ke=>{{const re=he=>{{let de=d((()=>a()?"Unpin":"Pin to context"));(function(le,_e){Ce(_e,!0);let oe=H(_e,"isPinned",3,!1),ve=H(_e,"title",19,(()=>oe()?"Unpin":"Pin to context")),ye=Te(!1);at(le,{get content(){return ve()},children:(Ne,Re)=>{var Oe=P(),Be=b(Oe);be(Be,(()=>Mn.IconButton),((Ge,xe)=>{xe(Ge,{color:"neutral",onclick:ze=>{ze.stopPropagation(),_e.onPin()},onmouseover:()=>{Z(ye,!0)},onmouseleave:()=>{Z(ye,!1)},children:(ze,He)=>{var Le=Xp(),De=_(Le);{let pe=d((()=>oe()&&t(ye)?"pin-off":"pin"));Se(De,{get name(){return t(pe)},size:0})}s(ze,Le)},$$slots:{default:!0}})})),s(Ne,Oe)},$$slots:{default:!0}}),Ee()})(he,{onPin:()=>r()&&v(fd(r(),n().id)),get title(){return t(de)},get isPinned(){return a()}})}};let ie=d((()=>t(S).onClick||Ps));Ws(ke,{get onclick(){return t(ie)},get removeBtn(){return t(D)},get showWarning(){return i()},leftButtons:re,children:(he,de)=>{{const le=oe=>{Kr(oe,{get option(){return n()}})};let _e=d((()=>[nn.Hover]));at(he,{get triggerOn(){return t(_e)},content:le,children:(oe,ve)=>{pr(oe,{nopath:!0,get filepath(){return t(S).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{leftButtons:!0,default:!0}})}},ue=ke=>{var re=P(),ie=b(re),he=le=>{{const _e=ve=>{(function(ye,Ne){var Re=P(),Oe=b(Re),Be=xe=>{Se(xe,{name:"file"})},Ge=xe=>{var ze=P(),He=b(ze),Le=pe=>{Se(pe,{name:"folder-open"})},De=pe=>{var fe=P(),Pe=b(fe),We=Qe=>{Se(Qe,{name:"folder-cog"})},Ye=Qe=>{var st=P(),Ke=b(st),vt=yt=>{Se(yt,{name:"book-open"})},dt=yt=>{var Ve=P(),ne=b(Ve),Me=Ue=>{Se(Ue,{name:"ruler"})};k(ne,(Ue=>{Ne.icon==="rule"&&Ue(Me)}),!0),s(yt,Ve)};k(Ke,(yt=>{Ne.icon==="book"?yt(vt):yt(dt,!1)}),!0),s(Qe,st)};k(Pe,(Qe=>{Ne.icon==="root-folder"?Qe(We):Qe(Ye,!1)}),!0),s(pe,fe)};k(He,(pe=>{Ne.icon==="folder-opened"?pe(Le):pe(De,!1)}),!0),s(xe,ze)};k(Oe,(xe=>{Ne.icon==="file"?xe(Be):xe(Ge,!1)})),s(ye,Re)})(ve,{get icon(){return t(S).iconName}})};let oe=d((()=>t(S).onClick||Ps));Ws(le,{get onclick(){return t(oe)},get removeBtn(){return t(D)},get showWarning(){return i()},leftIcon:_e,children:(ve,ye)=>{{const Ne=Oe=>{Kr(Oe,{get option(){return n()}})};let Re=d((()=>[nn.Hover]));at(ve,{get triggerOn(){return t(Re)},content:Ne,children:(Oe,Be)=>{pr(Oe,{nopath:!0,get filepath(){return t(S).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{leftIcon:!0,default:!0}})}},de=le=>{{let _e=d((()=>t(S).onClick||Ps));Ws(le,{get onclick(){return t(_e)},get removeBtn(){return t(D)},get showWarning(){return i()},children:(oe,ve)=>{{const ye=Re=>{Kr(Re,{get option(){return n()}})};let Ne=d((()=>[nn.Hover]));at(oe,{get triggerOn(){return t(Ne)},content:ye,children:(Re,Oe)=>{pr(Re,{nopath:!0,get filepath(){return t(S).filepath}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})}};k(ie,(le=>{t(S).iconName?le(he):le(de,!1)}),!0),s(ke,re)};k(Ae,(ke=>{t(I)?ke(ce):ke(ue,!1)})),kn(me,((ke,re)=>Yv?.(ke,re)),(()=>g)),s(Ie,me)};k(we,(Ie=>{Wo(n())?Ie($e):Ie(te,!1)}),!0),s(ee,se)};k(Y,(ee=>{Ho(n())?ee(Q):ee(X,!1)}),!0),s(N,J)};k(U,(N=>{md(n())?N(F):N(T,!1)}),!0),s(M,W)};k(x,(M=>{ld(n())?M(B):M(q,!1)})),s(V,R)};k(K,(V=>{n()&&t(S)&&V(j)})),s(o,z),Ee(),c()}var Cf=h("<div><!></div>"),Ef=h("<!> <!>",1),Tf=h('<div class="c-action-bar-context svelte-tdiwo0"><!></div>');function ul(o,e){Ce(e,!0);const[n,r]=Xe(),a=ln(),i=yd(a,{includeItems:[bd,$d]}),l=d((()=>G(i,"$recentActiveItems",n).map((({id:u})=>u))));var c=Tf();Yp(_(c),{children:(u,g)=>{var p=Ef(),y=b(p);et(y,(()=>e.prepend??pt));var m=f(y,2);Pt(m,16,(()=>t(l)),(v=>v),((v,w)=>{var E=Cf();Af(_(E),{get itemId(){return w}}),Zt(1,E,(()=>ms),(()=>({duration:100,start:.9,opacity:.3}))),s(v,E)})),s(u,p)},$$slots:{default:!0}}),s(o,c),Ee(),r()}var If=h('<div class="c-input-action-bar svelte-77a9b0"><div class="c-input-action-bar__left-align svelte-77a9b0"><!></div> <div class="c-input-action-bar__right-align svelte-77a9b0"><!></div></div>'),Sf=h(" <!>",1),xf=h('<div class="c-send-button svelte-1nzt1wu"><!></div>'),Rf=h('<span class="c-input-action-bar-command svelte-1wt8dwe"><!></span>');function uo(o,e){var n=Rf();Xi(_(n),e,"default",{}),s(o,n)}var Mf=h("<!> <!>",1),Df=h('<div class="c-context-menu__items svelte-1pg7ih0"></div> <!> <!> <!>',1),zf=h("<!> <!>",1),Nf=h('<div class="c-add-file-button-tooltip svelte-nmvtej">Attach images (up to 10)<br/> Hold <!> to select multiple</div>'),Of=h('<label class="c-input-action-bar__label svelte-nmvtej"><!></label> <input type="file" multiple hidden=""/>',1);gn(["click","input"]);var Lf=h('<div class="c-cancel-button svelte-10vhx4q"><!></div>'),Pf=h('<div class="c-resend-button svelte-1duuxf"><!></div>');const vo="prompt-enhancer-button";var Bf=h("<span>Prompt Enhancer <!></span>"),Ff=h('<div class="c-rewrite-prompt-button svelte-71xd9m"><!> <!></div>');const xn={Root:function(o,e){var n=If(),r=_(n),a=_(r);et(a,(()=>e.leftAlign??pt));var i=f(r,2),l=_(i);et(l,(()=>e.rightAlign??pt)),s(o,n)},SendButton:function(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"isDisabled",3,!1),i=H(e,"disabledReason",3,"");const l=Nn(),c=jn(l),u=ut(),g=d((()=>a()?i():G(c,"$isAgentic",n)?"Send to Agent":"Send Message"));var p=xf(),y=_(p);Et(y,{size:.5,variant:"solid",color:"accent",get disabled(){return a()},onclick:function(){return u(lt(tt.WEBVIEW.SEND_ACTION_TRIGGERED,{source:"button"})),e.primaryAction()},children:(m,v)=>{{const w=A=>{var $=P(),C=b($),L=I=>{var O=Sf(),D=b(O),z=f(D);et(z,(()=>e.tooltipContent)),ge((()=>qe(D,`${t(g)??""} `))),s(I,O)},S=I=>{var O=ae();ge((()=>qe(O,t(g)))),s(I,O)};k(C,(I=>{e.tooltipContent?I(L):I(S,!1)})),s(A,$)};let E=d((()=>[nn.Hover]));at(m,{get triggerOn(){return t(E)},side:"top",delayDurationMs:500,content:w,children:(A,$)=>{Se(A,{name:"send-horizontal"})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}}),s(o,p),Ee(),r()},ContextMenu:function(o,e){Ce(e,!0);const n=()=>G($,"$userQuery",a),r=()=>G(C,"$displayItems",a),[a,i]=Xe(),l=H(e,"onCloseDropdown",3,(()=>{})),c=H(e,"onInsertMentionable",19,(()=>{}));let u=Te(void 0);const g=async()=>{E.closeDropdown()},p=async z=>{E.openDropdown(),await Cn(),e.trackButtonClick?.(z),v()},y=async z=>{E.toggleDropdown()&&(await Cn(),e.trackButtonClick?.(z),v())},m=async z=>{switch(z.key){case"ArrowLeft":z.preventDefault(),E.popBreadcrumb(),await Cn(),t(u)?.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:z.defaultPrevented||v()}},v=()=>{t(u)?.focusIdx(-1)},{store:w}=rs(),E=new $g(w,(z=>!!c()&&c()(z))),{active:A,userQuery:$,displayItems:C}=E,L=ut();ot((()=>{L(wd(n()))}));var S={closeDropdown:g,openDropdown:p,toggleDropdown:y},I=P(),O=b(I);be(O,(()=>je.Root),((z,K)=>{Dt(K(z,{get open(){return G(A,"$active",a)},onOpenChange:j=>{j||l()()},nested:!1,children:(j,V)=>{var R=zf(),x=b(R);be(x,(()=>je.Trigger),((q,M)=>{M(q,{children:(W,U)=>{uo(W,{children:(F,T)=>{{const N=Y=>{var Q=P(),X=b(Q),ee=se=>{var we=P(),$e=b(we);et($e,(()=>e.tooltipContent)),s(se,we)};k(X,(se=>{e.tooltipContent&&se(ee)})),s(Y,Q)};let J=d((()=>[nn.Hover]));at(F,{get triggerOn(){return t(J)},side:"top",delayDurationMs:500,content:N,children:(Y,Q)=>{var X=Mf(),ee=b(X);on(ee,{name:"openContextMenu",handler:()=>p("keybinding")});var se=f(ee,2);St(se,{size:.5,variant:"ghost-block",color:"neutral",onclick:()=>y("button"),children:(we,$e)=>{Se(we,{name:"at-sign"})},$$slots:{default:!0}}),s(Y,X)},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}})},$$slots:{default:!0}})}));var B=f(x,2);be(B,(()=>je.Content),((q,M)=>{M(q,{size:1,side:"top",align:"start",onClickOutside:g,onEscapeKeyDown:g,onRequestClose:g,onKeyDown:m,children:(W,U)=>{var F=Df(),T=b(F);Pt(T,5,r,(X=>X.id),((X,ee)=>{wg(X,{get item(){return t(ee)},onSelect:async()=>{E.selectMentionable(t(ee)),await Cn(),t(u)?.focusIdx(0)}})}));var N=f(T,2),J=X=>{var ee=P(),se=b(ee);be(se,(()=>je.Label),((we,$e)=>{$e(we,{children:(te,Ie)=>{var me=ae("No results found");s(te,me)},$$slots:{default:!0}})})),s(X,ee)};k(N,(X=>{n().length>0&&r().length===0&&X(J)}));var Y=f(N,2);be(Y,(()=>je.Separator),((X,ee)=>{ee(X,{})}));var Q=f(Y,2);be(Q,(()=>je.TextFieldItem),((X,ee)=>{ee(X,{placeholder:"Focus context",get value(){return cc(),n()},set value(se){lc($,se)}})})),s(W,F)},$$slots:{default:!0}})})),s(j,R)},$$slots:{default:!0}}),(j=>Z(u,j,!0)),(()=>t(u)))})),s(o,I);var D=Ee(S);return i(),D},AddFileButton:function(o,e){Ce(e,!0);let n=H(e,"accept",3,"*"),r=H(e,"disabled",3,!1),a=H(e,"onAddFiles",3,(function(u){c.commandManager?.chain()?.insertFilesIntoEditor?.(u)})),i=H(e,"onclick",3,(()=>{}));const l=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=kg();uo(o,{children:(u,g)=>{{const p=m=>{var v=Nf(),w=f(_(v),3);_n(w,{keybinding:"command"}),s(m,v)};let y=d((()=>[nn.Hover]));at(u,{get triggerOn(){return t(y)},delayDurationMs:300,content:p,children:(m,v)=>{St(m,{size:1,variant:"ghost-block",color:"neutral",get disabled(){return r()},class:"c-input-action-bar__add-file-btn",children:(w,E)=>{var A=Of(),$=b(A),C=_($);Se(C,{name:"paperclip"});var L=f($,2);L.__click=function(){this.value=null,i()()},L.__input=function(S){a()([...S.currentTarget?.files??[]])},ge((()=>{nt($,"for",l),nt(L,"id",l),nt(L,"accept",n())})),s(w,A)},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}})}},$$slots:{default:!0}}),Ee()},ResendButton:function(o,e){function n(){e.onAnalyticsTrack(),e.resendAction()}Ce(e,!0);var r=Pf(),a=_(r);at(a,{content:l=>{var c=P(),u=b(c),g=y=>{var m=P(),v=b(m);et(v,(()=>e.tooltipContent)),s(y,m)},p=y=>{var m=ae("Resend");s(y,m)};k(u,(y=>{e.tooltipContent?y(g):y(p,!1)})),s(l,c)},children:(l,c)=>{Et(l,{size:1,variant:"soft",color:"neutral",onclick:n,onkeyup:n,iconLeft:g=>{Se(g,{name:"rotate-cw"})},$$slots:{iconLeft:!0}})},$$slots:{content:!0,default:!0}}),s(o,r),Ee()},CancelButton:function(o,e){function n(i){i.stopPropagation(),e.onAnalyticsTrack("button"),e.cancelAction()}Ce(e,!0);var r=Lf(),a=_(r);at(a,{content:l=>{var c=P(),u=b(c),g=y=>{var m=P(),v=b(m);et(v,(()=>e.tooltipContent)),s(y,m)},p=y=>{var m=ae("Cancel");s(y,m)};k(u,(y=>{e.tooltipContent?y(g):y(p,!1)})),s(l,c)},children:(l,c)=>{Et(l,{size:1,variant:"soft",color:"error",onclick:n,children:(u,g)=>{Se(u,{name:"square"})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),s(o,r),Ee()},RewritePromptButton:function(o,e){Ce(e,!0);const n=()=>G(c,"$remoteAgentsModel",r),[r,a]=Xe();let i=H(e,"isDisabled",3,!1),l=H(e,"disabledReason",19,(()=>{}));const c=Tt(un.key),u=Ct("enablePromptEnhancer"),g=ut();let p=d((()=>n()?.isActive&&!n()?.currentAgentId));const y=ri();let m=d((()=>G(y,"$highlightedElementId",r)===vo)),v=Te(void 0);async function w(C){if(C&&g(lt(tt.SHARED.PROMPT_ENHANCE_STARTED,{source:C})),t(p)&&c)try{await c.reportRemoteAgentSetupWindowEvent(wr.clickRewritePrompt)}catch(L){console.error("Failed to report rewrite prompt button click event:",L)}e.onRewrite()}ot((()=>{!t(m)&&t(v)&&t(v).requestClose()}));var E=P(),A=b(E),$=C=>{var L=Ff(),S=_(L);on(S,{get isDisabled(){return i()},name:"enhancePrompt",handler:()=>w("keybinding")});var I=f(S,2);{const O=K=>{var j=P(),V=b(j),R=B=>{var q=Bf(),M=f(_(q));_n(M,{commandName:"enhancePrompt",keysOnly:!0}),s(B,q)},x=B=>{var q=P(),M=b(q),W=F=>{var T=ae();ge((()=>qe(T,l()))),s(F,T)},U=F=>{or(F,{heading:"Prompt Enhancer",description:"Rewrite prompt to provide more context and improve agent responses",shortcutCommandName:"enhancePrompt"})};k(M,(F=>{i()&&l()?F(W):F(U,!1)}),!0),s(B,q)};k(V,(B=>{t(m)?B(R):B(x,!1)})),s(K,j)};let D=d((()=>[nn.Hover])),z=d((()=>!!t(m)||void 0));Dt(at(I,{get triggerOn(){return t(D)},delayDurationMs:300,maxWidth:"200px",get open(){return t(z)},content:O,children:(K,j)=>{St(K,{id:vo,get disabled(){return i()},size:1,variant:"ghost-block",color:"neutral",onclick:()=>w("button"),children:(V,R)=>{var x=P(),B=b(x),q=W=>{Vn(W,{size:1,useCurrentColor:!0})},M=W=>{Se(W,{name:"sparkles"})};k(B,(W=>{e.isEnhancing?W(q):W(M,!1)})),s(V,x)},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),(K=>Z(v,K,!0)),(()=>t(v)))}s(C,L)};k(A,(C=>{G(u,"$enablePromptEnhancer",r)&&C($)})),s(o,E),Ee(),a()}};function zo(o,e){Ce(e,!0);let n=H(e,"maxImages",19,(()=>{})),r=H(e,"saveImage",19,(()=>{})),a=H(e,"saveAttachment",19,(()=>{})),i=H(e,"deleteImage",19,(()=>{})),l=H(e,"renderImage",19,(()=>{})),c=H(e,"isEditable",3,(()=>!0)),u=H(e,"changeImageMode",19,(()=>{})),g=H(e,"supportedFileTypes",19,(()=>["image"])),p=H(e,"onValidationError",19,(()=>{})),y=H(e,"onCompletedAttachment",19,(()=>{}));const m=new po({changeImageMode:u(),maxImages:n(),saveImage:r(),saveAttachment:a(),deleteImage:i(),renderImage:l(),isEditable:c(),onValidationError:p(),onCompletedAttachment:y(),maxImageSizeKb:Ad,maxTextSizeKb:kd,supportedFileTypes:g()}),v=Tt(rr.CONTEXT_KEY).pluginManager.registerPlugin(m);ls(v),Ee()}const qf=Xt(!1),Hf="application/x-augment/drag-origin/{}";function ka(o){return Hf.replace("{}",o.instanceId)}var Wf=h("<!> <!> <!>",1),Gf=h('<div role="button" tabindex="-1"><div class="c-rich-text-editor-dropzone__content svelte-kc9dup"><!></div></div>');function vl(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"draggingStore",3,qf);const i=Tt(rr.CONTEXT_KEY);let l=d((()=>G(a(),"$draggingStore",n)));function c(A){e.onDrop?.(),a().set(!1);const $=A.dataTransfer;if(!$)return;const C=(function(L){const S=L.getData("codefiles");if(!S)return[];try{const I=JSON.parse(S);if(Array.isArray(I)&&I.every((O=>typeof O=="string")))return I}catch{}return[]})($);C.length>0?e.onCodeFilesDrop?.(C):$.files&&$.files.length!==0&&i?.commandManager.chain()?.command((({view:L,tr:S})=>{if(!L)return!0;const I=L.posAtCoords({left:A.clientX,top:A.clientY});if(I){const O=S.doc.resolve(I.pos);S.setSelection(Cd.create(S.doc,O.pos))}return!0})).insertFilesIntoEditor?.([...$.files])}const u=()=>a().set(!1);function g(A){A.stopPropagation(),A.preventDefault()}var p=Gf();let y;Ft("dragstart",fn,(A=>(function($,C){C.rootNode&&$.composedPath().includes(C.rootNode)&&$.dataTransfer?.setData(ka(C),C.instanceId)})(A,i))),Ft("dragenter",fn,(A=>{(function($,C){return $.dataTransfer?.types.includes(ka(C))??!1})(A,i)||(function($){if(!$)return!1;const C=$.types;return C.includes("Files")||C.includes("codefiles")})(A.dataTransfer)&&a().set(!0)})),Ft("dragleave",fn,(function(A){A.relatedTarget&&A.relatedTarget!==document.body||u()})),Ft("drop",fn,u),Ft("blur",fn,u);var m=_(p),v=_(m),w=A=>{var $=P(),C=b($);et(C,(()=>e.children)),s(A,$)},E=A=>{var $=Wf(),C=b($);Se(C,{name:"file-plus",size:3});var L=f(C,2);Fe(L,{class:"c-rich-text-editor-dropzone__text",size:2,children:(I,O)=>{var D=ae("Drop files to attach as context");s(I,D)},$$slots:{default:!0}});var S=f(L,2);Fe(S,{class:"c-rich-text-editor-dropzone__text",size:1,children:(I,O)=>{var D=ae("images (png, jpg, jpeg) and text-based files");s(I,D)},$$slots:{default:!0}}),s(A,$)};k(v,(A=>{e.children?A(w):A(E,!1)})),ge((()=>y=ct(p,1,"c-rich-text-editor-dropzone svelte-kc9dup",null,y,{"is-active":t(l)}))),Ft("dragover",p,g),Ft("dragenter",p,g),Ft("drop",p,(A=>{g(A),c(A)})),s(o,p),Ee(),r()}var Uf=h('<div class="c-model-picker__tooltip-content svelte-1xlmyl8"><div><!></div> <!> <a href="https://docs.augmentcode.com/models/available-models" class="c-model-picker__learn-more svelte-1xlmyl8" rel="noopener noreferrer">Learn more</a></div>'),Vf=h('<div class="c-model-picker__tooltip-card svelte-1xlmyl8"><!></div>'),jf=h("<!> <!>",1);function gl(o,e){return(o.priority??Number.MAX_SAFE_INTEGER)-(e.priority??Number.MAX_SAFE_INTEGER)}function Aa(o,e){return gl(o,e)}gn(["click"]);const Kf=20;var Yf=h('<div class="c-model-picker__item-badges svelte-g8qo8f"><!> <!></div>'),Xf=h("<div> </div>"),Jf=h('<div class="c-model-picker__item-content svelte-g8qo8f"><div class="c-model-picker__item-name svelte-g8qo8f"><!> <!></div> <!></div>'),Qf=h("<span>Model Picker <!></span>"),Zf=h('<span class="c-model-picker__text-wrapper svelte-g8qo8f"><!> <span class="c-model-picker__disabled-indicator svelte-g8qo8f"></span></span>'),e0=h('<span class="c-model-picker__text-wrapper svelte-g8qo8f"><!></span>'),t0=h("<!> <!>",1),n0=h('<div class="c-model-picker__legacy-measure svelte-g8qo8f" aria-hidden="true" inert></div>'),s0=h("<!> <!>",1),r0=h("<!> <!>",1),o0=h('<span class="c-model-picker__more-selected svelte-g8qo8f"> </span>'),a0=h('<span class="c-model-picker__more-label svelte-g8qo8f">More <!></span>'),i0=h("<!> <!>",1),l0=h("<!> <!>",1),c0=h("<!> <!>",1),d0=h("<!> <!>",1),u0=h('<div class="c-model-picker__dropdown-root svelte-g8qo8f"><!> <div class="c-model-picker__scroll svelte-g8qo8f"><!></div></div>'),v0=h("<!> <!>",1),g0=h('<div class="c-model-picker svelte-g8qo8f"><!> <!></div>');function hl(o,e){Ce(e,!0);const n=()=>G(t(w),"$selectedModel",l),r=()=>G(A,"$availableModels",l),a=()=>G(E,"$defaultModel",l),i=()=>G(p,"$currentConversationId",l),[l,c]=Xe(),u=(q,M=pt,W)=>{let U=dc((()=>uc(W?.(),(()=>({})),!0)));const F=d((()=>t(U)?.inert??!1)),T=d((()=>!t(F)&&n()?.id===M().id));var N=P(),J=b(N);{let Y=d((()=>!!t(F)||M().disabled)),Q=d((()=>t(F)?-1:void 0));be(J,(()=>je.Item),((X,ee)=>{ee(X,{get highlight(){return t(T)},get disabled(){return t(Y)},get tabindex(){return t(Q)},onSelect:()=>{t(F)||(function(se){se.disabled||(i()&&(n()?.id??null)!==se.id&&e.onModelChange?.(se.id),t(v)?.requestClose())})(M())},children:(se,we)=>{var $e=Jf(),te=_($e),Ie=_(te);Fe(Ie,{size:1,children:(ke,re)=>{var ie=ae();ge((()=>qe(ie,M().displayName))),s(ke,ie)},$$slots:{default:!0}});var me=f(Ie,2),Ae=ke=>{var re=Yf(),ie=_(re),he=_e=>{(function(oe,ve){Ce(ve,!0);let ye=H(ve,"description",19,(()=>{}));var Ne=P(),Re=b(Ne);{let Oe=d((()=>[nn.Hover]));be(Re,(()=>jr.Root),((Be,Ge)=>{Ge(Be,{get triggerOn(){return t(Oe)},nested:!1,children:(xe,ze)=>{var He=jf(),Le=b(He);be(Le,(()=>jr.Trigger),((pe,fe)=>{fe(pe,{children:(Pe,We)=>{jv(Pe,{class:"c-icon c-icon-size--size-1 c-model-picker__coin-icon"})},$$slots:{default:!0}})}));var De=f(Le,2);be(De,(()=>jr.Content),((pe,fe)=>{fe(pe,{side:"right",align:"center",children:(Pe,We)=>{var Ye=Vf(),Qe=_(Ye);qi(Qe,{size:2,insetContent:!0,variant:"surface",children:(st,Ke)=>{var vt=Uf(),dt=_(vt),yt=_(dt);Fe(yt,{size:1,children:(Me,Ue)=>{var Je=ae();ge((()=>qe(Je,ve.name))),s(Me,Je)},$$slots:{default:!0}});var Ve=f(dt,2),ne=Me=>{Fe(Me,{size:1,color:"secondary",children:(Ue,Je)=>{var rt=ae();ge((()=>qe(rt,ye()))),s(Ue,rt)},$$slots:{default:!0}})};k(Ve,(Me=>{ye()&&Me(ne)})),f(Ve,2).__click=Me=>{Me.preventDefault(),an.postMessage({type:jt.augmentLink,data:"https://docs.augmentcode.com/models/available-models"})},s(st,vt)},$$slots:{default:!0}}),s(Pe,Ye)},$$slots:{default:!0}})})),s(xe,He)},$$slots:{default:!0}})}))}s(oe,Ne),Ee()})(_e,{get name(){return M().tooltipName},get description(){return M().tooltipDescription}})};k(ie,(_e=>{M().tooltipName&&_e(he)}));var de=f(ie,2),le=_e=>{var oe=P(),ve=b(oe);be(ve,(()=>Mn.Root),((ye,Ne)=>{Ne(ye,{color:"neutral",size:0,variant:"soft",children:(Re,Oe)=>{var Be=ae("New");s(Re,Be)},$$slots:{default:!0}})})),s(_e,oe)};k(de,(_e=>{M().isNew&&_e(le)})),s(ke,re)};k(me,(ke=>{(M().tooltipName||M().isNew)&&ke(Ae)}));var ce=f(te,2),ue=ke=>{Fe(ke,{size:0,color:"secondary",children:(re,ie)=>{var he=Xf(),de=_(he);ge((()=>qe(de,M().description))),s(re,he)},$$slots:{default:!0}})};k(ce,(ke=>{M().description&&ke(ue)})),ge((()=>nt($e,"data-highlighted",t(T)))),s(se,$e)},$$slots:{default:!0}})}))}s(q,N)},g=q=>{Fe(q,{size:1,truncate:!0,children:(M,W)=>{var U=ae();ge((()=>qe(U,(n()?.id!==null?n()?.displayName:null)||a()?.displayName||""))),s(M,U)},$$slots:{default:!0}})},p=ln(),y=ut();let m,v=Te(void 0);const w=d((()=>Id(e.selectedModelId))),E=Ed(),A=Td();async function $(q){q&&(n()&&y(lt(tt.SHARED.MODEL_PICKER_OPENED,{currentModelId:n().id||"",currentModelName:n().displayName||""})),await Cn(),j(),(function(){if(!m)return;const M=m.querySelector('[data-highlighted="true"]');M&&Sd(m,M,{smooth:!1,topBuffer:-(m.clientHeight-M.offsetHeight)/2})})(),m?.focus()),e.onOpenChange?.(q)}ot((()=>{(n()?.id===null||!n())&&!e.selectedModelId&&r().length>0&&a()&&i()&&e.onModelChange?.(a().id)}));let C=d((()=>(function(q){const M=new Map,W=[];for(const T of q){const N=T.modelGroup;if(N&&N.length>0){const J=M.get(N)??[];J.push(T),M.set(N,J)}else W.push(T)}const U=[],F=[];for(const[T,N]of M.entries()){const J=N.sort(Aa),Y=N.find((ee=>ee.modelGroupPriority!==void 0)),Q=Y?.modelGroupPriority,X={name:T,priority:Q,models:J};F.push(X)}if(F.sort(gl),U.push(...F),W.length>0){const T=W.sort(Aa);U.push({name:null,models:T})}return U})(r()))),L=d((()=>(function(q){const M=[],W=[];for(const U of q){const F=U.models.filter((N=>!N.isLegacyModel)),T=U.models.filter((N=>N.isLegacyModel));F.length>0&&M.push({...U,models:F}),T.length>0&&W.push({...U,models:T})}return{primaryGroups:M,legacyGroups:W}})(t(C)))),S=d((()=>t(L).primaryGroups)),I=d((()=>t(L).legacyGroups)),O=d((()=>n()?.isLegacyModel?n():void 0)),D=Te(Dn(typeof window<"u"?window.innerWidth:void 0)),z=Te(!1),K=Te(void 0);function j(){Z(z,(function({scrollContainer:q,legacyMeasureContainer:M,viewportWidth:W,extraSpacePx:U=Kf}){if(!q||typeof window>"u")return!1;const F=q?.closest(".c-model-picker__dropdown-root");if(!F)return!1;const T=F.getBoundingClientRect(),N=T.width;if(W==null||Number.isNaN(W))return!0;const J=M?.getBoundingClientRect().width??0,Y=(J>0?J:N)+U,Q=W-T.right,X=T.left;return!(Q>=Y||X>=Y)})({scrollContainer:m,legacyMeasureContainer:t(K),viewportWidth:t(D)}),!0)}ot((()=>{if(m&&e.open&&t(I)&&t(D)){const q=requestAnimationFrame((()=>{j()}));return()=>{cancelAnimationFrame(q)}}}));let V=d((()=>t(z)?[...t(S),...t(I)]:t(S)));var R=g0();Ft("resize",fn,(()=>{Z(D,window.innerWidth,!0)}));var x=_(R);on(x,{name:"openModelPicker",handler:function(){e.open?t(v)?.requestClose():t(v)?.requestOpen()}});var B=f(x,2);at(B,{side:"top",nested:!1,content:M=>{var W=Qf(),U=f(_(W));_n(U,{commandName:"openModelPicker",keysOnly:!0}),s(M,W)},children:(M,W)=>{var U=P(),F=b(U);be(F,(()=>je.Root),((T,N)=>{Dt(N(T,{nested:!1,get open(){return e.open},get defaultOpen(){return e.defaultOpen},onOpenChange:$,children:(J,Y)=>{var Q=v0(),X=b(Q);be(X,(()=>je.Trigger),((se,we)=>{we(se,{children:($e,te)=>{uo($e,{children:(Ie,me)=>{Et(Ie,{size:1,variant:"ghost-block",color:"neutral",class:"c-model-picker__button",iconLeft:ce=>{Se(ce,{name:"settings-2"})},children:(ce,ue)=>{var ke=P(),re=b(ke),ie=de=>{{let le=d((()=>[nn.Hover]));at(de,{get content(){return n().disabled_reason},get triggerOn(){return t(le)},side:"right",nested:!0,children:(_e,oe)=>{var ve=Zf(),ye=_(ve);g(ye),s(_e,ve)},$$slots:{default:!0}})}},he=de=>{var le=e0(),_e=_(le);g(_e),s(de,le)};k(re,(de=>{n()?.disabled?de(ie):de(he,!1)})),s(ce,ke)},$$slots:{iconLeft:!0,default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var ee=f(X,2);be(ee,(()=>je.Content),((se,we)=>{we(se,{size:1,side:"top",align:"start",children:($e,te)=>{var Ie=u0(),me=_(Ie),Ae=ie=>{var he=n0();Pt(he,23,(()=>t(I)),((de,le)=>de.name??le),((de,le,_e)=>{var oe=t0(),ve=b(oe);Pt(ve,17,(()=>t(le).models),(Re=>Re.id),((Re,Oe)=>{u(Re,(()=>t(Oe)),(()=>({inert:!0})))}));var ye=f(ve,2),Ne=Re=>{var Oe=P(),Be=b(Oe);be(Be,(()=>je.Separator),((Ge,xe)=>{xe(Ge,{})})),s(Re,Oe)};k(ye,(Re=>{t(_e)<t(I).length-1&&Re(Ne)})),s(de,oe)})),Dt(he,(de=>Z(K,de)),(()=>t(K))),s(ie,he)};k(me,(ie=>{t(I).length>0&&ie(Ae)}));var ce=f(me,2),ue=_(ce),ke=ie=>{var he=P(),de=b(he);Pt(de,19,(()=>t(V)),((le,_e)=>le.name??_e),((le,_e,oe)=>{var ve=s0(),ye=b(ve);Pt(ye,17,(()=>t(_e).models),(Oe=>Oe.id),((Oe,Be)=>{var Ge=P(),xe=b(Ge),ze=Le=>{{let De=d((()=>[nn.Hover]));at(Le,{get content(){return t(Be).disabled_reason},get triggerOn(){return t(De)},side:"top",nested:!0,children:(pe,fe)=>{u(pe,(()=>t(Be)))},$$slots:{default:!0}})}},He=Le=>{u(Le,(()=>t(Be)))};k(xe,(Le=>{t(Be).disabled&&t(Be).disabled_reason?Le(ze):Le(He,!1)})),s(Oe,Ge)}));var Ne=f(ye,2),Re=Oe=>{var Be=P(),Ge=b(Be);be(Ge,(()=>je.Separator),((xe,ze)=>{ze(xe,{})})),s(Oe,Be)};k(Ne,(Oe=>{t(oe)<t(V).length-1&&Oe(Re)})),s(le,ve)})),s(ie,he)},re=ie=>{var he=d0(),de=b(he);Pt(de,19,(()=>t(S)),((oe,ve)=>oe.name??ve),((oe,ve,ye)=>{var Ne=r0(),Re=b(Ne);Pt(Re,17,(()=>t(ve).models),(Ge=>Ge.id),((Ge,xe)=>{var ze=P(),He=b(ze),Le=pe=>{{let fe=d((()=>[nn.Hover]));at(pe,{get content(){return t(xe).disabled_reason},get triggerOn(){return t(fe)},side:"top",nested:!0,children:(Pe,We)=>{u(Pe,(()=>t(xe)))},$$slots:{default:!0}})}},De=pe=>{u(pe,(()=>t(xe)))};k(He,(pe=>{t(xe).disabled&&t(xe).disabled_reason?pe(Le):pe(De,!1)})),s(Ge,ze)}));var Oe=f(Re,2),Be=Ge=>{var xe=P(),ze=b(xe);be(ze,(()=>je.Separator),((He,Le)=>{Le(He,{})})),s(Ge,xe)};k(Oe,(Ge=>{t(ye)<t(S).length-1&&Ge(Be)})),s(oe,Ne)}));var le=f(de,2),_e=oe=>{var ve=c0(),ye=b(ve),Ne=Oe=>{var Be=P(),Ge=b(Be);be(Ge,(()=>je.Separator),((xe,ze)=>{ze(xe,{})})),s(Oe,Be)};k(ye,(Oe=>{t(S).length>0&&Oe(Ne)}));var Re=f(ye,2);be(Re,(()=>je.Sub),((Oe,Be)=>{Be(Oe,{children:(Ge,xe)=>{var ze=l0(),He=b(ze);be(He,(()=>je.SubTrigger),((De,pe)=>{pe(De,{children:(fe,Pe)=>{var We=a0(),Ye=f(_(We)),Qe=st=>{var Ke=o0(),vt=_(Ke);ge((()=>qe(vt,t(O).displayName))),s(st,Ke)};k(Ye,(st=>{t(O)&&st(Qe)})),s(fe,We)},$$slots:{default:!0}})}));var Le=f(He,2);be(Le,(()=>je.SubContent),((De,pe)=>{pe(De,{class:"c-model-picker__legacy-submenu",children:(fe,Pe)=>{var We=P(),Ye=b(We);Pt(Ye,19,(()=>t(I)),((Qe,st)=>Qe.name??st),((Qe,st,Ke)=>{var vt=i0(),dt=b(vt);Pt(dt,17,(()=>t(st).models),(ne=>ne.id),((ne,Me)=>{var Ue=P(),Je=b(Ue),rt=bt=>{{let Bt=d((()=>[nn.Hover]));at(bt,{get content(){return t(Me).disabled_reason},get triggerOn(){return t(Bt)},side:"top",nested:!0,children:(Vt,Qt)=>{u(Vt,(()=>t(Me)))},$$slots:{default:!0}})}},Ze=bt=>{u(bt,(()=>t(Me)))};k(Je,(bt=>{t(Me).disabled&&t(Me).disabled_reason?bt(rt):bt(Ze,!1)})),s(ne,Ue)}));var yt=f(dt,2),Ve=ne=>{var Me=P(),Ue=b(Me);be(Ue,(()=>je.Separator),((Je,rt)=>{rt(Je,{})})),s(ne,Me)};k(yt,(ne=>{t(Ke)<t(I).length-1&&ne(Ve)})),s(Qe,vt)})),s(fe,We)},$$slots:{default:!0}})})),s(Ge,ze)},$$slots:{default:!0}})})),s(oe,ve)};k(le,(oe=>{t(I).length>0&&oe(_e)})),s(ie,he)};k(ue,(ie=>{t(z)?ie(ke):ie(re,!1)})),Dt(ce,(ie=>m=ie),(()=>m)),s($e,Ie)},$$slots:{default:!0}})})),s(J,Q)},$$slots:{default:!0}}),(J=>Z(v,J,!0)),(()=>t(v)))})),s(M,U)},$$slots:{content:!0,default:!0}}),s(o,R),Ee(),c()}const h0="You can only have %MAX_AGENTS% agents at a time. Please delete some before creating a new one.",Vw="You can only have %MAX_AGENTS% active agents at a time. Please pause some before creating a new one.",m0=(o,e,n,r,a,i,l)=>()=>{if(l)return!1;const c=n?.request_message??"",u=n?.rich_text_json_repr,g=()=>{n||o(xd({draftStatus:ts.ready,exchange:{request_message:c,rich_text_json_repr:u,status:An.draft}}))};if(!r.currentAgentId){if(r.isCreatingAgent)return!1;r.setIsCreatingAgent(!0),o(Uo());const y=async()=>{try{await r.reportRemoteAgentSetupWindowEvent(wr.clickCreateAgent)}catch(v){console.error("Failed to report click create agent event:",v)}},m=async()=>{try{y();const v=await r.createRemoteAgentFromDraft(c,e??void 0);v?r.setCurrentAgent(v):g()}catch(v){console.error("Failed to create remote agent: ",v),g()}finally{r.setIsCreatingAgent(!1)}};return a?(a?.isGithubAuthenticated().then((v=>{if(!v)return r.setIsCreatingAgent(!1),void g();m()})).catch((v=>{console.error("Failed to check GitHub authentication status:",v),r.setIsCreatingAgent(!1),g()})),!0):(m(),!0)}const p=n;return p&&r&&(o(Uo()),r.sendMessage(p.request_message,e??void 0).then((y=>{y||g()})).catch((()=>{g()}))),setTimeout((()=>i?.blur()),50),!0};function ml(o,e){const n=(o?.request_message?.trim().length||0)>Rs,{hasFileWarning:r,fileWarningMessage:a}=(()=>{if(e){const i=o?.rich_text_json_repr;if(!i)return{hasFileWarning:!1,fileWarningMessage:""};const{hasWarning:l,warningMessage:c}=oi(i);return{hasFileWarning:l,fileWarningMessage:c}}return{hasFileWarning:!1,fileWarningMessage:""}})();return n?{stateName:"overCharLimit",showCancelButton:!1,isDisabled:!0,disabledReason:`Message exceeds the ${Rs} character limit`,action:()=>!1,cancelAction:()=>!1}:r?{stateName:"overImageLimit",showCancelButton:!1,isDisabled:!0,disabledReason:a,action:()=>!1,cancelAction:()=>!1}:void 0}function jw(o,e,n,r,a,i,l){return ml(n,r)||(function(c,u,g,p,y,m){let v=!1;p.agentOverviews&&(v=!!p.maxRemoteAgents&&p.agentOverviews.length>=p.maxRemoteAgents);let w=!1;const E=p.isCreatingAgent||p.currentAgent?.status===Gn.agentStarting,A=p?.currentAgent?.status===Gn.agentFailed;if(p.currentAgentId)w=!g?.request_message||E||A;else{const L=p.newAgentDraft;w=!g?.request_message||p.isCreatingAgent||v||!L?.commitRef?.github_commit_ref?.repository_url||!L.selectedBranch?.name}const $=p.isCurrentAgentRunning&&!E;let C;return w&&(g?.request_message?p.isCreatingAgent?C="Creating agent...":E?C="Agent is starting...":A?C="Agent has failed and cannot accept messages":v&&(C=h0.replace("%MAX_AGENTS%",p.maxRemoteAgents.toString())):C="Please enter a message"),{stateName:"remoteAgentMode",showCancelButton:$,isDisabled:w,disabledReason:C,action:m0(c,u,g,p,y,m,w),cancelAction:()=>(p.interruptAgent(),!0)}})(o,e,n,a,i,l)}function pl(o,e,n){if(n)return{isDisabled:!0,isHidden:!1,disabledReason:void 0};if(!o?.isActive)return{isDisabled:!1,isHidden:!1,disabledReason:void 0};const r=o.newAgentDraft?.commitRef?.github_commit_ref?.repository_url;if(!r)return{isDisabled:!1,isHidden:!1,disabledReason:void 0};const a=e||"";return a&&r!==a?{isDisabled:!0,isHidden:!1,disabledReason:"Prompt enhancer is only available when the current repository is selected"}:{isDisabled:!1,isHidden:!1,disabledReason:void 0}}var p0=h("<span> </span> <span> </span>",1),f0=h('<label><!> <input type="checkbox" role="switch"/></label>');gn(["keydown","change","click"]);var _0=h('<div class="c-toggle-mode-button-tooltip svelte-v9wytb">Toggle agent mode <!> <div class="c-toggle-mode-button-tooltip__content svelte-v9wytb"> </div></div>'),y0=h("<!> <!>",1);function fl(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"disabled",3,!1);const i=ut(),l=Tt(un.key),c=Tt(us.key),u=Ct("enableAgentAutoMode"),g=ln(),p=jn(g),y=go();let m=d((()=>G(p,"$isAgentic",n)&&!G(l,"$remoteAgentsModel",n).isActive&&G(u,"$enableAgentAutoModeReadable",n))),v=d((()=>G(y,"$executionMode",n)===is.auto)),w=d((()=>t(v)?`Auto ON
  Run most commands automatically`:`Auto OFF
  Require approval for most commands`));async function E(S){t(v)?i(lt(tt.SHARED.AGENT_MODE_DEACTIVATED,{source:S})):i(lt(tt.SHARED.AGENT_MODE_ACTIVATED,{source:S})),await c.toggleChatAgentAutoMode("button")}function A(){E("keybinding")}Jt((()=>{c.reportModeSelectorInit()}));var $=P(),C=b($),L=S=>{{const I=D=>{var z=_0(),K=f(_(z));_n(K,{commandName:"toggleAgentMode",keysOnly:!0});var j=f(K,2),V=_(j);ge((()=>qe(V,t(w)))),s(D,z)};let O=d((()=>[nn.Hover]));at(S,{class:"c-toggle-mode-button",get triggerOn(){return t(O)},delayDurationMs:300,maxWidth:"auto",content:I,children:(D,z)=>{var K=y0(),j=b(K);on(j,{name:"toggleAgentMode",handler:A}),(function(V,R){Ce(R,!0);let x=H(R,"checked",15,!1),B=H(R,"disabled",3,!1),q=H(R,"size",3,2),M=H(R,"ariaLabel",19,(()=>{})),W=H(R,"onText",19,(()=>{})),U=H(R,"offText",19,(()=>{})),F=d((()=>W()||U()));var T=f0();let N;var J=_(T),Y=ee=>{var se=p0(),we=b(se);let $e;var te=_(we),Ie=f(we,2);let me;var Ae=_(Ie);ge((()=>{$e=ct(we,1,"c-toggle-text c-toggle-text--off svelte-q28axe",null,$e,{visible:!x()&&U()}),qe(te,U()||""),me=ct(Ie,1,"c-toggle-text c-toggle-text--on svelte-q28axe",null,me,{visible:x()&&W()}),qe(Ae,W()||"")})),s(ee,se)};k(J,(ee=>{t(F)&&ee(Y)}));var Q=f(J,2);let X;Q.__keydown=function(ee){B()||(ee.key!=="Enter"&&ee.key!==" "||(ee.preventDefault(),x(!x())),R.onkeydown?.(ee))},Q.__change=function(ee){R.onchange?.(ee)},Q.__click=function(...ee){R.onclick?.apply(this,ee)},ge((()=>{N=ct(T,1,`c-toggle-track c-toggle-track-size--${q()??""}`,"svelte-q28axe",N,{checked:x(),disabled:B(),"has-text":t(F)}),X=ct(Q,1,"c-toggle-input svelte-q28axe",null,X,{disabled:B()}),Q.disabled=B(),nt(Q,"aria-label",M())})),Ft("blur",Q,(function(...ee){R.onblur?.apply(this,ee)})),Ft("focus",Q,(function(...ee){R.onfocus?.apply(this,ee)})),mg(Q,x),s(V,T),Ee()})(f(j,2),{get checked(){return t(v)},get disabled(){return a()},size:2,onText:"Auto",offText:"Auto",ariaLabel:"Toggle between manual and auto agent mode",onchange:()=>E("button")}),s(D,K)},$$slots:{content:!0,default:!0}})}};k(C,(S=>{t(m)&&S(L)})),s(o,$),Ee(),r()}function _l(o,e){Ce(e,!0);let n=H(e,"isAskMode",3,!1),r=H(e,"onAskModeChange",19,(()=>{})),a=H(e,"onAskModeToggleComplete",19,(()=>{})),i=H(e,"onAskModeDeleted",19,(()=>{}));const l=new ai(i());Jt((()=>{r()&&l.setOnAskModeChange(r()),l.setAskMode(n(),a())})),ot((()=>{l.setAskMode(n(),a())}));const c=Tt(rr.CONTEXT_KEY).pluginManager.registerPlugin(l);return ls((()=>{l.setAskMode(!1,a()),c()})),Ee({getAskModePrompt:()=>l.askModePrompt,getIsAskMode:()=>l.isAskMode})}function yl(o,e){Ce(e,!0);const[n,r]=Xe(),a=ut(),i=fo(),l=Rd(),c=d((()=>{const u={},g=G(l,"$proseMirrorKeybindings",n);for(const[p,y]of Object.entries(g))u[p]=(m,v,w)=>(G(i,"$isShortcutsExtensionControlled",n)||a(Md(y)),!0);return u}));Ag(o,{get shortcuts(){return t(c)}}),Ee(),r()}var b0=h('<span data-draft-editor-focus=""></span>');function bl(o,e){Ce(e,!0);let n=Te(void 0);ot((()=>{if(e.draft?.draftStatus!==ts.enhancing){if(t(n)===ts.enhancing&&e.draft?.draftStatus===ts.ready)if(Z(n,e.draft.draftStatus,!0),e.draft.exchange?.display_error_message){const a=e.draft.exchange?.display_error_message;a&&e.editorContainer&&(function(i){const{message:l,referenceElement:c,placement:u="top",autoDismissMs:g=3e3,theme:p="error",className:y=""}=i,m=document.createElement("div");m.className=y,m.textContent=l,document.body.appendChild(m);const v=typeof c=="string"?document.querySelector(c):c;if(!v)return void console.warn("ErrorTooltip: No reference element provided");const w=Xv(m,{content:m,trigger:"manual",placement:u,theme:p,duration:[300,2e3],getReferenceClientRect:()=>v.getBoundingClientRect(),onHidden:()=>{m.remove()}});w.show(),setTimeout((()=>{w.hide()}),g)})({message:a,referenceElement:e.editorContainer,placement:"top",className:"enhance-prompt-error-tooltip"})}else{e.forceEditorFocus?.();try{const a=e.editorContainer?.querySelector(".ProseMirror");if(a){const i=a.querySelector("p");if(i){const l=document.createRange(),c=window.getSelection();l.setStart(i,0),l.collapse(!0),c&&(c.removeAllRanges(),c.addRange(l))}}}catch{}}}else Z(n,e.draft?.draftStatus,!0)}));var r=b0();s(o,r),Ee()}var $0=h("<!> <!> <!>",1),w0=h('<span class="character-counter"> </span>'),k0=h("<!> <!> <!>",1),A0=h("<!> <div><!></div>",1),C0=h("<span><!></span>"),E0=h("<!> <!> <!>",1),T0=h('<!> <!> <!> <!> <div class="c-chat-input__context-bar svelte-vzdet8"><!></div>',1),I0=h("<div><!></div>"),S0=h("<!> <!> <!> <!> <!>  <!>",1),x0=h('<div role="button" tabindex="-1"><!></div>');function R0(o,e){Ce(e,!0);const n=()=>G(t(q),"$draft",c),r=()=>G(F,"$conversationType",c),a=()=>G(ee,"$selectedModel",c),i=()=>G(j,"$currentConversationId",c),l=()=>G(B,"$enableChatMultimodal",c),[c,u]=Xe(),g=ut(),p=Tt(us.key),y=Tt(un.key),m=Tt(Ir.key);let v=H(e,"collapsedMaxHeight",3,120),w=H(e,"requestId",19,(()=>crypto.randomUUID())),E=H(e,"placeholder",3,"Edit your message..."),A=H(e,"collapsed",3,!1),$=H(e,"onCancelEdit",3,(()=>{})),C=H(e,"userExpanded",15),L=H(e,"showExpandButton",3,!1),S=H(e,"isEditing",15,!1),I=Te(void 0),O=Te(Dn([])),D=Te(!1),z=Te(!1);const K=Fn(),j=Nn(),V=jn(j),R=Ct("enableModelRegistry"),x=Ct("enableEditableHistory"),B=Ct("enableChatMultimodal"),q=d((()=>zd(w()))),M=d((()=>n()?.exchange)),W=_o(j),U=ii(),F=p.chatModeType,T=d((()=>t(M)?.rich_text_json_repr??e.content));function N(){Z(D,!t(D))}function J(){S()&&setTimeout((()=>{t(le)?.requestFocus()}),100)}async function Y(){await Cn(),t(D)||g(lt(tt.SHARED.ASK_MODE_DEACTIVATED,{source:"backspace"}))}ot((()=>{if(r()==="localAgent"&&t(T)){const De=ai.detectAskModeInContent(t(T));De!==t(D)&&Z(D,De,!0)}}));const Q=d((()=>t(M)?.request_message.trim()?.length??0)),X=d((()=>G(x,"$enableEditableHistory",c)&&!G(U,"$isRemoteAgent",c))),ee=li(j),se=d((()=>a()?.disabled??!1)),we=d((()=>a()?.disabled_reason??"")),$e=d((()=>S()&&t(X)&&!t(se)&&t(M)!==void 0&&t(M).request_message.trim()!==""&&t(M).request_message!==e.content&&t(M).rich_text_json_repr!==e.content&&!po.hasLoadingImages(t(M).rich_text_json_repr))),te=m?.currentRepositoryUrl,Ie=d((()=>pl(G(y,"$remoteAgentModel",c),G(te,"$currentRepoUrl",c),!t($e))));function me(){g(Nd(i(),w()))}async function Ae(){t(X)&&(C(!0),A()&&e.setIsCollapsed(!1),t(I)&&g(Vo(w(),{draftStatus:ts.ready,exchange:co(t(I))})),S(!0),g(lt(tt.SHARED.MESSAGE_EDIT_STARTED,{})),await Cn(),oe())}function ce(){if(!t($e)||!t(M))return!1;Z(I,void 0),g(lt(tt.SHARED.MESSAGE_EDIT_SUBMITTED,{}));const De={richTextJsonRepr:t(M).rich_text_json_repr||[],rawText:t(M).request_message};return e.onSubmitEdit(De,co(t(O))),!0}function ue(){g(lt(tt.SHARED.MESSAGE_EDIT_CANCELLED,{})),S(!1),C(!1)}function ke(){return ue(),Z(I,t(M)?{...t(M)}:void 0,!0),g(jo(w())),!0}function re(){return ue(),Z(I,void 0),g(jo(w())),$()(),Z(D,!1),!0}function ie(De){const pe={...t(M),request_message:De.rawText,rich_text_json_repr:Array.isArray(De.richTextJsonRepr)?De.richTextJsonRepr[0]:De.richTextJsonRepr};S()&&!To(pe,t(M))&&g(Vo(w(),{draftStatus:ts.ready,exchange:pe}))}function he(De){Z(O,De.current,!0)}let de=Te(void 0),le=Te(void 0);const _e=()=>t(le)?.requestFocus(),oe=()=>t(le)?.forceFocus();let ve=Te(void 0);function ye(De,pe){for(const fe of De)g(lt(tt.SHARED.FILE_ATTACHMENT_SUCCEEDED,{bytes:fe.size,type:fe.type?fe.type:"unknown"}));for(const fe of pe)g(lt(tt.SHARED.FILE_ATTACHMENT_FAILED,{bytes:fe.files[0].size,type:fe.files[0].type?fe.files[0].type:"unknown"}));g(lt(tt.SHARED.FILE_ATTACHMENT_BUNDLE_COMPLETED,{successes:De.length,failures:pe.length}))}function Ne(){g(lt(tt.SHARED.FILE_ATTACHMENT_STARTED,{source:"drop"}))}async function Re(De){if(!i())return;const{files:pe,folders:fe}=await K.resolveFilePaths(De);pe.length>0&&g(ci(i(),pe)),fe.length>0&&g(di(i(),fe))}function Oe(){g(lt(tt.SHARED.FILE_ATTACHMENT_STARTED,{source:"button"}))}function Be(De){g(lt(tt.WEBVIEW.CONTEXT_MENU_BUTTON_CLICKED,{source:De}))}var Ge={requestStartEdit:()=>{Ae()},getEditorContainer:function(){return t(ve)},handleDrop:Ne},xe=x0();let ze;Ft("mousedown",fn,(function(...De){(S()?ke:void 0)?.apply(this,De)})),xe.__mousedown=De=>De.stopPropagation();var He=_(xe);{const De=Pe=>{var We=P(),Ye=b(We),Qe=st=>{vl(st,{onDrop:Ne,onCodeFilesDrop:Re})};k(Ye,(st=>{l()&&S()&&st(Qe)})),s(Pe,We)},pe=Pe=>{var We=P(),Ye=b(We),Qe=Ke=>{var vt=T0(),dt=b(vt);{let Ue=d((()=>!t(z)));on(dt,{get isDisabled(){return t(Ue)},name:"cancelMessageEdit",handler:re})}var yt=f(dt,2);{let Ue=d((()=>!t(z)));on(yt,{get isDisabled(){return t(Ue)},name:"submitMessageEdit",handler:ce})}var Ve=f(yt,2);yl(Ve,{});var ne=f(Ve,2);{const Ue=rt=>{var Ze=k0(),bt=b(Ze),Bt=_t=>{var kt=$0(),gt=b(kt);fl(gt,{});var Rt=f(gt,2);at(Rt,{maxWidth:"200px",content:ft=>{or(ft,{heading:"Ask a question",description:"Get answers without modifying code",shortcutCommandName:"toggleAskMode"})},children:(ft,$t)=>{{let qt=d((()=>t(D)?"soft":"ghost-block")),ht=d((()=>t(D)?"accent":"neutral"));St(ft,{class:"c-chat-input__ask-mode-btn",size:1,get variant(){return t(qt)},get color(){return t(ht)},onclick:N,children:(Ot,Mt)=>{Se(Ot,{name:"message-square-text"})},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}});var zt=f(Rt,2);Dr(zt,{orientation:"vertical",class:"c-chat-input__ask-separator"}),s(_t,kt)};k(bt,(_t=>{r()==="localAgent"&&_t(Bt)}));var Vt=f(bt,2),Qt=_t=>{var kt=w0(),gt=_(kt);ge((()=>qe(gt,`${t(Q)??""}/${Rs}`))),s(_t,kt)};k(Vt,(_t=>{t(Q)>Rs&&_t(Qt)}));var Kt=f(Vt,2),xt=_t=>{hl(_t,{get selectedModelId(){return G(W,"$selectedModelId",c)},onModelChange:kt=>{i()&&g(ui(i(),kt))}})};k(Kt,(_t=>{G(V,"$isAgentic",c)&&G(R,"$enableModelRegistry",c)&&_t(xt)})),s(rt,Ze)},Je=rt=>{var Ze=E0(),bt=b(Ze),Bt=xt=>{var _t=P(),kt=b(_t);be(kt,(()=>xn.AddFileButton),((gt,Rt)=>{Rt(gt,{accept:".png,.jpg,.jpeg",onclick:Oe})})),s(xt,_t)};k(bt,(xt=>{l()&&xt(Bt)}));var Vt=f(bt,2),Qt=xt=>{var _t=A0(),kt=b(_t);bl(kt,{get draft(){return n()},forceEditorFocus:oe,get editorContainer(){return t(ve)}});var gt=f(kt,2),Rt=_(gt);{let zt=d((()=>n()?.draftStatus===ts.enhancing));be(Rt,(()=>xn.RewritePromptButton),((Nt,ft)=>{ft(Nt,{onRewrite:me,get isDisabled(){return t(Ie).isDisabled},get disabledReason(){return t(Ie).disabledReason},get isEnhancing(){return t(zt)}})}))}Zt(3,gt,(()=>Cr),(()=>({axis:"x",duration:200,scale:.4}))),s(xt,_t)};k(Vt,(xt=>{t(Ie).isHidden||xt(Qt)}));var Kt=f(Vt,2);{const xt=gt=>{var Rt=C0(),zt=_(Rt);_n(zt,{commandName:"submitMessageEdit",keysOnly:!0}),s(gt,Rt)};let _t=d((()=>!t($e))),kt=d((()=>t(se)?t(we):""));be(Kt,(()=>xn.SendButton),((gt,Rt)=>{Rt(gt,{get isDisabled(){return t(_t)},get disabledReason(){return t(kt)},primaryAction:ce,tooltipContent:xt,$$slots:{tooltipContent:!0}})}))}s(rt,Ze)};be(ne,(()=>xn.Root),((rt,Ze)=>{Ze(rt,{leftAlign:Ue,rightAlign:Je,$$slots:{leftAlign:!0,rightAlign:!0}})}))}var Me=f(ne,2);{const Ue=Je=>{var rt=P(),Ze=b(rt);{let bt=d((()=>t(de)?.insertMentionNode));be(Ze,(()=>xn.ContextMenu),((Bt,Vt)=>{Vt(Bt,{onCloseDropdown:_e,get onInsertMentionable(){return t(bt)},trackButtonClick:Be})}))}s(Je,rt)};ul(_(Me),{prepend:Ue,$$slots:{prepend:!0}})}s(Ke,vt)},st=Ke=>{var vt=P(),dt=b(vt),yt=Ve=>{var ne=I0();let Me;var Ue=_(ne);Et(Ue,{variant:"soft",color:"neutral",size:.5,onclick:()=>{C(!C()),e.setIsCollapsed(!A())},iconLeft:rt=>{{let Ze=d((()=>A()?"chevron-down":"chevron-up"));Se(rt,{get name(){return t(Ze)},size:0})}},$$slots:{iconLeft:!0}}),ge((()=>Me=ct(ne,1,"c-chat-input__collapse-button svelte-vzdet8",null,Me,{"c-chat-input__collapse-button--expanded":C()}))),s(Ve,ne)};k(dt,(Ve=>{L()&&Ve(yt)}),!0),s(Ke,vt)};k(Ye,(Ke=>{S()?Ke(Qe):Ke(st,!1)})),s(Pe,We)};let fe=d((()=>!S()||S()&&t(D)?"accent":"default"));be(He,(()=>ds.Root),((Pe,We)=>{Dt(We(Pe,{get editable(){return S()},get variant(){return t(fe)},onclick:Ye=>Ye.stopPropagation(),ondblclick:Ae,onFocus:()=>{K.setChatContextVariables({editMessageInputFocused:!0}),Z(z,!0)},onBlur:()=>{K.setChatContextVariables({editMessageInputFocused:!1}),Z(z,!1)},overlay:De,footer:pe,children:(Ye,Qe)=>{var st=S0(),Ke=b(st),vt=Ue=>{zo(0,{changeImageMode:Je=>{w()&&Je&&g(Dd(i(),w(),{rich_text_json_repr:Je}))},get saveImage(){return K.saveImage},get saveAttachment(){return K.saveAttachment},get deleteImage(){return K.deleteImage},get renderImage(){return K.loadImage},isEditable:()=>S(),supportedFileTypes:["image","text"],onCompletedAttachment:ye})};k(Ke,(Ue=>{l()&&Ue(vt)}));var dt=f(Ke,2);Dt(Co(dt,{requestEditorFocus:_e,onMentionItemsUpdated:he}),(Ue=>Z(de,Ue,!0)),(()=>t(de)));var yt=f(dt,2);_l(0,{get isAskMode(){return t(D)},onAskModeChange:Ue=>{Z(D,Ue,!0)},onAskModeToggleComplete:J,onAskModeDeleted:Y});var Ve=f(yt,2);Eo(Ve,{get placeholder(){return E()}});var ne=f(Ve,2);be(ne,(()=>ds.Content),((Ue,Je)=>{Je(Ue,{get content(){return t(T)},onContentChanged:ie})}));var Me=f(ne,2);et(Me,(()=>e.children??pt)),s(Ye,st)},$$slots:{overlay:!0,footer:!0,default:!0}}),(Ye=>Z(le,Ye,!0)),(()=>t(le)))}))}Dt(xe,(De=>Z(ve,De)),(()=>t(ve))),ge((()=>{nt(xe,"data-user-message-request-id",w()),nt(xe,"data-request-id",w()),ze=ct(xe,1,"c-chat-input c-chat-edit-message svelte-vzdet8",null,ze,{"is-collapsed":A(),"is-editing":S(),"is-expendable":L()}),Un(xe,`--chat-input-collapsed-height: ${v()??""}px;`)})),s(o,xe);var Le=Ee(Ge);return u(),Le}gn(["mousedown"]);class ks{constructor(e){this._options=e;const n=ks._getNextPluginId(),r=this._setResizeObserver,a=this._clearResizeObserver,i=this._checkHeight;this._tipTapExtension=vi.create({name:n,onCreate:function(){this.editor.view?.dom&&(r(this.editor),this.editor.on("destroy",a))},onUpdate:function(){const l=this.editor.view?.dom;l&&i(l)},onDestroy:()=>{this._resizeObserver?.disconnect(),this._resizeObserver=void 0}})}static _sequenceId=0;static RESIZE_OBSERVER_PLUGIN_KEY_BASE="augment-resize-observer-plugin-{}";static _getSequenceId=()=>ks._sequenceId++;static _getNextPluginId=()=>{const e=ks._getSequenceId().toString();return ks.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",e)};_tipTapExtension;_resizeObserver;_checkHeight=e=>{const n=e.getBoundingClientRect().height;this._options.onResize?.(n)};_setResizeObserver=e=>{const n=e.view?.dom;n&&(this._resizeObserver=new ResizeObserver((r=>{for(const a of r)this._checkHeight(a.target)})),this._resizeObserver.observe(n),this._checkHeight(n))};_clearResizeObserver=()=>{this._resizeObserver?.disconnect(),this._resizeObserver=void 0};updateOptions=e=>{this._options={...this._options,...e}};get tipTapExtension(){return this._tipTapExtension}}var M0=h('<div class="c-user-msg__actions svelte-1ncstye"><!></div>');function D0(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"requestId",19,(()=>{})),i=H(e,"richTextJsonRepr",19,(()=>{})),l=H(e,"timestamp",19,(()=>{})),c=H(e,"onStartEdit",3,(()=>{})),u=H(e,"onAcceptEdit",3,(()=>{})),g=H(e,"onCancelEdit",3,(()=>{}));const p=ut(),y=Tt(un.key),m=Ct("enableChatMultimodal"),v=Ct("fullFeatured"),w=Ct("enableEditableHistory"),E=Od(),A=d((()=>_o(e.conversationId))),$=120;let C=Te(!0),L=Te(!1);async function S(M){await Cn(),Z(C,M&&t(R)&&!t(L),!0)}let I=Te(!1);const O=M=>{t(B)&&a()&&(S(!1),t(K)?.requestStartEdit(),c()(),M?.stopPropagation())},D=()=>{g()()};async function z(M,W){if(!a())return;p(hr(e.conversationId)),p(Ld(e.conversationId,a(),!0));const U=G(m,"$enableChatMultimodal",n)&&M.richTextJsonRepr?Pd(M.richTextJsonRepr,G(E,"$customPersonalityPrompts",n),!1):void 0;p(gi(e.conversationId,{request_message:M.rawText,rich_text_json_repr:M.richTextJsonRepr,status:An.draft,mentioned_items:W,structured_request_nodes:U,model_id:G(t(A),"$modelId",n)??void 0})),u()()}let K=Te(void 0),j=Te(!1),V=d((()=>!!y?.isActive)),R=d((()=>!t(I))),x=Te(0);const B=d((()=>a()!==void 0&&G(v,"$fullFeatured",n)&&G(w,"$enableEditableHistory",n)&&!t(V))),q=d((()=>[{label:"Edit message",action:O,id:"edit-message",disabled:!1,lucideIconName:"pencil"}]));ot((()=>{t(x)&&t(R)&&t(K)?.getEditorContainer()&&t(x)&&t(R)&&(t(C)&&t(x)<$?S(!1):S(t(x)>$),Z(j,t(x)>$))})),zr(o,{get requestId(){return a()},get timestamp(){return l()},get isEditing(){return t(I)},set isEditing(U){Z(I,U,!0)},content:U=>{{let F=d((()=>i()??e.msg));Dt(R0(U,{get collapsed(){return t(C)},get showExpandButton(){return t(j)},get content(){return t(F)},collapsedMaxHeight:$,get requestId(){return a()},onSubmitEdit:z,onCancelEdit:D,setIsCollapsed:S,get isEditing(){return t(I)},set isEditing(T){Z(I,T,!0)},get userExpanded(){return t(L)},set userExpanded(T){Z(L,T,!0)},children:(T,N)=>{(function(J,Y){Ce(Y,!0);let Q=H(Y,"height",15,0);const X=$e=>{Q($e)},ee=Tt(rr.CONTEXT_KEY),se=new ks({onResize:X}),we=ee.pluginManager.registerPlugin(se);ls(we),ot((()=>{se.updateOptions({onResize:X})})),Ee()})(0,{get height(){return t(x)},set height(J){Z(x,J,!0)}})},$$slots:{default:!0}}),(T=>Z(K,T,!0)),(()=>t(K)))}},userActions:U=>{var F=M0(),T=_(F),N=J=>{Nv(J,{get items(){return t(q)}})};k(T,(J=>{t(B)&&!t(I)&&J(N)})),s(U,F)},$$slots:{content:!0,userActions:!0}}),Ee(),r()}var z0=h('<div class="c-msg-list__turn"><!> <!> <!></div>');function N0(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"turnIndex",3,0);const i=ut();let l=d((()=>e.turn.request_id)),c=d((()=>bo(e.turn)));const u=()=>{i(Fd(e.conversationId,e.turn)),i(lt(tt.WEBVIEW.MESSAGE_SEND_RETRY_CLICKED,{source:"button",errorMessagePreview:e.turn.display_error_message?.substring(0,100),requestId:t(l)}))},g=d((()=>Bd(e.conversationId,t(l))));var p=z0(),y=_(p),m=A=>{{let $=d((()=>e.turn.request_message??""));D0(A,{get conversationId(){return e.conversationId},get msg(){return t($)},get richTextJsonRepr(){return e.turn.rich_text_json_repr},get requestId(){return t(l)},get timestamp(){return e.turn.timestamp}})}};k(y,(A=>{t(c)||Ri(e.turn)||A(m)}));var v=f(y,2);{let A=d((()=>e.turn.response_text??""));Pi(v,{get turn(){return e.turn},get turnIndex(){return a()},get requestId(){return t(l)},get showFooter(){return G(t(g),"$showFooter",n)},get markdown(){return t(A)}})}var w=f(v,2),E=A=>{(function($,C){let L;Ce(C,!0);let S=Te("Copy request ID"),I=Te(void 0);function O(B){B||(clearTimeout(L),L=void 0,Z(S,"Copy request ID"))}async function D(){C.requestId&&(await navigator.clipboard.writeText(C.requestId),Z(S,"Copied!"),clearTimeout(L),L=setTimeout((()=>t(I)?.requestClose()),1500))}var z=Vp(),K=_(z),j=B=>{var q=ae();ge((()=>qe(q,C.displayErrorMessage))),s(B,q)},V=B=>{var q=P(),M=b(q),W=F=>{var T=Wp();f(b(T)).__click=N=>{N.preventDefault(),C.onResend()},s(F,T)},U=F=>{var T=Gp();f(b(T)).__click=N=>{N.preventDefault(),C.onResend()},s(F,T)};k(M,(F=>{C.responseText&&C.responseText.length>0?F(W):F(U,!1)}),!0),s(B,q)};k(K,(B=>{C.displayErrorMessage?B(j):B(V,!1)}));var R=f(K,2),x=B=>{var q=Up(),M=_(q),W=_(M),U=f(M,2);{let F=d((()=>[nn.Hover]));Dt(at(U,{onOpenChange:O,get content(){return t(S)},get triggerOn(){return t(F)},children:(T,N)=>{St(T,{variant:"ghost",color:"neutral",size:1,onclick:D,children:(J,Y)=>{Se(J,{name:"copy"})},$$slots:{default:!0}})},$$slots:{default:!0}}),(T=>Z(I,T,!0)),(()=>t(I)))}ge((()=>qe(W,`Request ID: ${C.requestId??""}`))),s(B,q)};k(R,(B=>{C.requestId&&B(x)})),s($,z),Ee()})(A,{get displayErrorMessage(){return e.turn.display_error_message},get responseText(){return e.turn.response_text},get requestId(){return t(l)},onResend:u})};k(w,(A=>{e.turn.status===An.failed&&A(E)})),s(o,p),Ee(),r()}var O0=h("<!> <!> <!>",1),L0=h("<!> <!>",1),P0=h("<span> </span>"),B0=h('<div class="c-gen-response svelte-17m6ry2"><span class="c-gen-response__text svelte-17m6ry2"><!> <!></span> <span class="c-gen-response__actions svelte-17m6ry2"><!> <!></span></div>');function No(o,e){Ce(e,!0);const n=()=>G(c,"$lastExchange",r),[r,a]=Xe();let i=H(e,"timeToTimerMs",3,5e3),l=Te(0);const c=hi(e.conversationId);let u,g,p=d((()=>n()?.timestamp?new Date(n().timestamp).getTime():Date.now())),y=Te(!1);function m(){Z(l,Math.floor((Date.now()-t(p))/1e3),!0)}function v(){Z(y,!0),m(),g=setInterval(m,1e3)}let w=d((()=>(function(D){return D>=60?`${Math.floor(D/60)}:${String(D%60).padStart(2,"0")}`:`0:${String(D).padStart(2,"0")}`})(t(l))));Jt((function(){return Date.now()-t(p)>i()?v():u=setTimeout(v,i()),()=>{Z(y,!1),clearTimeout(u),clearInterval(g)}}));var E=B0(),A=_(E),$=_(A);Vn($,{size:1});var C=f($,2);Fe(C,{size:1,weight:"light",color:"secondary",children:(D,z)=>{var K=ae("Generating response...");s(D,K)},$$slots:{default:!0}});var L=f(A,2),S=_(L),I=D=>{var z=P(),K=b(z);be(K,(()=>Mn.Root),((j,V)=>{V(j,{color:"neutral",size:1,children:(R,x)=>{Fe(R,{type:"monospace",size:1,weight:"light",color:"secondary",children:(B,q)=>{var M=P0();let W;var U=_(M);ge((()=>{W=ct(M,1,"c-gen-response__timer svelte-17m6ry2",null,W,{is_minutes:t(l)>=60}),qe(U,t(w))})),s(B,M)},$$slots:{default:!0}})},$$slots:{default:!0}})})),s(D,z)};k(S,(D=>{t(y)&&D(I)}));var O=f(S,2);{let D=d((()=>n()?.request_id));(function(z,K){Ce(K,!0);const j=ut();async function V(){K.requestId&&(j(lt(tt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Copy Request ID from Generating Response"})),await navigator.clipboard.writeText(K.requestId))}function R(){j(lt(tt.WEBVIEW.SELECT_MESSAGE_OPTION,{option:"Report an Issue from Generating Response"})),an.postMessage({type:jt.augmentLink,data:"https://support.augmentcode.com/"})}var x=P(),B=b(x);be(B,(()=>je.Root),((q,M)=>{M(q,{nested:!1,children:(W,U)=>{var F=L0(),T=b(F);be(T,(()=>je.Trigger),((J,Y)=>{Y(J,{children:(Q,X)=>{St(Q,{variant:"ghost-block",color:"neutral",size:.5,title:"Options","aria-label":"Options",children:(ee,se)=>{Se(ee,{size:1,name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var N=f(T,2);be(N,(()=>je.Content),((J,Y)=>{Y(J,{size:1,side:"bottom",align:"end",children:(Q,X)=>{var ee=O0(),se=b(ee),we=me=>{Ov(me,{iconName:"copy",idleLabel:"Copy Request ID",successLabel:"Copied!",onSelect:V})},$e=me=>{var Ae=P(),ce=b(Ae);be(ce,(()=>je.Item),((ue,ke)=>{ke(ue,{disabled:!0,children:(re,ie)=>{var he=ae("Request ID unavailable");s(re,he)},$$slots:{default:!0}})})),s(me,Ae)};k(se,(me=>{K.requestId?me(we):me($e,!1)}));var te=f(se,2);be(te,(()=>je.Separator),((me,Ae)=>{Ae(me,{})}));var Ie=f(te,2);be(Ie,(()=>je.Item),((me,Ae)=>{Ae(me,{onSelect:R,children:(ce,ue)=>{var ke=ae("Report an Issue");s(ce,ke)},$$slots:{default:!0}})})),s(Q,ee)},$$slots:{default:!0}})})),s(W,F)},$$slots:{default:!0}})})),s(z,x),Ee()})(O,{get requestId(){return t(D)}})}s(o,E),Ee(),a()}class Jn{constructor(e){this.text=e}type="plainText"}class ur{constructor(e){this.text=e}type="specialBlock"}function Ca(o){return o.map((e=>e.text)).join("")}var F0=h('Please <button class="svelte-9nhc5x">try again</button>.',1),q0=h("Connection lost.<!>",1),H0=h('Please <button class="svelte-9nhc5x">try again</button>',1),W0=h("We encountered an issue sending your message.<!>.",1),G0=h('<div class="c-msg-failure svelte-9nhc5x"><!></div>'),U0=h("<!> <!>",1);function Pr(o,e){Ce(e,!0);let n=H(e,"turn",15),r=H(e,"preamble",3,""),a=H(e,"markdownBlocks",19,(()=>[])),i=H(e,"showLoadingIndicator",3,!0),l={code:yg,codespan:_g,link:Lv};ot((()=>{n(n().response_text=n().response_text??"",!0)}));let c=d((()=>n().response_text?[new Jn(n().response_text)]:a())),u=d((()=>n().response_text??""));function g(p){p.preventDefault(),e.resendTurn?.()}Jt((()=>{if(n().seen_state===Er.seen)return void n(n().response_text=Ca(t(c)),!0);let p=Date.now();const y=(function*(w){for(const E of w)if(E.type==="specialBlock")yield E.text;else for(const A of E.text)yield A})(t(c));let m=y.next();const v=()=>{let w=Date.now();const E=Math.round((w-p)/8);let A="";for(let $=0;$<E&&!m.done;$++)A+=m.value,m=y.next();n(n().response_text+=A,!0),p=w,m.done||requestAnimationFrame(v)};v()})),zr(o,{isAugment:!0,content:y=>{var m=P(),v=b(m),w=A=>{var $=P(),C=b($),L=S=>{No(S,{})};k(C,(S=>{i()&&S(L)})),s(A,$)},E=A=>{var $=P(),C=b($),L=I=>{var O=G0(),D=_(O),z=j=>{var V=ae();ge((()=>qe(V,n().display_error_message))),s(j,V)},K=j=>{var V=P(),R=b(V),x=q=>{var M=q0(),W=f(b(M)),U=F=>{var T=F0();f(b(T)).__click=g,s(F,T)};k(W,(F=>{e.resendTurn&&F(U)})),s(q,M)},B=q=>{var M=W0(),W=f(b(M)),U=F=>{var T=H0();f(b(T)).__click=g,s(F,T)};k(W,(F=>{e.resendTurn&&F(U)})),s(q,M)};k(R,(q=>{n().response_text&&n().response_text.length>0?q(x):q(B,!1)}),!0),s(j,V)};k(D,(j=>{n().display_error_message?j(z):j(K,!1)})),s(I,O)},S=I=>{var O=U0(),D=b(O);{let j=d((()=>r()+t(u)));fg(D,{get renderers(){return l},get markdown(){return t(j)}})}var z=f(D,2),K=j=>{var V=P(),R=b(V);et(R,(()=>e.children??pt)),s(j,V)};k(z,(j=>{n().status&&n().status!==An.success||t(u)!==Ca(t(c))||j(K)})),s(I,O)};k(C,(I=>{n().status===An.failed?I(L):I(S,!1)}),!0),s(A,$)};k(v,(A=>{(!n().status||n().status===An.sent)&&t(u).length<=0?A(w):A(E,!1)})),s(y,m)},$$slots:{content:!0}}),Ee()}gn(["click"]);var V0=h("<!> <!>",1),j0=h("<!> <!>",1);function $l(o,e){Ce(e,!0);const[n,r]=Xe(),a=Ct("suggestedEditsAvailable"),i={seen_state:e.turn.seen_state,status:An.success};let l={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]};const c=[[new ur("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new Jn(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new ur("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new Jn(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new ur("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new Jn(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];G(a,"$suggestedEditsAvailable",n)&&c.push([new ur("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new Jn(": Take your completions beyond the cursor and across your workspace.")]);let u=[new Jn(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...c.flatMap(((v,w)=>[new Jn(`${w+1}. `),...v,new Jn(`

`)])),new Jn("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")],g=Te(void 0);function p(){t(g)?.requestFocus()}var y=j0(),m=b(y);zr(m,{content:w=>{var E=P(),A=b(E);be(A,(()=>ds.Root),(($,C)=>{Dt(C($,{children:(L,S)=>{var I=V0(),O=b(I);be(O,(()=>ds.Content),((z,K)=>{K(z,{get content(){return l}})}));var D=f(O,2);Co(D,{requestEditorFocus:p}),s(L,I)},$$slots:{default:!0}}),(L=>Z(g,L,!0)),(()=>t(g)))})),s(w,E)},$$slots:{content:!0}}),Pr(f(m,2),{get turn(){return i},get markdownBlocks(){return u}}),s(o,y),Ee(),r()}function K0(o,e){Ce(e,!0);const n=()=>G(i,"$syncProgress",r),[r,a]=Xe(),i=yo(),l=d((()=>n()?.syncedCount??0)),c=d((()=>{return v=n()?.syncDuration,v?Math.floor(v/1e3):0;var v}));Jt((()=>{e.onLoadingComplete?.()}));let u=d((()=>[{singularLabel:cr.FILE_INDEXED.SINGULAR,pluralLabel:cr.FILE_INDEXED.PLURAL,value:t(l),icon:"file",skipAnimation:!1},{singularLabel:cr.SECOND.SINGULAR,pluralLabel:cr.SECOND.PLURAL,value:t(c),icon:"clock-8",skipAnimation:!1}]));const g=d((()=>t(l)>0));var p=P(),y=b(p),m=v=>{Pv(v,{get entries(){return t(u)}})};k(y,(v=>{t(g)&&v(m)})),s(o,p),Ee(),a()}const Ea="accordion";var Y0=h('<div class="c-accordion svelte-ho7d7j"><!></div>'),X0=h('<div class="c-accordion-item__custom-icon svelte-1h3oskk"><!></div>'),J0=h('<div class="c-accordion-item__content svelte-1h3oskk"><!></div>'),Q0=h('<div><button class="c-accordion-item__header svelte-1h3oskk"><div class="c-accordion-item__icon-container svelte-1h3oskk"><!> <div class="c-accordion-item__chevron-icon svelte-1h3oskk"><!></div></div> <div class="c-accordion-item__title svelte-1h3oskk"><!></div></button> <!></div>');gn(["click"]);const Ta={Root:function(o,e){Ce(e,!0);let n=H(e,"openValue",15);(function(i){Rn(Ea,i)})({toggle:function(i){n()===i?n(void 0):n(i)},isOpen:function(i){return n()===i}});var r=Y0(),a=_(r);et(a,(()=>e.children??pt)),s(o,r),Ee()},Item:function(o,e){Ce(e,!0);const n=(function(){const $=Tt(Ea);if(!$)throw new Error("AccordionAugment.Item must be used within AccordionAugment.Root");return $})(),r=d((()=>n.isOpen(e.value)));var a=Q0();let i;var l=_(a);l.__click=function(){n.toggle(e.value)};var c=_(l),u=_(c),g=$=>{var C=X0(),L=_(C);Se(L,{get name(){return e.icon}}),s($,C)};k(u,($=>{e.icon&&$(g)}));var p=f(u,2),y=_(p);{let $=d((()=>!t(r)));Jv(y,{get collapsed(){return t($)}})}var m=f(c,2),v=_(m),w=$=>{var C=P(),L=b(C);et(L,(()=>e.header)),s($,C)};k(v,($=>{e.header&&$(w)}));var E=f(l,2),A=$=>{var C=J0(),L=_(C),S=I=>{var O=P(),D=b(O);et(D,(()=>e.content)),s(I,O)};k(L,(I=>{e.content&&I(S)})),ge((()=>nt(C,"id",`accordion-content-${e.value}`))),Zt(3,C,(()=>Ao),(()=>({duration:200}))),s($,C)};k(E,($=>{t(r)&&$(A)})),ge((()=>{i=ct(a,1,"c-accordion-item svelte-1h3oskk",null,i,{"is-open":t(r)}),nt(l,"aria-expanded",t(r)),nt(l,"aria-controls",`accordion-content-${e.value}`)})),s(o,a),Ee()}};var Z0=h('<div class="c-feature-highlight-augment svelte-vn4vcx"><div class="c-feature-highlight-augment__header svelte-vn4vcx"><div class="c-feature-highlight-augment__header-title svelte-vn4vcx"><!> <!></div> <div class="c-feature-highlight-augment__description svelte-vn4vcx"><!></div></div> <div class="c-feature-highlight-augment__accordion svelte-vn4vcx"><!></div></div>');function e_(o,e){Ce(e,!0);let n=H(e,"openItemId",15),r=H(e,"buttonIdMap",19,(()=>({})));const a=ut();let i=Te(void 0);ot((()=>{n()&&n()!==t(i)&&e.items.find((E=>E.value===n())),Z(i,n(),!0)})),ot((()=>{let E,A,$=null,C=null;const L=n()?r()[n()]:void 0;function S(){$&&($.classList.remove("feature-highlight-target"),$.blur(),$.removeEventListener("click",I),C&&$.removeEventListener("keydown",C),$=null),A!==void 0&&(clearTimeout(A),A=void 0),C=null,a(Ko(void 0))}function I(O){$&&(O.target===$||$.contains(O.target))&&S()}return n()&&L&&(E=window.setTimeout((()=>{$=document.getElementById(L),$&&(C=O=>{const D=O;D.key!=="Enter"&&D.key!==" "||I(O)},$.classList.add("feature-highlight-target"),a(Ko(L)),$.focus(),$.addEventListener("click",I),$.addEventListener("keydown",C),A=window.setTimeout((()=>{S()}),6e3))}),300)),()=>{E!==void 0&&clearTimeout(E),$&&($.removeEventListener("click",I),C&&$.removeEventListener("keydown",C)),S()}}));var l=Z0(),c=_(l),u=_(c),g=_(u);Se(g,{name:"augment-logo"});var p=f(g,2);Fe(p,{size:2,weight:"bold",children:(E,A)=>{var $=ae("Augment Features");s(E,$)},$$slots:{default:!0}});var y=f(u,2),m=_(y);Fe(m,{size:1,children:(E,A)=>{var $=ae(`Get the most from your coding agent! Explore some productivity tools that are helping people
        code faster.`);s(E,$)},$$slots:{default:!0}});var v=f(c,2),w=_(v);be(w,(()=>Ta.Root),((E,A)=>{A(E,{get openValue(){return n()},set openValue($){n($)},children:($,C)=>{var L=P(),S=b(L);Pt(S,17,(()=>e.items),(I=>I.value),((I,O)=>{var D=P(),z=b(D);{const K=V=>{var R=ae();ge((()=>qe(R,t(O).title))),s(V,R)},j=V=>{var R=P(),x=b(R);et(x,(()=>t(O).content)),s(V,R)};be(z,(()=>Ta.Item),((V,R)=>{R(V,{get value(){return t(O).value},get icon(){return t(O).icon},header:K,content:j,$$slots:{header:!0,content:!0}})}))}s(I,D)})),s($,L)},$$slots:{default:!0}})})),s(o,l),Ee()}const t_=o=>{Fe(o,{size:1,children:(e,n)=>{var r=ae(`Rewrite prompt to provide more context and improve agent responses. Write a prompt to enable
    this feature.`);s(e,r)},$$slots:{default:!0}})},n_=o=>{Fe(o,{size:1,children:(e,n)=>{var r=ae("Tasklist helps the agent create and refine a step-by-step plan for you to review.");s(e,r)},$$slots:{default:!0}})};var s_=h('<div style="display: flex; flex-direction: column; gap: var(--ds-spacing-3);"><!> <div><!></div></div>');function wl(o,e){Ce(e,!1);const n=Fn(),r="prompt-enhancer",a="agent-task-list",i="import-rules",l={[r]:vo,[a]:Ll},c=[{value:r,title:"Prompt Enhancer",icon:"sparkles",content:t_,analyticsEvent:{eventName:tt.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"prompt-enhancer"}}},{value:a,title:"Agent Tasklist",icon:"list-checks",content:n_,analyticsEvent:{eventName:tt.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"agent-task-list"}}},{value:i,title:"Import Rules",icon:"download",content:u=>{var g=s_(),p=_(g);Fe(p,{size:1,children:(v,w)=>{var E=ae(`Augment will automatically import rules if they exist in your workspace. You can also import
      rules in settings.`);s(v,E)},$$slots:{default:!0}});var y=f(p,2),m=_(y);Et(m,{onclick:()=>{n.openSettingsPage("guidelines")},variant:"soft",children:(v,w)=>{var E=ae("Add Rules");s(v,E)},$$slots:{default:!0}}),s(u,g)},analyticsEvent:{eventName:tt.WEBVIEW.ONBOARDING_FEATURE_HIGHLIGHT_OPENED,properties:{featureName:"import-rules"}}}];Kn(),e_(o,{get items(){return c},get buttonIdMap(){return l}}),Ee()}const r_={CONTROL:"control",OFF:"off",ENABLED:"enabled"};var o_=h('<!> <!> <div class="c-onboarding-content svelte-1q13mbk"><!> <!></div>',1);function a_(o,e){Ce(e,!0);const n=()=>G(l,"$isOnboardingFeatureHighlightEnabled",a),r=()=>G(g,"$currentConversationId",a),[a,i]=Xe(),l=si("isOnboardingFeatureHighlightEnabled");(function(v){const{CONTROL:w,ENABLED:E,OFF:A}=r_})(n());let c=Te(!1);const u=Tt(un.key),g=ln(),p=jn(g),y=d((()=>{let v=gs.chat;return G(u,"$remoteAgentsModel",a)?.isActive?v=gs.remoteAgent:G(p,"$isAgentic",a)&&(v=gs.agent),v})),m=d((()=>t(c)&&e.turn.request_id&&[An.success,An.failed,An.cancelled].includes(e.turn.status)));Pr(o,{get turn(){return e.turn},showLoadingIndicator:!1,get preamble(){return qd},resendTurn:()=>e.onResend(e.turn),children:(v,w)=>{var E=o_(),A=b(E),$=z=>{Bv(z,{get conversationId(){return r()},get turn(){return e.turn}})};k(A,(z=>{r()&&z($)}));var C=f(A,2);K0(C,{onLoadingComplete:()=>Z(c,!0)});var L=f(C,2),S=_(L),I=z=>{Fv(z,{get requestId(){return e.turn.request_id},getResponseText:()=>e.turn.response_text,get chatMode(){return t(y)}})};k(S,(z=>{t(m)&&z(I)}));var O=f(S,2),D=z=>{wl(z,{})};k(O,(z=>{t(c)&&n()==="enabled"&&z(D)})),s(v,E)},$$slots:{default:!0}}),Ee(),i()}function kl(o){if(!o)return"";if(o===Number.MAX_SAFE_INTEGER)return"Now";const e=new Date(o),n=new Date,r=e.getHours(),a=`${r%12||12}:${e.getMinutes().toString().padStart(2,"0")}${r>=12?"PM":"AM"}`,i=Math.floor((n.getTime()-e.getTime())/864e5);return i===0?a:i===1?`Yesterday at ${a}`:`${i} days ago at ${a}`}var i_=h("<div><!> <!></div>");function Al(o,e){Ce(e,!0);const n=()=>G(y,"$lastCheckpoint",l),r=()=>G(g,"$conversationId",l),a=()=>G(p,"$targetCheckpointUuid",l),i=()=>G(t(E),"$revertTargetCheckpointIndex",l),[l,c]=Xe(),u=ut(),g=Nn(),p=mi(g),y=pi(g),m=d((()=>e.turn.toTimestamp)),v=d((()=>e.turn.uuid===n().uuid)),w=d((()=>kr(r(),e.turn.uuid))),E=d((()=>kr(r(),e.turn.revertTarget?.uuid))),A=d((()=>e.turn.uuid===a()&&a()!==n()?.uuid)),$=d((()=>e.turn.uuid===a()||p===void 0&&e.turn.uuid===n()?.uuid));async function C(){u(fi(r(),e.turn.uuid))}let L=d((()=>Tr(e.turn))),S=d((()=>Tr(e.turn)?(function(z){return z.revertTarget?.uuid?i()===void 0?void 0:`Reverted to Checkpoint ${i()+1}`:z.revertTarget?.filePath?`Undid changes to ${z.revertTarget.filePath.relPath}`:void 0})(e.turn):void 0));var I=P(),O=b(I),D=z=>{var K=i_();let j;var V=_(K);qi(V,{size:1,insetContent:!0,variant:"ghost",onclick:()=>{return x=e.turn.uuid,void u(Hd(r(),x));var x},class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",children:(x,B)=>{Yi(x,{size:1,shrink:!0,align:"left",leftIcon:U=>{Se(U,{name:"milestone"})},text:U=>{var F=ae();ge((()=>qe(F,`Checkpoint ${(G(t(w),"$checkpointIndex",l)||-1)+1}`))),s(U,F)},grayText:U=>{var F=P(),T=b(F),N=Y=>{var Q=ae();ge((()=>qe(Q,t(S)))),s(Y,Q)},J=Y=>{var Q=P(),X=b(Q),ee=se=>{var we=ae();ge(($e=>qe(we,$e)),[()=>kl(t(m))]),s(se,we)};k(X,(se=>{t($)&&se(ee)}),!0),s(Y,Q)};k(T,(Y=>{t(S)?Y(N):Y(J,!1)})),s(U,F)},$$slots:{leftIcon:!0,text:!0,grayText:!0}})},$$slots:{default:!0}});var R=f(V,2);{let x=d((()=>t($)?"soft":"ghost-block")),B=d((()=>t($)||t(v)));St(R,{get variant(){return t(x)},color:"neutral",size:1,get disabled(){return t(B)},onclick:C,class:"c-revert-button","data-testid":"revert-button",children:(q,M)=>{{let W=d((()=>[nn.Hover])),U=d((()=>t($)||t(v)?"Cannot revert to current version":"Revert to this version"));at(q,{get triggerOn(){return t(W)},get content(){return t(U)},children:(F,T)=>{Se(F,{name:"undo-2"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}ge((()=>{j=ct(K,1,"c-checkpoint-container svelte-1d92nhn",null,j,{"c-checkpoint-container--target-checkpoint":t($),"c-checkpoint-container--dimmed-marker":t(A)}),nt(K,"data-checkpoint-number",e.turn.uuid)})),s(z,K)};k(O,(z=>{t(v)&&!t(L)||z(D)})),s(o,I),Ee(),c()}var l_=h('<span class="c-checkpoint-files-count"> </span>'),c_=h(" <!>",1),d_=h('<div class="c-checkpoint-summary"><!></div>'),u_=h('<div class="c-checkpoint-header svelte-1u1yjkn"><div class="c-checkpoint-tag"><!> <!></div> <!> <!></div>');function v_(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"filesCount",3,0),i=H(e,"timestamp",3,""),l=H(e,"diffSummary",19,(()=>({totalAddedLines:0,totalRemovedLines:0}))),c=H(e,"hasChanges",3,!1),u=H(e,"isTarget",3,!1);const g=Qv(),p=g.collapsed,y=g.expandable;function m(I){I.stopPropagation(),I.preventDefault(),e.onRevertClick()}var v=u_(),w=_(v),E=_(w);qv(E,{get expandable(){return G(y,"$expandable",n)},get collapsed(){return G(p,"$collapsed",n)},children:(I,O)=>{Se(I,{name:"milestone"})},$$slots:{default:!0}});var A=f(E,2);Yi(A,{size:1,shrink:!0,align:"left",text:D=>{var z=c_(),K=b(z),j=f(K),V=R=>{var x=l_(),B=_(x);ge((q=>qe(B,`(${q??""})`)),[()=>Mr(a(),"file")]),s(R,x)};k(j,(R=>{a()>0&&R(V)})),ge((()=>qe(K,`Checkpoint ${e.displayCheckpointIdx??""} `))),s(D,z)},grayText:D=>{var z=P(),K=b(z),j=R=>{var x=ae();ge((()=>qe(x,e.revertMessage))),s(R,x)},V=R=>{var x=P(),B=b(x),q=M=>{var W=ae();ge((()=>qe(W,i()))),s(M,W)};k(B,(M=>{i()&&M(q)}),!0),s(R,x)};k(K,(R=>{e.revertMessage?R(j):R(V,!1)})),s(D,z)},$$slots:{text:!0,grayText:!0}});var $=f(w,2),C=I=>{var O=d_(),D=_(O);wo(D,{size:0,get totalAddedLines(){return l().totalAddedLines},get totalRemovedLines(){return l().totalRemovedLines}}),s(I,O)};k($,(I=>{c()&&I(C)}));var L=f($,2),S=I=>{{let O=d((()=>[nn.Hover]));at(I,{get triggerOn(){return t(O)},content:"Revert to this Checkpoint",children:(D,z)=>{Et(D,{variant:"ghost-block",color:"neutral",size:.5,onclick:m,class:"c-revert-button","data-testid":"revert-button","data-collapsible-button":"false",iconLeft:j=>{Se(j,{name:"undo-2"})},children:(j,V)=>{var R=ae("Revert");s(j,R)},$$slots:{iconLeft:!0,default:!0}})},$$slots:{default:!0}})}};k(L,(I=>{u()||I(S)})),s(o,v),Ee(),r()}var g_=h('<div class="c-edits-list svelte-1f7mk8i"></div>'),h_=h('<div class="c-edits-list c-edits-list--empty svelte-1f7mk8i"><!></div>'),m_=h("<div><!></div>");function Cl(o,e){Ce(e,!0);const n=()=>G(m,"$lastCheckpoint",i),r=()=>G(p,"$conversationId",i),a=()=>G(y,"$targetCheckpointUuid",i),[i,l]=Xe();let c=H(e,"collapsed",3,!0);const u=Fn(),g=ut(),p=Nn(),y=mi(p),m=pi(p),v=d((()=>e.turn.toTimestamp)),w=d((()=>e.turn.fromTimestamp)),E=d((()=>e.turn.uuid===n().uuid)),A=d((()=>kr(r(),e.turn.uuid))),$=d((()=>Gd(r(),e.turn.uuid))),C=d((()=>kr(r(),e.turn.revertTarget?.uuid))),L=d((()=>G(t($),"$checkpointSummary",i).filter((F=>F.changesSummary&&(F.changesSummary.totalAddedLines>0||F.changesSummary.totalRemovedLines>0))))),S=d((()=>e.turn.uuid===a()&&a()!==n()?.uuid)),I=d((()=>e.turn.uuid===a()||y===void 0&&e.turn.uuid===n()?.uuid));let O=Te(Dn(c()));function D(F){return F.revertTarget?.uuid?t(C)===void 0?void 0:`Reverted to Checkpoint ${G(t(C),"$revertTargetCheckpointIndex",i)+1}`:F.revertTarget?.filePath?`Undid changes to ${F.revertTarget.filePath.relPath}`:void 0}function z(){g(fi(r(),e.turn.uuid))}let K=d((()=>(G(t(A),"$checkpointIndex",i)||-1)+1)),j=d((()=>Tr(e.turn))),V=d((()=>Tr(e.turn)?D(e.turn):void 0)),R=d((()=>t(L).reduce(((F,T)=>(F.totalAddedLines+=T.changesSummary?.totalAddedLines??0,F.totalRemovedLines+=T.changesSummary?.totalRemovedLines??0,F)),{totalAddedLines:0,totalRemovedLines:0}))),x=d((()=>t(L).length>0)),B=Te(!1),q=Te(!1);ot((()=>{t(B)&&e.turn&&!t(q)&&(g(Wd(r(),e.turn)),Z(q,!0))}));var M=P(),W=b(M),U=F=>{var T=m_();let N;var J=_(T);Hi(J,{class:"c-checkpoint-collapsible",stickyHeader:!0,toggleHeader:!0,get collapsed(){return t(O)},set collapsed(Q){Z(O,Q,!0)},header:Q=>{{let X=d((()=>kl(t(v))));v_(Q,{get displayCheckpointIdx(){return t(K)},get filesCount(){return t(L).length},get timestamp(){return t(X)},get revertMessage(){return t(V)},get diffSummary(){return t(R)},get hasChanges(){return t(x)},get isTarget(){return t(I)},onRevertClick:z})}},children:(Q,X)=>{var ee=P(),se=b(ee),we=te=>{var Ie=g_();Pt(Ie,21,(()=>t(L)),(me=>me.qualifiedPathName),((me,Ae)=>{ll(me,{get qualifiedPathName(){return t(Ae).qualifiedPathName},get lineChanges(){return t(Ae).changesSummary},onClickFile:()=>{return ce=t(Ae).qualifiedPathName,void g(vs({repoRoot:ce.rootPath,pathName:ce.relPath,allowOutOfWorkspace:!0}));var ce},onClickReview:()=>{return ce=t(Ae).qualifiedPathName,void u.showAgentReview(ce,t(w),t(v),!1);var ce}})})),s(te,Ie)},$e=te=>{var Ie=P(),me=b(Ie),Ae=ce=>{var ue=h_(),ke=_(ue);Fe(ke,{size:1,color:"neutral",children:(re,ie)=>{var he=ae("No changes to show");s(re,he)},$$slots:{default:!0}}),s(ce,ue)};k(me,(ce=>{t(O)||ce(Ae)}),!0),s(te,Ie)};k(se,(te=>{t(x)?te(we):te($e,!1)})),s(Q,ee)},$$slots:{header:!0,default:!0}}),kn(T,((Y,Q)=>Hv?.(Y,Q)),(()=>({onVisible:()=>Z(B,!0),scrollTarget:document.body}))),ge((()=>{N=ct(T,1,"c-checkpoint-container svelte-1f7mk8i",null,N,{"c-checkpoint-container--target-checkpoint":t(I),"c-checkpoint-container--dimmed-marker":t(S)}),nt(T,"data-checkpoint-number",e.turn.uuid)})),s(F,T)};k(W,(F=>{t(E)&&!t(j)||F(U)})),s(o,M),Ee(),l()}var p_=h('<span class="c-gen-response svelte-cnl3c"><!> </span>');function El(o,e){Ce(e,!0);let n=Te(".");Jt((()=>{const l=setInterval((()=>{Z(n,t(n).length>=3?".":t(n)+".",!0)}),500);return()=>clearInterval(l)}));var r=p_(),a=_(r);Se(a,{name:"pause"});var i=f(a);ge((()=>qe(i,` Waiting for user input${t(n)??""}`))),s(o,r),Ee()}var f_=h('<span class="c-retry-response svelte-uflx1w"><!> </span>');function Tl(o,e){let n=H(e,"message",3,"Retrying...");var r=f_(),a=_(r);Vn(a,{size:1});var i=f(a);ge((()=>qe(i,` ${n()??""}`))),s(o,r)}var __=h("<!> Stopped",1),y_=h('<span class="c-stopped svelte-9oscf2"><!></span>');function Il(o){var e=y_(),n=_(e);Fe(n,{size:1,children:(r,a)=>{var i=__(),l=b(i);Se(l,{name:"square"}),s(r,i)},$$slots:{default:!0}}),s(o,e)}function Sl(o,e){let n=o.offsetHeight,r=e;const a=new ResizeObserver((i=>{const l=i[0].contentRect.height;i.length===1?l!==n&&(r.onHeightChange?.(l),n=l):console.warn("Unexpected number of resize entries: ",i)}));return a.observe(o),r?.onHeightChange?.(n),{update(i){r=i},destroy:()=>a.disconnect()}}const b_=(o,e=40)=>_i(o)<=e;function xl(o,e={}){let n=e,r={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!1};const a=()=>{const{scrollTop:i,scrollHeight:l,offsetHeight:c}=o,u=_i(o),g=i>r.scrollTop,p=l-r.scrollHeight,y=!(p<0&&r.scrollBottom<-p)&&i<r.scrollTop&&u>r.scrollBottom,m=l>c,v=b_(o)&&m&&g,w=y||!m;v&&!r.scrolledIntoBottom?n.onScrollIntoBottom?.(o):w&&!r.scrolledAwayFromBottom&&n.onScrollAwayFromBottom?.(o),r={scrollTop:i,scrollBottom:u,scrolledIntoBottom:v,scrolledAwayFromBottom:w,scrollHeight:l},n.onScroll?.(i,l,c)};return o.addEventListener("scroll",a),{update(i){n=i},destroy(){o.removeEventListener("scroll",a)}}}var $_=h('<div class="c-msg-list-bottom-button svelte-1d6jflg"><!></div>');function Rl(o,e){Ce(e,!0);let n=H(e,"messageListElement",3,null);var r=$_(),a=_(r);St(a,{variant:"ghost-block",size:.5,onclick:()=>{n()&&Ys(n(),{smooth:!0})},children:(i,l)=>{Se(i,{name:"arrow-down"})},$$slots:{default:!0}}),s(o,r),Ee()}var w_=h('<div class="c-conversation-navigation__tooltip svelte-11xtfjd">Up <!></div>'),k_=h("<!> <!>",1),A_=h('<div class="c-conversation-navigation__tooltip svelte-11xtfjd">Down <!></div>'),C_=h("<!> <!>",1),E_=h('<div class="c-conversation-navigation svelte-11xtfjd"><!> <!></div>');const T_="message-list-scrollable-container",Ml="last-message-pointer";var I_=h('<div class="c-msg-list__floating c-msg-list__navigation-controls svelte-bmgvca"><!></div>'),S_=h('<div class="c-msg-list__floating c-msg-list__scroll-to-bottom svelte-bmgvca"><!></div>'),x_=h('<div data-testid="chat-message-list"><!> <div><div class="c-msg-list__spacer svelte-bmgvca"></div> <div class="c-msg-list__content svelte-bmgvca"><!></div></div> <!></div>');function R_(o,e){Ce(e,!0);const n=()=>G(c,"$enableIntersectionObserverManager",a),r=()=>G(u,"$fullFeatured",a),[a,i]=Xe();let l=H(e,"doShowFloatingButtons",3,!1);const c=Ct("enableIntersectionObserverManager"),u=Ct("fullFeatured"),g=ln();let p=Te(void 0),y=Te(void 0),m=Te(void 0),v=Te(!1),w=Te(!1),E=!1;function A(T){Z(v,!1),E||(E=!0,Ys(T,{smooth:!0,scrollDuration:100,onScrollFinish:()=>E=!1}))}function $(){Z(v,!0)}let C,L=Te(0),S=d((()=>t(L))),I=d((()=>t(v))),O=d((()=>`${t(S)}px 0px ${t(S)}px 0px`));ot((()=>{C=Bi({root:t(p),rootMargin:"300px 0px 300px 0px",threshold:0,enabled:n()})})),Nr();const D=ut();function z(T,N){D(lt(tt.WEBVIEW.CONVERSATION_NAVIGATION,{direction:T,source:N}))}ot((()=>{C?.setConfig({root:t(p),rootMargin:t(O),threshold:0,enabled:n()})})),Jt((()=>{if(!t(p)||!t(y)||!t(m))return;let T,N=0;const J=()=>{if(!t(y))return;const Q=(X=t(y),T&&T.parentNode&&T.getAttribute("id")||(T=X.querySelector(`#${Ml}`)||void 0),T);var X;if(!Q)return;const[ee]=t(y).getClientRects(),[se]=Q.getClientRects(),we=Math.abs(se.top-ee.bottom),$e=ee.height<N?Math.max(0,N-ee.height):Math.max(0,N-we);t(m).style.height=`${$e}px`},Y=new window.ResizeObserver((Q=>{for(const X of Q)X.target===t(p)&&(N=X.contentRect.height);J()}));return Y.observe(t(p)),Y.observe(t(y)),()=>{Y.disconnect()}}));var K=x_();let j;var V=_(K),R=T=>{var N=I_();(function(J,Y){Ce(Y,!0);const Q=()=>G(we,"$currentConversationId",X),[X,ee]=Xe(),se=H(Y,"trackNavigationInDirection",19,(()=>{})),we=ln(),$e=ut(),{store:te}=rs();function Ie(){const he=Gr();if(!he)return{};const de=he?.scrollTop,le=he?.getBoundingClientRect(),_e=de,oe=de+le?.height,ve=he.querySelectorAll("[data-user-message-request-id]"),ye=ve.values().toArray(),Ne=ye.reduce(((ze,He,Le)=>{const De=He.getBoundingClientRect(),pe=ze[Le-1],fe={id:He.getAttribute("data-user-message-request-id")||void 0,area:{top:De.top+de,bottom:1/0}};return pe&&(pe.area.bottom=fe.area.top),ze.push(fe),ze}),[]),Re=Ne.filter((ze=>!(ze.area.bottom<_e)&&ze.area.top<oe)),Oe=ye[0],Be=Re[0];if(Oe&&(!Be||Be.area.top>_e))return{prev:Ud.select(te.getState(),Y.conversationId,Oe.getAttribute("data-user-message-request-id")||void 0),next:Xo.select(te.getState(),Y.conversationId,Oe.getAttribute("data-user-message-request-id")||void 0)};ve.values().forEach((ze=>{ze.getBoundingClientRect().top}));const Ge=Re[0]?.id,xe=Re[Re.length-1];return{prev:Ge,next:Xo.select(te.getState(),Y.conversationId,xe.id)}}function me(he){if(!Q())return;const de=Ie(),{next:le}=de;if(se()?.("down",he),le)$e(Yo(Q(),le));else{const _e=Gr();_e&&Ys(_e,{smooth:!0})}}function Ae(he){if(!Q())return;const{prev:de}=Ie();se()?.("up",he),de&&$e(Yo(Q(),de))}let ce=Te(!1),ue=Te(!0);ot((()=>{const he=Gr();if(!he)return;const de=Ua((()=>{const{height:le}=he.getBoundingClientRect();if(Math.ceil(le)>=he.scrollHeight)return Z(ce,!1),void Z(ue,!1);Math.floor(he.scrollTop)===0?Z(ce,!1):Z(ce,!0),Math.abs(Math.floor(he.scrollTop))+100>=he.scrollHeight?Z(ue,!1):Z(ue,!0)}),50);return de(),he.addEventListener("scroll",de),()=>{he.removeEventListener("scroll",de)}}));var ke=P(),re=b(ke),ie=he=>{var de=E_(),le=_(de);at(le,{side:"top",nested:!1,content:ve=>{var ye=w_(),Ne=f(_(ye));_n(Ne,{commandName:"scrollConversationUp",keysOnly:!0}),s(ve,ye)},children:(ve,ye)=>{var Ne=k_(),Re=b(Ne);on(Re,{name:"scrollConversationUp",handler:()=>Ae("keybinding")});var Oe=f(Re,2);{let Be=d((()=>!t(ue)));St(Oe,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>Ae("button"),get disabled(){return t(Be)},children:(Ge,xe)=>{Se(Ge,{name:"arrow-up"})},$$slots:{default:!0}})}s(ve,Ne)},$$slots:{content:!0,default:!0}});var _e=f(le,2);at(_e,{side:"top",nested:!1,content:ve=>{var ye=A_(),Ne=f(_(ye));_n(Ne,{commandName:"scrollConversationDown",keysOnly:!0}),s(ve,ye)},children:(ve,ye)=>{var Ne=C_(),Re=b(Ne);on(Re,{name:"scrollConversationDown",handler:()=>me("keybinding")});var Oe=f(Re,2);{let Be=d((()=>!t(ce)));St(Oe,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>me("button"),get disabled(){return t(Be)},children:(Ge,xe)=>{Se(Ge,{name:"arrow-down"})},$$slots:{default:!0}})}s(ve,Ne)},$$slots:{content:!0,default:!0}}),s(he,de)};k(re,(he=>{t(ce)&&t(ue)&&he(ie)})),s(J,ke),Ee(),ee()})(_(N),{get conversationId(){return G(g,"$currentConversationId",a)},trackNavigationInDirection:z}),Zt(3,N,(()=>ms),(()=>({duration:150,start:.9}))),s(T,N)};k(V,(T=>{l()&&t(w)&&T(R)}));var x=f(V,2);let B;nt(x,"id",T_);var q=_(x);Dt(q,(T=>Z(m,T)),(()=>t(m)));var M=f(q,2),W=_(M);et(W,(()=>e.children??pt),(()=>({turnHeight:t(S)}))),Dt(M,(T=>Z(y,T)),(()=>t(y))),Dt(x,(T=>Z(p,T)),(()=>t(p))),kn(x,((T,N)=>xl?.(T,N)),(()=>({onScrollIntoBottom:A,onScrollAwayFromBottom:$,onScroll:e.onScroll}))),kn(x,((T,N)=>Sl?.(T,N)),(()=>({onHeightChange:T=>Z(L,T,!0)})));var U=f(x,2),F=T=>{var N=S_();Rl(_(N),{get messageListElement(){return t(p)}}),Zt(3,N,(()=>ms),(()=>({duration:150,start:.9}))),s(T,N)};k(U,(T=>{l()&&t(w)&&t(I)&&T(F)})),ge((()=>{j=ct(K,1,"c-msg-list-container svelte-bmgvca",null,j,{"c-msg-list--minimal":!r()}),B=ct(x,1,"c-msg-list svelte-bmgvca",null,B,{"c-msg-list--minimal":!r()})})),Ft("mouseenter",K,(()=>Z(w,!0))),Ft("mouseleave",K,(()=>Z(w,!1))),s(o,K),Ee(),i()}var M_=h('<div class="c-msg-list__turn--hidden svelte-1dpaky9"></div>'),D_=h('<div class="c-msg-list__turn-seen svelte-1dpaky9"></div>'),z_=h('<div class="c-msg-list__turn"><!> <!></div>'),N_=h('<div class="c-agent-running-spacer svelte-1dpaky9"></div>'),O_=h('<div class="c-msg-list__container svelte-1dpaky9"><!> <!> <!></div>');function Dl(o,e){Ce(e,!0);const n=()=>G(A,"$lastExchange",l),r=()=>G(E,"$minItemsToRender",l),a=()=>G(p,"$currentConversationId",l),i=()=>G(L,"$shouldShowGeneratingResponse",l),[l,c]=Xe(),u=ut(),g=Ct("enableRichCheckpointInfo"),p=Nn(),y=jn(p),m=$r(p),v=yi(p),w=d((()=>bi(G(v,"$conversationHistoryCollection",l)).map((({item:j})=>j)))),E=Vd(p),A=Qa(p),$=hi(p),C=d((()=>Jd(p,n()?.request_id))),L=jd(p),S=d((()=>qp(n(),t(w)[t(w).length-1],G(t(C),"$areToolsComplete",l),G(m,"$conversationExchangeStatus",l),G(y,"$isAgentic",l))));let I=Te(Dn(r())),O=Te(!1);const D=d((()=>t(w).length<=t(I)?t(w):t(w).slice(t(w).length-t(I))));ot((()=>{r()&&r()>t(I)&&Z(I,r(),!0)})),ot((()=>{const j=t(w).length;t(I),j<t(I)&&Z(I,Math.max(Kd,j),!0)}));const z=(j,V,R)=>{t(O)||V-Math.abs(j)-R<1e3&&t(I)<t(w).length&&K()},K=()=>{if(t(O))return;Z(O,!0);const j=Math.min(t(I)+15,t(w).length);Z(I,j,!0),requestAnimationFrame((()=>{Z(O,!1)}))};Nr(),R_(o,{doShowFloatingButtons:!0,onScroll:z,children:(V,R=pt)=>{var x=O_(),B=_(x);Pt(B,19,(()=>t(D)),((T,N)=>T.request_id??`no-request-id-${N}`),((T,N,J)=>{const Y=d((()=>tr(t(N))&&t(N).hidden));var Q=z_(),X=_(Q),ee=te=>{var Ie=M_();s(te,Ie)},se=te=>{var Ie=P(),me=b(Ie),Ae=ue=>{Pr(ue,{get turn(){return t(N)}})},ce=ue=>{var ke=P(),re=b(ke),ie=de=>{$l(de,{get turn(){return t(N)}})},he=de=>{var le=P(),_e=b(le),oe=ye=>{a_(ye,{get turn(){return t(N)},onResend:Ne=>u(Qd(a(),Ne))})},ve=ye=>{var Ne=P(),Re=b(Ne),Oe=Ge=>{N0(Ge,{get conversationId(){return a()},get turn(){return t(N)},get turnIndex(){return t(J)}})},Be=Ge=>{var xe=P(),ze=b(xe),He=De=>{var pe=P(),fe=b(pe),Pe=Ye=>{Cl(Ye,{get turn(){return t(N)}})},We=Ye=>{Al(Ye,{get turn(){return t(N)}})};k(fe,(Ye=>{G(g,"$enableRichCheckpointInfo",l)?Ye(Pe):Ye(We,!1)})),s(De,pe)},Le=De=>{var pe=ae();ge((fe=>qe(pe,fe)),[()=>console.error(`Unknown message type in MessageList: requestId: ${t(N).request_id}, type: ${t(N).chatItemType}`)]),s(De,pe)};k(ze,(De=>{$o(t(N))&&t(N).status===An.success?De(He):De(Le,!1)}),!0),s(Ge,xe)};k(Re,(Ge=>{Di(t(N))?Ge(Oe):Ge(Be,!1)}),!0),s(ye,Ne)};k(_e,(ye=>{pv(t(N))?ye(oe):ye(ve,!1)}),!0),s(de,le)};k(re,(de=>{Yd(t(N))?de(ie):de(he,!1)}),!0),s(ue,ke)};k(me,(ue=>{Mi(t(N))?ue(Ae):ue(ce,!1)}),!0),s(te,Ie)};k(X,(te=>{t(Y)?te(ee):te(se,!1)}));var we=f(X,2),$e=te=>{var Ie=D_();kn(Ie,((me,Ae)=>(function(ce,ue){let ke=ue;const re=Js((()=>{ke.onSeen()}),1e3,{leading:!0,trailing:!0}),ie=new IntersectionObserver((de=>{for(const le of de)if(le.target===ce&&le.isIntersecting){re();break}}),{threshold:.5}),he=()=>{ie.disconnect(),ke.track&&ie.observe(ce)};return he(),{update(de){const le=ke;ke=de,ke.track!==le.track&&he()},destroy:()=>{ie.disconnect(),ke.onSeen()}}})(me,Ae)),(()=>({onSeen:()=>(me=>{me.seen_state!==Er.seen&&u(Xd(a(),me.request_id))})(t(N)),track:t(N).seen_state!==Er.seen}))),s(te,Ie)};k(we,(te=>{mv(t(N))&&te($e)})),ge((()=>{nt(Q,"id",G($,"$lastUserExchange",l)?.request_id===t(N).request_id?Ml:void 0),nt(Q,"data-request-id",t(N).request_id)})),s(T,Q)}));var q=f(B,2),M=T=>{Tl(T,{get message(){return t(S).retryMessage}})},W=T=>{var N=P(),J=b(N),Y=X=>{No(X,{get conversationId(){return a()}})},Q=X=>{var ee=P(),se=b(ee),we=te=>{El(te,{})},$e=te=>{var Ie=P(),me=b(Ie),Ae=ce=>{Il(ce)};k(me,(ce=>{t(S).showStopped&&ce(Ae)}),!0),s(te,Ie)};k(se,(te=>{t(S).showAwaitingUserInput?te(we):te($e,!1)}),!0),s(X,ee)};k(J,(X=>{i()?X(Y):X(Q,!1)}),!0),s(T,N)};k(q,(T=>{t(S).retryMessage?T(M):T(W,!1)}));var U=f(q,2),F=T=>{var N=N_();s(T,N)};k(U,(T=>{!i()&&t(S).showRunningSpacer&&T(F)})),s(V,x)},$$slots:{default:!0}}),Ee(),c()}var L_=h('<div class="c-new-agent-empty__header svelte-1qfz2l5"><div class="c-new-agent-empty__header-icon svelte-1qfz2l5"><!></div> <!></div>');function zl(o){On(o,{header:n=>{var r=L_(),a=_(r),i=_(a);Se(i,{name:"wand-sparkles",size:2});var l=f(a,2);Fe(l,{color:"primary",size:4,children:(c,u)=>{var g=ae("New Agent Thread");s(c,g)},$$slots:{default:!0}}),s(n,r)},children:(n,r)=>{Fe(n,{size:1,variant:"surface",children:(a,i)=>{var l=ae("Work with your agent to use tools and make file edits.");s(a,l)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})}var P_=h('<div class="c-onboarding-questions svelte-127xj1c"><!> <div class="c-onboarding-questions__list svelte-127xj1c"></div></div>');function B_(o,e){Ce(e,!0);let n=H(e,"maxQuestions",3,3);const r=ut(),a=d((()=>e.questions.slice(0,n())));let i=Te(!1);const l=d((()=>t(a).length>0));ot((()=>{t(l)&&!t(i)&&(Z(i,!0),r(lt(tt.WEBVIEW.ONBOARDING_QUESTIONS_DISPLAYED,{})))}));var c=P(),u=b(c),g=p=>{var y=P_(),m=_(y);Fe(m,{size:1,weight:"medium",children:(w,E)=>{var A=ae("Send your agent a prompt");s(w,A)},$$slots:{default:!0}});var v=f(m,2);Pt(v,20,(()=>t(a)),(w=>w),((w,E)=>{Et(w,{variant:"soft",size:1,color:"accent",alignment:"left",onclick:()=>(function(A){r(lt(tt.WEBVIEW.ONBOARDING_QUESTION_CLICKED,{})),e.onQuestionClick(A)})(E),children:(A,$)=>{var C=ae();ge((()=>qe(C,E))),s(A,C)},$$slots:{default:!0}})})),Zt(7,y,(()=>ns),(()=>({duration:200,y:10}))),s(p,y)};k(u,(p=>{t(l)&&p(g)})),s(o,c),Ee()}var F_=h('<div class="c-chat-onboarding svelte-1cvg2jd"><!> <!></div>');function q_(o,e){Ce(e,!1);const n=()=>G(c,"$currentConversationId",a),r=()=>G(u,"$workspaceQuestions",a),[a,i]=Xe(),l=ut(),c=ln(),u=Zd(),g=eu();function p(w){n()&&l(gi(n(),{request_message:w,status:An.draft}))}Jt((()=>{n()&&r().length===0&&!G(g,"$isLoadingQuestions",a)&&l(tu(n()))})),Kn();var y=F_(),m=_(y);wl(m,{});var v=f(m,2);cs(v,{get target(){return`#${Sn.below_notifications}`},children:(w,E)=>{B_(w,{get questions(){return r()},onQuestionClick:p})},$$slots:{default:!0}}),s(o,y),Ee(),i()}var H_=h('<div class="c-initial-indexing__icon svelte-1antxkq"><!></div>'),W_=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),G_=h('<div class="c-initial-indexing__progress-files svelte-1antxkq"><!> <!></div>'),U_=h('<div class="c-initial-indexing__content svelte-1antxkq"><!> <div class="c-initial-indexing__progress svelte-1antxkq"><!> <!></div> <!></div>');function V_(o,e){Ce(e,!0);const n=()=>G(u,"$progress",a),r=()=>G(c,"$percentage",a),[a,i]=Xe(),l=new er(an,new nr(an)),c=$i(),u=yo(),g=wi(),p=d((()=>G(g,"$workspaceNameStore",a)||"Your workspace"));Jt((()=>{l.track(tt.WEBVIEW.ONBOARDING_INITIAL_INDEXING_VIEW_DISPLAYED,{totalFiles:n()?.totalFiles})}));let y=!1;ot((()=>{y||r()<100||n()?.status!==bs.done||(l.track(tt.WEBVIEW.ONBOARDING_INDEXING_COMPLETED,{totalFiles:n()?.totalFiles,duration:n()?.syncDuration}),y=!0)})),On(o,{maxWidth:"250px",header:v=>{Fe(v,{size:4,color:"primary",children:(w,E)=>{var A=ae("Indexing Codebase");s(w,A)},$$slots:{default:!0}})},children:(v,w)=>{var E=U_(),A=_(E);Et(A,{variant:"outline",color:"neutral",size:1,readonly:!0,iconLeft:z=>{var K=H_(),j=_(K);Se(j,{name:"refresh-ccw"}),s(z,K)},children:(z,K)=>{var j=ae();ge((()=>qe(j,t(p)))),s(z,j)},$$slots:{iconLeft:!0,default:!0}});var $=f(A,2),C=_($);{let D=d((()=>n()?.indeterminate));Gi(C,{get value(){return r()},get indeterminate(){return t(D)}})}var L=f(C,2),S=D=>{var z=W_(),K=b(z);zs(K,(()=>({"--text-color":"var(--ds-color-accent-a11)"}))),Fe(K.lastChild,{size:1,color:"accent",children:(j,V)=>{var R=ae();ge((()=>qe(R,`${r()??""}%`))),s(j,R)},$$slots:{default:!0}}),s(D,z)};k(L,(D=>{n()?.indeterminate||D(S)}));var I=f($,2),O=D=>{var z=G_(),K=_(z);Fe(K,{size:1,block:!0,children:(V,R)=>{var x=ae("Indexing files:");s(V,x)},$$slots:{default:!0}});var j=f(K,2);Fe(j,{size:1,block:!0,children:(V,R)=>{var x=ae();ge((()=>qe(x,`${n()?.syncedCount??""} / ${n()?.totalFiles??""}`))),s(V,x)},$$slots:{default:!0}}),s(D,z)};k(I,(D=>{n()&&!n()?.indeterminate&&D(O)})),s(v,E)},$$slots:{header:!0,default:!0}}),Ee(),i()}const Ia={[Vr.SUCCESS]:"success",[Vr.FAILED]:"error",[Vr.SKIPPED]:"skipped"},Sa={[$s.success]:"success",[$s.failure]:"error",[$s.running]:null,[$s.unknown]:"unknown",[$s.skipped]:"skipped"};var j_=h('<div class="c-command-output__collapsible-header__spacer svelte-114stxo"></div>'),K_=h('<div class="c-command-output__status-icon c-command-output__status-icon--loading svelte-114stxo"><!></div>'),Y_=h("<div><!></div>"),X_=h("<!> <!>",1),J_=h('<div class="c-command-output__collapsible-header svelte-114stxo"><!> <!> <div class="c-command-output__status-indicator svelte-114stxo"><!> <!></div></div>'),Q_=h('<div class="c-command-output__code-block svelte-114stxo"><!></div>'),Z_=h('<div class="c-command-output__code-block c-command-output__code-block--output svelte-114stxo"><!></div>'),e1=h('<div class="c-command-output__command-details"><!> <!> <!></div>'),t1=h('<div class="c-command-output__container svelte-114stxo"><!></div>'),n1=h('<div><div class="c-agent-setup-logs-summary svelte-1y2dl78" role="button" tabindex="0"><div class="c-agent-setup-logs-summary-content svelte-1y2dl78"><div class="c-agent-setup-logs-summary-left svelte-1y2dl78"><!> <!></div> <div class="c-agent-setup-logs-summary-icon svelte-1y2dl78"><!></div></div></div> <div><div class="c-agent-setup-logs svelte-1y2dl78"></div></div></div>'),s1=h('<div class="c-agent-no-setup-logs svelte-1y2dl78"><!> <!></div>');function r1(o,e){Ce(e,!0);const n=()=>G(i,"$remoteAgentsModel",r),[r,a]=Xe(),i=Tt(un.key),l=Fn();let c=d((()=>n()?.currentAgent?.status||Gn.agentUnspecified)),u=d((()=>[Gn.agentIdle,Gn.agentRunning,Gn.agentFailed].includes(t(c)))),g=d((()=>n()?.agentSetupLogs)),p=Te(null),y=d((()=>t(p)??!t(u)));function m(){Z(p,!t(y))}function v(S){S.stopPropagation(),m()}function w(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),m())}function E(S){return S===$s.running&&!t(u)}var A=P(),$=b(A),C=S=>{var I=n1();let O;var D=_(I);D.__click=m,D.__keydown=w;var z=_(D),K=_(z),j=_(K);{let N=d((()=>t(y)?"c-agent-setup-logs-toggle-button--expanded":""));St(j,{variant:"ghost",color:"neutral",size:1,onclick:v,get class(){return`c-agent-setup-logs-toggle-button ${t(N)??""}`},children:(J,Y)=>{Se(J,{name:"chevron-down"})},$$slots:{default:!0}})}var V=f(j,2),R=N=>{Fe(N,{size:1,class:"c-agent-setup-logs-summary-text",children:(J,Y)=>{var Q=ae("Environment created");s(J,Q)},$$slots:{default:!0}})},x=N=>{Fe(N,{size:1,class:"c-agent-setup-logs-summary-text",children:(J,Y)=>{var Q=ae("Environment is being created...");s(J,Q)},$$slots:{default:!0}})};k(V,(N=>{t(u)?N(R):N(x,!1)}));var B=f(K,2),q=_(B),M=N=>{Se(N,{name:"check"})},W=N=>{Vn(N,{size:1})};k(q,(N=>{t(u)?N(M):N(W,!1)}));var U=f(D,2);let F;var T=_(U);Pt(T,21,(()=>t(g).steps),(N=>N.step_number),((N,J)=>{{let Y=d((()=>{return(se=t(J).status)in Ia?Ia[se]:se in Sa?Sa[se]:null;var se})),Q=d((()=>E(t(J).status))),X=d((()=>!E(t(J).status))),ee=d((()=>!!t(J).logs));(function(se,we){Ce(we,!0);let $e=H(we,"title",3,""),te=H(we,"command",3,""),Ie=H(we,"output",3,null),me=H(we,"status",3,null),Ae=H(we,"collapsed",3,!1),ce=H(we,"useMonaco",3,!1),ue=H(we,"monacoLang",3,"bash"),ke=H(we,"viewButtonTooltip",3,"View full output in editor"),re=H(we,"showCollapseButton",3,!0),ie=H(we,"isLoading",3,!1);var he=t1(),de=_(he);Hi(de,{get collapsed(){return Ae()},header:_e=>{var oe=J_(),ve=_(oe),ye=pe=>{Zv(pe,{})},Ne=pe=>{var fe=j_();s(pe,fe)};k(ve,(pe=>{re()&&me()!=="skipped"?pe(ye):pe(Ne,!1)}));var Re=f(ve,2),Oe=pe=>{Fe(pe,{size:1,weight:"medium",children:(fe,Pe)=>{var We=ae();ge((()=>qe(We,$e()))),s(fe,We)},$$slots:{default:!0}})},Be=pe=>{Fe(pe,{size:1,type:"monospace",children:(fe,Pe)=>{var We=ae();ge((()=>qe(We,te()))),s(fe,We)},$$slots:{default:!0}})};k(Re,(pe=>{$e()?pe(Oe):pe(Be,!1)}));var Ge=f(Re,2),xe=_(Ge),ze=pe=>{var fe=K_(),Pe=_(fe);Vn(Pe,{size:1}),s(pe,fe)},He=pe=>{var fe=P(),Pe=b(fe),We=Ye=>{var Qe=X_(),st=b(Qe),Ke=dt=>{Fe(dt,{size:1,children:(yt,Ve)=>{var ne=ae("Skipped");s(yt,ne)},$$slots:{default:!0}})};k(st,(dt=>{me()==="skipped"&&dt(Ke)}));var vt=f(st,2);{let dt=d((()=>(function(Ve){switch(Ve){case"success":return"Success";case"error":return"Failed";case"skipped":return"Skipped";case"unknown":return"Unknown";case null:return"Running"}})(me()))),yt=d((()=>[nn.Hover]));at(vt,{get content(){return t(dt)},get triggerOn(){return t(yt)},children:(Ve,ne)=>{var Me=Y_();let Ue;var Je=_(Me);{let rt=d((()=>{return(Ze=me())==="success"||Ze==="skipped"?"check":"circle-x";var Ze}));Se(Je,{get name(){return t(rt)},size:1})}ge((()=>Ue=ct(Me,1,"c-command-output__status-icon svelte-114stxo",null,Ue,{"c-command-output__status-icon--success":me()==="success","c-command-output__status-icon--error":me()==="error","c-command-output__status-icon--warning":me()==="skipped"}))),s(Ve,Me)},$$slots:{default:!0}})}s(Ye,Qe)};k(Pe,(Ye=>{me()!==null&&Ye(We)}),!0),s(pe,fe)};k(xe,(pe=>{ie()?pe(ze):pe(He,!1)}));var Le=f(xe,2),De=pe=>{at(pe,{get content(){return ke()},align:"end",children:(fe,Pe)=>{St(fe,{variant:"ghost-block",color:"neutral",size:1,onclick:We=>we.onViewOutput(We,Ie()),children:(We,Ye)=>{Se(We,{name:"external-link"})},$$slots:{default:!0}})},$$slots:{default:!0}})};k(Le,(pe=>{!Ie()||me()&&me()==="skipped"||ie()||pe(De)})),s(_e,oe)},children:(_e,oe)=>{var ve=e1(),ye=_(ve),Ne=Ge=>{var xe=Q_(),ze=_(xe);Fe(ze,{size:1,type:"monospace",children:(He,Le)=>{var De=ae();ge((()=>qe(De,te()))),s(He,De)},$$slots:{default:!0}}),s(Ge,xe)};k(ye,(Ge=>{te()&&!$e()&&Ge(Ne)}));var Re=f(ye,2),Oe=Ge=>{var xe=Z_(),ze=_(xe),He=De=>{var pe=P(),fe=b(pe);be(fe,(()=>Va.Root),((Pe,We)=>{We(Pe,{children:(Ye,Qe)=>{hv(Ye,{get text(){return Ie()},get lang(){return ue()}})},$$slots:{default:!0}})})),s(De,pe)},Le=De=>{Fe(De,{size:1,type:"monospace",children:(pe,fe)=>{var Pe=ae();ge((()=>qe(Pe,Ie()))),s(pe,Pe)},$$slots:{default:!0}})};k(ze,(De=>{ce()?De(He):De(Le,!1)})),s(Ge,xe)};k(Re,(Ge=>{!Ie()||me()&&me()==="skipped"||Ge(Oe)}));var Be=f(Re,2);et(Be,(()=>we.children??pt)),s(_e,ve)},$$slots:{header:!0,default:!0}}),s(se,he),Ee()})(N,{get title(){return t(J).step_description},get output(){return t(J).logs},get status(){return t(Y)},get isLoading(){return t(Q)},get collapsed(){return t(X)},get showCollapseButton(){return t(ee)},viewButtonTooltip:"View full output in editor",onViewOutput:(se,we)=>{var $e;($e=we)&&l.openScratchFile($e,"plaintext")}})}})),ge((()=>{O=ct(I,1,"c-agent-setup-logs-container svelte-1y2dl78",null,O,{"c-agent-setup-logs-container--loading":!t(u)}),nt(D,"aria-expanded",t(y)),F=ct(U,1,"c-agent-setup-logs-wrapper svelte-1y2dl78",null,F,{"is-hidden":!t(y)})})),s(S,I)},L=S=>{var I=s1(),O=_(I);Fe(O,{size:1,color:"secondary",children:(z,K)=>{var j=ae("Waiting to start agent environment...");s(z,j)},$$slots:{default:!0}});var D=f(O,2);Vn(D,{size:1}),s(S,I)};k($,(S=>{t(g)&&t(g).steps&&t(g).steps.length>0?S(C):S(L,!1)})),s(o,A),Ee(),a()}gn(["click","keydown"]);var o1=h("<div><!></div>"),a1=h('<div class="c-paused-remote-agent svelte-1ihhbdx"><span class="c-paused-remote-agent__text svelte-1ihhbdx">This agent is paused and will resume when you send a new message</span></div>'),i1=h('<div><div class="c-remote-agent-error__content svelte-1gf5kop"><span class="c-remote-agent-error__message svelte-1gf5kop"> <!></span> <div class="c-remote-agent-error__actions"><!> <!></div></div></div>');function xa(o,e){Ce(e,!0);let n=H(e,"onRetry",19,(()=>{})),r=H(e,"onDelete",19,(()=>{})),a=d((()=>"type"in e.error)),i=d((()=>t(a)&&e.error.type===Ni.agentFailed)),l=d((()=>e.error.errorMessage)),c=d((()=>t(a)?void 0:e.error.retryAt)),u=d((()=>t(c)!==void 0)),g=d((()=>t(i)&&r())),p=d(n),y=Te(void 0);ot((()=>{if(t(c))return(function(){if(t(c))return hg(t(c),(z=>{Z(y,z,!0)}))})()}));var m=i1();let v;var w=_(m),E=_(w),A=_(E),$=f(A),C=z=>{var K=ae();ge((()=>qe(K,`Retrying in ${t(y)??""}`))),s(z,K)};k($,(z=>{t(u)&&t(y)&&z(C)}));var L=f(E,2),S=_(L),I=z=>{Et(z,{class:"c-remote-agent-error__button c-remote-agent-error__button--retry",variant:"soft",color:"neutral",size:1,onclick:K=>{K.preventDefault(),n()?.()},children:(K,j)=>{var V=ae();ge((()=>qe(V,"Retry"+(t(u)?" now":"")))),s(K,V)},$$slots:{default:!0}})};k(S,(z=>{t(p)&&z(I)}));var O=f(S,2),D=z=>{Et(z,{class:"c-remote-agent-error__button c-remote-agent-error__button--delete",variant:"soft",color:"error",size:1,onclick:K=>{K.preventDefault(),r()?.()},children:(K,j)=>{var V=ae("Delete Agent");s(K,V)},$$slots:{default:!0}})};k(O,(z=>{t(g)&&z(D)})),ge((()=>{v=ct(m,1,"c-remote-agent-error svelte-1gf5kop",null,v,{"c-remote-agent-error--unrecoverable":t(i)}),qe(A,`${t(l)??""} `)})),s(o,m),Ee()}var l1=h("<span> </span>"),c1=h('<div class="c-resuming-agent svelte-g8z95r"><span class="c-resuming-agent__text svelte-g8z95r"><!> <!></span> <!></div>');function d1(o,e){Ce(e,!0);let n,r,a=H(e,"timeToTimerMs",3,5e3),i=Te(0),l=Date.now(),c=Te(!1);function u(){Z(i,Math.floor((Date.now()-l)/1e3),!0)}function g(){Z(c,!0),u(),r=setInterval(u,1e3)}let p=d((()=>(function($){return $>=60?`${Math.floor($/60)}:${String($%60).padStart(2,"0")}`:`0:${String($).padStart(2,"0")}`})(t(i))));Jt((function(){return n=setTimeout(g,a()),l=Date.now(),()=>{Z(i,0),Z(c,!1),clearTimeout(n),clearInterval(r)}}));var y=c1(),m=_(y),v=_(m);Vn(v,{size:1});var w=f(v,2);Fe(w,{size:1,weight:"light",color:"secondary",children:($,C)=>{var L=ae("Resuming remote agent...");s($,L)},$$slots:{default:!0}});var E=f(m,2),A=$=>{var C=P(),L=b(C);be(L,(()=>Mn.Root),((S,I)=>{I(S,{color:"neutral",size:1,children:(O,D)=>{Fe(O,{type:"monospace",size:1,weight:"light",color:"secondary",children:(z,K)=>{var j=l1();let V;var R=_(j);ge((()=>{V=ct(j,1,"c-resuming-agent__timer svelte-g8z95r",null,V,{is_minutes:t(i)>=60}),qe(R,t(p))})),s(z,j)},$$slots:{default:!0}})},$$slots:{default:!0}})})),s($,C)};k(E,($=>{t(c)&&$(A)})),s(o,y),Ee()}const u1="message-list-scrollable-container";var v1=h('<div class="c-msg-list__floating c-msg-list__navigation-controls svelte-bbhngn"><!></div>'),g1=h('<div class="c-msg-list__floating c-msg-list__scroll-to-bottom svelte-bbhngn"><!></div>'),h1=h('<div data-testid="chat-message-list"><!> <div><div class="c-msg-list__content svelte-bbhngn"><!></div></div> <!></div>');function m1(o,e){Ce(e,!0);const n=()=>G(u,"$enableIntersectionObserverManager",a),r=()=>G(g,"$fullFeatured",a),[a,i]=Xe();let l=H(e,"msgListElement",15),c=H(e,"doShowFloatingButtons",3,!1);const u=Ct("enableIntersectionObserverManager"),g=Ct("fullFeatured"),p=ln(),y=d((()=>e.predefinedConvItems?Fs(e.predefinedConvItems):nu(p)));let m=Te(!1),v=Te(!1),w=!1;function E(T){Z(m,!1),w||(w=!0,Ys(T,{smooth:!0,scrollDuration:100,onScrollFinish:()=>w=!1}))}function A(){Z(m,!0)}let $=Te(0),C=d((()=>t($))),L=d((()=>t(m)));const S=sa();let I=d((()=>`${t(C)}px 0px ${t(C)}px 0px`));const O=Bi({root:l(),rootMargin:"300px 0px 300px 0px",threshold:0,enabled:n()});Nr();const D=ut();function z(T,N){D(lt(tt.WEBVIEW.CONVERSATION_NAVIGATION,{direction:T,source:N}))}ot((()=>{O.setConfig({root:l(),rootMargin:t(I),threshold:0,enabled:n()})}));var K=h1();let j;var V=_(K),R=T=>{var N=v1(),J=_(N);be(J,(()=>Wv.Controls),((Y,Q)=>{Q(Y,{trackNavigationInDirection:z})})),Zt(3,N,(()=>ms),(()=>({duration:150,start:.9}))),s(T,N)};k(V,(T=>{c()&&t(v)&&T(R)}));var x=f(V,2);let B;nt(x,"id",u1);var q=_(x),M=_(q),W=T=>{var N=P(),J=b(N);et(J,(()=>e.children),(()=>({turnHeight:t(C)}))),s(T,N)};k(M,(T=>{e.children&&T(W)})),Dt(x,(T=>l(T)),(()=>l())),kn(x,((T,N)=>xl?.(T,N)),(()=>({onScrollIntoBottom:E,onScrollAwayFromBottom:A,onScroll:e.onScroll}))),kn(x,((T,N)=>Sl?.(T,N)),(()=>({onHeightChange:T=>Z($,T,!0)}))),kn(x,((T,N)=>(function(J,Y={items:[],conversationNavigationItems:sa()}){let Q=Y,X=[],ee=null;const{conversationNavigationItems:se}=Y;function we(ue){Q=ue,se.update((ke=>({...ke,all:ue.items??[]})))}function $e(){if((Q.items?.length??0)<1)return;const ue=new Set(Q.items),ke=J.querySelectorAll("[data-timestamp-id]");X=[];for(const re of ke){const ie=re.getAttribute("data-timestamp-id");if(ie&&ue.has(ie)){const he=re.offsetTop;X.push({id:ie,element:re,offsetTop:he})}}X.sort(((re,ie)=>re.offsetTop-ie.offsetTop)),te()}function te(ue){if(X.length===0)return;const ke=ue??J.scrollTop;let re,ie,he=1/0,de=1/0;for(const _e of X){if(_e.offsetTop>ke+80){const oe=_e.offsetTop-ke;oe<he&&(he=oe,re={id:_e.id,offsetTop:_e.offsetTop})}if(_e.offsetTop<ke-80){const oe=ke-_e.offsetTop;oe<de&&(de=oe,ie={id:_e.id,offsetTop:_e.offsetTop})}}const le=!nd(J);se.update((_e=>_e.next?.id===re?.id&&_e.next?.offsetTop===re?.offsetTop&&_e.prev?.id===ie?.id&&_e.prev?.offsetTop===ie?.offsetTop&&_e.canScrollToBottom===le?_e:{..._e,next:re,prev:ie,canScrollToBottom:le}))}const Ie=Js((ue=>{te(ue.target.scrollTop)}),100),me=Js($e,300),Ae=ue=>{sd(J,ue,{smooth:!0})},ce=()=>{Ys(J,{smooth:!0})};return $e(),se.update((ue=>({...ue,scrollTo:Ae,scrollToBottom:ce}))),J.addEventListener("scroll",Ie,{passive:!0}),ee=new ResizeObserver(me),ee.observe(J),we(Y),{update(ue){ji(Q,ue)||(we(ue),$e())},destroy(){J.removeEventListener("scroll",Ie),ee?.disconnect(),X=[],se.update((()=>({all:[]})))}}})(T,N)),(()=>({items:G(t(y),"$conversationItems",a),conversationNavigationItems:S})));var U=f(x,2),F=T=>{var N=g1();Rl(_(N),{get messageListElement(){return l()}}),Zt(3,N,(()=>ms),(()=>({duration:150,start:.9}))),s(T,N)};k(U,(T=>{c()&&t(v)&&t(L)&&T(F)})),ge((()=>{j=ct(K,1,"c-msg-list-container svelte-bbhngn",null,j,{"c-msg-list--minimal":!r()}),B=ct(x,1,"c-msg-list svelte-bbhngn",null,B,{"c-msg-list--minimal":!r()})})),Ft("mouseenter",K,(()=>Z(v,!0))),Ft("mouseleave",K,(()=>Z(v,!1))),s(o,K),Ee(),i()}var p1=h("<!> <!> <!> <!>",1),f1=h('<div role="button" tabindex="-1"><!></div>');function _1(o,e){Ce(e,!0);const[n,r]=Xe();let a=H(e,"collapsedMaxHeight",3,120),i=H(e,"placeholder",3,"Edit your message..."),l=H(e,"collapsed",3,!1);const c=Fn(),u=Ct("enableChatMultimodal"),g=d((()=>e.content));let p=Te(void 0),y=Te(void 0);var m={getEditorContainer:function(){return t(y)}},v=f1();let w;v.__mousedown=$=>$.stopPropagation();var E=_(v);be(E,(()=>ds.Root),(($,C)=>{Dt(C($,{editable:!1,variant:"accent",onclick:L=>L.stopPropagation(),children:(L,S)=>{var I=p1(),O=b(I),D=V=>{zo(0,{get saveImage(){return c.saveImage},get saveAttachment(){return c.saveAttachment},get deleteImage(){return c.deleteImage},get renderImage(){return c.loadImage},isEditable:()=>!1,supportedFileTypes:["image","text"]})};k(O,(V=>{G(u,"$enableChatMultimodal",n)&&V(D)}));var z=f(O,2);Eo(z,{get placeholder(){return i()}});var K=f(z,2);be(K,(()=>ds.Content),((V,R)=>{R(V,{get content(){return t(g)},onContentChanged:()=>{}})}));var j=f(K,2);et(j,(()=>e.children??pt)),s(L,I)},$$slots:{default:!0}}),(L=>Z(p,L,!0)),(()=>t(p)))})),Dt(v,($=>Z(y,$)),(()=>t(y))),ge((()=>{w=ct(v,1,"c-chat-input c-chat-edit-message svelte-1di2pdq",null,w,{"is-collapsed":l()}),Un(v,`--chat-input-collapsed-height: ${a()??""}px;`)})),s(o,v);var A=Ee(m);return r(),A}gn(["mousedown"]);var y1=h('<div class="c-msg-list__turn svelte-1u7p02e"><!> <!></div>');function b1(o,e){Ce(e,!0);const n=()=>G(c,"$remoteAgentsModel",r),[r,a]=Xe();let i=H(e,"isLastTurn",3,!1),l=H(e,"turnIndex",3,0);const c=Tt(un.key);let u=d((()=>e.turn.request_id)),g=d((()=>n()?.isActive&&n()?.currentAgent?.is_setup_script_agent===!0)),p=d((()=>l()===0)),y=d((()=>t(g)&&t(p))),m=d((()=>bo(e.turn)));var v=y1(),w=_(v),E=$=>{{let C=d((()=>e.turn.request_message??""));(function(L,S){let I=H(S,"richTextJsonRepr",19,(()=>{})),O=H(S,"timestamp",19,(()=>{}));zr(L,{get timestamp(){return O()},content:z=>{{let K=d((()=>I()??S.msg));_1(z,{collapsed:!1,get content(){return t(K)},collapsedMaxHeight:120})}},$$slots:{content:!0}})})($,{get msg(){return t(C)},get richTextJsonRepr(){return e.turn.rich_text_json_repr},get timestamp(){return e.turn.timestamp}})}};k(w,($=>{t(m)||Ri(e.turn)||t(y)||$(E)}));var A=f(w,2);{let $=d((()=>e.turn.response_text??""));Pi(A,{get turn(){return e.turn},get turnIndex(){return l()},get requestId(){return t(u)},get isLastTurn(){return i()},get group(){return e.group},get markdown(){return t($)}})}s(o,v),Ee(),a()}var $1=h('<div class="c-msg-list__turn--hidden"></div>'),w1=h('<div class="c-agent-running-spacer svelte-1w2lqp6"></div>'),k1=h("<!> <!>",1),A1=h("<!> <!>",1),C1=h("<!> <!> <!>",1);function E1(o,e){Ce(e,!0);const n=()=>G(c,"$remoteAgentsModel",r),[r,a]=Xe(),i=Ct("enableGroupedTools"),l=Ct("enableRichCheckpointInfo"),c=Tt(un.key),u=d((()=>n().getLastToolUseState()));let g=d((()=>Hp(t(u),n(),G(i,"$enableGroupedTools",r)))),p=d((()=>t(g).chatHistory)),y=d((()=>t(g).groupedChatHistory)),m=d((()=>t(g).lastGroupConfig)),v=d((()=>t(m).remoteAgentErrorConfig)),w=d((()=>(function(A){return A.map(($=>$[0]?.turn.timestamp)).filter(Boolean)??[]})(t(y))));const E=()=>26;Nr(),m1(o,{get predefinedConvItems(){return t(w)},children:($,C)=>{var L=C1(),S=b(L);r1(S,{});var I=f(S,2);Pt(I,17,(()=>t(y)),Ga,((z,K,j)=>{const V=d((()=>j+1===t(y).length));{let R=d((()=>t(K)[0]?.turn?.request_id)),x=d((()=>t(V)?C?.().turnHeight:0));(function(B,q){let M=H(q,"dataRequestId",19,(()=>{}));var W=o1(),U=_(W);et(U,(()=>q.children??pt)),ge((()=>{ct(W,1,$n(["c-msg-list__item",q.class]),"svelte-1na30ls"),Un(W,`--msg-list-item-min-height: ${q.minHeight}px`),nt(W,"data-request-id",M())})),s(B,W)})(z,{class:"c-msg-list__item--grouped",get dataRequestId(){return t(R)},get minHeight(){return t(x)},children:(B,q)=>{var M=A1(),W=b(M);Pt(W,19,(()=>t(K)),(({turn:T,idx:N})=>T.request_id??`no-request-id-${N}`),((T,N,J)=>{let Y=()=>t(N).turn;const Q=d((()=>t(V)&&t(J)+1===t(K).length)),X=d((()=>tr(Y())&&Y().hidden));var ee=P(),se=b(ee),we=te=>{var Ie=$1();s(te,Ie)},$e=te=>{var Ie=P(),me=b(Ie),Ae=ue=>{Pr(ue,{get turn(){return Y()}})},ce=ue=>{var ke=P(),re=b(ke),ie=de=>{$l(de,{get turn(){return Y()}})},he=de=>{var le=P(),_e=b(le),oe=ye=>{b1(ye,{get group(){return t(K)},get turn(){return Y()},get turnIndex(){return t(N).idx},get isLastTurn(){return t(Q)}})},ve=ye=>{var Ne=P(),Re=b(Ne),Oe=Be=>{{let Ge=d((()=>`checkpoint-${Y().request_id}`));Pp(Be,{get intersectionId(){return t(Ge)},estimatedHeight:E,children:(xe,ze)=>{var He=P(),Le=b(He),De=fe=>{Cl(fe,{get turn(){return Y()}})},pe=fe=>{Al(fe,{get turn(){return Y()}})};k(Le,(fe=>{G(l,"$enableRichCheckpointInfo",r)?fe(De):fe(pe,!1)})),s(xe,He)},$$slots:{default:!0}})}};k(Re,(Be=>{$o(Y())&&Y().status===An.success&&Be(Oe)}),!0),s(ye,Ne)};k(_e,(ye=>{Di(Y())?ye(oe):ye(ve,!1)}),!0),s(de,le)};k(re,(de=>{fv(Y())?de(ie):de(he,!1)}),!0),s(ue,ke)};k(me,(ue=>{Mi(Y())?ue(Ae):ue(ce,!1)}),!0),s(te,Ie)};k(se,(te=>{t(X)?te(we):te($e,!1)})),s(T,ee)}));var U=f(W,2),F=T=>{var N=k1(),J=b(N),Y=se=>{xa(se,{get error(){return t(v).error},get onRetry(){return t(v).onRetry},get onDelete(){return t(v).onDelete}})},Q=se=>{var we=P(),$e=b(we),te=me=>{Tl(me,{get message(){return t(m).retryMessage}})},Ie=me=>{var Ae=P(),ce=b(Ae),ue=re=>{d1(re,{})},ke=re=>{var ie=P(),he=b(ie),de=_e=>{(function(oe){var ve=a1();s(oe,ve)})(_e)},le=_e=>{var oe=P(),ve=b(oe),ye=Re=>{No(Re,{})},Ne=Re=>{var Oe=P(),Be=b(Oe),Ge=ze=>{El(ze,{})},xe=ze=>{var He=P(),Le=b(He),De=pe=>{Il(pe)};k(Le,(pe=>{t(m).showStopped&&pe(De)}),!0),s(ze,He)};k(Be,(ze=>{t(m).showAwaitingUserInput?ze(Ge):ze(xe,!1)}),!0),s(Re,Oe)};k(ve,(Re=>{t(m).showGeneratingResponse?Re(ye):Re(Ne,!1)}),!0),s(_e,oe)};k(he,(_e=>{t(m).showPaused?_e(de):_e(le,!1)}),!0),s(re,ie)};k(ce,(re=>{t(m).showResumingRemoteAgent?re(ue):re(ke,!1)}),!0),s(me,Ae)};k($e,(me=>{t(m).retryMessage?me(te):me(Ie,!1)}),!0),s(se,we)};k(J,(se=>{t(v)?se(Y):se(Q,!1)}));var X=f(J,2),ee=se=>{var we=w1();s(se,we)};k(X,(se=>{t(m).showRunningSpacer&&se(ee)})),s(T,N)};k(U,(T=>{t(V)&&T(F)})),s(B,M)},$$slots:{default:!0}})}}));var O=f(I,2),D=z=>{xa(z,{get error(){return t(v).error},get onRetry(){return t(v).onRetry},get onDelete(){return t(v).onDelete}})};k(O,(z=>{!t(p).length&&t(v)&&z(D)})),s($,L)},$$slots:{default:!0}}),Ee(),a()}var T1=h('<div class="c-chat-resize-pill svelte-jhr7e3"><div data-ds-color="neutral" class="c-chat-input-dialog-hr-handle svelte-jhr7e3" role="separator"><div class="c-chat-input-dialog-hr svelte-jhr7e3"></div></div></div>');function Nl(o,e){Ce(e,!0);const n=H(e,"inputArea",15),r=H(e,"onDragEnd",3,(()=>{}));let a;var i=T1();Ft("mousemove",Bo,(l=>{if(!n()||!a)return;const c=l.clientY-a.startY;n(n().style.height=`${Math.max(80,a.initialHeight-c)}px`,!0)})),Ft("mouseup",Bo,(()=>{n()&&a&&(r()(),a=void 0,n()?.classList.remove("is-dragging"))})),_(i).__mousedown=l=>{n()&&(a={startY:l.clientY,initialHeight:n().offsetHeight},n().classList.add("is-dragging"))},s(o,i),Ee()}gn(["mousedown"]);var I1=h('<span class="c-canvas-picker__text-wrapper svelte-7m3mw1"> </span>'),S1=h('<div class="c-canvas-picker__loading svelte-7m3mw1"><!></div>'),x1=h('<div class="c-canvas-picker__item-content svelte-7m3mw1"><div class="c-canvas-picker__item-name svelte-7m3mw1"><!></div></div>'),R1=h('<div class="c-canvas-picker__item-content svelte-7m3mw1"><div class="c-canvas-picker__item-name svelte-7m3mw1"><!></div> <!></div>'),M1=h("<!> <!>",1),D1=h("<!> <!>",1),z1=h('<div class="c-canvas-picker__scroll svelte-7m3mw1"><!></div>'),N1=h("<!> <!>",1),O1=h('<div class="c-canvas-picker svelte-7m3mw1"><!></div>');function L1(o,e){Ce(e,!0);const n=()=>G(y,"$selectedCanvas",i),r=()=>G(g,"$selectedCanvasId",i),a=()=>G(u,"$canvases",i),[i,l]=Xe(),c=ut(),u=su(),g=ru(),p=ou(),y=au(g);let m=Te(void 0);function v($){$&&c(iu({}))}function w($){c(lu($)),t(m)?.requestClose()}var E=O1(),A=_(E);at(A,{side:"top",nested:!1,content:"Context Canvas",children:($,C)=>{var L=P(),S=b(L);be(S,(()=>je.Root),((I,O)=>{Dt(O(I,{nested:!1,onOpenChange:v,children:(D,z)=>{var K=N1(),j=b(K);be(j,(()=>je.Trigger),((R,x)=>{x(R,{children:(B,q)=>{Et(B,{size:1,variant:"ghost-block",color:"neutral",class:"c-canvas-picker__button",children:(M,W)=>{var U=I1(),F=_(U);ge((()=>qe(F,n()?n().name:"No Canvas"))),s(M,U)},$$slots:{default:!0,iconLeft:(M,W)=>{Se(M,{slot:"iconLeft",name:"folder"})}}})},$$slots:{default:!0}})}));var V=f(j,2);be(V,(()=>je.Content),((R,x)=>{x(R,{size:1,side:"top",align:"start",children:(B,q)=>{var M=z1(),W=_(M),U=T=>{var N=S1(),J=_(N);Fe(J,{size:1,color:"secondary",children:(Y,Q)=>{var X=ae("Loading canvases...");s(Y,X)},$$slots:{default:!0}}),s(T,N)},F=T=>{var N=D1(),J=b(N);{let X=d((()=>r()===void 0));be(J,(()=>je.Item),((ee,se)=>{se(ee,{get highlight(){return t(X)},onSelect:()=>{w(void 0)},children:(we,$e)=>{var te=x1(),Ie=_(te),me=_(Ie);Fe(me,{size:1,children:(Ae,ce)=>{var ue=ae("No Canvas");s(Ae,ue)},$$slots:{default:!0}}),ge((()=>nt(te,"data-highlighted",r()===void 0))),s(we,te)},$$slots:{default:!0}})}))}var Y=f(J,2),Q=X=>{var ee=M1(),se=b(ee);be(se,(()=>je.Separator),(($e,te)=>{te($e,{})}));var we=f(se,2);Pt(we,1,a,($e=>$e.canvasId),(($e,te)=>{var Ie=P(),me=b(Ie);{let Ae=d((()=>r()===t(te).canvasId));be(me,(()=>je.Item),((ce,ue)=>{ue(ce,{get highlight(){return t(Ae)},onSelect:()=>{w(t(te).canvasId)},children:(ke,re)=>{var ie=R1(),he=_(ie),de=_(he);Fe(de,{size:1,children:(oe,ve)=>{var ye=ae();ge((()=>qe(ye,t(te).name))),s(oe,ye)},$$slots:{default:!0}});var le=f(he,2),_e=oe=>{Fe(oe,{size:0,color:"secondary",truncate:!0,children:(ve,ye)=>{var Ne=ae();ge((()=>qe(Ne,t(te).description))),s(ve,Ne)},$$slots:{default:!0}})};k(le,(oe=>{t(te).description&&oe(_e)})),ge((()=>nt(ie,"data-highlighted",r()===t(te).canvasId))),s(ke,ie)},$$slots:{default:!0}})}))}s($e,Ie)})),s(X,ee)};k(Y,(X=>{a().length>0&&X(Q)})),s(T,N)};k(W,(T=>{G(p,"$isLoading",i)?T(U):T(F,!1)})),s(B,M)},$$slots:{default:!0}})})),s(D,K)},$$slots:{default:!0}}),(D=>Z(m,D,!0)),(()=>t(m)))})),s($,L)},$$slots:{default:!0}}),s(o,E),Ee(),l()}var P1=h("<span><!></span>");function B1(o,e){var n=P(),r=b(n);{const a=i=>{var l=P1(),c=_(l);_n(c,{commandName:"sendChatAction",keysOnly:!0}),s(i,l)};be(r,(()=>xn.SendButton),((i,l)=>{l(i,{get isDisabled(){return e.isDisabled},get disabledReason(){return e.disabledReason},get primaryAction(){return e.sendAction},tooltipContent:a,$$slots:{tooltipContent:!0}})}))}s(o,n)}const Gs=o=>o.type.name==="hardBreak"?`
`:"";class F1{constructor(e,n,r){this.onBeforeCompletionAccepted=e,this.onCompletionAccepted=n,this.onCompletionRejected=r}_completionState=null;_pluginKey=new cu("inlineCompletion");_editor=null;createGhostDecoration(e,n){return du.widget(e,(()=>{const r=document.createElement("span");r.className="inline-completion-ghost",r.style.opacity="0.5",r.style.color="var(--ds-color-neutral-a11)",r.style.pointerEvents="none",r.style.userSelect="none",r.style.whiteSpace="pre-wrap";const a=n.split(`
`);return a.forEach(((i,l)=>{r.appendChild(document.createTextNode(i)),l<a.length-1&&r.appendChild(document.createElement("br"))})),r}),{side:1})}get tipTapExtension(){const e=this;return vi.create({name:"inlineCompletion",onCreate(){e._editor=this.editor},addKeyboardShortcuts:()=>({Tab:()=>!!e._completionState&&(e.acceptCompletion(),!0),Escape:()=>!!e._completionState&&(e.clearCompletion(),!0)}),addProseMirrorPlugins:()=>[new uu({key:e._pluginKey,state:{init:()=>Yn.empty,apply:(n,r,a,i)=>{if(!e._completionState)return Yn.empty;const{from:l}=i.selection,c=e._completionState;if(!n.docChanged){const{from:m}=a.selection,{from:v}=i.selection;if(m!==v)return e.clearCompletion(),Yn.empty;const w=e.createGhostDecoration(l,c.currentText);return Yn.create(i.doc,[w])}const u=c.triggerPos-c.prefixWhenTriggered.length,g=i.doc.textBetween(Math.max(0,u),Math.min(l,i.doc.content.size),`
`,Gs);if(!g.startsWith(c.prefixWhenTriggered))return e.clearCompletion(),Yn.empty;const p=g.slice(c.prefixWhenTriggered.length);if(p){if(!c.originalText.startsWith(p))return e.clearCompletion(),Yn.empty;const m=c.originalText.slice(p.length);if(m){e._completionState={...c,currentText:m};const v=e.createGhostDecoration(l,m);return Yn.create(i.doc,[v])}return e.onCompletionAccepted?.(),e._completionState=null,Yn.empty}const y=e.createGhostDecoration(l,c.currentText);return Yn.create(i.doc,[y])}},props:{decorations(n){return this.getState(n)},handleClick:()=>(e.clearCompletion(),!1),handleKeyDown:(n,r)=>(e._completionState&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(r.key)&&e.clearCompletion(),!1)}})]})}showCompletion(e,n){if(this._editor){const r=this._editor.state.selection.from,a=n||this._editor.state.doc.textBetween(0,r,`
`,Gs);this._completionState={originalText:e,currentText:e,triggerPos:r,prefixWhenTriggered:a},this._editor.view.dispatch(this._editor.state.tr)}}_getAtMentionWordPrefix(){if(!this._editor)return"";const{state:e}=this._editor,{from:n}=e.selection;let r=n-1,a="";for(;r>=0&&n-r<=100;){const i=e.doc.textBetween(r,r+1);if(i==="@"){a=e.doc.textBetween(r+1,n);break}if(i===" "||i===`
`)break;r--}return a}acceptCompletion(){if(this._completionState&&this._editor){const e=this._completionState.currentText,n=this._getAtMentionWordPrefix();if(!this.onBeforeCompletionAccepted?.(e,n)){const a=Cg(e);a&&this._editor.commands.insertContent(a,{parseOptions:{preserveWhitespace:!0}})}this.onCompletionAccepted?.(),this.clearCompletion(!1)}}clearCompletion(e=!0){const n=this._completionState!==null;this._completionState=null,this._editor&&this._editor.view.dispatch(this._editor.state.tr),n&&e&&this.onCompletionRejected?.()}isActivelyMatching(){return!!(this._completionState&&this._completionState.currentText.length<this._completionState.originalText.length)}hasActiveCompletion(){return this._completionState!==null}}function q1(o,e){Ce(e,!0);const n=new F1(e.onBeforeCompletionAccepted,e.onCompletionAccepted,e.onCompletionRejected),r=Tt(rr.CONTEXT_KEY).pluginManager.registerPlugin(n);ls(r);var a={showCompletion:(i,l)=>n.showCompletion(i,l),clearCompletion:()=>n.clearCompletion(),isActivelyMatching:()=>n.isActivelyMatching(),hasActiveCompletion:()=>n.hasActiveCompletion()};return Ee(a)}class H1{constructor(e,n){this._reduxStore=e,this._extensionClient=n}currentCompletionRequestId=null;currentCompletionEmitTime=null;async getCompletion(e,n=""){if(e.length<3&&!e.startsWith("@"))return null;try{vu();const r=this.getRecentMessages(),a=await this._extensionClient.getChatInputCompletion(e,n,r);if(!a||!a.completion)return null;const i=(function(l,c,u){if(c.split(/\s+/).pop()?.startsWith("@")){const w=l.split(/\s+/)[0];if(!w)return"";const E=w.replace(/[*_[\]#(){}`]/g,""),A=E.search(/[:,;!?#]/);return A!==-1?E.slice(0,A):E.endsWith(".")?E.slice(0,-1):E}const g=l.indexOf(`
---`);let p=l;if(g!==-1&&(p=l.slice(0,g)),p.trimStart().startsWith("---")||p.trim().length===0)return"";const y=p.split(`
`),m=[];let v=0;for(const w of y){const E=w.match(/^[ \t]*/)?.[0]||"",A=w.match(/[ \t]*$/)?.[0]||"",$=w.trim();if($.length===0){v<u&&m.push(w);continue}const C=$.split(/[ \t]+/).filter((I=>I.length>0));if(v===0&&C[0].match(/[.,;:!?]$/))return E+C[0];const L=Math.min(C.length,u-v),S=E+C.slice(0,L).join(" ")+(L===C.length?A:"");if(m.push(S),v+=L,v>=u)break}return m.join(`
`)})(a.completion,e,3);return i&&(this.currentCompletionRequestId=a.requestId,this.currentCompletionEmitTime=Date.now()),i}catch(r){return console.error("Failed to get chat input completion:",r),null}}getRecentMessages(){try{const e=this._reduxStore.getState(),n=ln.select(e);if(!n)return[];const r=yi.select(e,n),a=bi(r).map((({item:i})=>i));return a.length===0?[]:a.filter((i=>tr(i))).flatMap((i=>{const l=i.request_message?"USER_INPUT:"+i.request_message+`
`:"",c=i.response_text?"AGENT_RESPONSE:"+(i.response_text??"")+`
`:"";return l&&c||l||c?[l,c]:[]})).filter((i=>i&&i.trim().length>0)).slice(-100)}catch(e){return console.error("Failed to get recent prompts:",e),[]}}handleInlineCompletionAccepted(e,n,r){if(!r)return!1;const a=r?.getDisplayItems();if(!a)return!1;const i=n+e,l=u=>u.label===i||u.name===i?u:u.group?u.group.items.find(l):void 0;let c;return a.some((u=>(c=l(u),c!==void 0))),!!c&&(r?.insertMentionNode(c),!0)}reportCompletionAccepted(){this.currentCompletionRequestId&&this.currentCompletionEmitTime&&this._extensionClient.reportChatInputCompletionResolution(this.currentCompletionRequestId,this.currentCompletionEmitTime,Date.now(),!0),this.clearCurrentCompletion()}reportCompletionRejected(){this.currentCompletionRequestId&&this.currentCompletionEmitTime&&this._extensionClient.reportChatInputCompletionResolution(this.currentCompletionRequestId,this.currentCompletionEmitTime,Date.now(),!1),this.clearCurrentCompletion()}clearCurrentCompletion(){this.currentCompletionRequestId=null,this.currentCompletionEmitTime=null}}var W1=h("<span>Add context <!></span>"),G1=h('<div class="c-chat-input__context-bar svelte-v2ozfj"><!></div>'),U1=h("<!> <!> <!>",1),V1=h('<span class="character-counter svelte-v2ozfj"> </span>'),j1=h("<!> <!> <!> <!> <!> <!>",1),K1=h("<!> <div><!></div>",1),Y1=h("<span>Cancel <!></span>"),X1=h("<span>Stop Agent <!></span>"),J1=h("<span>Resend <!></span>"),Q1=h("<!> <!> <!> <!>",1),Z1=h("<div><!></div>"),ey=h("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1),ty=h('<div class="c-chat-input svelte-v2ozfj" data-testid="design-system-chat-input"><!></div>');function Ol(o,e){Ce(e,!0);const n=()=>G(O,"$draft",g),r=()=>G(L,"$currentConversationId",g),a=()=>G(C,"$enableChatInputInlineCompletion",g),i=()=>G(Q,"$conversationType",g),l=()=>G(S,"$isAgentic",g),c=()=>G($,"$enableChatMultimodal",g),u=()=>G(De,"$showResend",g),[g,p]=Xe(),y=ut(),m=Fn(),v=rs(),w=Tt(us.key),E=Ct("enableModelRegistry"),A=Ct("enableAgentMode"),$=Ct("enableChatMultimodal"),C=Ct("enableChatInputInlineCompletion"),L=ln(),S=jn(L),I=$r(L),O=Zs(L),D=d((()=>n()?.exchange)),z=_o(L),K=Ct("enableContextCanvas"),j=Ve=>{m.showNotification({message:Ve,type:"error"})};let V=H(e,"editable",3,!0),R=H(e,"placeholder",3,"Ask or instruct Augment"),x=H(e,"hasSendButton",3,!0),B=H(e,"richTextEditorRoot",15),q=Te(void 0),M=Te(!1);const W=d((()=>new H1(v.store,m)));let U=Te(void 0);const F=Ua((async()=>{const Ve=B()?.getEditor?.();if(!Ve)return;const ne=ca(Ve.state,`
`,Gs),Me=Eg(Ve.state,`
`,Gs),Ue=ne.prefix,Je=Me.suffix;if(!Ue||Ue.length<3)return;const rt=await t(W).getCompletion(Ue,Je),Ze=ca(Ve.state,`
`,Gs);ne.prefix===Ze.prefix&&rt&&t(U)?.showCompletion(rt,Ue)}),200),T={type:"doc",content:[{type:"paragraph"}]};function N(Ve){r()&&(y(pu(r(),{draftStatus:ts.ready,exchange:{...t(D)||{},request_message:Ve.rawText,rich_text_json_repr:Ve.richTextJsonRepr||T,status:An.draft}})),a()&&t(U))&&(t(U)?.hasActiveCompletion?.()||(F.cancel(),F()))}function J(Ve){r()&&y(fu(r(),Ve.current))}let Y;const Q=w.chatModeType;let X=Te(!1);function ee(Ve){Z(X,Ve,!0)}function se(Ve){t(X)?y(lt(tt.SHARED.ASK_MODE_DEACTIVATED,{source:Ve??"unknown"})):y(lt(tt.SHARED.ASK_MODE_ACTIVATED,{source:Ve??"unknown"})),ee(!t(X))}async function we(){await Cn(),await Cn(),t(X)||y(lt(tt.SHARED.ASK_MODE_DEACTIVATED,{source:"backspace"}))}const $e=gu(L);ot((()=>{G($e,"$isNew",g)&&Y!==i()&&Y&&Cn().then((()=>ze())),Y=i()}));const te=$r(L),Ie=li(L),me=d((()=>(function(Ve,ne,Me,Ue,Je,rt,Ze){if(!ne)return{stateName:"noConversation",showCancelButton:!1,isDisabled:!0,disabledReason:"No active conversation",action:()=>!1,cancelAction:()=>!1};const bt=Me?.request_message?.trim().length||0;return ml(Me,rt)||((()=>{if(rt){const Vt=Me?.rich_text_json_repr;return!!Vt&&po.hasLoadingImages(Vt)}return!1})()?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(Ve(hr(ne)),!0)}:Ze?.disabled?{stateName:"modelDisabled",showCancelButton:!1,isDisabled:!0,disabledReason:Ze.disabled_reason||"Selected model is disabled",action:()=>!1,cancelAction:()=>!1}:Ue?{stateName:"agentMode",showCancelButton:!1,isDisabled:bt===0,action:()=>(Ve(Go(ne)),!0),cancelAction:()=>(Ve(hr(ne)),!0)}:{stateName:"chatMode",showCancelButton:Je,isDisabled:Je||bt===0,action:()=>(Ve(Go(ne)),!0),cancelAction:()=>(Ve(hr(ne)),!0)})})(y,r(),t(D),l(),G(te,"$exchangeStatus",g)===Pn.running,c(),G(Ie,"$selectedModel",g)))),Ae=d((()=>t(me).showCancelButton)),ce=d((()=>t(D)?.request_message?.length||0)),ue=d((()=>t(me).isDisabled)),ke=d((()=>t(me).disabledReason)),re=d(l),ie=d((()=>t(re)&&G(E,"$enableModelRegistry",g))),he=d((()=>i()==="localAgent")),de=d((()=>i()==="chat")),le=d((()=>G(A,"$enableAgentMode",g))),_e=d((()=>{return Ve=t(me).action,()=>{const ne=Ve();return ne&&i()==="localAgent"&&t(X)&&(y(lt(tt.SHARED.ASK_MODE_SUBMITTED,{})),Cn().then((()=>{ee(!0)}))),ne&&y(bu()),ne};var Ve})),oe=d((()=>t(me).cancelAction)),ve=d((()=>`${l()}-local-${R()}`)),ye=()=>{B()?.isFocused===void 0||It(B().isFocused())||ya()||B().requestFocus()},Ne=async()=>!t(ue)&&(y(lt(tt.WEBVIEW.SEND_ACTION_TRIGGERED,{source:"keybinding"})),t(_e)()),Re=Ve=>{y(lt(tt.WEBVIEW.CANCEL_ACTION_TRIGGERED,{source:Ve}))},Oe=Ve=>{y(lt(tt.WEBVIEW.RESEND_ACTION_TRIGGERED,{source:Ve}))},Be=async()=>t(Ae)||t(Le)?(Re("keybinding"),t(oe)()):He();let Ge=Te(void 0);const xe=()=>B()?.requestFocus(),ze=()=>B()?.forceFocus?.(),He=()=>(B()?.blur(),!0),Le=d((()=>l()&&G(I,"$agentExchangeStatus",g)!==Pn.notRunning)),De=hu(L);let pe=d((()=>u()?"Resend to continue":R()));const fe=d((()=>pl(void 0,void 0,t(ue))));function Pe(){setTimeout((()=>{B()?.requestFocus()}),100)}function We(){r()&&y(yu(r()))}function Ye(Ve,ne){for(const Me of Ve)y(lt(tt.SHARED.FILE_ATTACHMENT_SUCCEEDED,{bytes:Me.size,type:Me.type?Me.type:"unknown"}));for(const Me of ne)y(lt(tt.SHARED.FILE_ATTACHMENT_FAILED,{bytes:Me.files[0].size,type:Me.files[0].type?Me.files[0].type:"unknown"}));y(lt(tt.SHARED.FILE_ATTACHMENT_BUNDLE_COMPLETED,{successes:Ve.length,failures:ne.length}))}function Qe(){y(lt(tt.SHARED.FILE_ATTACHMENT_STARTED,{source:"drop"}))}async function st(Ve){if(!r())return;const{files:ne,folders:Me}=await m.resolveFilePaths(Ve);ne.length>0&&y(ci(r(),ne)),Me.length>0&&y(di(r(),Me))}function Ke(){y(lt(tt.SHARED.FILE_ATTACHMENT_STARTED,{source:"button"}))}function vt(Ve){y(lt(tt.WEBVIEW.CONTEXT_MENU_BUTTON_CLICKED,{source:Ve}))}var dt=ty();Ft("focus",fn,(()=>{ya()||xe()})),Ft("blur",fn,(()=>y(ro()))),Ft("beforeunload",fn,(()=>y(ro())));var yt=_(dt);Ar(yt,{scope:"chat-input",children:(Ve,ne)=>{var Me=P(),Ue=b(Me);fs(Ue,(()=>t(ve)),(Je=>{var rt=P(),Ze=b(rt);{const bt=Kt=>{var xt=P(),_t=b(xt),kt=gt=>{var Rt=G1();{const zt=Nt=>{var ft=P(),$t=b(ft),qt=ht=>{var Ot=P(),Mt=b(Ot);{const cn=Gt=>{var Ut=W1(),Ht=f(_(Ut));_n(Ht,{commandName:"openContextMenu",keysOnly:!0}),s(Gt,Ut)};let Lt=d((()=>t(Ge)?.insertMentionNode));be(Mt,(()=>xn.ContextMenu),((Gt,Ut)=>{Ut(Gt,{onCloseDropdown:xe,get onInsertMentionable(){return t(Lt)},trackButtonClick:vt,tooltipContent:cn,$$slots:{tooltipContent:!0}})}))}s(ht,Ot)};k($t,(ht=>{ht(qt)})),s(Nt,ft)};ul(_(Rt),{prepend:zt,$$slots:{prepend:!0}})}s(gt,Rt)};k(_t,(gt=>{gt(kt)})),s(Kt,xt)},Bt=Kt=>{var xt=P(),_t=b(xt),kt=gt=>{vl(gt,{onDrop:Qe,onCodeFilesDrop:st})};k(_t,(gt=>{c()&&gt(kt)})),s(Kt,xt)},Vt=Kt=>{var xt=Z1(),_t=_(xt);{const kt=Rt=>{var zt=j1(),Nt=b(zt),ft=it=>{fl(it,{})};k(Nt,(it=>{t(le)&&it(ft)}));var $t=f(Nt,2),qt=it=>{var mt=U1(),Wt=b(mt);on(Wt,{name:"toggleAskMode",handler:()=>se("keybinding")});var sn=f(Wt,2);at(sn,{maxWidth:"200px",content:en=>{or(en,{heading:"Ask a question",description:"Get answers without modifying code",shortcutCommandName:"toggleAskMode"})},children:(en,dn)=>{{let hn=d((()=>t(X)?"soft":"ghost-block")),Tn=d((()=>t(X)?"accent":"neutral"));St(en,{size:1,get variant(){return t(hn)},get color(){return t(Tn)},class:"c-chat-input__ask-mode-btn",onclick:()=>se("button"),children:(bn,qn)=>{Se(bn,{name:"message-square-text"})},$$slots:{default:!0}})}},$$slots:{content:!0,default:!0}});var yn=f(sn,2);Dr(yn,{orientation:"vertical",class:"c-chat-input__ask-separator"}),s(it,mt)};k($t,(it=>{t(he)&&it(qt)}));var ht=f($t,2),Ot=it=>{Fe(it,{class:"c-chat-indicator",color:"neutral",size:1,children:(mt,Wt)=>{var sn=ae("Chat Thread");s(mt,sn)},$$slots:{default:!0}})};k(ht,(it=>{t(de)&&it(Ot)}));var Mt=f(ht,2),cn=it=>{var mt=V1(),Wt=_(mt);ge((()=>qe(Wt,`${t(ce)??""}/${Rs}`))),s(it,mt)};k(Mt,(it=>{t(ce)>Rs&&it(cn)}));var Lt=f(Mt,2),Gt=it=>{hl(it,{get selectedModelId(){return G(z,"$selectedModelId",g)},onModelChange:mt=>{r()&&y(ui(r(),mt))}})};k(Lt,(it=>{t(ie)&&it(Gt)}));var Ut=f(Lt,2),Ht=it=>{L1(it,{})};k(Ut,(it=>{G(K,"$enableContextCanvas",g)&&it(Ht)})),s(Rt,zt)},gt=Rt=>{var zt=Q1(),Nt=b(zt),ft=Lt=>{var Gt=P(),Ut=b(Gt);{let Ht=d(_u);be(Ut,(()=>xn.AddFileButton),((it,mt)=>{mt(it,{get accept(){return t(Ht)},onclick:Ke})}))}s(Lt,Gt)};k(Nt,(Lt=>{c()&&Lt(ft)}));var $t=f(Nt,2),qt=Lt=>{var Gt=K1(),Ut=b(Gt);bl(Ut,{get draft(){return n()},forceEditorFocus:ze,get editorContainer(){return t(q)}});var Ht=f(Ut,2),it=_(Ht);{let mt=d((()=>n()?.draftStatus===ts.enhancing));be(it,(()=>xn.RewritePromptButton),((Wt,sn)=>{sn(Wt,{onRewrite:We,get isDisabled(){return t(fe).isDisabled},get disabledReason(){return t(fe).disabledReason},get isEnhancing(){return t(mt)}})}))}Zt(3,Ht,(()=>Cr),(()=>({axis:"x",duration:200,scale:.4}))),s(Lt,Gt)};k($t,(Lt=>{t(Ae)||t(Le)||u()||t(fe).isHidden||Lt(qt)}));var ht=f($t,2);{let Lt=d((()=>!t(Ae)&&!t(Le)));on(ht,{get isDisabled(){return t(Lt)},name:"cancelGeneration",debounce:!0,handler:Be})}var Ot=f(ht,2),Mt=Lt=>{var Gt=P(),Ut=b(Gt);{const Ht=it=>{var mt=Y1(),Wt=f(_(mt));_n(Wt,{commandName:"cancelGeneration",keysOnly:!0}),s(it,mt)};be(Ut,(()=>xn.CancelButton),((it,mt)=>{mt(it,{get cancelAction(){return t(oe)},onAnalyticsTrack:Re,tooltipContent:Ht,$$slots:{tooltipContent:!0}})}))}s(Lt,Gt)},cn=Lt=>{var Gt=P(),Ut=b(Gt),Ht=mt=>{var Wt=P(),sn=b(Wt);{const yn=En=>{var en=X1(),dn=f(_(en));_n(dn,{commandName:"cancelGeneration",keysOnly:!0}),s(En,en)};be(sn,(()=>xn.CancelButton),((En,en)=>{en(En,{get cancelAction(){return t(oe)},onAnalyticsTrack:Re,tooltipContent:yn,$$slots:{tooltipContent:!0}})}))}s(mt,Wt)},it=mt=>{var Wt=P(),sn=b(Wt),yn=en=>{var dn=P(),hn=b(dn);{const Tn=bn=>{var qn=J1(),Ln=f(_(qn));_n(Ln,{commandName:"resendMessage",keysOnly:!0}),s(bn,qn)};be(hn,(()=>xn.ResendButton),((bn,qn)=>{qn(bn,{resendAction:()=>{r()&&y(Jo(r()))},onAnalyticsTrack:()=>Oe("button"),tooltipContent:Tn,$$slots:{tooltipContent:!0}})}))}s(en,dn)},En=en=>{var dn=P(),hn=b(dn),Tn=bn=>{B1(bn,{get isDisabled(){return t(ue)},get disabledReason(){return t(ke)},get sendAction(){return t(_e)}})};k(hn,(bn=>{x()&&bn(Tn)}),!0),s(en,dn)};k(sn,(en=>{u()?en(yn):en(En,!1)}),!0),s(mt,Wt)};k(Ut,(mt=>{t(Le)?mt(Ht):mt(it,!1)}),!0),s(Lt,Gt)};k(Ot,(Lt=>{t(Ae)?Lt(Mt):Lt(cn,!1)})),s(Rt,zt)};be(_t,(()=>xn.Root),((Rt,zt)=>{zt(Rt,{leftAlign:kt,rightAlign:gt,$$slots:{leftAlign:!0,rightAlign:!0}})}))}s(Kt,xt)};let Qt=d((()=>t(X)?"accent":"default"));be(Ze,(()=>ds.Root),((Kt,xt)=>{Dt(xt(Kt,{get editable(){return V()},get variant(){return t(Qt)},onFocus:()=>{Z(M,!0),m.setChatContextVariables({chatInputFocused:!0})},onBlur:()=>{Z(M,!1),m.setChatContextVariables({chatInputFocused:!1})},header:bt,overlay:Bt,footer:Vt,children:(_t,kt)=>{var gt=ey(),Rt=b(gt);on(Rt,{get isDisabled(){return t(M)},name:"focusChatInput",handler:ye});var zt=f(Rt,2);{let it=d((()=>!t(M)||u()));on(zt,{get isDisabled(){return t(it)},name:"sendChatAction",debounce:!0,handler:Ne})}var Nt=f(zt,2);{let it=d((()=>!(t(M)&&u())));on(Nt,{get isDisabled(){return t(it)},name:"resendMessage",handler:()=>{r()&&(y(Jo(r())),Oe("keybinding"))}})}var ft=f(Nt,2);yl(ft,{});var $t=f(ft,2),qt=it=>{Dt(Co(it,{requestEditorFocus:xe,onMentionItemsUpdated:J}),(mt=>Z(Ge,mt,!0)),(()=>t(Ge)))};k($t,(it=>{it(qt)}));var ht=f($t,2),Ot=it=>{_l(0,{get isAskMode(){return t(X)},onAskModeChange:ee,onAskModeToggleComplete:Pe,onAskModeDeleted:we})};k(ht,(it=>{t(he)&&it(Ot)}));var Mt=f(ht,2),cn=it=>{Dt(q1(0,{onBeforeCompletionAccepted:(mt,Wt)=>t(W).handleInlineCompletionAccepted(mt,Wt,t(Ge)),onCompletionAccepted:()=>t(W).reportCompletionAccepted(),onCompletionRejected:()=>t(W).reportCompletionRejected()}),(mt=>Z(U,mt,!0)),(()=>t(U)))};k(Mt,(it=>{a()&&it(cn)}));var Lt=f(Mt,2);Eo(Lt,{get placeholder(){return t(pe)}});var Gt=f(Lt,2);{let it=d((()=>t(D)?.rich_text_json_repr||T));be(Gt,(()=>ds.Content),((mt,Wt)=>{Wt(mt,{get content(){return t(it)},onContentChanged:N})}))}var Ut=f(Gt,2),Ht=it=>{zo(0,{saveImage:(...mt)=>m.saveImage(...mt),saveAttachment:(...mt)=>m.saveAttachment(...mt),deleteImage:(...mt)=>m.deleteImage(...mt),renderImage:(...mt)=>m.loadImage(...mt),get maxImages(){return mu},supportedFileTypes:["image","text"],onValidationError:j,onCompletedAttachment:Ye})};k(Ut,(it=>{c()&&it(Ht)})),s(_t,gt)},$$slots:{header:!0,overlay:!0,footer:!0,default:!0}}),(_t=>B(_t)),(()=>B()))}))}s(Je,rt)})),s(Ve,Me)},$$slots:{default:!0}}),Dt(dt,(Ve=>Z(q,Ve)),(()=>t(q))),s(o,dt),Ee(),p()}var ny=h('<div class="c-message-history-tab__onboarding svelte-hepwid"><!></div>'),sy=h('<div class="c-message-history-tab__empty svelte-hepwid"><!></div>'),ry=h('<div class="c-message-history-tab__message-list svelte-hepwid"><!></div>'),oy=h('<div class="l-input-area-design-system svelte-hepwid"><!></div>'),ay=h("<!> <!>",1),iy=h('<div class="c-message-history-tab svelte-hepwid"><!></div> <!>',1);function ly(o,e){Ce(e,!0);const n=()=>G(p,"$isRemoteAgent",a),r=()=>G(c,"$remoteAgentsModel",a),[a,i]=Xe(),l=ut(),c=Tt(un.key),u=ln(),g=$u(),p=ii();let y=d((()=>n()&&r()?.getCurrentChatHistory()?.length)),m=d((()=>n()&&r().agentSetupLogs?.steps.length!==0));const v=ki(u);let w=d((()=>n()?!t(y)&&!t(m):G(v,"$isHistoryEmpty",a))),E=d((()=>`${G(u,"$currentConversationId",a)}-${n()?G(g,"$remoteAgentId",a):""}`));const A=wu(),$=Ct("enableSettingsHomePage"),C=ku();let L=d((()=>t(w)&&G(C,"$shouldShowOnboarding",a)&&G($,"$isSettingsHomePageEnabled",a)&&!n())),S=Te(void 0),I=Te(!1);ot((()=>{t(L)&&!t(I)&&(l(Au(!0)),l(Ai())),Z(I,t(L),!0)}));var O=iy(),D=b(O),z=_(D),K=x=>{var B=P(),q=b(B),M=U=>{var F=ny();q_(_(F),{}),s(U,F)},W=U=>{var F=sy(),T=_(F),N=Y=>{V_(Y,{})},J=Y=>{zl(Y)};k(T,(Y=>{G(A,"$isInitialIndexingInProgress",a)?Y(N):Y(J,!1)})),s(U,F)};k(q,(U=>{t(L)?U(M):U(W,!1)})),s(x,B)},j=x=>{var B=P(),q=b(B);fs(q,(()=>t(E)),(M=>{var W=ry(),U=_(W),F=N=>{E1(N,{})},T=N=>{Dl(N,{})};k(U,(N=>{n()?N(F):N(T,!1)})),s(M,W)})),s(x,B)};k(z,(x=>{t(w)?x(K):x(j,!1)}));var V=f(D,2),R=x=>{var B=ay(),q=b(B);cs(q,{get target(){return`#${Sn.divider}`},children:(W,U)=>{Nl(W,{get inputArea(){return t(S)},set inputArea(F){Z(S,F,!0)}})},$$slots:{default:!0}});var M=f(q,2);cs(M,{get target(){return`#${Sn.input}`},children:(W,U)=>{var F=oy();Ol(_(F),{placeholder:"Instruct your Augment agent"}),Dt(F,(T=>Z(S,T)),(()=>t(S))),s(W,F)},$$slots:{default:!0}}),s(x,B)};k(V,(x=>{e.isActive&&x(R)})),s(o,O),Ee(),i()}var cy=h('<div class="ds-tab-panels svelte-1d4kh3p"><!></div>');const Ll="tab-tasks";var dy=h("<!> <span>/</span> <!>",1),uy=h('<div class="c-chat-thread-body__badge svelte-1q5wcvj"><!></div>'),vy=h("<!> <!> <!> <!>",1),gy=h('<div class="c-chat-thread-body__tab-list"><!></div>'),hy=h("<!> <!> <!> <!>",1),my=h("<!> <!>",1),py=h('<div class="c-chat-thread-body svelte-1q5wcvj"><!></div>');function fy(o,e){Ce(e,!0);const n=()=>G(y,"$taskProgress",l),r=()=>G(v,"$activeTab",l),a=()=>G(w,"$availableTabs",l),i=()=>G(p,"$diffSummary",l),[l,c]=Xe(),u=Fn(),g=Nn(),p=Cu(g),y=Eu(g),m=sr.getFromContext(),{activeTab:v,availableTabs:w,shouldShowTabs:E}=m,A=d((()=>n()?n().total:0)),$=d((()=>r()===mn.messageHistory));function C(z){const K=z.value;K!==r()&&u.track(tt.WEBVIEW.TAB_CHANGED,{newTab:K,previousTab:r()??"unknown"}),m.setActiveTab(K)}const L=ri();let S=d((()=>G(L,"$highlightedElementId",l)===Ll));ls((()=>m.destroy()));var I=P(),O=b(I),D=z=>{var K=py();ol(_(K),{get value(){return r()},size:1,color:"neutral",scrollable:!0,hideLabelOnNarrow:!0,onchange:C,children:(j,V)=>{var R=my(),x=b(R);cs(x,{get target(){return`#${il}`},children:(B,q)=>{var M=gy(),W=_(M);fs(W,a,(U=>{al(U,{showSlidingBackground:!0,expandToFit:!0,children:(F,T)=>{var N=vy(),J=b(N),Y=te=>{Hs(te,{get value(){return mn.messageHistory},leftIcon:me=>{Se(me,{name:"wand-sparkles"})},children:(me,Ae)=>{var ce=ae("Thread");s(me,ce)},$$slots:{leftIcon:!0,default:!0}})};k(J,(te=>{a().includes(mn.messageHistory)&&te(Y)}));var Q=f(J,2),X=te=>{Hs(te,{get value(){return mn.tasks},leftIcon:Ae=>{Se(Ae,{name:"list-checks"})},rightIcon:Ae=>{var ce=P(),ue=b(ce),ke=re=>{var ie=P(),he=b(ie);be(he,(()=>Mn.Root),((de,le)=>{le(de,{color:"neutral",variant:"soft",size:0,children:(_e,oe)=>{var ve=uy();(function(ye,Ne){Ce(Ne,!1);const Re=new Set;let Oe=!1;eg({register:Ge=>{Re.add(Ge),oc((async()=>{Oe||(Oe=!0,Re.forEach((async xe=>{{const ze=It(xe);if(!ze||!ze.created)return;ze.willUpdate()}await Cn(),It(xe)?.didUpdate()})),await Cn(),Oe=!1)})),ls((()=>{Re.delete(Ge)}))}}),Kn();var Be=P();Xi(b(Be),Ne,"default",{}),s(ye,Be),Ee()})(_(ve),{children:(ye,Ne)=>{var Re=dy(),Oe=b(Re);io(Oe,{get value(){return n().completed},willChange:!0});var Be=f(Oe,4);io(Be,{get value(){return n().total},willChange:!0}),s(ye,Re)},$$slots:{default:!0}}),s(_e,ve)},$$slots:{default:!0}})})),s(re,ie)};k(ue,(re=>{t(A)>0&&re(ke)})),s(Ae,ce)},children:(Ae,ce)=>{at(Ae,{content:"Agent Tasklist",triggerOn:[],delayDurationMs:300,maxWidth:"200px",get open(){return t(S)},children:(ue,ke)=>{var re=ae("Tasks");s(ue,re)},$$slots:{default:!0}})},$$slots:{leftIcon:!0,rightIcon:!0,default:!0}})};k(Q,(te=>{a().includes(mn.tasks)&&te(X)}));var ee=f(Q,2),se=te=>{Hs(te,{get value(){return mn.agentEdits},leftIcon:Ae=>{Se(Ae,{name:"file-diff"})},rightIcon:Ae=>{var ce=P(),ue=b(ce),ke=re=>{wo(re,{size:0,get totalAddedLines(){return i().totalAddedLines},get totalRemovedLines(){return i().totalRemovedLines}})};k(ue,(re=>{(i().totalAddedLines>0||i().totalRemovedLines>0)&&re(ke)})),s(Ae,ce)},children:(Ae,ce)=>{var ue=ae("Edits");s(Ae,ue)},$$slots:{leftIcon:!0,rightIcon:!0,default:!0}})};k(ee,(te=>{a().includes(mn.agentEdits)&&te(se)}));var we=f(ee,2),$e=te=>{var Ie=P(),me=b(Ie);Ds(me,(()=>Ms((()=>import("./GitAgentEditTab-BKezyaYi.js")),__vite__mapDeps([76,1,2,17,9,10,11,12,18,65,22,23,26,5,16,66,45,46,47,48,20,21,49,50,32,33,13,14,51,52,8,15,53,54,55,6,7,19,24,25,27,28,29,56,3,4,30,31,34,35,57,58,59,60,61,39,40,41,43,38,62,69,63,64,70,71,72,73,74,75,36,37,42,44,67,68,77]),import.meta.url)),null,((Ae,ce)=>{var ue=d((()=>{var{default:he}=t(ce);return{GitAgentEditTab:he}})),ke=d((()=>t(ue).GitAgentEditTab)),re=P(),ie=b(re);be(ie,(()=>t(ke)),((he,de)=>{de(he,{})})),s(Ae,re)})),s(te,Ie)};k(we,(te=>{a().includes(mn.agentGitEdits)&&te($e)})),s(F,N)},$$slots:{default:!0}})})),s(B,M)},$$slots:{default:!0}}),(function(B,q){var M=cy(),W=_(M);et(W,(()=>q.children??pt)),s(B,M)})(f(x,2),{children:(B,q)=>{var M=hy(),W=b(M);dr(W,{get value(){return mn.messageHistory},forceMount:!0,children:(T,N)=>{ly(T,{get isActive(){return t($)}})},$$slots:{default:!0}});var U=f(W,2);dr(U,{get value(){return mn.tasks},children:(T,N)=>{Op(T,{})},$$slots:{default:!0}});var F=f(U,2);dr(F,{get value(){return mn.agentEdits},children:(T,N)=>{up(T,{})},$$slots:{default:!0}}),dr(f(F,2),{get value(){return mn.agentGitEdits},children:(T,N)=>{var J=P(),Y=b(J);Ds(Y,(()=>Ms((()=>import("./GitAgentEditTabContent-CHICxg86.js")),__vite__mapDeps([78,1,2,59,9,10,11,12,60,13,14,17,18,32,33,70,71,8,5,15,6,7,16,19,20,21,22,23,24,25,26,27,28,29,45,46,47,48,49,50,51,52,53,54,55,56,3,4,30,31,34,35,57,58,61,39,40,41,43,38,62,69,63,64,72,65,66,36,37,42,44,67,68,73,74,75,79]),import.meta.url)),null,((Q,X)=>{var ee=d((()=>{var{default:te}=t(X);return{GitAgentEditTab:te}})),se=d((()=>t(ee).GitAgentEditTab)),we=P(),$e=b(we);be($e,(()=>t(se)),((te,Ie)=>{Ie(te,{})})),s(Q,we)})),s(T,J)},$$slots:{default:!0}}),s(B,M)}}),s(j,R)},$$slots:{default:!0}}),s(z,K)};k(O,(z=>{G(E,"$shouldShowTabs",l)&&z(D)})),s(o,I),Ee(),c()}var _y=h('<div class="memory-queue-instance__edit-indicator">Memory is being edited.</div>'),yy=h('<li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Scope:</span> <span class="memory-queue-instance__metadata-value"> </span></li>'),by=h('<div class="memory-queue-instance__loading svelte-dg83pr" role="status" aria-live="polite"><!> <!></div>'),$y=h("<!> <!> <!>",1),wy=h('<div class="memory-queue-instance__content svelte-dg83pr"><h3 class="memory-queue-instance__label svelte-dg83pr"><!></h3> <!></div> <div class="memory-queue-instance__metadata svelte-dg83pr" aria-label="Memory metadata"><ul class="svelte-dg83pr"><!> <li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Created:</span> <span class="memory-queue-instance__metadata-value"> </span></li> <li class="svelte-dg83pr"><span class="memory-queue-instance__metadata-label svelte-dg83pr">Source:</span> <span class="memory-queue-instance__metadata-value"> </span></li></ul></div> <footer class="memory-queue-instance__actions svelte-dg83pr" role="group" aria-label="Memory actions"><!></footer>',1),ky=h('<div role="article"><!> <!> <!> <!></div>'),Ay=h('<form class="memory-editor svelte-17ndyoq"><div class="memory-editor__scope"><div class="memory-editor__memory"><h3 class="memory-editor__memory-label svelte-17ndyoq"><!></h3> <!></div> <footer class="memory-editor__actions svelte-17ndyoq" role="group" aria-label="Memory actions"><!> <!></footer></div></form>'),Cy=h(`Use <kbd class="memory-queue__navigation-icon svelte-21at3u">TAB</kbd> to navigate through the list, and save,
      reject or edit memories as you see fit.`,1),Ey=h('<div class="memory-queue__saved-callout__content svelte-21at3u"><div> </div></div>'),Ty=h('<div class="memory-queue__empty svelte-21at3u" role="status"><p class="memory-queue__empty-message svelte-21at3u">No memories remaining.</p> <!></div>'),Iy=h('<div class="memory-queue__item" role="listitem"><!></div>'),Sy=h('<div class="memory-queue__list svelte-21at3u" role="list"></div>'),xy=h('<header class="c-memory-queue__header svelte-21at3u"><div class="c-memory-queue__title-container svelte-21at3u"><!> <!></div> <div class="memory-queue__instructions"><!></div> <div class="memory-queue__open-memories"><!> <!></div> <!></header> <section class="memory-queue svelte-21at3u" aria-label="Memory queue"><!></section>',1);function Ry(o,e){async function n(x){await e.onSave(x),requestAnimationFrame((()=>{a()}))}async function r(x){await e.onDiscard(x),requestAnimationFrame((()=>{a()}))}function a(){const x=t(l).length;if(x===0)document.querySelector(".memory-queue__empty button")?.focus();else{const B=Math.min(t(y),x-1);document.querySelector(`.memory-queue__item:nth-child(${B+1}) .memory-queue-instance__actions button`)?.focus()}}Ce(e,!0);const i=()=>{an.postMessage({type:jt.openMemoriesFile})};let l=d((()=>e.memories.filter((x=>x.state==="pending"||x.state===void 0)))),c=d((()=>t(l).length?`${t(l).length} memories pending review`:"No memories to review")),u=Te(null);function g(x){Z(u,t(u)===x?null:x,!0)}let p=Te(0),y=Te(0),m=d((()=>e.memories.find((x=>x.id===t(u)))));Jt((()=>{t(l).length>0&&requestAnimationFrame((()=>{document.querySelector(".memory-queue__item .memory-queue-instance__actions button")?.focus()}))}));var v=xy(),w=b(v),E=_(w),A=_(E);Fe(A,{size:2,color:"primary",class:"c-memory-queue__title",children:(x,B)=>{var q=ae();ge((()=>qe(q,t(c)))),s(x,q)},$$slots:{default:!0}});var $=f(A,2);St($,{size:1,variant:"ghost-block",color:"neutral",title:"Close modal",get onclick(){return e.onClose},children:(x,B)=>{Se(x,{name:"x"})},$$slots:{default:!0}});var C=f(E,2),L=_(C);Fe(L,{size:1,color:"secondary",children:(x,B)=>{var q=Cy();s(x,q)},$$slots:{default:!0}});var S=f(C,2),I=_(S);Fe(I,{size:1,color:"secondary",children:(x,B)=>{var q=ae("View your currently saved memories");s(x,q)},$$slots:{default:!0}});var O=f(I,2);Et(O,{size:1,variant:"ghost",color:"neutral",onclick:i,iconRight:B=>{Se(B,{name:"external-link"})},$$slots:{iconRight:!0}});var D=f(S,2),z=x=>{hs(x,{variant:"soft",color:"info",size:1,class:"memory-queue__saved-callout",children:(B,q)=>{var M=Ey(),W=_(M),U=_(W);ge((()=>qe(U,`${t(p)??""}
          ${t(p)===1?"memory":"memories"} saved.`))),s(B,M)},$$slots:{default:!0}})};k(D,(x=>{t(p)>0&&x(z)}));var K=f(w,2),j=_(K),V=x=>{(function(B,q){Ce(q,!0);let M=Te(""),W=Te(void 0);const U=()=>{q.onSave(t(M).trim())},F=()=>{Z(M,q.memory.memory,!0),q.onCancel()};ot((()=>{q.memory&&Z(M,q.memory.memory,!0)})),Jt((()=>{t(W)&&t(W).focus()}));var T=Ay(),N=_(T),J=_(N),Y=_(J),Q=_(Y);Fe(Q,{size:1,color:"secondary",children:($e,te)=>{var Ie=ae("Memory");s($e,Ie)},$$slots:{default:!0}});var X=f(Y,2);pg(X,{rows:3,placeholder:"Edit memory...",onkeydown:$e=>{($e.ctrlKey||$e.metaKey)&&$e.key==="Enter"&&($e.preventDefault(),U()),$e.key==="Escape"&&($e.preventDefault(),F())},get textInput(){return t(W)},set textInput($e){Z(W,$e,!0)},get value(){return t(M)},set value($e){Z(M,$e,!0)}});var ee=f(J,2),se=_(ee);Et(se,{size:1,variant:"solid",color:"accent",type:"submit",iconLeft:te=>{Se(te,{name:"check"})},children:(te,Ie)=>{var me=ae("Save Memory");s(te,me)},$$slots:{iconLeft:!0,default:!0}});var we=f(se,2);Et(we,{size:1,variant:"ghost",color:"neutral",type:"button",onclick:F,children:($e,te)=>{var Ie=ae("Cancel");s($e,Ie)},$$slots:{default:!0}}),Ft("submit",T,($e=>{$e.preventDefault(),U()})),s(B,T),Ee()})(x,{get memory(){return t(m)},onSave:async B=>{await e.onMemoryUpdate(t(m).id,B),Z(u,null)},onCancel:()=>{g(t(m).id)}})},R=x=>{var B=P(),q=b(B),M=U=>{var F=Ty(),T=f(_(F),2);Et(T,{size:1,variant:"soft",color:"neutral",get onclick(){return e.onClose},children:(N,J)=>{var Y=ae("Return to Agent");s(N,Y)},$$slots:{default:!0}}),s(U,F)},W=U=>{var F=Sy();Pt(F,23,(()=>e.memories),(T=>T.id),((T,N,J)=>{var Y=Iy();Y.__focusin=()=>(function(Q){Z(y,Q,!0)})(t(J)),(function(Q,X){Ce(X,!0);let ee=H(X,"element",31,(()=>{})),se=H(X,"numberOfSavedMemories",15,0),we=Te(Dn(X.memory.state||"pending")),$e=Te(!1);function te(oe,ve){oe.key==="Enter"&&ve&&(oe.preventDefault(),ve())}async function Ie(){if(X.onSave){Z($e,!0);try{await X.onSave(X.memory.id),se(se()+1),Z(we,"accepted")}finally{Z($e,!1)}}}async function me(){if(X.onDiscard){Z($e,!0);try{await X.onDiscard(X.memory.id),Z(we,"rejected")}finally{Z($e,!1)}}}var Ae=ky();let ce;var ue=_(Ae),ke=oe=>{hs(oe,{variant:"soft",color:"success",size:1,role:"status","aria-live":"polite",icon:ye=>{Se(ye,{name:"check"})},children:(ye,Ne)=>{var Re=ae("Memory has been saved.");s(ye,Re)},$$slots:{icon:!0,default:!0}})};k(ue,(oe=>{t(we)==="accepted"&&oe(ke)}));var re=f(ue,2),ie=oe=>{hs(oe,{variant:"soft",color:"error",size:1,role:"status","aria-live":"polite",icon:ye=>{Se(ye,{name:"check"})},children:(ye,Ne)=>{var Re=ae("Memory has been rejected.");s(ye,Re)},$$slots:{icon:!0,default:!0}})};k(re,(oe=>{t(we)==="rejected"&&oe(ie)}));var he=f(re,2),de=oe=>{var ve=_y();s(oe,ve)};k(he,(oe=>{t(we)==="editing"&&oe(de)}));var le=f(he,2),_e=oe=>{var ve=wy(),ye=b(ve),Ne=_(ye),Re=_(Ne);Fe(Re,{size:1,color:"secondary",children:(Ke,vt)=>{var dt=ae("Memory");s(Ke,dt)},$$slots:{default:!0}});var Oe=f(Ne,2);Fe(Oe,{color:"primary",size:1,children:(Ke,vt)=>{var dt=ae();ge((()=>qe(dt,X.memory.memory))),s(Ke,dt)},$$slots:{default:!0}});var Be=f(ye,2),Ge=_(Be),xe=_(Ge),ze=Ke=>{var vt=yy(),dt=f(_(vt),2),yt=_(dt);ge((()=>qe(yt,X.memory.scope))),s(Ke,vt)};k(xe,(Ke=>{X.memory.scope&&Ke(ze)}));var He=f(xe,2),Le=f(_(He),2),De=_(Le),pe=f(He,2),fe=f(_(pe),2),Pe=_(fe),We=f(Be,2),Ye=_(We),Qe=Ke=>{var vt=by(),dt=_(vt);Vn(dt,{size:1});var yt=f(dt,2);Fe(yt,{size:1,color:"secondary",children:(Ve,ne)=>{var Me=ae("Processing...");s(Ve,Me)},$$slots:{default:!0}}),s(Ke,vt)},st=Ke=>{var vt=$y(),dt=b(vt),yt=Je=>{Et(Je,{size:1,color:"accent",variant:"soft",onclick:Ie,onkeydown:Ze=>te(Ze,Ie),"aria-label":"Save memory",iconLeft:Ze=>{Se(Ze,{name:"check"})},children:(Ze,bt)=>{var Bt=ae("Save");s(Ze,Bt)},$$slots:{iconLeft:!0,default:!0}})};k(dt,(Je=>{X.onSave&&Je(yt)}));var Ve=f(dt,2),ne=Je=>{Et(Je,{size:1,color:"error",variant:"soft",onclick:me,onkeydown:Ze=>te(Ze,me),"aria-label":"Discard memory",iconLeft:Ze=>{Se(Ze,{name:"x"})},children:(Ze,bt)=>{var Bt=ae("Discard");s(Ze,Bt)},$$slots:{iconLeft:!0,default:!0}})};k(Ve,(Je=>{X.onDiscard&&Je(ne)}));var Me=f(Ve,2),Ue=Je=>{Et(Je,{size:1,color:"neutral",variant:"ghost",get onclick(){return X.toggleEditMode},onkeydown:Ze=>te(Ze,X.toggleEditMode),"aria-label":"Edit memory",iconLeft:Ze=>{Se(Ze,{name:"pencil"})},children:(Ze,bt)=>{var Bt=ae("Edit");s(Ze,Bt)},$$slots:{iconLeft:!0,default:!0}})};k(Me,(Je=>{X.toggleEditMode&&Je(Ue)})),s(Ke,vt)};k(Ye,(Ke=>{t($e)?Ke(Qe):Ke(st,!1)})),ge((Ke=>{qe(De,Ke),qe(Pe,X.memory.source)}),[()=>new Date(X.memory.created).toLocaleDateString()]),s(oe,ve)};k(le,(oe=>{t(we)==="pending"&&oe(_e)})),Dt(Ae,(oe=>ee(oe)),(()=>ee())),ge((()=>{nt(Ae,"aria-labelledby",`memory-${X.memory.id??""}-title`),ce=ct(Ae,1,"svelte-dg83pr",null,ce,{"memory-queue-instance__callout":t(we)==="accepted"||t(we)==="rejected","memory-queue-instance__pending":t(we)==="pending","memory-queue-instance__editing":t(we)==="editing"})})),s(Q,Ae),Ee()})(_(Y),{get memory(){return t(N)},onSave:n,onDiscard:r,toggleEditMode:()=>g(t(N).id),get numberOfSavedMemories(){return t(p)},set numberOfSavedMemories(Q){Z(p,Q,!0)}}),s(T,Y)})),s(U,F)};k(q,(U=>{t(l).length===0?U(M):U(W,!1)}),!0),s(x,B)};k(j,(x=>{t(m)?x(V):x(R,!1)})),s(o,v),Ee()}gn(["focusin"]);var My=h('<div class="c-memory-dropdown__loading svelte-1dx08at">Loading memories...</div>'),Dy=h('<div class="c-memory-dropdown__content svelte-1dx08at"><!></div>');function zy(o,e){Ce(e,!0);const n=()=>G(l,"$memories",r),[r,a]=Xe(),i=ut(),l=Tu(),c=Iu();async function u(A){i(Ur(A,"accepted"))}async function g(A){i(Ur(A,"rejected"))}async function p(A,$){i(Ur(A,"pending",$))}let y=d((()=>n().map((A=>({id:A.id,state:A.state,memory:A.content,scope:void 0,source:"Agent",created:A.timestamp})))));var m=Dy(),v=_(m),w=A=>{var $=My();s(A,$)},E=A=>{Ry(A,{get memories(){return t(y)},onSave:u,onDiscard:g,onMemoryUpdate:p,get onClose(){return e.onClose}})};k(v,(A=>{G(c,"$isLoading",r)&&n().length===0?A(w):A(E,!1)})),s(o,m),Ee(),a()}const Pl=Symbol("full-size-overlay");var Ny=h('<div class="c-memory-modal__content svelte-1ji12qo"><!></div>');function Oy(o,e){Ce(e,!1);const{close:n}=Tt(Pl);Kn();var r=Ny();zy(_(r),{get onClose(){return n}}),s(o,r),Ee()}var Ly=h('<div class="c-new-chat-empty__header svelte-b1qp3q"><div class="c-new-chat-empty__header-icon svelte-b1qp3q"><!></div> <!></div>'),Py=h('<div class="l-input-area-design-system svelte-dw2toi"><!></div>'),By=h('<div class="l-center-contents-empty svelte-dw2toi" data-testid="l-lazy-message-list-center-contents"><!></div>'),Fy=h("<!> <!> <!>",1);function qy(o,e){Ce(e,!0);const[n,r]=Xe(),a=ln(),i=jn(a);let l=ki(a),c=d((()=>`${G(a,"$currentConversationId",n)}-conversation`)),u=Te(void 0);var g=Fy(),p=b(g);cs(p,{get target(){return`#${Sn.divider}`},children:(v,w)=>{Nl(v,{get inputArea(){return t(u)},set inputArea(E){Z(u,E,!0)}})},$$slots:{default:!0}});var y=f(p,2);cs(y,{get target(){return`#${Sn.input}`},children:(v,w)=>{var E=Py();Ol(_(E),{placeholder:"Ask a question through chat"}),Dt(E,(A=>Z(u,A)),(()=>t(u))),s(v,E)},$$slots:{default:!0}});var m=f(y,2);fs(m,(()=>t(c)),(v=>{var w=P(),E=b(w),A=C=>{var L=By(),S=_(L),I=D=>{zl(D)},O=D=>{(function(z){On(z,{header:j=>{var V=Ly(),R=_(V),x=_(R);Se(x,{name:"message-square",size:2});var B=f(R,2);Fe(B,{color:"primary",size:4,children:(q,M)=>{var W=ae("New Chat Thread");s(q,W)},$$slots:{default:!0}}),s(j,V)},children:(j,V)=>{Fe(j,{size:1,variant:"surface",children:(R,x)=>{var B=ae("Ask questions and plan with codebase awareness.");s(R,B)},$$slots:{default:!0}})},$$slots:{header:!0,default:!0}})})(D)};k(S,(D=>{G(i,"$isAgentic",n)?D(I):D(O,!1)})),s(C,L)},$=C=>{Dl(C,{})};k(E,(C=>{G(l,"$isEmptyConversation",n)?C(A):C($,!1)})),s(v,w)})),s(o,g),Ee(),r()}var Hy=h("<div><!></div>");function Wy(o,e){Ce(e,!1);const[n,r]=Xe(),a=Su();Kn();var i=P(),l=b(i),c=u=>{var g=Hy(),p=_(g);hs(p,{color:"error",variant:"surface",size:1,icon:m=>{Se(m,{name:"ban"})},children:(m,v)=>{var w=ae("Syncing disabled");s(m,w)},$$slots:{icon:!0,default:!0}}),Zt(7,g,(()=>ns),(()=>({y:-5,duration:250,opacity:0}))),s(u,g)};k(l,(u=>{G(a,"$syncEnabledState",n)===xu.disabled&&u(c)})),s(o,i),Ee(),r()}var Gy=h('<div class="c-sync-progress-bar__duration svelte-5p1b4g"><!> </div>'),Uy=h('<div class="c-sync-progress-bar__message svelte-5p1b4g"> <!></div>'),Vy=h('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),jy=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ky=h('<div class="c-sync-progress-bar svelte-5p1b4g"><div class="c-sync-status--spin-icon svelte-5p1b4g"><!></div> <!> <!> <!></div>'),Yy=h("<div><!></div>");function Xy(o,e){Ce(e,!0);const n=()=>G(c,"$progress",a),r=()=>G(u,"$percentage",a),[a,i]=Xe();let l=H(e,"showDoneBanner",7,!1);const c=yo(),u=$i(),g=d((()=>{return A=n()?.syncDuration,A?Math.floor(A/1e3):0;var A}));let p=Te(!1);const y=d((()=>n()?`Finished indexing ${n().syncedCount.toLocaleString()} Files!`:"Codebase Indexing Complete!"));ot((()=>{if(t(p)&&n()?.status===bs.done){l(!0);const A=setTimeout((()=>{Z(p,!1),l(!1)}),5e3);return()=>{clearTimeout(A)}}n()&&n().status!==bs.done&&(n().status===bs.longRunning||n().hasNewlyTrackedFolders)&&Z(p,!0)}));const m=d((()=>t(p)&&!n()?.isInitialIndexing||l()));var v=P(),w=b(v),E=A=>{var $=Yy(),C=_($),L=I=>{var O=Vy(),D=_(O);{const z=K=>{Se(K,{name:"check"})};zs(D,(()=>({"--callout-width":"100%"}))),hs(D.lastChild,{color:"accent",variant:"surface",size:1,icon:z,children:(K,j)=>{var V=Uy(),R=_(V),x=f(R),B=q=>{var M=Gy(),W=_(M);Se(W,{name:"clock"});var U=f(W);ge((()=>qe(U,` ${t(g)??""}s`))),s(q,M)};k(x,(q=>{t(g)&&q(B)})),ge((()=>qe(R,`${t(y)??""} `))),s(K,V)},$$slots:{icon:!0,default:!0}})}Zt(3,O,(()=>ns),(()=>({y:-5,duration:250,opacity:0}))),s(I,O)},S=I=>{var O=P(),D=b(O),z=K=>{var j=Ky(),V=_(j),R=_(V);Se(R,{name:"refresh-ccw",size:2});var x=f(V,2);Fe(x,{size:1,children:(W,U)=>{var F=ae("Indexing...");s(W,F)},$$slots:{default:!0}});var B=f(x,2);{let W=d((()=>n()?.indeterminate));Gi(B,{get value(){return r()},get indeterminate(){return t(W)}})}var q=f(B,2),M=W=>{var U=jy(),F=b(U);zs(F,(()=>({"--text-color":"var(--ds-color-accent-a11)"}))),Fe(F.lastChild,{size:1,color:"accent",children:(T,N)=>{var J=ae();ge((()=>qe(J,`${r()??""}%`))),s(T,J)},$$slots:{default:!0}}),s(W,U)};k(q,(W=>{n()?.indeterminate||W(M)})),Zt(1,j,(()=>ns),(()=>({y:-5,duration:250,opacity:0}))),s(K,j)};k(D,(K=>{n()?.status!==bs.done&&K(z)}),!0),s(I,O)};k(C,(I=>{n()?.status===bs.done&&l()?I(L):I(S,!1)})),Zt(3,$,(()=>ns),(()=>({y:-5,duration:250,opacity:0}))),s(A,$)};k(w,(A=>{t(m)&&A(E)})),s(o,v),Ee(),i()}var Jy=h('<div class="l-status-bars svelte-1hktxgr"><!> <!></div>');const Bl="vscode-version-warning-hide-for-session";class Qy{constructor(e,n,r){this._reduxStore=e,this._config=n,this._remoteAgentsModel=r,this._showVSCodeVersionWarning=At([this._config.isVscodeVersionOutdated,this._vscodeVersionWarningDismissed],(([a,i])=>a&&!i&&!(function(){try{const l=sessionStorage.getItem(Bl);return!!l&&JSON.parse(l).hideForSession===!0}catch(l){return console.error("Failed to read VSCode version warning preference from sessionStorage:",l),!1}})())),this._showConversationHistoryWarning=At([this._remoteAgentsModel,this._conversationHistoryBannerDismissedAt,this._config.conversationHistorySizeThresholdBytes],(([a,i])=>!(!vc()||(function(){try{const l=sessionStorage.getItem("conversation-history-warning-hide-for-session");return!!l&&JSON.parse(l).hideForSession===!0}catch(l){return console.error("Failed to read conversation history warning preference from sessionStorage:",l),!1}})()||a.isActive||i>0&&Date.now()-i<36e5))),this._showRemoteAgentDeletionWarning=At([this._remoteAgentsModel,this._config.remoteAgentsResumeHintAvailableTtlDays],(([a,i])=>{if(!a.isActive)return!1;const l=a.currentAgent;return!!l&&nl(l,i)}))}_showVSCodeVersionWarning;_vscodeVersionWarningDismissed=Xt(!1);_showConversationHistoryWarning;_conversationHistoryBannerDismissedAt=Xt(0);_showRemoteAgentDeletionWarning;get showVSCodeVersionWarning(){return this._showVSCodeVersionWarning}get showConversationHistoryWarning(){return this._showConversationHistoryWarning}get showRemoteAgentDeletionWarning(){return this._showRemoteAgentDeletionWarning}dismissVSCodeVersionWarning(){this._vscodeVersionWarningDismissed.set(!0)}dismissConversationHistoryWarning(){this._conversationHistoryBannerDismissedAt.set(Date.now())}}const Zy=Array(12).fill(0);var eb=h('<div class="sonner-loading-bar"></div>'),tb=h('<div><div class="sonner-spinner"></div></div>');function Xn(...o){return o.filter(Boolean).join(" ")}const nb=typeof document<"u",sb=typeof window<"u"?window:void 0;new class{#t;#e;constructor(o={}){const{window:e=sb,document:n=e?.document}=o;e!==void 0&&(this.#t=n,this.#e=gc((r=>{const a=yr(e,"focusin",r),i=yr(e,"focusout",r);return()=>{a(),i()}})))}get current(){return this.#e?.(),this.#t?(function(o){let e=o.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e})(this.#t):null}};const rb=new class{#t;#e;constructor(o){this.#t=o,this.#e=Symbol(o)}get key(){return this.#e}exists(){return hc(this.#e)}get(){const o=Tt(this.#e);if(o===void 0)throw new Error(`Context "${this.#t}" not found`);return o}getOr(o){const e=Tt(this.#e);return e===void 0?o:e}set(o){return Rn(this.#e,o)}}("<Toaster/>");let Ra=0;const Yt=new class{#t=Te(Dn([]));get toasts(){return t(this.#t)}set toasts(o){Z(this.#t,o,!0)}#e=Te(Dn([]));get heights(){return t(this.#e)}set heights(o){Z(this.#e,o,!0)}#n=o=>{const e=this.toasts.findIndex((n=>n.id===o));return e===-1?null:e};addToast=o=>{nb&&this.toasts.unshift(o)};updateToast=({id:o,data:e,type:n,message:r})=>{const a=this.toasts.findIndex((l=>l.id===o)),i=this.toasts[a];this.toasts[a]={...i,...e,id:o,title:r,type:n,updated:!0}};create=o=>{const{message:e,...n}=o,r=typeof o?.id=="number"||o.id&&o.id?.length>0?o.id:Ra++,a=o.dismissable===void 0||o.dismissable,i=o.type===void 0?"default":o.type;return xs((()=>{this.toasts.find((c=>c.id===r))?this.updateToast({id:r,data:o,type:i,message:e,dismissable:a}):this.addToast({...n,id:r,title:e,dismissable:a,type:i})})),r};dismiss=o=>(xs((()=>{if(o===void 0)return void(this.toasts=this.toasts.map((n=>({...n,dismiss:!0}))));const e=this.toasts.findIndex((n=>n.id===o));this.toasts[e]&&(this.toasts[e]={...this.toasts[e],dismiss:!0})})),o);remove=o=>{if(o===void 0)return void(this.toasts=[]);const e=this.#n(o);return e!==null?(this.toasts.splice(e,1),o):void 0};message=(o,e)=>this.create({...e,type:"default",message:o});error=(o,e)=>this.create({...e,type:"error",message:o});success=(o,e)=>this.create({...e,type:"success",message:o});info=(o,e)=>this.create({...e,type:"info",message:o});warning=(o,e)=>this.create({...e,type:"warning",message:o});loading=(o,e)=>this.create({...e,type:"loading",message:o});promise=(o,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:o,type:"loading",message:typeof e.loading=="string"?e.loading:e.loading()}));const r=o instanceof Promise?o:o();let a=n!==void 0;return r.then((i=>{if(typeof i=="object"&&i&&"ok"in i&&typeof i.ok=="boolean"&&!i.ok){a=!1;const l=(function(c){return c&&typeof c=="object"&&"status"in c?`HTTP error! Status: ${c.status}`:`Error! ${c}`})(i);this.create({id:n,type:"error",message:l})}else if(e.success!==void 0){a=!1;const l=typeof e.success=="function"?e.success(i):e.success;this.create({id:n,type:"success",message:l})}})).catch((i=>{if(e.error!==void 0){a=!1;const l=typeof e.error=="function"?e.error(i):e.error;this.create({id:n,type:"error",message:l})}})).finally((()=>{a&&(this.dismiss(n),n=void 0),e.finally?.()})),n};custom=(o,e)=>{const n=e?.id||Ra++;return this.create({component:o,id:n,...e}),n};removeHeight=o=>{this.heights=this.heights.filter((e=>e.toastId!==o))};setHeight=o=>{const e=this.#n(o.toastId);e!==null?this.heights[e]=o:this.heights.push(o)};reset=()=>{this.toasts=[],this.heights=[]}};class ob{#t=d((()=>Yt.toasts.filter((e=>!e.dismiss))));get toasts(){return t(this.#t)}}const ab=function(o,e){return Yt.create({message:o,...e})},ws=Object.assign(ab,{success:Yt.success,info:Yt.info,warning:Yt.warning,error:Yt.error,custom:Yt.custom,message:Yt.message,promise:Yt.promise,dismiss:Yt.dismiss,loading:Yt.loading,getActiveToasts:()=>Yt.toasts.filter((o=>!o.dismiss))});function vr(o){return o.label!==void 0}const Ma=4e3,ib=14,lb=45,cb=200,db=.05,ub={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""};function Da(o){return 1/(1.5+Math.abs(o)/20)}var vb=h("<div><!></div>"),gb=h('<button data-close-button=""><!></button>'),hb=h('<div data-icon=""><!> <!></div>'),mb=h('<div data-description=""><!></div>'),pb=h('<button data-button="" data-cancel=""> </button>'),fb=h('<button data-button=""> </button>'),_b=h('<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>',1),yb=h('<li data-sonner-toast=""><!> <!></li>');function bb(o,e){Ce(e,!0);const n=re=>{var ie=P(),he=b(ie),de=_e=>{var oe=vb(),ve=_(oe);et(ve,(()=>e.loadingIcon)),ge((ye=>{ct(oe,1,ye),nt(oe,"data-visible",t(O)==="loading")}),[()=>$n(Xn(t(F)?.loader,e.toast?.classes?.loader,"sonner-loader"))]),s(_e,oe)},le=_e=>{{let oe=d((()=>Xn(t(F)?.loader,e.toast.classes?.loader))),ve=d((()=>t(O)==="loading"));(function(ye,Ne){Ce(Ne,!0);var Re=tb(),Oe=_(Re);Pt(Oe,23,(()=>Zy),((Be,Ge)=>`spinner-bar-${Ge}`),((Be,Ge)=>{var xe=eb();s(Be,xe)})),ge((Be=>{ct(Re,1,Be),nt(Re,"data-visible",Ne.visible)}),[()=>$n(["sonner-loading-wrapper",Ne.class].filter(Boolean).join(" "))]),s(ye,Re),Ee()})(_e,{get class(){return t(oe)},get visible(){return t(ve)}})}};k(he,(_e=>{e.loadingIcon?_e(de):_e(le,!1)})),s(re,ie)};let r=H(e,"cancelButtonStyle",3,""),a=H(e,"actionButtonStyle",3,""),i=H(e,"descriptionClass",3,""),l=H(e,"unstyled",3,!1),c=H(e,"defaultRichColors",3,!1);const u={...ub};let g=Te(!1),p=Te(!1),y=Te(!1),m=Te(!1),v=Te(!1),w=Te(0),E=Te(0),A=e.toast.duration||e.duration||Ma,$=Te(void 0),C=Te(null),L=Te(null);const S=d((()=>e.index===0)),I=d((()=>e.index+1<=e.visibleToasts)),O=d((()=>e.toast.type)),D=d((()=>e.toast.dismissable!==!1)),z=d((()=>e.toast.class||"")),K=d((()=>e.toast.descriptionClass||"")),j=d((()=>Yt.heights.findIndex((re=>re.toastId===e.toast.id))||0)),V=d((()=>e.toast.closeButton??e.closeButton)),R=d((()=>e.toast.duration??e.duration??Ma));let x=null;const B=d((()=>e.position.split("-"))),q=d((()=>Yt.heights.reduce(((re,ie,he)=>he>=t(j)?re:re+ie.height),0))),M=(function(){let re=Te(Dn(typeof document<"u"&&document.hidden));return ot((()=>yr(document,"visibilitychange",(()=>{Z(re,document.hidden,!0)})))),{get current(){return t(re)}}})(),W=d((()=>e.toast.invert||e.invert)),U=d((()=>t(O)==="loading")),F=d((()=>({...u,...e.classes}))),T=d((()=>e.toast.title)),N=d((()=>e.toast.description));let J=Te(0),Y=Te(0);const Q=d((()=>Math.round(t(j)*ib+t(q))));function X(){Z(p,!0),Z(w,t(Q),!0),Yt.removeHeight(e.toast.id),setTimeout((()=>{Yt.remove(e.toast.id)}),cb)}let ee;ot((()=>{let re;t(T),t(N),re=e.expanded||e.expandByDefault?1:1-e.index*db;const ie=xs((()=>t($)));if(ie===void 0)return;ie.style.setProperty("height","auto");const he=ie.offsetHeight,de=ie.getBoundingClientRect().height,le=Math.round(de/re+Number.EPSILON&100)/100;let _e;ie.style.removeProperty("height"),_e=Math.abs(le-he)<1?le:he,Z(E,_e,!0),Yt.setHeight({toastId:e.toast.id,height:_e})}));const se=d((()=>e.toast.promise&&t(O)==="loading"||e.toast.duration===Number.POSITIVE_INFINITY));function we(){Z(J,new Date().getTime(),!0),ee=setTimeout((()=>{e.toast.onAutoClose?.(e.toast),X()}),A)}ot((()=>{e.toast.updated&&(clearTimeout(ee),A=t(R),we())})),ot((()=>(t(se)||(e.expanded||e.interacting||M.current?(function(){if(t(Y)<t(J)){const re=new Date().getTime()-t(J);A-=re}Z(Y,new Date().getTime(),!0)})():we()),()=>clearTimeout(ee)))),Jt((()=>{Z(g,!0);const re=t($)?.getBoundingClientRect().height;return Z(E,re,!0),Yt.setHeight({toastId:e.toast.id,height:re}),()=>{Yt.removeHeight(e.toast.id)}})),ot((()=>{e.toast.delete&&xs((()=>{X(),e.toast.onDismiss?.(e.toast)}))}));const $e=d((()=>e.toast.icon?e.toast.icon:t(O)==="success"?e.successIcon:t(O)==="error"?e.errorIcon:t(O)==="warning"?e.warningIcon:t(O)==="info"?e.infoIcon:t(O)==="loading"?e.loadingIcon:null));var te=yb();let Ie;nt(te,"tabindex",0),te.__pointermove=re=>{if(!x||!t(D)||(window.getSelection()?.toString().length??-1)>0)return;const ie=re.clientY-x.y,he=re.clientX-x.x,de=e.swipeDirections??(function(_e){const[oe,ve]=_e.split("-"),ye=[];return oe&&ye.push(oe),ve&&ye.push(ve),ye})(e.position);!t(C)&&(Math.abs(he)>1||Math.abs(ie)>1)&&Z(C,Math.abs(he)>Math.abs(ie)?"x":"y",!0);let le={x:0,y:0};if(t(C)==="y"){if(de.includes("top")||de.includes("bottom"))if(de.includes("top")&&ie<0||de.includes("bottom")&&ie>0)le.y=ie;else{const _e=ie*Da(ie);le.y=Math.abs(_e)<Math.abs(ie)?_e:ie}}else if(t(C)==="x"&&(de.includes("left")||de.includes("right")))if(de.includes("left")&&he<0||de.includes("right")&&he>0)le.x=he;else{const _e=he*Da(he);le.x=Math.abs(_e)<Math.abs(he)?_e:he}(Math.abs(le.x)>0||Math.abs(le.y)>0)&&Z(v,!0),t($)?.style.setProperty("--swipe-amount-x",`${le.x}px`),t($)?.style.setProperty("--swipe-amount-y",`${le.y}px`)},te.__pointerup=()=>{if(t(m)||!t(D))return;x=null;const re=Number(t($)?.style.getPropertyValue("--swipe-amount-x").replace("px","")||0),ie=Number(t($)?.style.getPropertyValue("--swipe-amount-y").replace("px","")||0),he=new Date().getTime()-0,de=t(C)==="x"?re:ie,le=Math.abs(de)/he;if(Math.abs(de)>=lb||le>.11)return Z(w,t(Q),!0),e.toast.onDismiss?.(e.toast),t(C)==="x"?Z(L,re>0?"right":"left",!0):Z(L,ie>0?"down":"up",!0),X(),void Z(m,!0);t($)?.style.setProperty("--swipe-amount-x","0px"),t($)?.style.setProperty("--swipe-amount-y","0px"),Z(v,!1),Z(y,!1),Z(C,null)},te.__pointerdown=re=>{if(t(U))return;Z(w,t(Q),!0);const ie=re.target;ie.setPointerCapture(re.pointerId),ie.tagName!=="BUTTON"&&(Z(y,!0),x={x:re.clientX,y:re.clientY})};var me=_(te),Ae=re=>{var ie=gb();ie.__click=()=>{!t(U)&&t(D)&&(X(),e.toast.onDismiss?.(e.toast))};var he=_(ie);et(he,(()=>e.closeIcon??pt)),ge((de=>{nt(ie,"aria-label",e.closeButtonAriaLabel),nt(ie,"data-disabled",t(U)),ct(ie,1,de)}),[()=>$n(Xn(t(F)?.closeButton,e.toast?.classes?.closeButton))]),s(re,ie)};k(me,(re=>{t(V)&&!e.toast.component&&t(O)!=="loading"&&e.closeIcon!==null&&re(Ae)}));var ce=f(me,2),ue=re=>{const ie=d((()=>e.toast.component));var he=P(),de=b(he);be(de,(()=>t(ie)),((le,_e)=>{_e(le,es((()=>e.toast.componentProps),{closeToast:X}))})),s(re,he)},ke=re=>{var ie=_b(),he=b(ie),de=xe=>{var ze=hb(),He=_(ze),Le=fe=>{var Pe=P(),We=b(Pe),Ye=st=>{var Ke=P(),vt=b(Ke);be(vt,(()=>e.toast.icon),((dt,yt)=>{yt(dt,{})})),s(st,Ke)},Qe=st=>{n(st)};k(We,(st=>{e.toast.icon?st(Ye):st(Qe,!1)})),s(fe,Pe)};k(He,(fe=>{(e.toast.promise||t(O)==="loading")&&fe(Le)}));var De=f(He,2),pe=fe=>{var Pe=P(),We=b(Pe),Ye=st=>{var Ke=P(),vt=b(Ke);be(vt,(()=>e.toast.icon),((dt,yt)=>{yt(dt,{})})),s(st,Ke)},Qe=st=>{var Ke=P(),vt=b(Ke),dt=Ve=>{var ne=P(),Me=b(ne);et(Me,(()=>e.successIcon??pt)),s(Ve,ne)},yt=Ve=>{var ne=P(),Me=b(ne),Ue=rt=>{var Ze=P(),bt=b(Ze);et(bt,(()=>e.errorIcon??pt)),s(rt,Ze)},Je=rt=>{var Ze=P(),bt=b(Ze),Bt=Qt=>{var Kt=P(),xt=b(Kt);et(xt,(()=>e.warningIcon??pt)),s(Qt,Kt)},Vt=Qt=>{var Kt=P(),xt=b(Kt),_t=kt=>{var gt=P(),Rt=b(gt);et(Rt,(()=>e.infoIcon??pt)),s(kt,gt)};k(xt,(kt=>{t(O)==="info"&&kt(_t)}),!0),s(Qt,Kt)};k(bt,(Qt=>{t(O)==="warning"?Qt(Bt):Qt(Vt,!1)}),!0),s(rt,Ze)};k(Me,(rt=>{t(O)==="error"?rt(Ue):rt(Je,!1)}),!0),s(Ve,ne)};k(vt,(Ve=>{t(O)==="success"?Ve(dt):Ve(yt,!1)}),!0),s(st,Ke)};k(We,(st=>{e.toast.icon?st(Ye):st(Qe,!1)})),s(fe,Pe)};k(De,(fe=>{e.toast.type!=="loading"&&fe(pe)})),ge((fe=>ct(ze,1,fe)),[()=>$n(Xn(t(F)?.icon,e.toast?.classes?.icon))]),s(xe,ze)};k(he,(xe=>{(t(O)||e.toast.icon||e.toast.promise)&&e.toast.icon!==null&&(t($e)!==null||e.toast.icon)&&xe(de)}));var le=f(he,2),_e=_(le),oe=_(_e),ve=xe=>{var ze=P(),He=b(ze),Le=pe=>{const fe=d((()=>e.toast.title));var Pe=P(),We=b(Pe);be(We,(()=>t(fe)),((Ye,Qe)=>{Qe(Ye,es((()=>e.toast.componentProps)))})),s(pe,Pe)},De=pe=>{var fe=ae();ge((()=>qe(fe,e.toast.title))),s(pe,fe)};k(He,(pe=>{typeof e.toast.title!="string"?pe(Le):pe(De,!1)})),s(xe,ze)};k(oe,(xe=>{e.toast.title&&xe(ve)}));var ye=f(_e,2),Ne=xe=>{var ze=mb(),He=_(ze),Le=pe=>{const fe=d((()=>e.toast.description));var Pe=P(),We=b(Pe);be(We,(()=>t(fe)),((Ye,Qe)=>{Qe(Ye,es((()=>e.toast.componentProps)))})),s(pe,Pe)},De=pe=>{var fe=ae();ge((()=>qe(fe,e.toast.description))),s(pe,fe)};k(He,(pe=>{typeof e.toast.description!="string"?pe(Le):pe(De,!1)})),ge((pe=>ct(ze,1,pe)),[()=>$n(Xn(i(),t(K),t(F)?.description,e.toast.classes?.description))]),s(xe,ze)};k(ye,(xe=>{e.toast.description&&xe(Ne)}));var Re=f(le,2),Oe=xe=>{var ze=P(),He=b(ze),Le=pe=>{var fe=P(),Pe=b(fe);be(Pe,(()=>e.toast.cancel),((We,Ye)=>{Ye(We,{})})),s(pe,fe)},De=pe=>{var fe=P(),Pe=b(fe),We=Ye=>{var Qe=pb();Qe.__click=Ke=>{vr(e.toast.cancel)&&t(D)&&(e.toast.cancel?.onClick?.(Ke),X())};var st=_(Qe);ge((Ke=>{Un(Qe,e.toast.cancelButtonStyle??r()),ct(Qe,1,Ke),qe(st,e.toast.cancel.label)}),[()=>$n(Xn(t(F)?.cancelButton,e.toast?.classes?.cancelButton))]),s(Ye,Qe)};k(Pe,(Ye=>{vr(e.toast.cancel)&&Ye(We)}),!0),s(pe,fe)};k(He,(pe=>{typeof e.toast.cancel=="function"?pe(Le):pe(De,!1)})),s(xe,ze)};k(Re,(xe=>{e.toast.cancel&&xe(Oe)}));var Be=f(Re,2),Ge=xe=>{var ze=P(),He=b(ze),Le=pe=>{var fe=P(),Pe=b(fe);be(Pe,(()=>e.toast.action),((We,Ye)=>{Ye(We,{})})),s(pe,fe)},De=pe=>{var fe=P(),Pe=b(fe),We=Ye=>{var Qe=fb();Qe.__click=Ke=>{vr(e.toast.action)&&(e.toast.action?.onClick(Ke),Ke.defaultPrevented||X())};var st=_(Qe);ge((Ke=>{Un(Qe,e.toast.actionButtonStyle??a()),ct(Qe,1,Ke),qe(st,e.toast.action.label)}),[()=>$n(Xn(t(F)?.actionButton,e.toast?.classes?.actionButton))]),s(Ye,Qe)};k(Pe,(Ye=>{vr(e.toast.action)&&Ye(We)}),!0),s(pe,fe)};k(He,(pe=>{typeof e.toast.action=="function"?pe(Le):pe(De,!1)})),s(xe,ze)};k(Be,(xe=>{e.toast.action&&xe(Ge)})),ge((xe=>ct(_e,1,xe)),[()=>$n(Xn(t(F)?.title,e.toast?.classes?.title))]),s(re,ie)};k(ce,(re=>{e.toast.component?re(ue):re(ke,!1)})),Dt(te,(re=>Z($,re)),(()=>t($))),ge(((re,ie,he)=>{ct(te,1,re),nt(te,"data-rich-colors",e.toast.richColors??c()),nt(te,"data-styled",!(e.toast.component||e.toast.unstyled||l())),nt(te,"data-mounted",t(g)),nt(te,"data-promise",ie),nt(te,"data-swiped",t(v)),nt(te,"data-removed",t(p)),nt(te,"data-visible",t(I)),nt(te,"data-y-position",t(B)[0]),nt(te,"data-x-position",t(B)[1]),nt(te,"data-index",e.index),nt(te,"data-front",t(S)),nt(te,"data-swiping",t(y)),nt(te,"data-dismissable",t(D)),nt(te,"data-type",t(O)),nt(te,"data-invert",t(W)),nt(te,"data-swipe-out",t(m)),nt(te,"data-swipe-direction",t(L)),nt(te,"data-expanded",he),Ie=Un(te,`${e.style} ${e.toast.style}`,Ie,{"--index":e.index,"--toasts-before":e.index,"--z-index":Yt.toasts.length-e.index,"--offset":`${t(p)?t(w):t(Q)}px`,"--initial-height":e.expandByDefault?"auto":`${t(E)}px`})}),[()=>$n(Xn(e.class,t(z),t(F)?.toast,e.toast?.classes?.toast,t(F)?.[t(O)],e.toast?.classes?.[t(O)])),()=>!!e.toast.promise,()=>!!(e.expanded||e.expandByDefault&&t(g))]),Ft("dragend",te,(()=>{Z(y,!1),Z(C,null),x=null})),s(o,te),Ee()}gn(["pointermove","pointerup","pointerdown","click"]);var $b=ps('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>'),wb=ps('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>'),kb=ps('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>'),Ab=ps('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>'),Cb=ps('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');const Eb=3,za="24px",Na="16px",Tb=4e3,Ib=356,Sb=14,Xr="dark",Jr="light";var xb=h("<ol></ol>"),Rb=h('<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-6orm0"><!></section>');function Mb(o,e){Ce(e,!0);let n=H(e,"invert",3,!1),r=H(e,"position",3,"bottom-right"),a=H(e,"hotkey",19,(()=>["altKey","KeyT"])),i=H(e,"expand",3,!1),l=H(e,"closeButton",3,!1),c=H(e,"offset",3,za),u=H(e,"mobileOffset",3,Na),g=H(e,"theme",3,"light"),p=H(e,"richColors",3,!1),y=H(e,"duration",3,Tb),m=H(e,"visibleToasts",3,Eb),v=H(e,"toastOptions",19,(()=>({}))),w=H(e,"dir",7,"auto"),E=H(e,"gap",3,Sb),A=H(e,"containerAriaLabel",3,"Notifications"),$=H(e,"closeButtonAriaLabel",3,"Close toast"),C=Os(e,["$$slots","$$events","$$legacy","invert","position","hotkey","expand","closeButton","offset","mobileOffset","theme","richColors","duration","visibleToasts","toastOptions","dir","gap","loadingIcon","successIcon","errorIcon","warningIcon","closeIcon","infoIcon","containerAriaLabel","class","closeButtonAriaLabel","onblur","onfocus","onmouseenter","onmousemove","onmouseleave","ondragend","onpointerdown","onpointerup"]);function L(){if(w()!=="auto")return w();if(typeof window>"u"||typeof document>"u")return"ltr";const Q=document.documentElement.getAttribute("dir");return Q!=="auto"&&Q?(xs((()=>w(Q))),Q):(xs((()=>w(window.getComputedStyle(document.documentElement).direction??"ltr"))),w())}const S=d((()=>Array.from(new Set([r(),...Yt.toasts.filter((Q=>Q.position)).map((Q=>Q.position))].filter(Boolean)))));let I=Te(!1),O=Te(!1),D=Te(Dn((z=g())!=="system"?z:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Xr:Jr));var z;let K=Te(void 0),j=Te(null),V=Te(!1);const R=d((()=>a().join("+").replace(/Key/g,"").replace(/Digit/g,"")));ot((()=>{Yt.toasts.length<=1&&Z(I,!1)})),ot((()=>{const Q=Yt.toasts.filter((X=>X.dismiss&&!X.delete));if(Q.length>0){const X=Yt.toasts.map((ee=>Q.find((se=>se.id===ee.id))?{...ee,delete:!0}:ee));Yt.toasts=X}})),ot((()=>()=>{t(K)&&t(j)&&(t(j).focus({preventScroll:!0}),Z(j,null),Z(V,!1))})),Jt((()=>(Yt.reset(),yr(document,"keydown",(Q=>{a().every((ee=>Q[ee]||Q.code===ee))&&(Z(I,!0),t(K)?.focus()),Q.code!=="Escape"||document.activeElement!==t(K)&&!t(K)?.contains(document.activeElement)||Z(I,!1)}))))),ot((()=>{if(g()!=="system"&&Z(D,g()),typeof window<"u"){g()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z(D,Xr):Z(D,Jr));const Q=window.matchMedia("(prefers-color-scheme: dark)"),X=({matches:ee})=>{Z(D,ee?Xr:Jr,!0)};"addEventListener"in Q?Q.addEventListener("change",X):Q.addListener(X)}}));const x=Q=>{e.onblur?.(Q),t(V)&&!Q.currentTarget.contains(Q.relatedTarget)&&(Z(V,!1),t(j)&&(t(j).focus({preventScroll:!0}),Z(j,null)))},B=Q=>{e.onfocus?.(Q),Q.target instanceof HTMLElement&&Q.target.dataset.dismissable==="false"||t(V)||(Z(V,!0),Z(j,Q.relatedTarget,!0))},q=Q=>{e.onpointerdown?.(Q),Q.target instanceof HTMLElement&&Q.target.dataset.dismissable==="false"||Z(O,!0)},M=Q=>{e.onmouseenter?.(Q),Z(I,!0)},W=Q=>{e.onmouseleave?.(Q),t(O)||Z(I,!1)},U=Q=>{e.onmousemove?.(Q),Z(I,!0)},F=Q=>{e.ondragend?.(Q),Z(I,!1)},T=Q=>{e.onpointerup?.(Q),Z(O,!1)};rb.set(new ob);var N=Rb();nt(N,"tabindex",-1);var J=_(N),Y=Q=>{var X=P(),ee=b(X);Pt(ee,18,(()=>t(S)),(se=>se),((se,we,$e,te)=>{const Ie=d((()=>{const[ce,ue]=we.split("-");return{y:ce,x:ue}})),me=d((()=>(function(ce,ue){const ke={};return[ce,ue].forEach(((re,ie)=>{const he=ie===1,de=he?"--mobile-offset":"--offset",le=he?Na:za;function _e(oe){["top","right","bottom","left"].forEach((ve=>{ke[`${de}-${ve}`]=typeof oe=="number"?`${oe}px`:oe}))}typeof re=="number"||typeof re=="string"?_e(re):typeof re=="object"?["top","right","bottom","left"].forEach((oe=>{const ve=re[oe];ke[`${de}-${oe}`]=ve===void 0?le:typeof ve=="number"?`${ve}px`:ve})):_e(le)})),ke})(c(),u())));var Ae=xb();xr(Ae,(ce=>({tabindex:-1,dir:ce,class:e.class,"data-sonner-toaster":!0,"data-sonner-theme":t(D),"data-y-position":t(Ie).y,"data-x-position":t(Ie).x,style:e.style,onblur:x,onfocus:B,onmouseenter:M,onmousemove:U,onmouseleave:W,ondragend:F,onpointerdown:q,onpointerup:T,...C,[mc]:{"--front-toast-height":`${Yt.heights[0]?.height}px`,"--width":`${Ib}px`,"--gap":`${E()}px`,"--offset-top":t(me)["--offset-top"],"--offset-right":t(me)["--offset-right"],"--offset-bottom":t(me)["--offset-bottom"],"--offset-left":t(me)["--offset-left"],"--mobile-offset-top":t(me)["--mobile-offset-top"],"--mobile-offset-right":t(me)["--mobile-offset-right"],"--mobile-offset-bottom":t(me)["--mobile-offset-bottom"],"--mobile-offset-left":t(me)["--mobile-offset-left"]}})),[L],void 0,void 0,"svelte-6orm0"),Pt(Ae,23,(()=>Yt.toasts.filter((ce=>!ce.position&&t($e)===0||ce.position===we))),(ce=>ce.id),((ce,ue,ke,re)=>{{const ie=ze=>{var He=P(),Le=b(He),De=fe=>{var Pe=P(),We=b(Pe);et(We,(()=>e.successIcon??pt)),s(fe,Pe)},pe=fe=>{var Pe=P(),We=b(Pe),Ye=Qe=>{(function(st){var Ke=$b();s(st,Ke)})(Qe)};k(We,(Qe=>{e.successIcon!==null&&Qe(Ye)}),!0),s(fe,Pe)};k(Le,(fe=>{e.successIcon?fe(De):fe(pe,!1)})),s(ze,He)},he=ze=>{var He=P(),Le=b(He),De=fe=>{var Pe=P(),We=b(Pe);et(We,(()=>e.errorIcon??pt)),s(fe,Pe)},pe=fe=>{var Pe=P(),We=b(Pe),Ye=Qe=>{(function(st){var Ke=wb();s(st,Ke)})(Qe)};k(We,(Qe=>{e.errorIcon!==null&&Qe(Ye)}),!0),s(fe,Pe)};k(Le,(fe=>{e.errorIcon?fe(De):fe(pe,!1)})),s(ze,He)},de=ze=>{var He=P(),Le=b(He),De=fe=>{var Pe=P(),We=b(Pe);et(We,(()=>e.warningIcon??pt)),s(fe,Pe)},pe=fe=>{var Pe=P(),We=b(Pe),Ye=Qe=>{(function(st){var Ke=kb();s(st,Ke)})(Qe)};k(We,(Qe=>{e.warningIcon!==null&&Qe(Ye)}),!0),s(fe,Pe)};k(Le,(fe=>{e.warningIcon?fe(De):fe(pe,!1)})),s(ze,He)},le=ze=>{var He=P(),Le=b(He),De=fe=>{var Pe=P(),We=b(Pe);et(We,(()=>e.infoIcon??pt)),s(fe,Pe)},pe=fe=>{var Pe=P(),We=b(Pe),Ye=Qe=>{(function(st){var Ke=Ab();s(st,Ke)})(Qe)};k(We,(Qe=>{e.infoIcon!==null&&Qe(Ye)}),!0),s(fe,Pe)};k(Le,(fe=>{e.infoIcon?fe(De):fe(pe,!1)})),s(ze,He)},_e=ze=>{var He=P(),Le=b(He),De=fe=>{var Pe=P(),We=b(Pe);et(We,(()=>e.closeIcon??pt)),s(fe,Pe)},pe=fe=>{var Pe=P(),We=b(Pe),Ye=Qe=>{(function(st){var Ke=Cb();s(st,Ke)})(Qe)};k(We,(Qe=>{e.closeIcon!==null&&Qe(Ye)}),!0),s(fe,Pe)};k(Le,(fe=>{e.closeIcon?fe(De):fe(pe,!1)})),s(ze,He)};let oe=d((()=>v()?.duration??y())),ve=d((()=>v()?.class??"")),ye=d((()=>v()?.descriptionClass||"")),Ne=d((()=>v()?.style??"")),Re=d((()=>v().classes||{})),Oe=d((()=>v().unstyled??!1)),Be=d((()=>v()?.cancelButtonStyle??"")),Ge=d((()=>v()?.actionButtonStyle??"")),xe=d((()=>v()?.closeButtonAriaLabel??$()));bb(ce,{get index(){return t(ke)},get toast(){return t(ue)},get defaultRichColors(){return p()},get duration(){return t(oe)},get class(){return t(ve)},get descriptionClass(){return t(ye)},get invert(){return n()},get visibleToasts(){return m()},get closeButton(){return l()},get interacting(){return t(O)},get position(){return we},get style(){return t(Ne)},get classes(){return t(Re)},get unstyled(){return t(Oe)},get cancelButtonStyle(){return t(Be)},get actionButtonStyle(){return t(Ge)},get closeButtonAriaLabel(){return t(xe)},get expandByDefault(){return i()},get expanded(){return t(I)},get loadingIcon(){return e.loadingIcon},successIcon:ie,errorIcon:he,warningIcon:de,infoIcon:le,closeIcon:_e,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}})),Dt(Ae,(ce=>Z(K,ce)),(()=>t(K))),ge((()=>Ae.dir=Ae.dir)),s(se,Ae)})),s(Q,X)};k(J,(Q=>{Yt.toasts.length>0&&Q(Y)})),ge((()=>nt(N,"aria-label",`${A()??""} ${t(R)??""}`))),s(o,N),Ee()}var Db=h('<div class="c-toast-content__actions svelte-wtxgly"></div>'),zb=h('<div class="c-toast-content__icon svelte-wtxgly"><!></div>'),Nb=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ob=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Lb=h('<div class="c-toast-content__close svelte-wtxgly"><!></div>'),Pb=h('<div><div><div class="c-toast-content__main svelte-wtxgly"><!> <div class="c-toast-content__text svelte-wtxgly"><!> <!></div> <!> <!></div> <!></div></div>');function Fl(o,e){Ce(e,!0);const n=R=>{var x=P(),B=b(x),q=M=>{var W=Db();Pt(W,21,c,(U=>U.label),((U,F)=>{Et(U,{size:1,variant:"soft",get color(){return t(p)},get onclick(){return t(F).onClick},children:(T,N)=>{var J=ae();ge((()=>qe(J,t(F).label))),s(T,J)},$$slots:{default:!0}})})),s(M,W)};k(B,(M=>{c().length>0&&M(q)})),s(R,x)};let r=H(e,"surface",3,"web"),a=H(e,"textLayout",3,"stacked"),i=H(e,"actionPosition",3,"right"),l=H(e,"variant",3,"default"),c=H(e,"actions",19,(()=>[]));function u(){e.closeToast?.()}const g={default:"neutral",warning:"neutral",success:"accent",error:"error"},p=d((()=>g[l()]));let y=d((()=>Fi(g[l()])));var m=Pb();xr(m,(()=>({class:"c-toast-content__container",...t(y)})),void 0,void 0,void 0,"svelte-wtxgly");var v=_(m),w=_(v),E=_(w),A=R=>{var x=zb(),B=_(x),q=W=>{Se(W,{get name(){return e.icon}})},M=W=>{var U=P(),F=b(U);et(F,(()=>e.icon)),s(W,U)};k(B,(W=>{typeof e.icon=="string"?W(q):W(M,!1)})),s(R,x)};k(E,(R=>{e.icon&&R(A)}));var $=f(E,2),C=_($),L=R=>{var x=Nb(),B=b(x);zs(B,(()=>({"--text-color":"var(--ds-color-a11)"}))),Fe(B.lastChild,{size:1,get color(){return t(p)},block:!0,children:(q,M)=>{var W=P(),U=b(W),F=N=>{var J=ae();ge((()=>qe(J,e.name))),s(N,J)},T=N=>{var J=P(),Y=b(J);et(Y,(()=>e.name)),s(N,J)};k(U,(N=>{typeof e.name=="string"?N(F):N(T,!1)})),s(q,W)},$$slots:{default:!0}}),s(R,x)};k(C,(R=>{e.name&&R(L)}));var S=f(C,2),I=R=>{var x=Ob(),B=b(x);zs(B,(()=>({"--text-color":"var(--ds-color-a11)"}))),Fe(B.lastChild,{size:1,get color(){return t(p)},block:!0,children:(q,M)=>{var W=P(),U=b(W),F=N=>{var J=ae();ge((()=>qe(J,e.description))),s(N,J)},T=N=>{var J=P(),Y=b(J);et(Y,(()=>e.description)),s(N,J)};k(U,(N=>{typeof e.description=="string"?N(F):N(T,!1)})),s(q,W)},$$slots:{default:!0}}),s(R,x)};k(S,(R=>{e.description&&R(I)}));var O=f($,2),D=R=>{n(R)};k(O,(R=>{i()==="right"&&R(D)}));var z=f(O,2),K=R=>{var x=Lb(),B=_(x);St(B,{size:1,variant:"ghost",get color(){return t(p)},onclick:u,children:(q,M)=>{Se(q,{name:"x"})},$$slots:{default:!0}}),s(R,x)};k(z,(R=>{e.closeButton&&R(K)}));var j=f(w,2),V=R=>{n(R)};k(j,(R=>{i()==="bottom"&&R(V)})),ge((()=>ct(v,1,$n(["c-toast-content",`c-toast-content--variant-${l()}`,`c-toast-content--surface-${r()}`,`c-toast-content--layout-${a()}`,`c-toast-content--actions-${i()}`]),"svelte-wtxgly"))),s(o,m),Ee()}function Ts(o){const{position:e,dismissable:n,onDismiss:r,onAutoClose:a,...i}=o;return ws.custom(Fl,{componentProps:i,duration:1/0,position:e,dismissable:n??!0,onDismiss:r,onAutoClose:a})}function Oa(o){return Ts({...o,variant:"success"})}function La(o){return Ts({...o,variant:"error"})}function Pa(o){return Ts({...o,variant:o.variant??"default",closeButton:!1,dismissable:!1})}const ys={show:Ts,success:Oa,error:La,warning:function(o){return Ts({...o,variant:"warning"})},info:function(o){return Ts({...o,variant:"default"})},loading:Pa,promise:function(o,e){const n=Pa(e.loading);return o.then((r=>(ws.dismiss(n),Oa(typeof e.success=="function"?e.success(r):e.success),r))).catch((r=>{ws.dismiss(n);const a=r instanceof Error?r:new Error(String(r));throw La(typeof e.error=="function"?e.error(a):e.error),r})),o},dismiss:function(o){ws.dismiss(o)},dismissAll:function(){ws.dismiss()},update:function(o,e){const{position:n,dismissable:r,onDismiss:a,onAutoClose:i,...l}=e;ws.custom(Fl,{id:o,componentProps:l,duration:e.duration??1/0,position:n,dismissable:r??!0,onDismiss:a,onAutoClose:i})}},ss={Root:function(o,e){const n=H(e,"offset",3,"0px"),r=H(e,"position",3,"bottom-left"),a=H(e,"gap",3,0);Mb(o,{class:"toaster-augment",get offset(){return n()},get mobileOffset(){return n()},get position(){return r()},get gap(){return a()}})},Toast:function(o,e){let n;Ce(e,!0);const r={get toastId(){return n},dismiss(){n!==void 0&&(ys.dismiss(n),n=void 0)},update(i){n!==void 0&&ys.dismiss(n),n=ys.show(i)}};ot((()=>(e.ref?.(r),()=>{e.ref?.(null)})));let a=Te(void 0);ot((()=>{To(t(a),e.options)||(n!==void 0&&(ys.dismiss(n),n=void 0),e.options&&(Z(a,e.options,!0),n=ys.show(t(a))))})),ls((()=>{n!==void 0&&(ys.dismiss(n),n=void 0)})),Ee()}};var Bb=h('<div class="c-remote-agent-deletion-warning svelte-1u316r5">This remote agent will be deleted <!> due to inactivity.</div>');function Fb(o,e){Ce(e,!0);const[n,r]=Xe(),a=v=>{var w=Bb(),E=f(_(w));at(E,{get content(){return t(u)},children:(A,$)=>{var C=ae();ge((()=>qe(C,t(g)))),s(A,C)},$$slots:{default:!0}}),s(v,w)},i=Tt(un.key),l=d((()=>G(i,"$remoteAgentModel",n).currentAgent)),c=d((()=>t(l)?Oi(new Date(t(l).expires_at),new Date):0)),u=d((()=>t(l)?Gv(new Date(t(l).expires_at)):"")),g=d((()=>t(c)===0?"today":t(c)<0?"soon":`in ${Mr(t(c),"day")}`)),p=d((()=>({variant:"warning",description:a,icon:"circle-alert",closeButton:!0,duration:Number.POSITIVE_INFINITY,dismissable:!0})));var y=P(),m=b(y);be(m,(()=>ss.Toast),((v,w)=>{w(v,{get options(){return t(p)}})})),s(o,y),Ee(),r()}function qb(o,e){Ce(e,!0);let n=H(e,"level",3,"info"),r=H(e,"actionItems",19,(()=>[]));const a=ut();function i(y){const m=e.notificationId;a(Ru(m)),a(Xs({type:jt.dismissBannerNotification,data:{notificationId:m,actionItemTitle:y}}))}const l={info:"default",warning:"warning",error:"error"};let c=Te(void 0),u=Te(void 0);ot((()=>{t(c)!==void 0&&e.notificationId===t(c)||(Z(c,e.notificationId,!0),Z(u,{variant:l[n()],description:e.message,icon:"info",closeButton:!0,actionPosition:r().length>1?"bottom":"right",duration:Number.POSITIVE_INFINITY,actions:r().map((y=>({label:y.title,onClick:()=>(function(m){m.url&&a(Xs({type:jt.augmentLink,data:m.url})),i(m.title)})(y)}))),onDismiss:()=>i()},!0))}));var g=P(),p=b(g);be(p,(()=>ss.Toast),((y,m)=>{m(y,{get options(){return t(u)}})})),s(o,g),Ee()}const ql=os((o=>o.notifications));Ci(ql.select);const Hb=Ei(ql.select);function Wb(o,e){Ce(e,!0);const n=()=>G(l,"$clientAnnouncement",r),[r,a]=Xe(),i=ut();let l=Mu(),c=Du(),u=d((()=>n()?.length&&!G(c,"$displayedAnnouncements",r).includes(n())));const g=d((()=>t(u)?{variant:"default",description:n(),icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,onDismiss:()=>{i(zu(n())),e.onDismiss()}}:void 0));var p=P(),y=b(p);be(y,(()=>ss.Toast),((m,v)=>{v(m,{get options(){return t(g)}})})),s(o,p),Ee(),a()}var Wn=(o=>(o.disableCopilot="ShouldDisableCopilot",o.disableCodeium="ShouldDisableCodeium",o.workspacePopulated="WorkspacePopulated",o.workspaceNotPopulated="WorkspaceNotPopulated",o.workspaceNotSelected="WorkspaceNotSelected",o.signInRequired="UserShouldSignIn",o.allActionsComplete="AllActionsComplete",o.syncingPermissionNeeded="SyncingPermissionNeeded",o.workspaceTooLarge="workspaceTooLarge",o.uploadingHomeDir="uploadingHomeDir",o))(Wn||{});function Hl(o,e){Ce(e,!0);const[n,r]=Xe(),a=Nu("maxTrackableFileCount"),i=ut();function l(p){i(Xs({type:jt.mainPanelPerformAction,data:p}))}const c=d((()=>e.action===Wn.disableCopilot?{variant:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actionPosition:"bottom",actions:[{label:"Disable Github Copilot",onClick:()=>{l("disable-github-copilot")}}]}:e.action===Wn.disableCodeium?{variant:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actionPosition:"bottom",actions:[{label:"Disable Codeium",onClick:()=>{l("disable-codeium")}}]}:e.action===Wn.workspaceTooLarge?{variant:"warning",description:`The workspace you have opened exceeds Augment's ${G(a,"$maxTrackableFileCount",n)} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,icon:"info",closeButton:!1,dismissable:!1,duration:Number.POSITIVE_INFINITY}:e.action===Wn.uploadingHomeDir?{variant:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace.",icon:"info",closeButton:!1,dismissable:!1,duration:Number.POSITIVE_INFINITY}:void 0));var u=P(),g=b(u);be(g,(()=>ss.Toast),((p,y)=>{y(p,{get options(){return t(c)}})})),s(o,u),Ee(),r()}const Gb=os((o=>o.mainPanelActions.list)),Ub=os((o=>{const{list:e,currentIndex:n}=o.mainPanelActions;return e[n]}));var Vb=h("<!> <!> <!> <!> <!> <!>  <!>",1);function jb(o,e){Ce(e,!0);const n=()=>G(A,"$currentAction",a),r=()=>G(L,"$banner",a),[a,i]=Xe(),l=Hb(),c=Tt(un.key),u=Ou(),g=ln(),p=Ct("isVscodeVersionOutdated"),y=Qo("remoteAgentsResumeHintAvailableTtlDays"),m=Qo("conversationHistorySizeThresholdBytes"),v=new Qy(rs().store,{isVscodeVersionOutdated:p,remoteAgentsResumeHintAvailableTtlDays:y,conversationHistorySizeThresholdBytes:m},c),{showVSCodeVersionWarning:w,showRemoteAgentDeletionWarning:E}=v,A=Ub();function $(){(function(){try{const Y={hideForSession:!0,timestamp:new Date().toISOString()};sessionStorage.setItem(Bl,JSON.stringify(Y))}catch(Y){console.error("Failed to save VSCode version warning preference to sessionStorage:",Y)}})()}const C=ut(),L=Lu(),S=Pu();function I(){C(Bu())}function O(){C(Ai())}const D=jn(g),z=Zs(g),K=d((()=>G(z,"$draftExchange",a)?.exchange?.rich_text_json_repr));var j=Vb(),V=b(j);(function(Y,Q){Ce(Q,!0);const X=d((()=>oi(Q.richTextContent))),ee=d((()=>t(X).hasWarning)),se=d((()=>t(X).warningMessage)),we=d((()=>t(ee)?{variant:"warning",description:t(se),icon:"circle-alert",closeButton:!1,duration:Number.POSITIVE_INFINITY,dismissable:!1}:void 0));var $e=P(),te=b($e);be(te,(()=>ss.Toast),((Ie,me)=>{me(Ie,{get options(){return t(we)}})})),s(Y,$e),Ee()})(V,{get richTextContent(){return t(K)}});var R=f(V,2),x=Y=>{Wb(Y,{onDismiss:O})};k(R,(Y=>{G(D,"$isAgentic",a)&&Y(x)}));var B=f(R,2),q=Y=>{Hl(Y,{get action(){return n()}})};k(B,(Y=>{n()&&Y(q)}));var M=f(B,2),W=Y=>{{let Q=d((()=>r().button?.title)),X=d((()=>r().button?.url));(function(ee,se){Ce(se,!0);let we=H(se,"buttonTitle",3,""),$e=H(se,"buttonUrl",3,"");const te=ut();function Ie(){te(Xs({type:jt.augmentLink,data:$e()}))}let me=Te(void 0);ot((()=>{const ue={variant:"default",description:se.warningMessage,icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actions:$e()?[{label:we(),onClick:Ie}]:[],onDismiss:se.onDismiss};To(t(me),ue)||Z(me,ue,!0)}));var Ae=P(),ce=b(Ae);be(ce,(()=>ss.Toast),((ue,ke)=>{ke(ue,{get options(){return t(me)}})})),s(ee,Ae),Ee()})(Y,{get warningMessage(){return r().message},get buttonTitle(){return t(Q)},get buttonUrl(){return t(X)},onDismiss:()=>I})}};k(M,(Y=>{r()&&!G(S,"$isInfoDismissed",a)&&Y(W)}));var U=f(M,2);Pt(U,1,(()=>G(l,"$notifications",a)),(Y=>Y.notificationId),((Y,Q)=>{qb(Y,{get notificationId(){return t(Q).notificationId},get message(){return t(Q).message},get level(){return t(Q).level},get actionItems(){return t(Q).actionItems}})}));var F=f(U,2),T=Y=>{(function(Q,X){Ce(X,!0);let ee=null;function se(){ee?.dismiss(),X.onHideForSession()}const we=d((()=>({variant:"warning",description:`VS Code ${X.minVersion}+ required. Some features may not work.`,icon:"info",closeButton:!0,duration:Number.POSITIVE_INFINITY,actions:[{label:"Hide for this session",onClick:se}]})));var $e=P(),te=b($e);be(te,(()=>ss.Toast),((Ie,me)=>{me(Ie,{get options(){return t(we)},ref:Ae=>ee=Ae})})),s(Q,$e),Ee()})(Y,{onHideForSession:$,get minVersion(){return G(u,"$vsCodeMinVersion",a)}})};k(F,(Y=>{G(w,"$showVSCodeVersionWarning",a)&&Y(T)}));var N=f(F,2),J=Y=>{Fb(Y,{})};k(N,(Y=>{G(E,"$showRemoteAgentDeletionWarning",a)&&Y(J)})),s(o,j),Ee(),i()}class Kb{handleMessageFromExtension(e){return e.data?.type===jt.hostWindowFocusChange&&(Fu(e.data.data),!0)}}const Yb=(o,e)=>{o.update((n=>n?.threadCount===e?n:{...n,threadCount:e}))},Xb=(o,e,n)=>{e&&o.update((r=>{if(!r)return n;const a=new Set(r.activeWebviews);e.isActive?a.add("chat"):a.delete("chat");const i={...r,activeWebviews:Array.from(a),agentOverviews:e.agentOverviews,selectedAgentId:e.currentAgentId,pinnedAgents:e.pinnedAgents};return ji(i,r)?r:i}))},Jb=(o,e,n,r,a)=>{if(JSON.stringify(o)!==JSON.stringify(e.state)&&e){const{selectedAgentId:i,pinnedAgents:l}=e.state||{};i!==n.currentAgentId&&(r.showAugmentPanel(),n.setIsActive(!0),a.setToRemoteAgent(i),n.setCurrentAgent(i)),l&&JSON.stringify(l)!==JSON.stringify(n.pinnedAgents)&&n.setPinnedAgents(l)}};function Qb(o,e){Ce(e,!0);const[n,r]=Xe(),a=new Ui(e.msgBroker,{},dg,ug);e.msgBroker.registerConsumer(a);const i=qu();ot((()=>{Yb(a,G(i,"$conversationCount",n))})),Ee(),r()}const Zb=os((o=>o.slashCommands.activeCommandId));var e$=h('<span data-slash-commands=""></span>');const Wl=os((o=>o.modals.collection)),Br=Ci(Wl.select);Ei(Wl.select),os((o=>{if(o.modals.currentModal)return Br.select(o,o.modals.currentModal)}));const t$=os(((o,e)=>!!Br.select(o,e)?.show));os(((o,e)=>!t$.select(o,e)));const Gl="augment-modals-container";var n$=h('<dialog class="c-augment-full-size-overlay svelte-47x3ue"><div class="c-augment-full-size-overlay__content svelte-47x3ue"><!></div></dialog>');function s$(o,e){Ce(e,!0);const n=H(e,"open",3,!1),r=H(e,"target",3,Gl),a=H(e,"animationDirection",3,"down"),i=d((()=>{switch(a()){case"up":return{x:0,y:-5};case"down":default:return{x:0,y:5};case"left":return{x:-5,y:0};case"right":return{x:5,y:0}}}));let l=Te(void 0),c=Te(Dn(n()));function u(){Z(c,!0)}async function g(){Z(c,!1),e.onClose?.()}function p(){Z(c,!t(c))}ot((()=>{n()?(u(),t(l)?.show()):t(l)?.close()})),Jt((()=>{n()&&t(l)&&!t(l).open&&t(l).show()})),Rn(Pl,{open:u,close:g,toggle:p});var y={showModal:u,closeModal:g,toggleModal:p},m=P(),v=b(m),w=E=>{cs(E,{get target(){return`#${r()??""}`},children:(A,$)=>{var C=n$(),L=_(C),S=_(L);et(S,(()=>e.children??pt)),Dt(C,(I=>Z(l,I)),(()=>t(l))),kn(C,((I,O)=>Tg?.(I,O)),(()=>({enabled:t(c),restoreFocusOnClose:!1}))),Ft("close",C,g),Zt(3,L,(()=>ns),(()=>({duration:200,...t(i)}))),Zt(1,C,(()=>aa),(()=>({duration:100}))),Zt(2,C,(()=>aa),(()=>({duration:200}))),s(A,C)},$$slots:{default:!0}})};return k(v,(E=>{t(c)&&E(w)})),s(o,m),Ee(y)}function Ba(o,e){Ce(e,!0);const n=ut();ot((()=>{const r=Gu();return n(Uu(Vu(r))),()=>{n(ju())}})),Ee()}var r$=h("<!> <!> <!>",1),o$=h("<!> <!> <!>",1);function Qr(o,e){Ce(e,!0);const n=()=>G(c,"$modal",r),[r,a]=Xe(),i=H(e,"animationDirection",3,"down"),l=H(e,"fullsize",3,!0),c=Br(e.modalId),u=ut(),g=()=>{u(Zo(e.modalId))};var p=P(),y=b(p),m=w=>{{let E=d((()=>n()?.show));s$(w,{get open(){return t(E)},get animationDirection(){return i()},onClose:()=>u(Zo(e.modalId)),children:(A,$)=>{Ar(A,{scope:"full-size-overlay",children:(C,L)=>{var S=r$(),I=b(S);Ba(0,{});var O=f(I,2);on(O,{name:"closeFullSizeOverlay",handler:g});var D=f(O,2);et(D,(()=>e.children??pt)),s(C,S)},$$slots:{default:!0}})},$$slots:{default:!0}})}},v=w=>{{let E=d((()=>n()?.show));Ig(w,{get show(){return t(E)},oncancel:g,children:(A,$)=>{Ar(A,{scope:"modal-overlay",children:(C,L)=>{var S=o$(),I=b(S);Ba(0,{});var O=f(I,2);on(O,{name:"closeModalSizeOverlay",handler:g});var D=f(O,2);et(D,(()=>e.children??pt)),s(C,S)},$$slots:{default:!0}})},$$slots:{default:!0}})}};k(y,(w=>{l()?w(m):w(v,!1)})),s(o,p),Ee(),a()}var a$=h('<span class="c-deep-link-warning-modal__prompt svelte-1ci9u5t"> </span>'),i$=h('<div class="c-deep-link-warning-modal svelte-1ci9u5t"><div class="c-deep-link-warning-modal__title svelte-1ci9u5t"><!> <!></div> <div class="c-deep-link-warning-modal__body svelte-1ci9u5t"><!> <!></div> <div class="c-deep-link-warning-modal__actions svelte-1ci9u5t"><!> <!></div></div>');function l$(o,e){Ce(e,!0);const[n,r]=Xe(),a=ln();let i=d((()=>e.deepLinkWarning&&e.deepLinkWarning?.prompt||"")),l=d((()=>e.deepLinkWarning?.mode==="agent"?"Agent":"Chat"));const c=ut();function u(){c(oo(Qn.deepLinkWarning))}var g=i$(),p=_(g),y=_(p);Fe(y,{size:3,weight:"bold",children:(L,S)=>{var I=ae("Open Prompt in Thread");s(L,I)},$$slots:{default:!0}});var m=f(y,2);St(m,{variant:"ghost-block",color:"neutral",size:1,onclick:u,children:(L,S)=>{Se(L,{name:"x"})},$$slots:{default:!0}});var v=f(p,2),w=_(v);Fe(w,{size:2,children:(L,S)=>{var I=ae();ge((()=>qe(I,`A new ${t(l)??""} thread will be created with the following prompt. After reviewing, choose confirm
      to proceed.`))),s(L,I)},$$slots:{default:!0}});var E=f(w,2);hs(E,{variant:"soft",color:"accent",size:1,children:(L,S)=>{var I=a$(),O=_(I);ge((()=>qe(O,t(i)))),s(L,I)},$$slots:{default:!0}});var A=f(v,2),$=_(A);Et($,{variant:"ghost-block",color:"neutral",onclick:u,size:2,children:(L,S)=>{var I=ae("Cancel");s(L,I)},$$slots:{default:!0}});var C=f($,2);Et(C,{variant:"soft",color:"neutral",onclick:async function(){if(G(a,"$currentConversationId",n)){const L=e.deepLinkWarning?.mode==="agent"?"localAgent":"chat",S={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:t(i)}]}]};c(mo(L,{request_message:t(i),rich_text_json_repr:S})),c(oo(Qn.deepLinkWarning))}},size:2,children:(L,S)=>{var I=ae("Confirm");s(L,I)},$$slots:{default:!0}}),s(o,g),Ee(),r()}var wt=(o=>(o.idle="idle",o.initializing="initializing",o.refreshing="refreshing",o.staging="staging",o.unstaging="unstaging",o.committing="committing",o.checkingOut="checkingOut",o))(wt||{});const c$="HEAD",Us={isNew:o=>{const[,e]=o;return e===0},isUntracked:o=>{const[,e,n,r]=o;return e===0&&n===2&&r===0},hasStaged:o=>{const[,e,,n]=o;return n!==e},hasUnstaged:o=>{const[,,e,n]=o;return!!Us.isUntracked(o)||e!==n},isDeleted:o=>{const[,,e]=o;return e===0},isDeletionStaged:o=>{const[,e,n,r]=o;return e===1&&n===0&&r!==1},isUnmodified:o=>{const[,e,n,r]=o;return e===1&&n===1&&r===1},isPartiallyStaged:o=>Us.hasStaged(o)&&Us.hasUnstaged(o),hasChangedSinceHead:o=>{const[,e,n,r]=o;return!(e===1&&n===1&&r===1)}};function d$(o){const e=(function(l){const c=At(l,(y=>y?.metadata?.headOid??"")),u=At(l,(y=>y?.metadata?.currentBranch??"")),g=At(l,(y=>y?.workdir??"")),p=At(l,(y=>y?.gitdir??""));return{headOid:c,currentBranch:u,workdir:g,gitdir:p,repositoryInfo:At([c,u,g,p],(([y,m,v,w])=>({headOid:y,currentBranch:m,workdir:v,gitdir:w})))}})(o),n=(function(l){return{files:At(l,(u=>u?.files??[]))}})(o),r=(function(l){const c=At(l,(p=>p?.isOperationInProgress??!1)),u=At(l,(p=>p?.currentOperation)),g=At(l,(p=>p?.lastError));return{isOperationInProgress:c,currentOperation:u,repositoryLastError:g}})(o),a=(function(l){const c=At(l,(g=>g?.lastUpdated??0)),u=At(c,(g=>g===0?0:Date.now()-g));return{lastUpdated:c,timeSinceUpdate:u,isStale:At(u,(g=>g>3e5))}})(o);return{isInitialized:At(o,(l=>l!==void 0)),metadata:e,files:n,operationState:r,timing:a}}class Is{static CTX_KEY=Symbol("git-agent-edit-context");static setInContext(e,n){Rn(Is.CTX_KEY,{model:e,controller:n})}static getContext(){return Tt(Is.CTX_KEY)}static requireContext(){const e=Is.getContext();if(!e)throw new Error("GitAgentEditModel context missing");return e}_repositoryState=Xt(void 0);_lastError=Xt(void 0);_currStatus=Xt(wt.idle);_filesToUpdate=new Set;_gitCommitInputMessage=Xt("");_isGeneratingCommitMessage=Xt(!1);_commitMessageGenerationError=Xt(void 0);_canCancelCommitMessageGeneration=Xt(!1);repositoryState=vn(this._repositoryState);lastError=vn(this._lastError);currStatus=vn(this._currStatus);flagsModel=(function(e){return{canStageFiles:At(e,(n=>{const r=n===wt.idle,a=n===wt.unstaging;return r||a})),canUnstageFiles:At(e,(n=>{const r=n===wt.idle,a=n===wt.staging;return r||a})),canModifyIndividualFiles:At(e,(n=>n===wt.idle)),canCommit:At(e,(n=>n===wt.idle)),canRefresh:At(e,(n=>n===wt.idle)),canRevertFiles:At(e,(n=>n===wt.idle))}})(this.currStatus);operationStatusModel=(function(e){return{operationMetadata:At(e,(n=>({status:n,startedAt:n!=="idle"?Date.now():void 0}))),isIdle:At(e,(n=>n==="idle")),isOperationInProgress:At(e,(n=>n!=="idle"))}})(this.currStatus);uiStateModel=(function(e){const n=At(e,(a=>{switch(a){case wt.committing:return"Committing changes...";case wt.staging:return"Staging files...";case wt.unstaging:return"Unstaging files...";case wt.refreshing:return"Refreshing repository...";case wt.initializing:return"Initializing repository...";case wt.checkingOut:return"Checking out files...";case wt.idle:default:return"Enter commit message"}})),r=At(e,(a=>{switch(a){case wt.committing:return"Committing changes";case wt.staging:return"Staging files";case wt.unstaging:return"Unstaging files";case wt.refreshing:return"Refreshing repository";case wt.initializing:return"Initializing repository";case wt.checkingOut:return"Checking out files";case wt.idle:default:return"Ready"}}));return{uiState:At([n,r],(([a,i])=>({commitPlaceholder:a,operationDescription:i}))),commitPlaceholder:n,operationDescription:r}})(this.currStatus);repositoryStateModel=d$(this.repositoryState);fileCollectionsModel=(function(e){const n=e,r=At(n,(i=>i.filter((l=>Us.hasUnstaged(l.statusRow))))),a=At(n,(i=>i.filter((l=>Us.hasStaged(l.statusRow)))));return{allFiles:n,unstagedFiles:r,stagedFiles:a,unstagedFilesWithUI:At(r,(i=>i.map((l=>({qualifiedPathName:l.qualifiedPathName,statusRow:l.statusRow,changesSummary:l.changesSummary}))))),stagedFilesWithUI:At(a,(i=>i.map((l=>({qualifiedPathName:l.qualifiedPathName,statusRow:l.statusRow,changesSummary:l.changesSummary})))))}})(this.repositoryStateModel.files.files);commitInputModel=(function(e,n,r,a){const i=At([e,n,r,a],(([u,g,p,y])=>({message:u,isGenerating:g,generationError:p,canCancelGeneration:y}))),l=At(n,(u=>!!u)),c=At([n,r],(([u,g])=>g?"Generation failed - try again or write manually":u?"Generating commit message...":"Write or generate a commit message..."));return{message:e,isGenerating:n,generationError:r,canCancelGeneration:a,state:i,isInputDisabled:l,placeholderText:c}})(vn(this._gitCommitInputMessage),vn(this._isGeneratingCommitMessage),vn(this._commitMessageGenerationError),vn(this._canCancelCommitMessageGeneration));_getWritableStores(){return{repositoryState:this._repositoryState,lastError:this._lastError,currStatus:this._currStatus,gitCommitInputMessage:this._gitCommitInputMessage,isGeneratingCommitMessage:this._isGeneratingCommitMessage,commitMessageGenerationError:this._commitMessageGenerationError,canCancelCommitMessageGeneration:this._canCancelCommitMessageGeneration}}_addFilesToUpdate(e){for(const n of e)this._filesToUpdate.add(n)}_getAndClearFilesToUpdate(){const e=Array.from(this._filesToUpdate);return this._filesToUpdate.clear(),e}_getFilesToUpdateCount(){return this._filesToUpdate.size}}class Sr{constructor(e,n,r,a){this._model=e,this.gitRPCClient=n,this._extensionClient=r,this._repoRoot=a,this._stores=this._model._getWritableStores(),this._throttledReloadFiles=Js((()=>this._executeThrottledReload()),Sr.RELOAD_THROTTLE_MS),this._repoRoot||this.initialize()}_stores;_commitMessageGenerationAbortController;_throttledReloadFiles;static RELOAD_THROTTLE_MS=500;_ensureIdle(){const e=It(this._stores.currStatus);if(e!==wt.idle)throw new Error(`Cannot start operation: ${e} is already in progress`)}async _executeOperation(e,n){this._ensureIdle();try{return this._stores.currStatus.set(e),this._stores.lastError.set(void 0),await n()}catch(r){const a=r instanceof Error?r.message:"Unknown error",i=this._getContextualErrorMessage(e,a);throw this._stores.lastError.set(i),r}finally{this._stores.currStatus.set(wt.idle)}}_getContextualErrorMessage(e,n){return`${this._getOperationContext(e)}: ${n}`}_getOperationContext(e){switch(e){case wt.initializing:return"Failed to initialize git repository";case wt.refreshing:return"Failed to refresh repository state";case wt.staging:return"Failed to stage files";case wt.unstaging:return"Failed to unstage files";case wt.checkingOut:return"Failed to checkout files";case wt.committing:return"Failed to commit changes";default:return"Operation failed"}}clearError(){this._stores.lastError.set(void 0),It(this._stores.currStatus)!==wt.idle&&this._stores.currStatus.set(wt.idle)}getWritableStores(){return this._stores}_updateMetadata(e){e&&this._stores.repositoryState.update((n=>n&&{...n,metadata:{...n.metadata,...e}}))}async initialize(){return this._executeOperation(wt.initializing,(async()=>{this._stores.repositoryState.set(void 0),this._stores.lastError.set(void 0),await this._refreshRepositoryInternal()}))}async refreshRepository(){return this._executeOperation(wt.refreshing,(async()=>{await this._refreshRepositoryInternal()}))}async _refreshRepositoryInternal(){const e=this._repoRoot||"",n=await this.gitRPCClient.getRepositoryState(e);this._stores.repositoryState.set(n)}async refreshSpecificFiles(e){try{const n=It(this._stores.repositoryState);if(!n)return void await this.refreshRepository();const r=this._repoRoot||"",a=await this.gitRPCClient.getStatusMatrix(r,{filepaths:e,includeStatistics:!0,filterChangedOnly:!0});this._updateMetadata(a.metadata);const i=a.statusMatrix.filter((c=>{const[,u,g,p]=c.statusRow;return u!==g||u!==p})),l=[...n.files.filter((c=>!e.includes(c.qualifiedPathName.relPath))),...i];this._stores.repositoryState.set({...n,files:l,lastUpdated:Date.now()}),this._stores.lastError.set(void 0)}catch(n){const r=n instanceof Error?n.message:"Unknown error";throw this._stores.lastError.set(`Failed to refresh specific files: ${r}`),n}}async stageFile(e){return this.stageFiles([e])}async stageFiles(e){return this._executeOperation(wt.staging,(async()=>{const n=this._repoRoot||"",r=await this.gitRPCClient.stageFiles(n,{filePaths:e});this._updateMetadata(r.metadata),await this.refreshSpecificFiles(e)}))}async unstageFile(e){return this.unstageFiles([e])}async unstageFiles(e){return this._executeOperation(wt.unstaging,(async()=>{const n=this._repoRoot||"",r=await this.gitRPCClient.unstageFiles(n,{filePaths:e});this._updateMetadata(r.metadata),await this.refreshSpecificFiles(e)}))}async checkoutFileToHead(e){return this.checkoutFilesToHead([e])}async checkoutFilesToHead(e){return this._executeOperation(wt.checkingOut,(async()=>{const n=this._repoRoot||"",r=await this.gitRPCClient.checkoutFiles(n,{filePaths:e,reference:c$});this._updateMetadata(r.metadata),await this.refreshSpecificFiles(e)}))}async checkoutFileToReference(e,n){return this.checkoutFilesToReference([e],n)}async checkoutFilesToReference(e,n){return this._executeOperation(wt.checkingOut,(async()=>{const r=this._repoRoot||"",a=await this.gitRPCClient.checkoutFiles(r,{filePaths:e,reference:n});this._updateMetadata(a.metadata),await this.refreshSpecificFiles(e)}))}async resetToIndexFile(e){return this.resetToIndexFiles([e])}async resetToIndexFiles(e){return this._executeOperation(wt.checkingOut,(async()=>{const n=this._repoRoot||"";await this.gitRPCClient.resetToIndex(n,{filePaths:e}),await this.refreshSpecificFiles(e)}))}async stageAllUnstaged(){const e=It(this._model.fileCollectionsModel.unstagedFiles).map((n=>n.qualifiedPathName.relPath));await this.stageFiles(e)}async unstageAllStaged(){const e=It(this._model.fileCollectionsModel.stagedFiles).map((n=>n.qualifiedPathName.relPath));await this.unstageFiles(e)}async commit(e){return this._executeOperation(wt.committing,(async()=>{const n=this._repoRoot||"",r=await this.gitRPCClient.commit(n,{message:e});this._updateMetadata(r.metadata);const a=It(this._stores.repositoryState);if(a){const i=a.files.map((l=>l.qualifiedPathName.relPath));await this.refreshSpecificFiles(i)}return r.commitOid}))}clearStagedChanges(){const e=It(this._stores.repositoryState);if(!e)return;const n=e.files.map((r=>{const[a,i,l]=r.statusRow;return{...r,statusRow:[a,i,l,i],changesSummary:void 0}}));this._stores.repositoryState.set({...e,files:n})}async validateRepository(){try{const e=this._repoRoot||"",n=await this.gitRPCClient.validateRepository(e);return this._updateMetadata(n.metadata),n.isValid}catch(e){const n=e instanceof Error?e.message:"Unknown error";return this._stores.lastError.set(`Failed to validate repository: ${n}`),!1}}async openGitDiff(e,n=!1){const r=this._repoRoot||"",a=await this.gitRPCClient.openGitDiff(r,{filePath:e,staged:n});this._updateMetadata(a.metadata)}async generateCommitMessage(){if(!It(this._stores.isGeneratingCommitMessage)&&It(this._stores.currStatus)===wt.idle){this._stores.commitMessageGenerationError.set(void 0),this._stores.isGeneratingCommitMessage.set(!0),this._stores.canCancelCommitMessageGeneration.set(!0),this._stores.gitCommitInputMessage.set(""),this._commitMessageGenerationAbortController=new AbortController;try{let e="";for await(const n of this._extensionClient.generateCommitMessage()){if(this._commitMessageGenerationAbortController.signal.aborted)break;n.response_text&&(e+=n.response_text,this._stores.gitCommitInputMessage.set(e))}if(!this._commitMessageGenerationAbortController.signal.aborted){const n=e.trim();this._stores.gitCommitInputMessage.set(n)}}catch(e){const n=e instanceof Error?e.message:"Unknown error";this._stores.commitMessageGenerationError.set(`Failed to generate commit message: ${n}`),console.error("Failed to generate commit message:",e)}finally{this._commitMessageGenerationAbortController&&!this._commitMessageGenerationAbortController.signal.aborted&&this._commitMessageGenerationAbortController.abort(),this._stores.isGeneratingCommitMessage.set(!1),this._stores.canCancelCommitMessageGeneration.set(!1),this._commitMessageGenerationAbortController=void 0}}}cancelCommitMessageGeneration(){this._commitMessageGenerationAbortController&&It(this._stores.isGeneratingCommitMessage)&&(this._commitMessageGenerationAbortController.abort(),this._stores.isGeneratingCommitMessage.set(!1),this._stores.canCancelCommitMessageGeneration.set(!1),this._stores.commitMessageGenerationError.set("Generation cancelled"),this._commitMessageGenerationAbortController=void 0)}setCommitInputMessage(e){this._stores.gitCommitInputMessage.set(e),this._stores.commitMessageGenerationError.set(void 0)}reloadFiles(e){this._model._addFilesToUpdate(e),this._throttledReloadFiles()}async _executeThrottledReload(){const e=this._model._getAndClearFilesToUpdate();if(e.length!==0)try{await this.refreshSpecificFiles(e)}catch(n){console.error("Failed to reload specific files:",n),this._model._addFilesToUpdate(e)}}clearCommitInputMessage(){this._stores.gitCommitInputMessage.set(""),this._stores.commitMessageGenerationError.set(void 0)}}class u${constructor(e){if(this._extensionClient=e,!e)throw new Error("ExtensionClient is required for MultiRepoGitRPCClient")}async listRepositories(){return(await this._extensionClient.sendGitMessage({type:In.REPO_LIST_REQUEST,data:{}})).data.repositories}async trackRepository(e){return(await this._extensionClient.sendGitMessage({type:In.REPO_TRACK_REQUEST,data:{repoRoot:e}})).data}async getRepositoryInfo(e){return(await this._extensionClient.sendGitMessage({type:In.REPO_INFO_REQUEST,data:{repoRoot:e}})).data}async getRepositoryState(e){return(await this._extensionClient.sendGitMessage({type:In.REPO_STATE_REQUEST,data:{repoRoot:e}})).data}async refreshRepository(e){const n=await this._extensionClient.sendGitMessage({type:In.REPO_REFRESH_REQUEST,data:{repoRoot:e}});return{success:n.data.success,metadata:n.data.metadata}}async validateRepository(e){const n=await this._extensionClient.sendGitMessage({type:In.REPO_VALIDATE_REQUEST,data:{repoRoot:e}});return{isValid:n.data.isValid,metadata:n.data.metadata}}async getStatusMatrix(e,n){const r=await this._extensionClient.sendGitMessage({type:In.FILE_STATUS_REQUEST,data:{repoRoot:e,...n}});return{statusMatrix:r.data.statusMatrix,metadata:r.data.metadata}}async stageFiles(e,n){const r=await this._extensionClient.sendGitMessage({type:In.FILE_STAGE_REQUEST,data:{repoRoot:e,...n}});return{success:r.data.success,stagedFiles:r.data.stagedFiles,metadata:r.data.metadata}}async unstageFiles(e,n){const r=await this._extensionClient.sendGitMessage({type:In.FILE_UNSTAGE_REQUEST,data:{repoRoot:e,...n}});return{success:r.data.success,unstagedFiles:r.data.unstagedFiles,metadata:r.data.metadata}}async checkoutFiles(e,n){const r=await this._extensionClient.sendGitMessage({type:In.FILE_CHECKOUT_REQUEST,data:{repoRoot:e,...n}});return{success:r.data.success,checkedOutFiles:r.data.checkedOutFiles,reference:r.data.reference,metadata:r.data.metadata}}async resetToIndex(e,n){const r=await this._extensionClient.sendGitMessage({type:In.FILE_RESET_TO_INDEX_REQUEST,data:{repoRoot:e,...n}});return{success:r.data.success,resetFiles:r.data.resetFiles,metadata:r.data.metadata}}async commit(e,n){const r=await this._extensionClient.sendGitMessage({type:In.COMMIT_CREATE_REQUEST,data:{repoRoot:e,...n}});return{commitOid:r.data.commitOid,metadata:r.data.metadata}}async openGitDiff(e,n){const r=await this._extensionClient.sendGitMessage({type:In.DIFF_OPEN_REQUEST,data:{repoRoot:e,...n}});return{success:r.data.success,metadata:r.data.metadata}}}class Ss{static CTX_KEY=Symbol("multi-repo-git-context");_repositories;_activeRepository;_operationStatus;_lastError;repositories;activeRepository;operationStatus;lastError;availableRepositories;activeRepositoryModel;activeRepositoryState;activeRepositoryMetadata;constructor(){this._repositories=Xt(new Map),this._activeRepository=Xt(void 0),this._operationStatus=Xt("idle"),this._lastError=Xt(void 0),this.repositories=vn(this._repositories),this.activeRepository=vn(this._activeRepository),this.operationStatus=vn(this._operationStatus),this.lastError=vn(this._lastError),this.availableRepositories=At(this._repositories,(e=>Array.from(e.keys()).sort())),this.activeRepositoryModel=At([this._repositories,this._activeRepository],(([e,n])=>n?e.get(n):void 0)),this.activeRepositoryState=At(this.activeRepositoryModel,(e=>e?It(e.repositoryState):void 0)),this.activeRepositoryMetadata=At(this.activeRepositoryModel,(e=>{if(!e?.repositoryStateModel?.metadata)return{currentBranch:void 0,shortCommit:void 0};const n=e.repositoryStateModel.metadata,r=It(n.currentBranch),a=It(n.headOid);return{currentBranch:r,shortCommit:a?a.substring(0,7):void 0}}))}getFileCollectionsModel(e){return It(this._repositories).get(e)?.fileCollectionsModel}getRepositoryStateModel(e){return It(this._repositories).get(e)?.repositoryStateModel}static setInContext(e,n){Rn(Ss.CTX_KEY,{model:e,controller:n})}static getContext(){return Tt(Ss.CTX_KEY)}static requireContext(){const e=Ss.getContext();if(!e)throw new Error("MultiRepoGitModel context missing");return e}_getWritableStores(){return{repositories:this._repositories,activeRepository:this._activeRepository,operationStatus:this._operationStatus,lastError:this._lastError}}}class Oo{constructor(e,n,r,a){this._model=e,this._rpcClient=n,this._extensionClient=r,this._enableAgentGitTracker=a,this._stores=this._model._getWritableStores(),this._throttledRefreshRepositories=Js((async()=>{try{It(this._stores.operationStatus)==="idle"&&await this.refreshRepositories()}catch(i){console.warn("Failed to refresh git repositories on update event:",i)}}),Oo.REFRESH_THROTTLE_MS,{leading:!0,trailing:!0}),this._enableAgentGitTracker.subscribe((i=>{this.maybeInitializeRepos(i)}))}_controllers=new Map;_stores;_throttledRefreshRepositories;static REFRESH_THROTTLE_MS=1e3;maybeInitializeRepos(e){if(e){const n=It(this._stores.operationStatus),r=It(this._model.availableRepositories);n==="idle"&&r.length===0&&this.listRepositories().catch((a=>{console.warn("Failed to initialize repositories when git tracking was enabled:",a)}))}}_ensureIdle(){const e=It(this._stores.operationStatus);if(e!=="idle")throw new Error(`Cannot start operation: ${e} is already in progress`)}async _executeOperation(e,n){if(!this._enableAgentGitTracker)throw new Error("Git tracking is disabled");this._ensureIdle();try{return this._stores.operationStatus.set(e),this._stores.lastError.set(void 0),await n()}catch(r){const a=r instanceof Error?r.message:"Unknown error";throw this._stores.lastError.set(a),r}finally{this._stores.operationStatus.set("idle")}}clearError(){this._stores.lastError.set(void 0)}async listRepositories(){return this._enableAgentGitTracker?this._executeOperation("discovering",(async()=>{const e=await this._rpcClient.listRepositories();for(const n of e){const r=n.repoRoot;if(It(this._stores.repositories).has(r))continue;const a=new Is,i=new Sr(a,this._rpcClient,this._extensionClient,r);this._stores.repositories.update((l=>{const c=new Map(l);return c.set(r,a),c})),this._controllers.set(r,i),await i.initialize()}return!It(this._stores.activeRepository)&&e.length>0&&this._stores.activeRepository.set(e[0].repoRoot),e})):[]}async refreshRepositories(){return this._executeOperation("refreshing",(async()=>{const e=It(this._stores.repositories),n=Array.from(e.keys()).map((async r=>{const a=this._controllers.get(r);if(a)try{await a.refreshRepository()}catch(i){console.error(`Failed to refresh repository ${r}:`,i)}}));await Promise.all(n)}))}async ensureRepository(e){return this._executeOperation("tracking",(async()=>{await this._ensureRepositoryInternal(e)}))}async _ensureRepositoryInternal(e){if(It(this._stores.repositories).has(e))return;const n=await this._rpcClient.trackRepository(e),r=new Is,a=new Sr(r,this._rpcClient,this._extensionClient,e);this._updateRepositoryMetadata(e,n.metadata),this._stores.repositories.update((i=>{const l=new Map(i);return l.set(e,r),l})),this._controllers.set(e,a),await a.initialize()}async selectRepository(e){return this._executeOperation("selecting",(async()=>{const n=It(this._stores.activeRepository);if(n&&n!==e){const r=this._controllers.get(n);r&&r.clearCommitInputMessage()}await this._ensureRepositoryInternal(e),this._stores.activeRepository.set(e)}))}getActiveRepositoryController(){const e=It(this._stores.activeRepository);return e?this._controllers.get(e):void 0}getRepositoryController(e){return this._controllers.get(e)}_updateRepositoryMetadata(e,n){if(!n)return;const r=this.getRepositoryController(e);r&&r.getWritableStores().repositoryState.update((a=>a&&{...a,metadata:{...a.metadata,...n}}))}handleMessageFromExtension(e){const n=e.data;if(n.type===jt.gitUpdateEvent){const r=n.data.changedFiles;return r===void 0?this._throttledRefreshRepositories():this._reloadSpecificFiles(r),!0}return!1}_reloadSpecificFiles(e){const n=new Map;for(const r of e){const a=r.rootPath;n.has(a)||n.set(a,[]),n.get(a).push(r.relPath)}for(const[r,a]of n){const i=this._controllers.get(r);i&&i.reloadFiles(a)}}}const Zr=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function eo(o,e,n,r){o.addEventListener?o.addEventListener(e,n,r):o.attachEvent&&o.attachEvent(`on${e}`,n)}function Ls(o,e,n,r){o&&(o.removeEventListener?o.removeEventListener(e,n,r):o.detachEvent&&o.detachEvent(`on${e}`,n))}function Ul(o,e){const n=e.slice(0,e.length-1),r=[];for(let a=0;a<n.length;a++)r.push(o[n[a].toLowerCase()]);return r}function Vl(o){typeof o!="string"&&(o="");const e=(o=o.replace(/\s/g,"")).split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function jl(o){let e=o.keyCode||o.which||o.charCode;return o.code&&/^Key[A-Z]$/.test(o.code)&&(e=o.code.charCodeAt(3)),e}const Vs={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Zr?173:189,"=":Zr?61:187,";":Zr?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},Bn={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,meta:91,command:91},Bs={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},pn={16:!1,18:!1,17:!1,91:!1},rn={};for(let o=1;o<20;o++)Vs[`f${o}`]=111+o;let tn=[],js=null,Kl="all";const Zn=new Map,Ns=o=>Vs[o.toLowerCase()]||Bn[o.toLowerCase()]||o.toUpperCase().charCodeAt(0),Fa=o=>{Kl=o||"all"},Ks=()=>Kl||"all",Yl=o=>{const e=o.target||o.srcElement,{tagName:n}=e;let r=!0;const a=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(a||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r},Xl=(o,...e)=>{if(o===void 0)Object.keys(rn).forEach((n=>{Array.isArray(rn[n])&&rn[n].forEach((r=>gr(r))),delete rn[n]})),Lo(null);else if(Array.isArray(o))o.forEach((n=>{n.key&&gr(n)}));else if(typeof o=="object")o.key&&gr(o);else if(typeof o=="string"){let[n,r]=e;typeof n=="function"&&(r=n,n=""),gr({key:o,scope:n,method:r,splitKey:"+"})}},gr=({key:o,scope:e,method:n,splitKey:r="+"})=>{Vl(o).forEach((a=>{const i=a.split(r),l=i.length,c=i[l-1],u=c==="*"?"*":Ns(c);if(!rn[u])return;e||(e=Ks());const g=l>1?Ul(Bn,i):[],p=[];rn[u]=rn[u].filter((y=>{const m=(!n||y.method===n)&&y.scope===e&&(function(v,w){const E=v.length>=w.length?v:w,A=v.length>=w.length?w:v;let $=!0;for(let C=0;C<E.length;C++)A.indexOf(E[C])===-1&&($=!1);return $})(y.mods,g);return m&&p.push(y.element),!m})),p.forEach((y=>Lo(y)))}))};function qa(o,e,n,r){if(e.element!==r)return;let a;if(e.scope===n||e.scope==="all"){a=e.mods.length>0;for(const i in pn)Object.prototype.hasOwnProperty.call(pn,i)&&(!pn[i]&&e.mods.indexOf(+i)>-1||pn[i]&&e.mods.indexOf(+i)===-1)&&(a=!1);(e.mods.length===0&&!pn[16]&&!pn[18]&&!pn[17]&&!pn[91]||a||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(tn),e.method(o,e)===!1&&(o.preventDefault?o.preventDefault():o.returnValue=!1,o.stopPropagation&&o.stopPropagation(),o.cancelBubble&&(o.cancelBubble=!0)))}}function Ha(o,e){const n=rn["*"];let r=jl(o);if(o.key&&o.key.toLowerCase()==="capslock"||!(zn.filter||Yl).call(this,o))return;if((r===93||r===224)&&(r=91),tn.indexOf(r)===-1&&r!==229&&tn.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach((c=>{const u=Bs[c];o[c]&&tn.indexOf(u)===-1?tn.push(u):!o[c]&&tn.indexOf(u)>-1?tn.splice(tn.indexOf(u),1):c==="metaKey"&&o[c]&&(tn=tn.filter((g=>g in Bs||g===r)))})),r in pn){pn[r]=!0;for(const c in Bn)if(Object.prototype.hasOwnProperty.call(Bn,c)){const u=Bs[Bn[c]];zn[c]=o[u]}if(!n)return}for(const c in pn)Object.prototype.hasOwnProperty.call(pn,c)&&(pn[c]=o[Bs[c]]);o.getModifierState&&(!o.altKey||o.ctrlKey)&&o.getModifierState("AltGraph")&&(tn.indexOf(17)===-1&&tn.push(17),tn.indexOf(18)===-1&&tn.push(18),pn[17]=!0,pn[18]=!0);const a=Ks();if(n)for(let c=0;c<n.length;c++)n[c].scope===a&&(o.type==="keydown"&&n[c].keydown||o.type==="keyup"&&n[c].keyup)&&qa(o,n[c],a,e);if(!(r in rn))return;const i=rn[r],l=i.length;for(let c=0;c<l;c++)if((o.type==="keydown"&&i[c].keydown||o.type==="keyup"&&i[c].keyup)&&i[c].key){const u=i[c],{splitKey:g}=u,p=u.key.split(g),y=[];for(let m=0;m<p.length;m++)y.push(Ns(p[m]));y.sort().join("")===tn.sort().join("")&&qa(o,u,a,e)}}const zn=function(o,e,n){tn=[];const r=Vl(o);let a=[],i="all",l=document,c=0,u=!1,g=!0,p="+",y=!1,m=!1;if(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"){const v=e;v.scope&&(i=v.scope),v.element&&(l=v.element),v.keyup&&(u=v.keyup),v.keydown!==void 0&&(g=v.keydown),v.capture!==void 0&&(y=v.capture),typeof v.splitKey=="string"&&(p=v.splitKey),v.single===!0&&(m=!0)}for(typeof e=="string"&&(i=e),m&&Xl(o,i);c<r.length;c++){const v=r[c].split(p);a=[],v.length>1&&(a=Ul(Bn,v));let w=v[v.length-1];w=w==="*"?"*":Ns(w),w in rn||(rn[w]=[]),rn[w].push({keyup:u,keydown:g,scope:i,mods:a,shortcut:r[c],method:n,key:r[c],splitKey:p,element:l})}if(l!==void 0&&typeof window<"u"){if(!Zn.has(l)){const v=(E=window.event)=>Ha(E,l),w=(E=window.event)=>{Ha(E,l),(function(A){let $=jl(A);A.key&&A.key.toLowerCase()==="capslock"&&($=Ns(A.key));const C=tn.indexOf($);if(C>=0&&tn.splice(C,1),A.key&&A.key.toLowerCase()==="meta"&&tn.splice(0,tn.length),($===93||$===224)&&($=91),$ in pn){pn[$]=!1;for(const L in Bn)Bn[L]===$&&(zn[L]=!1)}})(E)};Zn.set(l,{keydownListener:v,keyupListenr:w,capture:y}),eo(l,"keydown",v,y),eo(l,"keyup",w,y)}if(!js){const v=()=>{tn=[]};js={listener:v,capture:y},eo(window,"focus",v,y)}}};function Lo(o){const e=Object.values(rn).flat();if(e.findIndex((({element:n})=>n===o))<0&&o){const{keydownListener:n,keyupListenr:r,capture:a}=Zn.get(o)||{};n&&r&&(Ls(o,"keyup",r,a),Ls(o,"keydown",n,a),Zn.delete(o))}if((e.length<=0||Zn.size<=0)&&(Array.from(Zn.keys()).forEach((n=>{const{keydownListener:r,keyupListenr:a,capture:i}=Zn.get(n)||{};r&&a&&(Ls(n,"keyup",a,i),Ls(n,"keydown",r,i),Zn.delete(n))})),Zn.clear(),Object.keys(rn).forEach((n=>delete rn[n])),js)){const{listener:n,capture:r}=js;Ls(window,"focus",n,r),js=null}}const to={getPressedKeyString:()=>tn.map((o=>(e=>Object.keys(Vs).find((n=>Vs[n]===e)))(o)||(e=>Object.keys(Bn).find((n=>Bn[n]===e)))(o)||String.fromCharCode(o))),setScope:Fa,getScope:Ks,deleteScope:(o,e)=>{let n,r;o||(o=Ks());for(const a in rn)if(Object.prototype.hasOwnProperty.call(rn,a))for(n=rn[a],r=0;r<n.length;)n[r].scope===o?n.splice(r,1).forEach((({element:i})=>Lo(i))):r++;Ks()===o&&Fa(e||"all")},getPressedKeyCodes:()=>tn.slice(0),getAllKeyCodes:()=>{const o=[];return Object.keys(rn).forEach((e=>{rn[e].forEach((({key:n,scope:r,mods:a,shortcut:i})=>{o.push({scope:r,shortcut:i,mods:a,keys:n.split("+").map((l=>Ns(l)))})}))})),o},isPressed:o=>(typeof o=="string"&&(o=Ns(o)),tn.indexOf(o)!==-1),filter:Yl,trigger:function(o,e="all"){Object.keys(rn).forEach((n=>{rn[n].filter((r=>r.scope===e&&r.shortcut===o)).forEach((r=>{r&&r.method&&r.method({},r)}))}))},unbind:Xl,keyMap:Vs,modifier:Bn,modifierMap:Bs};for(const o in to){const e=o;Object.prototype.hasOwnProperty.call(to,e)&&(zn[e]=to[e])}if(typeof window<"u"){const o=window.hotkeys;zn.noConflict=e=>(e&&window.hotkeys===zn&&(window.hotkeys=o),zn),window.hotkeys=zn}function v$(o,e,n){zn(o,{keydown:!0,element:document.body},((r,a)=>e(r,a,n)))}function g$(o){const{commandName:e}=o;if(e)return(n,r,a)=>{if(n.defaultPrevented)return;const i=a.getState();if(fo.select(i))return;const l=Yu.select(i);e.split(/,\s*/g).filter((c=>l[c]?.isDefault)).map((c=>a.dispatch(Xu(c)))).find((c=>!!c))&&(n.preventDefault(),n.stopPropagation())}}function Wa(o,e){const n=Ku(o),r=e.getState();if(!fo.select(r))for(const a of n){const i=g$(a);i&&v$(a.key,i,e)}}zn.filter=()=>!0;const h$=(o,{config:e,store:n})=>(Wa(e,n),{update({config:r,store:a}){zn.deleteScope("all"),Wa(r,a)},destroy(){zn.deleteScope("all")}});var m$=h("<!> <!>",1),p$=h("<!> <!>",1),f$=h('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),_$=h("<!> <!> <!>",1),y$=h('<!> <!> <!> <!> <!> <div class="chat svelte-1hs4wcp"><!> <!></div>',1);function b$(o,e){Ce(e,!0);const n=()=>G(C,"$enableRules",u),r=()=>G(L,"$enablePersonalities",u),a=()=>G(S,"$enableExternalSourcesInChat",u),i=()=>G(I,"$retryChatStreamTimeouts",u),l=()=>G(M,"$remoteAgentsModel",u),c=()=>G(z,"$currentConversationId",u),[u,g]=Xe();let p=H(e,"initialFlags",19,(()=>{})),y=H(e,"initialConversation",19,(()=>{})),m=H(e,"initialBanner",19,(()=>{})),v=H(e,"initialSubscriptionDismissed",19,(()=>{}));const w=ut(),{store:E}=rs(),A=Ct("enableAgentMode"),$=Ct("enableModelRegistry"),C=Ct("enableRules"),L=Ct("enablePersonalities"),S=Ct("enableExternalSourcesInChat"),I=Ct("retryChatStreamTimeouts"),O=Ct("enableBackgroundAgents"),D=Ti(),z=ln(),K=ja(),j=Qu(),V=Zu(z),R=new nr(an);Jt((()=>{G(D,"$isStateHydrated",u)||w(Ii(y(),{}))}));const x=new er(an,R,{enableRules:n(),enablePersonalities:r(),enableExternalSourcesInChat:a(),retryChatStreamTimeouts:i()}),B=Ct("enableAgentGitTracker");if(G(B,"$enableAgentGitTracker",u)){const oe=(function(ve,ye){const Ne=new u$(ve),Re=new Ss,Oe=new Oo(Re,Ne,ve,ye);return Ss.setInContext(Re,Oe),{model:Re,controller:Oe}})(x,B);R.registerConsumer(oe.controller)}const q=new Ir(R),M=new un({reduxStore:E,msgBroker:R,isActive:!1,extensionClientConfig:{enableRules:n(),enablePersonalities:r(),enableExternalSourcesInChat:a(),retryChatStreamTimeouts:i()},enableBackgroundAgents:O,host:an,gitRefModel:q}),W=new ia(R);R.registerConsumer(M),Rn(un.key,M),Rn(Ir.key,q),Rn(ia.key,W);const U=Xt(-1);Rn(Tm,U);const F={agentOverviews:[],selectedAgentId:void 0,activeWebviews:["chat"],pinnedAgents:{}},T=new Ui(R,F,kv,Av);R.registerConsumer(T),Rn(zi,T);const N=new us(E,M,{enableBackgroundAgents:G(O,"$enableBackgroundAgents",u),enableModelRegistry:G($,"$enableModelRegistry",u)});R.registerConsumer(N),Rn(us.key,N),ot((()=>Xb(T,l(),F)));let J=T.state;ot((()=>{Jb(J,G(T,"$sharedWebviewStore",u),l(),x,N)})),ev(x);const Y=d((()=>!l().isRemoteAgentSshWindow)),Q=(function({isCurrConversationAgentic:oe,remoteAgentsModel:ve,canShowTaskList:ye}){return At([oe,ve,ye],(([Ne,Re,Oe])=>{const Be=Ne&&!Re?.isActive;return{showMessageHistory:Be,showTasks:Be&&Oe,showAgentEdits:Be&&Ne}}))})({isCurrConversationAgentic:K,remoteAgentsModel:M,canShowTaskList:V}),X=Uv(B,Q,K);sr.setInContext(X),R.registerConsumer(new Kb);let ee,se=!1;ot((()=>(oe=>{const ve=oe.isRemoteAgentSshWindow,ye=oe.remoteAgentSshWindowId;se===ve&&ee===ye||(se=ve,ee=ye,ve&&ye&&(N.setToRemoteAgent(ye),oe.setCurrentAgent(ye),oe.setIsActive(!0)))})(l()))),Jt((()=>{w(tv(!1)),m()?w(nv(m())):w(sv()),v()?w(rv(new Date().toISOString())):w(ov()),p()&&w(Si(p())),l().isRemoteAgentSshWindow&&l().remoteAgentSshWindowId&&(N.setToRemoteAgent(l().remoteAgentSshWindowId),M.setCurrentAgent(l().remoteAgentSshWindowId),M.setIsActive(!0));const oe=[M.dispose];return x.getChatInitData(),()=>{oe.forEach((ve=>ve?.()))}}));const we=d((()=>G(A,"$enableAgentMode",u)&&G(K,"$isAgentic",u)&&!l().isActive));Vv();const $e=av(),te=iv(),Ie=()=>{w(br(G($e,"$nextConversationId",u),{shouldUpdateLastInteractedAt:!1}))},me=()=>{w(br(G(te,"$prevConversationId",u),{shouldUpdateLastInteractedAt:!1}))};ot((()=>{c()&&X&&X.getCurrentAvailableTabs().includes(mn.messageHistory)&&X.setActiveTab(mn.messageHistory)}));const Ae=Br(Qn.deepLinkWarning);var ce=y$();Ft("message",fn,(function(...oe){R.onMessageFromExtension?.apply(this,oe)})),Ft("focus",fn,(()=>{x.setChatContextVariables({extensionFocused:!0})})),Ft("blur",fn,(()=>{x.setChatContextVariables({extensionFocused:!1})})),Ft("beforeunload",fn,(()=>{w(ro()),w(lv()),c()&&cv(G(j,"$conversationExchangesCount",u))}));var ue=b(ce);(function(oe,ve){Ce(ve,!1);const{store:ye}=rs();Kn(),kn(fn,((Ne,Re)=>h$?.(Ne,Re)),(()=>({config:Ju,store:ye}))),Ee()})(0,{});var ke=f(ue,2);Qb(0,{get msgBroker(){return R}});var re=f(ke,2);Qr(re,{get modalId(){return Qn.threadsPanel},animationDirection:"left",children:(oe,ve)=>{Cm(oe,{onClose:()=>{w(lt(tt.WEBVIEW.THREADS_MODAL_CLOSED,{})),w(oo(Qn.threadsPanel))}})},$$slots:{default:!0}});var ie=f(re,2);Qr(ie,{get modalId(){return Qn.memories},children:(oe,ve)=>{Oy(oe,{})},$$slots:{default:!0}});var he=f(ie,2);Qr(he,{get modalId(){return Qn.deepLinkWarning},fullsize:!1,children:(oe,ve)=>{l$(oe,{get deepLinkWarning(){return G(Ae,"$deeplinkWarningModal",u).params}})},$$slots:{default:!0}});var de=f(he,2),le=_(de);(function(oe,ve){Ce(ve,!0);const ye=()=>G(Oe,"$activeCommandId",Ne),[Ne,Re]=Xe(),Oe=Zb(),Be=ut();ot((()=>{ye()&&(Be(Hu(ye())),Be(Wu()))}));var Ge=e$();s(oe,Ge),Ee(),Re()})(le,{});var _e=f(le,2);Ar(_e,{scope:"chat",children:(oe,ve)=>{var ye=_$(),Ne=b(ye),Re=Be=>{var Ge=m$(),xe=b(Ge);on(xe,{name:"goToNextConversation",handler:Ie});var ze=f(xe,2);on(ze,{name:"goToPreviousConversation",handler:me}),s(Be,Ge)};k(Ne,(Be=>{M?.isActive||Be(Re)}));var Oe=f(Ne,2);on(Oe,{name:"toggleThreadsPanel",handler:()=>{w(lt(tt.WEBVIEW.THREADS_MODAL_OPENED,{})),w(ea(Qn.threadsPanel))}});{const Be=He=>{sl(He,{children:(Le,De)=>{var pe=p$(),fe=b(pe);(function(Pe,We){const Ye=H(We,"shouldShowThreadsList",3,!1),Qe=H(We,"onOpenThreads",3,(()=>{}));let st=Te(!1);var Ke=Zm(),vt=_(Ke),dt=Me=>{var Ue=Jm(),Je=_(Ue);at(Je,{side:"bottom",nested:!1,content:Ze=>{var bt=Xm(),Bt=f(_(bt));_n(Bt,{commandName:"toggleThreadsPanel",keysOnly:!0}),s(Ze,bt)},children:(Ze,bt)=>{St(Ze,{class:"c-chat-header__menu-btn",variant:"ghost-block",color:"neutral",size:.5,get onclick(){return Qe()},children:(Bt,Vt)=>{qm(Bt,{children:(Qt,Kt)=>{Se(Qt,{name:"menu",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{content:!0,default:!0}}),s(Me,Ue)};k(vt,(Me=>{Ye()&&!t(st)&&Me(dt)}));var yt=f(vt,2);Ym(_(yt),{get isEditing(){return t(st)},set isEditing(Me){Z(st,Me,!0)}});var Ve=f(yt,2),ne=Me=>{var Ue=Qm();Lm(_(Ue),{}),s(Me,Ue)};k(Ve,(Me=>{t(st)||Me(ne)})),s(Pe,Ke)})(fe,{onOpenThreads:()=>{w(lt(tt.WEBVIEW.THREADS_MODAL_OPENED,{})),w(ea(Qn.threadsPanel))},get shouldShowThreadsList(){return t(Y)}}),(function(Pe){var We=tp();nt(We,"id",il),s(Pe,We)})(f(fe,2)),s(Le,pe)}})},Ge=He=>{(function(Le){var De=Jy(),pe=_(De);Wy(pe,{}),Xy(f(pe,2),{}),s(Le,De)})(He)},xe=He=>{var Le=P(),De=b(Le),pe=Pe=>{fy(Pe,{})},fe=Pe=>{var We=P(),Ye=b(We),Qe=Ke=>{var vt=P(),dt=b(vt);Ds(dt,(()=>Ms((()=>import("./RemoteMessageSection-BUoObpWa.js")),__vite__mapDeps([80,1,2,59,9,10,11,12,60,39,40,6,7,8,13,14,5,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,41,3,4,30,31,32,33,34,35,65,66,46,45,47,48,49,50,51,52,53,54,55,56,57,58,61,43,38,62,81,42,44,69,63,64,70,71,72,82,83,36,37,67,68,73,74,75,84]),import.meta.url)),null,((yt,Ve)=>{var ne=d((()=>{var{default:rt}=t(Ve);return{RemoteMessageSection:rt}})),Me=d((()=>t(ne).RemoteMessageSection)),Ue=P(),Je=b(Ue);be(Je,(()=>t(Me)),((rt,Ze)=>{Ze(rt,{})})),s(yt,Ue)})),s(Ke,vt)},st=Ke=>{qy(Ke,{})};k(Ye,(Ke=>{l().isActive?Ke(Qe):Ke(st,!1)}),!0),s(Pe,We)};k(De,(Pe=>{t(we)?Pe(pe):Pe(fe,!1)})),s(He,Le)},ze=He=>{var Le=f$(),De=b(Le);zs(De,(()=>({"--toast-offset-y":"-12px"}))),be(De.lastChild,(()=>ss.Root),((pe,fe)=>{fe(pe,{})})),jb(f(De,2),{}),s(He,Le)};(function(He,Le){var De=ep(),pe=_(De),fe=_(pe);et(fe,(()=>Le.headerArea??pt));var Pe=f(pe,2),We=_(Pe);et(We,(()=>Le.topStatusArea??pt));var Ye=f(Pe,2),Qe=_(Ye);et(Qe,(()=>Le.messageArea??pt));var st=f(Ye,2),Ke=_(st);et(Ke,(()=>Le.inputHint??pt));var vt=f(st,2),dt=_(vt),yt=_(dt);et(yt,(()=>Le.notificationsArea??pt));var Ve=f(vt,2),ne=f(Ve,2),Me=_(ne);et(Me,(()=>Le.dividerArea??pt));var Ue=f(ne,2),Je=_(Ue);et(Je,(()=>Le.inputArea??pt)),ge((()=>{nt(pe,"id",Sn.header),nt(Pe,"id",Sn.floating),nt(Ye,"id",Sn.message),nt(st,"id",Sn.inputHint),nt(dt,"id",Sn.notifications),nt(Ve,"id",Sn.below_notifications),nt(ne,"id",Sn.divider),nt(Ue,"id",Sn.input)})),s(He,De)})(f(Oe,2),{headerArea:Be,topStatusArea:Ge,messageArea:xe,notificationsArea:ze})}s(oe,ye)},$$slots:{default:!0}}),s(o,ce),Ee(),g()}var $$=h('<div class="l-onboarding-layout__error svelte-1j9rq0d"><!></div>'),w$=h('<div class="l-onboarding-layout svelte-1j9rq0d"><div class="l-onboarding-layout__notifications svelte-1j9rq0d"><!></div> <div class="l-onboarding-layout__content svelte-1j9rq0d"><!></div> <!></div>');function Fr(o,e){var n=w$(),r=_(n),a=_(r);be(a,(()=>ss.Root),((p,y)=>{y(p,{})}));var i=f(r,2),l=_(i),c=p=>{var y=P(),m=b(y);et(m,(()=>e.children)),s(p,y)};k(l,(p=>{e.children&&p(c)}));var u=f(i,2),g=p=>{var y=$$(),m=_(y);et(m,(()=>e.error)),s(p,y)};k(u,(p=>{e.error&&p(g)})),s(o,n)}var k$=h('<div class="c-augment-title__logo svelte-bwms5p"><!></div>'),A$=h('<div class="c-augment-title svelte-bwms5p"><!> <!></div>');function Jl(o,e){const n=H(e,"showLogo",3,!1);var r=A$(),a=_(r),i=c=>{var u=k$(),g=_(u);Se(g,{name:"augment-logo"}),s(c,u)};k(a,(c=>{n()&&c(i)}));var l=f(a,2);Fe(l,{size:4,color:"primary",children:(c,u)=>{var g=ae("augment code");s(c,g)},$$slots:{default:!0}}),s(o,r)}var C$=h('<span class="svelte-1xbphwq">Better Context.</span> <span class="svelte-1xbphwq">Better Agent.</span> <span class="svelte-1xbphwq">Better Code.</span>',1),E$=h('<div class="c-sign-in svelte-1xbphwq"><!> <!> <div class="c-sign-in__better-text svelte-1xbphwq"><!></div> <!> <!> <div class="c-augment-features svelte-1xbphwq"></div></div>');function T$(o,e){Ce(e,!0);const n=new er(an,new nr(an));let r=Te(void 0);function a(){n.track(tt.WEBVIEW.ONBOARDING_SIGNIN_BUTTON_CLICKED,{}),an.postMessage({type:jt.mainPanelPerformAction,data:"sign-in"})}Jt((()=>{n.track(tt.WEBVIEW.ONBOARDING_SIGNIN_VIEW_DISPLAYED,{}),an.postMessage({type:jt.signInLoaded})}));const i=d((()=>[{name:"Agent",href:`https://docs.augmentcode.com/using-augment/agent?utm_source=${t(r)}`},{name:"Chat",href:`https://docs.augmentcode.com/using-augment/chat?utm_source=${t(r)}`},{name:"Code Completions",href:`https://docs.augmentcode.com/using-augment/completions?utm_source=${t(r)}`},{name:"Instructions",href:`https://docs.augmentcode.com/using-augment/instructions?utm_source=${t(r)}`},{name:"Next Edit",visible:!!t(r)&&t(r)!=="intellij",href:`https://docs.augmentcode.com/using-augment/next-edit?utm_source=${t(r)}`}].filter((l=>l.visible!==!1))));Ft("message",fn,(l=>{const c=l.data;c.type===jt.signInLoadedResponse&&Z(r,c.data.client,!0)})),Fr(o,{children:(l,c)=>{On(l,{maxWidth:"250px",children:(u,g)=>{var p=E$(),y=_(p);Vi(y,{sizePx:60,floatHeight:10});var m=f(y,2);Jl(m,{});var v=f(m,2),w=_(v);Fe(w,{size:1,children:(C,L)=>{var S=C$();s(C,S)},$$slots:{default:!0}});var E=f(v,2);Et(E,{variant:"solid",color:"accent",size:1,onclick:a,"data-testid":"sign-in-button",children:(C,L)=>{var S=ae("Sign In");s(C,S)},$$slots:{default:!0}});var A=f(E,2);Dr(A,{size:4});var $=f(A,2);Pt($,21,(()=>t(i)),(C=>C.name),((C,L)=>{Et(C,{variant:"soft",color:"neutral",size:.5,get href(){return t(L).href},asAnchor:!0,onclick:()=>{return S=t(L).name,I=t(L).href,void n.track(tt.WEBVIEW.ONBOARDING_FEATURE_LINK_CLICKED,{featureName:S,client:I});var S,I},children:(S,I)=>{Fe(S,{size:0,children:(O,D)=>{var z=ae();ge((()=>qe(z,t(L).name))),s(O,z)},$$slots:{default:!0}})},$$slots:{default:!0}})})),s(u,p)},$$slots:{default:!0}})}}),Ee()}var I$=h("<!> Back",1),S$=h('<div class="c-back-button-container"><!></div>'),x$=h('<div class="c-awaiting-syncing-permission__header svelte-1u4pkr8"><!></div>'),R$=h('<span>Your data always stays secure and private. <a href="https://docs.augmentcode.com/setup-augment/workspace-indexing" class="c-awaiting-syncing-permission__link svelte-1u4pkr8">Learn More</a></span>'),M$=h('<div class="c-awaiting-syncing-permission__content svelte-1u4pkr8"><!> <!> <!></div>'),D$=h("<div><!></div> Indexing allows Augment to make tailored suggestions and explain common practice patterns.",1),z$=h('<div class="c-awaiting-syncing-permission svelte-1u4pkr8"><!> <!> <div class="c-awaiting-syncing-permission__footer-text svelte-1u4pkr8"><!></div></div>'),N$=h("<!> <!>",1);function O$(o,e){Ce(e,!0);const n=()=>G(u,"$workspaceNameStore",r),[r,a]=Xe(),i=new nr(an),l=new er(an,i,{enableRules:!1,enablePersonalities:!1,enableExternalSourcesInChat:!1,retryChatStreamTimeouts:!1});let c=Te(!1);const u=wi();function g(){Z(c,!0),l.track(tt.WEBVIEW.ONBOARDING_ENABLE_INDEXING_CLICKED,{}),l.grantSyncPermission(),m(Si({areFlagsReady:!0}))}function p(){l.track(tt.WEBVIEW.ONBOARDING_CHANGE_FOLDER_CLICKED,{}),l.openProjectFolder()}function y(){l.track(tt.WEBVIEW.ONBOARDING_BACK_TO_FOLDER_SELECTION_CLICKED,{}),l.closeProjectFolder()}const m=ut(),v=Gb(),w=d((()=>(function(I){const O=new Set([Wn.workspaceNotSelected,Wn.workspaceTooLarge,Wn.uploadingHomeDir]);return I.filter((D=>O.has(D)))})(G(v,"$mainPanelActions",r)))),E=d((()=>t(w)[0])),A=d((()=>t(E)===Wn.workspaceTooLarge||t(E)===Wn.uploadingHomeDir));Jt((()=>{l.track(tt.WEBVIEW.ONBOARDING_SYNCING_PERMISSION_VIEW_DISPLAYED,{workspaceName:n()??void 0}),m(Xs({type:jt.awaitingSyncingPermissionLoaded}))}));var $=N$(),C=b($);Fr(C,{children:(I,O)=>{var D=z$(),z=_(D),K=x=>{var B=S$(),q=_(B);Et(q,{variant:"ghost",color:"neutral",size:1,onclick:y,children:(M,W)=>{var U=I$(),F=b(U);Se(F,{name:"chevron-left"}),s(M,U)},$$slots:{default:!0}}),s(x,B)};k(z,(x=>{pc()&&x(K)}));var j=f(z,2);On(j,{maxWidth:"300px",header:B=>{var q=x$(),M=_(q);Fe(M,{size:4,color:"primary",children:(W,U)=>{var F=ae("Indexing Codebase");s(W,F)},$$slots:{default:!0}}),s(B,q)},children:(B,q)=>{var M=M$(),W=_(M);at(W,{content:"Open a new project",children:(T,N)=>{Et(T,{variant:"outline",color:"neutral",size:1,onclick:p,iconLeft:Y=>{Se(Y,{name:"folder-cog"})},children:(Y,Q)=>{var X=ae();ge((()=>qe(X,n()??"Open a folder"))),s(Y,X)},$$slots:{iconLeft:!0,default:!0}})},$$slots:{default:!0}});var U=f(W,2);Fe(U,{size:1,children:(T,N)=>{var J=R$();s(T,J)},$$slots:{default:!0}});var F=f(U,2);{let T=d((()=>!n()||t(A)));Et(F,{variant:"solid",color:"accent",size:1,onclick:g,get disabled(){return t(T)},get loading(){return t(c)},children:(N,J)=>{var Y=ae("Start Indexing");s(N,Y)},$$slots:{default:!0}})}s(B,M)},$$slots:{header:!0,default:!0}});var V=f(j,2),R=_(V);Fe(R,{size:1,color:"secondary",children:(x,B)=>{var q=D$(),M=b(q),W=_(M);Se(W,{name:"info",size:2}),s(x,q)},$$slots:{default:!0}}),s(I,D)}});var L=f(C,2),S=I=>{Hl(I,{get action(){return t(E)}})};k(L,(I=>{t(E)&&I(S)})),s(o,$),Ee(),a()}var L$=h('<a class="svelte-4d4nqo">Chat</a> & <a class="svelte-4d4nqo">Agent,</a>',1),P$=h(', <a class="svelte-4d4nqo">Instructions</a>,',1),B$=h('<a class="svelte-4d4nqo">Code Completions</a><!>',1),F$=h('<a class="svelte-4d4nqo">Next Edit</a>'),q$=h('<div class="c-augment-features svelte-4d4nqo"><!> <!> <!> <!></div>'),H$=h('<div class="c-folder-selection__content svelte-w9z64m"><!> <div class="c-folder-selection__buttons svelte-w9z64m"><!> <!></div> <!></div>'),W$=h('<div class="c-folder-selection svelte-w9z64m"><!></div>');function G$(o,e){Ce(e,!0);const[n,r]=Xe(),a=dv(),i=new er(an,new nr(an));function l(){i.openProjectFolder(),i.track(tt.WEBVIEW.ONBOARDING_OPEN_FOLDER_CLICKED,{})}function c(){i.cloneRepository(),i.track(tt.WEBVIEW.ONBOARDING_CLONE_REPOSITORY_CLICKED,{})}const u=d((()=>(function(g){const p=g?.split("@")[0]??"";return p?p[0].toUpperCase()+p.slice(1):""})(G(a,"$userEmail",n)??void 0)));Jt((()=>{i.track(tt.WEBVIEW.ONBOARDING_FOLDER_SELECTION_VIEW_DISPLAYED,{}),an.postMessage({type:jt.folderSelectionLoaded})})),Fr(o,{children:(g,p)=>{var y=W$();{const m=v=>{Jl(v,{showLogo:!0})};On(_(y),{maxWidth:"250px",header:m,children:(v,w)=>{var E=H$(),A=_(E);Fe(A,{size:1,children:(S,I)=>{var O=P(),D=b(O),z=j=>{var V=ae();ge((()=>qe(V,`Hello, ${t(u)??""}.`))),s(j,V)},K=j=>{var V=ae("Welcome to Augment!");s(j,V)};k(D,(j=>{t(u)?j(z):j(K,!1)})),s(S,O)},$$slots:{default:!0}});var $=f(A,2),C=_($);Et(C,{variant:"soft",color:"neutral",size:2,onclick:l,iconLeft:I=>{Se(I,{name:"folder-open"})},children:(I,O)=>{Fe(I,{size:1,children:(D,z)=>{var K=ae("Open a Folder");s(D,K)},$$slots:{default:!0}})},$$slots:{iconLeft:!0,default:!0}});var L=f(C,2);Et(L,{variant:"soft",color:"neutral",size:2,onclick:c,iconLeft:I=>{Se(I,{name:"folders"})},children:(I,O)=>{Fe(I,{size:1,children:(D,z)=>{var K=ae("Clone a Repository");s(D,K)},$$slots:{default:!0}})},$$slots:{iconLeft:!0,default:!0}}),(function(S,I){let O=H(I,"client",19,(()=>{}));var D=P(),z=b(D),K=j=>{var V=q$(),R=_(V);Fe(R,{size:1,children:(W,U)=>{var F=ae("Augment Features:");s(W,F)},$$slots:{default:!0}});var x=f(R,2);Fe(x,{size:1,children:(W,U)=>{var F=L$(),T=b(F),N=f(T,2);ge((()=>{nt(T,"href",`https://docs.augmentcode.com/using-augment/chat?utm_source=${O()??""}`),nt(N,"href",`https://docs.augmentcode.com/using-augment/agent?utm_source=${O()??""}`)})),s(W,F)},$$slots:{default:!0}});var B=f(x,2);Fe(B,{size:1,children:(W,U)=>{var F=B$(),T=b(F),N=f(T),J=Y=>{var Q=P$(),X=f(b(Q));ge((()=>nt(X,"href",`https://docs.augmentcode.com/using-augment/instructions?utm_source=${O()??""}`))),s(Y,Q)};k(N,(Y=>{O()!=="intellij"&&Y(J)})),ge((()=>nt(T,"href",`https://docs.augmentcode.com/using-augment/completions?utm_source=${O()??""}`))),s(W,F)},$$slots:{default:!0}});var q=f(B,2),M=W=>{Fe(W,{size:1,children:(U,F)=>{var T=F$();ge((()=>nt(T,"href",`https://docs.augmentcode.com/using-augment/next-edit?utm_source=${O()??""}`))),s(U,T)},$$slots:{default:!0}})};k(q,(W=>{O()!=="intellij"&&W(M)})),s(j,V)};k(z,(j=>{O()!==void 0&&j(K)})),s(S,D)})(f($,2),{}),s(v,E)},$$slots:{header:!0,default:!0}})}s(g,y)}}),Ee(),r()}var U$=h('<div class="c-loading svelte-18w0lxw"><!></div>');function V$(o){return o&&(function(e){return e&&e instanceof HTMLAnchorElement})(o)?o.closest("a"):null}var j$=h("<div></div>"),K$=h('<main class="c-main-panel-view svelte-blrzw3"><!> <!></main>');function Y$(o,e){Ce(e,!0);const n=()=>G(c,"$isStateHydrated",a),r=()=>G(l,"$visibleApp",a),[a,i]=Xe(),l=Mg(),c=Ti(),u=Ct("areFlagsReady"),g=d((()=>n()&&G(u,"$areFlagsUpdated",a)));let p=Te(!1);const y=ut();ot((()=>{r()!==as.chat||n()||t(p)||(y(Ii(void 0,{})),Z(p,!0))})),Jt((()=>{an.postMessage({type:jt.mainPanelLoaded})}));{let m=d((()=>r()===as.chat));uv(o,{get fetch(){return t(m)},children:(v,w)=>{var E=K$(),A=_(E),$=L=>{(function(S){Fr(S,{children:(I,O)=>{var D=U$(),z=_(D);Vi(z,{}),s(I,D)}})})(L)},C=L=>{var S=P(),I=b(S),O=z=>{T$(z,{})},D=z=>{var K=P(),j=b(K),V=x=>{b$(x,{})},R=x=>{var B=P(),q=b(B),M=U=>{O$(U,{})},W=U=>{var F=P(),T=b(F),N=J=>{G$(J,{})};k(T,(J=>{r()===as.folderSelection&&J(N)}),!0),s(U,F)};k(q,(U=>{r()===as.awaitingSyncingPermission?U(M):U(W,!1)}),!0),s(x,B)};k(j,(x=>{r()===as.chat?x(V):x(R,!1)}),!0),s(z,K)};k(I,(z=>{r()===as.signIn?z(O):z(D,!1)}),!0),s(L,S)};k(A,(L=>{r()===as.loading||r()===as.chat&&!t(g)?L($):L(C,!1)})),(function(L){var S=j$();ge((()=>nt(S,"id",Gl))),s(L,S)})(f(A,2)),kn(E,(L=>(function(S){function I(O){const D=V$(O.target);if(!D)return;const z=D.getAttribute("href");if(z&&z.startsWith("augment://")){const K=`Unhandled augment link: "${z}"`,j=new Error(K);return an.postMessage({type:jt.reportError,data:{originalRequestId:null,sanitizedMessage:j.message,stackTrace:j.stack||"",diagnostics:[]}}),an.postMessage({type:jt.showNotification,data:{message:K,type:"error"}}),O.stopImmediatePropagation(),O.preventDefault(),O.stopPropagation(),!1}}return S.addEventListener("click",I),{destroy(){S.removeEventListener("click",I)}}})(L))),s(v,E)},$$slots:{default:!0}})}Ee(),i()}function X$(o){Va.Root(o,{children:(e,n)=>{vv(e,{children:(r,a)=>{Y$(r,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}(async function(){an&&an.initialize&&await an.initialize(),fc(X$,{target:document.getElementById("app")})})();export{ll as A,Nl as C,vl as D,jm as E,Is as G,xn as I,Ss as M,zo as R,Tm as S,Hs as T,Us as a,wt as b,Sn as c,Ir as d,yl as e,q1 as f,ul as g,hl as h,bl as i,Uw as j,H1 as k,Gs as l,ya as m,pl as n,B1 as o,jw as p,h0 as q,Vw as r,E1 as s,il as t};
//# sourceMappingURL=main-panel-BBvwZc5z.js.map
