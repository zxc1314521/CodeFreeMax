import{_ as it,K as ze,ac as Ve,l as xe,b as Be,a as We,q as je,t as qe,g as $e,s as Ze,z as Je,F as Ke,G as Qe,H as tr,c as ge,am as ce,aH as se,i as er,d as rr,y as nr,aI as ir,aJ as or}from"./mermaid-BF5da6U1.js";import{p as ar}from"./chunk-4BX2VUAB-DwxLpe_I.js";import{p as sr}from"./treemap-KMMF4GRG-BHLPsMSr.js";import{c as Oe}from"./cytoscape.esm-YGSjWaR6.js";import{g as hr}from"./_commonjsHelpers-CwkBNZ52.js";import"./debounce-BNOmQ76Y.js";import"./SimpleMonaco-BBDXOnfl.js";import"./min-BK871UjU.js";import"./_baseUniq-D51PL97z.js";import"./noop-CVINQ7cR.js";try{Zt=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Ne=new Zt.Error().stack)&&(Zt._sentryDebugIds=Zt._sentryDebugIds||{},Zt._sentryDebugIds[Ne]="c85fdf1d-dd8b-46b9-a27a-9593a9fcf404",Zt._sentryDebugIdIdentifier="sentry-dbid-c85fdf1d-dd8b-46b9-a27a-9593a9fcf404")}catch{}var Zt,Ne,Te,Ae={exports:{}},he={exports:{}},le={exports:{}};le.exports;function lr(){return Te||(Te=1,O=function(){return(function(A){var D={};function T(c){if(D[c])return D[c].exports;var i=D[c]={i:c,l:!1,exports:{}};return A[c].call(i.exports,i,i.exports,T),i.l=!0,i.exports}return T.m=A,T.c=D,T.i=function(c){return c},T.d=function(c,i,s){T.o(c,i)||Object.defineProperty(c,i,{configurable:!1,enumerable:!0,get:s})},T.n=function(c){var i=c&&c.__esModule?function(){return c.default}:function(){return c};return T.d(i,"a",i),i},T.o=function(c,i){return Object.prototype.hasOwnProperty.call(c,i)},T.p="",T(T.s=28)})([function(A,D,T){function c(){}c.QUALITY=1,c.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,c.DEFAULT_INCREMENTAL=!1,c.DEFAULT_ANIMATION_ON_LAYOUT=!0,c.DEFAULT_ANIMATION_DURING_LAYOUT=!1,c.DEFAULT_ANIMATION_PERIOD=50,c.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,c.DEFAULT_GRAPH_MARGIN=15,c.NODE_DIMENSIONS_INCLUDE_LABELS=!1,c.SIMPLE_NODE_SIZE=40,c.SIMPLE_NODE_HALF_SIZE=c.SIMPLE_NODE_SIZE/2,c.EMPTY_COMPOUND_NODE_SIZE=40,c.MIN_EDGE_LENGTH=1,c.WORLD_BOUNDARY=1e6,c.INITIAL_WORLD_BOUNDARY=c.WORLD_BOUNDARY/1e3,c.WORLD_CENTER_X=1200,c.WORLD_CENTER_Y=900,A.exports=c},function(A,D,T){var c=T(2),i=T(8),s=T(9);function n(e,a,h){c.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=e,this.target=a}for(var t in n.prototype=Object.create(c.prototype),c)n[t]=c[t];n.prototype.getSource=function(){return this.source},n.prototype.getTarget=function(){return this.target},n.prototype.isInterGraph=function(){return this.isInterGraph},n.prototype.getLength=function(){return this.length},n.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},n.prototype.getBendpoints=function(){return this.bendpoints},n.prototype.getLca=function(){return this.lca},n.prototype.getSourceInLca=function(){return this.sourceInLca},n.prototype.getTargetInLca=function(){return this.targetInLca},n.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},n.prototype.getOtherEndInGraph=function(e,a){for(var h=this.getOtherEnd(e),g=a.getGraphManager().getRoot();;){if(h.getOwner()==a)return h;if(h.getOwner()==g)break;h=h.getOwner().getParent()}return null},n.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},n.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},A.exports=n},function(A,D,T){A.exports=function(c){this.vGraphObject=c}},function(A,D,T){var c=T(2),i=T(10),s=T(13),n=T(0),t=T(16),e=T(5);function a(g,o,d,r){d==null&&r==null&&(r=o),c.call(this,r),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=r,this.edges=[],this.graphManager=g,this.rect=d!=null&&o!=null?new s(o.x,o.y,d.width,d.height):new s}for(var h in a.prototype=Object.create(c.prototype),c)a[h]=c[h];a.prototype.getEdges=function(){return this.edges},a.prototype.getChild=function(){return this.child},a.prototype.getOwner=function(){return this.owner},a.prototype.getWidth=function(){return this.rect.width},a.prototype.setWidth=function(g){this.rect.width=g},a.prototype.getHeight=function(){return this.rect.height},a.prototype.setHeight=function(g){this.rect.height=g},a.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},a.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},a.prototype.getCenter=function(){return new e(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},a.prototype.getLocation=function(){return new e(this.rect.x,this.rect.y)},a.prototype.getRect=function(){return this.rect},a.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},a.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},a.prototype.setRect=function(g,o){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=o.width,this.rect.height=o.height},a.prototype.setCenter=function(g,o){this.rect.x=g-this.rect.width/2,this.rect.y=o-this.rect.height/2},a.prototype.setLocation=function(g,o){this.rect.x=g,this.rect.y=o},a.prototype.moveBy=function(g,o){this.rect.x+=g,this.rect.y+=o},a.prototype.getEdgeListToNode=function(g){var o=[],d=this;return d.edges.forEach((function(r){if(r.target==g){if(r.source!=d)throw"Incorrect edge source!";o.push(r)}})),o},a.prototype.getEdgesBetween=function(g){var o=[],d=this;return d.edges.forEach((function(r){if(r.source!=d&&r.target!=d)throw"Incorrect edge source and/or target";r.target!=g&&r.source!=g||o.push(r)})),o},a.prototype.getNeighborsList=function(){var g=new Set,o=this;return o.edges.forEach((function(d){if(d.source==o)g.add(d.target);else{if(d.target!=o)throw"Incorrect incidency!";g.add(d.source)}})),g},a.prototype.withChildren=function(){var g=new Set;if(g.add(this),this.child!=null)for(var o=this.child.getNodes(),d=0;d<o.length;d++)o[d].withChildren().forEach((function(r){g.add(r)}));return g},a.prototype.getNoOfChildren=function(){var g=0;if(this.child==null)g=1;else for(var o=this.child.getNodes(),d=0;d<o.length;d++)g+=o[d].getNoOfChildren();return g==0&&(g=1),g},a.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},a.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},a.prototype.scatter=function(){var g,o,d=-n.INITIAL_WORLD_BOUNDARY,r=n.INITIAL_WORLD_BOUNDARY;g=n.WORLD_CENTER_X+t.nextDouble()*(r-d)+d;var f=-n.INITIAL_WORLD_BOUNDARY,v=n.INITIAL_WORLD_BOUNDARY;o=n.WORLD_CENTER_Y+t.nextDouble()*(v-f)+f,this.rect.x=g,this.rect.y=o},a.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),n.NODE_DIMENSIONS_INCLUDE_LABELS){var o=g.getRight()-g.getLeft(),d=g.getBottom()-g.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(o+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>o?(this.rect.x-=(this.labelWidth-o)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(o+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(d+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>d?(this.rect.y-=(this.labelHeight-d)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(d+this.labelHeight))}}},a.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},a.prototype.transform=function(g){var o=this.rect.x;o>n.WORLD_BOUNDARY?o=n.WORLD_BOUNDARY:o<-n.WORLD_BOUNDARY&&(o=-n.WORLD_BOUNDARY);var d=this.rect.y;d>n.WORLD_BOUNDARY?d=n.WORLD_BOUNDARY:d<-n.WORLD_BOUNDARY&&(d=-n.WORLD_BOUNDARY);var r=new e(o,d),f=g.inverseTransformPoint(r);this.setLocation(f.x,f.y)},a.prototype.getLeft=function(){return this.rect.x},a.prototype.getRight=function(){return this.rect.x+this.rect.width},a.prototype.getTop=function(){return this.rect.y},a.prototype.getBottom=function(){return this.rect.y+this.rect.height},a.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},A.exports=a},function(A,D,T){var c=T(0);function i(){}for(var s in c)i[s]=c[s];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,A.exports=i},function(A,D,T){function c(i,s){i==null&&s==null?(this.x=0,this.y=0):(this.x=i,this.y=s)}c.prototype.getX=function(){return this.x},c.prototype.getY=function(){return this.y},c.prototype.setX=function(i){this.x=i},c.prototype.setY=function(i){this.y=i},c.prototype.getDifference=function(i){return new DimensionD(this.x-i.x,this.y-i.y)},c.prototype.getCopy=function(){return new c(this.x,this.y)},c.prototype.translate=function(i){return this.x+=i.width,this.y+=i.height,this},A.exports=c},function(A,D,T){var c=T(2),i=T(10),s=T(0),n=T(7),t=T(3),e=T(1),a=T(13),h=T(12),g=T(11);function o(r,f,v){c.call(this,v),this.estimatedSize=i.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=r,f!=null&&f instanceof n?this.graphManager=f:f!=null&&f instanceof Layout&&(this.graphManager=f.graphManager)}for(var d in o.prototype=Object.create(c.prototype),c)o[d]=c[d];o.prototype.getNodes=function(){return this.nodes},o.prototype.getEdges=function(){return this.edges},o.prototype.getGraphManager=function(){return this.graphManager},o.prototype.getParent=function(){return this.parent},o.prototype.getLeft=function(){return this.left},o.prototype.getRight=function(){return this.right},o.prototype.getTop=function(){return this.top},o.prototype.getBottom=function(){return this.bottom},o.prototype.isConnected=function(){return this.isConnected},o.prototype.add=function(r,f,v){if(f==null&&v==null){var p=r;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(p)>-1)throw"Node already in graph!";return p.owner=this,this.getNodes().push(p),p}var N=r;if(!(this.getNodes().indexOf(f)>-1&&this.getNodes().indexOf(v)>-1))throw"Source or target not in graph!";if(f.owner!=v.owner||f.owner!=this)throw"Both owners must be this graph!";return f.owner!=v.owner?null:(N.source=f,N.target=v,N.isInterGraph=!1,this.getEdges().push(N),f.edges.push(N),v!=f&&v.edges.push(N),N)},o.prototype.remove=function(r){var f=r;if(r instanceof t){if(f==null)throw"Node is null!";if(f.owner==null||f.owner!=this)throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var v=f.edges.slice(),p=v.length,N=0;N<p;N++)(I=v[N]).isInterGraph?this.graphManager.remove(I):I.source.owner.remove(I);if((S=this.nodes.indexOf(f))==-1)throw"Node not in owner node list!";this.nodes.splice(S,1)}else if(r instanceof e){var I;if((I=r)==null)throw"Edge is null!";if(I.source==null||I.target==null)throw"Source and/or target is null!";if(I.source.owner==null||I.target.owner==null||I.source.owner!=this||I.target.owner!=this)throw"Source and/or target owner is invalid!";var S,U=I.source.edges.indexOf(I),P=I.target.edges.indexOf(I);if(!(U>-1&&P>-1))throw"Source and/or target doesn't know this edge!";if(I.source.edges.splice(U,1),I.target!=I.source&&I.target.edges.splice(P,1),(S=I.source.owner.getEdges().indexOf(I))==-1)throw"Not in owner's edge list!";I.source.owner.getEdges().splice(S,1)}},o.prototype.updateLeftTop=function(){for(var r,f,v,p=i.MAX_VALUE,N=i.MAX_VALUE,I=this.getNodes(),S=I.length,U=0;U<S;U++){var P=I[U];p>(r=P.getTop())&&(p=r),N>(f=P.getLeft())&&(N=f)}return p==i.MAX_VALUE?null:(v=I[0].getParent().paddingLeft!=null?I[0].getParent().paddingLeft:this.margin,this.left=N-v,this.top=p-v,new h(this.left,this.top))},o.prototype.updateBounds=function(r){for(var f,v,p,N,I,S=i.MAX_VALUE,U=-i.MAX_VALUE,P=i.MAX_VALUE,k=-i.MAX_VALUE,X=this.nodes,M=X.length,ot=0;ot<M;ot++){var l=X[ot];r&&l.child!=null&&l.updateBounds(),S>(f=l.getLeft())&&(S=f),U<(v=l.getRight())&&(U=v),P>(p=l.getTop())&&(P=p),k<(N=l.getBottom())&&(k=N)}var E=new a(S,P,U-S,k-P);S==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),I=X[0].getParent().paddingLeft!=null?X[0].getParent().paddingLeft:this.margin,this.left=E.x-I,this.right=E.x+E.width+I,this.top=E.y-I,this.bottom=E.y+E.height+I},o.calculateBounds=function(r){for(var f,v,p,N,I=i.MAX_VALUE,S=-i.MAX_VALUE,U=i.MAX_VALUE,P=-i.MAX_VALUE,k=r.length,X=0;X<k;X++){var M=r[X];I>(f=M.getLeft())&&(I=f),S<(v=M.getRight())&&(S=v),U>(p=M.getTop())&&(U=p),P<(N=M.getBottom())&&(P=N)}return new a(I,U,S-I,P-U)},o.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},o.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},o.prototype.calcEstimatedSize=function(){for(var r=0,f=this.nodes,v=f.length,p=0;p<v;p++)r+=f[p].calcEstimatedSize();return this.estimatedSize=r==0?s.EMPTY_COMPOUND_NODE_SIZE:r/Math.sqrt(this.nodes.length),this.estimatedSize},o.prototype.updateConnected=function(){var r=this;if(this.nodes.length!=0){var f,v,p=new g,N=new Set,I=this.nodes[0];for(I.withChildren().forEach((function(k){p.push(k),N.add(k)}));p.length!==0;)for(var S=(f=(I=p.shift()).getEdges()).length,U=0;U<S;U++)(v=f[U].getOtherEndInGraph(I,this))==null||N.has(v)||v.withChildren().forEach((function(k){p.push(k),N.add(k)}));if(this.isConnected=!1,N.size>=this.nodes.length){var P=0;N.forEach((function(k){k.owner==r&&P++})),P==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},A.exports=o},function(A,D,T){var c,i=T(1);function s(n){c=T(6),this.layout=n,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var n=this.layout.newGraph(),t=this.layout.newNode(null),e=this.add(n,t);return this.setRootGraph(e),this.rootGraph},s.prototype.add=function(n,t,e,a,h){if(e==null&&a==null&&h==null){if(n==null)throw"Graph is null!";if(t==null)throw"Parent node is null!";if(this.graphs.indexOf(n)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(n),n.parent!=null)throw"Already has a parent!";if(t.child!=null)throw"Already has a child!";return n.parent=t,t.child=n,n}h=e,e=n;var g=(a=t).getOwner(),o=h.getOwner();if(g==null||g.getGraphManager()!=this)throw"Source not in this graph mgr!";if(o==null||o.getGraphManager()!=this)throw"Target not in this graph mgr!";if(g==o)return e.isInterGraph=!1,g.add(e,a,h);if(e.isInterGraph=!0,e.source=a,e.target=h,this.edges.indexOf(e)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(e),e.source==null||e.target==null)throw"Edge source and/or target is null!";if(e.source.edges.indexOf(e)!=-1||e.target.edges.indexOf(e)!=-1)throw"Edge already in source and/or target incidency list!";return e.source.edges.push(e),e.target.edges.push(e),e},s.prototype.remove=function(n){if(n instanceof c){var t=n;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(t.parent==null||t.parent.graphManager!=this))throw"Invalid parent node!";for(var e,a=[],h=(a=a.concat(t.getEdges())).length,g=0;g<h;g++)e=a[g],t.remove(e);var o,d=[];for(h=(d=d.concat(t.getNodes())).length,g=0;g<h;g++)o=d[g],t.remove(o);t==this.rootGraph&&this.setRootGraph(null);var r=this.graphs.indexOf(t);this.graphs.splice(r,1),t.parent=null}else if(n instanceof i){if((e=n)==null)throw"Edge is null!";if(!e.isInterGraph)throw"Not an inter-graph edge!";if(e.source==null||e.target==null)throw"Source and/or target is null!";if(e.source.edges.indexOf(e)==-1||e.target.edges.indexOf(e)==-1)throw"Source and/or target doesn't know this edge!";if(r=e.source.edges.indexOf(e),e.source.edges.splice(r,1),r=e.target.edges.indexOf(e),e.target.edges.splice(r,1),e.source.owner==null||e.source.owner.getGraphManager()==null)throw"Edge owner graph or owner graph manager is null!";if(e.source.owner.getGraphManager().edges.indexOf(e)==-1)throw"Not in owner graph manager's edge list!";r=e.source.owner.getGraphManager().edges.indexOf(e),e.source.owner.getGraphManager().edges.splice(r,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var n=[],t=this.getGraphs(),e=t.length,a=0;a<e;a++)n=n.concat(t[a].getNodes());this.allNodes=n}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var n=[],t=this.getGraphs();t.length;for(var e=0;e<t.length;e++)n=n.concat(t[e].getEdges());n=n.concat(this.edges),this.allEdges=n}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(n){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=n},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(n){if(n.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=n,n.parent==null&&(n.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(n,t){if(n==null||t==null)throw"assert failed";if(n==t)return!0;for(var e,a=n.getOwner();(e=a.getParent())!=null;){if(e==t)return!0;if((a=e.getOwner())==null)break}for(a=t.getOwner();(e=a.getParent())!=null;){if(e==n)return!0;if((a=e.getOwner())==null)break}return!1},s.prototype.calcLowestCommonAncestors=function(){for(var n,t,e,a,h,g=this.getAllEdges(),o=g.length,d=0;d<o;d++)if(t=(n=g[d]).source,e=n.target,n.lca=null,n.sourceInLca=t,n.targetInLca=e,t!=e){for(a=t.getOwner();n.lca==null;){for(n.targetInLca=e,h=e.getOwner();n.lca==null;){if(h==a){n.lca=h;break}if(h==this.rootGraph)break;if(n.lca!=null)throw"assert failed";n.targetInLca=h.getParent(),h=n.targetInLca.getOwner()}if(a==this.rootGraph)break;n.lca==null&&(n.sourceInLca=a.getParent(),a=n.sourceInLca.getOwner())}if(n.lca==null)throw"assert failed"}else n.lca=t.getOwner()},s.prototype.calcLowestCommonAncestor=function(n,t){if(n==t)return n.getOwner();for(var e=n.getOwner();e!=null;){for(var a=t.getOwner();a!=null;){if(a==e)return a;a=a.getParent().getOwner()}e=e.getParent().getOwner()}return e},s.prototype.calcInclusionTreeDepths=function(n,t){var e;n==null&&t==null&&(n=this.rootGraph,t=1);for(var a=n.getNodes(),h=a.length,g=0;g<h;g++)(e=a[g]).inclusionTreeDepth=t,e.child!=null&&this.calcInclusionTreeDepths(e.child,t+1)},s.prototype.includesInvalidEdge=function(){for(var n,t=[],e=this.edges.length,a=0;a<e;a++)n=this.edges[a],this.isOneAncestorOfOther(n.source,n.target)&&t.push(n);for(a=0;a<t.length;a++)this.remove(t[a]);return!1},A.exports=s},function(A,D,T){var c=T(12);function i(){}i.calcSeparationAmount=function(s,n,t,e){if(!s.intersects(n))throw"assert failed";var a=new Array(2);this.decideDirectionsForOverlappingNodes(s,n,a),t[0]=Math.min(s.getRight(),n.getRight())-Math.max(s.x,n.x),t[1]=Math.min(s.getBottom(),n.getBottom())-Math.max(s.y,n.y),s.getX()<=n.getX()&&s.getRight()>=n.getRight()?t[0]+=Math.min(n.getX()-s.getX(),s.getRight()-n.getRight()):n.getX()<=s.getX()&&n.getRight()>=s.getRight()&&(t[0]+=Math.min(s.getX()-n.getX(),n.getRight()-s.getRight())),s.getY()<=n.getY()&&s.getBottom()>=n.getBottom()?t[1]+=Math.min(n.getY()-s.getY(),s.getBottom()-n.getBottom()):n.getY()<=s.getY()&&n.getBottom()>=s.getBottom()&&(t[1]+=Math.min(s.getY()-n.getY(),n.getBottom()-s.getBottom()));var h=Math.abs((n.getCenterY()-s.getCenterY())/(n.getCenterX()-s.getCenterX()));n.getCenterY()===s.getCenterY()&&n.getCenterX()===s.getCenterX()&&(h=1);var g=h*t[0],o=t[1]/h;t[0]<o?o=t[0]:g=t[1],t[0]=-1*a[0]*(o/2+e),t[1]=-1*a[1]*(g/2+e)},i.decideDirectionsForOverlappingNodes=function(s,n,t){s.getCenterX()<n.getCenterX()?t[0]=-1:t[0]=1,s.getCenterY()<n.getCenterY()?t[1]=-1:t[1]=1},i.getIntersection2=function(s,n,t){var e=s.getCenterX(),a=s.getCenterY(),h=n.getCenterX(),g=n.getCenterY();if(s.intersects(n))return t[0]=e,t[1]=a,t[2]=h,t[3]=g,!0;var o=s.getX(),d=s.getY(),r=s.getRight(),f=s.getX(),v=s.getBottom(),p=s.getRight(),N=s.getWidthHalf(),I=s.getHeightHalf(),S=n.getX(),U=n.getY(),P=n.getRight(),k=n.getX(),X=n.getBottom(),M=n.getRight(),ot=n.getWidthHalf(),l=n.getHeightHalf(),E=!1,u=!1;if(e===h){if(a>g)return t[0]=e,t[1]=d,t[2]=h,t[3]=X,!1;if(a<g)return t[0]=e,t[1]=v,t[2]=h,t[3]=U,!1}else if(a===g){if(e>h)return t[0]=o,t[1]=a,t[2]=P,t[3]=g,!1;if(e<h)return t[0]=r,t[1]=a,t[2]=S,t[3]=g,!1}else{var m=s.height/s.width,y=n.height/n.width,w=(g-a)/(h-e),_=void 0,F=void 0,b=void 0,L=void 0,z=void 0,G=void 0;if(-m===w?e>h?(t[0]=f,t[1]=v,E=!0):(t[0]=r,t[1]=d,E=!0):m===w&&(e>h?(t[0]=o,t[1]=d,E=!0):(t[0]=p,t[1]=v,E=!0)),-y===w?h>e?(t[2]=k,t[3]=X,u=!0):(t[2]=P,t[3]=U,u=!0):y===w&&(h>e?(t[2]=S,t[3]=U,u=!0):(t[2]=M,t[3]=X,u=!0)),E&&u)return!1;if(e>h?a>g?(_=this.getCardinalDirection(m,w,4),F=this.getCardinalDirection(y,w,2)):(_=this.getCardinalDirection(-m,w,3),F=this.getCardinalDirection(-y,w,1)):a>g?(_=this.getCardinalDirection(-m,w,1),F=this.getCardinalDirection(-y,w,3)):(_=this.getCardinalDirection(m,w,2),F=this.getCardinalDirection(y,w,4)),!E)switch(_){case 1:L=d,b=e+-I/w,t[0]=b,t[1]=L;break;case 2:b=p,L=a+N*w,t[0]=b,t[1]=L;break;case 3:L=v,b=e+I/w,t[0]=b,t[1]=L;break;case 4:b=f,L=a+-N*w,t[0]=b,t[1]=L}if(!u)switch(F){case 1:G=U,z=h+-l/w,t[2]=z,t[3]=G;break;case 2:z=M,G=g+ot*w,t[2]=z,t[3]=G;break;case 3:G=X,z=h+l/w,t[2]=z,t[3]=G;break;case 4:z=k,G=g+-ot*w,t[2]=z,t[3]=G}}return!1},i.getCardinalDirection=function(s,n,t){return s>n?t:1+t%4},i.getIntersection=function(s,n,t,e){if(e==null)return this.getIntersection2(s,n,t);var a,h,g,o,d,r,f,v=s.x,p=s.y,N=n.x,I=n.y,S=t.x,U=t.y,P=e.x,k=e.y;return(f=(a=I-p)*(o=S-P)-(h=k-U)*(g=v-N))==0?null:new c((g*(r=P*U-S*k)-o*(d=N*p-v*I))/f,(h*d-a*r)/f)},i.angleOfVector=function(s,n,t,e){var a=void 0;return s!==t?(a=Math.atan((e-n)/(t-s)),t<s?a+=Math.PI:e<n&&(a+=this.TWO_PI)):a=e<n?this.ONE_AND_HALF_PI:this.HALF_PI,a},i.doIntersect=function(s,n,t,e){var a=s.x,h=s.y,g=n.x,o=n.y,d=t.x,r=t.y,f=e.x,v=e.y,p=(g-a)*(v-r)-(f-d)*(o-h);if(p===0)return!1;var N=((v-r)*(f-a)+(d-f)*(v-h))/p,I=((h-o)*(f-a)+(g-a)*(v-h))/p;return 0<N&&N<1&&0<I&&I<1},i.findCircleLineIntersections=function(s,n,t,e,a,h,g){var o=(t-s)*(t-s)+(e-n)*(e-n),d=2*((s-a)*(t-s)+(n-h)*(e-n)),r=(s-a)*(s-a)+(n-h)*(n-h)-g*g;if(d*d-4*o*r>=0){var f=(-d+Math.sqrt(d*d-4*o*r))/(2*o),v=(-d-Math.sqrt(d*d-4*o*r))/(2*o);return f>=0&&f<=1?[f]:v>=0&&v<=1?[v]:null}return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,A.exports=i},function(A,D,T){function c(){}c.sign=function(i){return i>0?1:i<0?-1:0},c.floor=function(i){return i<0?Math.ceil(i):Math.floor(i)},c.ceil=function(i){return i<0?Math.floor(i):Math.ceil(i)},A.exports=c},function(A,D,T){function c(){}c.MAX_VALUE=2147483647,c.MIN_VALUE=-2147483648,A.exports=c},function(A,D,T){var c=(function(){function e(a,h){for(var g=0;g<h.length;g++){var o=h[g];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}return function(a,h,g){return h&&e(a.prototype,h),g&&e(a,g),a}})(),i=function(e){return{value:e,next:null,prev:null}},s=function(e,a,h,g){return e!==null?e.next=a:g.head=a,h!==null?h.prev=a:g.tail=a,a.prev=e,a.next=h,g.length++,a},n=function(e,a){var h=e.prev,g=e.next;return h!==null?h.next=g:a.head=g,g!==null?g.prev=h:a.tail=h,e.prev=e.next=null,a.length--,e},t=(function(){function e(a){var h=this;(function(g,o){if(!(g instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),this.length=0,this.head=null,this.tail=null,a?.forEach((function(g){return h.push(g)}))}return c(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(a,h){return s(h.prev,i(a),h,this)}},{key:"insertAfter",value:function(a,h){return s(h,i(a),h.next,this)}},{key:"insertNodeBefore",value:function(a,h){return s(h.prev,a,h,this)}},{key:"insertNodeAfter",value:function(a,h){return s(h,a,h.next,this)}},{key:"push",value:function(a){return s(this.tail,i(a),null,this)}},{key:"unshift",value:function(a){return s(null,i(a),this.head,this)}},{key:"remove",value:function(a){return n(a,this)}},{key:"pop",value:function(){return n(this.tail,this).value}},{key:"popNode",value:function(){return n(this.tail,this)}},{key:"shift",value:function(){return n(this.head,this).value}},{key:"shiftNode",value:function(){return n(this.head,this)}},{key:"get_object_at",value:function(a){if(a<=this.length()){for(var h=1,g=this.head;h<a;)g=g.next,h++;return g.value}}},{key:"set_object_at",value:function(a,h){if(a<=this.length()){for(var g=1,o=this.head;g<a;)o=o.next,g++;o.value=h}}}]),e})();A.exports=t},function(A,D,T){function c(i,s,n){this.x=null,this.y=null,i==null&&s==null&&n==null?(this.x=0,this.y=0):typeof i=="number"&&typeof s=="number"&&n==null?(this.x=i,this.y=s):i.constructor.name=="Point"&&s==null&&n==null&&(n=i,this.x=n.x,this.y=n.y)}c.prototype.getX=function(){return this.x},c.prototype.getY=function(){return this.y},c.prototype.getLocation=function(){return new c(this.x,this.y)},c.prototype.setLocation=function(i,s,n){i.constructor.name=="Point"&&s==null&&n==null?(n=i,this.setLocation(n.x,n.y)):typeof i=="number"&&typeof s=="number"&&n==null&&(parseInt(i)==i&&parseInt(s)==s?this.move(i,s):(this.x=Math.floor(i+.5),this.y=Math.floor(s+.5)))},c.prototype.move=function(i,s){this.x=i,this.y=s},c.prototype.translate=function(i,s){this.x+=i,this.y+=s},c.prototype.equals=function(i){if(i.constructor.name=="Point"){var s=i;return this.x==s.x&&this.y==s.y}return this==i},c.prototype.toString=function(){return new c().constructor.name+"[x="+this.x+",y="+this.y+"]"},A.exports=c},function(A,D,T){function c(i,s,n,t){this.x=0,this.y=0,this.width=0,this.height=0,i!=null&&s!=null&&n!=null&&t!=null&&(this.x=i,this.y=s,this.width=n,this.height=t)}c.prototype.getX=function(){return this.x},c.prototype.setX=function(i){this.x=i},c.prototype.getY=function(){return this.y},c.prototype.setY=function(i){this.y=i},c.prototype.getWidth=function(){return this.width},c.prototype.setWidth=function(i){this.width=i},c.prototype.getHeight=function(){return this.height},c.prototype.setHeight=function(i){this.height=i},c.prototype.getRight=function(){return this.x+this.width},c.prototype.getBottom=function(){return this.y+this.height},c.prototype.intersects=function(i){return!(this.getRight()<i.x||this.getBottom()<i.y||i.getRight()<this.x||i.getBottom()<this.y)},c.prototype.getCenterX=function(){return this.x+this.width/2},c.prototype.getMinX=function(){return this.getX()},c.prototype.getMaxX=function(){return this.getX()+this.width},c.prototype.getCenterY=function(){return this.y+this.height/2},c.prototype.getMinY=function(){return this.getY()},c.prototype.getMaxY=function(){return this.getY()+this.height},c.prototype.getWidthHalf=function(){return this.width/2},c.prototype.getHeightHalf=function(){return this.height/2},A.exports=c},function(A,D,T){var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function i(){}i.lastID=0,i.createID=function(s){return i.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=i.getString(),i.lastID++),s.uniqueID)},i.getString=function(s){return s==null&&(s=i.lastID),"Object#"+s},i.isPrimitive=function(s){var n=s===void 0?"undefined":c(s);return s==null||n!="object"&&n!="function"},A.exports=i},function(A,D,T){function c(d){if(Array.isArray(d)){for(var r=0,f=Array(d.length);r<d.length;r++)f[r]=d[r];return f}return Array.from(d)}var i=T(0),s=T(7),n=T(3),t=T(1),e=T(6),a=T(5),h=T(17),g=T(29);function o(d){g.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,d!=null&&(this.isRemoteUse=d)}o.RANDOM_SEED=1,o.prototype=Object.create(g.prototype),o.prototype.getGraphManager=function(){return this.graphManager},o.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},o.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},o.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},o.prototype.newGraphManager=function(){var d=new s(this);return this.graphManager=d,d},o.prototype.newGraph=function(d){return new e(null,this.graphManager,d)},o.prototype.newNode=function(d){return new n(this.graphManager,d)},o.prototype.newEdge=function(d){return new t(null,null,d)},o.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},o.prototype.runLayout=function(){var d;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),d=!this.checkLayoutSuccess()&&this.layout(),i.ANIMATE!=="during"&&(d&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,d)},o.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},o.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var d=this.graphManager.getAllEdges(),r=0;r<d.length;r++)d[r];var f=this.graphManager.getRoot().getNodes();for(r=0;r<f.length;r++)f[r];this.update(this.graphManager.getRoot())}},o.prototype.update=function(d){if(d==null)this.update2();else if(d instanceof n){var r=d;if(r.getChild()!=null)for(var f=r.getChild().getNodes(),v=0;v<f.length;v++)update(f[v]);r.vGraphObject!=null&&r.vGraphObject.update(r)}else if(d instanceof t){var p=d;p.vGraphObject!=null&&p.vGraphObject.update(p)}else if(d instanceof e){var N=d;N.vGraphObject!=null&&N.vGraphObject.update(N)}},o.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},o.prototype.transform=function(d){if(d==null)this.transform(new a(0,0));else{var r=new h,f=this.graphManager.getRoot().updateLeftTop();if(f!=null){r.setWorldOrgX(d.x),r.setWorldOrgY(d.y),r.setDeviceOrgX(f.x),r.setDeviceOrgY(f.y);for(var v=this.getAllNodes(),p=0;p<v.length;p++)v[p].transform(r)}}},o.prototype.positionNodesRandomly=function(d){if(d==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var r,f,v=d.getNodes(),p=0;p<v.length;p++)(f=(r=v[p]).getChild())==null||f.getNodes().length==0?r.scatter():(this.positionNodesRandomly(f),r.updateBounds())},o.prototype.getFlatForest=function(){for(var d=[],r=!0,f=this.graphManager.getRoot().getNodes(),v=!0,p=0;p<f.length;p++)f[p].getChild()!=null&&(v=!1);if(!v)return d;var N=new Set,I=[],S=new Map,U=[];for(U=U.concat(f);U.length>0&&r;){for(I.push(U[0]);I.length>0&&r;){var P=I[0];I.splice(0,1),N.add(P);var k=P.getEdges();for(p=0;p<k.length;p++){var X=k[p].getOtherEnd(P);if(S.get(P)!=X){if(N.has(X)){r=!1;break}I.push(X),S.set(X,P)}}}if(r){var M=[].concat(c(N));for(d.push(M),p=0;p<M.length;p++){var ot=M[p],l=U.indexOf(ot);l>-1&&U.splice(l,1)}N=new Set,S=new Map}else d=[]}return d},o.prototype.createDummyNodesForBendpoints=function(d){for(var r=[],f=d.source,v=this.graphManager.calcLowestCommonAncestor(d.source,d.target),p=0;p<d.bendpoints.length;p++){var N=this.newNode(null);N.setRect(new Point(0,0),new Dimension(1,1)),v.add(N);var I=this.newEdge(null);this.graphManager.add(I,f,N),r.add(N),f=N}return I=this.newEdge(null),this.graphManager.add(I,f,d.target),this.edgeToDummyNodes.set(d,r),d.isInterGraph()?this.graphManager.remove(d):v.remove(d),r},o.prototype.createBendpointsFromDummyNodes=function(){var d=[];d=d.concat(this.graphManager.getAllEdges()),d=[].concat(c(this.edgeToDummyNodes.keys())).concat(d);for(var r=0;r<d.length;r++){var f=d[r];if(f.bendpoints.length>0){for(var v=this.edgeToDummyNodes.get(f),p=0;p<v.length;p++){var N=v[p],I=new a(N.getCenterX(),N.getCenterY()),S=f.bendpoints.get(p);S.x=I.x,S.y=I.y,N.getOwner().remove(N)}this.graphManager.add(f,f.source,f.target)}}},o.transform=function(d,r,f,v){if(f!=null&&v!=null){var p=r;return d<=50?p-=(r-r/f)/50*(50-d):p+=(r*v-r)/50*(d-50),p}var N,I;return d<=50?(N=9*r/500,I=r/10):(N=9*r/50,I=-8*r),N*d+I},o.findCenterOfTree=function(d){var r=[];r=r.concat(d);var f=[],v=new Map,p=!1,N=null;r.length!=1&&r.length!=2||(p=!0,N=r[0]);for(var I=0;I<r.length;I++){var S=(k=r[I]).getNeighborsList().size;v.set(k,k.getNeighborsList().size),S==1&&f.push(k)}var U=[];for(U=U.concat(f);!p;){var P=[];for(P=P.concat(U),U=[],I=0;I<r.length;I++){var k=r[I],X=r.indexOf(k);X>=0&&r.splice(X,1),k.getNeighborsList().forEach((function(M){if(f.indexOf(M)<0){var ot=v.get(M)-1;ot==1&&U.push(M),v.set(M,ot)}}))}f=f.concat(U),r.length!=1&&r.length!=2||(p=!0,N=r[0])}return N},o.prototype.setGraphManager=function(d){this.graphManager=d},A.exports=o},function(A,D,T){function c(){}c.seed=1,c.x=0,c.nextDouble=function(){return c.x=1e4*Math.sin(c.seed++),c.x-Math.floor(c.x)},A.exports=c},function(A,D,T){var c=T(5);function i(s,n){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(s){this.lworldExtX=s},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(s){this.lworldExtY=s},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},i.prototype.transformX=function(s){var n=0,t=this.lworldExtX;return t!=0&&(n=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/t),n},i.prototype.transformY=function(s){var n=0,t=this.lworldExtY;return t!=0&&(n=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/t),n},i.prototype.inverseTransformX=function(s){var n=0,t=this.ldeviceExtX;return t!=0&&(n=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/t),n},i.prototype.inverseTransformY=function(s){var n=0,t=this.ldeviceExtY;return t!=0&&(n=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/t),n},i.prototype.inverseTransformPoint=function(s){return new c(this.inverseTransformX(s.x),this.inverseTransformY(s.y))},A.exports=i},function(A,D,T){var c=T(15),i=T(4),s=T(0),n=T(8),t=T(9);function e(){c.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var a in e.prototype=Object.create(c.prototype),c)e[a]=c[a];e.prototype.initParameters=function(){c.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},e.prototype.calcIdealEdgeLengths=function(){for(var h,g,o,d,r,f,v,p=this.getGraphManager().getAllEdges(),N=0;N<p.length;N++)g=(h=p[N]).idealLength,h.isInterGraph&&(d=h.getSource(),r=h.getTarget(),f=h.getSourceInLca().getEstimatedSize(),v=h.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(h.idealLength+=f+v-2*s.SIMPLE_NODE_SIZE),o=h.getLca().getInclusionTreeDepth(),h.idealLength+=g*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(d.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*o))},e.prototype.initSpringEmbedder=function(){var h=this.getAllNodes().length;this.incremental?(h>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(h-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(h>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(h-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},e.prototype.calcSpringForces=function(){for(var h,g=this.getAllEdges(),o=0;o<g.length;o++)h=g[o],this.calcSpringForce(h,h.idealLength)},e.prototype.calcRepulsionForces=function(){var h,g,o,d,r,f=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],v=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&f&&this.updateGrid(),r=new Set,h=0;h<p.length;h++)o=p[h],this.calculateRepulsionForceOfANode(o,r,f,v),r.add(o);else for(h=0;h<p.length;h++)for(o=p[h],g=h+1;g<p.length;g++)d=p[g],o.getOwner()==d.getOwner()&&this.calcRepulsionForce(o,d)},e.prototype.calcGravitationalForces=function(){for(var h,g=this.getAllNodesToApplyGravitation(),o=0;o<g.length;o++)h=g[o],this.calcGravitationalForce(h)},e.prototype.moveNodes=function(){for(var h=this.getAllNodes(),g=0;g<h.length;g++)h[g].move()},e.prototype.calcSpringForce=function(h,g){var o,d,r,f,v=h.getSource(),p=h.getTarget();if(this.uniformLeafNodeSizes&&v.getChild()==null&&p.getChild()==null)h.updateLengthSimple();else if(h.updateLength(),h.isOverlapingSourceAndTarget)return;(o=h.getLength())!=0&&(r=(d=h.edgeElasticity*(o-g))*(h.lengthX/o),f=d*(h.lengthY/o),v.springForceX+=r,v.springForceY+=f,p.springForceX-=r,p.springForceY-=f)},e.prototype.calcRepulsionForce=function(h,g){var o,d,r,f,v,p,N,I=h.getRect(),S=g.getRect(),U=new Array(2),P=new Array(4);if(I.intersects(S)){n.calcSeparationAmount(I,S,U,i.DEFAULT_EDGE_LENGTH/2),p=2*U[0],N=2*U[1];var k=h.noOfChildren*g.noOfChildren/(h.noOfChildren+g.noOfChildren);h.repulsionForceX-=k*p,h.repulsionForceY-=k*N,g.repulsionForceX+=k*p,g.repulsionForceY+=k*N}else this.uniformLeafNodeSizes&&h.getChild()==null&&g.getChild()==null?(o=S.getCenterX()-I.getCenterX(),d=S.getCenterY()-I.getCenterY()):(n.getIntersection(I,S,P),o=P[2]-P[0],d=P[3]-P[1]),Math.abs(o)<i.MIN_REPULSION_DIST&&(o=t.sign(o)*i.MIN_REPULSION_DIST),Math.abs(d)<i.MIN_REPULSION_DIST&&(d=t.sign(d)*i.MIN_REPULSION_DIST),r=o*o+d*d,f=Math.sqrt(r),p=(v=(h.nodeRepulsion/2+g.nodeRepulsion/2)*h.noOfChildren*g.noOfChildren/r)*o/f,N=v*d/f,h.repulsionForceX-=p,h.repulsionForceY-=N,g.repulsionForceX+=p,g.repulsionForceY+=N},e.prototype.calcGravitationalForce=function(h){var g,o,d,r,f,v,p,N;o=((g=h.getOwner()).getRight()+g.getLeft())/2,d=(g.getTop()+g.getBottom())/2,r=h.getCenterX()-o,f=h.getCenterY()-d,v=Math.abs(r)+h.getWidth()/2,p=Math.abs(f)+h.getHeight()/2,h.getOwner()==this.graphManager.getRoot()?(v>(N=g.getEstimatedSize()*this.gravityRangeFactor)||p>N)&&(h.gravitationForceX=-this.gravityConstant*r,h.gravitationForceY=-this.gravityConstant*f):(v>(N=g.getEstimatedSize()*this.compoundGravityRangeFactor)||p>N)&&(h.gravitationForceX=-this.gravityConstant*r*this.compoundGravityConstant,h.gravitationForceY=-this.gravityConstant*f*this.compoundGravityConstant)},e.prototype.isConverged=function(){var h,g=!1;return this.totalIterations>this.maxIterations/3&&(g=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),h=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,h||g},e.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},e.prototype.calcNoOfChildrenForAllNodes=function(){for(var h,g=this.graphManager.getAllNodes(),o=0;o<g.length;o++)(h=g[o]).noOfChildren=h.getNoOfChildren()},e.prototype.calcGrid=function(h){var g,o;g=parseInt(Math.ceil((h.getRight()-h.getLeft())/this.repulsionRange)),o=parseInt(Math.ceil((h.getBottom()-h.getTop())/this.repulsionRange));for(var d=new Array(g),r=0;r<g;r++)d[r]=new Array(o);for(r=0;r<g;r++)for(var f=0;f<o;f++)d[r][f]=new Array;return d},e.prototype.addNodeToGrid=function(h,g,o){var d,r,f,v;d=parseInt(Math.floor((h.getRect().x-g)/this.repulsionRange)),r=parseInt(Math.floor((h.getRect().width+h.getRect().x-g)/this.repulsionRange)),f=parseInt(Math.floor((h.getRect().y-o)/this.repulsionRange)),v=parseInt(Math.floor((h.getRect().height+h.getRect().y-o)/this.repulsionRange));for(var p=d;p<=r;p++)for(var N=f;N<=v;N++)this.grid[p][N].push(h),h.setGridCoordinates(d,r,f,v)},e.prototype.updateGrid=function(){var h,g,o=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),h=0;h<o.length;h++)g=o[h],this.addNodeToGrid(g,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},e.prototype.calculateRepulsionForceOfANode=function(h,g,o,d){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&o||d){var r,f=new Set;h.surrounding=new Array;for(var v=this.grid,p=h.startX-1;p<h.finishX+2;p++)for(var N=h.startY-1;N<h.finishY+2;N++)if(!(p<0||N<0||p>=v.length||N>=v[0].length)){for(var I=0;I<v[p][N].length;I++)if(r=v[p][N][I],h.getOwner()==r.getOwner()&&h!=r&&!g.has(r)&&!f.has(r)){var S=Math.abs(h.getCenterX()-r.getCenterX())-(h.getWidth()/2+r.getWidth()/2),U=Math.abs(h.getCenterY()-r.getCenterY())-(h.getHeight()/2+r.getHeight()/2);S<=this.repulsionRange&&U<=this.repulsionRange&&f.add(r)}}h.surrounding=[].concat((function(P){if(Array.isArray(P)){for(var k=0,X=Array(P.length);k<P.length;k++)X[k]=P[k];return X}return Array.from(P)})(f))}for(p=0;p<h.surrounding.length;p++)this.calcRepulsionForce(h,h.surrounding[p])},e.prototype.calcRepulsionRange=function(){return 0},A.exports=e},function(A,D,T){var c=T(1),i=T(4);function s(t,e,a){c.call(this,t,e,a),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}for(var n in s.prototype=Object.create(c.prototype),c)s[n]=c[n];A.exports=s},function(A,D,T){var c=T(3),i=T(4);function s(t,e,a,h){c.call(this,t,e,a,h),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var n in s.prototype=Object.create(c.prototype),c)s[n]=c[n];s.prototype.setGridCoordinates=function(t,e,a,h){this.startX=t,this.finishX=e,this.startY=a,this.finishY=h},A.exports=s},function(A,D,T){function c(i,s){this.width=0,this.height=0,i!==null&&s!==null&&(this.height=s,this.width=i)}c.prototype.getWidth=function(){return this.width},c.prototype.setWidth=function(i){this.width=i},c.prototype.getHeight=function(){return this.height},c.prototype.setHeight=function(i){this.height=i},A.exports=c},function(A,D,T){var c=T(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(s,n){var t=c.createID(s);this.contains(t)||(this.map[t]=n,this.keys.push(s))},i.prototype.contains=function(s){return c.createID(s),this.map[s]!=null},i.prototype.get=function(s){var n=c.createID(s);return this.map[n]},i.prototype.keySet=function(){return this.keys},A.exports=i},function(A,D,T){var c=T(14);function i(){this.set={}}i.prototype.add=function(s){var n=c.createID(s);this.contains(n)||(this.set[n]=s)},i.prototype.remove=function(s){delete this.set[c.createID(s)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(s){return this.set[c.createID(s)]==s},i.prototype.isEmpty=function(){return this.size()===0},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(s){for(var n=Object.keys(this.set),t=n.length,e=0;e<t;e++)s.push(this.set[n[e]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(s){for(var n=s.length,t=0;t<n;t++){var e=s[t];this.add(e)}},A.exports=i},function(A,D,T){function c(){}c.multMat=function(i,s){for(var n=[],t=0;t<i.length;t++){n[t]=[];for(var e=0;e<s[0].length;e++){n[t][e]=0;for(var a=0;a<i[0].length;a++)n[t][e]+=i[t][a]*s[a][e]}}return n},c.transpose=function(i){for(var s=[],n=0;n<i[0].length;n++){s[n]=[];for(var t=0;t<i.length;t++)s[n][t]=i[t][n]}return s},c.multCons=function(i,s){for(var n=[],t=0;t<i.length;t++)n[t]=i[t]*s;return n},c.minusOp=function(i,s){for(var n=[],t=0;t<i.length;t++)n[t]=i[t]-s[t];return n},c.dotProduct=function(i,s){for(var n=0,t=0;t<i.length;t++)n+=i[t]*s[t];return n},c.mag=function(i){return Math.sqrt(this.dotProduct(i,i))},c.normalize=function(i){for(var s=[],n=this.mag(i),t=0;t<i.length;t++)s[t]=i[t]/n;return s},c.multGamma=function(i){for(var s=[],n=0,t=0;t<i.length;t++)n+=i[t];n*=-1/i.length;for(var e=0;e<i.length;e++)s[e]=n+i[e];return s},c.multL=function(i,s,n){for(var t=[],e=[],a=[],h=0;h<s[0].length;h++){for(var g=0,o=0;o<s.length;o++)g+=-.5*s[o][h]*i[o];e[h]=g}for(var d=0;d<n.length;d++){for(var r=0,f=0;f<n.length;f++)r+=n[d][f]*e[f];a[d]=r}for(var v=0;v<s.length;v++){for(var p=0,N=0;N<s[0].length;N++)p+=s[v][N]*a[N];t[v]=p}return t},A.exports=c},function(A,D,T){var c=(function(){function n(t,e){for(var a=0;a<e.length;a++){var h=e[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}})(),i=T(11),s=(function(){function n(t,e){(function(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")})(this,n),e===null&&e===void 0||(this.compareFunction=this._defaultCompareFunction);var a=void 0;a=t instanceof i?t.size():t.length,this._quicksort(t,0,a-1)}return c(n,[{key:"_quicksort",value:function(t,e,a){if(e<a){var h=this._partition(t,e,a);this._quicksort(t,e,h),this._quicksort(t,h+1,a)}}},{key:"_partition",value:function(t,e,a){for(var h=this._get(t,e),g=e,o=a;;){for(;this.compareFunction(h,this._get(t,o));)o--;for(;this.compareFunction(this._get(t,g),h);)g++;if(!(g<o))return o;this._swap(t,g,o),g++,o--}}},{key:"_get",value:function(t,e){return t instanceof i?t.get_object_at(e):t[e]}},{key:"_set",value:function(t,e,a){t instanceof i?t.set_object_at(e,a):t[e]=a}},{key:"_swap",value:function(t,e,a){var h=this._get(t,e);this._set(t,e,this._get(t,a)),this._set(t,a,h)}},{key:"_defaultCompareFunction",value:function(t,e){return e>t}}]),n})();A.exports=s},function(A,D,T){function c(){}c.svd=function(i){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=i.length,this.n=i[0].length;var s=Math.min(this.m,this.n);this.s=(function(Ct){for(var lt=[];Ct-- >0;)lt.push(0);return lt})(Math.min(this.m+1,this.n)),this.U=(function Ct(lt){if(lt.length==0)return 0;for(var bt=[],kt=0;kt<lt[0];kt++)bt.push(Ct(lt.slice(1)));return bt})([this.m,s]),this.V=(function(Ct){return(function lt(bt){if(bt.length==0)return 0;for(var kt=[],Wt=0;Wt<bt[0];Wt++)kt.push(lt(bt.slice(1)));return kt})(Ct)})([this.n,this.n]);for(var n,t,e=(function(Ct){for(var lt=[];Ct-- >0;)lt.push(0);return lt})(this.n),a=(function(Ct){for(var lt=[];Ct-- >0;)lt.push(0);return lt})(this.m),h=Math.min(this.m-1,this.n),g=Math.max(0,Math.min(this.n-2,this.m)),o=0;o<Math.max(h,g);o++){if(o<h){this.s[o]=0;for(var d=o;d<this.m;d++)this.s[o]=c.hypot(this.s[o],i[d][o]);if(this.s[o]!==0){i[o][o]<0&&(this.s[o]=-this.s[o]);for(var r=o;r<this.m;r++)i[r][o]/=this.s[o];i[o][o]+=1}this.s[o]=-this.s[o]}for(var f=o+1;f<this.n;f++){if(n=o<h,t=this.s[o]!==0,n&&t){for(var v=0,p=o;p<this.m;p++)v+=i[p][o]*i[p][f];v=-v/i[o][o];for(var N=o;N<this.m;N++)i[N][f]+=v*i[N][o]}e[f]=i[o][f]}if((function(Ct,lt){return lt})(0,o<h))for(var I=o;I<this.m;I++)this.U[I][o]=i[I][o];if(o<g){e[o]=0;for(var S=o+1;S<this.n;S++)e[o]=c.hypot(e[o],e[S]);if(e[o]!==0){e[o+1]<0&&(e[o]=-e[o]);for(var U=o+1;U<this.n;U++)e[U]/=e[o];e[o+1]+=1}if(e[o]=-e[o],(function(Ct,lt){return Ct&&lt})(o+1<this.m,e[o]!==0)){for(var P=o+1;P<this.m;P++)a[P]=0;for(var k=o+1;k<this.n;k++)for(var X=o+1;X<this.m;X++)a[X]+=e[k]*i[X][k];for(var M=o+1;M<this.n;M++)for(var ot=-e[M]/e[o+1],l=o+1;l<this.m;l++)i[l][M]+=ot*a[l]}for(var E=o+1;E<this.n;E++)this.V[E][o]=e[E]}}var u=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=i[h][h]),this.m<u&&(this.s[u-1]=0),g+1<u&&(e[g]=i[g][u-1]),e[u-1]=0;for(var m=h;m<s;m++){for(var y=0;y<this.m;y++)this.U[y][m]=0;this.U[m][m]=1}for(var w=h-1;w>=0;w--)if(this.s[w]!==0){for(var _=w+1;_<s;_++){for(var F=0,b=w;b<this.m;b++)F+=this.U[b][w]*this.U[b][_];F=-F/this.U[w][w];for(var L=w;L<this.m;L++)this.U[L][_]+=F*this.U[L][w]}for(var z=w;z<this.m;z++)this.U[z][w]=-this.U[z][w];this.U[w][w]=1+this.U[w][w];for(var G=0;G<w-1;G++)this.U[G][w]=0}else{for(var B=0;B<this.m;B++)this.U[B][w]=0;this.U[w][w]=1}for(var W=this.n-1;W>=0;W--){if((function(Ct,lt){return Ct&&lt})(W<g,e[W]!==0))for(var R=W+1;R<s;R++){for(var C=0,H=W+1;H<this.n;H++)C+=this.V[H][W]*this.V[H][R];C=-C/this.V[W+1][W];for(var V=W+1;V<this.n;V++)this.V[V][R]+=C*this.V[V][W]}for(var Q=0;Q<this.n;Q++)this.V[Q][W]=0;this.V[W][W]=1}for(var J=u-1,at=Math.pow(2,-52),pt=Math.pow(2,-966);u>0;){var q=void 0,Rt=void 0;for(q=u-2;q>=-1&&q!==-1;q--)if(Math.abs(e[q])<=pt+at*(Math.abs(this.s[q])+Math.abs(this.s[q+1]))){e[q]=0;break}if(q===u-2)Rt=4;else{var ft=void 0;for(ft=u-1;ft>=q&&ft!==q;ft--){var xt=(ft!==u?Math.abs(e[ft]):0)+(ft!==q+1?Math.abs(e[ft-1]):0);if(Math.abs(this.s[ft])<=pt+at*xt){this.s[ft]=0;break}}ft===q?Rt=3:ft===u-1?Rt=1:(Rt=2,q=ft)}switch(q++,Rt){case 1:var Pt=e[u-2];e[u-2]=0;for(var Lt=u-2;Lt>=q;Lt--){var Yt=c.hypot(this.s[Lt],Pt),dt=this.s[Lt]/Yt,ht=Pt/Yt;this.s[Lt]=Yt,Lt!==q&&(Pt=-ht*e[Lt-1],e[Lt-1]=dt*e[Lt-1]);for(var st=0;st<this.n;st++)Yt=dt*this.V[st][Lt]+ht*this.V[st][u-1],this.V[st][u-1]=-ht*this.V[st][Lt]+dt*this.V[st][u-1],this.V[st][Lt]=Yt}break;case 2:var yt=e[q-1];e[q-1]=0;for(var mt=q;mt<u;mt++){var vt=c.hypot(this.s[mt],yt),Et=this.s[mt]/vt,wt=yt/vt;this.s[mt]=vt,yt=-wt*e[mt],e[mt]=Et*e[mt];for(var x=0;x<this.m;x++)vt=Et*this.U[x][mt]+wt*this.U[x][q-1],this.U[x][q-1]=-wt*this.U[x][mt]+Et*this.U[x][q-1],this.U[x][mt]=vt}break;case 3:var Y=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[u-1]),Math.abs(this.s[u-2])),Math.abs(e[u-2])),Math.abs(this.s[q])),Math.abs(e[q])),Z=this.s[u-1]/Y,j=this.s[u-2]/Y,tt=e[u-2]/Y,ct=this.s[q]/Y,et=e[q]/Y,ut=((j+Z)*(j-Z)+tt*tt)/2,Tt=Z*tt*(Z*tt),St=0;(function(Ct,lt){return Ct||lt})(ut!==0,Tt!==0)&&(St=Math.sqrt(ut*ut+Tt),ut<0&&(St=-St),St=Tt/(ut+St));for(var Mt=(ct+Z)*(ct-Z)+St,At=ct*et,$=q;$<u-1;$++){var K=c.hypot(Mt,At),gt=Mt/K,Nt=At/K;$!==q&&(e[$-1]=K),Mt=gt*this.s[$]+Nt*e[$],e[$]=gt*e[$]-Nt*this.s[$],At=Nt*this.s[$+1],this.s[$+1]=gt*this.s[$+1];for(var rt=0;rt<this.n;rt++)K=gt*this.V[rt][$]+Nt*this.V[rt][$+1],this.V[rt][$+1]=-Nt*this.V[rt][$]+gt*this.V[rt][$+1],this.V[rt][$]=K;if(gt=Mt/(K=c.hypot(Mt,At)),Nt=At/K,this.s[$]=K,Mt=gt*e[$]+Nt*this.s[$+1],this.s[$+1]=-Nt*e[$]+gt*this.s[$+1],At=Nt*e[$+1],e[$+1]=gt*e[$+1],$<this.m-1)for(var _t=0;_t<this.m;_t++)K=gt*this.U[_t][$]+Nt*this.U[_t][$+1],this.U[_t][$+1]=-Nt*this.U[_t][$]+gt*this.U[_t][$+1],this.U[_t][$]=K}e[u-2]=Mt;break;case 4:if(this.s[q]<=0){this.s[q]=this.s[q]<0?-this.s[q]:0;for(var Ft=0;Ft<=J;Ft++)this.V[Ft][q]=-this.V[Ft][q]}for(;q<J&&!(this.s[q]>=this.s[q+1]);){var Ot=this.s[q];if(this.s[q]=this.s[q+1],this.s[q+1]=Ot,q<this.n-1)for(var Gt=0;Gt<this.n;Gt++)Ot=this.V[Gt][q+1],this.V[Gt][q+1]=this.V[Gt][q],this.V[Gt][q]=Ot;if(q<this.m-1)for(var Dt=0;Dt<this.m;Dt++)Ot=this.U[Dt][q+1],this.U[Dt][q+1]=this.U[Dt][q],this.U[Dt][q]=Ot;q++}u--}}return{U:this.U,V:this.V,S:this.s}},c.hypot=function(i,s){var n=void 0;return Math.abs(i)>Math.abs(s)?(n=s/i,n=Math.abs(i)*Math.sqrt(1+n*n)):s!=0?(n=i/s,n=Math.abs(s)*Math.sqrt(1+n*n)):n=0,n},A.exports=c},function(A,D,T){var c=(function(){function s(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(n,t,e){return t&&s(n.prototype,t),e&&s(n,e),n}})(),i=(function(){function s(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,s),this.sequence1=n,this.sequence2=t,this.match_score=e,this.mismatch_penalty=a,this.gap_penalty=h,this.iMax=n.length+1,this.jMax=t.length+1,this.grid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.grid[g]=new Array(this.jMax);for(var o=0;o<this.jMax;o++)this.grid[g][o]=0}this.tracebackGrid=new Array(this.iMax);for(var d=0;d<this.iMax;d++){this.tracebackGrid[d]=new Array(this.jMax);for(var r=0;r<this.jMax;r++)this.tracebackGrid[d][r]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return c(s,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var n=1;n<this.jMax;n++)this.grid[0][n]=this.grid[0][n-1]+this.gap_penalty,this.tracebackGrid[0][n]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var e=1;e<this.iMax;e++)for(var a=1;a<this.jMax;a++){var h=[this.sequence1[e-1]===this.sequence2[a-1]?this.grid[e-1][a-1]+this.match_score:this.grid[e-1][a-1]+this.mismatch_penalty,this.grid[e-1][a]+this.gap_penalty,this.grid[e][a-1]+this.gap_penalty],g=this.arrayAllMaxIndexes(h);this.grid[e][a]=h[g[0]],this.tracebackGrid[e][a]=[g.includes(0),g.includes(1),g.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var n=[];for(n.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});n[0];){var t=n[0],e=this.tracebackGrid[t.pos[0]][t.pos[1]];e[0]&&n.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),e[1]&&n.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),e[2]&&n.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),t.pos[0]===0&&t.pos[1]===0&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),n.shift()}return this.alignments}},{key:"getAllIndexes",value:function(n,t){for(var e=[],a=-1;(a=n.indexOf(t,a+1))!==-1;)e.push(a);return e}},{key:"arrayAllMaxIndexes",value:function(n){return this.getAllIndexes(n,Math.max.apply(null,n))}}]),s})();A.exports=i},function(A,D,T){var c=function(){};c.FDLayout=T(18),c.FDLayoutConstants=T(4),c.FDLayoutEdge=T(19),c.FDLayoutNode=T(20),c.DimensionD=T(21),c.HashMap=T(22),c.HashSet=T(23),c.IGeometry=T(8),c.IMath=T(9),c.Integer=T(10),c.Point=T(12),c.PointD=T(5),c.RandomSeed=T(16),c.RectangleD=T(13),c.Transform=T(17),c.UniqueIDGeneretor=T(14),c.Quicksort=T(25),c.LinkedList=T(11),c.LGraphObject=T(2),c.LGraph=T(6),c.LEdge=T(1),c.LGraphManager=T(7),c.LNode=T(3),c.Layout=T(15),c.LayoutConstants=T(0),c.NeedlemanWunsch=T(27),c.Matrix=T(24),c.SVD=T(26),A.exports=c},function(A,D,T){function c(){this.listeners=[]}var i=c.prototype;i.addListener=function(s,n){this.listeners.push({event:s,callback:n})},i.removeListener=function(s,n){for(var t=this.listeners.length;t>=0;t--){var e=this.listeners[t];e.event===s&&e.callback===n&&this.listeners.splice(t,1)}},i.emit=function(s,n){for(var t=0;t<this.listeners.length;t++){var e=this.listeners[t];s===e.event&&e.callback(n)}},A.exports=c}])},le.exports=O()),le.exports;var O}var we;he.exports;function dr(){return we||(we=1,O=function(A){return D={45:(i,s,n)=>{var t={};t.layoutBase=n(551),t.CoSEConstants=n(806),t.CoSEEdge=n(767),t.CoSEGraph=n(880),t.CoSEGraphManager=n(578),t.CoSELayout=n(765),t.CoSENode=n(991),t.ConstraintHandler=n(902),i.exports=t},806:(i,s,n)=>{var t=n(551).FDLayoutConstants;function e(){}for(var a in t)e[a]=t[a];e.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,e.DEFAULT_RADIAL_SEPARATION=t.DEFAULT_EDGE_LENGTH,e.DEFAULT_COMPONENT_SEPERATION=60,e.TILE=!0,e.TILING_PADDING_VERTICAL=10,e.TILING_PADDING_HORIZONTAL=10,e.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,e.ENFORCE_CONSTRAINTS=!0,e.APPLY_LAYOUT=!0,e.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,e.TREE_REDUCTION_ON_INCREMENTAL=!0,e.PURE_INCREMENTAL=e.DEFAULT_INCREMENTAL,i.exports=e},767:(i,s,n)=>{var t=n(551).FDLayoutEdge;function e(h,g,o){t.call(this,h,g,o)}for(var a in e.prototype=Object.create(t.prototype),t)e[a]=t[a];i.exports=e},880:(i,s,n)=>{var t=n(551).LGraph;function e(h,g,o){t.call(this,h,g,o)}for(var a in e.prototype=Object.create(t.prototype),t)e[a]=t[a];i.exports=e},578:(i,s,n)=>{var t=n(551).LGraphManager;function e(h){t.call(this,h)}for(var a in e.prototype=Object.create(t.prototype),t)e[a]=t[a];i.exports=e},765:(i,s,n)=>{var t=n(551).FDLayout,e=n(578),a=n(880),h=n(991),g=n(767),o=n(806),d=n(902),r=n(551).FDLayoutConstants,f=n(551).LayoutConstants,v=n(551).Point,p=n(551).PointD,N=n(551).DimensionD,I=n(551).Layout,S=n(551).Integer,U=n(551).IGeometry,P=n(551).LGraph,k=n(551).Transform,X=n(551).LinkedList;function M(){t.call(this),this.toBeTiled={},this.constraints={}}for(var ot in M.prototype=Object.create(t.prototype),t)M[ot]=t[ot];M.prototype.newGraphManager=function(){var l=new e(this);return this.graphManager=l,l},M.prototype.newGraph=function(l){return new a(null,this.graphManager,l)},M.prototype.newNode=function(l){return new h(this.graphManager,l)},M.prototype.newEdge=function(l){return new g(null,null,l)},M.prototype.initParameters=function(){t.prototype.initParameters.call(this,arguments),this.isSubLayout||(o.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=r.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=r.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=r.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},M.prototype.initSpringEmbedder=function(){t.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/r.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},M.prototype.layout=function(){return f.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},M.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)o.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),E=new Set(this.getAllNodes()),u=this.nodesWithGravity.filter((function(m){return E.has(m)})),this.graphManager.setAllNodesToApplyGravitation(u));else{var l=this.getFlatForest();if(l.length>0)this.positionNodesRadially(l);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),u=this.nodesWithGravity.filter((function(m){return E.has(m)}));this.graphManager.setAllNodesToApplyGravitation(u),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(d.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),o.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},M.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%r.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter((function(y){return l.has(y)}));this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),o.PURE_INCREMENTAL?this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),o.PURE_INCREMENTAL?this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var u=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(u,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},M.prototype.getPositionsData=function(){for(var l=this.graphManager.getAllNodes(),E={},u=0;u<l.length;u++){var m=l[u].rect,y=l[u].id;E[y]={id:y,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return E},M.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var l=!1;if(r.ANIMATE==="during")this.emit("layoutstarted");else{for(;!l;)l=this.tick();this.graphManager.updateBounds()}},M.prototype.moveNodes=function(){for(var l=this.getAllNodes(),E=0;E<l.length;E++)l[E].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),E=0;E<l.length;E++)l[E].move()},M.prototype.initConstraintVariables=function(){var l=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),u=0;u<E.length;u++){var m=E[u];this.idToNodeMap.set(m.id,m)}var y=function C(H){for(var V,Q=H.getChild().getNodes(),J=0,at=0;at<Q.length;at++)(V=Q[at]).getChild()==null?l.fixedNodeSet.has(V.id)&&(J+=100):J+=C(V);return J};if(this.constraints.fixedNodeConstraint){for(this.constraints.fixedNodeConstraint.forEach((function(C){l.fixedNodeSet.add(C.nodeId)})),E=this.graphManager.getAllNodes(),u=0;u<E.length;u++)if((m=E[u]).getChild()!=null){var w=y(m);w>0&&(m.fixedNodeWeight=w)}}if(this.constraints.relativePlacementConstraint){var _=new Map,F=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(C){l.fixedNodesOnHorizontal.add(C),l.fixedNodesOnVertical.add(C)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var b=this.constraints.alignmentConstraint.vertical;for(u=0;u<b.length;u++)this.dummyToNodeForVerticalAlignment.set("dummy"+u,[]),b[u].forEach((function(C){_.set(C,"dummy"+u),l.dummyToNodeForVerticalAlignment.get("dummy"+u).push(C),l.fixedNodeSet.has(C)&&l.fixedNodesOnHorizontal.add("dummy"+u)}))}if(this.constraints.alignmentConstraint.horizontal){var L=this.constraints.alignmentConstraint.horizontal;for(u=0;u<L.length;u++)this.dummyToNodeForHorizontalAlignment.set("dummy"+u,[]),L[u].forEach((function(C){F.set(C,"dummy"+u),l.dummyToNodeForHorizontalAlignment.get("dummy"+u).push(C),l.fixedNodeSet.has(C)&&l.fixedNodesOnVertical.add("dummy"+u)}))}}if(o.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(C){var H,V,Q;for(Q=C.length-1;Q>=2*C.length/3;Q--)H=Math.floor(Math.random()*(Q+1)),V=C[Q],C[Q]=C[H],C[H]=V;return C},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(C){if(C.left){var H=_.has(C.left)?_.get(C.left):C.left,V=_.has(C.right)?_.get(C.right):C.right;l.nodesInRelativeHorizontal.includes(H)||(l.nodesInRelativeHorizontal.push(H),l.nodeToRelativeConstraintMapHorizontal.set(H,[]),l.dummyToNodeForVerticalAlignment.has(H)?l.nodeToTempPositionMapHorizontal.set(H,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(H)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(H,l.idToNodeMap.get(H).getCenterX())),l.nodesInRelativeHorizontal.includes(V)||(l.nodesInRelativeHorizontal.push(V),l.nodeToRelativeConstraintMapHorizontal.set(V,[]),l.dummyToNodeForVerticalAlignment.has(V)?l.nodeToTempPositionMapHorizontal.set(V,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(V)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(V,l.idToNodeMap.get(V).getCenterX())),l.nodeToRelativeConstraintMapHorizontal.get(H).push({right:V,gap:C.gap}),l.nodeToRelativeConstraintMapHorizontal.get(V).push({left:H,gap:C.gap})}else{var Q=F.has(C.top)?F.get(C.top):C.top,J=F.has(C.bottom)?F.get(C.bottom):C.bottom;l.nodesInRelativeVertical.includes(Q)||(l.nodesInRelativeVertical.push(Q),l.nodeToRelativeConstraintMapVertical.set(Q,[]),l.dummyToNodeForHorizontalAlignment.has(Q)?l.nodeToTempPositionMapVertical.set(Q,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(Q)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(Q,l.idToNodeMap.get(Q).getCenterY())),l.nodesInRelativeVertical.includes(J)||(l.nodesInRelativeVertical.push(J),l.nodeToRelativeConstraintMapVertical.set(J,[]),l.dummyToNodeForHorizontalAlignment.has(J)?l.nodeToTempPositionMapVertical.set(J,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(J)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(J,l.idToNodeMap.get(J).getCenterY())),l.nodeToRelativeConstraintMapVertical.get(Q).push({bottom:J,gap:C.gap}),l.nodeToRelativeConstraintMapVertical.get(J).push({top:Q,gap:C.gap})}}));else{var z=new Map,G=new Map;this.constraints.relativePlacementConstraint.forEach((function(C){if(C.left){var H=_.has(C.left)?_.get(C.left):C.left,V=_.has(C.right)?_.get(C.right):C.right;z.has(H)?z.get(H).push(V):z.set(H,[V]),z.has(V)?z.get(V).push(H):z.set(V,[H])}else{var Q=F.has(C.top)?F.get(C.top):C.top,J=F.has(C.bottom)?F.get(C.bottom):C.bottom;G.has(Q)?G.get(Q).push(J):G.set(Q,[J]),G.has(J)?G.get(J).push(Q):G.set(J,[Q])}}));var B=function(C,H){var V=[],Q=[],J=new X,at=new Set,pt=0;return C.forEach((function(q,Rt){if(!at.has(Rt)){V[pt]=[],Q[pt]=!1;var ft=Rt;for(J.push(ft),at.add(ft),V[pt].push(ft);J.length!=0;)ft=J.shift(),H.has(ft)&&(Q[pt]=!0),C.get(ft).forEach((function(xt){at.has(xt)||(J.push(xt),at.add(xt),V[pt].push(xt))}));pt++}})),{components:V,isFixed:Q}},W=B(z,l.fixedNodesOnHorizontal);this.componentsOnHorizontal=W.components,this.fixedComponentsOnHorizontal=W.isFixed;var R=B(G,l.fixedNodesOnVertical);this.componentsOnVertical=R.components,this.fixedComponentsOnVertical=R.isFixed}}},M.prototype.updateDisplacements=function(){var l=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(R){var C=l.idToNodeMap.get(R.nodeId);C.displacementX=0,C.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,u=0;u<E.length;u++){for(var m=0,y=0;y<E[u].length;y++){if(this.fixedNodeSet.has(E[u][y])){m=0;break}m+=this.idToNodeMap.get(E[u][y]).displacementX}var w=m/E[u].length;for(y=0;y<E[u].length;y++)this.idToNodeMap.get(E[u][y]).displacementX=w}if(this.constraints.alignmentConstraint.horizontal){var _=this.constraints.alignmentConstraint.horizontal;for(u=0;u<_.length;u++){var F=0;for(y=0;y<_[u].length;y++){if(this.fixedNodeSet.has(_[u][y])){F=0;break}F+=this.idToNodeMap.get(_[u][y]).displacementY}var b=F/_[u].length;for(y=0;y<_[u].length;y++)this.idToNodeMap.get(_[u][y]).displacementY=b}}}if(this.constraints.relativePlacementConstraint)if(o.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(R){if(!l.fixedNodesOnHorizontal.has(R)){var C=0;C=l.dummyToNodeForVerticalAlignment.has(R)?l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(R)[0]).displacementX:l.idToNodeMap.get(R).displacementX,l.nodeToRelativeConstraintMapHorizontal.get(R).forEach((function(H){var V;H.right?(V=l.nodeToTempPositionMapHorizontal.get(H.right)-l.nodeToTempPositionMapHorizontal.get(R)-C)<H.gap&&(C-=H.gap-V):(V=l.nodeToTempPositionMapHorizontal.get(R)-l.nodeToTempPositionMapHorizontal.get(H.left)+C)<H.gap&&(C+=H.gap-V)})),l.nodeToTempPositionMapHorizontal.set(R,l.nodeToTempPositionMapHorizontal.get(R)+C),l.dummyToNodeForVerticalAlignment.has(R)?l.dummyToNodeForVerticalAlignment.get(R).forEach((function(H){l.idToNodeMap.get(H).displacementX=C})):l.idToNodeMap.get(R).displacementX=C}})),this.nodesInRelativeVertical.forEach((function(R){if(!l.fixedNodesOnHorizontal.has(R)){var C=0;C=l.dummyToNodeForHorizontalAlignment.has(R)?l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(R)[0]).displacementY:l.idToNodeMap.get(R).displacementY,l.nodeToRelativeConstraintMapVertical.get(R).forEach((function(H){var V;H.bottom?(V=l.nodeToTempPositionMapVertical.get(H.bottom)-l.nodeToTempPositionMapVertical.get(R)-C)<H.gap&&(C-=H.gap-V):(V=l.nodeToTempPositionMapVertical.get(R)-l.nodeToTempPositionMapVertical.get(H.top)+C)<H.gap&&(C+=H.gap-V)})),l.nodeToTempPositionMapVertical.set(R,l.nodeToTempPositionMapVertical.get(R)+C),l.dummyToNodeForHorizontalAlignment.has(R)?l.dummyToNodeForHorizontalAlignment.get(R).forEach((function(H){l.idToNodeMap.get(H).displacementY=C})):l.idToNodeMap.get(R).displacementY=C}}));else{for(u=0;u<this.componentsOnHorizontal.length;u++){var L=this.componentsOnHorizontal[u];if(this.fixedComponentsOnHorizontal[u])for(y=0;y<L.length;y++)this.dummyToNodeForVerticalAlignment.has(L[y])?this.dummyToNodeForVerticalAlignment.get(L[y]).forEach((function(R){l.idToNodeMap.get(R).displacementX=0})):this.idToNodeMap.get(L[y]).displacementX=0;else{var z=0,G=0;for(y=0;y<L.length;y++)this.dummyToNodeForVerticalAlignment.has(L[y])?(z+=(W=this.dummyToNodeForVerticalAlignment.get(L[y])).length*this.idToNodeMap.get(W[0]).displacementX,G+=W.length):(z+=this.idToNodeMap.get(L[y]).displacementX,G++);var B=z/G;for(y=0;y<L.length;y++)this.dummyToNodeForVerticalAlignment.has(L[y])?this.dummyToNodeForVerticalAlignment.get(L[y]).forEach((function(R){l.idToNodeMap.get(R).displacementX=B})):this.idToNodeMap.get(L[y]).displacementX=B}}for(u=0;u<this.componentsOnVertical.length;u++)if(L=this.componentsOnVertical[u],this.fixedComponentsOnVertical[u])for(y=0;y<L.length;y++)this.dummyToNodeForHorizontalAlignment.has(L[y])?this.dummyToNodeForHorizontalAlignment.get(L[y]).forEach((function(R){l.idToNodeMap.get(R).displacementY=0})):this.idToNodeMap.get(L[y]).displacementY=0;else{for(z=0,G=0,y=0;y<L.length;y++){var W;this.dummyToNodeForHorizontalAlignment.has(L[y])?(z+=(W=this.dummyToNodeForHorizontalAlignment.get(L[y])).length*this.idToNodeMap.get(W[0]).displacementY,G+=W.length):(z+=this.idToNodeMap.get(L[y]).displacementY,G++)}for(B=z/G,y=0;y<L.length;y++)this.dummyToNodeForHorizontalAlignment.has(L[y])?this.dummyToNodeForHorizontalAlignment.get(L[y]).forEach((function(R){l.idToNodeMap.get(R).displacementY=B})):this.idToNodeMap.get(L[y]).displacementY=B}}},M.prototype.calculateNodesToApplyGravitationTo=function(){var l,E,u=[],m=this.graphManager.getGraphs(),y=m.length;for(E=0;E<y;E++)(l=m[E]).updateConnected(),l.isConnected||(u=u.concat(l.getNodes()));return u},M.prototype.createBendpoints=function(){var l=[];l=l.concat(this.graphManager.getAllEdges());var E,u=new Set;for(E=0;E<l.length;E++){var m=l[E];if(!u.has(m)){var y=m.getSource(),w=m.getTarget();if(y==w)m.getBendpoints().push(new p),m.getBendpoints().push(new p),this.createDummyNodesForBendpoints(m),u.add(m);else{var _=[];if(_=(_=_.concat(y.getEdgeListToNode(w))).concat(w.getEdgeListToNode(y)),!u.has(_[0])){var F;if(_.length>1)for(F=0;F<_.length;F++){var b=_[F];b.getBendpoints().push(new p),this.createDummyNodesForBendpoints(b)}_.forEach((function(L){u.add(L)}))}}}if(u.size==l.length)break}},M.prototype.positionNodesRadially=function(l){for(var E=new v(0,0),u=Math.ceil(Math.sqrt(l.length)),m=0,y=0,w=0,_=new p(0,0),F=0;F<l.length;F++){F%u==0&&(w=0,y=m,F!=0&&(y+=o.DEFAULT_COMPONENT_SEPERATION),m=0);var b=l[F],L=I.findCenterOfTree(b);E.x=w,E.y=y,(_=M.radialLayout(b,L,E)).y>m&&(m=Math.floor(_.y)),w=Math.floor(_.x+o.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(f.WORLD_CENTER_X-_.x/2,f.WORLD_CENTER_Y-_.y/2))},M.radialLayout=function(l,E,u){var m=Math.max(this.maxDiagonalInTree(l),o.DEFAULT_RADIAL_SEPARATION);M.branchRadialLayout(E,null,0,359,0,m);var y=P.calculateBounds(l),w=new k;w.setDeviceOrgX(y.getMinX()),w.setDeviceOrgY(y.getMinY()),w.setWorldOrgX(u.x),w.setWorldOrgY(u.y);for(var _=0;_<l.length;_++)l[_].transform(w);var F=new p(y.getMaxX(),y.getMaxY());return w.inverseTransformPoint(F)},M.branchRadialLayout=function(l,E,u,m,y,w){var _=(m-u+1)/2;_<0&&(_+=180);var F=(_+u)%360*U.TWO_PI/360,b=y*Math.cos(F),L=y*Math.sin(F);l.setCenter(b,L);var z=[],G=(z=z.concat(l.getEdges())).length;E!=null&&G--;for(var B,W=0,R=z.length,C=l.getEdgesBetween(E);C.length>1;){var H=C[0];C.splice(0,1);var V=z.indexOf(H);V>=0&&z.splice(V,1),R--,G--}B=E!=null?(z.indexOf(C[0])+1)%R:0;for(var Q=Math.abs(m-u)/G,J=B;W!=G;J=++J%R){var at=z[J].getOtherEnd(l);if(at!=E){var pt=(u+W*Q)%360,q=(pt+Q)%360;M.branchRadialLayout(at,l,pt,q,y+w,w),W++}}},M.maxDiagonalInTree=function(l){for(var E=S.MIN_VALUE,u=0;u<l.length;u++){var m=l[u].getDiagonal();m>E&&(E=m)}return E},M.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},M.prototype.groupZeroDegreeMembers=function(){var l=this,E={};this.memberGroups={},this.idToDummyNode={};for(var u=[],m=this.graphManager.getAllNodes(),y=0;y<m.length;y++){var w=(_=m[y]).getParent();this.getNodeDegreeWithChildren(_)!==0||w.id!=null&&this.getToBeTiled(w)||u.push(_)}for(y=0;y<u.length;y++){var _,F=(_=u[y]).getParent().id;E[F]===void 0&&(E[F]=[]),E[F]=E[F].concat(_)}Object.keys(E).forEach((function(b){if(E[b].length>1){var L="DummyCompound_"+b;l.memberGroups[L]=E[b];var z=E[b][0].getParent(),G=new h(l.graphManager);G.id=L,G.paddingLeft=z.paddingLeft||0,G.paddingRight=z.paddingRight||0,G.paddingBottom=z.paddingBottom||0,G.paddingTop=z.paddingTop||0,l.idToDummyNode[L]=G;var B=l.getGraphManager().add(l.newGraph(),G),W=z.getChild();W.add(G);for(var R=0;R<E[b].length;R++){var C=E[b][R];W.remove(C),B.add(C)}}}))},M.prototype.clearCompounds=function(){var l={},E={};this.performDFSOnCompounds();for(var u=0;u<this.compoundOrder.length;u++)E[this.compoundOrder[u].id]=this.compoundOrder[u],l[this.compoundOrder[u].id]=[].concat(this.compoundOrder[u].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[u].getChild()),this.compoundOrder[u].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(l,E)},M.prototype.clearZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(u){var m=l.idToDummyNode[u];if(E[u]=l.tileNodes(l.memberGroups[u],m.paddingLeft+m.paddingRight),m.rect.width=E[u].width,m.rect.height=E[u].height,m.setCenter(E[u].centerX,E[u].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,o.NODE_DIMENSIONS_INCLUDE_LABELS){var y=m.rect.width,w=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(y+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>y?(m.rect.x-=(m.labelWidth-y)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-y)/2):m.labelPosHorizontal=="right"&&m.setWidth(y+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(w+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>w?(m.rect.y-=(m.labelHeight-w)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-w)/2):m.labelPosVertical=="bottom"&&m.setHeight(w+m.labelHeight))}}))},M.prototype.repopulateCompounds=function(){for(var l=this.compoundOrder.length-1;l>=0;l--){var E=this.compoundOrder[l],u=E.id,m=E.paddingLeft,y=E.paddingTop,w=E.labelMarginLeft,_=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[u],E.rect.x,E.rect.y,m,y,w,_)}},M.prototype.repopulateZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach((function(u){var m=l.idToDummyNode[u],y=m.paddingLeft,w=m.paddingTop,_=m.labelMarginLeft,F=m.labelMarginTop;l.adjustLocations(E[u],m.rect.x,m.rect.y,y,w,_,F)}))},M.prototype.getToBeTiled=function(l){var E=l.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var u=l.getChild();if(u==null)return this.toBeTiled[E]=!1,!1;for(var m=u.getNodes(),y=0;y<m.length;y++){var w=m[y];if(this.getNodeDegree(w)>0)return this.toBeTiled[E]=!1,!1;if(w.getChild()!=null){if(!this.getToBeTiled(w))return this.toBeTiled[E]=!1,!1}else this.toBeTiled[w.id]=!1}return this.toBeTiled[E]=!0,!0},M.prototype.getNodeDegree=function(l){l.id;for(var E=l.getEdges(),u=0,m=0;m<E.length;m++){var y=E[m];y.getSource().id!==y.getTarget().id&&(u+=1)}return u},M.prototype.getNodeDegreeWithChildren=function(l){var E=this.getNodeDegree(l);if(l.getChild()==null)return E;for(var u=l.getChild().getNodes(),m=0;m<u.length;m++){var y=u[m];E+=this.getNodeDegreeWithChildren(y)}return E},M.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},M.prototype.fillCompexOrderByDFS=function(l){for(var E=0;E<l.length;E++){var u=l[E];u.getChild()!=null&&this.fillCompexOrderByDFS(u.getChild().getNodes()),this.getToBeTiled(u)&&this.compoundOrder.push(u)}},M.prototype.adjustLocations=function(l,E,u,m,y,w,_){u+=y+_;for(var F=E+=m+w,b=0;b<l.rows.length;b++){var L=l.rows[b];E=F;for(var z=0,G=0;G<L.length;G++){var B=L[G];B.rect.x=E,B.rect.y=u,E+=B.rect.width+l.horizontalPadding,B.rect.height>z&&(z=B.rect.height)}u+=z+l.verticalPadding}},M.prototype.tileCompoundMembers=function(l,E){var u=this;this.tiledMemberPack=[],Object.keys(l).forEach((function(m){var y=E[m];if(u.tiledMemberPack[m]=u.tileNodes(l[m],y.paddingLeft+y.paddingRight),y.rect.width=u.tiledMemberPack[m].width,y.rect.height=u.tiledMemberPack[m].height,y.setCenter(u.tiledMemberPack[m].centerX,u.tiledMemberPack[m].centerY),y.labelMarginLeft=0,y.labelMarginTop=0,o.NODE_DIMENSIONS_INCLUDE_LABELS){var w=y.rect.width,_=y.rect.height;y.labelWidth&&(y.labelPosHorizontal=="left"?(y.rect.x-=y.labelWidth,y.setWidth(w+y.labelWidth),y.labelMarginLeft=y.labelWidth):y.labelPosHorizontal=="center"&&y.labelWidth>w?(y.rect.x-=(y.labelWidth-w)/2,y.setWidth(y.labelWidth),y.labelMarginLeft=(y.labelWidth-w)/2):y.labelPosHorizontal=="right"&&y.setWidth(w+y.labelWidth)),y.labelHeight&&(y.labelPosVertical=="top"?(y.rect.y-=y.labelHeight,y.setHeight(_+y.labelHeight),y.labelMarginTop=y.labelHeight):y.labelPosVertical=="center"&&y.labelHeight>_?(y.rect.y-=(y.labelHeight-_)/2,y.setHeight(y.labelHeight),y.labelMarginTop=(y.labelHeight-_)/2):y.labelPosVertical=="bottom"&&y.setHeight(_+y.labelHeight))}}))},M.prototype.tileNodes=function(l,E){var u=this.tileNodesByFavoringDim(l,E,!0),m=this.tileNodesByFavoringDim(l,E,!1),y=this.getOrgRatio(u);return this.getOrgRatio(m)<y?m:u},M.prototype.getOrgRatio=function(l){var E=l.width/l.height;return E<1&&(E=1/E),E},M.prototype.calcIdealRowWidth=function(l,E){var u=o.TILING_PADDING_VERTICAL,m=o.TILING_PADDING_HORIZONTAL,y=l.length,w=0,_=0,F=0;l.forEach((function(R){w+=R.getWidth(),_+=R.getHeight(),R.getWidth()>F&&(F=R.getWidth())}));var b,L=w/y,z=_/y,G=Math.pow(u-m,2)+4*(L+m)*(z+u)*y,B=(m-u+Math.sqrt(G))/(2*(L+m));E?(b=Math.ceil(B))==B&&b++:b=Math.floor(B);var W=b*(L+m)-m;return F>W&&(W=F),W+=2*m},M.prototype.tileNodesByFavoringDim=function(l,E,u){var m=o.TILING_PADDING_VERTICAL,y=o.TILING_PADDING_HORIZONTAL,w=o.TILING_COMPARE_BY,_={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:m,horizontalPadding:y,centerX:0,centerY:0};w&&(_.idealRowWidth=this.calcIdealRowWidth(l,u));var F=function(R){return R.rect.width*R.rect.height},b=function(R,C){return F(C)-F(R)};l.sort((function(R,C){var H=b;return _.idealRowWidth?(H=w)(R.id,C.id):H(R,C)}));for(var L=0,z=0,G=0;G<l.length;G++)L+=(B=l[G]).getCenterX(),z+=B.getCenterY();for(_.centerX=L/l.length,_.centerY=z/l.length,G=0;G<l.length;G++){var B=l[G];if(_.rows.length==0)this.insertNodeToRow(_,B,0,E);else if(this.canAddHorizontal(_,B.rect.width,B.rect.height)){var W=_.rows.length-1;_.idealRowWidth||(W=this.getShortestRowIndex(_)),this.insertNodeToRow(_,B,W,E)}else this.insertNodeToRow(_,B,_.rows.length,E);this.shiftToLastRow(_)}return _},M.prototype.insertNodeToRow=function(l,E,u,m){var y=m;u==l.rows.length&&(l.rows.push([]),l.rowWidth.push(y),l.rowHeight.push(0));var w=l.rowWidth[u]+E.rect.width;l.rows[u].length>0&&(w+=l.horizontalPadding),l.rowWidth[u]=w,l.width<w&&(l.width=w);var _=E.rect.height;u>0&&(_+=l.verticalPadding);var F=0;_>l.rowHeight[u]&&(F=l.rowHeight[u],l.rowHeight[u]=_,F=l.rowHeight[u]-F),l.height+=F,l.rows[u].push(E)},M.prototype.getShortestRowIndex=function(l){for(var E=-1,u=Number.MAX_VALUE,m=0;m<l.rows.length;m++)l.rowWidth[m]<u&&(E=m,u=l.rowWidth[m]);return E},M.prototype.getLongestRowIndex=function(l){for(var E=-1,u=Number.MIN_VALUE,m=0;m<l.rows.length;m++)l.rowWidth[m]>u&&(E=m,u=l.rowWidth[m]);return E},M.prototype.canAddHorizontal=function(l,E,u){if(l.idealRowWidth){var m=l.rows.length-1;return l.rowWidth[m]+E+l.horizontalPadding<=l.idealRowWidth}var y=this.getShortestRowIndex(l);if(y<0)return!0;var w=l.rowWidth[y];if(w+l.horizontalPadding+E<=l.width)return!0;var _,F,b=0;return l.rowHeight[y]<u&&y>0&&(b=u+l.verticalPadding-l.rowHeight[y]),_=l.width-w>=E+l.horizontalPadding?(l.height+b)/(w+E+l.horizontalPadding):(l.height+b)/l.width,b=u+l.verticalPadding,(F=l.width<E?(l.height+b)/E:(l.height+b)/l.width)<1&&(F=1/F),_<1&&(_=1/_),_<F},M.prototype.shiftToLastRow=function(l){var E=this.getLongestRowIndex(l),u=l.rowWidth.length-1,m=l.rows[E],y=m[m.length-1],w=y.width+l.horizontalPadding;if(l.width-l.rowWidth[u]>w&&E!=u){m.splice(-1,1),l.rows[u].push(y),l.rowWidth[E]=l.rowWidth[E]-w,l.rowWidth[u]=l.rowWidth[u]+w,l.width=l.rowWidth[instance.getLongestRowIndex(l)];for(var _=Number.MIN_VALUE,F=0;F<m.length;F++)m[F].height>_&&(_=m[F].height);E>0&&(_+=l.verticalPadding);var b=l.rowHeight[E]+l.rowHeight[u];l.rowHeight[E]=_,l.rowHeight[u]<y.height+l.verticalPadding&&(l.rowHeight[u]=y.height+l.verticalPadding);var L=l.rowHeight[E]+l.rowHeight[u];l.height+=L-b,this.shiftToLastRow(l)}},M.prototype.tilingPreLayout=function(){o.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},M.prototype.tilingPostLayout=function(){o.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},M.prototype.reduceTrees=function(){for(var l,E=[],u=!0;u;){var m=this.graphManager.getAllNodes(),y=[];u=!1;for(var w=0;w<m.length;w++)if((l=m[w]).getEdges().length==1&&!l.getEdges()[0].isInterGraph&&l.getChild()==null){if(o.PURE_INCREMENTAL){var _=l.getEdges()[0].getOtherEnd(l),F=new N(l.getCenterX()-_.getCenterX(),l.getCenterY()-_.getCenterY());y.push([l,l.getEdges()[0],l.getOwner(),F])}else y.push([l,l.getEdges()[0],l.getOwner()]);u=!0}if(u==1){for(var b=[],L=0;L<y.length;L++)y[L][0].getEdges().length==1&&(b.push(y[L]),y[L][0].getOwner().remove(y[L][0]));E.push(b),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=E},M.prototype.growTree=function(l){for(var E,u=l[l.length-1],m=0;m<u.length;m++)E=u[m],this.findPlaceforPrunedNode(E),E[2].add(E[0]),E[2].add(E[1],E[1].source,E[1].target);l.splice(l.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},M.prototype.findPlaceforPrunedNode=function(l){var E,u,m=l[0];if(u=m==l[1].source?l[1].target:l[1].source,o.PURE_INCREMENTAL)m.setCenter(u.getCenterX()+l[3].getWidth(),u.getCenterY()+l[3].getHeight());else{var y=u.startX,w=u.finishX,_=u.startY,F=u.finishY,b=[0,0,0,0];if(_>0)for(var L=y;L<=w;L++)b[0]+=this.grid[L][_-1].length+this.grid[L][_].length-1;if(w<this.grid.length-1)for(L=_;L<=F;L++)b[1]+=this.grid[w+1][L].length+this.grid[w][L].length-1;if(F<this.grid[0].length-1)for(L=y;L<=w;L++)b[2]+=this.grid[L][F+1].length+this.grid[L][F].length-1;if(y>0)for(L=_;L<=F;L++)b[3]+=this.grid[y-1][L].length+this.grid[y][L].length-1;for(var z,G,B=S.MAX_VALUE,W=0;W<b.length;W++)b[W]<B?(B=b[W],z=1,G=W):b[W]==B&&z++;if(z==3&&B==0)b[0]==0&&b[1]==0&&b[2]==0?E=1:b[0]==0&&b[1]==0&&b[3]==0?E=0:b[0]==0&&b[2]==0&&b[3]==0?E=3:b[1]==0&&b[2]==0&&b[3]==0&&(E=2);else if(z==2&&B==0){var R=Math.floor(2*Math.random());E=b[0]==0&&b[1]==0?R==0?0:1:b[0]==0&&b[2]==0?R==0?0:2:b[0]==0&&b[3]==0?R==0?0:3:b[1]==0&&b[2]==0?R==0?1:2:b[1]==0&&b[3]==0?R==0?1:3:R==0?2:3}else E=z==4&&B==0?R=Math.floor(4*Math.random()):G;E==0?m.setCenter(u.getCenterX(),u.getCenterY()-u.getHeight()/2-r.DEFAULT_EDGE_LENGTH-m.getHeight()/2):E==1?m.setCenter(u.getCenterX()+u.getWidth()/2+r.DEFAULT_EDGE_LENGTH+m.getWidth()/2,u.getCenterY()):E==2?m.setCenter(u.getCenterX(),u.getCenterY()+u.getHeight()/2+r.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(u.getCenterX()-u.getWidth()/2-r.DEFAULT_EDGE_LENGTH-m.getWidth()/2,u.getCenterY())}},i.exports=M},991:(i,s,n)=>{var t=n(551).FDLayoutNode,e=n(551).IMath;function a(g,o,d,r){t.call(this,g,o,d,r)}for(var h in a.prototype=Object.create(t.prototype),t)a[h]=t[h];a.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*e.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*e.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(g,o){for(var d,r=this.getChild().getNodes(),f=0;f<r.length;f++)(d=r[f]).getChild()==null?(d.displacementX+=g,d.displacementY+=o):d.propogateDisplacementToChildren(g,o)},a.prototype.move=function(){var g=this.graphManager.getLayout();this.child!=null&&this.child.getNodes().length!=0||(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(g){this.pred1=g},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(g){this.next=g},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(g){this.processed=g},a.prototype.isProcessed=function(){return processed},i.exports=a},902:(i,s,n)=>{function t(d){if(Array.isArray(d)){for(var r=0,f=Array(d.length);r<d.length;r++)f[r]=d[r];return f}return Array.from(d)}var e=n(806),a=n(551).LinkedList,h=n(551).Matrix,g=n(551).SVD;function o(){}o.handleConstraints=function(d){var r={};r.fixedNodeConstraint=d.constraints.fixedNodeConstraint,r.alignmentConstraint=d.constraints.alignmentConstraint,r.relativePlacementConstraint=d.constraints.relativePlacementConstraint;for(var f=new Map,v=new Map,p=[],N=[],I=d.getAllNodes(),S=0,U=0;U<I.length;U++){var P=I[U];P.getChild()==null&&(v.set(P.id,S++),p.push(P.getCenterX()),N.push(P.getCenterY()),f.set(P.id,P))}r.relativePlacementConstraint&&r.relativePlacementConstraint.forEach((function(x){x.gap||x.gap==0||(x.left?x.gap=e.DEFAULT_EDGE_LENGTH+f.get(x.left).getWidth()/2+f.get(x.right).getWidth()/2:x.gap=e.DEFAULT_EDGE_LENGTH+f.get(x.top).getHeight()/2+f.get(x.bottom).getHeight()/2)}));var k=function(x){var Y=0,Z=0;return x.forEach((function(j){Y+=p[v.get(j)],Z+=N[v.get(j)]})),{x:Y/x.size,y:Z/x.size}},X=function(x,Y,Z,j,tt){var ct=new Map;x.forEach((function($,K){ct.set(K,0)})),x.forEach((function($,K){$.forEach((function(gt){ct.set(gt.id,ct.get(gt.id)+1)}))}));var et=new Map,ut=new Map,Tt=new a;ct.forEach((function($,K){$==0?(Tt.push(K),Z||(Y=="horizontal"?et.set(K,v.has(K)?p[v.get(K)]:j.get(K)):et.set(K,v.has(K)?N[v.get(K)]:j.get(K)))):et.set(K,Number.NEGATIVE_INFINITY),Z&&ut.set(K,new Set([K]))})),Z&&tt.forEach((function($){var K=[];if($.forEach((function(rt){Z.has(rt)&&K.push(rt)})),K.length>0){var gt=0;K.forEach((function(rt){Y=="horizontal"?(et.set(rt,v.has(rt)?p[v.get(rt)]:j.get(rt)),gt+=et.get(rt)):(et.set(rt,v.has(rt)?N[v.get(rt)]:j.get(rt)),gt+=et.get(rt))})),gt/=K.length,$.forEach((function(rt){Z.has(rt)||et.set(rt,gt)}))}else{var Nt=0;$.forEach((function(rt){Nt+=Y=="horizontal"?v.has(rt)?p[v.get(rt)]:j.get(rt):v.has(rt)?N[v.get(rt)]:j.get(rt)})),Nt/=$.length,$.forEach((function(rt){et.set(rt,Nt)}))}}));for(var St=function(){var $=Tt.shift();x.get($).forEach((function(K){if(et.get(K.id)<et.get($)+K.gap)if(Z&&Z.has(K.id)){var gt=void 0;if(gt=Y=="horizontal"?v.has(K.id)?p[v.get(K.id)]:j.get(K.id):v.has(K.id)?N[v.get(K.id)]:j.get(K.id),et.set(K.id,gt),gt<et.get($)+K.gap){var Nt=et.get($)+K.gap-gt;ut.get($).forEach((function(rt){et.set(rt,et.get(rt)-Nt)}))}}else et.set(K.id,et.get($)+K.gap);ct.set(K.id,ct.get(K.id)-1),ct.get(K.id)==0&&Tt.push(K.id),Z&&ut.set(K.id,(function(rt,_t){var Ft=new Set(rt),Ot=!0,Gt=!1,Dt=void 0;try{for(var Ct,lt=_t[Symbol.iterator]();!(Ot=(Ct=lt.next()).done);Ot=!0){var bt=Ct.value;Ft.add(bt)}}catch(kt){Gt=!0,Dt=kt}finally{try{!Ot&&lt.return&&lt.return()}finally{if(Gt)throw Dt}}return Ft})(ut.get($),ut.get(K.id)))}))};Tt.length!=0;)St();if(Z){var Mt=new Set;x.forEach((function($,K){$.length==0&&Mt.add(K)}));var At=[];ut.forEach((function($,K){if(Mt.has(K)){var gt=!1,Nt=!0,rt=!1,_t=void 0;try{for(var Ft,Ot=$[Symbol.iterator]();!(Nt=(Ft=Ot.next()).done);Nt=!0){var Gt=Ft.value;Z.has(Gt)&&(gt=!0)}}catch(lt){rt=!0,_t=lt}finally{try{!Nt&&Ot.return&&Ot.return()}finally{if(rt)throw _t}}if(!gt){var Dt=!1,Ct=void 0;At.forEach((function(lt,bt){lt.has([].concat(t($))[0])&&(Dt=!0,Ct=bt)})),Dt?$.forEach((function(lt){At[Ct].add(lt)})):At.push(new Set($))}}})),At.forEach((function($,K){var gt=Number.POSITIVE_INFINITY,Nt=Number.POSITIVE_INFINITY,rt=Number.NEGATIVE_INFINITY,_t=Number.NEGATIVE_INFINITY,Ft=!0,Ot=!1,Gt=void 0;try{for(var Dt,Ct=$[Symbol.iterator]();!(Ft=(Dt=Ct.next()).done);Ft=!0){var lt=Dt.value,bt=void 0;bt=Y=="horizontal"?v.has(lt)?p[v.get(lt)]:j.get(lt):v.has(lt)?N[v.get(lt)]:j.get(lt);var kt=et.get(lt);bt<gt&&(gt=bt),bt>rt&&(rt=bt),kt<Nt&&(Nt=kt),kt>_t&&(_t=kt)}}catch(Bt){Ot=!0,Gt=Bt}finally{try{!Ft&&Ct.return&&Ct.return()}finally{if(Ot)throw Gt}}var Wt=(gt+rt)/2-(Nt+_t)/2,te=!0,jt=!1,qt=void 0;try{for(var $t,Vt=$[Symbol.iterator]();!(te=($t=Vt.next()).done);te=!0){var re=$t.value;et.set(re,et.get(re)+Wt)}}catch(Bt){jt=!0,qt=Bt}finally{try{!te&&Vt.return&&Vt.return()}finally{if(jt)throw qt}}}))}return et},M=function(x){var Y=0,Z=0,j=0,tt=0;if(x.forEach((function(Tt){Tt.left?p[v.get(Tt.left)]-p[v.get(Tt.right)]>=0?Y++:Z++:N[v.get(Tt.top)]-N[v.get(Tt.bottom)]>=0?j++:tt++})),Y>Z&&j>tt)for(var ct=0;ct<v.size;ct++)p[ct]=-1*p[ct],N[ct]=-1*N[ct];else if(Y>Z)for(var et=0;et<v.size;et++)p[et]=-1*p[et];else if(j>tt)for(var ut=0;ut<v.size;ut++)N[ut]=-1*N[ut]},ot=function(x){var Y=[],Z=new a,j=new Set,tt=0;return x.forEach((function(ct,et){if(!j.has(et)){Y[tt]=[];var ut=et;for(Z.push(ut),j.add(ut),Y[tt].push(ut);Z.length!=0;)ut=Z.shift(),x.get(ut).forEach((function(Tt){j.has(Tt.id)||(Z.push(Tt.id),j.add(Tt.id),Y[tt].push(Tt.id))}));tt++}})),Y},l=function(x){var Y=new Map;return x.forEach((function(Z,j){Y.set(j,[])})),x.forEach((function(Z,j){Z.forEach((function(tt){Y.get(j).push(tt),Y.get(tt.id).push({id:j,gap:tt.gap,direction:tt.direction})}))})),Y},E=function(x){var Y=new Map;return x.forEach((function(Z,j){Y.set(j,[])})),x.forEach((function(Z,j){Z.forEach((function(tt){Y.get(tt.id).push({id:j,gap:tt.gap,direction:tt.direction})}))})),Y},u=[],m=[],y=!1,w=!1,_=new Set,F=new Map,b=new Map,L=[];if(r.fixedNodeConstraint&&r.fixedNodeConstraint.forEach((function(x){_.add(x.nodeId)})),r.relativePlacementConstraint&&(r.relativePlacementConstraint.forEach((function(x){x.left?(F.has(x.left)?F.get(x.left).push({id:x.right,gap:x.gap,direction:"horizontal"}):F.set(x.left,[{id:x.right,gap:x.gap,direction:"horizontal"}]),F.has(x.right)||F.set(x.right,[])):(F.has(x.top)?F.get(x.top).push({id:x.bottom,gap:x.gap,direction:"vertical"}):F.set(x.top,[{id:x.bottom,gap:x.gap,direction:"vertical"}]),F.has(x.bottom)||F.set(x.bottom,[]))})),b=l(F),L=ot(b)),e.TRANSFORM_ON_CONSTRAINT_HANDLING){if(r.fixedNodeConstraint&&r.fixedNodeConstraint.length>1)r.fixedNodeConstraint.forEach((function(x,Y){u[Y]=[x.position.x,x.position.y],m[Y]=[p[v.get(x.nodeId)],N[v.get(x.nodeId)]]})),y=!0;else if(r.alignmentConstraint)(function(){var x=0;if(r.alignmentConstraint.vertical){for(var Y=r.alignmentConstraint.vertical,Z=function(ut){var Tt=new Set;Y[ut].forEach((function(At){Tt.add(At)}));var St=new Set([].concat(t(Tt)).filter((function(At){return _.has(At)}))),Mt=void 0;Mt=St.size>0?p[v.get(St.values().next().value)]:k(Tt).x,Y[ut].forEach((function(At){u[x]=[Mt,N[v.get(At)]],m[x]=[p[v.get(At)],N[v.get(At)]],x++}))},j=0;j<Y.length;j++)Z(j);y=!0}if(r.alignmentConstraint.horizontal){for(var tt=r.alignmentConstraint.horizontal,ct=function(ut){var Tt=new Set;tt[ut].forEach((function(At){Tt.add(At)}));var St=new Set([].concat(t(Tt)).filter((function(At){return _.has(At)}))),Mt=void 0;Mt=St.size>0?p[v.get(St.values().next().value)]:k(Tt).y,tt[ut].forEach((function(At){u[x]=[p[v.get(At)],Mt],m[x]=[p[v.get(At)],N[v.get(At)]],x++}))},et=0;et<tt.length;et++)ct(et);y=!0}r.relativePlacementConstraint&&(w=!0)})();else if(r.relativePlacementConstraint){for(var z=0,G=0,B=0;B<L.length;B++)L[B].length>z&&(z=L[B].length,G=B);if(z<b.size/2)M(r.relativePlacementConstraint),y=!1,w=!1;else{var W=new Map,R=new Map,C=[];L[G].forEach((function(x){F.get(x).forEach((function(Y){Y.direction=="horizontal"?(W.has(x)?W.get(x).push(Y):W.set(x,[Y]),W.has(Y.id)||W.set(Y.id,[]),C.push({left:x,right:Y.id})):(R.has(x)?R.get(x).push(Y):R.set(x,[Y]),R.has(Y.id)||R.set(Y.id,[]),C.push({top:x,bottom:Y.id}))}))})),M(C),w=!1;var H=X(W,"horizontal"),V=X(R,"vertical");L[G].forEach((function(x,Y){m[Y]=[p[v.get(x)],N[v.get(x)]],u[Y]=[],H.has(x)?u[Y][0]=H.get(x):u[Y][0]=p[v.get(x)],V.has(x)?u[Y][1]=V.get(x):u[Y][1]=N[v.get(x)]})),y=!0}}if(y){for(var Q,J=h.transpose(u),at=h.transpose(m),pt=0;pt<J.length;pt++)J[pt]=h.multGamma(J[pt]),at[pt]=h.multGamma(at[pt]);var q=h.multMat(J,h.transpose(at)),Rt=g.svd(q);Q=h.multMat(Rt.V,h.transpose(Rt.U));for(var ft=0;ft<v.size;ft++){var xt=[p[ft],N[ft]],Pt=[Q[0][0],Q[1][0]],Lt=[Q[0][1],Q[1][1]];p[ft]=h.dotProduct(xt,Pt),N[ft]=h.dotProduct(xt,Lt)}w&&M(r.relativePlacementConstraint)}}if(e.ENFORCE_CONSTRAINTS){if(r.fixedNodeConstraint&&r.fixedNodeConstraint.length>0){var Yt={x:0,y:0};r.fixedNodeConstraint.forEach((function(x,Y){var Z,j,tt={x:p[v.get(x.nodeId)],y:N[v.get(x.nodeId)]},ct=x.position,et=(j=tt,{x:(Z=ct).x-j.x,y:Z.y-j.y});Yt.x+=et.x,Yt.y+=et.y})),Yt.x/=r.fixedNodeConstraint.length,Yt.y/=r.fixedNodeConstraint.length,p.forEach((function(x,Y){p[Y]+=Yt.x})),N.forEach((function(x,Y){N[Y]+=Yt.y})),r.fixedNodeConstraint.forEach((function(x){p[v.get(x.nodeId)]=x.position.x,N[v.get(x.nodeId)]=x.position.y}))}if(r.alignmentConstraint){if(r.alignmentConstraint.vertical)for(var dt=r.alignmentConstraint.vertical,ht=function(x){var Y=new Set;dt[x].forEach((function(tt){Y.add(tt)}));var Z=new Set([].concat(t(Y)).filter((function(tt){return _.has(tt)}))),j=void 0;j=Z.size>0?p[v.get(Z.values().next().value)]:k(Y).x,Y.forEach((function(tt){_.has(tt)||(p[v.get(tt)]=j)}))},st=0;st<dt.length;st++)ht(st);if(r.alignmentConstraint.horizontal)for(var yt=r.alignmentConstraint.horizontal,mt=function(x){var Y=new Set;yt[x].forEach((function(tt){Y.add(tt)}));var Z=new Set([].concat(t(Y)).filter((function(tt){return _.has(tt)}))),j=void 0;j=Z.size>0?N[v.get(Z.values().next().value)]:k(Y).y,Y.forEach((function(tt){_.has(tt)||(N[v.get(tt)]=j)}))},vt=0;vt<yt.length;vt++)mt(vt)}r.relativePlacementConstraint&&(function(){var x=new Map,Y=new Map,Z=new Map,j=new Map,tt=new Map,ct=new Map,et=new Set,ut=new Set;if(_.forEach((function(nt){et.add(nt),ut.add(nt)})),r.alignmentConstraint){if(r.alignmentConstraint.vertical)for(var Tt=r.alignmentConstraint.vertical,St=function(nt){Z.set("dummy"+nt,[]),Tt[nt].forEach((function(It){x.set(It,"dummy"+nt),Z.get("dummy"+nt).push(It),_.has(It)&&et.add("dummy"+nt)})),tt.set("dummy"+nt,p[v.get(Tt[nt][0])])},Mt=0;Mt<Tt.length;Mt++)St(Mt);if(r.alignmentConstraint.horizontal)for(var At=r.alignmentConstraint.horizontal,$=function(nt){j.set("dummy"+nt,[]),At[nt].forEach((function(It){Y.set(It,"dummy"+nt),j.get("dummy"+nt).push(It),_.has(It)&&ut.add("dummy"+nt)})),ct.set("dummy"+nt,N[v.get(At[nt][0])])},K=0;K<At.length;K++)$(K)}var gt=new Map,Nt=new Map,rt=function(nt){F.get(nt).forEach((function(It){var Ht=void 0,Xt=void 0;It.direction=="horizontal"?(Ht=x.get(nt)?x.get(nt):nt,Xt=x.get(It.id)?{id:x.get(It.id),gap:It.gap,direction:It.direction}:It,gt.has(Ht)?gt.get(Ht).push(Xt):gt.set(Ht,[Xt]),gt.has(Xt.id)||gt.set(Xt.id,[])):(Ht=Y.get(nt)?Y.get(nt):nt,Xt=Y.get(It.id)?{id:Y.get(It.id),gap:It.gap,direction:It.direction}:It,Nt.has(Ht)?Nt.get(Ht).push(Xt):Nt.set(Ht,[Xt]),Nt.has(Xt.id)||Nt.set(Xt.id,[]))}))},_t=!0,Ft=!1,Ot=void 0;try{for(var Gt,Dt=F.keys()[Symbol.iterator]();!(_t=(Gt=Dt.next()).done);_t=!0)rt(Gt.value)}catch(nt){Ft=!0,Ot=nt}finally{try{!_t&&Dt.return&&Dt.return()}finally{if(Ft)throw Ot}}var Ct=l(gt),lt=l(Nt),bt=ot(Ct),kt=ot(lt),Wt=E(gt),te=E(Nt),jt=[],qt=[];bt.forEach((function(nt,It){jt[It]=[],nt.forEach((function(Ht){Wt.get(Ht).length==0&&jt[It].push(Ht)}))})),kt.forEach((function(nt,It){qt[It]=[],nt.forEach((function(Ht){te.get(Ht).length==0&&qt[It].push(Ht)}))}));var $t=X(gt,"horizontal",et,tt,jt),Vt=X(Nt,"vertical",ut,ct,qt),re=function(nt){Z.get(nt)?Z.get(nt).forEach((function(It){p[v.get(It)]=$t.get(nt)})):p[v.get(nt)]=$t.get(nt)},Bt=!0,fe=!1,pe=void 0;try{for(var ye,ie=$t.keys()[Symbol.iterator]();!(Bt=(ye=ie.next()).done);Bt=!0)re(ye.value)}catch(nt){fe=!0,pe=nt}finally{try{!Bt&&ie.return&&ie.return()}finally{if(fe)throw pe}}var Xe=function(nt){j.get(nt)?j.get(nt).forEach((function(It){N[v.get(It)]=Vt.get(nt)})):N[v.get(nt)]=Vt.get(nt)},oe=!0,me=!1,ve=void 0;try{for(var Ee,ae=Vt.keys()[Symbol.iterator]();!(oe=(Ee=ae.next()).done);oe=!0)Xe(Ee.value)}catch(nt){me=!0,ve=nt}finally{try{!oe&&ae.return&&ae.return()}finally{if(me)throw ve}}})()}for(var Et=0;Et<I.length;Et++){var wt=I[Et];wt.getChild()==null&&wt.setCenter(p[v.get(wt.id)],N[v.get(wt.id)])}},i.exports=o},551:i=>{i.exports=A}},T={},c=(function i(s){var n=T[s];if(n!==void 0)return n.exports;var t=T[s]={exports:{}};return D[s](t,t.exports,i),t.exports})(45),c;var D,T,c},he.exports=O(lr())),he.exports;var O}var Ie,Ce,gr=Ie?Ae.exports:(Ie=1,Ce=function(O){return A={658:c=>{c.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var s=arguments.length,n=Array(s>1?s-1:0),t=1;t<s;t++)n[t-1]=arguments[t];return n.forEach((function(e){Object.keys(e).forEach((function(a){return i[a]=e[a]}))})),i}},548:(c,i,s)=>{var n=function(a,h){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return(function(g,o){var d=[],r=!0,f=!1,v=void 0;try{for(var p,N=g[Symbol.iterator]();!(r=(p=N.next()).done)&&(d.push(p.value),!o||d.length!==o);r=!0);}catch(I){f=!0,v=I}finally{try{!r&&N.return&&N.return()}finally{if(f)throw v}}return d})(a,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=s(140).layoutBase.LinkedList,e={getTopMostNodes:function(a){for(var h={},g=0;g<a.length;g++)h[a[g].id()]=!0;var o=a.filter((function(d,r){typeof d=="number"&&(d=r);for(var f=d.parent()[0];f!=null;){if(h[f.id()])return!1;f=f.parent()[0]}return!0}));return o},connectComponents:function(a,h,g,o){var d=new t,r=new Set,f=[],v=void 0,p=void 0,N=void 0,I=!1,S=1,U=[],P=[],k=function(){var X=a.collection();P.push(X);var M=g[0],ot=a.collection();ot.merge(M).merge(M.descendants().intersection(h)),f.push(M),ot.forEach((function(u){d.push(u),r.add(u),X.merge(u)}));for(var l=function(){M=d.shift();var u=a.collection();M.neighborhood().nodes().forEach((function(w){h.intersection(M.edgesWith(w)).length>0&&u.merge(w)}));for(var m=0;m<u.length;m++){var y=u[m];(v=g.intersection(y.union(y.ancestors())))==null||r.has(v[0])||v.union(v.descendants()).forEach((function(w){d.push(w),r.add(w),X.merge(w),g.has(w)&&f.push(w)}))}};d.length!=0;)l();if(X.forEach((function(u){h.intersection(u.connectedEdges()).forEach((function(m){X.has(m.source())&&X.has(m.target())&&X.merge(m)}))})),f.length==g.length&&(I=!0),!I||I&&S>1){p=f[0],N=p.connectedEdges().length,f.forEach((function(u){u.connectedEdges().length<N&&(N=u.connectedEdges().length,p=u)})),U.push(p.id());var E=a.collection();E.merge(f[0]),f.forEach((function(u){E.merge(u)})),f=[],g=g.difference(E),S++}};do k();while(!I);return o&&U.length>0&&o.set("dummy"+(o.size+1),U),P},relocateComponent:function(a,h,g){if(!g.fixedNodeConstraint){var o=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;if(g.quality=="draft"){var v=!0,p=!1,N=void 0;try{for(var I,S=h.nodeIndexes[Symbol.iterator]();!(v=(I=S.next()).done);v=!0){var U=I.value,P=n(U,2),k=P[0],X=P[1],M=g.cy.getElementById(k);if(M){var ot=M.boundingBox(),l=h.xCoords[X]-ot.w/2,E=h.xCoords[X]+ot.w/2,u=h.yCoords[X]-ot.h/2,m=h.yCoords[X]+ot.h/2;l<o&&(o=l),E>d&&(d=E),u<r&&(r=u),m>f&&(f=m)}}}catch(b){p=!0,N=b}finally{try{!v&&S.return&&S.return()}finally{if(p)throw N}}var y=a.x-(d+o)/2,w=a.y-(f+r)/2;h.xCoords=h.xCoords.map((function(b){return b+y})),h.yCoords=h.yCoords.map((function(b){return b+w}))}else{Object.keys(h).forEach((function(b){var L=h[b],z=L.getRect().x,G=L.getRect().x+L.getRect().width,B=L.getRect().y,W=L.getRect().y+L.getRect().height;z<o&&(o=z),G>d&&(d=G),B<r&&(r=B),W>f&&(f=W)}));var _=a.x-(d+o)/2,F=a.y-(f+r)/2;Object.keys(h).forEach((function(b){var L=h[b];L.setCenter(L.getCenterX()+_,L.getCenterY()+F)}))}}},calcBoundingBox:function(a,h,g,o){for(var d=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,p=void 0,N=void 0,I=void 0,S=void 0,U=a.descendants().not(":parent"),P=U.length,k=0;k<P;k++){var X=U[k];d>(p=h[o.get(X.id())]-X.width()/2)&&(d=p),r<(N=h[o.get(X.id())]+X.width()/2)&&(r=N),f>(I=g[o.get(X.id())]-X.height()/2)&&(f=I),v<(S=g[o.get(X.id())]+X.height()/2)&&(v=S)}var M={};return M.topLeftX=d,M.topLeftY=f,M.width=r-d,M.height=v-f,M},calcParentsWithoutChildren:function(a,h){var g=a.collection();return h.nodes(":parent").forEach((function(o){var d=!1;o.children().forEach((function(r){r.css("display")!="none"&&(d=!0)})),d||g.merge(o)})),g}};c.exports=e},816:(c,i,s)=>{var n=s(548),t=s(140).CoSELayout,e=s(140).CoSENode,a=s(140).layoutBase.PointD,h=s(140).layoutBase.DimensionD,g=s(140).layoutBase.LayoutConstants,o=s(140).layoutBase.FDLayoutConstants,d=s(140).CoSEConstants;c.exports={coseLayout:function(r,f){var v=r.cy,p=r.eles,N=p.nodes(),I=p.edges(),S=void 0,U=void 0,P=void 0,k={};r.randomize&&(S=f.nodeIndexes,U=f.xCoords,P=f.yCoords);var X=function(u){return typeof u=="function"},M=function(u,m){return X(u)?u(m):u},ot=n.calcParentsWithoutChildren(v,p);r.nestingFactor!=null&&(d.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=r.nestingFactor),r.gravity!=null&&(d.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=r.gravity),r.numIter!=null&&(d.MAX_ITERATIONS=o.MAX_ITERATIONS=r.numIter),r.gravityRange!=null&&(d.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=r.gravityRange),r.gravityCompound!=null&&(d.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=r.gravityCompound),r.gravityRangeCompound!=null&&(d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=r.gravityRangeCompound),r.initialEnergyOnIncremental!=null&&(d.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=r.initialEnergyOnIncremental),r.tilingCompareBy!=null&&(d.TILING_COMPARE_BY=r.tilingCompareBy),r.quality=="proof"?g.QUALITY=2:g.QUALITY=0,d.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=g.NODE_DIMENSIONS_INCLUDE_LABELS=r.nodeDimensionsIncludeLabels,d.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!r.randomize,d.ANIMATE=o.ANIMATE=g.ANIMATE=r.animate,d.TILE=r.tile,d.TILING_PADDING_VERTICAL=typeof r.tilingPaddingVertical=="function"?r.tilingPaddingVertical.call():r.tilingPaddingVertical,d.TILING_PADDING_HORIZONTAL=typeof r.tilingPaddingHorizontal=="function"?r.tilingPaddingHorizontal.call():r.tilingPaddingHorizontal,d.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!0,d.PURE_INCREMENTAL=!r.randomize,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=r.uniformNodeDimensions,r.step=="transformed"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,d.ENFORCE_CONSTRAINTS=!1,d.APPLY_LAYOUT=!1),r.step=="enforced"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!0,d.APPLY_LAYOUT=!1),r.step=="cose"&&(d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!1,d.APPLY_LAYOUT=!0),r.step=="all"&&(r.randomize?d.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:d.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,d.ENFORCE_CONSTRAINTS=!0,d.APPLY_LAYOUT=!0),r.fixedNodeConstraint||r.alignmentConstraint||r.relativePlacementConstraint?d.TREE_REDUCTION_ON_INCREMENTAL=!1:d.TREE_REDUCTION_ON_INCREMENTAL=!0;var l=new t,E=l.newGraphManager();return(function u(m,y,w,_){for(var F=y.length,b=0;b<F;b++){var L=y[b],z=null;L.intersection(ot).length==0&&(z=L.children());var G=void 0,B=L.layoutDimensions({nodeDimensionsIncludeLabels:_.nodeDimensionsIncludeLabels});if(L.outerWidth()!=null&&L.outerHeight()!=null)if(_.randomize)if(L.isParent()){var W=n.calcBoundingBox(L,U,P,S);G=L.intersection(ot).length==0?m.add(new e(w.graphManager,new a(W.topLeftX,W.topLeftY),new h(W.width,W.height))):m.add(new e(w.graphManager,new a(W.topLeftX,W.topLeftY),new h(parseFloat(B.w),parseFloat(B.h))))}else G=m.add(new e(w.graphManager,new a(U[S.get(L.id())]-B.w/2,P[S.get(L.id())]-B.h/2),new h(parseFloat(B.w),parseFloat(B.h))));else G=m.add(new e(w.graphManager,new a(L.position("x")-B.w/2,L.position("y")-B.h/2),new h(parseFloat(B.w),parseFloat(B.h))));else G=m.add(new e(this.graphManager));G.id=L.data("id"),G.nodeRepulsion=M(_.nodeRepulsion,L),G.paddingLeft=parseInt(L.css("padding")),G.paddingTop=parseInt(L.css("padding")),G.paddingRight=parseInt(L.css("padding")),G.paddingBottom=parseInt(L.css("padding")),_.nodeDimensionsIncludeLabels&&(G.labelWidth=L.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,G.labelHeight=L.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,G.labelPosVertical=L.css("text-valign"),G.labelPosHorizontal=L.css("text-halign")),k[L.data("id")]=G,isNaN(G.rect.x)&&(G.rect.x=0),isNaN(G.rect.y)&&(G.rect.y=0),z!=null&&z.length>0&&u(w.getGraphManager().add(w.newGraph(),G),z,w,_)}})(E.addRoot(),n.getTopMostNodes(N),l,r),(function(u,m,y){for(var w=0,_=0,F=0;F<y.length;F++){var b=y[F],L=k[b.data("source")],z=k[b.data("target")];if(L&&z&&L!==z&&L.getEdgesBetween(z).length==0){var G=m.add(u.newEdge(),L,z);G.id=b.id(),G.idealLength=M(r.idealEdgeLength,b),G.edgeElasticity=M(r.edgeElasticity,b),w+=G.idealLength,_++}}r.idealEdgeLength!=null&&(_>0?d.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=w/_:X(r.idealEdgeLength)?d.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=50:d.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=r.idealEdgeLength,d.MIN_REPULSION_DIST=o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,d.DEFAULT_RADIAL_SEPARATION=o.DEFAULT_EDGE_LENGTH)})(l,E,I),(function(u,m){m.fixedNodeConstraint&&(u.constraints.fixedNodeConstraint=m.fixedNodeConstraint),m.alignmentConstraint&&(u.constraints.alignmentConstraint=m.alignmentConstraint),m.relativePlacementConstraint&&(u.constraints.relativePlacementConstraint=m.relativePlacementConstraint)})(l,r),l.runLayout(),k}}},212:(c,i,s)=>{var n=(function(){function d(r,f){for(var v=0;v<f.length;v++){var p=f[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(r,p.key,p)}}return function(r,f,v){return f&&d(r.prototype,f),v&&d(r,v),r}})(),t=s(658),e=s(548),a=s(657).spectralLayout,h=s(816).coseLayout,g=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(d){return 4500},idealEdgeLength:function(d){return 50},edgeElasticity:function(d){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),o=(function(){function d(r){(function(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.options=t({},g,r)}return n(d,[{key:"run",value:function(){var r=this.options,f=r.cy,v=r.eles,p=[],N=[],I=void 0,S=[];!r.fixedNodeConstraint||Array.isArray(r.fixedNodeConstraint)&&r.fixedNodeConstraint.length!=0||(r.fixedNodeConstraint=void 0),r.alignmentConstraint&&(!r.alignmentConstraint.vertical||Array.isArray(r.alignmentConstraint.vertical)&&r.alignmentConstraint.vertical.length!=0||(r.alignmentConstraint.vertical=void 0),!r.alignmentConstraint.horizontal||Array.isArray(r.alignmentConstraint.horizontal)&&r.alignmentConstraint.horizontal.length!=0||(r.alignmentConstraint.horizontal=void 0)),!r.relativePlacementConstraint||Array.isArray(r.relativePlacementConstraint)&&r.relativePlacementConstraint.length!=0||(r.relativePlacementConstraint=void 0),(r.fixedNodeConstraint||r.alignmentConstraint||r.relativePlacementConstraint)&&(r.tile=!1,r.packComponents=!1);var U=void 0,P=!1;if(f.layoutUtilities&&r.packComponents&&((U=f.layoutUtilities("get"))||(U=f.layoutUtilities()),P=!0),v.nodes().length>0)if(P){var k=e.getTopMostNodes(r.eles.nodes());if((I=e.connectComponents(f,r.eles,k)).forEach((function(R){var C=R.boundingBox();S.push({x:C.x1+C.w/2,y:C.y1+C.h/2})})),r.randomize&&I.forEach((function(R){r.eles=R,p.push(a(r))})),r.quality=="default"||r.quality=="proof"){var X=f.collection();if(r.tile){var M=new Map,ot=0,l={nodeIndexes:M,xCoords:[],yCoords:[]},E=[];if(I.forEach((function(R,C){R.edges().length==0&&(R.nodes().forEach((function(H,V){X.merge(R.nodes()[V]),H.isParent()||(l.nodeIndexes.set(R.nodes()[V].id(),ot++),l.xCoords.push(R.nodes()[0].position().x),l.yCoords.push(R.nodes()[0].position().y))})),E.push(C))})),X.length>1){var u=X.boundingBox();S.push({x:u.x1+u.w/2,y:u.y1+u.h/2}),I.push(X),p.push(l);for(var m=E.length-1;m>=0;m--)I.splice(E[m],1),p.splice(E[m],1),S.splice(E[m],1)}}I.forEach((function(R,C){r.eles=R,N.push(h(r,p[C])),e.relocateComponent(S[C],N[C],r)}))}else I.forEach((function(R,C){e.relocateComponent(S[C],p[C],r)}));var y=new Set;if(I.length>1){var w=[],_=v.filter((function(R){return R.css("display")=="none"}));I.forEach((function(R,C){var H=void 0;if(r.quality=="draft"&&(H=p[C].nodeIndexes),R.nodes().not(_).length>0){var V={edges:[],nodes:[]},Q=void 0;R.nodes().not(_).forEach((function(J){if(r.quality=="draft")if(J.isParent()){var at=e.calcBoundingBox(J,p[C].xCoords,p[C].yCoords,H);V.nodes.push({x:at.topLeftX,y:at.topLeftY,width:at.width,height:at.height})}else Q=H.get(J.id()),V.nodes.push({x:p[C].xCoords[Q]-J.boundingbox().w/2,y:p[C].yCoords[Q]-J.boundingbox().h/2,width:J.boundingbox().w,height:J.boundingbox().h});else N[C][J.id()]&&V.nodes.push({x:N[C][J.id()].getLeft(),y:N[C][J.id()].getTop(),width:N[C][J.id()].getWidth(),height:N[C][J.id()].getHeight()})})),R.edges().forEach((function(J){var at=J.source(),pt=J.target();if(at.css("display")!="none"&&pt.css("display")!="none")if(r.quality=="draft"){var q=H.get(at.id()),Rt=H.get(pt.id()),ft=[],xt=[];if(at.isParent()){var Pt=e.calcBoundingBox(at,p[C].xCoords,p[C].yCoords,H);ft.push(Pt.topLeftX+Pt.width/2),ft.push(Pt.topLeftY+Pt.height/2)}else ft.push(p[C].xCoords[q]),ft.push(p[C].yCoords[q]);if(pt.isParent()){var Lt=e.calcBoundingBox(pt,p[C].xCoords,p[C].yCoords,H);xt.push(Lt.topLeftX+Lt.width/2),xt.push(Lt.topLeftY+Lt.height/2)}else xt.push(p[C].xCoords[Rt]),xt.push(p[C].yCoords[Rt]);V.edges.push({startX:ft[0],startY:ft[1],endX:xt[0],endY:xt[1]})}else N[C][at.id()]&&N[C][pt.id()]&&V.edges.push({startX:N[C][at.id()].getCenterX(),startY:N[C][at.id()].getCenterY(),endX:N[C][pt.id()].getCenterX(),endY:N[C][pt.id()].getCenterY()})})),V.nodes.length>0&&(w.push(V),y.add(C))}}));var F=U.packComponents(w,r.randomize).shifts;if(r.quality=="draft")p.forEach((function(R,C){var H=R.xCoords.map((function(Q){return Q+F[C].dx})),V=R.yCoords.map((function(Q){return Q+F[C].dy}));R.xCoords=H,R.yCoords=V}));else{var b=0;y.forEach((function(R){Object.keys(N[R]).forEach((function(C){var H=N[R][C];H.setCenter(H.getCenterX()+F[b].dx,H.getCenterY()+F[b].dy)})),b++}))}}}else{var L=r.eles.boundingBox();if(S.push({x:L.x1+L.w/2,y:L.y1+L.h/2}),r.randomize){var z=a(r);p.push(z)}r.quality=="default"||r.quality=="proof"?(N.push(h(r,p[0])),e.relocateComponent(S[0],N[0],r)):e.relocateComponent(S[0],p[0],r)}var G=function(R,C){if(r.quality=="default"||r.quality=="proof"){typeof R=="number"&&(R=C);var H=void 0,V=void 0,Q=R.data("id");return N.forEach((function(at){Q in at&&(H={x:at[Q].getRect().getCenterX(),y:at[Q].getRect().getCenterY()},V=at[Q])})),r.nodeDimensionsIncludeLabels&&(V.labelWidth&&(V.labelPosHorizontal=="left"?H.x+=V.labelWidth/2:V.labelPosHorizontal=="right"&&(H.x-=V.labelWidth/2)),V.labelHeight&&(V.labelPosVertical=="top"?H.y+=V.labelHeight/2:V.labelPosVertical=="bottom"&&(H.y-=V.labelHeight/2))),H==null&&(H={x:R.position("x"),y:R.position("y")}),{x:H.x,y:H.y}}var J=void 0;return p.forEach((function(at){var pt=at.nodeIndexes.get(R.id());pt!=null&&(J={x:at.xCoords[pt],y:at.yCoords[pt]})})),J==null&&(J={x:R.position("x"),y:R.position("y")}),{x:J.x,y:J.y}};if(r.quality=="default"||r.quality=="proof"||r.randomize){var B=e.calcParentsWithoutChildren(f,v),W=v.filter((function(R){return R.css("display")=="none"}));r.eles=v.not(W),v.nodes().not(":parent").not(W).layoutPositions(this,r,G),B.length>0&&B.forEach((function(R){R.position(G(R))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),d})();c.exports=o},657:(c,i,s)=>{var n=s(548),t=s(140).layoutBase.Matrix,e=s(140).layoutBase.SVD;c.exports={spectralLayout:function(a){var h=a.cy,g=a.eles,o=g.nodes(),d=g.nodes(":parent"),r=new Map,f=new Map,v=new Map,p=[],N=[],I=[],S=[],U=[],P=[],k=[],X=[],M=void 0,ot=1e8,l=1e-9,E=a.piTol,u=a.samplingType,m=a.nodeSeparation,y=void 0,w=function(dt,ht,st){for(var yt=[],mt=0,vt=0,Et=0,wt=void 0,x=[],Y=0,Z=1,j=0;j<M;j++)x[j]=ot;for(yt[vt]=dt,x[dt]=0;vt>=mt;){Et=yt[mt++];for(var tt=p[Et],ct=0;ct<tt.length;ct++)x[wt=f.get(tt[ct])]==ot&&(x[wt]=x[Et]+1,yt[++vt]=wt);P[Et][ht]=x[Et]*m}if(st){for(var et=0;et<M;et++)P[et][ht]<U[et]&&(U[et]=P[et][ht]);for(var ut=0;ut<M;ut++)U[ut]>Y&&(Y=U[ut],Z=ut)}return Z};n.connectComponents(h,g,n.getTopMostNodes(o),r),d.forEach((function(dt){n.connectComponents(h,g,n.getTopMostNodes(dt.descendants().intersection(g)),r)}));for(var _=0,F=0;F<o.length;F++)o[F].isParent()||f.set(o[F].id(),_++);var b=!0,L=!1,z=void 0;try{for(var G,B=r.keys()[Symbol.iterator]();!(b=(G=B.next()).done);b=!0){var W=G.value;f.set(W,_++)}}catch(dt){L=!0,z=dt}finally{try{!b&&B.return&&B.return()}finally{if(L)throw z}}for(var R=0;R<f.size;R++)p[R]=[];d.forEach((function(dt){for(var ht=dt.children().intersection(g);ht.nodes(":childless").length==0;)ht=ht.nodes()[0].children().intersection(g);var st=0,yt=ht.nodes(":childless")[0].connectedEdges().length;ht.nodes(":childless").forEach((function(mt,vt){mt.connectedEdges().length<yt&&(yt=mt.connectedEdges().length,st=vt)})),v.set(dt.id(),ht.nodes(":childless")[st].id())})),o.forEach((function(dt){var ht=void 0;ht=dt.isParent()?f.get(v.get(dt.id())):f.get(dt.id()),dt.neighborhood().nodes().forEach((function(st){g.intersection(dt.edgesWith(st)).length>0&&(st.isParent()?p[ht].push(v.get(st.id())):p[ht].push(st.id()))}))}));var C=function(dt){var ht=f.get(dt),st=void 0;r.get(dt).forEach((function(yt){st=h.getElementById(yt).isParent()?v.get(yt):yt,p[ht].push(st),p[f.get(st)].push(dt)}))},H=!0,V=!1,Q=void 0;try{for(var J,at=r.keys()[Symbol.iterator]();!(H=(J=at.next()).done);H=!0)C(J.value)}catch(dt){V=!0,Q=dt}finally{try{!H&&at.return&&at.return()}finally{if(V)throw Q}}var pt=void 0;if((M=f.size)>2){y=M<a.sampleSize?M:a.sampleSize;for(var q=0;q<M;q++)P[q]=[];for(var Rt=0;Rt<y;Rt++)X[Rt]=[];return a.quality=="draft"||a.step=="all"?((function(dt){var ht=void 0;if(dt){ht=Math.floor(Math.random()*M);for(var st=0;st<M;st++)U[st]=ot;for(var yt=0;yt<y;yt++)S[yt]=ht,ht=w(ht,yt,dt)}else{(function(){for(var Z=0,j=0,tt=!1;j<y;){Z=Math.floor(Math.random()*M),tt=!1;for(var ct=0;ct<j;ct++)if(S[ct]==Z){tt=!0;break}tt||(S[j]=Z,j++)}})();for(var mt=0;mt<y;mt++)w(S[mt],mt,dt)}for(var vt=0;vt<M;vt++)for(var Et=0;Et<y;Et++)P[vt][Et]*=P[vt][Et];for(var wt=0;wt<y;wt++)k[wt]=[];for(var x=0;x<y;x++)for(var Y=0;Y<y;Y++)k[x][Y]=P[S[Y]][x]})(u),(function(){for(var dt=e.svd(k),ht=dt.S,st=dt.U,yt=dt.V,mt=ht[0]*ht[0]*ht[0],vt=[],Et=0;Et<y;Et++){vt[Et]=[];for(var wt=0;wt<y;wt++)vt[Et][wt]=0,Et==wt&&(vt[Et][wt]=ht[Et]/(ht[Et]*ht[Et]+mt/(ht[Et]*ht[Et])))}X=t.multMat(t.multMat(yt,vt),t.transpose(st))})(),(function(){for(var dt=void 0,ht=void 0,st=[],yt=[],mt=[],vt=[],Et=0;Et<M;Et++)st[Et]=Math.random(),yt[Et]=Math.random();st=t.normalize(st),yt=t.normalize(yt);for(var wt=l,x=l,Y=void 0;;){for(var Z=0;Z<M;Z++)mt[Z]=st[Z];if(st=t.multGamma(t.multL(t.multGamma(mt),P,X)),dt=t.dotProduct(mt,st),st=t.normalize(st),wt=t.dotProduct(mt,st),(Y=Math.abs(wt/x))<=1+E&&Y>=1)break;x=wt}for(var j=0;j<M;j++)mt[j]=st[j];for(x=l;;){for(var tt=0;tt<M;tt++)vt[tt]=yt[tt];if(vt=t.minusOp(vt,t.multCons(mt,t.dotProduct(mt,vt))),yt=t.multGamma(t.multL(t.multGamma(vt),P,X)),ht=t.dotProduct(vt,yt),yt=t.normalize(yt),wt=t.dotProduct(vt,yt),(Y=Math.abs(wt/x))<=1+E&&Y>=1)break;x=wt}for(var ct=0;ct<M;ct++)vt[ct]=yt[ct];N=t.multCons(mt,Math.sqrt(Math.abs(dt))),I=t.multCons(vt,Math.sqrt(Math.abs(ht)))})(),pt={nodeIndexes:f,xCoords:N,yCoords:I}):(f.forEach((function(dt,ht){N.push(h.getElementById(ht).position("x")),I.push(h.getElementById(ht).position("y"))})),pt={nodeIndexes:f,xCoords:N,yCoords:I}),pt}var ft=f.keys(),xt=h.getElementById(ft.next().value),Pt=xt.position(),Lt=xt.outerWidth();if(N.push(Pt.x),I.push(Pt.y),M==2){var Yt=h.getElementById(ft.next().value).outerWidth();N.push(Pt.x+Lt/2+Yt/2+a.idealEdgeLength),I.push(Pt.y)}return pt={nodeIndexes:f,xCoords:N,yCoords:I}}}},579:(c,i,s)=>{var n=s(212),t=function(e){e&&e("layout","fcose",n)};typeof cytoscape<"u"&&t(cytoscape),c.exports=t},140:c=>{c.exports=O}},D={},T=(function c(i){var s=D[i];if(s!==void 0)return s.exports;var n=D[i]={exports:{}};return A[i](n,n.exports,c),n.exports})(579),T;var A,D,T},Ae.exports=Ce(dr()));const cr=hr(gr);var Le={L:"left",R:"right",T:"top",B:"bottom"},_e={L:it((O=>`${O},${O/2} 0,${O} 0,0`),"L"),R:it((O=>`0,${O/2} ${O},0 ${O},${O}`),"R"),T:it((O=>`0,0 ${O},0 ${O/2},${O}`),"T"),B:it((O=>`${O/2},0 ${O},${O} 0,${O}`),"B")},ne={L:it(((O,A)=>O-A+2),"L"),R:it(((O,A)=>O-2),"R"),T:it(((O,A)=>O-A+2),"T"),B:it(((O,A)=>O-2),"B")},ur=it((function(O){return Ut(O)?O==="L"?"R":"L":O==="T"?"B":"T"}),"getOppositeArchitectureDirection"),Me=it((function(O){return O==="L"||O==="R"||O==="T"||O==="B"}),"isArchitectureDirection"),Ut=it((function(O){return O==="L"||O==="R"}),"isArchitectureDirectionX"),zt=it((function(O){return O==="T"||O==="B"}),"isArchitectureDirectionY"),ue=it((function(O,A){const D=Ut(O)&&zt(A),T=zt(O)&&Ut(A);return D||T}),"isArchitectureDirectionXY"),fr=it((function(O){const A=O[0],D=O[1],T=Ut(A)&&zt(D),c=zt(A)&&Ut(D);return T||c}),"isArchitecturePairXY"),pr=it((function(O){return O!=="LL"&&O!=="RR"&&O!=="TT"&&O!=="BB"}),"isValidArchitectureDirectionPair"),de=it((function(O,A){const D=`${O}${A}`;return pr(D)?D:void 0}),"getArchitectureDirectionPair"),yr=it((function([O,A],D){const T=D[0],c=D[1];return Ut(T)?zt(c)?[O+(T==="L"?-1:1),A+(c==="T"?1:-1)]:[O+(T==="L"?-1:1),A]:Ut(c)?[O+(c==="L"?1:-1),A+(T==="T"?1:-1)]:[O,A+(T==="T"?1:-1)]}),"shiftPositionByArchitectureDirectionPair"),mr=it((function(O){return O==="LT"||O==="TL"?[1,1]:O==="BL"||O==="LB"?[1,-1]:O==="BR"||O==="RB"?[-1,-1]:[-1,1]}),"getArchitectureDirectionXYFactors"),vr=it((function(O,A){return ue(O,A)?"bend":Ut(O)?"horizontal":"vertical"}),"getArchitectureDirectionAlignment"),Er=it((function(O){return O.type==="service"}),"isArchitectureService"),Nr=it((function(O){return O.type==="junction"}),"isArchitectureJunction"),De=it((O=>O.data()),"edgeData"),Kt=it((O=>O.data()),"nodeData"),Tr=tr.architecture,Qt,Re=(Qt=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=Be,this.getAccTitle=We,this.setDiagramTitle=je,this.getDiagramTitle=qe,this.getAccDescription=$e,this.setAccDescription=Ze,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},Je()}addService({id:A,icon:D,in:T,title:c,iconText:i}){if(this.registeredIds[A]!==void 0)throw new Error(`The service id [${A}] is already in use by another ${this.registeredIds[A]}`);if(T!==void 0){if(A===T)throw new Error(`The service [${A}] cannot be placed within itself`);if(this.registeredIds[T]===void 0)throw new Error(`The service [${A}]'s parent does not exist. Please make sure the parent is created before this service`);if(this.registeredIds[T]==="node")throw new Error(`The service [${A}]'s parent is not a group`)}this.registeredIds[A]="node",this.nodes[A]={id:A,type:"service",icon:D,iconText:i,title:c,edges:[],in:T}}getServices(){return Object.values(this.nodes).filter(Er)}addJunction({id:A,in:D}){this.registeredIds[A]="node",this.nodes[A]={id:A,type:"junction",edges:[],in:D}}getJunctions(){return Object.values(this.nodes).filter(Nr)}getNodes(){return Object.values(this.nodes)}getNode(A){return this.nodes[A]??null}addGroup({id:A,icon:D,in:T,title:c}){if(this.registeredIds?.[A]!==void 0)throw new Error(`The group id [${A}] is already in use by another ${this.registeredIds[A]}`);if(T!==void 0){if(A===T)throw new Error(`The group [${A}] cannot be placed within itself`);if(this.registeredIds?.[T]===void 0)throw new Error(`The group [${A}]'s parent does not exist. Please make sure the parent is created before this group`);if(this.registeredIds?.[T]==="node")throw new Error(`The group [${A}]'s parent is not a group`)}this.registeredIds[A]="group",this.groups[A]={id:A,icon:D,title:c,in:T}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:A,rhsId:D,lhsDir:T,rhsDir:c,lhsInto:i,rhsInto:s,lhsGroup:n,rhsGroup:t,title:e}){if(!Me(T))throw new Error(`Invalid direction given for left hand side of edge ${A}--${D}. Expected (L,R,T,B) got ${String(T)}`);if(!Me(c))throw new Error(`Invalid direction given for right hand side of edge ${A}--${D}. Expected (L,R,T,B) got ${String(c)}`);if(this.nodes[A]===void 0&&this.groups[A]===void 0)throw new Error(`The left-hand id [${A}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(this.nodes[D]===void 0&&this.groups[D]===void 0)throw new Error(`The right-hand id [${D}] does not yet exist. Please create the service/group before declaring an edge to it.`);const a=this.nodes[A].in,h=this.nodes[D].in;if(n&&a&&h&&a==h)throw new Error(`The left-hand id [${A}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(t&&a&&h&&a==h)throw new Error(`The right-hand id [${D}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const g={lhsId:A,lhsDir:T,lhsInto:i,lhsGroup:n,rhsId:D,rhsDir:c,rhsInto:s,rhsGroup:t,title:e};this.edges.push(g),this.nodes[A]&&this.nodes[D]&&(this.nodes[A].edges.push(this.edges[this.edges.length-1]),this.nodes[D].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(this.dataStructures===void 0){const A={},D=Object.entries(this.nodes).reduce(((t,[e,a])=>(t[e]=a.edges.reduce(((h,g)=>{const o=this.getNode(g.lhsId)?.in,d=this.getNode(g.rhsId)?.in;if(o&&d&&o!==d){const r=vr(g.lhsDir,g.rhsDir);r!=="bend"&&(A[o]??={},A[o][d]=r,A[d]??={},A[d][o]=r)}if(g.lhsId===e){const r=de(g.lhsDir,g.rhsDir);r&&(h[r]=g.rhsId)}else{const r=de(g.rhsDir,g.lhsDir);r&&(h[r]=g.lhsId)}return h}),{}),t)),{}),T=Object.keys(D)[0],c={[T]:1},i=Object.keys(D).reduce(((t,e)=>e===T?t:{...t,[e]:1}),{}),s=it((t=>{const e={[t]:[0,0]},a=[t];for(;a.length>0;){const h=a.shift();if(h){c[h]=1,delete i[h];const g=D[h],[o,d]=e[h];Object.entries(g).forEach((([r,f])=>{c[f]||(e[f]=yr([o,d],r),a.push(f))}))}}return e}),"BFS"),n=[s(T)];for(;Object.keys(i).length>0;)n.push(s(Object.keys(i)[0]));this.dataStructures={adjList:D,spatialMaps:n,groupAlignments:A}}return this.dataStructures}setElementForId(A,D){this.elements[A]=D}getElementById(A){return this.elements[A]}getConfig(){return Ke({...Tr,...Qe().architecture})}getConfigField(A){return this.getConfig()[A]}},it(Qt,"ArchitectureDB"),Qt),Ar=it(((O,A)=>{ar(O,A),O.groups.map((D=>A.addGroup(D))),O.services.map((D=>A.addService({...D,type:"service"}))),O.junctions.map((D=>A.addJunction({...D,type:"junction"}))),O.edges.map((D=>A.addEdge(D)))}),"populateDb"),be={parser:{yy:void 0},parse:it((async O=>{const A=await sr("architecture",O);xe.debug(A);const D=be.parser?.yy;if(!(D instanceof Re))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");Ar(A,D)}),"parse")},wr=it((O=>`
  .edge {
    stroke-width: ${O.archEdgeWidth};
    stroke: ${O.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${O.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${O.archGroupBorderColor};
    stroke-width: ${O.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`),"getStyles"),Jt=it((O=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${O}</g>`),"wrapIcon"),ee={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Jt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Jt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Jt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Jt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Jt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:or,blank:{body:Jt("")}}},Ir=it((async function(O,A,D){const T=D.getConfigField("padding"),c=D.getConfigField("iconSize"),i=c/2,s=c/6,n=s/2;await Promise.all(A.edges().map((async t=>{const{source:e,sourceDir:a,sourceArrow:h,sourceGroup:g,target:o,targetDir:d,targetArrow:r,targetGroup:f,label:v}=De(t);let{x:p,y:N}=t[0].sourceEndpoint();const{x:I,y:S}=t[0].midpoint();let{x:U,y:P}=t[0].targetEndpoint();const k=T+4;if(g&&(Ut(a)?p+=a==="L"?-k:k:N+=a==="T"?-k:k+18),f&&(Ut(d)?U+=d==="L"?-k:k:P+=d==="T"?-k:k+18),g||D.getNode(e)?.type!=="junction"||(Ut(a)?p+=a==="L"?i:-i:N+=a==="T"?i:-i),f||D.getNode(o)?.type!=="junction"||(Ut(d)?U+=d==="L"?i:-i:P+=d==="T"?i:-i),t[0]._private.rscratch){const X=O.insert("g");if(X.insert("path").attr("d",`M ${p},${N} L ${I},${S} L${U},${P} `).attr("class","edge").attr("id",nr(e,o,{prefix:"L"})),h){const M=Ut(a)?ne[a](p,s):p-n,ot=zt(a)?ne[a](N,s):N-n;X.insert("polygon").attr("points",_e[a](s)).attr("transform",`translate(${M},${ot})`).attr("class","arrow")}if(r){const M=Ut(d)?ne[d](U,s):U-n,ot=zt(d)?ne[d](P,s):P-n;X.insert("polygon").attr("points",_e[d](s)).attr("transform",`translate(${M},${ot})`).attr("class","arrow")}if(v){const M=ue(a,d)?"XY":Ut(a)?"X":"Y";let ot=0;ot=M==="X"?Math.abs(p-U):M==="Y"?Math.abs(N-P)/1.5:Math.abs(p-U)/2;const l=X.append("g");if(await ce(l,v,{useHtmlLabels:!1,width:ot,classes:"architecture-service-label"},ge()),l.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),M==="X")l.attr("transform","translate("+I+", "+S+")");else if(M==="Y")l.attr("transform","translate("+I+", "+S+") rotate(-90)");else if(M==="XY"){const E=de(a,d);if(E&&fr(E)){const u=l.node().getBoundingClientRect(),[m,y]=mr(E);l.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*m*y*45})`);const w=l.node().getBoundingClientRect();l.attr("transform",`
                translate(${I}, ${S-u.height/2})
                translate(${m*w.width/2}, ${y*w.height/2})
                rotate(${-1*m*y*45}, 0, ${u.height/2})
              `)}}}}})))}),"drawEdges"),Cr=it((async function(O,A,D){const T=.75*D.getConfigField("padding"),c=D.getConfigField("fontSize"),i=D.getConfigField("iconSize")/2;await Promise.all(A.nodes().map((async s=>{const n=Kt(s);if(n.type==="group"){const{h:t,w:e,x1:a,y1:h}=s.boundingBox(),g=O.append("rect");g.attr("id",`group-${n.id}`).attr("x",a+i).attr("y",h+i).attr("width",e).attr("height",t).attr("class","node-bkg");const o=O.append("g");let d=a,r=h;if(n.icon){const f=o.append("g");f.html(`<g>${await se(n.icon,{height:T,width:T,fallbackPrefix:ee.prefix})}</g>`),f.attr("transform","translate("+(d+i+1)+", "+(r+i+1)+")"),d+=T,r+=c/2-1-2}if(n.label){const f=o.append("g");await ce(f,n.label,{useHtmlLabels:!1,width:e,classes:"architecture-service-label"},ge()),f.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),f.attr("transform","translate("+(d+i+4)+", "+(r+i+2)+")")}D.setElementForId(n.id,g)}})))}),"drawGroups"),Lr=it((async function(O,A,D){const T=ge();for(const c of D){const i=A.append("g"),s=O.getConfigField("iconSize");if(c.title){const a=i.append("g");await ce(a,c.title,{useHtmlLabels:!1,width:1.5*s,classes:"architecture-service-label"},T),a.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),a.attr("transform","translate("+s/2+", "+s+")")}const n=i.append("g");if(c.icon)n.html(`<g>${await se(c.icon,{height:s,width:s,fallbackPrefix:ee.prefix})}</g>`);else if(c.iconText){n.html(`<g>${await se("blank",{height:s,width:s,fallbackPrefix:ee.prefix})}</g>`);const a=n.append("g").append("foreignObject").attr("width",s).attr("height",s).append("div").attr("class","node-icon-text").attr("style",`height: ${s}px;`).append("div").html(er(c.iconText,T)),h=parseInt(window.getComputedStyle(a.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;a.attr("style",`-webkit-line-clamp: ${Math.floor((s-2)/h)};`)}else n.append("path").attr("class","node-bkg").attr("id","node-"+c.id).attr("d",`M0 ${s} v${-s} q0,-5 5,-5 h${s} q5,0 5,5 v${s} H0 Z`);i.attr("id",`service-${c.id}`).attr("class","architecture-service");const{width:t,height:e}=i.node().getBBox();c.width=t,c.height=e,O.setElementForId(c.id,i)}return 0}),"drawServices"),_r=it((function(O,A,D){D.forEach((T=>{const c=A.append("g"),i=O.getConfigField("iconSize");c.append("g").append("rect").attr("id","node-"+T.id).attr("fill-opacity","0").attr("width",i).attr("height",i),c.attr("class","architecture-junction");const{width:s,height:n}=c._groups[0][0].getBBox();c.width=s,c.height=n,O.setElementForId(T.id,c)}))}),"drawJunctions");function Fe(O,A,D){O.forEach((T=>{A.add({group:"nodes",data:{type:"service",id:T.id,icon:T.icon,label:T.title,parent:T.in,width:D.getConfigField("iconSize"),height:D.getConfigField("iconSize")},classes:"node-service"})}))}function Ge(O,A,D){O.forEach((T=>{A.add({group:"nodes",data:{type:"junction",id:T.id,parent:T.in,width:D.getConfigField("iconSize"),height:D.getConfigField("iconSize")},classes:"node-junction"})}))}function Se(O,A){A.nodes().map((D=>{const T=Kt(D);T.type!=="group"&&(T.x=D.position().x,T.y=D.position().y,O.getElementById(T.id).attr("transform","translate("+(T.x||0)+","+(T.y||0)+")"))}))}function Pe(O,A){O.forEach((D=>{A.add({group:"nodes",data:{type:"group",id:D.id,icon:D.icon,label:D.title,parent:D.in},classes:"node-group"})}))}function Ue(O,A){O.forEach((D=>{const{lhsId:T,rhsId:c,lhsInto:i,lhsGroup:s,rhsInto:n,lhsDir:t,rhsDir:e,rhsGroup:a,title:h}=D,g=ue(D.lhsDir,D.rhsDir)?"segments":"straight",o={id:`${T}-${c}`,label:h,source:T,sourceDir:t,sourceArrow:i,sourceGroup:s,sourceEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%",target:c,targetDir:e,targetArrow:n,targetGroup:a,targetEndpoint:e==="L"?"0 50%":e==="R"?"100% 50%":e==="T"?"50% 0":"50% 100%"};A.add({group:"edges",data:o,classes:g})}))}function Ye(O,A,D){const T=it(((n,t)=>Object.entries(n).reduce(((e,[a,h])=>{let g=0;const o=Object.entries(h);if(o.length===1)return e[a]=o[0][1],e;for(let d=0;d<o.length-1;d++)for(let r=d+1;r<o.length;r++){const[f,v]=o[d],[p,N]=o[r];D[f]?.[p]===t?(e[a]??=[],e[a]=[...e[a],...v,...N]):f==="default"||p==="default"?(e[a]??=[],e[a]=[...e[a],...v,...N]):(e[`${a}-${g++}`]=v,e[`${a}-${g++}`]=N)}return e}),{})),"flattenAlignments"),c=A.map((n=>{const t={},e={};return Object.entries(n).forEach((([a,[h,g]])=>{const o=O.getNode(a)?.in??"default";t[g]??={},t[g][o]??=[],t[g][o].push(a),e[h]??={},e[h][o]??=[],e[h][o].push(a)})),{horiz:Object.values(T(t,"horizontal")).filter((a=>a.length>1)),vert:Object.values(T(e,"vertical")).filter((a=>a.length>1))}})),[i,s]=c.reduce((([n,t],{horiz:e,vert:a})=>[[...n,...e],[...t,...a]]),[[],[]]);return{horizontal:i,vertical:s}}function ke(O,A){const D=[],T=it((i=>`${i[0]},${i[1]}`),"posToStr"),c=it((i=>i.split(",").map((s=>parseInt(s)))),"strToPos");return O.forEach((i=>{const s=Object.fromEntries(Object.entries(i).map((([a,h])=>[T(h),a]))),n=[T([0,0])],t={},e={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;n.length>0;){const a=n.shift();if(a){t[a]=1;const h=s[a];if(h){const g=c(a);Object.entries(e).forEach((([o,d])=>{const r=T([g[0]+d[0],g[1]+d[1]]),f=s[r];f&&!t[r]&&(n.push(r),D.push({[Le[o]]:f,[Le[ur(o)]]:h,gap:1.5*A.getConfigField("iconSize")}))}))}}}})),D}function He(O,A,D,T,c,{spatialMaps:i,groupAlignments:s}){return new Promise((n=>{const t=rr("body").append("div").attr("id","cy").attr("style","display:none"),e=Oe({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${c.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${c.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});t.remove(),Pe(D,e),Fe(O,e,c),Ge(A,e,c),Ue(T,e);const a=Ye(c,i,s),h=ke(i,c),g=e.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(o){const[d,r]=o.connectedNodes(),{parent:f}=Kt(d),{parent:v}=Kt(r);return f===v?1.5*c.getConfigField("iconSize"):.5*c.getConfigField("iconSize")},edgeElasticity(o){const[d,r]=o.connectedNodes(),{parent:f}=Kt(d),{parent:v}=Kt(r);return f===v?.45:.001},alignmentConstraint:a,relativePlacementConstraint:h});g.one("layoutstop",(()=>{function o(d,r,f,v){let p,N;const{x:I,y:S}=d,{x:U,y:P}=r;N=(v-S+(I-f)*(S-P)/(I-U))/Math.sqrt(1+Math.pow((S-P)/(I-U),2)),p=Math.sqrt(Math.pow(v-S,2)+Math.pow(f-I,2)-Math.pow(N,2)),p/=Math.sqrt(Math.pow(U-I,2)+Math.pow(P-S,2));let k=(U-I)*(v-S)-(P-S)*(f-I);switch(!0){case k>=0:k=1;break;case k<0:k=-1}let X=(U-I)*(f-I)+(P-S)*(v-S);switch(!0){case X>=0:X=1;break;case X<0:X=-1}return N=Math.abs(N)*k,p*=X,{distances:N,weights:p}}it(o,"getSegmentWeights"),e.startBatch();for(const d of Object.values(e.edges()))if(d.data?.()){const{x:r,y:f}=d.source().position(),{x:v,y:p}=d.target().position();if(r!==v&&f!==p){const N=d.sourceEndpoint(),I=d.targetEndpoint(),{sourceDir:S}=De(d),[U,P]=zt(S)?[N.x,I.y]:[I.x,N.y],{weights:k,distances:X}=o(N,I,U,P);d.style("segment-distances",X),d.style("segment-weights",k)}}e.endBatch(),g.run()})),g.run(),e.ready((o=>{xe.info("Ready",o),n(e)}))}))}ir([{name:ee.prefix,icons:ee}]),Oe.use(cr),it(Fe,"addServices"),it(Ge,"addJunctions"),it(Se,"positionNodes"),it(Pe,"addGroups"),it(Ue,"addEdges"),it(Ye,"getAlignments"),it(ke,"getRelativeConstraints"),it(He,"layoutArchitecture");var Mr={draw:it((async(O,A,D,T)=>{const c=T.db,i=c.getServices(),s=c.getJunctions(),n=c.getGroups(),t=c.getEdges(),e=c.getDataStructures(),a=ze(A),h=a.append("g");h.attr("class","architecture-edges");const g=a.append("g");g.attr("class","architecture-services");const o=a.append("g");o.attr("class","architecture-groups"),await Lr(c,g,i),_r(c,g,s);const d=await He(i,s,n,t,c,e);await Ir(h,d,c),await Cr(o,d,c),Se(c,d),Ve(void 0,a,c.getConfigField("padding"),c.getConfigField("useMaxWidth"))}),"draw")},Yr={parser:be,get db(){return new Re},renderer:Mr,styles:wr};export{Yr as diagram};
//# sourceMappingURL=architectureDiagram-VXUJARFQ-Bztfo1bv.js.map
