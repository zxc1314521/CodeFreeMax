try{P=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(j=new P.Error().stack)&&(P._sentryDebugIds=P._sentryDebugIds||{},P._sentryDebugIds[j]="a5a01eb0-3898-427b-9eae-430227542428",P._sentryDebugIdIdentifier="sentry-dbid-a5a01eb0-3898-427b-9eae-430227542428")}catch{}var P,j;class F{diff(e,n,t={}){let s;typeof t=="function"?(s=t,t={}):"callback"in t&&(s=t.callback);const c=this.castInput(e,t),r=this.castInput(n,t),l=this.removeEmpty(this.tokenize(c,t)),a=this.removeEmpty(this.tokenize(r,t));return this.diffWithOptionsObj(l,a,t,s)}diffWithOptionsObj(e,n,t,s){var c;const r=i=>(i=this.postProcess(i,t),s?void setTimeout((function(){s(i)}),0):i),l=n.length,a=e.length;let f=1,d=l+a;t.maxEditLength!=null&&(d=Math.min(d,t.maxEditLength));const b=(c=t.timeout)!==null&&c!==void 0?c:1/0,v=Date.now()+b,h=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(h[0],n,e,0,t);if(h[0].oldPos+1>=a&&g+1>=l)return r(this.buildValues(h[0].lastComponent,n,e));let w=-1/0,C=1/0;const k=()=>{for(let i=Math.max(w,-f);i<=Math.min(C,f);i+=2){let u;const p=h[i-1],m=h[i+1];p&&(h[i-1]=void 0);let y=!1;if(m){const x=m.oldPos-i;y=m&&0<=x&&x<l}const T=p&&p.oldPos+1<a;if(y||T){if(u=!T||y&&p.oldPos<m.oldPos?this.addToPath(m,!0,!1,0,t):this.addToPath(p,!1,!0,1,t),g=this.extractCommon(u,n,e,i,t),u.oldPos+1>=a&&g+1>=l)return r(this.buildValues(u.lastComponent,n,e))||!0;h[i]=u,u.oldPos+1>=a&&(C=Math.min(C,i-1)),g+1>=l&&(w=Math.max(w,i+1))}else h[i]=void 0}f++};if(s)(function i(){setTimeout((function(){if(f>d||Date.now()>v)return s(void 0);k()||i()}),0)})();else for(;f<=d&&Date.now()<=v;){const i=k();if(i)return i}}addToPath(e,n,t,s,c){const r=e.lastComponent;return r&&!c.oneChangePerToken&&r.added===n&&r.removed===t?{oldPos:e.oldPos+s,lastComponent:{count:r.count+1,added:n,removed:t,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:n,removed:t,previousComponent:r}}}extractCommon(e,n,t,s,c){const r=n.length,l=t.length;let a=e.oldPos,f=a-s,d=0;for(;f+1<r&&a+1<l&&this.equals(t[a+1],n[f+1],c);)f++,a++,d++,c.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!c.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,f}equals(e,n,t){return t.comparator?t.comparator(e,n):e===n||!!t.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,t){const s=[];let c;for(;e;)s.push(e),c=e.previousComponent,delete e.previousComponent,e=c;s.reverse();const r=s.length;let l=0,a=0,f=0;for(;l<r;l++){const d=s[l];if(d.removed)d.value=this.join(t.slice(f,f+d.count)),f+=d.count;else{if(!d.added&&this.useLongestToken){let b=n.slice(a,a+d.count);b=b.map((function(v,h){const g=t[f+h];return g.length>v.length?g:v})),d.value=this.join(b)}else d.value=this.join(n.slice(a,a+d.count));a+=d.count,d.added||(f+=d.count)}}return s}}const M=new class extends F{constructor(){super(...arguments),this.tokenize=O}equals(o,e,n){return n.ignoreWhitespace?(n.newlineIsToken&&o.includes(`
`)||(o=o.trim()),n.newlineIsToken&&e.includes(`
`)||(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(o.endsWith(`
`)&&(o=o.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),super.equals(o,e,n)}};function D(o,e,n){return M.diff(o,e,n)}function O(o,e){e.stripTrailingCr&&(o=o.replace(/\r\n/g,`
`));const n=[],t=o.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(let s=0;s<t.length;s++){const c=t[s];s%2&&!e.newlineIsToken?n[n.length-1]+=c:n.push(c)}return n}function L(o,e,n,t,s,c,r){let l;l=r?typeof r=="function"?{callback:r}:r:{},l.context===void 0&&(l.context=4);const a=l.context;if(l.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(!l.callback)return f(D(n,t,l));{const{callback:d}=l;D(n,t,Object.assign(Object.assign({},l),{callback:b=>{const v=f(b);d(v)}}))}function f(d){if(!d)return;function b(i){return i.map((function(u){return" "+u}))}d.push({value:"",lines:[]});const v=[];let h=0,g=0,w=[],C=1,k=1;for(let i=0;i<d.length;i++){const u=d[i],p=u.lines||H(u.value);if(u.lines=p,u.added||u.removed){if(!h){const m=d[i-1];h=C,g=k,m&&(w=a>0?b(m.lines.slice(-a)):[],h-=w.length,g-=w.length)}for(const m of p)w.push((u.added?"+":"-")+m);u.added?k+=p.length:C+=p.length}else{if(h)if(p.length<=2*a&&i<d.length-2)for(const m of b(p))w.push(m);else{const m=Math.min(p.length,a);for(const T of b(p.slice(0,m)))w.push(T);const y={oldStart:h,oldLines:C-h+m,newStart:g,newLines:k-g+m,lines:w};v.push(y),h=0,g=0,w=[]}C+=p.length,k+=p.length}}for(const i of v)for(let u=0;u<i.lines.length;u++)i.lines[u].endsWith(`
`)?i.lines[u]=i.lines[u].slice(0,-1):(i.lines.splice(u+1,0,"\\ No newline at end of file"),u++);return{oldFileName:o,newFileName:e,oldHeader:s,newHeader:c,hunks:v}}}function I(o){if(Array.isArray(o))return o.map(I).join(`
`);const e=[];o.oldFileName==o.newFileName&&e.push("Index: "+o.oldFileName),e.push("==================================================================="),e.push("--- "+o.oldFileName+(o.oldHeader===void 0?"":"	"+o.oldHeader)),e.push("+++ "+o.newFileName+(o.newHeader===void 0?"":"	"+o.newHeader));for(let n=0;n<o.hunks.length;n++){const t=o.hunks[n];t.oldLines===0&&(t.oldStart-=1),t.newLines===0&&(t.newStart-=1),e.push("@@ -"+t.oldStart+","+t.oldLines+" +"+t.newStart+","+t.newLines+" @@");for(const s of t.lines)e.push(s)}return e.join(`
`)+`
`}function E(o,e,n,t,s,c,r){if(typeof r=="function"&&(r={callback:r}),!r?.callback){const l=L(o,e,n,t,s,c,r);return l?I(l):void 0}{const{callback:l}=r;L(o,e,n,t,s,c,Object.assign(Object.assign({},r),{callback:a=>{l(a?I(a):void 0)}}))}}function H(o){const e=o.endsWith(`
`),n=o.split(`
`).map((t=>t+`
`));return e?n.pop():n.push(n.pop().slice(0,-1)),n}function W(o){let e=0;const n=1e4,t=o.length>n?o.substring(0,5e3)+o.substring(o.length-5e3):o;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e|=0;return Math.abs(e).toString(36)}function N(o,e,n,t,s={}){const{context:c=3,generateId:r=!0}=s,l=E(o,e,n,t,"","",{context:c}),a=e||o;let f;return r?f=`${W(a)}-${W(n+t)}`:f=Math.random().toString(36).substring(2,15),{id:f,path:a,diff:l,originalCode:n,modifiedCode:t}}function S(o){let e=0,n=0;for(const t of o.split(`
`))t.startsWith("+")&&!t.startsWith("+++")?e++:t.startsWith("-")&&!t.startsWith("---")&&n++;return{additions:e,deletions:n}}function A(o){return!o.originalCode||o.originalCode.trim()===""}function q(o){return!o.modifiedCode||o.modifiedCode.trim()===""}const z=100,_="Too many files changed to display in the diff view. Please review the files in the remote workspace directly to inspect changes.";class V{static generateDiff(e,n,t,s){return N(e,n,t,s)}static generateDiffs(e){return(function(n,t={}){return n.map((s=>N(s.oldPath,s.newPath,s.oldContent,s.newContent,t)))})(e)}static getDiffStats(e){return S(e)}static getDiffObjectStats(e){return S(e.diff)}static isNewFile(e){return A(e)}static isDeletedFile(e){return q(e)}}export{V as D,z as M,q as a,S as b,E as c,_ as d,W as g,A as i};
//# sourceMappingURL=diff-operations-Z7nGHKvy.js.map
