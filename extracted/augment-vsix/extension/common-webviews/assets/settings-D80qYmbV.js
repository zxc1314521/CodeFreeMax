import{G as z,o as t,a0 as g,b3 as Wa,D as xe,E as le,S as Y,T as O,O as M,R as a,H as Ne,V as ut,K as y,L as ir,X as Ot,P as l,M as rr,a7 as na,Q as c,w as $t,W as _t,ah as ia,ad as Jr,b9 as wr,az as yr,a3 as mt,Y as w,a1 as j,a2 as de,a4 as xt,a5 as At,ag as ar,aA as Is,I as Ut,J as De,a8 as mr,ai as It,a9 as qa,av as Kt,aw as va,a6 as Na,$ as te,ae as er,aN as js,k as pt,Z as Ce,_ as Zt,aE as ei,aI as gr,aC as Dr,F as Ir,aH as fn,af as ti,N as ri,ba as ra,bb as ai,bc as yn,bd as xs,be as si,bf as ni,bg as ts,ax as ii}from"./debounce-BNOmQ76Y.js";import"./design-system-init-DYAh9Pko.js";import"./legacy-2-VBD5Kq.js";import{aP as vt,aQ as Tt,aO as be,aR as Ge,aS as dt,aT as Hr,aU as Vr,aV as kt,aW as Wt,aX as Nr,aY as wa,aZ as ha,a_ as oa,a$ as Mr,b0 as Ga,b1 as oi,b2 as vs,b3 as Js,b4 as Ks,b5 as li,b6 as ci,b7 as di,b8 as Ra,b9 as $r,T as Pt,D as ot,b as Ar,ba as ui,bb as Ys,bc as Xs,bd as Zs,be as vi,bf as hi,bg as Qs,bh as gi,bi as pi,bj as mi,bk as fi,bl as yi,bm as en,bn as _i,bo as bi,bp as wi,s as $i,o as Si,bq as Ei,a as sr,V as bt,br as Ma,bs as _n,bt as ki,bu as Ci,bv as $a,bw as wt,bx as Ai,by as Ri,i as nr,bz as rs,bA as Ti,bB as Sa,bC as fr,z as Ii,bD as Ea,bE as xi,bF as Ni,bG as Mi,bH as Pi,bI as Oi,bJ as Pa,bK as as,bL as zi,bM as Ui,bN as Li,bO as Di,bP as Fi,bQ as Bi,bR as ea,bS as ka,E as Wi,d as qi,S as Gi,F as Hi}from"./extension-client-context-CN64fWtK.js";import{R as Vi,M as ji}from"./message-broker-DUQuEFlt.js";import{S as Ji}from"./shared-webview-store-model-CL3-OUxX.js";import{a as Ha,c as Ns,b as Va,d as Gt,m as ja,C as Ki,E as Yi,S as Xi,e as tn,g as Zi,f as Qi,h as eo,i as to,H as ro,j as ao,P as bn,u as wn,k as so,l as hs,N as no,v as io}from"./shared-app-state-Cv5sumpT.js";import{S as Xe,f as oo,e as lo,a as $n,c as la,P as Pr,m as co,b as uo,O as vo,s as rn,d as ho,M as gt,R as an,g as go}from"./index-BcYmouan.js";import{o as Ta}from"./keypress-fD7XHdyk.js";import{I as Et}from"./IconButtonAugment-DO0xxfgT.js";import{I as me,T as U,S as Rr,d as Sn}from"./Icon-CohttyM7.js";import{C as po}from"./Chevron-DgXCK6y3.js";import"./BaseTextInput-D02l0mHz.js";import{T as Ja,C as mo}from"./CopyButton-DWjSvbZb.js";import{B as Ke}from"./ButtonAugment-BCcs6kST.js";import{R as fo}from"./RulesModeSelector-Cb4x8pjl.js";import{C as or}from"./CalloutAugment-BTDUhyqD.js";import{e as Ka}from"./file-type-utils-CHwkiE7w.js";import{T as Ht,a as ga}from"./TextTooltipAugment-CGvqFHAr.js";import{F as yo}from"./Filespan-FcScXFRk.js";import{i as Zr}from"./lifecycle-CWu4CNTE.js";import{M as _o}from"./MemoriesMarkdownEditor-BAo_YnIt.js";import{B as hr}from"./types-M1pd3FSp.js";import{T as bo}from"./TextCombo-CIszZzGN.js";import{k as wo,C as En,a as kn}from"./CollapseButtonAugment-D7C6pQtq.js";import{t as lr,a as Sr,f as $o}from"./index-DJ8YNXIh.js";import{M as So}from"./Markdown-9Uvf-DZ6.js";import{M as Eo}from"./index-Ba8SPQX6.js";import{c as ko}from"./index-Dt79ugWJ.js";import{S as Co}from"./SuccessfulButton-BTRD1tJd.js";import"./index-C6s5m6Q5.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./await-B0-dHWqK.js";import"./SimpleMonaco-BBDXOnfl.js";import"./input-rvYD24wa.js";import"./LanguageIcon-BFxv44vU.js";import"./MonacoMarkdownEditor-DPJhsvvf.js";import"./OpenFileButton-gT822Pcb.js";import"./index-Dqp5W2S2.js";import"./remote-agents-client-DkZKHKJj.js";import"./toggleHighContrast-nRmgfX6B.js";try{Gr=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Vs=new Gr.Error().stack)&&(Gr._sentryDebugIds=Gr._sentryDebugIds||{},Gr._sentryDebugIds[Vs]="61519ef5-d9fb-47aa-9e12-c3c1c83f157a",Gr._sentryDebugIdIdentifier="sentry-dbid-61519ef5-d9fb-47aa-9e12-c3c1c83f157a")}catch{}var Gr,Vs;function Ao(){}const Ro=Ns({component:"label",parts:["root"]});class Ms{static create(e){return new Ms(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Ha(this.opts.ref),this.onmousedown=this.onmousedown.bind(this)}onmousedown(e){e.detail>1&&e.preventDefault()}#e=z((()=>({id:this.opts.id.current,[Ro.root]:"",onmousedown:this.onmousedown,...this.attachment})));get props(){return t(this.#e)}set props(e){g(this.#e,e)}}var To=y("<label><!></label>");function Io(o,e){const r=Wa();xe(e,!0);let s=le(e,"id",19,(()=>Va(r))),n=le(e,"ref",15,null),i=rr(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const d=Ms.create({id:Gt((()=>s())),ref:Gt((()=>n()),(N=>n(N)))}),v=z((()=>ja(i,d.props,{for:e.for})));var m=Y(),h=O(m),p=N=>{var T=Y(),E=O(T);ut(E,(()=>e.child),(()=>({props:t(v)}))),a(N,T)},$=N=>{var T=To();ir(T,(()=>({...t(v),for:e.for})));var E=l(T);ut(E,(()=>e.children??Ot)),a(N,T)};M(h,(N=>{e.child?N(p):N($,!1)})),a(o,m),Ne()}const xo=Ns({component:"meter",parts:["root"]});class Ps{static create(e){return new Ps(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Ha(this.opts.ref)}#e=z((()=>({role:"meter",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current,"data-value":this.opts.value.current,"data-max":this.opts.max.current,"data-min":this.opts.min.current,[xo.root]:"",...this.attachment})));get props(){return t(this.#e)}set props(e){g(this.#e,e)}}var No=y("<div><!></div>");function Mo(o,e){const r=Wa();xe(e,!0);let s=le(e,"value",3,0),n=le(e,"max",3,100),i=le(e,"min",3,0),d=le(e,"id",19,(()=>Va(r))),v=le(e,"ref",15,null),m=rr(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const h=Ps.create({value:Gt((()=>s())),max:Gt((()=>n())),min:Gt((()=>i())),id:Gt((()=>d())),ref:Gt((()=>v()),(b=>v(b)))}),p=z((()=>ja(m,h.props)));var $=Y(),N=O($),T=b=>{var k=Y(),S=O(k);ut(S,(()=>e.child),(()=>({props:t(p)}))),a(b,k)},E=b=>{var k=No();ir(k,(()=>({...t(p)})));var S=l(k);ut(S,(()=>e.children??Ot)),a(b,k)};M(N,(b=>{e.child?b(T):b(E,!1)})),a(o,$),Ne()}const Cn=Ns({component:"switch",parts:["root","thumb"]}),Os=new Ki("Switch.Root");class zs{static create(e){return Os.set(new zs(e))}opts;attachment;constructor(e){this.opts=e,this.attachment=Ha(e.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this)}#e(){this.opts.checked.current=!this.opts.checked.current}onkeydown(e){e.key!==Yi&&e.key!==Xi||this.opts.disabled.current||(e.preventDefault(),this.#e())}onclick(e){this.opts.disabled.current||this.#e()}#t=z((()=>({"data-disabled":tn(this.opts.disabled.current),"data-state":Zi(this.opts.checked.current),"data-required":tn(this.opts.required.current)})));get sharedProps(){return t(this.#t)}set sharedProps(e){g(this.#t,e)}#r=z((()=>({checked:this.opts.checked.current})));get snippetProps(){return t(this.#r)}set snippetProps(e){g(this.#r,e)}#a=z((()=>({...this.sharedProps,id:this.opts.id.current,role:"switch",disabled:to(this.opts.disabled.current),"aria-checked":eo(this.opts.checked.current,!1),"aria-required":Qi(this.opts.required.current),[Cn.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment})));get props(){return t(this.#a)}set props(e){g(this.#a,e)}}class Us{static create(){return new Us(Os.get())}root;#e=z((()=>this.root.opts.name.current!==void 0));get shouldRender(){return t(this.#e)}set shouldRender(e){g(this.#e,e)}constructor(e){this.root=e}#t=z((()=>({type:"checkbox",name:this.root.opts.name.current,value:this.root.opts.value.current,checked:this.root.opts.checked.current,disabled:this.root.opts.disabled.current,required:this.root.opts.required.current})));get props(){return t(this.#t)}set props(e){g(this.#t,e)}}class Ls{static create(e){return new Ls(e,Os.get())}opts;root;attachment;constructor(e,r){this.opts=e,this.root=r,this.attachment=Ha(e.ref)}#e=z((()=>({checked:this.root.opts.checked.current})));get snippetProps(){return t(this.#e)}set snippetProps(e){g(this.#e,e)}#t=z((()=>({...this.root.sharedProps,id:this.opts.id.current,[Cn.thumb]:"",...this.attachment})));get props(){return t(this.#t)}set props(e){g(this.#t,e)}}var Po=y("<button><!></button>"),Oo=y("<!> <!>",1);function zo(o,e){const r=Wa();xe(e,!0);let s=le(e,"ref",15,null),n=le(e,"id",19,(()=>Va(r))),i=le(e,"disabled",3,!1),d=le(e,"required",3,!1),v=le(e,"checked",15,!1),m=le(e,"value",3,"on"),h=le(e,"name",19,(()=>{})),p=le(e,"type",3,"button"),$=le(e,"onCheckedChange",3,Ao),N=rr(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","required","checked","value","name","type","onCheckedChange"]);const T=zs.create({checked:Gt((()=>v()),(u=>{v(u),$()?.(u)})),disabled:Gt((()=>i()??!1)),required:Gt((()=>d())),value:Gt((()=>m())),name:Gt((()=>h())),id:Gt((()=>n())),ref:Gt((()=>s()),(u=>s(u)))}),E=z((()=>ja(N,T.props,{type:p()})));var b=Oo(),k=O(b),S=u=>{var _=Y(),f=O(_);{let A=z((()=>({props:t(E),...T.snippetProps})));ut(f,(()=>e.child),(()=>t(A)))}a(u,_)},R=u=>{var _=Po();ir(_,(()=>({...t(E)})));var f=l(_);ut(f,(()=>e.children??Ot),(()=>T.snippetProps)),a(u,_)};M(k,(u=>{e.child?u(S):u(R,!1)})),(function(u,_){xe(_,!1);const f=Us.create();Zr();var A=Y(),C=O(A),x=I=>{ro(I,na((()=>f.props)))};M(C,(I=>{f.shouldRender&&I(x)})),a(u,A),Ne()})(c(k,2),{}),a(o,b),Ne()}var Uo=y("<span><!></span>");function Lo(o,e){const r=Wa();xe(e,!0);let s=le(e,"ref",15,null),n=le(e,"id",19,(()=>Va(r))),i=rr(e,["$$slots","$$events","$$legacy","child","children","ref","id"]);const d=Ls.create({id:Gt((()=>n())),ref:Gt((()=>s()),(N=>s(N)))}),v=z((()=>ja(i,d.props)));var m=Y(),h=O(m),p=N=>{var T=Y(),E=O(T);{let b=z((()=>({props:t(v),...d.snippetProps})));ut(E,(()=>e.child),(()=>t(b)))}a(N,T)},$=N=>{var T=Uo();ir(T,(()=>({...t(v)})));var E=l(T);ut(E,(()=>e.children??Ot),(()=>d.snippetProps)),a(N,T)};M(h,(N=>{e.child?N(p):N($,!1)})),a(o,m),Ne()}const ta={maxMS:9e5,initialMS:6e4,mult:2,maxSteps:4};let Do=class{constructor(o,e=ta){this.callback=o;const r={...e};r.maxMS<0&&(console.warn("PollingManager: Negative maxMS detected, using default value of 15 minutes"),r.maxMS=ta.maxMS),r.initialMS<=0&&(console.warn("PollingManager: Negative or zero initialMS detected, using default value of 1 minute"),r.initialMS=ta.initialMS),r.mult<=0&&(console.warn("PollingManager: Negative or zero multiplier detected, using default value of 2"),r.mult=ta.mult),r.maxSteps!==void 0&&r.maxSteps<0&&(console.warn("PollingManager: Negative maxSteps detected, using default value of 4"),r.maxSteps=ta.maxSteps),this.params=r,this.currentMS=this.params.maxMS}timerId=null;currentMS;step=0;params;startPolling(){this.stopPolling(),this.currentMS=this.params.initialMS,this.step=0,this.safeExecute(),this.scheduleNext()}stopPolling(){this.timerId!==null&&(window.clearTimeout(this.timerId),this.timerId=null)}dispose(){this.stopPolling()}scheduleNext(){this.timerId=window.setTimeout((()=>{if(this.safeExecute(),this.params.maxMS===0){if(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps)return void this.stopPolling()}else this.currentMS<this.params.maxMS&&(this.step++,this.params.maxSteps!==void 0&&this.step>=this.params.maxSteps?(this.currentMS=this.params.maxMS,this.step=0):this.currentMS=Math.min(this.currentMS*this.params.mult,this.params.maxMS));this.scheduleNext()}),this.currentMS)}safeExecute(){try{const o=this.callback();o instanceof Promise&&o.catch((e=>console.error("Error in polling callback:",e)))}catch(o){console.error("Error in polling callback:",o)}}};vt.Unknown,vt.WebSearch,Tt.WEB_SEARCH,vt.GithubApi,Tt.GITHUB_API,vt.GithubAppReadonlyApi,Tt.GITHUB_APP_READONLY_API,vt.GithubAppPostComment,Tt.GITHUB_APP_POST_COMMENT,vt.GithubAppPrDescription,vt.Linear,Tt.LINEAR,vt.Jira,Tt.JIRA,vt.Confluence,Tt.CONFLUENCE,vt.Notion,Tt.NOTION,vt.Supabase,Tt.SUPABASE,vt.Glean,Tt.GLEAN;const Fo={[Tt.UNKNOWN]:void 0,[Tt.WEB_SEARCH]:vt.WebSearch,[Tt.GITHUB_API]:vt.GithubApi,[Tt.GITHUB_APP_READONLY_API]:vt.GithubAppReadonlyApi,[Tt.GITHUB_APP_POST_COMMENT]:vt.GithubAppPostComment,[Tt.LINEAR]:vt.Linear,[Tt.JIRA]:vt.Jira,[Tt.CONFLUENCE]:vt.Confluence,[Tt.NOTION]:vt.Notion,[Tt.SUPABASE]:vt.Supabase,[Tt.GLEAN]:vt.Glean};be.readFile,Ge.READ_FILE,be.saveFile,Ge.SAVE_FILE,be.editFile,Ge.EDIT_FILE,be.clarify,Ge.CLARIFY,be.onboardingSubAgent,Ge.ONBOARDING_SUB_AGENT,be.launchProcess,Ge.LAUNCH_PROCESS,be.killProcess,Ge.KILL_PROCESS,be.readProcess,Ge.READ_PROCESS,be.writeProcess,Ge.WRITE_PROCESS,be.listProcesses,Ge.LIST_PROCESSES,be.waitProcess,Ge.WAIT_PROCESS,be.openBrowser,Ge.OPEN_BROWSER,be.strReplaceEditor,Ge.STR_REPLACE_EDITOR,be.remember,Ge.REMEMBER,be.diagnostics,Ge.DIAGNOSTICS,be.webFetch,Ge.WEB_FETCH,be.setupScript,Ge.SETUP_SCRIPT,be.readTerminal,Ge.READ_TERMINAL,be.gitCommitRetrieval,Ge.GIT_COMMIT_RETRIEVAL,be.memoryRetrieval,Ge.MEMORY_RETRIEVAL,be.startWorkerAgent,Ge.START_WORKER_AGENT,be.readWorkerState,Ge.READ_WORKER_STATE,be.waitForWorkerAgent,Ge.WAIT_FOR_WORKER_AGENT,be.sendInstructionToWorkerAgent,Ge.SEND_INSTRUCTION_TO_WORKER_AGENT,be.stopWorkerAgent,Ge.STOP_WORKER_AGENT,be.deleteWorkerAgent,Ge.DELETE_WORKER_AGENT,be.readWorkerAgentEdits,Ge.READ_WORKER_AGENT_EDITS,be.applyWorkerAgentEdits,Ge.APPLY_WORKER_AGENT_EDITS,be.LocalSubAgent,Ge.LOCAL_SUB_AGENT;const Bo={[Ge.UNKNOWN]:void 0,[Ge.READ_FILE]:be.readFile,[Ge.SAVE_FILE]:be.saveFile,[Ge.EDIT_FILE]:be.editFile,[Ge.CLARIFY]:be.clarify,[Ge.ONBOARDING_SUB_AGENT]:be.onboardingSubAgent,[Ge.LAUNCH_PROCESS]:be.launchProcess,[Ge.KILL_PROCESS]:be.killProcess,[Ge.READ_PROCESS]:be.readProcess,[Ge.WRITE_PROCESS]:be.writeProcess,[Ge.LIST_PROCESSES]:be.listProcesses,[Ge.WAIT_PROCESS]:be.waitProcess,[Ge.OPEN_BROWSER]:be.openBrowser,[Ge.STR_REPLACE_EDITOR]:be.strReplaceEditor,[Ge.REMEMBER]:be.remember,[Ge.DIAGNOSTICS]:be.diagnostics,[Ge.WEB_FETCH]:be.webFetch,[Ge.SETUP_SCRIPT]:be.setupScript,[Ge.READ_TERMINAL]:be.readTerminal,[Ge.GIT_COMMIT_RETRIEVAL]:be.gitCommitRetrieval,[Ge.MEMORY_RETRIEVAL]:be.memoryRetrieval,[Ge.START_WORKER_AGENT]:be.startWorkerAgent,[Ge.READ_WORKER_STATE]:be.readWorkerState,[Ge.WAIT_FOR_WORKER_AGENT]:be.waitForWorkerAgent,[Ge.SEND_INSTRUCTION_TO_WORKER_AGENT]:be.sendInstructionToWorkerAgent,[Ge.STOP_WORKER_AGENT]:be.stopWorkerAgent,[Ge.DELETE_WORKER_AGENT]:be.deleteWorkerAgent,[Ge.READ_WORKER_AGENT_EDITS]:be.readWorkerAgentEdits,[Ge.APPLY_WORKER_AGENT_EDITS]:be.applyWorkerAgentEdits,[Ge.LOCAL_SUB_AGENT]:be.LocalSubAgent};Xe.shell,dt.SHELL,Xe.webFetch,dt.WEB_FETCH,Xe.strReplaceEditor,dt.STR_REPLACE_EDITOR,Xe.codebaseRetrieval,dt.CODEBASE_RETRIEVAL,Xe.removeFiles,dt.REMOVE_FILES,Xe.remember,dt.REMEMBER,Xe.view,dt.VIEW,Xe.saveFile,dt.SAVE_FILE,Xe.viewTaskList,dt.VIEW_TASK_LIST,Xe.viewRangeUntruncated,dt.VIEW_RANGE_UNTRUNCATED,Xe.searchUntruncated,dt.SEARCH_UNTRUNCATED,Xe.reorganizeTaskList,dt.REORGANIZE_TASK_LIST,Xe.updateTasks,dt.UPDATE_TASKS,Xe.addTasks,dt.ADD_TASKS,Xe.renderMermaid,dt.RENDER_MERMAID,Xe.grepSearch,dt.GREP_SEARCH,Xe.subAgent,dt.SUB_AGENT,Xe.applyPatch,dt.APPLY_PATCH;const Wo={[dt.UNKNOWN]:void 0,[dt.SHELL]:Xe.shell,[dt.WEB_FETCH]:Xe.webFetch,[dt.STR_REPLACE_EDITOR]:Xe.strReplaceEditor,[dt.CODEBASE_RETRIEVAL]:Xe.codebaseRetrieval,[dt.REMOVE_FILES]:Xe.removeFiles,[dt.REMEMBER]:Xe.remember,[dt.VIEW]:Xe.view,[dt.SAVE_FILE]:Xe.saveFile,[dt.VIEW_TASK_LIST]:Xe.viewTaskList,[dt.VIEW_RANGE_UNTRUNCATED]:Xe.viewRangeUntruncated,[dt.SEARCH_UNTRUNCATED]:Xe.searchUntruncated,[dt.REORGANIZE_TASK_LIST]:Xe.reorganizeTaskList,[dt.UPDATE_TASKS]:Xe.updateTasks,[dt.ADD_TASKS]:Xe.addTasks,[dt.RENDER_MERMAID]:Xe.renderMermaid,[dt.GREP_SEARCH]:Xe.grepSearch,[dt.SUB_AGENT]:Xe.subAgent,[dt.APPLY_PATCH]:Xe.applyPatch};Hr.Unsafe,Vr.UNSAFE,Hr.Safe,Vr.SAFE,Hr.Check,Vr.CHECK,Vr.UNSAFE,Hr.Unsafe,Vr.SAFE,Hr.Safe,Vr.CHECK,Hr.Check;class Oa{constructor(e){this._host=e,this.pollingManager=new Do((()=>this.requestToolStatus(!1)),{maxMS:0,initialMS:2e3,mult:1,maxSteps:150}),this.initializeToolConfig()}static key="toolConfigModel";configs=$t([]);pollingManager;_settingsComponentSupported=$t({workspaceContext:!1,mcpServerList:!1,mcpServerImport:!1,remoteTools:!1,userGuidelines:!1,terminal:!1,rules:!1,allowFeatureFlagOverrides:!1,secretsManagerEnabled:!1});_enableAgentMode=$t(!1);_userTier=$t("unknown");_userEmail=$t(void 0);_guidelines=$t({});async initializeToolConfig(){try{const e=await kt(Wt),r=await e.toolConfigLoaded({});if(r.settingsComponentSupported!==void 0){const s=this.convertProtoSettingsComponentSupported(r.settingsComponentSupported);this._settingsComponentSupported.set(s)}if(r.enableAgentMode!==void 0&&this._enableAgentMode.set(r.enableAgentMode),r.userTier!==void 0){const s=this.convertProtoUserTier(r.userTier);this._userTier.set(s)}if(r.userEmail!==void 0&&this._userEmail.set(r.userEmail),r.guidelines!==void 0){const s=this.convertProtoGuidelines(r.guidelines);this._guidelines.set(s)}this.requestToolStatus()}catch(e){console.error("Failed to initialize tool config:",e)}}transformToolDisplay(e,r){const s=!e.isConfigured,n=e.oauthUrl;if(r.hostName===Nr.remoteToolHost){let i=r.toolId;switch(typeof i=="string"&&(i=Number.parseInt(i)),i){case vt.GithubApi:return{displayName:"GitHub",description:"Configure GitHub API access for repository operations",iconName:"github",requiresAuthentication:s,authUrl:n};case vt.GithubAppReadonlyApi:case vt.GithubAppPostComment:case vt.GithubAppPrDescription:return null;case vt.Linear:return{displayName:"Linear",description:"Configure Linear API access for issue tracking",iconName:"linear",requiresAuthentication:s,authUrl:n};case vt.Jira:return{displayName:"Jira",description:"Configure Jira API access for issue tracking",iconName:"jira",requiresAuthentication:s,authUrl:n};case vt.Notion:return{displayName:"Notion",description:"Configure Notion API access",iconName:"notion",requiresAuthentication:s,authUrl:n};case vt.Confluence:return{displayName:"Confluence",description:"Configure Confluence API access",iconName:"confluence",requiresAuthentication:s,authUrl:n};case vt.WebSearch:return{displayName:"Web Search",description:"Configure web search capabilities",iconName:"globe",requiresAuthentication:s,authUrl:n};case vt.Supabase:return{displayName:"Supabase",description:"Configure Supabase API access",iconName:"supabase",requiresAuthentication:s,authUrl:n};case vt.Glean:return{displayName:"Glean",description:"Configure Glean API access",iconName:"glean",requiresAuthentication:s,authUrl:n};case vt.Unknown:return{displayName:"Unknown",description:"Unknown tool",requiresAuthentication:s,authUrl:n};default:throw new Error(`Unhandled RemoteToolId: ${i}`)}}else if(r.hostName===Nr.localToolHost){const i=r.toolId;switch(i){case be.readFile:case be.editFile:case be.saveFile:case be.launchProcess:case be.killProcess:case be.readProcess:case be.writeProcess:case be.listProcesses:case be.waitProcess:case be.openBrowser:case be.clarify:case be.onboardingSubAgent:case be.strReplaceEditor:case be.remember:case be.diagnostics:case be.webFetch:case be.setupScript:case be.readTerminal:case be.gitCommitRetrieval:case be.memoryRetrieval:case be.startWorkerAgent:case be.readWorkerState:case be.waitForWorkerAgent:case be.sendInstructionToWorkerAgent:case be.stopWorkerAgent:case be.deleteWorkerAgent:case be.readWorkerAgentEdits:case be.applyWorkerAgentEdits:case be.LocalSubAgent:return{displayName:e.definition.name.toString(),description:"Local tool",iconName:"file-text",requiresAuthentication:s,authUrl:n};default:throw new Error(`Unhandled LocalToolType: ${i}`)}}else if(r.hostName===Nr.sidecarToolHost){const i=r.toolId;switch(i){case Xe.codebaseRetrieval:return{displayName:"Code Search",description:"Configure codebase search capabilities",iconName:"search-code",requiresAuthentication:s,authUrl:n};case Xe.shell:return{displayName:"Shell",description:"Shell",iconName:"square-terminal",requiresAuthentication:s,authUrl:n};case Xe.strReplaceEditor:return{displayName:"File Edit",description:"File Editor",iconName:"file-pen",requiresAuthentication:s,authUrl:n};case Xe.applyPatch:return{displayName:"Apply Patch",description:"Apply a patch to the codebase",iconName:"file-pen",requiresAuthentication:s,authUrl:n};case Xe.view:return{displayName:"File View",description:"File Viewer",iconName:"file",requiresAuthentication:s,authUrl:n};case Xe.webFetch:return{displayName:"Web Fetch",description:"Retrieve information from the web",iconName:"globe",requiresAuthentication:s,authUrl:n};case Xe.removeFiles:return{displayName:"Remove Files",description:"Remove files from the codebase",iconName:"file-minus",requiresAuthentication:s,authUrl:n};case Xe.remember:return{displayName:e.definition.name.toString(),description:"Remember",iconName:"brain",requiresAuthentication:s,authUrl:n};case Xe.saveFile:return{displayName:"Save File",description:"Save a new file",iconName:"file-plus",requiresAuthentication:s,authUrl:n};case Xe.viewTaskList:return{displayName:"View Task List",description:"View the current task list",iconName:"list-checks",requiresAuthentication:s,authUrl:n};case Xe.reorganizeTaskList:return{displayName:"Reorganize Task List",description:"Reorganize the task list structure for major restructuring",iconName:"list",requiresAuthentication:s,authUrl:n};case Xe.viewRangeUntruncated:return{displayName:e.definition.name.toString(),description:"View Range",iconName:"file-text",requiresAuthentication:s,authUrl:n};case Xe.updateTasks:return{displayName:"Update Tasks",description:"Update one or more tasks in the task list",iconName:"list-checks",requiresAuthentication:s,authUrl:n};case Xe.addTasks:return{displayName:"Add Tasks",description:"Add one or more new tasks to the task list",iconName:"list-plus",requiresAuthentication:s,authUrl:n};case Xe.searchUntruncated:return{displayName:e.definition.name.toString(),description:"Search Untruncated",iconName:"search",requiresAuthentication:s,authUrl:n};case Xe.renderMermaid:return{displayName:"View Mermaid Diagram",description:"View a mermaid diagram",iconName:"network",requiresAuthentication:s,authUrl:n};case Xe.grepSearch:return{displayName:"Grep search",description:"Run grep search",iconName:"search",requiresAuthentication:s,authUrl:n};case Xe.subAgent:return{displayName:"Sub-agent",description:"Delegate tasks to sub-agents",iconName:"user",requiresAuthentication:s,authUrl:n};default:throw new Error(`Unhandled SidecarToolType: ${i}`)}}return{displayName:e.definition.name.toString(),description:e.definition.description||"",requiresAuthentication:s,authUrl:n}}handleMessageFromExtension(e){const r=e.data;switch(r.type){case _t.toolConfigInitialize:return!1;case _t.toolConfigDefinitionsResponse:return this.configs.update((s=>this.createConfigsFromHostTools(r.data.hostTools,[]).map((n=>{const i=s.find((d=>d.name===n.name));return i?{...i,displayName:n.displayName,description:n.description,iconName:n.iconName,requiresAuthentication:n.requiresAuthentication,authUrl:n.authUrl,isConfigured:n.isConfigured,toolApprovalConfig:n.toolApprovalConfig}:n})))),!0}return!1}convertProtoGuidelines(e){return{userGuidelines:e.userGuidelines?{overLimit:e.userGuidelines.overLimit,contents:e.userGuidelines.contents,lengthLimit:e.userGuidelines.lengthLimit}:void 0,workspaceGuidelines:e.workspaceGuidelines.map((r=>({overLimit:r.overLimit,contents:r.contents,workspaceFolder:r.workspaceFolder,lengthLimit:r.lengthLimit})))}}convertProtoUserTier(e){switch(e){case wa.UNKNOWN:return"unknown";case wa.COMMUNITY:return"community";case wa.PROFESSIONAL:return"professional";case wa.ENTERPRISE:return"enterprise";default:return"unknown"}}convertProtoSettingsComponentSupported(e){return{workspaceContext:e.workspaceContext,mcpServerList:e.mcpServerList,mcpServerImport:e.mcpServerImport,remoteTools:e.remoteTools,userGuidelines:e.userGuidelines,terminal:e.terminal,rules:e.rules,allowFeatureFlagOverrides:e.allowFeatureFlagOverrides,secretsManagerEnabled:e.secretsManagerEnabled??!1}}convertProtoToolIdentifier(e){const r=e.toolId;if(!r)throw new Error("toolId oneof is required in ToolIdentifier");switch(r.case){case"remoteToolId":{const s=(function(n){if(n!==void 0)return Fo[n]})(r.value);return s==null?null:{hostName:Nr.remoteToolHost,toolId:s}}case"localToolId":{const s=(function(n){if(n!==void 0)return Bo[n]})(r.value);return s==null?null:{hostName:Nr.localToolHost,toolId:s}}case"sidecarToolId":{const s=(function(n){if(n!==void 0)return Wo[n]})(r.value);return s==null?null:{hostName:Nr.sidecarToolHost,toolId:s}}case"mcpToolId":return{hostName:Nr.mcpHost,toolId:r.value};default:throw new Error(`Unknown toolId case: ${r.case}`)}}createConfigsFromHostTools(e,r){return e.map((s=>{const n=this.transformToolDisplay(s,s.identifier);if(n==null)return null;const i=r.find((v=>v.name===s.definition.name)),d=i?.isConfigured??!n.requiresAuthentication;return{config:i?.config??{},configString:JSON.stringify(i?.config??{},null,2),isConfigured:d,name:s.definition.name.toString(),displayName:n.displayName,description:n.description,identifier:s.identifier,iconName:n.iconName,requiresAuthentication:n.requiresAuthentication,authUrl:n.authUrl,showStatus:!1,statusMessage:"",statusType:"info",toolApprovalConfig:s.toolApprovalConfig}})).filter((s=>s!==null))}getConfigs(){return this.configs}isDisplayableTool(e){return["github","linear","notion","jira","confluence","supabase"].includes(e.displayName.toLowerCase())}getDisplayableTools(){return ia(this.configs,(e=>{const r=e.filter((n=>this.isDisplayableTool(n))),s=new Map;for(const n of r)s.set(n.displayName,n);return Array.from(s.values()).sort(((n,i)=>{const d={GitHub:1,Linear:2,Notion:3},v=Number.MAX_SAFE_INTEGER,m=d[n.displayName]||v,h=d[i.displayName]||v;return m<v&&h<v||m===v&&h===v?m!==h?m-h:n.displayName.localeCompare(i.displayName):m-h}))}))}getPretendNativeToolDefs(){return ia(this.configs,(e=>oo(e)))}saveConfig(e){this.startPolling()}notifyLoaded(){this._host.postMessage({type:_t.toolConfigLoaded})}startPolling(){this.pollingManager.startPolling()}requestToolStatus(e=!0){this._host.postMessage({type:_t.toolConfigGetDefinitions,data:{useCache:e}})}dispose(){this.pollingManager.dispose()}getEnableAgentMode(){return this._enableAgentMode}getUserTier(){return this._userTier}getUserEmail(){return this._userEmail}getGuidelines(){return this._guidelines}updateLocalUserGuidelines(e){this._guidelines.update((r=>r.userGuidelines?{...r,userGuidelines:{...r.userGuidelines,contents:e,enabled:e.length>0}}:r))}updateToolApprovalConfig(e,r){this.configs.update((s=>s.map((n=>n.identifier.toolId===e.toolId&&n.identifier.hostName===e.hostName?{...n,toolApprovalConfig:r}:n))))}getSettingsComponentSupported(){return this._settingsComponentSupported}}var gs=(o=>(o[o.ok=0]="ok",o[o.cancelled=1]="cancelled",o[o.unknown=2]="unknown",o[o.unavailable=3]="unavailable",o[o.unimplemented=4]="unimplemented",o[o.invalidArgument=5]="invalidArgument",o[o.resourceExhausted=6]="resourceExhausted",o[o.unauthenticated=7]="unauthenticated",o[o.permissionDenied=8]="permissionDenied",o[o.deadlineExceeded=9]="deadlineExceeded",o[o.augmentTooLarge=10]="augmentTooLarge",o[o.augmentClientTimeout=11]="augmentClientTimeout",o[o.augmentUpgradeRequired=12]="augmentUpgradeRequired",o))(gs||{});function br(o,e=!1){if(o instanceof Error){if(e){const r=(function(s){return s.cause instanceof String?String(s.cause):s.cause instanceof Object?JSON.stringify(s.cause):""})(o);if(r!=="")return`${o.message} (due to ${r})`}return o.message}return String(o)}gs.unavailable,gs.cancelled;const cr=ha({name:Mr().optional(),title:Mr().optional(),type:oi(["stdio","http","sse"]).optional(),command:Mr().optional(),args:Ga(vs([Mr(),Js(),Ks()])).optional(),env:oa(vs([Mr(),Js(),Ks(),li(),ci()])).optional(),url:Mr().optional(),headers:oa(Mr()).optional()}).passthrough();function Or(o){try{const e=cr.transform((s=>{let n;if(s.type)n=s.type;else if(s.url)n="http";else{if(!s.command)throw new Error("Server must have either 'command' (for stdio) or 'url' (for http/sse) property");n="stdio"}if(n==="http"||n==="sse"){if(!s.url)throw new Error(`${n.toUpperCase()} server must have a 'url' property`);const i=s.name||s.title||s.url,d=s.headers?Object.fromEntries(Object.entries(s.headers).filter((([v,m])=>m!=null)).map((([v,m])=>[v,String(m)]))):void 0;return{type:n,name:i,url:s.url,headers:Object.keys(d||{}).length>0?d:void 0}}if(n==="stdio"){const i=s.command||"",d=s.args?s.args.map((p=>String(p))):[];if(!i)throw new Error("Stdio server must have a 'command' property");const v=d.length>0?`${i} ${d.join(" ")}`:i,m=s.name||s.title||(i?i.split(" ")[0]:""),h=s.env?Object.fromEntries(Object.entries(s.env).filter((([p,$])=>$!=null)).map((([p,$])=>[p,String($)]))):void 0;return{id:crypto.randomUUID(),type:"stdio",name:m,command:v,args:[],env:Object.keys(h||{}).length>0?h:void 0,useShellInterpolation:!0}}throw new Error(`Unsupported server type: ${n}`)})).refine((s=>!!s.name),{message:"Server must have a name",path:["name"]}).refine((s=>s.type==="http"||s.type==="sse"?!!s.url:!!s.command),{message:"Server must have either 'command' (for stdio) or 'url' (for http/sse)",path:["command","url"]}),r=e.safeParse(o);if(!r.success)throw new Jt(r.error.message);return{...r.data,id:crypto.randomUUID()}}catch(e){throw e instanceof Error?new Jt(`Invalid server configuration: ${e.message}`):new Jt("Invalid server configuration")}}const qo=Ga(cr),Go=ha({servers:Ga(cr)}),Ho=ha({mcpServers:Ga(cr)}),Vo=ha({servers:oa(cr)}),jo=ha({mcpServers:oa(cr)}),Jo=oa(di()),Ko=cr.refine((o=>{const e=o.command!==void 0,r=o.url!==void 0;if(!e&&!r)return!1;const s=new Set(["name","title","type","command","args","env","url","headers"]);return Object.keys(o).every((i=>s.has(i)))}),{message:"Single server object must have valid server properties"});class Jt extends Error{constructor(e){super(e),this.name="MCPServerError",Object.setPrototypeOf(this,Jt.prototype)}}function Xt(o){return o?.type==="http"||o?.type==="sse"}function zr(o){return o?.type==="stdio"}function sn(o){return Xt(o)?o.url:zr(o)?o.command:""}class ca{constructor(e){this.extensionClient=e,this.loadServersFromStorage(),this.loadToolsFromSidecar(),this.refreshAuthRequiredServers(),this.loadPartnerServers()}servers=$t([]);tools=$t({});authRequired=$t(new Set);partnerServersRaw=$t([]);partnerServers=ia([this.partnerServersRaw,this.servers],(([e,r])=>{const s=new Set(r.map((n=>n.name)));return lo(e).map((n=>({...n,isConfigured:s.has(n.name)})))}));dispose(){}handleMcpMessage(e){const r=e.data;switch(r.type){case Ra.UPDATE_SERVERS:return this.loadServersFromStorage(),!0;case Ra.UPDATE_TOOLS:{const{name:s,tools:n}=r.data;return this.tools.update((i=>({...i,[s]:n}))),!0}case Ra.UPDATE_AUTH_REQUIRED_SERVERS:{const{authRequiredServers:s}=r.data;return this.authRequired.set(new Set(s)),!0}default:return!1}}getAuthRequiredStore(){return this.authRequired}async getAuthSecret(e){return await this.extensionClient.mcpGetAuthSecret(e)}async setAuthSecret(e,r){await this.extensionClient.mcpSetAuthSecret(e,r)}async refreshAuthRequiredServers(){const e=await this.extensionClient.mcpGetAuthRequiredServers();this.authRequired.set(new Set(e))}async importServersFromJSON(e){try{const r=ca.parseServerConfigFromJSON(e),s=Jr(this.servers),n=new Set(s.map((i=>i.name)));for(const i of r){if(!i.name)throw new Jt("All servers must have a name.");if(n.has(i.name))throw new Jt(`A server with the name '${i.name}' already exists.`);n.add(i.name)}return await this.extensionClient.mcpAddWebviewServers(r.map((i=>({...i,id:crypto.randomUUID()})))),r.length}catch(r){throw r instanceof Jt?r:new Jt("Failed to import MCP servers from JSON. Please check the format.")}}async loadServersFromStorage(){try{const e=await this.extensionClient.mcpGetWebviewServers();this.servers.set(e)}catch(e){console.error("Failed to load MCP servers:",e),this.servers.set([])}}async loadToolsFromSidecar(){try{const e=await this.extensionClient.mcpGetWebviewTools();this.tools.set(e)}catch(e){console.error("Failed to load MCP tools:",e),this.tools.set({})}}async loadPartnerServers(){try{const e=await this.extensionClient.mcpGetPartnerServers();this.partnerServersRaw.set(e)}catch(e){console.error("Failed to load partner servers:",e),this.partnerServersRaw.set([])}}getServers(){return this.servers}getPartnerServers(){return this.partnerServers}getToolsStore(){return this.tools}getTools(e){return Jr(this.tools)[e]??[]}checkExistingServerName(e,r){const s=Jr(this.servers).find((n=>n.name===e));if(s&&s?.id!==r)throw new Jt(`Server name '${e}' already exists`)}async addServer(e,r){this.checkExistingServerName(e.name),r&&await this.setAuthSecret(e.name,r),await this.extensionClient.mcpAddWebviewServers([{...e,id:crypto.randomUUID()}])}async updateServer(e,r){this.checkExistingServerName(e.name,e.id),r&&await this.setAuthSecret(e.name,r),await this.extensionClient.mcpUpdateWebviewServer(e)}async deleteServer(e){await this.extensionClient.mcpDeleteWebviewServer(e.id),this.tools.update((r=>{const{[e.name]:s,...n}=r;return n})),e.type!=="http"&&e.type!=="sse"||await this.extensionClient.mcpDeleteAuthSecret(e.name)}async toggleDisabledServer(e){const r=Jr(this.servers).find((s=>s.id===e));if(!r)throw new Error(`Server with id ${e} not found`);await this.extensionClient.mcpUpdateWebviewServer({...r,disabled:!r.disabled})}static convertServerToJSON(e){return Xt(e)?JSON.stringify({mcpServers:{[e.name]:{url:e.url,type:e.type}}},null,2):JSON.stringify({mcpServers:{[e.name]:{command:e.command.split(" ")[0],args:e.command.split(" ").slice(1),env:e.env}}},null,2)}parseServerValidationMessages(e){const r=new Map,s=new Map;e.forEach((i=>{const d=this.getTools(i.name),v=d.filter((m=>!m.enabled)).map((m=>m.definition.mcp_tool_name));i.disabled?r.set(i.id,"MCP server has been manually disabled"):d&&d.length===0?r.set(i.id,"No tools are available for this MCP server"):v&&v.length===d.length?r.set(i.id,"All tools for this MCP server have validation errors: "+v.join(", ")):v&&v.length>0&&s.set(i.id,"MCP server has validation errors in the following tools which have been disabled: "+v.join(", "))}));const n=ca.parseDuplicateServerIds(e);return{errors:new Map([...r,...n]),warnings:s}}static parseDuplicateServerIds(e){const r=new Map;for(const n of e)r.has(n.name)||r.set(n.name,[]),r.get(n.name).push(n.id);const s=new Map;for(const[,n]of r)if(n.length>1)for(let i=1;i<n.length;i++)s.set(n[i],"MCP server is disabled due to duplicate server names");return s}static parseServerConfigFromJSON(e){return(function(r){try{const s=JSON.parse(r),n=vs([qo.transform((i=>i.map((d=>Or(d))))),Go.transform((i=>i.servers.map((d=>Or(d))))),Ho.transform((i=>i.mcpServers.map((d=>Or(d))))),Vo.transform((i=>Object.entries(i.servers).map((([d,v])=>{const m=cr.parse(v);return Or({...m,name:m.name||d})})))),jo.transform((i=>Object.entries(i.mcpServers).map((([d,v])=>{const m=cr.parse(v);return Or({...m,name:m.name||d})})))),Ko.transform((i=>[Or(i)])),Jo.transform((i=>{if(!Object.values(i).some((d=>{const v=cr.safeParse(d);return v.success&&(v.data.command!==void 0||v.data.url!==void 0)})))throw new Error("No command or url property found in any server config");return Object.entries(i).map((([d,v])=>{const m=cr.parse(v);return Or({...m,name:m.name||d})}))}))]).safeParse(s);if(n.success)return n.data;throw new Jt(`Invalid MCP servers JSON. Expected either an array of server configs or an object with a 'servers' array property (e.g. { "servers": [ ... ] }).`)}catch(s){throw s instanceof Jt?s:new Jt("Failed to parse MCP servers from JSON. Please check the format.")}})(e)}}class Yo{_terminalSettings=$t({supportedShells:[],selectedShell:void 0,startupScript:void 0});constructor(){this.requestTerminalSettings()}getTerminalSettings(){return this._terminalSettings}async requestTerminalSettings(){try{const e=await kt(Wt),r=await e.getTerminalSettings({});if(r.terminalSettings){const s=this._convertProtoToTerminalSettings(r.terminalSettings);this._terminalSettings.set(s)}}catch(e){console.error("Failed to get terminal settings:",e)}}async updateSelectedShell(e){try{const r=await kt(Wt),s=await r.updateTerminalSettings({selectedShell:e});if(s.terminalSettings){const n=this._convertProtoToTerminalSettings(s.terminalSettings);this._terminalSettings.set(n)}}catch(r){console.error("Failed to update selected shell:",r)}}async updateStartupScript(e){try{const r=await kt(Wt),s=await r.updateTerminalSettings({startupScript:e});if(s.terminalSettings){const n=this._convertProtoToTerminalSettings(s.terminalSettings);this._terminalSettings.set(n)}}catch(r){console.error("Failed to update startup script:",r)}}_convertProtoToTerminalSettings(e){const r=(e?.supportedShells||[]).map((s=>({name:s.name,path:s.path,args:s.args??[],env:s.env??{},friendlyName:s.friendlyName,supportString:s.supportString})));return{...e,supportedShells:r}}}var Ur=(o=>(o.file="file",o.folder="folder",o))(Ur||{});class Er{constructor(e,r){this.host=e,this.asyncMsgSender=r;const{subscribe:s,set:n,update:i}=$t({sourceFolders:[],sourceTree:[],syncStatus:$r.done});this.subscribe=s,this.set=n,this.update=i,this.getSourceFolders().then((d=>{this.update((v=>({...v,sourceFolders:d,sourceTree:Er.sourceFoldersToSourceNodes(d)})))}))}subscribe;set;update;async expandNode(e){e.children=await this.getChildren(e.fileId),e.expanded=!0,this.update((r=>r))}collapseNode(e){this.update((r=>(e.children=[],e.expanded=!1,r)))}toggleNode(e){e.type==="folder"&&e.inclusionState!==wr.excluded&&(e.expanded?this.collapseNode(e):this.expandNode(e))}addMoreSourceFolders(){this.host.postMessage({type:_t.wsContextAddMoreSourceFolders})}removeSourceFolder(e){this.host.postMessage({type:_t.wsContextRemoveSourceFolder,data:e})}requestRefresh(){this.host.postMessage({type:_t.wsContextUserRequestedRefresh})}handleMessageFromExtension=async e=>{const r=e.data;switch(r.type){case _t.wsContextSourceFoldersChanged:case _t.wsContextFolderContentsChanged:this.updateSourceFolders(await this.getSourceFolders());break;case _t.sourceFoldersSyncStatus:this.update((s=>({...s,syncStatus:r.data.status})))}};async updateSourceFolders(e){let r=Jr(this);const s=await this.getRefreshedSourceTree(r.sourceTree,e);this.update((n=>({...n,sourceFolders:e,sourceTree:s})))}async getRefreshedSourceTree(e,r){const s=Er.sourceFoldersToSourceNodes(r);return this.getRefreshedSourceTreeRecurse(e,s)}async getRefreshedSourceTreeRecurse(e,r){const s=new Map(e.map((n=>[JSON.stringify([n.fileId.folderRoot,n.fileId.relPath]),n])));for(let n of r){const i=Er.fileIdToString(n.fileId);if(n.type==="folder"){const d=s.get(i);d&&(n.expanded=d.type==="folder"&&d.expanded,n.expanded&&(n.children=await this.getChildren(n.fileId),n.children=await this.getRefreshedSourceTreeRecurse(d.children,n.children)))}}return r}static fileIdToString(e){return JSON.stringify([e.folderRoot,e.relPath])}static sourceFoldersToSourceNodes(e){return e.filter((r=>!r.isNestedFolder&&!r.isPending)).sort(((r,s)=>r.name.localeCompare(s.name))).map((r=>({name:r.name,fileId:r.fileId,children:[],expanded:!1,type:"folder",inclusionState:r.inclusionState,reason:"",trackedFileCount:r.trackedFileCount})))}getSourceFolders=async()=>(await this.asyncMsgSender.send({type:_t.wsContextGetSourceFoldersRequest},1e4)).data.workspaceFolders;getChildren=async e=>(await this.asyncMsgSender.send({type:_t.wsContextGetChildrenRequest,data:{fileId:{folderRoot:e.folderRoot,relPath:e.relPath}}},1e4)).data.children.map((r=>r.type==="folder"?{...r,children:[],expanded:!1}:{...r})).sort(((r,s)=>r.type===s.type?r.name.localeCompare(s.name):r.type==="folder"?-1:1))}var Xo=y('<div><!> <!> <span class="name svelte-wku3wr"> <!></span> <!></div>'),Zo=y('<div class="source-folder svelte-wku3wr"><!> <div role="button" tabindex="0" class="add-more svelte-wku3wr"><!> Add more...</div></div>');yr(["keyup","click"]);var Qo=y('<div class="children-container"></div>'),el=y('<div><div role="treeitem" aria-selected="false" tabindex="0"><!> <span class="name svelte-1qg3awc"> </span> <!> <!></div> <!></div>');function An(o,e){xe(e,!0);let r=At(e.data);const s=()=>{e.wsContextModel.toggleNode(r)},n={[wr.included]:"Included",[wr.excluded]:"Excluded",[wr.partial]:"Partially included"};let i=z((()=>r.type===Ur.folder&&r.inclusionState!==wr.excluded)),d=z((()=>r.type===Ur.folder&&r.expanded&&r.children&&r.children.length>0?r:null));var v=el(),m=l(v);let h;m.__click=s;var p=z((()=>Ta("Enter",s)));m.__keyup=function(...f){t(p)?.apply(this,f)};var $=l(m),N=f=>{{let A=z((()=>r.expanded?"down":"right"));po(f,{get direction(){return t(A)},size:1})}},T=f=>{var A=Y(),C=O(A),x=B=>{me(B,{name:"folder",size:1})},I=B=>{me(B,{name:"file",size:1})};M(C,(B=>{r.type===Ur.folder?B(x):B(I,!1)}),!0),a(f,A)};M($,(f=>{r.type===Ur.folder&&r.inclusionState!==wr.excluded?f(N):f(T,!1)}));var E=c($,2),b=l(E),k=c(E,2),S=f=>{U(f,{size:1,class:"file-count",children:(A,C)=>{var x=w();j((I=>de(x,I)),[()=>r.trackedFileCount.toLocaleString()]),a(A,x)},$$slots:{default:!0}})};M(k,(f=>{r.type===Ur.folder&&r.inclusionState!==wr.excluded&&typeof r.trackedFileCount=="number"&&f(S)}));var R=c(k,2);{let f=z((()=>r.inclusionState===wr.excluded?"error":"success"));$n(R,{get status(){return t(f)},get content(){return n[r.inclusionState]}})}var u=c(m,2),_=f=>{var A=Qo();mt(A,21,(()=>t(d).children),(C=>Er.fileIdToString(C.fileId)),((C,x)=>{{let I=z((()=>e.indentLevel+1));An(C,{get data(){return t(x)},get wsContextModel(){return e.wsContextModel},get indentLevel(){return t(I)}})}})),a(f,A)};M(u,(f=>{t(d)&&f(_)})),j((()=>{h=xt(m,1,"tree-item svelte-1qg3awc",null,h,{"included-folder":t(i)}),ar(m,"title",r.reason),ar(m,"aria-expanded",r.type===Ur.folder&&r.expanded),ar(m,"aria-level",e.indentLevel),Is(m,`padding-left: ${15*e.indentLevel+10}px;`),de(b,r.name)})),a(o,v),Ne()}yr(["click","keyup"]);var tl=y('<div class="files-container svelte-ne2oho"></div>');function rl(o,e){xe(e,!0);const[r,s]=Ut();let n=z((()=>De(e.wsContextModel,"$wsContextModel",r).sourceTree));var i=tl();mt(i,21,(()=>t(n)),(d=>Er.fileIdToString(d.fileId)),((d,v)=>{An(d,{get wsContextModel(){return e.wsContextModel},get data(){return t(v)},indentLevel:0})})),a(o,i),Ne(),s()}var al=y('<div class="icon-wrapper svelte-17335g0"><!></div>'),sl=y("<!> <!>",1),nl=y('<div class="settings-card-body"><!></div>'),il=y('<div><div class="settings-card-content svelte-17335g0"><div class="settings-card-left svelte-17335g0"><!></div> <div class="settings-card-right svelte-17335g0"><!></div></div> <!></div>');function zt(o,e){let r=le(e,"transparent",3,!1);var s=il();let n;var i=l(s),d=l(i),v=l(d),m=b=>{var k=sl(),S=O(k),R=f=>{var A=al(),C=l(A);me(C,{get name(){return e.iconName},size:2}),a(f,A)};M(S,(f=>{e.iconName&&f(R)}));var u=c(S,2),_=f=>{U(f,{color:"neutral",size:1,weight:"light",class:"card-title",children:(A,C)=>{var x=w();j((()=>de(x,e.title))),a(A,x)},$$slots:{default:!0}})};M(u,(f=>{e.title&&f(_)})),a(b,k)},h=b=>{var k=Y(),S=O(k),R=u=>{var _=Y(),f=O(_);ut(f,(()=>e.headerLeft)),a(u,_)};M(S,(u=>{e.headerLeft&&u(R)}),!0),a(b,k)};M(v,(b=>{e.iconName||e.title?b(m):b(h,!1)}));var p=c(d,2),$=l(p),N=b=>{var k=Y(),S=O(k);ut(S,(()=>e.headerRight)),a(b,k)};M($,(b=>{e.headerRight&&b(N)}));var T=c(i,2),E=b=>{var k=nl(),S=l(k);ut(S,(()=>e.children)),a(b,k)};M(T,(b=>{e.children&&b(E)})),j((()=>n=xt(s,1,mr(["settings-card",e.class]),"svelte-17335g0",n,{"settings-card--transparent":r()}))),a(o,s)}var ol=y('<div class="c-settings-title svelte-1nrvk6x"><!></div>');function Rt(o,e){const r=le(e,"level",3,1),s=le(e,"marginBottom",3,3),n=le(e,"capitalize",3,!1),i={1:7,2:3,3:2},d=z((()=>i[r()]));var v=ol();let m;var h=l(v);U(h,{get size(){return t(d)},color:"primary",weight:"regular",block:!0,get capitalize(){return n()},children:(p,$)=>{var N=Y(),T=O(N);ut(T,(()=>e.children)),a(p,N)},$$slots:{default:!0}}),j((()=>m=Is(v,"",m,{"--margin-bottom":s()}))),a(o,v)}var ll=y("<div><!></div>"),cl=y('<div class="context-list svelte-yszddx"><div><!> <!></div> <div><div class="files-header svelte-yszddx"><!> <!></div> <!></div></div>'),dl=y("<!> <!>",1);function ul(o,e){xe(e,!0);const r=()=>De(i,"$wsContextModel",s),[s,n]=Ut();let i=new Er(It,new qa(It.postMessage)),d=z((()=>r().sourceFolders.sort(((p,$)=>p.isWorkspaceFolder!==$.isWorkspaceFolder?p.isWorkspaceFolder?-1:1:p.fileId.folderRoot.localeCompare($.fileId.folderRoot))))),v=z((()=>t(d).reduce(((p,$)=>p+($.trackedFileCount??0)),0)));var m=dl();Kt("message",va,(function(...p){i.handleMessageFromExtension?.apply(this,p)}));var h=O(m);Rt(h,{level:1,children:(p,$)=>{var N=w("Context");a(p,N)},$$slots:{default:!0}});{const p=$=>{var N=ll(),T=l(N),E=b=>{{let k=z((()=>Ta("Enter",(()=>i.requestRefresh()))));Et(b,{title:"Refresh",onclick:()=>i.requestRefresh(),get onkeyup(){return t(k)},variant:"ghost-block",color:"neutral",size:1,children:(S,R)=>{me(S,{name:"refresh-ccw"})},$$slots:{default:!0}})}};M(T,(b=>{r().syncStatus===$r.done&&b(E)})),a($,N)};zt(c(h,2),{headerRight:p,children:($,N)=>{var T=cl(),E=l(T),b=l(E);U(b,{size:1,weight:"medium",class:"context-section-header",children:(_,f)=>{var A=w("SOURCE FOLDERS");a(_,A)},$$slots:{default:!0}}),(function(_,f){xe(f,!0);let A=le(f,"folders",19,(()=>[]));var C=Zo(),x=l(C);mt(x,17,A,(H=>Er.fileIdToString(H.fileId)),((H,L)=>{var J=Xo();let ee;var Se=l(J),Ee=P=>{{let F=z((()=>Ta("Enter",(()=>f.onRemove(t(L).fileId.folderRoot)))));Et(P,{title:"Remove source folder from Augment context",onclick:()=>f.onRemove(t(L).fileId.folderRoot),get onkeyup(){return t(F)},variant:"ghost",color:"neutral",size:.5,children:(ce,re)=>{me(ce,{name:"x"})},$$slots:{default:!0}})}};M(Se,(P=>{t(L).isWorkspaceFolder||P(Ee)}));var V=c(Se,2);{let P=z((()=>(F=>F.isWorkspaceFolder?"folder-root":"folder")(t(L))));me(V,{get name(){return t(P)}})}var ge=c(V,2),G=l(ge),ae=c(G);U(ae,{size:0,color:"secondary",style:"font-style: italic;",children:(P,F)=>{var ce=w();j((()=>de(ce,t(L).isPending?"(pending)":t(L).fileId.folderRoot))),a(P,ce)},$$slots:{default:!0}});var se=c(ge,2),fe=P=>{U(P,{size:1,class:"file-count",children:(F,ce)=>{var re=w();j((Fe=>de(re,Fe)),[()=>t(L).trackedFileCount.toLocaleString()]),a(F,re)},$$slots:{default:!0}})};M(se,(P=>{t(L).trackedFileCount&&P(fe)})),j((()=>{ee=xt(J,1,"source-folder__item svelte-wku3wr",null,ee,{"workspace-folder":t(L).isWorkspaceFolder}),de(G,`${t(L).name??""} `)})),a(H,J)}));var I=c(x,2),B=z((()=>Ta("Enter",f.onAddMore)));I.__keyup=function(...H){t(B)?.apply(this,H)},I.__click=function(...H){f.onAddMore?.apply(this,H)};var D=l(I);me(D,{name:"plus"}),a(_,C),Ne()})(c(b,2),{get folders(){return t(d)},onRemove:_=>i.removeSourceFolder(_),onAddMore:()=>i.addMoreSourceFolders()});var k=c(E,2),S=l(k),R=l(S);U(R,{size:1,weight:"medium",class:"context-section-header",children:(_,f)=>{var A=w("FILES");a(_,A)},$$slots:{default:!0}});var u=c(R,2);U(u,{size:1,class:"file-count",children:(_,f)=>{var A=w();j((C=>de(A,C)),[()=>t(v).toLocaleString()]),a(_,A)},$$slots:{default:!0}}),rl(c(S,2),{get wsContextModel(){return i}}),a($,T)},$$slots:{headerRight:!0,default:!0}})}a(o,m),Ne(),n()}var vl=y('<div class="l-markdown-editor svelte-z9ze0l"><div class="c-markdown-editor__header svelte-z9ze0l"><!></div> <!> <div class="c-markdown-editor__content svelte-z9ze0l"><!> <!></div></div> <div class="c-markdown-editor__status svelte-z9ze0l"><!> <!></div>',1),hl=y('<div class="c-user-guidelines-category__input svelte-19odral"><!></div>');function Rn(o,e){xe(e,!0);const[r,s]=Ut();let n=le(e,"userGuidelines",15,""),i=le(e,"userGuidelinesLengthLimit",19,(()=>{})),d=le(e,"updateUserGuideline",3,(async()=>!1));const v=$t(void 0);async function m(){const p=n().trim();if(De(v,"$originalValue",r)!==p){if(!await d()(p))throw i()&&p.length>i()?new Error(`The user guideline must be less than ${i()} character long`):new Error("An error occurred updating the user");js(v,p)}}er((()=>{js(v,n().trim())})),Na((()=>{m()}));var h=hl();(function(p,$){xe($,!0);let N,T=le($,"variant",3,"surface"),E=le($,"size",3,2),b=le($,"color",19,(()=>{})),k=le($,"resize",3,"none"),S=le($,"textInput",15),R=le($,"value",15,""),u=le($,"selectedText",15,""),_=le($,"selectionStart",15,0),f=le($,"selectionEnd",15,0),A=rr($,["$$slots","$$events","$$legacy","variant","size","color","resize","textInput","value","selectedText","selectionStart","selectionEnd","saveFunction","header","children","title"]),C=te(!1),x=te(void 0);const I=async()=>{try{$.saveFunction(),g(C,!0),clearTimeout(N),N=setTimeout((()=>{g(C,!1)}),1500)}catch(P){g(x,P instanceof Error?P.message:String(P),!0)}};function B(){S()&&(_(S().selectionStart),f(S().selectionEnd),_()!==f()?u(R().substring(_(),f())):u(""))}Na((()=>{I()}));var D=vl(),H=O(D),L=l(H),J=l(L);ut(J,(()=>$.header??Ot));var ee=c(L,2);ut(ee,(()=>$.children??Ot));var Se=c(ee,2),Ee=l(Se);ut(Ee,(()=>$.title??Ot));var V=c(Ee,2);Ja(V,na({get variant(){return T()},get size(){return E()},get color(){return b()},get resize(){return k()},placeholder:"Enter markdown content...",onselect:B,onmouseup:B,onkeyup:()=>{B()},onblur:I,onkeydown:P=>{(P.key==="Escape"||(P.metaKey||P.ctrlKey)&&P.key==="s")&&(P.preventDefault(),I())}},(()=>A),{get textInput(){return S()},set textInput(P){S(P)},get value(){return R()},set value(P){R(P)}}));var ge=c(H,2),G=l(ge),ae=P=>{U(P,{size:1,weight:"light",color:"error",children:(F,ce)=>{var re=w();j((()=>de(re,t(x)))),a(F,re)},$$slots:{default:!0}})};M(G,(P=>{t(x)&&P(ae)}));var se=c(G,2),fe=P=>{U(P,{size:1,weight:"light",color:"success",children:(F,ce)=>{var re=w("Saved");a(F,re)},$$slots:{default:!0}})};M(se,(P=>{t(C)&&P(fe)})),a(p,D),Ne()})(l(h),{placeholder:"Add your guidelines for Augment Chat...",resize:"vertical",rows:6,saveFunction:m,get value(){return n()},set value(p){n(p)}}),a(o,h),Ne(),s()}var gl=y("<!> <!> <!>",1),pl=y("<!> <!>",1),ml=y('<input type="text" value="No existing rules found" readonly="" class="c-dropdown-input svelte-1wjtvv4"/>'),fl=y('<div class="c-dropdown-trigger svelte-1wjtvv4"><input type="text" readonly="" class="c-dropdown-input svelte-1wjtvv4"/> <!></div>'),yl=y("<!> <!>",1),_l=y("<!> <!>",1),bl=y("<!> <!>",1),wl=y("<!> <!> <!> <!>",1),$l=y('<div class="c-auto-import-rules-dialog svelte-1wjtvv4"><!></div>'),Sl=y("<!> <!>",1);function El(o,e){xe(e,!0);let r,s=le(e,"show",3,!1),n=le(e,"options",19,(()=>[])),i=le(e,"isLoading",3,!1),d=le(e,"errorMessage",3,""),v=le(e,"successMessage",3,""),m=z((()=>n().length>0?n()[0]:null)),h=te(null),p=te(void 0),$=te(void 0);function N(){t(h)&&!i()&&e.onselect?.(t(h))}function T(){i()||(e.oncancel?.(),g(h,t(m),!0))}pt((()=>{t(p)&&(r?.(),r=t(p).focusedIndex.subscribe((E=>{g($,E,!0)})))})),Na((()=>{r?.()})),pt((()=>{s()&&g(h,t(m),!0)})),Kt("keydown",va,(function(E){s()&&!i()&&(E.key==="Escape"?(E.preventDefault(),T()):E.key==="Enter"&&t(h)&&(E.preventDefault(),N()))})),Ka(o,{get show(){return s()},title:"Auto Import Rules",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return i()},get preventEscapeClose(){return i()},oncancel:T,body:k=>{var S=$l(),R=l(S),u=f=>{var A=ml();a(f,A)},_=f=>{var A=wl(),C=O(A);U(C,{size:2,color:"secondary",children:(L,J)=>{var ee=w("Select existing rules to auto import to .augment/rules");a(L,ee)},$$slots:{default:!0}});var x=c(C,2);{let L=z((()=>n().length===0?[]:void 0));Ce(x,(()=>ot.Root),((J,ee)=>{Zt(ee(J,{get triggerOn(){return t(L)},children:(Se,Ee)=>{var V=bl(),ge=O(V);Ce(ge,(()=>ot.Trigger),((ae,se)=>{se(ae,{children:(fe,P)=>{var F=fl(),ce=l(F),re=c(ce,2);me(re,{name:"chevron-down"}),j((()=>ei(ce,t(h)?t(h).label:"Existing rules"))),a(fe,F)},$$slots:{default:!0}})}));var G=c(ge,2);Ce(G,(()=>ot.Content),((ae,se)=>{se(ae,{align:"start",side:"bottom",children:(fe,P)=>{var F=_l(),ce=O(F);mt(ce,17,n,(Be=>Be.label),((Be,je)=>{var ne=Y(),ye=O(ne);{let Oe=z((()=>t(h)?.label===t(je).label));Ce(ye,(()=>ot.Item),((q,ue)=>{ue(q,{onSelect:()=>(function(ie){g(h,ie,!0),t(p)?.requestClose()})(t(je)),get highlight(){return t(Oe)},children:(ie,we)=>{var oe=w();j((()=>de(oe,t(je).label))),a(ie,oe)},$$slots:{default:!0}})}))}a(Be,ne)}));var re=c(ce,2),Fe=Be=>{var je=yl(),ne=O(je);Ce(ne,(()=>ot.Separator),((Oe,q)=>{q(Oe,{})}));var ye=c(ne,2);Ce(ye,(()=>ot.Label),((Oe,q)=>{q(Oe,{children:(ue,ie)=>{var we=w();j((()=>de(we,t($)!==void 0?n()[t($)].description:t(h)?.description))),a(ue,we)},$$slots:{default:!0}})})),a(Be,je)};M(re,(Be=>{(t($)!==void 0||t(h))&&Be(Fe)})),a(fe,F)},$$slots:{default:!0}})})),a(Se,V)},$$slots:{default:!0}}),(Se=>g(p,Se,!0)),(()=>t(p)))}))}var I=c(x,2),B=L=>{or(L,{variant:"soft",color:"error",size:1,icon:ee=>{me(ee,{name:"circle-alert"})},children:(ee,Se)=>{var Ee=w();j((()=>de(Ee,d()))),a(ee,Ee)},$$slots:{icon:!0,default:!0}})};M(I,(L=>{d()&&L(B)}));var D=c(I,2),H=L=>{or(L,{variant:"soft",color:"success",size:1,icon:ee=>{me(ee,{name:"circle-check"})},children:(ee,Se)=>{var Ee=w();j((()=>de(Ee,v()))),a(ee,Ee)},$$slots:{icon:!0,default:!0}})};M(D,(L=>{v()&&L(H)})),a(f,A)};M(R,(f=>{n().length===0?f(u):f(_,!1)})),a(k,S)},footer:k=>{var S=Sl(),R=O(S);Ke(R,{variant:"solid",color:"neutral",get disabled(){return i()},onclick:T,children:(f,A)=>{var C=w("Cancel");a(f,C)},$$slots:{default:!0}});var u=c(R,2),_=f=>{{let A=z((()=>!t(h)||i()));Ke(f,{color:"accent",variant:"solid",get disabled(){return t(A)},get loading(){return i()},onclick:N,children:(C,x)=>{var I=w();j((()=>de(I,i()?"Importing...":"Import "))),a(C,I)},$$slots:{default:!0}})}};M(u,(f=>{n().length>0&&f(_)})),a(k,S)},$$slots:{body:!0,footer:!0}}),Ne()}var kl=y(`Rules are instructions for Augment Chat and Agent that can be applied automatically across all
      conversations or referenced in specific conversations using @mentions (e.g., @rule-file.md) <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a>`,1),Cl=y('<div class="loading-container"><!> <!></div>'),Al=y('<div class="c-rules-list-empty svelte-33mxxk"><!></div>'),Rl=y('<div class="c-rule-item-info svelte-33mxxk"><div class="l-icon-wrapper svelte-33mxxk"><!></div> <div class="c-rule-item-path svelte-33mxxk"><!></div></div>'),Tl=y('<div class="server-actions"><div class="status-controls svelte-33mxxk"><div class="c-rules-dropdown"><!></div> <!> <!></div></div>'),Il=y('<div class="c-rules-actions-button-content svelte-33mxxk">Create new rule file</div>'),xl=y('<div class="c-rules-actions-button-content svelte-33mxxk">Import rules</div>'),Nl=y("<!> <!>",1),Ml=y("<!> <!>",1),Pl=y("<!> <!>",1),Ol=y(`User Guidelines allow you to control Augment's behavior through natural language instructions.
      These guidelines are applied globally to all Chat and Agent interactions. <a href="https://docs.augmentcode.com/setup-augment/guidelines#workspace-guidelines" target="_blank"><!></a>`,1),zl=y('<!> <!> <!> <div class="c-rules-category svelte-33mxxk"><div class="c-rules-section svelte-33mxxk"><div class="c-rules-header svelte-33mxxk"><!> <!></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <div class="c-rules-list svelte-33mxxk"><!></div> <div class="c-rules-actions-container svelte-33mxxk"><!> <!></div></div> <div class="c-user-guidelines-section svelte-33mxxk"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div></div> <!> <!>',1);function Ul(o,e){xe(e,!0);const r=()=>De(p,"$rulesFiles",n),s=()=>De($,"$areRulesLoading",n),[n,i]=Ut();let d=le(e,"userGuidelines",3,""),v=le(e,"workspaceGuidelinesContent",3,""),m=le(e,"updateUserGuideline",3,(async()=>!1));const h=Ar(),p=ui(),$=Ys("createRule"),N=Xs("createRule"),T=Zs("createRule"),E=Ys("autoImport"),b=vi(),k=Xs("autoImport"),S=hi("autoImport"),R=Zs("autoImport");let u=z((()=>e.workspaceGuidelinesLengthLimit)),_=z((()=>ao({rules:r(),workspaceGuidelinesContent:v(),rulesAndGuidelinesLimit:t(u)}))),f=z((()=>t(_).isOverLimit)),A=z((()=>t(_).warningMessage));const C=[{label:"Auto import existing rules in the workspace",id:"auto_import",description:"Choose existing rules in your workspace to auto import to Augment."},{label:"Select file(s) or directory to import",id:"select_file_or_directory",description:"Select an existing directory or list of markdown files to import to Augment."}];let x=te(void 0),I=te(void 0);pt((()=>{if(t(x))return t(x).focusedIndex.subscribe((q=>{g(I,q,!0)}))}));var B=zl(),D=O(B);Qs(D,{sagaName:"rulesRefetch"});var H=c(D,2);Qs(H,{sagaName:"rulesEditing"});var L=c(H,2);Rt(L,{level:1,children:(q,ue)=>{var ie=w("Rules & Guidelines");a(q,ie)},$$slots:{default:!0}});var J=c(L,2),ee=l(J),Se=l(ee),Ee=l(Se);Rt(Ee,{level:2,marginBottom:0,children:(q,ue)=>{var ie=w("Rules");a(q,ie)},$$slots:{default:!0}});var V=c(Ee,2);Ht(V,{content:"Refresh rules",children:(q,ue)=>{Et(q,{size:1,variant:"ghost-block",color:"neutral",onclick:()=>h(gi()),get disabled(){return s()},title:"Refresh rules",children:(ie,we)=>{me(ie,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=c(Se,2);la(ge,(()=>({"--text-color":"var(--ds-color-secondary-a11)"}))),U(ge.lastChild,{size:1,color:"neutral",block:!0,children:(q,ue)=>{var ie=kl(),we=c(O(ie)),oe=l(we);U(oe,{size:1,weight:"regular",children:(ve,$e)=>{var pe=w("Learn more");a(ve,pe)},$$slots:{default:!0}}),a(q,ie)},$$slots:{default:!0}});var G=c(ge,2),ae=q=>{or(q,{variant:"soft",color:"warning",size:1,icon:ie=>{me(ie,{name:"circle-alert"})},children:(ie,we)=>{var oe=w();j((()=>de(oe,t(A)))),a(ie,oe)},$$slots:{icon:!0,default:!0}})};M(G,(q=>{t(f)&&q(ae)}));var se=c(G,2),fe=l(se),P=q=>{var ue=Cl(),ie=l(ue);Rr(ie,{size:1});var we=c(ie,2);U(we,{size:1,color:"secondary",children:(oe,ve)=>{var $e=w("Loading rules...");a(oe,$e)},$$slots:{default:!0}}),a(q,ue)},F=q=>{var ue=Y(),ie=O(ue),we=ve=>{var $e=Al(),pe=l($e);U(pe,{size:1,color:"neutral",children:(W,Q)=>{var he=w("No rules files found");a(W,he)},$$slots:{default:!0}}),a(ve,$e)},oe=ve=>{var $e=Y(),pe=O($e);mt(pe,1,r,(W=>W.path),((W,Q)=>{zt(W,{headerLeft:ke=>{var Te=Rl(),Ae=l(Te),Me=l(Ae),Re=K=>{Ht(K,{content:"No description found",children:(Z,_e)=>{me(Z,{name:"circle-alert"})},$$slots:{default:!0}})},We=K=>{me(K,{name:"file"})};M(Me,(K=>{t(Q).type!==Vi.AGENT_REQUESTED||t(Q).description?K(We,!1):K(Re)}));var Ye=c(Ae,2),ze=l(Ye);yo(ze,{get filepath(){return t(Q).path}}),a(ke,Te)},headerRight:ke=>{var Te=Tl(),Ae=l(Te),Me=l(Ae),Re=l(Me);fo(Re,{get rule(){return t(Q)},onSave:(ze,K)=>{h($i({type:ze,path:t(Q).path,content:t(Q).content,description:K,settingsStored:t(Q).settingsStored}))}});var We=c(Me,2);Et(We,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",onclick:ze=>{ze.stopPropagation(),h(Si({pathName:t(Q).path}))},children:(ze,K)=>{me(ze,{name:"external-link",size:1})},$$slots:{default:!0}});var Ye=c(We,2);Et(Ye,{size:1,variant:"ghost-block",color:"neutral",class:"c-rule-item-button",onclick:ze=>{ze.stopPropagation(),h(Ei(t(Q).path))},children:(ze,K)=>{me(ze,{name:"trash-2",size:1})},$$slots:{default:!0}}),a(ke,Te)},$$slots:{headerLeft:!0,headerRight:!0}})})),a(ve,$e)};M(ie,(ve=>{r().length===0?ve(we):ve(oe,!1)}),!0),a(q,ue)};M(fe,(q=>{s()&&r().length===0?q(P):q(F,!1)}));var ce=c(se,2),re=l(ce);Ke(re,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",onclick:()=>h(pi("createRule")),iconLeft:ue=>{me(ue,{name:"plus"})},children:(ue,ie)=>{var we=Il();a(ue,we)},$$slots:{iconLeft:!0,default:!0}});var Fe=c(re,2);Ce(Fe,(()=>ot.Root),((q,ue)=>{Zt(ue(q,{children:(ie,we)=>{var oe=Pl(),ve=O(oe);Ce(ve,(()=>ot.Trigger),((pe,W)=>{W(pe,{children:(Q,he)=>{Ke(Q,{size:1,variant:"soft",color:"neutral",class:"c-rules-action-button",iconLeft:Te=>{me(Te,{name:"download"})},iconRight:Te=>{me(Te,{name:"chevron-down"})},children:(Te,Ae)=>{var Me=xl();a(Te,Me)},$$slots:{iconLeft:!0,iconRight:!0,default:!0}})},$$slots:{default:!0}})}));var $e=c(ve,2);Ce($e,(()=>ot.Content),((pe,W)=>{W(pe,{align:"start",side:"bottom",children:(Q,he)=>{var X=Ml(),ke=O(X);mt(ke,17,(()=>C),(Me=>Me.id),((Me,Re)=>{var We=Y(),Ye=O(We);Ce(Ye,(()=>ot.Item),((ze,K)=>{K(ze,{onSelect:()=>(function(Z){Z.id==="select_file_or_directory"?h(mi()):Z.id==="auto_import"&&h(fi()),t(x)?.requestClose()})(t(Re)),children:(Z,_e)=>{var qe=w();j((()=>de(qe,t(Re).label))),a(Z,qe)},$$slots:{default:!0}})})),a(Me,We)}));var Te=c(ke,2),Ae=Me=>{var Re=Nl(),We=O(Re);Ce(We,(()=>ot.Separator),((ze,K)=>{K(ze,{})}));var Ye=c(We,2);Ce(Ye,(()=>ot.Label),((ze,K)=>{K(ze,{children:(Z,_e)=>{var qe=w();j((()=>de(qe,t(I)!==void 0?C[t(I)].description:C[0].description))),a(Z,qe)},$$slots:{default:!0}})})),a(Me,Re)};M(Te,(Me=>{(t(I)!==void 0||C.length>0)&&Me(Ae)})),a(Q,X)},$$slots:{default:!0}})})),a(ie,oe)},$$slots:{default:!0}}),(ie=>g(x,ie,!0)),(()=>t(x)))}));var Be=c(ee,2),je=l(Be);Rt(je,{level:2,marginBottom:0,children:(q,ue)=>{var ie=w("User Guidelines");a(q,ie)},$$slots:{default:!0}});var ne=c(je,2);la(ne,(()=>({"--text-color":"var(--ds-color-secondary-a11)"}))),U(ne.lastChild,{size:1,color:"neutral",block:!0,children:(q,ue)=>{var ie=Ol(),we=c(O(ie)),oe=l(we);U(oe,{size:1,weight:"regular",children:(ve,$e)=>{var pe=w("Learn more");a(ve,pe)},$$slots:{default:!0}}),a(q,ie)},$$slots:{default:!0}}),Rn(c(ne,2),{get userGuidelines(){return d()},get userGuidelinesLengthLimit(){return e.userGuidelinesLengthLimit},get updateUserGuideline(){return m()}});var ye=c(J,2);(function(q,ue){xe(ue,!0);let ie=le(ue,"show",3,!1),we=le(ue,"errorMessage",3,""),oe=te(""),ve=te(void 0),$e=te(!1);function pe(){t(oe).trim()&&!t($e)&&(g($e,!0),ue.oncreate?.(t(oe).trim()))}function W(){t($e)||(ue.oncancel?.(),g(oe,""))}function Q(he){t($e)||(he.key==="Enter"?(he.preventDefault(),pe()):he.key==="Escape"&&(he.preventDefault(),W()))}pt((()=>{ie()&&t(ve)&&setTimeout((()=>t(ve)?.focus()),100)})),pt((()=>{ie()&&!we()||g($e,!1)})),pt((()=>{ie()||we()||g(oe,"")})),Ka(q,{get show(){return ie()},title:"Create New Rule",ariaLabelledBy:"dialog-title",get preventBackdropClose(){return t($e)},get preventEscapeClose(){return t($e)},oncancel:W,onkeydown:function(ke){t($e)||ke.key==="Enter"&&(ke.preventDefault(),pe())},body:ke=>{var Te=gl(),Ae=O(Te);U(Ae,{size:2,color:"secondary",children:(Ye,ze)=>{var K=w("Enter a name for the new rule file (e.g., architecture.md):");a(Ye,K)},$$slots:{default:!0}});var Me=c(Ae,2);Pt(Me,{placeholder:"rule-name.md",get disabled(){return t($e)},onkeydown:Q,get value(){return t(oe)},set value(Ye){g(oe,Ye,!0)},get textInput(){return t(ve)},set textInput(Ye){g(ve,Ye,!0)}});var Re=c(Me,2),We=Ye=>{or(Ye,{variant:"soft",color:"error",size:1,icon:K=>{me(K,{name:"circle-alert"})},children:(K,Z)=>{var _e=w();j((()=>de(_e,we()))),a(K,_e)},$$slots:{icon:!0,default:!0}})};M(Re,(Ye=>{we()&&Ye(We)})),a(ke,Te)},footer:ke=>{var Te=pl(),Ae=O(Te);Ke(Ae,{variant:"solid",color:"neutral",get disabled(){return t($e)},onclick:W,children:(Re,We)=>{var Ye=w("Cancel");a(Re,Ye)},$$slots:{default:!0}});var Me=c(Ae,2);{let Re=z((()=>!t(oe).trim()||t($e)));Ke(Me,{variant:"solid",color:"accent",get disabled(){return t(Re)},get loading(){return t($e)},onclick:pe,children:(We,Ye)=>{var ze=w();j((()=>de(ze,t($e)?"Creating...":"Create"))),a(We,ze)},$$slots:{default:!0}})}a(ke,Te)},$$slots:{body:!0,footer:!0}}),Ne()})(ye,{get show(){return De(N,"$showCreateRuleDialog",n)},get errorMessage(){return De(T,"$createRuleError",n)},oncreate:function(q){h(wi(q))},oncancel:function(){h(en("createRule"))}});var Oe=c(ye,2);{let q=z((()=>De(b,"$autoImportOptions",n)||[]));El(Oe,{get show(){return De(k,"$showAutoImportDialog",n)},get options(){return t(q)},get isLoading(){return De(E,"$autoImportLoading",n)},get errorMessage(){return De(R,"$autoImportError",n)},get successMessage(){return De(S,"$autoImportSuccess",n)},onselect:function(ue){h(yi(ue))},oncancel:function(){h(en("autoImport")),h(_i("autoImport","")),h(bi("autoImport",""))}})}a(o,B),Ne(),i()}class Ll{constructor(e,r){this._callback=e,this.initialMS=r.initialMS,this.maxMS=r.maxMS,this.waitForCallback=r.waitForCallback??!0,this.backoffMultiplier=r.backoffMultiplier??2,this.autoBackoff=r.autoBackoff??!1,this.maxSteps=r.maxSteps,this.maxStepBehavior=r.maxStepBehavior??2,this.reset()}_currentTimeout=null;_currentIntervalMS;_steps;_isFixed;_initialMS;_maxMS;_backoffMultiplier;_maxSteps;waitForCallback;autoBackoff;maxStepBehavior;start(){this.stop(),this.reset(),this._schedule()}continue(){this._currentTimeout===null&&this._schedule()}stop(){this._currentTimeout!==null&&(clearTimeout(this._currentTimeout),this._currentTimeout=null)}reset(){this._currentIntervalMS=this._initialMS,this._steps=0,this._isFixed=!1}backoff(e=!1){if(!this._isFixed){if(this._maxSteps!==void 0&&this._steps>=this._maxSteps){if(this.maxStepBehavior===0)return void this.stop();this.maxStepBehavior===1&&this.reset()}else this._currentIntervalMS=Math.min(this._currentIntervalMS*this._backoffMultiplier,this._maxMS??1/0),this._steps++;e&&(this.stop(),this.continue())}}startFixedPolling(e){e<=0?console.warn("PollingManager: fixedPollingMS must be positive, ignoring fixed polling request"):(this._currentIntervalMS=e,this._isFixed=!0,this._steps=0,this.continue())}get isPolling(){return this._currentTimeout!==null}get currentInterval(){return this._currentIntervalMS}get isFixed(){return this._isFixed}dispose(){this.stop()}get initialMS(){return this._initialMS}set initialMS(e){e<=0?this._initialMS===void 0?(console.warn("PollingManager: initialMS value must be positive, using default value of 60 seconds"),this._initialMS=6e4):console.warn("PollingManager: initialMS value must be positive, keeping original value"):this._initialMS=e}get maxMS(){return this._maxMS}set maxMS(e){e!==void 0&&e<=0?console.warn("PollingManager: maxMS value must be positive, keeping original value"):this._maxMS=e}get backoffMultiplier(){return this._backoffMultiplier}set backoffMultiplier(e){e<1?this._backoffMultiplier===void 0?(console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, using default value of 2"),this._backoffMultiplier=2):console.warn("PollingManager: backoffMultiplier value must be greater than or equal to 1, keeping original value"):this._backoffMultiplier=e}get maxSteps(){return this._maxSteps}set maxSteps(e){e!==void 0&&e<1?console.warn("PollingManager: maxSteps must be greater than or equal to 1"):this._maxSteps=e}_schedule(){this._currentTimeout=setTimeout((async()=>{const e=this._currentTimeout,r=this._safeExecute();this.waitForCallback&&await r,this._currentTimeout===e&&(this.autoBackoff&&!this._isFixed&&this.backoff(),this._currentTimeout===e&&this._schedule())}),this._currentIntervalMS)}async _safeExecute(){try{await this._callback()}catch(e){console.error("Error in polling callback:",e)}}}class kr{static CTX_KEY=Symbol("credit-model");_usageUnitsRemaining;_usageUnitsTotal;_includedUsageUnitsPerBillingCycle;_isCreditBalanceLow;_usageUnitDisplayName;_planDisplayName;_alertBanner;_refreshedAt;_daysLeftInPlan;_creditDetails;usageUnitsRemaining;usageUnitsTotal;usageUnitsUsed;includedUsageUnitsPerBillingCycle;isCreditBalanceLow;usageUnitDisplayName;planDisplayName;alertBanner;refreshedAt;daysLeftInPlan;creditDetails;constructor(){this._usageUnitsRemaining=$t(0),this._usageUnitsTotal=$t(0),this._includedUsageUnitsPerBillingCycle=$t(0),this._isCreditBalanceLow=$t(!1),this._usageUnitDisplayName=$t("Credits"),this._planDisplayName=$t("Plan"),this._alertBanner=$t(void 0),this._refreshedAt=$t(void 0),this._daysLeftInPlan=$t(0),this._creditDetails=$t([]),this.usageUnitsRemaining=gr(this._usageUnitsRemaining),this.usageUnitsTotal=gr(this._usageUnitsTotal),this.usageUnitsUsed=ia([this.usageUnitsTotal,this.usageUnitsRemaining],(([e,r])=>e-r)),this.includedUsageUnitsPerBillingCycle=gr(this._includedUsageUnitsPerBillingCycle),this.isCreditBalanceLow=gr(this._isCreditBalanceLow),this.usageUnitDisplayName=ia(this._usageUnitDisplayName,(e=>e.toLowerCase().split(" ").map((r=>r.charAt(0).toUpperCase()+r.slice(1))).join(" "))),this.planDisplayName=gr(this._planDisplayName),this.alertBanner=gr(this._alertBanner),this.refreshedAt=gr(this._refreshedAt),this.daysLeftInPlan=gr(this._daysLeftInPlan),this.creditDetails=gr(this._creditDetails)}static setInContext(e,r){Dr(kr.CTX_KEY,{model:e,controller:r})}static getContext(){return Ir(kr.CTX_KEY)}static requireContext(){const e=kr.getContext();if(!e)throw new Error("CreditModel context missing");return e}_getWritableStores(){return{usageUnitsRemaining:this._usageUnitsRemaining,usageUnitsTotal:this._usageUnitsTotal,includedUsageUnitsPerBillingCycle:this._includedUsageUnitsPerBillingCycle,isCreditBalanceLow:this._isCreditBalanceLow,usageUnitDisplayName:this._usageUnitDisplayName,planDisplayName:this._planDisplayName,alertBanner:this._alertBanner,refreshedAt:this._refreshedAt,daysLeftInPlan:this._daysLeftInPlan,creditDetails:this._creditDetails}}}class Dl{constructor(e,r){this._model=e,this._extensionClient=r,this._stores=this._model._getWritableStores(),this._pollingManager=new Ll(this.requestCreditInfo.bind(this),{initialMS:5e3,maxMS:6e4,backoffMultiplier:2})}_pollingManager;_stores;async startPolling(){await this.requestCreditInfo(),this._pollingManager.start()}async requestCreditInfo(){const e=await this._extensionClient.getCreditInfo();if(this._pollingManager.isPolling){if(e?.error)return void(e?.error.continuePolling?e?.error.backoff&&this._pollingManager.backoff():(this._reset(),this._pollingManager.startFixedPolling(6e4)));this._pollingManager.isFixed||this._pollingManager.reset()}if(e){const r=(s,n)=>{n!==void 0&&s.set(n)};if(r(this._stores.usageUnitsRemaining,e.usageUnitsRemaining),r(this._stores.usageUnitsTotal,e.usageUnitsTotal),r(this._stores.includedUsageUnitsPerBillingCycle,e.includedUsageUnitsPerBillingCycle),r(this._stores.isCreditBalanceLow,e.isCreditBalanceLow),r(this._stores.planDisplayName,e.displayInfo?.planDisplayName),r(this._stores.refreshedAt,e.refreshedAt),r(this._stores.creditDetails,e.creditDetails),this._stores.alertBanner.set(e.displayInfo?.banner),e.currentBillingCycleEndDateIso!==void 0){const s=new Date(e.currentBillingCycleEndDateIso).getTime()-Date.now();s<0?this._stores.daysLeftInPlan.set(-1):this._stores.daysLeftInPlan.set(Math.ceil(s/864e5))}}}async backgroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.startFixedPolling(6e4)}async foregroundPoll(){this._pollingManager.isPolling||await this.requestCreditInfo(),this._pollingManager.start()}async stop(){this._pollingManager.stop()}_reset(){this._stores.usageUnitsRemaining.set(0),this._stores.usageUnitsTotal.set(0),this._stores.includedUsageUnitsPerBillingCycle.set(0),this._stores.isCreditBalanceLow.set(!1),this._stores.usageUnitDisplayName.set("Credits"),this._stores.planDisplayName.set("Plan"),this._stores.alertBanner.set(void 0),this._stores.refreshedAt.set(void 0),this._stores.daysLeftInPlan.set(0),this._stores.creditDetails.set([])}dispose=()=>{this._pollingManager.dispose()}}var Fl=y('<div class="c-account-category__split-left c-account-category__account-info-details svelte-1mj35xg"><!></div>'),Bl=y('<div class="c-account-category"><!> <div class="c-account-category__split c-account-category__account-info-section svelte-1mj35xg"><!> <div class="c-account-category__split-right c-account-category__account-info-buttons svelte-1mj35xg"><!> <!></div></div></div>');function nn(o,e){xe(e,!0);const r=()=>De(i,"$userEmail",s),[s,n]=Ut(),i=Ir(Oa.key).getUserEmail(),{model:d}=kr.requireContext(),{planDisplayName:v}=d,m=sr(),h=()=>{m.track(bt.WEBVIEW.ACCOUNT_SIGN_OUT_CLICKED,{}),e.onSignOut()};var p=Bl(),$=l(p);bn($,{target:"#settings-header-portal",children:(R,u)=>{Rt(R,{level:1,marginBottom:0,children:(_,f)=>{var A=w("Account");a(_,A)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=c($,2),T=l(N),E=R=>{var u=Fl(),_=l(u);U(_,{size:2,color:"secondary",children:(f,A)=>{var C=w();j((()=>de(C,`Signed in as ${r()??""}`))),a(f,C)},$$slots:{default:!0}}),a(R,u)};M(T,(R=>{r()&&R(E)}));var b=c(T,2),k=l(b);Ke(k,{size:1,variant:"soft",color:"neutral","data-testid":"manage-account-button",onclick:()=>{m.track(bt.WEBVIEW.ACCOUNT_MANAGE_ACCOUNT_CLICKED,{currentPlanName:De(v,"$planDisplayName",s)})},href:"https://app.augmentcode.com/account",asAnchor:!0,children:(R,u)=>{var _=w("Manage account");a(R,_)},$$slots:{default:!0}});var S=c(k,2);Ke(S,{size:1,variant:"solid",onclick:h,"data-testid":"sign-out-button",iconLeft:u=>{me(u,{name:"log-out"})},children:(u,_)=>{var f=w("Sign out");a(u,f)},$$slots:{iconLeft:!0,default:!0}}),a(o,p),Ne(),n()}var Wl=y("<div><!> <!></div>");function Tr(o,e){xe(e,!0);let r=le(e,"id",19,wn),s=le(e,"checked",15,!1),n=le(e,"ref",15,null),i=le(e,"size",3,2),d=le(e,"color",3,"accent"),v=rr(e,["$$slots","$$events","$$legacy","id","checked","ref","size","color","label","class","onChange","children"]);var m=Wl(),h=l(m);{let N=z((()=>["c-switch-augment__root",e.class]));Ce(h,(()=>zo),((T,E)=>{E(T,na({get id(){return r()},get onCheckedChange(){return e.onChange},get class(){return t(N)}},(()=>v),{get checked(){return s()},set checked(b){s(b)},get ref(){return n()},set ref(b){n(b)},children:(b,k)=>{var S=Y(),R=O(S);Ce(R,(()=>Lo),((u,_)=>{_(u,{class:"c-switch-augment__thumb"})})),a(b,S)},$$slots:{default:!0}}))}))}var p=c(h,2),$=N=>{var T=Y(),E=O(T);Ce(E,(()=>Io),((b,k)=>{k(b,{get for(){return r()},class:"c-switch-augment__label",children:(S,R)=>{var u=Y(),_=O(u),f=C=>{var x=w();j((()=>de(x,e.label))),a(C,x)},A=C=>{var x=Y(),I=O(x);ut(I,(()=>e.children??Ot)),a(C,x)};M(_,(C=>{e.label?C(f):C(A,!1)})),a(S,u)},$$slots:{default:!0}})})),a(N,T)};M(p,(N=>{(e.label||e.children)&&N($)})),j((()=>xt(m,1,mr(["c-switch-augment",`c-switch-augment--size-${i()===.5?"0_5":i()}`,`c-switch-augment--color-${d()}`]),"svelte-1w87bim"))),a(o,m),Ne()}var ql=y('<label for="enable-memory" class="c-memory-setting__info svelte-1qjbunu"><div><!></div> <div><!></div></label>'),Gl=y('<div class="c-memory-settings svelte-1qjbunu"><!> <!></div>');const Ya=Object.freeze(_n(ki,{}));var Hl=y(`Memories are facts and preferences that Augment Agent learns and remembers across
      conversations. <a href="https://docs.augmentcode.com/using-augment/agent#agent-memories" target="_blank" rel="noopener noreferrer"><!></a>`,1),Vl=y('<div class="c-memories-loading svelte-16nyq1"><!> <!></div>'),jl=y('<div class="c-memories-error svelte-16nyq1"><!></div>'),Jl=y('<div class="l-memories-page svelte-16nyq1"><!> <div class="c-memories-settings-section svelte-16nyq1"><!></div> <div class="c-memories-editor-section svelte-16nyq1"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <div class="c-memories-editor-container svelte-16nyq1"><!></div></div></div>');function Kl(o,e){xe(e,!0);let r=te(null),s=te(null),n=te(!0),i=te(null);async function d(S){await(await kt(Wt)).saveMemoriesFile({content:S})}er((async()=>{await(async function(){try{g(n,!0),g(i,null);const S=await kt(Wt),R=await S.loadMemoriesFile(Ya);R.path?(g(s,R.path,!0),g(r,R.content??"",!0)):g(i,"Memories file path not available")}catch(S){console.error("Failed to load memories file:",S),g(i,"Failed to load memories file")}finally{g(n,!1)}})()}));var v=Jl(),m=l(v);Rt(m,{level:1,marginBottom:0,children:(S,R)=>{var u=w("Memories");a(S,u)},$$slots:{default:!0}});var h=c(m,2);(function(S,R){xe(R,!0);let u=te(!1);const _=new qa(It.postMessage);async function f(){const x=!t(u);g(u,x);try{await _.sendToSidecar({type:Ma.updateMemorySettings,data:{enabled:x}},5e3)}catch(I){console.error("Failed to update memory settings:",I),g(u,!x)}}er((async()=>{try{const x=await _.sendToSidecar({type:Ma.getMemorySettings},5e3);g(u,x.data?.enabled??!1,!0)}catch(x){console.error("Failed to load memory settings:",x)}}));var A=Gl(),C=l(A);Rt(C,{level:2,marginBottom:0,children:(x,I)=>{var B=w("Memory Settings");a(x,B)},$$slots:{default:!0}});{const x=B=>{var D=ql(),H=l(D),L=l(H);U(L,{size:2,children:(Se,Ee)=>{var V=w("Enable Memory");a(Se,V)},$$slots:{default:!0}});var J=c(H,2),ee=l(J);U(ee,{size:1,children:(Se,Ee)=>{var V=w("Allow Augment to remember information from your conversations");a(Se,V)},$$slots:{default:!0}}),a(B,D)},I=B=>{Tr(B,{size:2,get checked(){return t(u)},id:"enable-memory","aria-label":"Enable memory",onChange:f})};zt(c(C,2),{headerLeft:x,headerRight:I,$$slots:{headerLeft:!0,headerRight:!0}})}a(S,A),Ne()})(l(h),{});var p=c(h,2),$=l(p);Rt($,{level:2,marginBottom:0,children:(S,R)=>{var u=w("Agent Memories");a(S,u)},$$slots:{default:!0}});var N=c($,2);la(N,(()=>({"--text-color":"var(--ds-color-secondary-a11)"}))),U(N.lastChild,{size:1,color:"neutral",block:!0,children:(S,R)=>{var u=Hl(),_=c(O(u)),f=l(_);U(f,{size:1,weight:"regular",children:(A,C)=>{var x=w("Learn more");a(A,x)},$$slots:{default:!0}}),a(S,u)},$$slots:{default:!0}});var T=c(N,2),E=l(T),b=S=>{var R=Vl(),u=l(R);Rr(u,{size:1});var _=c(u,2);U(_,{size:1,color:"secondary",children:(f,A)=>{var C=w("Loading memories...");a(f,C)},$$slots:{default:!0}}),a(S,R)},k=S=>{var R=Y(),u=O(R),_=A=>{var C=jl(),x=l(C);U(x,{size:1,color:"secondary",children:(I,B)=>{var D=w();j((()=>de(D,t(i)))),a(I,D)},$$slots:{default:!0}}),a(A,C)},f=A=>{var C=Y(),x=O(C),I=B=>{_o(B,{get text(){return t(r)},get path(){return t(s)},onSaveFile:d})};M(x,(B=>{t(r)!==null&&t(s)!==null&&B(I)}),!0),a(A,C)};M(u,(A=>{t(i)?A(_):A(f,!1)}),!0),a(S,R)};M(E,(S=>{t(n)?S(b):S(k,!1)})),a(o,v),Ne()}const Tn="mcpServerModel";function Xa(){const o=Ir(Tn);if(!o)throw new Error("MCPServerModel context not found. Make sure setMCPServerModelContext() was called in a parent component.");return o}var Yl=y('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div>'),Xl=y('<div class="c-feature-flag-editor__item-control c-feature-flag-editor__advanced-input svelte-1ab37k5"><!></div>'),Zl=y('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div>'),Ql=y('<div class="c-feature-flag-editor__item-control c-feature-flag-editor__advanced-input svelte-1ab37k5"><!></div>'),ec=y('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div>'),tc=y('<div class="c-feature-flag-editor__item-control c-feature-flag-editor__advanced-input svelte-1ab37k5"><!></div>'),rc=y('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!></div></div>'),ac=y('<div class="c-feature-flag-editor__item-control c-feature-flag-editor__advanced-input svelte-1ab37k5"><!></div>'),sc=y('<div class="c-feature-flag-editor__advanced-content svelte-1ab37k5"><!> <div class="c-feature-flag-editor__advanced-fields svelte-1ab37k5"><!> <!> <!> <!></div> <div class="c-feature-flag-editor__advanced-actions svelte-1ab37k5"><!></div></div>'),nc=y('<div class="c-feature-flag-editor__count svelte-1ab37k5"><!></div>'),ic=y('<div class="c-feature-flag-editor__item-label svelte-1ab37k5"><div class="c-feature-flag-editor__item-label-name svelte-1ab37k5"><!> <!> <!></div> <div class="c-feature-flag-editor__item-meta svelte-1ab37k5"><!> <!> <!></div></div>'),oc=y('<div class="c-feature-flag-editor__json-error svelte-1ab37k5"><!></div>'),lc=y('<div class="c-feature-flag-editor__json-editor svelte-1ab37k5"><!> <!> <div class="c-feature-flag-editor__json-actions svelte-1ab37k5"><!> <!></div></div>'),cc=y('<div class="c-feature-flag-editor__json-display svelte-1ab37k5"><div class="c-feature-flag-editor__json-preview svelte-1ab37k5"><pre class="c-feature-flag-editor__json-code svelte-1ab37k5"> </pre></div> <!></div>'),dc=y('<div class="c-feature-flag-editor__item-control svelte-1ab37k5"><!> <!> <!></div>'),uc=y('<div class="c-feature-flag-editor__search svelte-1ab37k5"><!> <!> <!></div> <!> <div class="c-feature-flag-editor__list svelte-1ab37k5"></div>',1),vc=y('<div class="c-feature-flag-editor svelte-1ab37k5"><!> <div class="c-feature-flag-editor__advanced-section svelte-1ab37k5"><button class="c-feature-flag-editor__advanced-header svelte-1ab37k5"><!> <!></button> <!></div> <!></div>');function hc(o,e){xe(e,!0);let r=le(e,"onFlagToggle",19,(()=>{}));const s=new Set(["eloModelConfiguration","memoriesParams","modelRegistry","modelInfoRegistry","additionalChatModels","agentViewToolParams"]);let n=te(null),i=te(null),d=te(At({})),v=te(At(new Set)),m=te(""),h=te(At(new Map)),p=te(At(new Map)),$=te(null),N=te(!1),T=te(!1),E=te(""),b=te(""),k=te(""),S=te(""),R=z((()=>{const P=$a.fields.findIndex((F=>F.name==="enable_onboarding_v2"));return new Map($a.fields.map(((F,ce)=>[F.localName,ce<=P])))}));function u(P){return P.replace(/([A-Z])/g," $1").replace(/^./,(F=>F.toUpperCase())).trim()}function _(P){return JSON.stringify(P,((F,ce)=>typeof ce=="bigint"?ce.toString():ce))}function f(P){if(P==null)return"";switch(typeof P){case"string":return P;case"bigint":case"number":case"boolean":return P.toString();default:return _(P)}}let A=z((()=>{return t(i)?(P=t(i),F=t(d),$a.fields.map((ce=>{const re=ce.localName,Fe=P[re];return{name:re,value:f(re in F?F[re]:Fe),field:ce}})).sort(((ce,re)=>ce.name.localeCompare(re.name)))):[];var P,F})),C=z((()=>{if(!t(m).trim())return t(A);const P=t(m).toLowerCase().trim();return t(A).filter((F=>{const ce=u(F.name).toLowerCase(),re=F.name.toLowerCase();return ce.includes(P)||re.includes(P)}))}));async function x(){try{g(n,null);const[P,F]=await Promise.all([kt(Ci),kt(Wt)]),[ce,re]=await Promise.all([P.featureFlags({},{timeoutMs:15e3}),F.getFeatureFlagOverrides({},{timeoutMs:15e3})]);if(!ce.featureFlags)throw new Error("No feature flags returned from service");g(i,ce.featureFlags,!0);try{g(d,JSON.parse(re.overridesJson||"{}"),!0)}catch{g(d,{},!0)}}catch(P){g(n,P instanceof Error?P.message:"Failed to load feature flags",!0),console.error("Error loading feature flags:",P)}}async function I(){try{g(T,!0),g($,null);const P=await kt(Wt),F=await P.updateAdvancedSettings({settings:{oauthUrl:t(E),oauthClientId:t(b),completionUrl:t(k),apiToken:t(S)}},{timeoutMs:15e3});if(!F.success)throw new Error(F.error||"Failed to save advanced settings")}catch(P){g($,P instanceof Error?P.message:"Failed to save advanced settings",!0),console.error("Error saving advanced settings:",P)}finally{g(T,!1)}}function B(P){try{const F=JSON.parse(P);return JSON.stringify(F,null,2)}catch{return P}}async function D(P,F){g(v,new Set(t(v)).add(P),!0);const ce=(function(re,Fe){const Be=$a.fields.find((je=>je.localName===Fe));if(!Be)return re;switch(Be.scalar){case wt.BOOL:return re==="true";case wt.BYTES:case wt.STRING:return re+"";case wt.FLOAT:case wt.SFIXED32:case wt.SFIXED64:case wt.INT32:case wt.UINT32:case wt.FIXED32:case wt.DOUBLE:case wt.INT64:return Number(re);default:try{return JSON.parse(re)}catch{return re}}})(F,P);try{const re=await kt(Wt),Fe=await re.updateFeatureFlagOverrides({flagName:P,valueJson:_(ce)});if(!Fe.success)throw new Error(Fe.error||"Failed to update feature flag");t(i)&&g(i,{...t(i),[P]:ce},!0),g(d,{...t(d),[P]:ce},!0),r()?.(P,ce)}catch(re){g(n,re instanceof Error?re.message:"Failed to update feature flag",!0),console.error("Error updating feature flag:",re)}finally{const re=new Set(t(v));re.delete(P),g(v,re,!0)}}let H=z((()=>Object.keys(t(d)).length));async function L(){if(t(H)===0)return;const P=Object.keys(t(d));g(v,new Set([...t(v),...P]),!0);try{const F=await kt(Wt);for(const ce of P){const re=await F.resetFeatureFlagOverride({flagName:ce});if(!re.success)throw new Error(re.error||`Failed to reset ${ce}`)}g(d,{},!0),await x()}catch(F){g(n,F instanceof Error?F.message:"Failed to clear overrides",!0),console.error("Error clearing overrides:",F)}finally{const F=new Set(t(v));for(const ce of P)F.delete(ce);g(v,F,!0)}}er((()=>{x(),(async function(){try{g($,null);const P=await kt(Wt),F=await P.getAdvancedSettings({},{timeoutMs:15e3});F.settings&&(g(E,F.settings.oauthUrl??"",!0),g(b,F.settings.oauthClientId??"",!0),g(k,F.settings.completionUrl??"",!0),g(S,F.settings.apiToken??"",!0))}catch(P){g($,P instanceof Error?P.message:"Failed to load advanced settings",!0),console.error("Error loading advanced settings:",P)}})()}));var J=vc(),ee=l(J),Se=P=>{or(P,{color:"error",children:(F,ce)=>{U(F,{size:1,children:(re,Fe)=>{var Be=w();j((()=>de(Be,t(n)))),a(re,Be)},$$slots:{default:!0}})},$$slots:{default:!0}})};M(ee,(P=>{t(n)&&P(Se)}));var Ee=c(ee,2),V=l(Ee);V.__click=()=>g(N,!t(N));var ge=l(V);{let P=z((()=>t(N)?"chevron-down":"chevron-right"));me(ge,{get name(){return t(P)},size:2})}Rt(c(ge,2),{level:2,marginBottom:0,children:(P,F)=>{var ce=w("Advanced Settings");a(P,ce)},$$slots:{default:!0}});var G=c(V,2),ae=P=>{var F=sc(),ce=l(F),re=q=>{or(q,{color:"error",children:(ue,ie)=>{U(ue,{size:1,children:(we,oe)=>{var ve=w();j((()=>de(ve,t($)))),a(we,ve)},$$slots:{default:!0}})},$$slots:{default:!0}})};M(ce,(q=>{t($)&&q(re)}));var Fe=c(ce,2),Be=l(Fe);zt(Be,{headerLeft:ie=>{var we=Yl(),oe=l(we),ve=l(oe);U(ve,{size:1,children:(Q,he)=>{var X=w("OAuth URL");a(Q,X)},$$slots:{default:!0}});var $e=c(oe,2),pe=l($e);U(pe,{size:0,color:"secondary",children:(Q,he)=>{var X=w("augment.advanced.oauth.url");a(Q,X)},$$slots:{default:!0}});var W=c(pe,2);U(W,{size:0,color:"secondary",children:(Q,he)=>{var X=w(" Custom OAuth server URL (e.g., https://auth-staging.augmentcode.com/)");a(Q,X)},$$slots:{default:!0}}),a(ie,we)},headerRight:ie=>{var we=Xl(),oe=l(we);Pt(oe,{get value(){return t(E)},oninput:ve=>g(E,ve.target.value,!0),placeholder:"https://auth.augmentcode.com/",size:1}),a(ie,we)},$$slots:{headerLeft:!0,headerRight:!0}});var je=c(Be,2);zt(je,{headerLeft:ie=>{var we=Zl(),oe=l(we),ve=l(oe);U(ve,{size:1,children:(Q,he)=>{var X=w("OAuth Client ID");a(Q,X)},$$slots:{default:!0}});var $e=c(oe,2),pe=l($e);U(pe,{size:0,color:"secondary",children:(Q,he)=>{var X=w("augment.advanced.oauth.clientID");a(Q,X)},$$slots:{default:!0}});var W=c(pe,2);U(W,{size:0,color:"secondary",children:(Q,he)=>{var X=w(" Custom OAuth client identifier");a(Q,X)},$$slots:{default:!0}}),a(ie,we)},headerRight:ie=>{var we=Ql(),oe=l(we);Pt(oe,{get value(){return t(b)},oninput:ve=>g(b,ve.target.value,!0),placeholder:"augment-vscode-extension",size:1}),a(ie,we)},$$slots:{headerLeft:!0,headerRight:!0}});var ne=c(je,2);zt(ne,{headerLeft:ie=>{var we=ec(),oe=l(we),ve=l(oe);U(ve,{size:1,children:(Q,he)=>{var X=w("Completion URL");a(Q,X)},$$slots:{default:!0}});var $e=c(oe,2),pe=l($e);U(pe,{size:0,color:"secondary",children:(Q,he)=>{var X=w("augment.advanced.completionURL");a(Q,X)},$$slots:{default:!0}});var W=c(pe,2);U(W,{size:0,color:"secondary",children:(Q,he)=>{var X=w(" Custom completion server URL");a(Q,X)},$$slots:{default:!0}}),a(ie,we)},headerRight:ie=>{var we=tc(),oe=l(we);Pt(oe,{get value(){return t(k)},oninput:ve=>g(k,ve.target.value,!0),placeholder:"",size:1}),a(ie,we)},$$slots:{headerLeft:!0,headerRight:!0}});{const q=ie=>{var we=rc(),oe=l(we),ve=l(oe);U(ve,{size:1,children:(Q,he)=>{var X=w("API Token");a(Q,X)},$$slots:{default:!0}});var $e=c(oe,2),pe=l($e);U(pe,{size:0,color:"secondary",children:(Q,he)=>{var X=w("augment.advanced.apiToken");a(Q,X)},$$slots:{default:!0}});var W=c(pe,2);U(W,{size:0,color:"secondary",children:(Q,he)=>{var X=w(" API token for Augment access");a(Q,X)},$$slots:{default:!0}}),a(ie,we)},ue=ie=>{var we=ac(),oe=l(we);Pt(oe,{get value(){return t(S)},oninput:ve=>g(S,ve.target.value,!0),placeholder:"",size:1,type:"password"}),a(ie,we)};zt(c(ne,2),{headerLeft:q,headerRight:ue,$$slots:{headerLeft:!0,headerRight:!0}})}var ye=c(Fe,2),Oe=l(ye);Ke(Oe,{size:1,variant:"solid",color:"accent",onclick:I,get disabled(){return t(T)},children:(q,ue)=>{var ie=Y(),we=O(ie),oe=$e=>{Rr($e,{size:1})},ve=$e=>{var pe=w("Save Advanced Settings");a($e,pe)};M(we,($e=>{t(T)?$e(oe):$e(ve,!1)})),a(q,ie)},$$slots:{default:!0}}),a(P,F)};M(G,(P=>{t(N)&&P(ae)}));var se=c(Ee,2),fe=P=>{var F=Y(),ce=O(F),re=Be=>{or(Be,{color:"info",children:(je,ne)=>{U(je,{size:1,children:(ye,Oe)=>{var q=w("No feature flags available.");a(ye,q)},$$slots:{default:!0}})},$$slots:{default:!0}})},Fe=Be=>{var je=uc(),ne=O(je),ye=l(ne);Pt(ye,{get value(){return t(m)},oninput:pe=>g(m,pe.target.value,!0),placeholder:"Search by name or field...","aria-label":"Search feature flags",size:1});var Oe=c(ye,2),q=pe=>{Et(pe,{size:1,variant:"ghost",onclick:()=>g(m,""),"aria-label":"Clear search",children:(W,Q)=>{me(W,{name:"x",size:2})},$$slots:{default:!0}})};M(Oe,(pe=>{t(m)&&pe(q)}));var ue=c(Oe,2),ie=pe=>{Ke(pe,{size:1,variant:"soft",color:"neutral",onclick:L,"aria-label":"Clear all overrides",iconLeft:Q=>{me(Q,{name:"x",size:1})},children:(Q,he)=>{var X=w();j((()=>de(X,`Clear Overrides (${t(H)??""})`))),a(Q,X)},$$slots:{iconLeft:!0,default:!0}})};M(ue,(pe=>{t(H)>0&&pe(ie)}));var we=c(ne,2),oe=pe=>{or(pe,{color:"info",children:(W,Q)=>{U(W,{size:1,children:(he,X)=>{var ke=w();j((()=>de(ke,`No feature flags match "${t(m)??""}"`))),a(he,ke)},$$slots:{default:!0}})},$$slots:{default:!0}})},ve=pe=>{var W=nc(),Q=l(W);U(Q,{size:0,color:"secondary",children:(he,X)=>{var ke=w();j((()=>de(ke,`Showing ${t(C).length??""} of ${t(A).length??""} flags`))),a(he,ke)},$$slots:{default:!0}}),a(pe,W)};M(we,(pe=>{t(C).length===0?pe(oe):pe(ve,!1)}));var $e=c(we,2);mt($e,21,(()=>t(C)),(pe=>pe.name),((pe,W)=>{zt(pe,{headerLeft:X=>{var ke=ic(),Te=l(ke),Ae=l(Te);U(Ae,{size:1,children:(_e,qe)=>{var He=w();j((Ue=>de(He,Ue)),[()=>u(t(W).name)]),a(_e,He)},$$slots:{default:!0}});var Me=c(Ae,2);U(Me,{size:0,color:"secondary",children:(_e,qe)=>{var He=w();j((Ue=>de(He,`v${Ue??""}`)),[()=>t(R).get(t(W).name)?"1":"2"]),a(_e,He)},$$slots:{default:!0}});var Re=c(Me,2),We=_e=>{var qe=Y(),He=O(qe);Ce(He,(()=>hr.Root),((Ue,Ie)=>{Ie(Ue,{color:"accent",variant:"soft",size:0,children:(Ve,Je)=>{var at=w("Overridden");a(Ve,at)},$$slots:{default:!0}})})),a(_e,qe)};M(Re,(_e=>{t(W).name in t(d)&&_e(We)}));var Ye=c(Te,2),ze=l(Ye);U(ze,{size:0,color:"secondary",children:(_e,qe)=>{var He=w();j((()=>de(He,t(W).name))),a(_e,He)},$$slots:{default:!0}});var K=c(ze,2);mo(K,{get text(){return t(W).name},tooltip:"Copy flag name",size:.5,iconSize:0});var Z=c(K,2);U(Z,{size:0,color:"secondary",children:(_e,qe)=>{var He=w();j((Ue=>de(He,` Type: ${Ue??""}`)),[()=>(function(Ue){if(!Ue.scalar)return"unknown";switch(Ue.scalar){case wt.BOOL:return"boolean";case wt.STRING:return"string";case wt.INT32:case wt.UINT32:case wt.FIXED32:case wt.SFIXED32:return"number (32-bit)";case wt.INT64:case wt.UINT64:case wt.FIXED64:case wt.SFIXED64:return"number (64-bit)";case wt.FLOAT:return"float";case wt.DOUBLE:return"double";case wt.BYTES:return"bytes";default:return"unknown"}})(t(W).field)]),a(_e,He)},$$slots:{default:!0}}),a(X,ke)},headerRight:X=>{var ke=dc(),Te=l(ke),Ae=K=>{Rr(K,{size:1})};M(Te,(K=>{t(v).has(t(W).name)&&K(Ae)}));var Me=c(Te,2),Re=K=>{{let Z=z((()=>[ga.Hover]));Ht(K,{content:"Reset to default",get triggerOn(){return t(Z)},children:(_e,qe)=>{{let He=z((()=>`Reset ${u(t(W).name)} to default`));Et(_e,{variant:"ghost-block",color:"neutral",size:.5,onclick:()=>(async function(Ue){g(v,new Set(t(v)).add(Ue),!0);try{const Ie=await kt(Wt),Ve=await Ie.resetFeatureFlagOverride({flagName:Ue});if(!Ve.success)throw new Error(Ve.error||"Failed to reset feature flag");const{[Ue]:Je,...at}=t(d);g(d,at,!0),await x(),r()?.(Ue,t(i)?.[Ue])}catch(Ie){g(n,Ie instanceof Error?Ie.message:"Failed to reset feature flag",!0),console.error("Error resetting feature flag:",Ie)}finally{const Ie=new Set(t(v));Ie.delete(Ue),g(v,Ie,!0)}})(t(W).name),get"aria-label"(){return t(He)},children:(Ue,Ie)=>{me(Ue,{name:"undo-2",size:1})},$$slots:{default:!0}})}},$$slots:{default:!0}})}};M(Me,(K=>{t(W).name in t(d)&&K(Re)}));var We=c(Me,2),Ye=K=>{{let Z=z((()=>t(W).value==="true")),_e=z((()=>`Toggle ${u(t(W).name)}`));Tr(K,{get checked(){return t(Z)},onChange:()=>D(t(W).name,t(W).value==="true"?"false":"true"),get"aria-label"(){return t(_e)}})}},ze=K=>{var Z=Y(),_e=O(Z),qe=Ue=>{var Ie=Y(),Ve=O(Ie),Je=et=>{var Pe=lc(),tt=l(Pe);{let nt=z((()=>t(h).get(t(W).name)??""));Ja(tt,{get value(){return t(nt)},oninput:it=>{const lt=it.target.value;g(h,new Map(t(h)).set(t(W).name,lt),!0)},rows:10,resize:"vertical",placeholder:"Enter valid JSON...",class:"c-feature-flag-editor__json-textarea",autoresize:!1})}var ct=c(tt,2),Ze=nt=>{var it=oc(),lt=l(it);or(lt,{color:"error",children:(ft,Nt)=>{U(ft,{size:0,children:(Lt,tr)=>{var Yt=w();j((yt=>de(Yt,yt)),[()=>t(p).get(t(W).name)]),a(Lt,Yt)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(nt,it)};M(ct,(nt=>{t(p).has(t(W).name)&&nt(Ze)}));var Qe=c(ct,2),Le=l(Qe);Ke(Le,{size:1,variant:"ghost",color:"neutral",onclick:()=>(function(nt){const it=new Map(t(h));it.delete(nt),g(h,it,!0);const lt=new Map(t(p));lt.delete(nt),g(p,lt,!0)})(t(W).name),children:(nt,it)=>{var lt=w("Cancel");a(nt,lt)},$$slots:{default:!0}});var st=c(Le,2);Ke(st,{size:1,variant:"solid",color:"accent",onclick:()=>(async function(nt){const it=t(h).get(nt);if(!it)return;try{JSON.parse(it);const ft=new Map(t(p));ft.delete(nt),g(p,ft,!0)}catch(ft){const Nt=ft instanceof Error?ft.message:"Invalid JSON";return void g(p,new Map(t(p)).set(nt,Nt),!0)}await D(nt,it);const lt=new Map(t(h));lt.delete(nt),g(h,lt,!0)})(t(W).name),children:(nt,it)=>{var lt=w("Save");a(nt,lt)},$$slots:{default:!0}}),a(et,Pe)},at=et=>{var Pe=cc(),tt=l(Pe),ct=l(tt),Ze=l(ct),Qe=c(tt,2);Ke(Qe,{size:1,variant:"soft",color:"neutral",onclick:()=>(function(st,nt){const it=B(nt);g(h,new Map(t(h)).set(st,it),!0);const lt=new Map(t(p));lt.delete(st),g(p,lt,!0)})(t(W).name,t(W).value),iconLeft:st=>{me(st,{name:"pencil",size:1})},children:(st,nt)=>{var it=w("Edit JSON");a(st,it)},$$slots:{iconLeft:!0,default:!0}}),j((Le=>de(Ze,Le)),[()=>B(t(W).value)]),a(et,Pe)};M(Ve,(et=>{t(h).has(t(W).name)?et(Je):et(at,!1)})),a(Ue,Ie)},He=Ue=>{{let Ie=z((()=>f(t(W).value)));Pt(Ue,{get value(){return t(Ie)},size:1,onchange:Ve=>D(t(W).name,Ve.target?.value??"")})}};M(_e,(Ue=>{var Ie;Ie=t(W).name,s.has(Ie)?Ue(qe):Ue(He,!1)}),!0),a(K,Z)};M(We,(K=>{t(W).field.scalar===wt.BOOL?K(Ye):K(ze,!1)})),a(X,ke)},$$slots:{headerLeft:!0,headerRight:!0}})})),a(Be,je)};M(ce,(Be=>{t(A).length===0?Be(re):Be(Fe,!1)})),a(P,F)};M(se,(P=>{t(i)&&P(fe)})),j((()=>ar(V,"aria-expanded",t(N)))),a(o,J),Ne()}yr(["click"]);var gc=y("<!> <!>",1),pc=y('<label for="opt-in-all-toggle" class="c-beta-category__opt-in-info svelte-f1yfdj"><!> <!></label>'),mc=y('<div class="c-beta-category__feature-info svelte-f1yfdj"><div class="c-beta-category__feature-title svelte-f1yfdj"><!> <!></div> <!></div>'),fc=y('<div class="c-beta-category__features svelte-f1yfdj"><!> <div class="c-beta-category__features-list svelte-f1yfdj"></div></div>'),yc=y('<div class="c-beta-category svelte-f1yfdj"><!> <div class="c-beta-category__opt-in-all svelte-f1yfdj"><!></div> <!></div>');function _c(o,e){xe(e,!0);const r=()=>De(v,"$rolledOutFlags",n),s=()=>De(h,"$publicBetaOptInAll",n),[n,i]=Ut(),d=sr(),v=Ai(),m=Ri(),h=nr(rs),p=nr("enableDebugFeatures"),$=z((()=>Ti.filter((u=>!r().has(u.originalFlag)||De(p,"$enableDebugFeatures",n))).map((u=>({...u,betaFlagValue:De(m,"$betaFlagValues",n)[u.betaFlag],isRolledOut:r().has(u.originalFlag)})))));async function N(u,_){try{const f=await kt(Wt),A=await f.updateFeatureFlagOverrides({flagName:u,valueJson:JSON.stringify(_)});if(!A.success)return void console.error(`Failed to update beta flag: ${A.error}`);e.onUpdateFlags({flagName:u,value:_})}catch(f){console.error("Error updating beta flag:",f)}}er((()=>{d.track(bt.WEBVIEW.BETA_PAGE_VIEWED,{})}));const T=async u=>{await N(rs,u),d.track(bt.WEBVIEW.BETA_FLAG_CHANGED,{flagName:rs,newValue:u})};var E=yc(),b=l(E);Rt(b,{level:1,children:(u,_)=>{var f=w("Beta");a(u,f)},$$slots:{default:!0}});var k=c(b,2);{const u=f=>{var A=pc(),C=l(A);U(C,{size:2,block:!0,children:(I,B)=>{var D=w("Opt in to all beta features");a(I,D)},$$slots:{default:!0}});var x=c(C,2);U(x,{size:1,color:"secondary",children:(I,B)=>{var D=w();j((()=>de(D,s()?"You will receive all beta features automatically":"You can choose individual beta features below"))),a(I,D)},$$slots:{default:!0}}),a(f,A)},_=f=>{Tr(f,{get checked(){return s()},onChange:T,size:2,id:"opt-in-all-toggle","aria-label":"Opt in to all beta features"})};zt(l(k),{class:"c-beta-category__card",headerLeft:u,headerRight:_,$$slots:{headerLeft:!0,headerRight:!0}})}var S=c(k,2),R=u=>{var _=fc(),f=l(_);Rt(f,{level:2,marginBottom:2,children:(C,x)=>{var I=w("Features");a(C,I)},$$slots:{default:!0}});var A=c(f,2);mt(A,21,(()=>t($)),(C=>C.name),((C,x)=>{zt(C,{class:"c-beta-category__card",headerLeft:D=>{var H=mc(),L=l(H),J=l(L);U(J,{size:2,children:(V,ge)=>{var G=w();j((()=>de(G,t(x).name))),a(V,G)},$$slots:{default:!0}});var ee=c(J,2),Se=V=>{Ht(V,{get content(){return`Original flag '${t(x).originalFlag??""}' is true, so beta flag '${t(x).betaFlag??""}' has no effect. This item is hidden for users without debug mode enabled.`},side:"top",children:(ge,G)=>{var ae=Y(),se=O(ae);Ce(se,(()=>hr.Root),((fe,P)=>{P(fe,{color:"neutral",variant:"soft",size:0,children:(F,ce)=>{var re=w("rolled out");a(F,re)},$$slots:{default:!0}})})),a(ge,ae)},$$slots:{default:!0}})};M(ee,(V=>{t(x).isRolledOut&&V(Se)}));var Ee=c(L,2);U(Ee,{size:1,color:"secondary",children:(V,ge)=>{var G=w();j((()=>de(G,t(x).description))),a(V,G)},$$slots:{default:!0}}),a(D,H)},headerRight:D=>{{let H=z((()=>t(x).isRolledOut||s()||t(x).betaFlagValue||!1)),L=z((()=>(ee=>async Se=>{await N(ee.betaFlag,Se),d.track(bt.WEBVIEW.BETA_FLAG_CHANGED,{flagName:ee.betaFlag,newValue:Se})})(t(x)))),J=z((()=>t(x).isRolledOut?`${t(x).name} (rolled out)`:`Toggle ${t(x).name}`));Tr(D,{get checked(){return t(H)},get onChange(){return t(L)},get disabled(){return s()},size:2,get"aria-label"(){return t(J)}})}},$$slots:{headerLeft:!0,headerRight:!0}})})),a(u,_)};M(S,(u=>{t($).length>0&&u(R)})),a(o,E),Ne(),i()}var bc=y('<div class="c-table-augment svelte-1pcrcvp"><table><!></table></div>'),wc=y("<tbody><!></tbody>"),$c=y("<td><!></td>"),Sc=y("<th><!></th>"),Ec=y("<thead><!></thead>"),kc=y("<tr><!></tr>");const jt={Root:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=le(e,"size",3,"2"),n=le(e,"variant",3,"default"),i=le(e,"overflow",3,"auto"),d=rr(e,["$$slots","$$events","$$legacy","ref","class","size","variant","overflow","children"]);var v=bc(),m=l(v);ir(m,(()=>({class:["c-table-augment__table",e.class],"data-table-augment-size":s(),...d})),void 0,void 0,void 0,"svelte-1pcrcvp");var h=l(m);ut(h,(()=>e.children??Ot)),Zt(m,(p=>r(p)),(()=>r())),j((()=>{ar(v,"data-table-augment-size",s()),ar(v,"data-table-augment-variant",n()),ar(v,"data-table-augment-overflow",i())})),a(o,v),Ne()},Body:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=rr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=wc();ir(n,(()=>({class:["c-table-augment__body",e.class],...s})),void 0,void 0,void 0,"svelte-1hsf04x");var i=l(n);ut(i,(()=>e.children??Ot)),Zt(n,(d=>r(d)),(()=>r())),a(o,n),Ne()},Cell:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=le(e,"wrap",3,!1),n=rr(e,["$$slots","$$events","$$legacy","ref","class","wrap","children"]);var i=$c();ir(i,(()=>({class:["c-table-augment__cell",{"c-table-augment__cell--wrap":s()},e.class],...n})),void 0,void 0,void 0,"svelte-1d6wf9h");var d=l(i);ut(d,(()=>e.children??Ot)),Zt(i,(v=>r(v)),(()=>r())),a(o,i),Ne()},Head:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=rr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Sc();ir(n,(()=>({class:["c-table-augment__head-cell",e.class],...s})),void 0,void 0,void 0,"svelte-652vqj");var i=l(n),d=v=>{var m=Y(),h=O(m);ut(h,(()=>e.children)),a(v,m)};M(i,(v=>{e.children&&v(d)})),Zt(n,(v=>r(v)),(()=>r())),a(o,n),Ne()},Header:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=rr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Ec();ir(n,(()=>({class:["c-table-augment__header",e.class],...s})),void 0,void 0,void 0,"svelte-1rpg4mu");var i=l(n);ut(i,(()=>e.children??Ot)),Zt(n,(d=>r(d)),(()=>r())),a(o,n),Ne()},Row:function(o,e){xe(e,!0);let r=le(e,"ref",15,null),s=rr(e,["$$slots","$$events","$$legacy","ref","class","children"]);var n=kc();ir(n,(()=>({class:["c-table-augment__row",e.class],...s})),void 0,void 0,void 0,"svelte-iivjbh");var i=l(n);ut(i,(()=>e.children??Ot)),Zt(n,(d=>r(d)),(()=>r())),a(o,n),Ne()}};var Cc=["second","minute","hour","day","week","month","year"],Ac=["","","","","","",""],ps={},on=function(o,e){ps[o]=e},ss=[60,60,24,7,365/7/12,12];function Rc(o,e){var r;return(+new Date-+((r=o)instanceof Date?r:!isNaN(r)||/^\d+$/.test(r)?new Date(parseInt(r)):(r=(r||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(r))))/1e3}var Tc=function(o,e,r){return(function(s,n){for(var i=s<0?1:0,d=s=Math.abs(s),v=0;s>=ss[v]&&v<ss.length;v++)s/=ss[v];return(s=Math.floor(s))>((v*=2)==0?9:1)&&(v+=1),n(s,v,d)[i].replace("%s",s.toString())})(Rc(o),(function(s){return ps[s]||ps.en_US})(e))};on("en_US",(function(o,e){if(e===0)return["just now","right now"];var r=Cc[Math.floor(e/2)];return o>1&&(r+="s"),[o+" "+r+" ago","in "+o+" "+r]})),on("zh_CN",(function(o,e){if(e===0)return["",""];var r=Ac[~~(e/2)];return[o+" "+r+"",o+" "+r+""]}));const Ic="/run/augment_secrets/";function jr(o){return o["augment:mount_point"]||null}var ur=(o=>(o.env="env",o.file="file",o))(ur||{});const In=Symbol("secrets-context");function da(){const o=Ir(In);if(!o)throw new Error("SecretsContext not found. Make sure to call createSecretsContext in a parent component.");return o}var xc=y("<!> <!>",1),Nc=y("<!> <!>",1),Mc=y('<div class="c-loading-state svelte-wym0by"><div>Loading secrets...</div></div>'),Pc=y('<div class="c-error-state svelte-wym0by"><div class="c-error-state__title svelte-wym0by">Error Loading Secrets</div> <div class="c-error-state__description svelte-wym0by"> </div></div>'),Oc=y(`<div class="c-empty-state svelte-wym0by"><div class="c-empty-state__title svelte-wym0by">No Secrets Found</div> <div class="c-empty-state__description svelte-wym0by">You haven't created any secrets yet. Secrets allow you to securely store sensitive
        information like API keys, passwords, and tokens that can be used by remote agents and other
        Augment features.</div></div>`),zc=y('<div class="c-empty-state svelte-wym0by"><div class="c-empty-state__title svelte-wym0by">No Results Found</div> <div class="c-empty-state__description svelte-wym0by">Try updating your search.</div></div>'),Uc=y("<!> <!> <!> <!> <!>",1),Lc=y('<div class="c-secret-details svelte-wym0by"><div><!></div> <div><!></div></div>'),Dc=y("<!> <!> <!> <!> <!>",1),Fc=y("<!> <!>",1),Bc=y('<div class="c-secrets-table svelte-wym0by"><!></div>');function Wc(o,e){xe(e,!0);const r=da();er((async()=>{try{r.setLoading(!0),r.setError(null);const h=await e.api.loadSecrets();r.setSecrets(h)}catch(h){const p=h instanceof Error?h.message:"Failed to load secrets";r.setError(p),console.error("Error loading secrets:",h)}finally{r.setLoading(!1)}}));let s=z((()=>[...r.secrets].filter((h=>{if(!r.searchTerm)return!0;const p=r.searchTerm.toLowerCase();if(h.name.toLowerCase().includes(p))return!0;const $=jr(h.tags);return!!($&&$.toLowerCase().includes(p))})).sort(((h,p)=>new Date(p.updated_at??p.created_at).getTime()-new Date(h.updated_at??h.created_at).getTime()))));async function n(h){try{r.deleteSecretOptimistically(h),await e.api.deleteSecret(h)}catch(p){console.error("Failed to delete secret:",p);try{const $=await e.api.loadSecrets();r.setSecrets($)}catch($){console.error("Failed to reload secrets after delete error:",$)}}}var i=Bc(),d=l(i),v=h=>{var p=Mc();a(h,p)},m=h=>{var p=Y(),$=O(p),N=E=>{var b=Pc(),k=c(l(b),2),S=l(k);j((()=>de(S,r.error))),a(E,b)},T=E=>{var b=Y(),k=O(b),S=u=>{var _=Oc();a(u,_)},R=u=>{var _=Y(),f=O(_),A=x=>{var I=zc();a(x,I)},C=x=>{var I=Y(),B=O(I);Ce(B,(()=>jt.Root),((D,H)=>{H(D,{size:"custom",variant:"soft",children:(L,J)=>{var ee=Fc(),Se=O(ee);Ce(Se,(()=>jt.Header),((V,ge)=>{ge(V,{children:(G,ae)=>{var se=Y(),fe=O(se);Ce(fe,(()=>jt.Row),((P,F)=>{F(P,{children:(ce,re)=>{var Fe=Uc(),Be=O(Fe);Ce(Be,(()=>jt.Head),((q,ue)=>{ue(q,{children:(ie,we)=>{var oe=w("Details");a(ie,oe)},$$slots:{default:!0}})}));var je=c(Be,2);Ce(je,(()=>jt.Head),((q,ue)=>{ue(q,{class:"column-type",children:(ie,we)=>{var oe=w("Type");a(ie,oe)},$$slots:{default:!0}})}));var ne=c(je,2);Ce(ne,(()=>jt.Head),((q,ue)=>{ue(q,{class:"column-updated",children:(ie,we)=>{var oe=w("Updated");a(ie,oe)},$$slots:{default:!0}})}));var ye=c(ne,2);Ce(ye,(()=>jt.Head),((q,ue)=>{ue(q,{class:"column-size",children:(ie,we)=>{var oe=w("Size");a(ie,oe)},$$slots:{default:!0}})}));var Oe=c(ye,2);Ce(Oe,(()=>jt.Head),((q,ue)=>{ue(q,{class:"column-actions"})})),a(ce,Fe)},$$slots:{default:!0}})})),a(G,se)},$$slots:{default:!0}})}));var Ee=c(Se,2);Ce(Ee,(()=>jt.Body),((V,ge)=>{ge(V,{children:(G,ae)=>{var se=Y(),fe=O(se);mt(fe,17,(()=>t(s)),(P=>P.name),((P,F)=>{var ce=Y(),re=O(ce);Ce(re,(()=>jt.Row),((Fe,Be)=>{Be(Fe,{children:(je,ne)=>{var ye=Dc(),Oe=O(ye);Ce(Oe,(()=>jt.Cell),((oe,ve)=>{ve(oe,{children:($e,pe)=>{var W=Lc(),Q=l(W),he=l(Q);U(he,{size:1,weight:"medium",children:(Ae,Me)=>{var Re=w();j((We=>de(Re,We)),[()=>jr(t(F).tags)??t(F).name]),a(Ae,Re)},$$slots:{default:!0}});var X=c(Q,2),ke=l(X),Te=Ae=>{bo(Ae,{leftIcon:We=>{me(We,{name:"folder"})},text:We=>{U(We,{size:1,weight:"light",color:"secondary",children:(Ye,ze)=>{var K=w();j((Z=>de(K,`${Ic}${Z??""}`)),[()=>jr(t(F).tags)]),a(Ye,K)},$$slots:{default:!0}})},$$slots:{leftIcon:!0,text:!0}})};M(ke,(Ae=>{jr(t(F).tags)&&Ae(Te)})),a($e,W)},$$slots:{default:!0}})}));var q=c(Oe,2);Ce(q,(()=>jt.Cell),((oe,ve)=>{ve(oe,{class:"column-type  l__table-cell--no-min-width",children:($e,pe)=>{U($e,{size:1,weight:"light",children:(W,Q)=>{var he=Y(),X=O(he);Ce(X,(()=>hr.Root),((ke,Te)=>{Te(ke,{variant:"soft",color:"neutral",size:1,children:(Ae,Me)=>{var Re=Y(),We=O(Re),Ye=K=>{var Z=w("File");a(K,Z)},ze=K=>{var Z=w("EnvVar");a(K,Z)};M(We,(K=>{jr(t(F).tags)?K(Ye):K(ze,!1)})),a(Ae,Re)},$$slots:{default:!0}})})),a(W,he)},$$slots:{default:!0}})},$$slots:{default:!0}})}));var ue=c(q,2);Ce(ue,(()=>jt.Cell),((oe,ve)=>{ve(oe,{class:"column-updated l__table-cell--no-min-width",children:($e,pe)=>{{let W=z((()=>(function(Q){try{return new Date(Q).toLocaleString()}catch{return Q}})(t(F).updated_at)));Ht($e,{get content(){return t(W)},children:(Q,he)=>{U(Q,{size:1,weight:"light",children:(X,ke)=>{var Te=w();j((Ae=>de(Te,Ae)),[()=>(function(Ae){try{return Tc(Ae)}catch{return Ae}})(t(F).updated_at)]),a(X,Te)},$$slots:{default:!0}})},$$slots:{default:!0}})}},$$slots:{default:!0}})}));var ie=c(ue,2);Ce(ie,(()=>jt.Cell),((oe,ve)=>{ve(oe,{class:"column-size  l__table-cell--no-min-width",children:($e,pe)=>{U($e,{size:1,weight:"light",children:(W,Q)=>{var he=w();j((X=>de(he,X)),[()=>{return(X=t(F).value_size_bytes)<1024?`${X} B`:X<1048576?`${(X/1024).toFixed(1)} KB`:`${(X/1048576).toFixed(1)} MB`;var X}]),a(W,he)},$$slots:{default:!0}})},$$slots:{default:!0}})}));var we=c(ie,2);Ce(we,(()=>jt.Cell),((oe,ve)=>{ve(oe,{class:"column-actions  l__table-cell--no-min-width",children:($e,pe)=>{(function(W,Q){xe(Q,!0);let he=le(Q,"handleDeleteSecret",3,(()=>Promise.resolve()));const X=da();let ke=te(void 0);var Te=Y(),Ae=O(Te);Ce(Ae,(()=>ot.Root),((Me,Re)=>{Zt(Re(Me,{children:(We,Ye)=>{var ze=Nc(),K=O(ze);Ce(K,(()=>ot.Trigger),((_e,qe)=>{qe(_e,{children:(He,Ue)=>{Et(He,{variant:"ghost-block",size:1,title:"More",children:(Ie,Ve)=>{me(Ie,{name:"ellipsis",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var Z=c(K,2);Ce(Z,(()=>ot.Content),((_e,qe)=>{qe(_e,{size:1,side:"bottom",align:"start",children:(He,Ue)=>{var Ie=xc(),Ve=O(Ie);{const at=et=>{me(et,{name:"square-pen"})};Ce(Ve,(()=>ot.Item),((et,Pe)=>{Pe(et,{onSelect:()=>{X.editSecret(Q.secret.name,jr(Q.secret.tags)?ur.file:ur.env),t(ke)?.requestClose()},iconLeft:at,children:(tt,ct)=>{var Ze=w("Edit");a(tt,Ze)},$$slots:{iconLeft:!0,default:!0}})}))}var Je=c(Ve,2);{const at=et=>{me(et,{name:"trash-2"})};Ce(Je,(()=>ot.Item),((et,Pe)=>{Pe(et,{onSelect:()=>{he()(Q.secret.name),t(ke)?.requestClose()},color:"error",iconLeft:at,children:(tt,ct)=>{var Ze=w("Delete");a(tt,Ze)},$$slots:{iconLeft:!0,default:!0}})}))}a(He,Ie)},$$slots:{default:!0}})})),a(We,ze)},$$slots:{default:!0}}),(We=>g(ke,We,!0)),(()=>t(ke)))})),a(W,Te),Ne()})($e,{get secret(){return t(F)},handleDeleteSecret:n})},$$slots:{default:!0}})})),a(je,ye)},$$slots:{default:!0}})})),a(P,ce)})),a(G,se)},$$slots:{default:!0}})})),a(L,ee)},$$slots:{default:!0}})})),a(x,I)};M(f,(x=>{r.searchTerm&&t(s).length===0?x(A):x(C,!1)}),!0),a(u,_)};M(k,(u=>{r.secrets.length===0?u(S):u(R,!1)}),!0),a(E,b)};M($,(E=>{r.error?E(N):E(T,!1)}),!0),a(h,p)};M(d,(h=>{r.loading?h(v):h(m,!1)})),a(o,i),Ne()}var qc=y('<div class="c-secret-manager-header__add-secret-buttons-container svelte-lhk1rg"><div class="c-secret-manger-header__add-secret-buttons svelte-lhk1rg"><!> <!></div> <!></div>'),Gc=y('<div class="c-secret-manager-header__search svelte-lhk1rg"><div class="c-secret-manager-header__search-field-container svelte-lhk1rg"><!></div> <!></div>'),Hc=y('<div class="c-secret-manager-header svelte-lhk1rg"><!></div>'),Vc=y('<div class="c-modal-header-content svelte-1jlpdjp"><!> <!></div>'),jc=y("<span></span>"),Jc=y('<div class="c-info-icon svelte-1jlpdjp"><!></div>'),Kc=y('<div class="c-form-field svelte-1jlpdjp"><div class="c-field-label svelte-1jlpdjp"><!> <!></div> <!> <!></div>'),Yc=y('<!> <div class="c-form-field svelte-1jlpdjp"><!> <!> <!></div> <!>',1),Xc=y('<div class="c-modal-footer-content svelte-1jlpdjp"><!> <!></div>');function Zc(o,e){xe(e,!0);const r=da();let s=z((()=>r.editingEnv?.name??null)),n=z((()=>t(s)?r.getSecretByName(t(s)):null)),i=te(""),d=te(""),v=te(null),m=te(null),h=te(!1),p=te(null),$=z((()=>t(s)!==null)),N=z((()=>t($)?"Update Secret":"Create Secret"));const T=/^[A-Z_][A-Z0-9_]*$/,E="Secret name must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.";function b(f){return f.trim()?T.test(f)?r.validateSecretName(f,t(s)??void 0)||null:E:"Required field."}function k(f){return f.length===0?"Required field.":null}pt((()=>{g(i,t(s)??"",!0),g(d,""),g(v,null),g(m,null),g(h,!1),g(p,null)})),pt((()=>{t(i)&&g(v,b(t(i)),!0)})),pt((()=>{t(d)&&g(m,k(t(d)),!0)}));let S=z((()=>t(i).trim()!==""&&t(d).length!==0&&!t(v)&&!t(m)));function R(){r.closeModal()}async function u(){const f=b(t(i)),A=k(t(d));if(g(v,f,!0),g(m,A,!0),!f&&!A){g(h,!0),g(p,null);try{const x=(C=t(d),btoa(unescape(encodeURIComponent(C)))),I={"augment:encoding":"base64"};if(t($)&&t(n)){const B=await e.api.updateSecret({name:t(n).name,value:x,tags:I,description:"",expectedVersion:t(n).version}),D={...t(n),tags:I,updated_at:B.updatedAt,version:B.version,value_size_bytes:B.valueSizeBytes||t(n).value_size_bytes};r.updateSecretOptimistically(D)}else{const B=await e.api.createSecret({name:t(i).trim(),value:x,tags:I,description:""});r.addSecretOptimistically(B)}r.closeModal()}catch(x){g(p,x instanceof Error?x.message:"Failed to submit secret",!0),console.error(`Failed to ${t($)?"update":"create"} secret:`,x)}finally{g(h,!1)}}var C}function _(f){f.key==="Enter"&&t(S)&&!t(h)&&(f.preventDefault(),u())}Ka(o,{show:!0,cardSize:2,maxWidth:"450px",oncancel:R,get preventEscapeClose(){return t(h)},preventBackdropClose:!0,header:x=>{var I=Vc(),B=l(I);U(B,{size:3,weight:"bold",color:"primary",children:(H,L)=>{var J=w();j((()=>de(J,t(s)?`Edit ${t(s)}`:"New Environment Variable"))),a(H,J)},$$slots:{default:!0}});var D=c(B,2);Et(D,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:R,get disabled(){return t(h)},children:(H,L)=>{me(H,{name:"x",size:1})},$$slots:{default:!0}}),a(x,I)},body:x=>{var I=Yc(),B=O(I),D=ge=>{var G=Kc(),ae=l(G),se=l(ae);U(se,{size:2,weight:"medium",children:(re,Fe)=>{var Be=w("Secret Name");a(re,Be)},$$slots:{default:!0}});var fe=c(se,2);{const re=Be=>{var je=jc();je.textContent="Secret name must only contain uppercase letters, numbers, and underscores. It must start with a letter or underscore.",a(Be,je)};let Fe=z((()=>[ga.Hover]));Ht(fe,{get triggerOn(){return t(Fe)},delayDurationMs:300,side:"right",content:re,children:(Be,je)=>{var ne=Jc(),ye=l(ne);me(ye,{name:"info",size:1}),a(Be,ne)},$$slots:{content:!0,default:!0}})}var P=c(ae,2);{let re=z((()=>t(v)?"error":void 0));Pt(P,{placeholder:"Enter name",get disabled(){return t(h)},get color(){return t(re)},onkeydown:_,get value(){return t(i)},set value(Fe){g(i,Fe,!0)}})}var F=c(P,2),ce=re=>{U(re,{size:1,color:"error",children:(Fe,Be)=>{var je=w();j((()=>de(je,t(v)))),a(Fe,je)},$$slots:{default:!0}})};M(F,(re=>{t(v)&&re(ce)})),a(ge,G)};M(B,(ge=>{t(s)===null&&ge(D)}));var H=c(B,2),L=l(H);U(L,{size:2,weight:"medium",children:(ge,G)=>{var ae=w("Secret Value");a(ge,ae)},$$slots:{default:!0}});var J=c(L,2);{let ge=z((()=>t(m)?"error":void 0));Pt(J,{placeholder:"Enter value",get disabled(){return t(h)},get color(){return t(ge)},onkeydown:_,get value(){return t(d)},set value(G){g(d,G,!0)}})}var ee=c(J,2),Se=ge=>{U(ge,{size:1,color:"error",children:(G,ae)=>{var se=w();j((()=>de(se,t(m)))),a(G,se)},$$slots:{default:!0}})};M(ee,(ge=>{t(m)&&ge(Se)}));var Ee=c(H,2),V=ge=>{or(ge,{color:"error",variant:"soft",size:2,icon:ae=>{me(ae,{name:"circle-alert"})},children:(ae,se)=>{var fe=w();j((()=>de(fe,t(p)))),a(ae,fe)},$$slots:{icon:!0,default:!0}})};M(Ee,(ge=>{t(p)&&ge(V)})),a(x,I)},footer:x=>{var I=Xc(),B=l(I);Ke(B,{variant:"ghost",color:"neutral",get disabled(){return t(h)},onclick:R,children:(H,L)=>{var J=w("Cancel");a(H,J)},$$slots:{default:!0}});var D=c(B,2);{let H=z((()=>!t(S)||t(h)));Ke(D,{variant:"solid",color:"accent",get disabled(){return t(H)},get loading(){return t(h)},onclick:u,children:(L,J)=>{var ee=w();j((()=>de(ee,t(N)))),a(L,ee)},$$slots:{default:!0}})}a(x,I)},$$slots:{header:!0,body:!0,footer:!0}}),Ne()}var Qc=y('<div class="c-modal-header-content svelte-1q9v4po"><!> <!></div>'),ed=y('<div class="c-drag-drop-container svelte-1q9v4po"><div role="button" tabindex="0"><!> <!> <!> <!> <input type="file" hidden=""/></div> <!></div>'),td=y("<!> <!>",1),rd=y('<div class="c-file-badge-wrapper svelte-1q9v4po"><!></div>'),ad=y('<div class="c-form-fields svelte-1q9v4po"><div class="c-form-field svelte-1q9v4po"><!> <div class="c-mount-path-input svelte-1q9v4po"><!> <!></div> <!></div> <div class="c-form-field svelte-1q9v4po"><!> <!></div></div>'),sd=y("<!> <!>",1),nd=y('<div class="c-modal-footer-content"><!> <!></div>');function id(o,e){xe(e,!0);const r=da();let s=z((()=>r.editingFile?.name??null)),n=z((()=>r.editingFile?.mountPath??null)),i=z((()=>r.editingFile?.fileName??null)),d=z((()=>t(s)?r.getSecretByName(t(s)):null)),v=te(""),m=te(null),h=te(null),p=te(null),$=te(null),N=te(null),T=te(!1),E=te(null),b=te(!1),k=te(!1),S=z((()=>t(s)!==null)),R=z((()=>{let G=t(v).trim().replace(/^\/+/,"");return G=G.replace(/\/+/g,"/"),G=G.replace(/\/+$/,""),G})),u=z((()=>t(R)||"")),_=z((()=>{const G=t(S)?t(m)||t(p):t(m);return t(v).trim()!==""&&G&&!t($)&&!t(N)})),f=z((()=>{const G=t(m)?.name??t(p);return G&&G.length>30?`${G.slice(0,27)}...`:G})),A=z((()=>t(S)?`Edit: ${t(s)}`:"New Mounted File")),C=z((()=>t(S)?"Update Secret":"Create Secret"));const x=`file-input-${Date.now()}`;let I=te(null);function B(G){return G.trim()?/^[a-zA-Z0-9._\-/]+$/.test(G)?null:"Mount path can only contain letters, numbers, dots, dashes, underscores, and slashes.":"Required field."}async function D(G){if(g(N,null),G.size>16384)g(N,"File size exceeds 16KB limit.");else try{const ae=await(function(se){return new Promise(((fe,P)=>{const F=new FileReader;F.onload=ce=>{const re=ce.target?.result;if(typeof re=="string"){const Fe=re.indexOf(",");fe(Fe>=0?re.slice(Fe+1):re)}else P(new Error("Failed to read file as base64"))},F.onerror=()=>{P(new Error("Failed to read file"))},F.readAsDataURL(se)}))})(G);g(m,G,!0),g(h,ae,!0),t(S)||t(v).trim()||g(v,G.name,!0),t(S)&&t(k)&&(g(p,G.name,!0),g(k,!1))}catch{g(N,"Failed to read file. Please try again.")}}function H(G){G.preventDefault(),g(b,!0)}function L(G){G.preventDefault(),g(b,!1)}function J(G){G.preventDefault(),g(b,!1);const ae=G.dataTransfer?.files;ae?.[0]&&D(ae[0])}function ee(){t(I)?.click()}function Se(G){const ae=G.target.files;ae?.[0]&&D(ae[0])}function Ee(){t(S)?g(k,!0):(g(m,null),g(h,null),g(v,""))}async function V(){if(g($,B(t(v)),!0),!t(m)&&!t(p))return void g(N,"Please select a file.");const G=r.validateSecretName(t(u),t(s)??void 0);if(G)g(N,G,!0);else if(!t($)&&(t(h)||t(p))){g(T,!0),g(E,null);try{const ae={"augment:mount_point":t(v).trim()};if(t(h)&&(ae["augment:encoding"]="base64"),t(S)&&t(d)){const se=await e.api.updateSecret({name:t(d).name,...t(h)&&{value:t(h)},tags:ae,description:"",expectedVersion:t(d).version}),fe={...t(d),tags:ae,updated_at:se.updatedAt,version:se.version,value_size_bytes:se.valueSizeBytes||t(d).value_size_bytes};r.updateSecretOptimistically(fe)}else{const se=await e.api.createSecret({name:t(u),value:t(h)??"",tags:ae,description:""});r.addSecretOptimistically(se)}r.closeModal()}catch(ae){g(E,ae instanceof Error?ae.message:"Failed to submit secret",!0),console.error(`Failed to ${t(S)?"update":"create"} file secret:`,ae)}finally{g(T,!1)}}}function ge(){r.closeModal()}pt((()=>{t(v)&&g($,B(t(v)),!0)})),pt((()=>{t(S)?(g(v,t(n)??"",!0),g(p,t(i)??null,!0)):(g(v,""),g(p,null)),g(m,null),g(h,null),g($,null),g(N,null),g(T,!1),g(E,null),g(b,!1),g(k,!1)})),Ka(o,{show:!0,cardSize:2,maxWidth:"450px",oncancel:ge,get preventEscapeClose(){return t(T)},preventBackdropClose:!0,header:fe=>{var P=Qc(),F=l(P);U(F,{size:3,weight:"bold",color:"primary",children:(re,Fe)=>{var Be=w();j((()=>de(Be,t(A)))),a(re,Be)},$$slots:{default:!0}});var ce=c(F,2);Et(ce,{variant:"ghost",color:"neutral",size:1,title:"Close",onclick:ge,get disabled(){return t(T)},children:(re,Fe)=>{me(re,{name:"x",size:1})},$$slots:{default:!0}}),a(fe,P)},body:fe=>{var P=sd(),F=O(P),ce=je=>{var ne=ed(),ye=l(ne);let Oe;var q=l(ye);me(q,{name:"upload",size:2});var ue=c(q,2);U(ue,{size:2,weight:"medium",children:(pe,W)=>{var Q=w("Drag & Drop");a(pe,Q)},$$slots:{default:!0}});var ie=c(ue,2);U(ie,{size:1,color:"neutral",children:(pe,W)=>{var Q=w("or");a(pe,Q)},$$slots:{default:!0}});var we=c(ie,2);Ke(we,{variant:"solid",color:"neutral",onclick:ee,children:(pe,W)=>{var Q=w("Browse Files");a(pe,Q)},$$slots:{default:!0}});var oe=c(we,2);oe.__change=Se,Zt(oe,(pe=>g(I,pe)),(()=>t(I)));var ve=c(ye,2),$e=pe=>{U(pe,{size:1,color:"error",children:(W,Q)=>{var he=w();j((()=>de(he,t(N)))),a(W,he)},$$slots:{default:!0}})};M(ve,(pe=>{t(N)&&pe($e)})),j((()=>{Oe=xt(ye,1,"c-drag-drop-zone svelte-1q9v4po",null,Oe,{"is-dragging":t(b)}),ar(oe,"id",x),oe.disabled=t(T)})),Kt("dragover",ye,H),Kt("dragleave",ye,L),Kt("drop",ye,J),a(je,ne)},re=je=>{var ne=ad(),ye=l(ne),Oe=l(ye);U(Oe,{size:2,color:"neutral",children:(he,X)=>{var ke=w("Mount Path");a(he,ke)},$$slots:{default:!0}});var q=c(Oe,2),ue=l(q);U(ue,{size:1,class:"c-mount-path-prefix",color:"secondary",children:(he,X)=>{var ke=w("/run/augment_secrets/");a(he,ke)},$$slots:{default:!0}});var ie=c(ue,2);{let he=z((()=>t($)?"error":void 0));Pt(ie,{placeholder:"filename.txt",get disabled(){return t(T)},get color(){return t(he)},get value(){return t(v)},set value(X){g(v,X,!0)}})}var we=c(q,2),oe=he=>{U(he,{size:1,color:"error",children:(X,ke)=>{var Te=w();j((()=>de(Te,t($)))),a(X,Te)},$$slots:{default:!0}})};M(we,(he=>{t($)&&he(oe)}));var ve=c(ye,2),$e=l(ve),pe=he=>{var X=rd(),ke=l(X);Ke(ke,{variant:"surface",color:"neutral",size:1,onclick:Ee,iconLeft:Ae=>{var Me=td(),Re=O(Me);me(Re,{name:"file",class:"c-file-badge-icon-default"});var We=c(Re,2);me(We,{name:"refresh-ccw",class:"c-file-badge-icon-hover"}),a(Ae,Me)},children:(Ae,Me)=>{var Re=w();j((()=>de(Re,t(f)))),a(Ae,Re)},$$slots:{iconLeft:!0,default:!0}}),a(he,X)};M($e,(he=>{(t(m)||t(p))&&he(pe)}));var W=c($e,2),Q=he=>{U(he,{size:1,color:"error",children:(X,ke)=>{var Te=w();j((()=>de(Te,t(N)))),a(X,Te)},$$slots:{default:!0}})};M(W,(he=>{t(N)&&he(Q)})),a(je,ne)};M(F,(je=>{!t(S)&&!t(m)||t(S)&&t(k)?je(ce):je(re,!1)}));var Fe=c(F,2),Be=je=>{or(je,{color:"error",variant:"soft",size:2,icon:ye=>{me(ye,{name:"circle-alert"})},children:(ye,Oe)=>{var q=w();j((()=>de(q,t(E)))),a(ye,q)},$$slots:{icon:!0,default:!0}})};M(Fe,(je=>{t(E)&&je(Be)})),a(fe,P)},footer:fe=>{var P=Y(),F=O(P),ce=re=>{var Fe=nd(),Be=l(Fe);Ke(Be,{variant:"ghost",color:"neutral",get disabled(){return t(T)},onclick:ge,children:(ne,ye)=>{var Oe=w("Cancel");a(ne,Oe)},$$slots:{default:!0}});var je=c(Be,2);{let ne=z((()=>!t(_)||t(T)));Ke(je,{variant:"solid",color:"accent",get disabled(){return t(ne)},get loading(){return t(T)},onclick:V,children:(ye,Oe)=>{var q=w();j((()=>de(q,t(C)))),a(ye,q)},$$slots:{default:!0}})}a(re,Fe)};M(F,(re=>{(t(S)&&!t(k)||!t(S)&&t(m))&&re(ce)})),a(fe,P)},$$slots:{header:!0,body:!0,footer:!0}}),Ne()}function ms(o){if(!o)return"";const e=1e3*Number(o.seconds)+Math.floor(o.nanos/1e6);return new Date(e).toISOString()}function ln(o){if(!o)throw new Error("protoSecret is undefined or null");return{name:o.name||"",tags:o.tags||{},description:o.description||"",created_at:ms(o.createdAt),updated_at:ms(o.updatedAt),version:o.version||"",value_size_bytes:o.valueSizeBytes||0}}yr(["change"]);const ns=new class{async loadSecrets(){return((await(await kt(Sa)).listUserSecrets({includeValues:!1})).secrets||[]).filter((e=>e!=null)).map((e=>ln(e)))}async createSecret(o){const e=await kt(Sa),r=await e.upsertUserSecret({name:o.name,value:o.value,tags:o.tags,description:o.description});if(!r.secret)throw new Error("Failed to create secret: no secret returned");return ln(r.secret)}async updateSecret(o){const e=await kt(Sa),r=await e.upsertUserSecret({name:o.name,value:o.value,tags:o.tags,description:o.description,expectedVersion:o.expectedVersion??""});if(!r.secret)throw new Error("Failed to update secret: no secret returned");return{updatedAt:ms(r.secret.updatedAt),version:r.secret.version||"",valueSizeBytes:o.value?new TextEncoder().encode(o.value).length:void 0}}async deleteSecret(o){if(!(await(await kt(Sa)).deleteUserSecret({name:o})).deleted)throw new Error("Failed to delete secret")}};var od=y('<div class="c-secret-manager-container"><!> <div class="l-section svelte-jt0bx6"><!></div> <div class="l-section svelte-jt0bx6"><!></div> <!> <!></div>');const ld=function(o,e){xe(e,!1);const r=(function(){let $=te(At([])),N=te(!0),T=te(null),E=te(null),b=te(null),k=te(null),S=te("");const R={get secrets(){return t($)},get loading(){return t(N)},get error(){return t(T)},get visibleModal(){return t(E)},get editingEnv(){return t(b)},get editingFile(){return t(k)},get searchTerm(){return t(S)},set searchTerm(u){g(S,u,!0)},addSecretOptimistically(u){g($,[u,...t($)],!0)},updateSecretOptimistically(u){const _=t($).findIndex((f=>f.name===u.name));_!==-1&&(t($)[_]=u,g($,[...t($)],!0))},deleteSecretOptimistically(u){g($,t($).filter((_=>_.name!==u)),!0)},validateSecretName:(u,_)=>t($).find((f=>f.name===u&&f.name!==_))?"A secret with this name already exists.":null,getSecretByName:u=>t($).find((_=>_.name===u)),setSecrets(u){g($,u,!0)},setLoading(u){g(N,u,!0)},setError(u){g(T,u,!0)},launchAddSecretEnv(){g(E,ur.env,!0)},launchAddSecretFile(){g(E,ur.file,!0)},editSecret(u,_){const f=t($).find((A=>A.name===u));if(_===ur.env)g(b,{name:u},!0),g(E,ur.env,!0);else{const A=f?.tags["augment:mount_point"]||"";g(k,{name:u,mountPath:A,fileName:u},!0),g(E,ur.file,!0)}},closeModal(){g(E,null),g(b,null),g(k,null)}};return Dr(In,R),R})();Zr();var s=od(),n=l(s);Rt(n,{level:1,children:($,N)=>{var T=w("Secrets Manager");a($,T)},$$slots:{default:!0}});var i=c(n,2);(function($,N){xe(N,!0);const T=da();let E=te(!1),b=te(void 0);pt((()=>{t(E)&&t(b)&&t(b).focus()}));var k=Hc(),S=l(k),R=_=>{var f=qc(),A=l(f),C=l(A);Ke(C,{variant:"soft",size:1,get onclick(){return T.launchAddSecretEnv},iconLeft:D=>{me(D,{name:"plus"})},children:(D,H)=>{var L=w("Environment Variable");a(D,L)},$$slots:{iconLeft:!0,default:!0}});var x=c(C,2);Ke(x,{variant:"soft",size:1,get onclick(){return T.launchAddSecretFile},iconLeft:D=>{me(D,{name:"plus"})},children:(D,H)=>{var L=w("Mounted File");a(D,L)},$$slots:{iconLeft:!0,default:!0}});var I=c(A,2);Ke(I,{onclick:()=>g(E,!0),variant:"ghost",iconLeft:D=>{me(D,{name:"search"})},$$slots:{iconLeft:!0}}),a(_,f)},u=_=>{var f=Gc(),A=l(f),C=l(A);Pt(C,{class:"c-secret-manager-header__search-field",placeholder:"Search secrets...",size:1,variant:"surface",get value(){return T.searchTerm},set value(I){T.searchTerm=I},get textInput(){return t(b)},set textInput(I){g(b,I,!0)}});var x=c(A,2);Ke(x,{onclick:()=>{g(E,!1),T.searchTerm=""},variant:"ghost",iconLeft:B=>{me(B,{name:"x"})},$$slots:{iconLeft:!0}}),a(_,f)};M(S,(_=>{t(E)?_(u,!1):_(R)})),a($,k),Ne()})(l(i),{});var d=c(i,2);Wc(l(d),{get api(){return ns}});var v=c(d,2),m=$=>{Zc($,{get api(){return ns}})};M(v,($=>{r.visibleModal===ur.env&&$(m)}));var h=c(v,2),p=$=>{id($,{get api(){return ns}})};M(h,($=>{r.visibleModal===ur.file&&$(p)})),a(o,s),Ne()};var cd=y("<div><!></div>");function Kr(o,e){var r=cd();let s;var n=l(r);ut(n,(()=>e.children??Ot)),j((()=>s=xt(r,1,mr(["c-card",e.class]),"svelte-1166lei",s,{"c-card--interactive":e.interactive}))),a(o,r)}var dd=y('<div class="l-onboarding-banner-layout__content l-onboarding-banner-layout__content--left svelte-fiwp9y"><!></div>'),ud=y('<div class="l-onboarding-banner-layout__content-divider svelte-fiwp9y"></div>'),vd=y('<div class="l-onboarding-banner-layout__content l-onboarding-banner-layout__content--right svelte-fiwp9y"><!></div>'),hd=y('<div><div class="l-onboarding-banner-layout__header hidden-when-empty svelte-fiwp9y"><!> <!></div> <div class="l-onboarding-banner-layout__content-container svelte-fiwp9y"><!> <!> <!></div></div>');class gd{constructor(e=!1,r=3e3){this.autoRotate=e,this.autoRotateInterval=r}#e=te(0);get _currentIndex(){return t(this.#e)}set _currentIndex(e){g(this.#e,e,!0)}#t=te(0);get _previousIndex(){return t(this.#t)}set _previousIndex(e){g(this.#t,e,!0)}#r=te(0);get _totalSlides(){return t(this.#r)}set _totalSlides(e){g(this.#r,e,!0)}_itemCount=0;_autoRotateTimer=null;_isPaused=!1;_isLocked=!1;get currentIndex(){return this._currentIndex}get previousIndex(){return this._previousIndex}get direction(){return this._previousIndex===this._totalSlides-1&&this._currentIndex===0?1:this._previousIndex===0&&this._currentIndex===this._totalSlides-1?-1:this._currentIndex>this._previousIndex?1:-1}get totalSlides(){return this._totalSlides}get isPaused(){return this._isPaused}get isLocked(){return this._isLocked}goToSlide(e){e>=0&&e<this._totalSlides&&(this._previousIndex=this._currentIndex,this._currentIndex=e)}goToPrevious(){this._previousIndex=this._currentIndex,this._currentIndex=this._currentIndex>0?this._currentIndex-1:this._totalSlides-1}goToNext(){this._previousIndex=this._currentIndex,this._currentIndex=(this._currentIndex+1)%this._totalSlides}registerItem(){const e=this._itemCount;return this._itemCount++,this._totalSlides=this._itemCount,e}unregisterItem(e){this._itemCount=Math.max(0,this._itemCount-1),this._totalSlides=this._itemCount,this._currentIndex>=this._totalSlides&&this._totalSlides>0&&(this._currentIndex=this._totalSlides-1)}startAutoRotate(){!this.autoRotate||this._isPaused||this._isLocked||(this.stopAutoRotate(),this._autoRotateTimer=window.setInterval((()=>{this._totalSlides>1&&this.goToNext()}),this.autoRotateInterval))}stopAutoRotate(){this._autoRotateTimer!==null&&(clearInterval(this._autoRotateTimer),this._autoRotateTimer=null)}pauseAutoRotate(){this._isPaused=!0,this.stopAutoRotate()}resumeAutoRotate(){this._isPaused=!1,this.startAutoRotate()}lockAutoRotate(){this._isLocked=!0,this.stopAutoRotate()}unlockAutoRotate(){this._isLocked=!1,this.startAutoRotate()}destroy(){this.stopAutoRotate()}}const xn="slider";function fs(){const o=Ir(xn);if(!o)throw new Error("Slider components must be used within a Slider.Root component");return o}var pd=y('<div role="region" aria-label="Content slider" aria-live="polite"><!></div>'),md=y('<div role="tabpanel"><!></div>'),fd=y("<button></button>"),yd=y("<div></div>");yr(["click"]);var _d=y("<div><!></div>");const Ca={Root:function(o,e){xe(e,!0);let r=le(e,"autoRotate",3,!0),s=le(e,"autoRotateInterval",3,5e3),n=le(e,"state",15);const i=(d=new gd(r(),s()),Dr(xn,d));var d;pt((()=>{n(i)})),er((()=>(r()&&i.totalSlides>1&&i.startAutoRotate(),()=>{i.destroy()}))),pt((()=>{r()&&i.totalSlides>1?i.startAutoRotate():i.stopAutoRotate()}));var v=pd(),m=l(v),h=p=>{var $=Y(),N=O($);ut(N,(()=>e.children)),a(p,$)};M(m,(p=>{e.children&&p(h)})),j((()=>xt(v,1,mr(["c-slider",e.class]),"svelte-1qw0t4l"))),Kt("mouseenter",v,(()=>i.pauseAutoRotate())),Kt("mouseleave",v,(()=>i.resumeAutoRotate())),a(o,v),Ne()},Content:function(o,e){var r=_d(),s=l(r),n=i=>{var d=Y(),v=O(d);ut(v,(()=>e.children)),a(i,d)};M(s,(i=>{e.children&&i(n)})),j((()=>xt(r,1,mr(["c-onboarding-banner__slider-content",e.class]),"svelte-gnngto"))),a(o,r)},Item:function(o,e){xe(e,!0);const r=fs();let s=te(-1);er((()=>(g(s,r.registerItem(),!0),()=>{t(s)!==-1&&r.unregisterItem(t(s))})));const n=z((()=>t(s)===r.currentIndex)),i=z((()=>({duration:400,x:20*r.direction,opacity:0,delay:100}))),d=z((()=>({duration:200,opacity:0,x:-t(i).x})));var v=Y(),m=O(v),h=p=>{var $=md(),N=l($),T=E=>{var b=Y(),k=O(b);ut(k,(()=>e.children)),a(E,b)};M(N,(E=>{e.children&&E(T)})),j((()=>xt($,1,mr(["c-slider-item",e.class]),"svelte-jcoy6s"))),lr(1,$,(()=>Sr),(()=>t(i))),lr(2,$,(()=>Sr),(()=>t(d))),a(p,$)};M(m,(p=>{t(n)&&p(h)})),a(o,v),Ne()},Pagination:function(o,e){xe(e,!0);const r=fs();var s=Y(),n=O(s),i=d=>{var v=yd();mt(v,21,(()=>Array(r.totalSlides)),fn,((m,h,p)=>{var $=fd();let N;$.__click=()=>r.goToSlide(p),ar($,"aria-label",`Go to slide ${p+1}`),j((()=>{N=xt($,1,"c-slider-pagination__indicator svelte-1x17dqd",null,N,{"c-slider-pagination__indicator--active":p===r.currentIndex}),ar($,"aria-current",p===r.currentIndex?"true":"false")})),a(m,$)})),j((()=>xt(v,1,mr(["c-slider-pagination",e.class]),"svelte-1x17dqd"))),a(d,v)};M(n,(d=>{r.totalSlides>1&&d(i)})),a(o,s),Ne()}},Nn=[{label:Pr.REDIS,description:"Real-time data platform for building fast apps",iconName:"redis",command:"uvx",args:["--from","redis-mcp-server@latest","redis-mcp-server","--url"],userInput:[{label:"Redis connection URL",description:"Enter your connection URL (redis://localhost:6379/0)",placeholder:"rediss://<USERNAME>:<PASSWORD>@<HOST>:<PORT>?ssl_cert_reqs=required&ssl_ca_certs=<PATH_TO_CERT>",correspondingArg:"--url",type:"argument"}]},{label:Pr.MONGODB,description:"Optimize database queries and performance.",iconName:"mongodb",command:"npx",args:["-y","mongodb-mcp-server","--connectionString"],userInput:[{label:"MongoDB Connection String",description:"Enter your MongoDB connection string",placeholder:"mongodb://username:password@host:port/database",correspondingArg:"--connectionString",type:"argument"}]},{label:Pr.CIRCLECI,description:"Debug builds and improve CI/CD pipelines.",iconName:"circleci",command:"npx",args:["-y","@circleci/mcp-server-circleci"],userInput:[{label:"CircleCI Token",description:"Enter your CircleCI token",placeholder:"YOUR_CIRCLE_CI_TOKEN",type:"environmentVariable",envVarName:"CIRCLECI_TOKEN"},{label:"Base URL",description:"Enter the base URL for your CircleCI instance",placeholder:"https://circleci.com",defaultValue:"https://circleci.com",type:"environmentVariable",envVarName:"CIRCLECI_BASE_URL"}]},{label:Pr.HEROKU,description:"Interact with the Heroku Platform.",iconName:"heroku",command:"heroku",args:["mcp:start"],userInput:[]},{label:Pr.RAILWAY,description:"Railway simplifies your infrastructure stack from servers to observability with a single, scalable, easy-to-use platform.",iconName:"railway",command:"npx -y @railway/mcp-server"},{label:Pr.CONVEX,description:"The backend platform that keeps your app in sync.",iconName:"convex",command:"npx -y convex@latest mcp start"},{label:Pr.SNOWFLAKE,description:"Snowflake Cortex AI, object management, SQL orchestration, and semantic views.",iconName:"snowflake",command:"uvx",args:["snowflake-labs-mcp","--service-config-file"],userInput:[{label:"Service Config File Path",description:"Path to your Snowflake MCP configuration YAML file",placeholder:"/path/to/config.yaml",correspondingArg:"--service-config-file",type:"argument"}]},{label:"Context 7",description:"Package documentation",iconName:"mcp",command:"npx -y @upstash/context7-mcp@latest"},{label:"Playwright",description:"Browser automation",iconName:"playwright",command:"npx -y @playwright/mcp@latest"},{label:"Sequential thinking",description:"Think through complex problems step-by-step.",iconName:"mcp",command:"npx -y @modelcontextprotocol/server-sequential-thinking"}],bd={slow:20,normal:40,fast:60};var wd=y('<div class="c-onboarding-banner__mcp-item svelte-yqy5n1"><!> <!> <!></div>'),$d=y('<button class="headless svelte-yqy5n1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),Sd=y('<div class="c-onboarding-banner__mcp-list-items svelte-yqy5n1"></div>'),Ed=y('<div class="c-onboarding-banner__slide svelte-yqy5n1"><!> <!> <!></div>');function kd(o,e){xe(e,!0);const[r,s]=Ut(),n=Ar(),i=sr(),d=Xa().getServers(),v=z((()=>new Map(De(d,"$allServers",r).map((S=>[S.name,S])))));let m=te(void 0),h=null;function p(){h?.pause()}function $(){h?.resume()}function N(){i.track(bt.WEBVIEW.HOME_ONBOARDING_MCP_SETUP_CLICKED,{}),n(fr("mcp-servers"))}er((()=>(h=(function(S){let R=null,u=1;const _=bd[S.speed??"normal"],f=co(0);let A=null;function C(){S.container&&(I(),f.set(S.container.scrollLeft),A=f.on("change",(B=>{S.container&&(S.container.scrollLeft=B)})),x())}function x(){if(!S.container)return;const{scrollWidth:B,clientWidth:D,scrollLeft:H}=S.container,L=B-D;if(L<=0)return;const J=H;f.set(J),J>=L-1?u=-1:J<=1&&(u=1);const ee=u===1?L:0,Se=Math.abs(ee-J);R=uo(f,ee,{duration:Se/_,ease:"linear",onComplete:()=>{u*=-1,x()}})}function I(){R?.stop(),A?.()}return{start:C,stop:I,pause:function(){R&&R.pause()},resume:function(){R?S.container&&(f.set(S.container.scrollLeft),R.stop(),x()):C()},destroy:function(){I()}}})({container:t(m)}),h.start(),()=>{h?.destroy()})));var T=Ed(),E=l(T);U(E,{size:3,weight:"medium",color:"primary",block:!0,children:(S,R)=>{var u=w("Integrate quick with Easy MCPs");a(S,u)},$$slots:{default:!0}});var b=c(E,2);vo(b,{get containerElement(){return t(m)},set containerElement(S){g(m,S,!0)},children:(S,R)=>{var u=Sd();mt(u,21,(()=>Nn),(_=>_.label),((_,f)=>{var A=$d();A.__click=N;var C=l(A);la(C,(()=>({"--card-vertical-padding":"var(--ds-spacing-2)"}))),Kr(C.lastChild,{interactive:!0,children:(x,I)=>{var B=wd(),D=l(B),H=ee=>{$n(ee,{status:"success",content:"Connected"})};M(D,(ee=>{t(v).has(t(f).label)&&ee(H)}));var L=c(D,2);me(L,{get name(){return t(f).iconName},size:4});var J=c(L,2);U(J,{size:2,weight:"medium",children:(ee,Se)=>{var Ee=w();j((()=>de(Ee,t(f).label))),a(ee,Ee)},$$slots:{default:!0}}),a(x,B)}}),a(_,A)})),Kt("mouseenter",u,p),Kt("mouseleave",u,$),a(S,u)},$$slots:{default:!0}});var k=c(b,2);Ke(k,{size:2,variant:"ghost-block",onclick:N,iconRight:R=>{me(R,{name:"arrow-right"})},children:(R,u)=>{var _=w("Set up MCP Servers");a(R,_)},$$slots:{iconRight:!0,default:!0}}),a(o,T),Ne(),s()}yr(["click"]);var Cd=y('<div class="c-onboarding-banner__slide svelte-l4999b"><div class="c-onboarding-banner__slide-title svelte-l4999b"><!> <!></div> <!> <div class="c-onboarding-banner__slide-actions svelte-l4999b"><!> <!></div></div>');function Ad(o,e){xe(e,!0);const[r,s]=Ut(),n=Ar(),i=Ir(Oa.key),d=sr(),v=i.getDisplayableTools(),m=z((()=>De(v,"$displayableTools",r).find((C=>C.displayName==="GitHub"))));let h=te(!1),p=te(null);const $=fs();function N(){if(d.track(bt.WEBVIEW.HOME_ONBOARDING_GITHUB_CONNECT_CLICKED,{isAlreadyConnected:t(m)?.isConfigured??!1}),t(m)&&!t(m).isConfigured)if(t(h))g(h,!1),t(p)&&(clearTimeout(t(p)),g(p,null));else{g(h,!0);const C=t(m).authUrl||"";It.postMessage({type:_t.toolConfigStartOAuth,data:{authUrl:C,toolName:"github"}}),i.startPolling(),g(p,setTimeout((()=>{g(h,!1),g(p,null)}),6e4),!0)}else n(fr("services"))}pt((()=>{t(m)?.isConfigured&&t(h)&&(g(h,!1),t(p)&&(clearTimeout(t(p)),g(p,null)))})),pt((()=>{t(h)?$.lockAutoRotate():$.autoRotate&&$.isLocked&&$.unlockAutoRotate()}));var T=Cd(),E=l(T),b=l(E);me(b,{name:"github",size:3});var k=c(b,2);U(k,{size:3,weight:"medium",color:"primary",children:(C,x)=>{var I=w();j((()=>de(I,t(m)?.isConfigured?"GitHub Connected":"Connect to GitHub"))),a(C,I)},$$slots:{default:!0}});var S=c(E,2);U(S,{size:2,block:!0,children:(C,x)=>{var I=Y(),B=O(I),D=L=>{var J=w(`Your GitHub account is connected. You can now commit code faster and use GitHub features
      seamlessly.`);a(L,J)},H=L=>{var J=w(`Configure your account to commit code faster. Augment also offers more out of the box
      services.`);a(L,J)};M(B,(L=>{t(m)?.isConfigured?L(D):L(H,!1)})),a(C,I)},$$slots:{default:!0}});var R=c(S,2),u=l(R),_=C=>{Ke(C,{size:2,variant:"soft",color:"success",onclick:()=>n(fr("services")),iconLeft:I=>{me(I,{name:"check"})},children:(I,B)=>{var D=w("Connected");a(I,D)},$$slots:{iconLeft:!0,default:!0}})},f=C=>{var x=Y(),I=O(x),B=H=>{Ke(H,{size:2,variant:"soft",onclick:N,iconLeft:J=>{Rr(J,{size:1,useCurrentColor:!0})},children:(J,ee)=>{var Se=w("Connecting");a(J,Se)},$$slots:{iconLeft:!0,default:!0}})},D=H=>{Ke(H,{size:2,variant:"soft",onclick:N,children:(L,J)=>{var ee=w("Connect Now");a(L,ee)},$$slots:{default:!0}})};M(I,(H=>{t(h)?H(B):H(D,!1)}),!0),a(C,x)};M(u,(C=>{t(m)?.isConfigured?C(_):C(f,!1)}));var A=c(u,2);Ke(A,{size:2,variant:"ghost",onclick:function(){d.track(bt.WEBVIEW.HOME_ONBOARDING_MORE_SERVICES_CLICKED,{}),n(fr("services"))},iconRight:x=>{me(x,{name:"arrow-right"})},children:(x,I)=>{var B=w("More Services");a(x,B)},$$slots:{iconRight:!0,default:!0}}),a(o,T),Ne(),s()}var Rd=y('<div class="c-onboarding-banner__slide svelte-qdtf6g"><div class="c-onboarding-banner__slide-title svelte-qdtf6g"><!> <!></div> <!> <div class="c-onboarding-banner__slide-actions svelte-qdtf6g"><!> <!></div></div>');function Td(o,e){xe(e,!1);const r=sr();Zr();var s=Rd(),n=l(s),i=l(n);me(i,{name:"square-terminal",size:3});var d=c(i,2);U(d,{size:3,weight:"medium",color:"primary",children:($,N)=>{var T=w("Have you tried Augment CLI?");a($,T)},$$slots:{default:!0}});var v=c(n,2);U(v,{size:2,block:!0,children:($,N)=>{var T=w("Use Augments context engine anywhere you like to code, including your workflow in the terminal.");a($,T)},$$slots:{default:!0}});var m=c(v,2),h=l(m);Ke(h,{size:2,variant:"soft",onclick:function(){r.track(bt.WEBVIEW.HOME_ONBOARDING_CLI_CLICKED,{}),It.postMessage({type:_t.runCommandInTerminal,data:{command:"npm install -g @augmentcode/auggie"}})},children:($,N)=>{var T=w("Try CLI");a($,T)},$$slots:{default:!0}});var p=c(h,2);Ke(p,{size:2,variant:"ghost",onclick:function(){r.track(bt.WEBVIEW.HOME_ONBOARDING_CLI_LEARN_MORE_CLICKED,{}),It.postMessage({type:_t.augmentLink,data:"https://docs.augmentcode.com/cli/overview"})},iconRight:N=>{me(N,{name:"arrow-up-right"})},children:(N,T)=>{var E=w("Learn More");a(N,E)},$$slots:{iconRight:!0,default:!0}}),a(o,s),Ne()}var Id=y('<div class="c-onboarding-banner__left-content"><!></div>'),xd=y('<div class="c-onboarding-banner__slide svelte-1nrdfis"><!></div>'),Nd=y('<!> <div class="c-onboarding-banner__slider-pagination svelte-1nrdfis"><!></div>',1),Md=y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Pd(o,e){xe(e,!0);const r=sr();let s=te(void 0),n=te(void 0);const i=[{id:"github",component:Ad},{id:"mcps",component:kd},{id:"cli",component:Td}],d=new Set;pt((()=>{if(t(s)&&t(s).currentIndex!==t(n)){const h=t(s).currentIndex,p=i[h].id;p&&!d.has(p)&&(d.add(p),r.track(bt.WEBVIEW.HOME_ONBOARDING_SLIDE_VIEWED,{slideId:p})),g(n,h,!0)}}));var v=Md(),m=O(v);{const h=N=>{U(N,{size:2,color:"secondary",children:(T,E)=>{var b=w("Setup");a(T,b)},$$slots:{default:!0}})},p=N=>{var T=Id(),E=l(T);U(E,{size:8,color:"primary",children:(b,k)=>{var S=w("Get the most out of Augment!");a(b,S)},$$slots:{default:!0}}),a(N,T)},$=N=>{var T=Y(),E=O(T);Ce(E,(()=>Ca.Root),((b,k)=>{k(b,{autoRotate:!0,autoRotateInterval:5e3,get state(){return t(s)},set state(S){g(s,S,!0)},children:(S,R)=>{var u=Nd(),_=O(u);Ce(_,(()=>Ca.Content),((C,x)=>{x(C,{children:(I,B)=>{var D=Y(),H=O(D);mt(H,17,(()=>i),(L=>L.id),((L,J)=>{var ee=Y(),Se=O(ee);Ce(Se,(()=>Ca.Item),((Ee,V)=>{V(Ee,{children:(ge,G)=>{var ae=xd(),se=l(ae);Ce(se,(()=>t(J).component),((fe,P)=>{P(fe,{})})),j((()=>ar(ae,"data-slide-id",t(J).id))),a(ge,ae)},$$slots:{default:!0}})})),a(L,ee)})),a(I,D)},$$slots:{default:!0}})}));var f=c(_,2),A=l(f);Ce(A,(()=>Ca.Pagination),((C,x)=>{x(C,{})})),a(S,u)},$$slots:{default:!0}})})),a(N,T)};la(m,(()=>({"--left-content-flex":1,"--right-content-flex":1.5}))),(function(N,T){var E=hd(),b=l(E),k=l(b),S=D=>{var H=Y(),L=O(H);ut(L,(()=>T.header)),a(D,H)};M(k,(D=>{T.header&&D(S)}));var R=c(k,2),u=D=>{Et(D,{size:1,variant:"ghost",color:"neutral",get onclick(){return T.onClose},"aria-label":"Close onboarding banner",children:(H,L)=>{me(H,{name:"x",size:2})},$$slots:{default:!0}})};M(R,(D=>{T.onClose&&D(u)}));var _=c(b,2),f=l(_),A=D=>{var H=dd(),L=l(H);ut(L,(()=>T.leftContent)),a(D,H)};M(f,(D=>{T.leftContent&&D(A)}));var C=c(f,2),x=D=>{var H=ud();a(D,H)};M(C,(D=>{T.leftContent&&T.rightContent&&D(x)}));var I=c(C,2),B=D=>{var H=vd(),L=l(H);ut(L,(()=>T.rightContent)),a(D,H)};M(I,(D=>{T.rightContent&&D(B)})),j((()=>xt(E,1,mr(["l-onboarding-banner-layout",T.class]),"svelte-fiwp9y"))),a(N,E)})(m.lastChild,{get onClose(){return e.onClose},header:h,leftContent:p,rightContent:$})}a(o,v),Ne()}var Od=y("<div><!></div>"),zd=y('<div aria-label="Proportional bar chart"></div>'),Ud=y('<button class="c-home-page__languages-list-item svelte-c48uya"><!></button>'),Ld=y('<div class="c-home-page__languages svelte-c48uya"><!> <!> <div class="c-home-page__languages-list svelte-c48uya"></div></div>');function Dd(o,e){xe(e,!0);const r=le(e,"languages",19,(()=>[])),s=["iris","blue","teal","plum","orange","bronze"];function n(v,m){return v==="Other"?"neutral":s[m%s.length]}let i=z((()=>r().map(((v,m)=>({label:v.name,percentage:v.percentage,color:n(v.name,m),tooltipText:Ii(v.fileCount,"File")}))))),d=te(void 0);Kr(o,{children:(v,m)=>{var h=Ld(),p=l(h);U(p,{size:1,children:(T,E)=>{var b=w("Languages");a(T,b)},$$slots:{default:!0}});var $=c(p,2);(function(T,E){xe(E,!0);let b=le(E,"highlightSegmentIndex",7);var k=zd();mt(k,23,(()=>E.segments),(S=>S.label),((S,R,u)=>{const _=z((()=>b()===t(u)));var f=Od(),A=()=>b(t(u)),C=()=>b(void 0);ir(f,(I=>({class:"proportional-bar-chart__segment",onmouseenter:A,onmouseleave:C,...I,[ri]:{"proportional-bar-chart__segment--highlighted":t(_)},[ti]:{width:`${t(R).percentage??""}%`}})),[()=>Sn(t(R).color)],void 0,void 0,"svelte-1dfcr2k");var x=l(f);Ht(x,{get content(){return t(R).tooltipText},get open(){return t(_)},class:"proportional-bar-chart__segment-tooltip"}),a(S,f)})),j((()=>xt(k,1,mr(["proportional-bar-chart",E.class]),"svelte-1dfcr2k"))),a(T,k),Ne()})($,{get segments(){return t(i)},get highlightSegmentIndex(){return t(d)}});var N=c($,2);mt(N,23,(()=>t(i)),(T=>T.label),((T,E,b)=>{var k=Ud(),S=l(k);Ce(S,(()=>hr.Root),((R,u)=>{u(R,{get color(){return t(E).color},size:1,variant:"soft",children:(_,f)=>{var A=w();j((C=>de(A,`${t(E).label??""}
            ${C??""}%`)),[()=>t(E).percentage.toFixed(1)]),a(_,A)},$$slots:{default:!0}})})),Kt("mouseenter",k,(()=>g(d,t(b),!0))),Kt("mouseleave",k,(()=>g(d,void 0))),a(T,k)})),a(v,h)}}),Ne()}class Fd{_asyncMsgSender;constructor(e){this._asyncMsgSender=e??new qa(It.postMessage)}async getHomeState(e){try{return(await this._asyncMsgSender.sendToSidecar({type:Ea.getHomeStateRequest,data:{workspaceId:e}},5e3)).data||{}}catch(r){return console.error("Failed to load home state",r),{}}}async saveHomeState(e,r){try{await this._asyncMsgSender.sendToSidecar({type:Ea.saveHomeStateRequest,data:{workspaceId:e,state:r}},5e3)}catch(s){console.error("Failed to save home state",s)}}async saveCodebaseSummary(e,r){await this.saveHomeState(e,{codebaseSummary:{summary:r,generatedAt:Date.now()}})}async dismissOnboardingBanner(e){await this.saveHomeState(e,{onboardingBannerDismissed:!0})}async dismissFeatureBanner(e){await this.saveHomeState(e,{featureBannersDismissed:!0})}async getWorkspaceInfo(){try{return(await this._asyncMsgSender.sendToSidecar({type:Ea.getWorkspaceInfoRequest},3e4)).data}catch(e){return console.error("Failed to get workspace info",e),{workspaces:[]}}}async getWorkspaceLanguages(e){try{return(await this._asyncMsgSender.sendToSidecar({type:Ea.getWorkspaceLanguagesRequest,data:{workspaceId:e}},3e4)).data}catch(r){return console.error("Failed to get workspace languages",r),{languages:[]}}}}let is;function Mn(){return is||(is=new Fd),is}var Bd=y("<!> <!>",1),Wd=y('<div class="c-workspace-switcher svelte-1ua62ky"><!></div>');function qd(o,e){xe(e,!0);let r=le(e,"formatName",3,(d=>d??"")),s=te(void 0);var n=Wd(),i=l(n);Ce(i,(()=>ot.Root),((d,v)=>{Zt(v(d,{children:(m,h)=>{var p=Bd(),$=O(p);Ce($,(()=>ot.Trigger),((T,E)=>{E(T,{children:(b,k)=>{Et(b,{variant:"ghost-block",color:"neutral",size:2,children:(S,R)=>{var u=Y(),_=O(u);Ce(_,(()=>ot.Chevron),((f,A)=>{A(f,{size:3})})),a(S,u)},$$slots:{default:!0}})},$$slots:{default:!0}})}));var N=c($,2);Ce(N,(()=>ot.Content),((T,E)=>{E(T,{align:"start",children:(b,k)=>{var S=Y(),R=O(S);mt(R,17,(()=>e.workspaces),(u=>u.id),((u,_)=>{var f=Y(),A=O(f);{const C=I=>{var B=Y(),D=O(B),H=L=>{me(L,{name:"check",size:1})};M(D,(L=>{t(_).id===e.currentWorkspace?.id&&L(H)})),a(I,B)};let x=z((()=>t(_).id===e.currentWorkspace?.id));Ce(A,(()=>ot.Item),((I,B)=>{B(I,{get highlight(){return t(x)},onSelect:()=>(function(D){t(s)?.requestClose(),e.onSwitch(D)})(t(_)),iconRight:C,children:(D,H)=>{var L=w();j((J=>de(L,J)),[()=>r()(t(_).name)]),a(D,L)},$$slots:{iconRight:!0,default:!0}})}))}a(u,f)})),a(b,S)},$$slots:{default:!0}})})),a(m,p)},$$slots:{default:!0}}),(m=>g(s,m,!0)),(()=>t(s)))})),a(o,n),Ne()}var Gd=y('<div class="c-user-dropdown__content svelte-9gooby"><div class="c-user-dropdown__account svelte-9gooby"><!> <!></div> <div class="c-user-dropdown__actions svelte-9gooby"><!> <!></div></div>'),Hd=y("<!> <!>",1),Vd=y('<div class="c-user-dropdown svelte-9gooby"><!></div>'),jd=y('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Rules</div>'),Jd=y('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><!></div>',1),Kd=y('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Guidelines</div>'),Yd=y('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><!></div>',1),Xd=y('<div class="c-features-banner__card-header svelte-dbbwnh"><!> Memories</div>'),Zd=y('<!> <div class="c-features-banner__card-body"><!></div> <div class="c-features-banner__card-footer svelte-dbbwnh"><label class="c-features-banner__card-footer-toggle svelte-dbbwnh"><!></label></div>',1),Qd=y('<div class="c-features-banner svelte-dbbwnh"><div class="c-features-banner__header svelte-dbbwnh"><!> <!></div> <div class="c-features-banner__content svelte-dbbwnh"><!> <!> <!></div></div>');function eu(o,e){xe(e,!0);let r=te(!1);const s=new qa(It.postMessage),n=sr();er((async()=>{try{const b=await s.sendToSidecar({type:Ma.getMemorySettings},5e3);g(r,b.data?.enabled??!1,!0)}catch(b){console.error("Failed to load memory settings:",b)}}));const i=Ar();async function d(b){g(r,b,!0),n.track(bt.WEBVIEW.HOME_FEATURE_BANNER_MEMORIES_TOGGLED,{enabled:b});try{await s.sendToSidecar({type:Ma.updateMemorySettings,data:{enabled:b}},5e3)}catch(k){console.error("Failed to update memory settings:",k),g(r,!b)}}function v(){n.track(bt.WEBVIEW.HOME_FEATURE_BANNER_RULES_DOCS_CLICKED,{}),It.postMessage({type:_t.augmentLink,data:"https://docs.augmentcode.com/setup-augment/guidelines#importing-rules"})}var m=Qd(),h=l(m),p=l(h);U(p,{size:2,block:!0,nowrap:!0,children:(b,k)=>{var S=w("Agent Customization");a(b,S)},$$slots:{default:!0}});var $=c(p,2);Et($,{variant:"ghost-block",color:"neutral",size:1,onclick:function(){n.track(bt.WEBVIEW.HOME_FEATURE_BANNER_DISMISSED,{}),e.onClose?.()},children:(b,k)=>{me(b,{name:"x",size:2})},$$slots:{default:!0}});var N=c(h,2),T=l(N);Kr(T,{class:"c-features-banner__card",children:(b,k)=>{var S=Jd(),R=O(S);U(R,{size:3,color:"primary",children:(C,x)=>{var I=jd(),B=l(I);me(B,{name:"download",size:3}),a(C,I)},$$slots:{default:!0}});var u=c(R,2),_=l(u);U(_,{size:2,children:(C,x)=>{var I=w("Import existing rules from alternate AI coding agents.");a(C,I)},$$slots:{default:!0}});var f=c(u,2),A=l(f);Ke(A,{variant:"ghost-block",color:"neutral",size:1,onclick:v,iconRight:x=>{me(x,{name:"arrow-up-right"})},children:(x,I)=>{var B=w("Learn How");a(x,B)},$$slots:{iconRight:!0,default:!0}}),a(b,S)}});var E=c(T,2);Kr(E,{class:"c-features-banner__card",children:(b,k)=>{var S=Yd(),R=O(S);U(R,{size:3,color:"primary",children:(C,x)=>{var I=Kd(),B=l(I);me(B,{name:"album",size:3}),a(C,I)},$$slots:{default:!0}});var u=c(R,2),_=l(u);U(_,{size:2,children:(C,x)=>{var I=w("Provide custom rules in your natural language.");a(C,I)},$$slots:{default:!0}});var f=c(u,2),A=l(f);Ke(A,{variant:"soft",color:"neutral",size:1,onclick:()=>(n.track(bt.WEBVIEW.HOME_FEATURE_BANNER_GUIDELINES_CLICKED,{}),void i(fr("rules"))),children:(C,x)=>{var I=w("Add Rules & Guidelines");a(C,I)},$$slots:{default:!0}}),a(b,S)}}),Kr(c(E,2),{class:"c-features-banner__card",children:(b,k)=>{var S=Zd(),R=O(S);U(R,{size:3,color:"primary",children:(C,x)=>{var I=Xd(),B=l(I);me(B,{name:"archive",size:3}),a(C,I)},$$slots:{default:!0}});var u=c(R,2),_=l(u);U(_,{size:2,children:(C,x)=>{var I=w("Automatically add, remove and refine agent memories.");a(C,I)},$$slots:{default:!0}});var f=c(u,2),A=l(f);Tr(l(A),{size:1,get checked(){return t(r)},onChange:d,children:(C,x)=>{U(C,{size:1,color:"primary",children:(I,B)=>{var D=w("Collect memories");a(I,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(b,S)}}),a(o,m),Ne()}var tu=y('<div class="c-indexing-progress svelte-ubctwf"><div class="c-indexing-progress__header svelte-ubctwf"><div class="c-indexing-progress__spin-icon svelte-ubctwf"><!></div> <!></div> <!> <!></div>'),ru=y("<div><!></div>"),au=y("<div><!></div>");function su(o,e){xe(e,!0);const r=()=>De(v,"$syncProgress",s),[s,n]=Ut(),i=sr(),d=Mn(),v=xi(),m=Ni();let h=te(""),p=te(null);const $=z((()=>r()?.status===$r.running||r()?.status===$r.longRunning));async function N(S){try{const R=i.generateProjectOverview();for await(const u of R)u.response_text&&g(h,t(h)+u.response_text);t(h)&&(d.saveCodebaseSummary(S,t(h)),i.track(bt.WEBVIEW.HOME_CODEBASE_SUMMARY_GENERATED,{summaryLength:t(h).length}))}catch(R){console.error("Failed to generate codebase summary:",R),g(h,"Error generating summary. Please try again later.")}}pt((()=>{g(h,""),g(p,null),(async function(S,R){if(R)return void g(h,R,!0);const u=await(async function(){const _=r();if(_?.status===$r.done)return{isDone:!0,isInitialIndexing:_.isInitialIndexing};if(_?.status===$r.running||_?.status===$r.longRunning)return{isDone:!1,isInitialIndexing:_.isInitialIndexing};try{const f=await kt(Wt),A=await f.getIndexingStatus(Ya);return{isDone:A.state===Mi.DONE,isInitialIndexing:A.isInitialIndexing}}catch(f){return console.error("Failed to get indexing status:",f),{isDone:!0,isInitialIndexing:!1}}})();u.isDone||!u.isInitialIndexing?N(S):g(p,S,!0)})(e.workspaceId,e.cachedSummary)})),pt((()=>{if(r()?.status===$r.done&&t(p)){const S=t(p);g(p,null),N(S)}}));var T=Y(),E=O(T),b=S=>{var R=ru(),u=l(R);Ce(u,(()=>Eo.Root),((_,f)=>{f(_,{children:(A,C)=>{So(A,{get markdown(){return t(h)}})},$$slots:{default:!0}})})),lr(1,R,(()=>Sr),(()=>({duration:250,y:-3,opacity:0}))),a(S,R)},k=S=>{var R=Y(),u=O(R),_=A=>{var C=au(),x=l(C);{let I=z((()=>r()?.indeterminate??!0));(function(B,D){var H=tu(),L=l(H),J=l(L),ee=l(J);me(ee,{name:"refresh-ccw",size:2});var Se=c(J,2);U(Se,{size:2,weight:"medium",children:(G,ae)=>{var se=w("Indexing your codebase...");a(G,se)},$$slots:{default:!0}});var Ee=c(L,2);so(Ee,{get value(){return D.percentage},get indeterminate(){return D.indeterminate}});var V=c(Ee,2),ge=G=>{U(G,{size:1,color:"secondary",children:(ae,se)=>{var fe=w();j((()=>de(fe,`${D.percentage??""}% complete`))),a(ae,fe)},$$slots:{default:!0}})};M(V,(G=>{D.indeterminate||G(ge)})),a(B,H)})(x,{get percentage(){return De(m,"$syncProgressPercentage",s)},get indeterminate(){return t(I)}})}lr(1,C,(()=>Sr),(()=>({duration:250,y:-3,opacity:0}))),a(A,C)},f=A=>{U(A,{size:2,weight:"medium",block:!0,children:(C,x)=>{var I=w("Generating summary...");a(C,I)},$$slots:{default:!0}})};M(u,(A=>{t($)?A(_):A(f,!1)}),!0),a(S,R)};M(E,(S=>{t(h).length?S(b):S(k,!1)})),a(o,T),Ne(),n()}var nu=y('<div class="c-home-page__breadcrumbs svelte-1hp5ry3"><!> <div class="c-home-page__top-right-actions svelte-1hp5ry3"><!> <!></div></div>'),iu=y('<div class="c-home-page__workspace-header-dropdown svelte-1hp5ry3"><!></div>'),ou=y('<div class="c-home-page__stats-card-header svelte-1hp5ry3"><!> <!></div> <div class="c-home-page__stats-card-body svelte-1hp5ry3"><!></div>',1),lu=y('<div class="c-home-page__onboarding-banner svelte-1hp5ry3"><!></div>'),cu=y('<div class="c-home-page__feature-tabs svelte-1hp5ry3"><!></div>'),du=y('<div class="c-home-page__languages svelte-1hp5ry3"><!></div>'),uu=y('<div class="c-home-page__content svelte-1hp5ry3"><div class="c-home-page__section-header svelte-1hp5ry3"><!></div> <!> <div class="c-home-page__section-content svelte-1hp5ry3"><!></div></div>'),vu=y('<div class="c-home-page"><!> <div class="c-home-page__header svelte-1hp5ry3"><div class="c-home-page__header-left svelte-1hp5ry3"><div class="c-home-page__workspace-header svelte-1hp5ry3"><!> <!></div></div> <div class="c-home-page__header-right"><div class="c-home-page__stats svelte-1hp5ry3"></div></div></div> <!> <!> <!></div>');function cn(o,e){xe(e,!0);const[r,s]=Ut(),n=Ar(),i=Ir(hs),d=z((()=>De(i,"$sharedAppStore",r)?.state?.threadCount));function v(){x.track(bt.WEBVIEW.HOME_MANAGE_SUBSCRIPTION_CLICKED,{}),It.postMessage({type:_t.augmentLink,data:"https://app.augmentcode.com/account"})}function m(){x.track(bt.WEBVIEW.HOME_USER_LOGOUT_CLICKED,{}),e.onSignOut()}let h=te(At([])),p=te(void 0),$=te(At([])),N=z((()=>({trackedFiles:t(p)?.stats?.trackedFiles??0,totalThreads:t(d)??t(p)?.stats?.totalThreads??0}))),T=z((()=>H(t(p)?.name)||"")),E=z((()=>t(p)?.id??"default")),b=te(null),k=te(!1),S=te(!1),R=z((()=>t(h).length>1));const u=[{icon:"folders",value:0,label:"Files",key:"trackedFiles"},{icon:"wand-sparkles",value:0,label:"Threads",key:"totalThreads"}],_=Mn(),f=nr("enableDebugFeatures");function A(ne){ne.id!==t(p)?.id&&(x.track(bt.WEBVIEW.HOME_WORKSPACE_SWITCHED,{workspaceCount:t(h).length}),g(b,null),g($,[],!0),g(p,ne,!0),C(ne))}async function C(ne){(async function(Oe){try{const q=await kt(Wt),ue=_n(Oi,{workspaceId:Oe}),ie=await q.getWorkspaceLanguages(ue);g($,ie.languages,!0)}catch(q){console.error("Failed to load workspace languages",q)}})(ne.id);const ye=await _.getHomeState(ne.id);g(k,ye.onboardingBannerDismissed??!1,!0),g(S,ye.featureBannersDismissed??!1,!0),g(b,ye.codebaseSummary?.summary,!0)}const x=sr();async function I(){const ne=await(async function(){try{const ye=await kt(Wt),Oe=await ye.getWorkspaceInfo(Ya);return g(h,Oe.workspaces,!0),Oe.workspaces[0]}catch(ye){console.error("Failed to load workspace info",ye)}})();g(p,ne,!0),ne&&C(ne)}function B(){x.track(bt.WEBVIEW.HOME_ONBOARDING_BANNER_DISMISSED,{}),g(k,!0),_.dismissOnboardingBanner(t(E))}function D(){x.track(bt.WEBVIEW.HOME_FEATURE_BANNER_DISMISSED,{}),g(S,!0),_.dismissFeatureBanner(t(E))}function H(ne){return ne?.split(/[_-]/).join(" ")??""}async function L(){t(h).length!==0&&(await Promise.all(t(h).map((ne=>_.saveHomeState(ne.id,{codebaseSummary:{summary:"",generatedAt:0},onboardingBannerDismissed:!1,featureBannersDismissed:!1})))),g(b,null),I())}er((()=>{x.track(bt.WEBVIEW.HOME_VIEW_DISPLAYED,{}),I()}));const J={duration:350,y:-3,opacity:0},ee={duration:250,axis:"y",scale:.8};var Se=vu();Kt("message",va,(function(ne){if(ne.data?.type===_t.wsContextSourceFoldersChanged||ne.data?.type===_t.wsContextFolderContentsChanged)I();else if(ne.data?.type===_t.sourceFoldersSyncStatus){const ye=ne.data.data;n(Pi(ye))}}));var Ee=l(Se);bn(Ee,{target:"#settings-header-portal",children:(ne,ye)=>{var Oe=nu(),q=l(Oe);U(q,{size:2,color:"secondary",block:!0,children:(oe,ve)=>{var $e=w("Project Home");a(oe,$e)},$$slots:{default:!0}});var ue=c(q,2),ie=l(ue),we=oe=>{Ht(oe,{content:"Reset home page state",children:(ve,$e)=>{Et(ve,{variant:"ghost-block",color:"neutral",size:2,onclick:L,children:(pe,W)=>{me(pe,{name:"refresh-ccw"})},$$slots:{default:!0}})},$$slots:{default:!0}})};M(ie,(oe=>{De(f,"$enableDebugFeatures",r)&&oe(we)})),(function(oe,ve){xe(ve,!0);let $e=te(void 0);function pe(){t($e)?.requestClose(),ve.onLogout()}function W(){t($e)?.requestClose(),ve.onManageSubscription?.()}var Q=Vd(),he=l(Q);Ce(he,(()=>ot.Root),((X,ke)=>{Zt(ke(X,{children:(Te,Ae)=>{var Me=Hd(),Re=O(Me);Ce(Re,(()=>ot.Trigger),((Ye,ze)=>{ze(Ye,{children:(K,Z)=>{Et(K,{variant:"ghost-block",color:"neutral",size:2,children:(_e,qe)=>{me(_e,{name:"user-round",size:3})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var We=c(Re,2);Ce(We,(()=>ot.Content),((Ye,ze)=>{ze(Ye,{align:"end",children:(K,Z)=>{var _e=Gd(),qe=l(_e),He=l(qe);U(He,{size:2,weight:"medium",color:"primary",block:!0,children:(Pe,tt)=>{var ct=w("Current Account");a(Pe,ct)},$$slots:{default:!0}});var Ue=c(He,2),Ie=Pe=>{U(Pe,{size:2,color:"secondary",children:(tt,ct)=>{var Ze=w();j((()=>de(Ze,ve.userEmail))),a(tt,Ze)},$$slots:{default:!0}})};M(Ue,(Pe=>{ve.userEmail&&Pe(Ie)}));var Ve=c(qe,2),Je=l(Ve);Ke(Je,{size:2,variant:"soft",color:"neutral",onclick:pe,children:(Pe,tt)=>{var ct=w("Logout");a(Pe,ct)},$$slots:{default:!0}});var at=c(Je,2),et=Pe=>{Ke(Pe,{size:2,variant:"ghost-block",color:"neutral",onclick:W,children:(tt,ct)=>{var Ze=w("Manage Subscription");a(tt,Ze)},$$slots:{default:!0}})};M(at,(Pe=>{ve.onManageSubscription&&Pe(et)})),a(K,_e)},$$slots:{default:!0}})})),a(Te,Me)},$$slots:{default:!0}}),(Te=>g($e,Te,!0)),(()=>t($e)))})),a(oe,Q),Ne()})(c(ie,2),{get userEmail(){return e.userEmail},onLogout:m,onManageSubscription:v}),a(ne,Oe)},$$slots:{default:!0}});var V=c(Ee,2),ge=l(V),G=l(ge),ae=l(G);Rt(ae,{level:1,capitalize:!0,marginBottom:0,children:(ne,ye)=>{var Oe=w();j((()=>de(Oe,t(T)))),a(ne,Oe)},$$slots:{default:!0}});var se=c(ae,2),fe=ne=>{var ye=iu();qd(l(ye),{get workspaces(){return t(h)},get currentWorkspace(){return t(p)},onSwitch:A,formatName:H}),a(ne,ye)};M(se,(ne=>{t(R)&&ne(fe)}));var P=c(ge,2),F=l(P);mt(F,21,(()=>u),(ne=>ne.label),((ne,ye)=>{Kr(ne,{children:(Oe,q)=>{var ue=ou(),ie=O(ue),we=l(ie);me(we,{get name(){return t(ye).icon},size:1});var oe=c(we,2);U(oe,{size:1,children:(pe,W)=>{var Q=w();j((()=>de(Q,t(ye).label))),a(pe,Q)},$$slots:{default:!0}});var ve=c(ie,2),$e=l(ve);U($e,{size:8,children:(pe,W)=>{no(pe,{get value(){return t(N)[t(ye).key]},willChange:!0})},$$slots:{default:!0}}),a(Oe,ue)}})}));var ce=c(V,2),re=ne=>{var ye=lu();Pd(l(ye),{onClose:B}),lr(5,ye,(()=>Sr),(()=>J)),lr(2,ye,(()=>rn),(()=>ee)),a(ne,ye)};M(ce,(ne=>{t(k)||ne(re)}));var Fe=c(ce,2),Be=ne=>{var ye=cu();eu(l(ye),{onClose:D}),lr(5,ye,(()=>Sr),(()=>J)),lr(2,ye,(()=>rn),(()=>ee)),a(ne,ye)};M(Fe,(ne=>{t(S)||ne(Be)}));var je=c(Fe,2);wo(je,(()=>t(E)),(ne=>{var ye=uu(),Oe=l(ye);Rt(l(Oe),{level:2,children:(ve,$e)=>{var pe=w("Codebase");a(ve,pe)},$$slots:{default:!0}});var q=c(Oe,2),ue=ve=>{var $e=du();Dd(l($e),{get languages(){return t($)}}),lr(1,$e,(()=>Sr),(()=>({duration:350,y:-3,opacity:0}))),a(ve,$e)};M(q,(ve=>{t($).length&&ve(ue)}));var ie=c(q,2),we=l(ie),oe=ve=>{su(ve,{get workspaceId(){return t(E)},get cachedSummary(){return t(b)}})};M(we,(ve=>{t(b)!==null&&ve(oe)})),a(ne,ye)})),a(o,Se),Ne(),s()}var hu=y("<!> ",1),gu=y('<div class="c-sidebar-menu__item-unselectable svelte-1wb34mv"><!></div>'),pu=y("<div><!></div>"),mu=y('<ul class="c-sidebar-menu__section-items svelte-1wb34mv"></ul>'),fu=y("<li><!> <!></li>"),yu=y('<div class="c-sidebar-menu__section-icon-placeholder svelte-1wb34mv"></div>'),_u=y('<div class="c-sidebar-menu__section-label svelte-1wb34mv"><!> <span> </span> <!></div>'),bu=y('<div class="c-sidebar-menu__section svelte-1wb34mv"><!> <ul class="c-sidebar-menu__section-items svelte-1wb34mv"></ul></div>'),wu=y('<nav class="c-sidebar-menu svelte-1wb34mv"></nav>'),$u=y('<button class="c-breadcrumbs__item-button svelte-77ccva"> </button>'),Su=y('<a class="c-breadcrumbs__item-button svelte-77ccva"> </a>'),Eu=y('<div class="c-breadcrumbs__item-text svelte-77ccva"> </div>'),ku=y('<div class="c-breadcrumbs__separator svelte-77ccva"><!></div>'),Cu=y('<li class="c-breadcrumbs__item svelte-77ccva"><!> <!></li>'),Au=y('<ol class="c-breadcrumbs svelte-77ccva"></ol>');yr(["click"]);class os{static CONTEXT_KEY="augment-drawer";_open;_onOpenChange;constructor(e={}){this._open=$t(e.open??!1),this._onOpenChange=e.onOpenChange}get open(){return this._open}isOpen(){return Jr(this._open)}setOpen(e){this._open.set(e),this._onOpenChange?.(e)}syncOpen(e){this._open.set(e)}setOnOpenChange(e){this._onOpenChange=e}}yr(["click","keydown"]);var Ru=y('<div class="l-drawer-overlay svelte-1l644kb"><div role="dialog" tabindex="-1"><!></div></div>');yr(["click","keydown"]);const dn={Root:function(o,e){xe(e,!0);let r=le(e,"open",3,!1),s=le(e,"context",27,(()=>At(new os)));(function(d){Dr(os.CONTEXT_KEY,d)})(s()),pt((()=>{r()!==s().isOpen()&&s().syncOpen(!!r())})),pt((()=>{s().setOnOpenChange(e.onOpenChange)}));var n=Y(),i=O(n);ut(i,(()=>e.children??Ot)),a(o,n),Ne()},Content:function(o,e){xe(e,!0);const r=()=>De(d,"$open",s),[s,n]=Ut(),i=Ir(os.CONTEXT_KEY),{open:d}=i;function v(){i.isOpen()&&i.setOpen(!1)}const m={duration:200,easing:ko},h={left:{x:-64},right:{x:64},top:{y:-64},bottom:{y:64}},p=z((()=>({...m,...h[e.position]})));var $=Y();Kt("keydown",va,(E=>{r()&&E.key==="Escape"&&v()}));var N=O($),T=E=>{var b=Ru();b.__click=v;var k=l(b);k.__click=R=>{R.stopPropagation()},k.__keydown=R=>{R.stopPropagation()};var S=l(k);ut(S,(()=>e.children??Ot)),j((()=>xt(k,1,`l-drawer-content l-drawer-content__${e.position}`,"svelte-1l644kb"))),lr(3,k,(()=>Sr),(()=>t(p))),lr(3,b,(()=>$o),(()=>({duration:200}))),a(E,b)};M(N,(E=>{r()&&E(T)})),a(o,$),Ne(),n()}},Tu=Pa((o=>o.settings.currentSection));Pa((o=>o.settings.previousSection)),Pa((o=>o.settings.previousSection!==void 0));const Iu=Pa((o=>o.settings.drawerOpen));var xu=y('<div class="l-settings-layout__sidebar l-settings-layout__sidebar--drawer svelte-17gwyr9"><!> <!></div>'),Nu=y('<div class="l-settings-layout__sidebar svelte-17gwyr9"><!></div>'),Mu=y('<div class="l-settings-layout svelte-17gwyr9"><!> <div class="l-settings-layout__main svelte-17gwyr9"><div class="l-settings-layout_content svelte-17gwyr9"><div class="l-settings-layout__main-header svelte-17gwyr9"><!> <div class="l-settings-layout__main-header-content svelte-17gwyr9" id="settings-header-portal"><!></div></div> <!></div></div></div>'),Pu=y("<!> <!>",1),Ou=y(' <span class="support-string svelte-1xynlc1"> </span>',1),zu=y('<span class="name"> </span> <span class="support-string svelte-1xynlc1"> </span>',1),Uu=y("<!> <!>",1),Lu=y('<div class="terminal-settings svelte-1xynlc1"><!> <div class="shell-selector svelte-1xynlc1"><!> <!></div> <div class="startup-script-container svelte-1xynlc1"><!> <!></div></div>');function Du(o,e){xe(e,!0);let r=le(e,"supportedShells",19,(()=>[])),s=le(e,"startupScript",15),n=te(void 0),i=z((()=>{return e.selectedShell?(E=e.selectedShell,r().find((b=>b.friendlyName===E))):void 0;var E}));var d=Lu(),v=l(d);Rt(v,{level:1,children:(E,b)=>{var k=w("Terminal");a(E,k)},$$slots:{default:!0}});var m=c(v,2),h=l(m);U(h,{size:1,children:(E,b)=>{var k=w("Shell:");a(E,k)},$$slots:{default:!0}});var p=c(h,2);Ce(p,(()=>ot.Root),((E,b)=>{Zt(b(E,{children:(k,S)=>{var R=Uu(),u=O(R);Ce(u,(()=>ot.Trigger),((f,A)=>{A(f,{children:(C,x)=>{{const I=D=>{me(D,{name:"chevron-down"})};let B=z((()=>r().length===0));Ke(C,{size:1,variant:"outline",color:"neutral",get disabled(){return t(B)},iconRight:I,children:(D,H)=>{var L=Y(),J=O(L),ee=Ee=>{var V=Ou(),ge=O(V),G=c(ge),ae=l(G);j((()=>{de(ge,`${t(i).friendlyName??""} `),de(ae,`(${t(i).supportString??""})`)})),a(Ee,V)},Se=Ee=>{var V=Y(),ge=O(V),G=se=>{var fe=w("No shells available");a(se,fe)},ae=se=>{var fe=w("Select a shell");a(se,fe)};M(ge,(se=>{r().length===0?se(G):se(ae,!1)}),!0),a(Ee,V)};M(J,(Ee=>{t(i)&&r().length>0?Ee(ee):Ee(Se,!1)})),a(D,L)},$$slots:{iconRight:!0,default:!0}})}},$$slots:{default:!0}})}));var _=c(u,2);Ce(_,(()=>ot.Content),((f,A)=>{A(f,{side:"bottom",align:"start",children:(C,x)=>{var I=Y(),B=O(I),D=L=>{var J=Y(),ee=O(J);mt(ee,17,r,(Se=>Se.friendlyName),((Se,Ee)=>{var V=Y(),ge=O(V);{let G=z((()=>e.selectedShell===t(Ee).friendlyName));Ce(ge,(()=>ot.Item),((ae,se)=>{se(ae,{onSelect:()=>{e.onShellSelect(t(Ee).friendlyName),t(n)?.requestClose()},get highlight(){return t(G)},children:(fe,P)=>{var F=zu(),ce=O(F),re=l(ce),Fe=c(ce,2),Be=l(Fe);j((()=>{de(re,t(Ee).friendlyName),de(Be,`(${t(Ee).supportString??""})`)})),a(fe,F)},$$slots:{default:!0}})}))}a(Se,V)})),a(L,J)},H=L=>{var J=Y(),ee=O(J);Ce(ee,(()=>ot.Label),((Se,Ee)=>{Ee(Se,{children:(V,ge)=>{var G=w("No shells available");a(V,G)},$$slots:{default:!0}})})),a(L,J)};M(B,(L=>{r().length>0?L(D):L(H,!1)})),a(C,I)},$$slots:{default:!0}})})),a(k,R)},$$slots:{default:!0}}),(k=>g(n,k,!0)),(()=>t(n)))}));var $=c(m,2),N=l($);U(N,{size:1,children:(E,b)=>{var k=w("Start-up script: Code to run wherever a new terminal is opened");a(E,k)},$$slots:{default:!0}});var T=c(N,2);Ja(T,{onchange:function(E){const b=E.target;e.onStartupScriptChange(b.value)},placeholder:"Enter shell commands to run on terminal startup",resize:"vertical",get value(){return s()},set value(E){s(E)}}),a(o,d),Ne()}var Fu=y('<label for="enable-sound-effects" class="c-sound-setting__info svelte-vusrgo"><!> <!></label>'),Bu=y('<label for="only-play-when-unfocused" class="c-sound-setting__info svelte-vusrgo"><!> <!></label>'),Wu=y('<div class="c-sound-setting__info svelte-vusrgo"><!> <!></div>'),qu=y("<!> <!>",1),Gu=y('<div class="c-sound-settings svelte-vusrgo"><!> <!> <!></div>');function Hu(o,e){xe(e,!1);const r=()=>De(d,"$isEnabled",s),[s,n]=Ut(),i=Ar(),d=zi(),v=Ui();async function m(){return i(Bi({playOnlyWhenWindowUnfocused:!1})),"success"}er((()=>{i(Li())})),Zr();var h=Gu(),p=l(h);Rt(p,{level:2,marginBottom:0,children:(E,b)=>{var k=w("Sound Settings");a(E,k)},$$slots:{default:!0}});var $=c(p,2);zt($,{headerLeft:k=>{var S=Fu(),R=l(S);U(R,{size:2,block:!0,children:(_,f)=>{var A=w("Enable Sound Effects");a(_,A)},$$slots:{default:!0}});var u=c(R,2);U(u,{size:1,block:!0,children:(_,f)=>{var A=w("Play a sound when an agent completes a task");a(_,A)},$$slots:{default:!0}}),a(k,S)},headerRight:k=>{Tr(k,{size:2,get checked(){return r()},id:"enable-sound-effects","aria-label":"Enable sound effects",onChange:S=>i(Di(S))})},$$slots:{headerLeft:!0,headerRight:!0}});var N=c($,2),T=E=>{var b=qu(),k=O(b);zt(k,{headerLeft:u=>{var _=Bu(),f=l(_);U(f,{size:2,block:!0,children:(C,x)=>{var I=w("Only play when app window is unfocused");a(C,I)},$$slots:{default:!0}});var A=c(f,2);U(A,{size:1,block:!0,children:(C,x)=>{var I=w("Play the agent completion sound only when the host window is not focused");a(C,I)},$$slots:{default:!0}}),a(u,_)},headerRight:u=>{{let _=ra((()=>De(v,"$playOnlyWhenWindowUnfocused",s)??!1));Tr(u,{size:2,get checked(){return t(_)},id:"only-play-when-unfocused","aria-label":"Only play when app window is unfocused",onChange:f=>i(Fi({playOnlyWhenWindowUnfocused:f}))})}},$$slots:{headerLeft:!0,headerRight:!0}});{const S=u=>{var _=Wu(),f=l(_);U(f,{size:2,block:!0,children:(C,x)=>{var I=w("Test Sound");a(C,I)},$$slots:{default:!0}});var A=c(f,2);U(A,{size:1,block:!0,children:(C,x)=>{var I=w("Play a sample of the agent completion sound");a(C,I)},$$slots:{default:!0}}),a(u,_)},R=u=>{{let _=ra((()=>r()?"":"Enable sound effects to test")),f=ra((()=>[ga.Hover]));Ht(u,{get content(){return t(_)},get triggerOn(){return t(f)},children:(A,C)=>{{let x=ra((()=>!r()));Co(A,{size:1,defaultColor:"neutral",get enabled(){return r()},stickyColor:!1,get disabled(){return t(x)},onClick:m,stateVariant:{success:"soft",neutral:"soft",failure:"soft"},tooltip:{neutral:"Play a sample of the agent completion sound",success:"Played!"},children:(I,B)=>{var D=w("Play");a(I,D)},$$slots:{default:!0}})}},$$slots:{default:!0}})}};zt(c(k,2),{headerLeft:S,headerRight:R,$$slots:{headerLeft:!0,headerRight:!0}})}a(E,b)};M(N,(E=>{r()&&E(T)})),a(o,h),Ne(),n()}var Vu=y('<div class="c-user-experience-settings"><!> <!></div>'),ju=y('<span>Cancel</span> <div class="connect-button-spinner svelte-1m3ir4e"><!></div>',1),Ju=y("<span>Connect</span> <!>",1),Ku=y('<div class="connect-button-content svelte-1m3ir4e"><!></div>'),Yu=y('<div class="status-controls svelte-1m3ir4e"><div class="revoke-access-button svelte-1m3ir4e"><!></div> <!></div>'),Xu=y("<div> </div>"),Zu=y('<div class="config-wrapper svelte-1m3ir4e" role="group" aria-label="Connection status controls"><!> <!></div>'),Qu=y('<div class="category-heading"><!></div>'),ev=y('<div class="loading-container svelte-1kb2yeg"><!> <!></div>'),tv=y('<div class="category-content"><!></div>'),rv=y('<div class="category"><!> <!></div>');function Pn(o,e){let r=le(e,"loading",3,!1);var s=rv(),n=l(s),i=h=>{var p=Qu(),$=l(p),N=E=>{Rt(E,{level:2,marginBottom:0,children:(b,k)=>{var S=w();j((()=>de(S,e.title))),a(b,S)},$$slots:{default:!0}})},T=E=>{var b=Y(),k=O(b);ut(k,(()=>e.title)),a(E,b)};M($,(E=>{typeof e.title=="string"?E(N):E(T,!1)})),a(h,p)};M(n,(h=>{e.title&&h(i)}));var d=c(n,2),v=h=>{var p=ev(),$=l(p);Rr($,{size:1});var N=c($,2);U(N,{size:1,color:"secondary",children:(T,E)=>{var b=w("Loading...");a(T,b)},$$slots:{default:!0}}),a(h,p)},m=h=>{var p=tv(),$=l(p);ut($,(()=>e.children??Ot)),a(h,p)};M(d,(h=>{r()?h(v):h(m,!1)})),a(o,s)}var av=y('<span>Cancel</span> <div class="connect-button-spinner svelte-1wv2ms7"><!></div>',1),sv=y("<span>Connect</span> <!>",1),nv=y('<div class="connect-button-content svelte-1wv2ms7"><!></div>'),iv=y('<div class="api-key-input-container svelte-1wv2ms7"><!> <!> <!></div>'),ov=y('<div class="status-controls svelte-1wv2ms7"><div class="disconnect-button svelte-1wv2ms7"><!></div> <!></div>'),lv=y('<div class="config-wrapper svelte-1wv2ms7" role="group" aria-label="Connection status controls"><!></div>');function cv(o,e){xe(e,!0);const[r,s]=Ut(),n=Xa(),i=sr(),d=n.getServers(),v=z((()=>De(d,"$serversStore",r).find((u=>u.name===e.server.name))));async function m(){await i.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${e.server.displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&(t(v)&&n.deleteServer(t(v)),g(h,!1))}let h=te(!1),p=te(null);pt((()=>{e.server.isConfigured&&t(h)&&(g(h,!1),t(p)&&(clearTimeout(t(p)),g(p,null)))}));let $=te(""),N=te(!1);const T=n.getAuthRequiredStore();let E=z((()=>De(T,"$authRequiredSet",r).has(e.server.name)));async function b(){e.server.authType===gt.OAUTH?await(async function(){if(t(h))return t(p)&&(clearTimeout(t(p)),g(p,null)),void g(h,!1);i.startRemoteMCPAuth(e.server.name),g(h,!0);const u=new Promise((_=>{g(p,setTimeout((()=>{_(),g(p,null)}),6e4),!0)}));await Promise.race([u]),g(h,!1)})():e.server.authType===gt.HEADER&&(g($,""),g(N,!0))}async function k(){if(g(N,!1),!e.server.url)return;const u={type:"http",name:e.server.name,url:e.server.url},_={type:gt.HEADER,headers:{Authorization:`Bearer ${t($)}`}};n.addServer(u,_)}async function S(){t(v)&&n.deleteServer(t(v)),g(h,!1)}var R=lv();{const u=_=>{var f=Y(),A=O(f),C=I=>{var B=Y(),D=O(B),H=J=>{Ke(J,{variant:"ghost-block",color:"neutral",size:.5,onclick:b,children:(ee,Se)=>{var Ee=nv(),V=l(Ee),ge=ae=>{var se=av(),fe=c(O(se),2),P=l(fe);Rr(P,{size:1,useCurrentColor:!0}),a(ae,se)},G=ae=>{var se=sv(),fe=c(O(se),2);me(fe,{name:"arrow-up-right"}),a(ae,se)};M(V,(ae=>{t(h)?ae(ge):ae(G,!1)})),a(ee,Ee)},$$slots:{default:!0}})},L=J=>{var ee=Y(),Se=O(ee),Ee=V=>{var ge=iv(),G=l(ge);Pt(G,{size:1,placeholder:"Enter your API key",get value(){return t($)},set value(fe){g($,fe,!0)}});var ae=c(G,2);Et(ae,{color:"neutral",variant:"ghost",size:1,onclick:()=>{g($,""),g(N,!1)},children:(fe,P)=>{me(fe,{name:"x"})},$$slots:{default:!0}});var se=c(ae,2);Et(se,{color:"neutral",variant:"ghost-block",size:.5,onclick:k,children:(fe,P)=>{me(fe,{name:"check"})},$$slots:{default:!0}}),a(V,ge)};M(Se,(V=>{e.server.authType===gt.HEADER&&V(Ee)}),!0),a(J,ee)};M(D,(J=>{t(N)?J(L,!1):J(H)})),a(I,B)},x=I=>{var B=Y(),D=O(B),H=L=>{var J=ov(),ee=l(J),Se=l(ee);{let G=z((()=>[ga.Hover]));Ht(Se,{get triggerOn(){return t(G)},content:"Revoke Access",children:(ae,se)=>{Et(ae,{color:"neutral",variant:"ghost-block",size:.5,onclick:m,children:(fe,P)=>{me(fe,{name:"unplug"})},$$slots:{default:!0}})},$$slots:{default:!0}})}var Ee=c(ee,2),V=G=>{Ke(G,{variant:"ghost-block",color:"warning",size:.5,onclick:S,children:(ae,se)=>{var fe=w("Authenticate");a(ae,fe)},$$slots:{default:!0}})},ge=G=>{var ae=Y(),se=O(ae);Ce(se,(()=>hr.Root),((fe,P)=>{P(fe,{color:"success",size:1,variant:"soft",children:(F,ce)=>{var re=w("Connected");a(F,re)},$$slots:{default:!0}})})),a(G,ae)};M(Ee,(G=>{t(E)?G(V):G(ge,!1)})),a(L,J)};M(D,(L=>{e.server.isConfigured&&L(H)}),!0),a(I,B)};M(A,(I=>{e.server.isConfigured?I(x,!1):I(C)})),a(_,f)};zt(l(R),{get iconName(){return e.server.iconName},get title(){return e.server.displayName},headerRight:u,$$slots:{headerRight:!0}})}a(o,R),Ne(),s()}var dv=y('<div class="tool-category-list svelte-1hdlwqf"><!> <!></div>');function uv(o,e){xe(e,!0);const r=()=>De(d,"$partnerServers",s),[s,n]=Ut();let i=le(e,"tools",19,(()=>[]));const d=Xa().getPartnerServers(),v=[an.VERCEL,an.FIGMA];let m=z((()=>yn()?r().filter((h=>!v.includes(h.name))):r()));{const h=$=>{Rt($,{level:1,children:(N,T)=>{var E=w("Services");a(N,E)},$$slots:{default:!0}})};let p=z((()=>i().length===0));Pn(o,{get loading(){return t(p)},title:h,children:($,N)=>{var T=dv(),E=l(T);mt(E,17,i,(k=>k.name),((k,S)=>{(function(R,u){xe(u,!0);let _=le(u,"transparent",3,!1),f=te(!1),A=te(null);function C(){if(t(f))g(f,!1),t(A)&&(clearTimeout(t(A)),g(A,null));else{g(f,!0);const H=u.config.authUrl||"";u.onAuthenticate({authUrl:H,toolName:u.config.displayName.toLowerCase()}),g(A,setTimeout((()=>{g(f,!1),g(A,null)}),6e4),!0)}}pt((()=>{u.config.isConfigured&&t(f)&&(g(f,!1),t(A)&&(clearTimeout(t(A)),g(A,null)))}));var x=Zu(),I=l(x);zt(I,{get iconName(){return u.config.iconName},get title(){return u.config.displayName},get transparent(){return _()},headerRight:L=>{var J=Y(),ee=O(J),Se=V=>{Ke(V,{variant:"ghost-block",color:"neutral",size:.5,onclick:C,children:(ge,G)=>{var ae=Ku(),se=l(ae),fe=F=>{var ce=ju(),re=c(O(ce),2),Fe=l(re);Rr(Fe,{size:1,useCurrentColor:!0}),a(F,ce)},P=F=>{var ce=Ju(),re=c(O(ce),2);me(re,{name:"arrow-up-right"}),a(F,ce)};M(se,(F=>{t(f)?F(fe):F(P,!1)})),a(ge,ae)},$$slots:{default:!0}})},Ee=V=>{var ge=Y(),G=O(ge),ae=se=>{var fe=Yu(),P=l(fe),F=l(P);{let re=z((()=>[ga.Hover]));Ht(F,{get triggerOn(){return t(re)},content:"Revoke Access",children:(Fe,Be)=>{Et(Fe,{color:"neutral",variant:"ghost-block",size:.5,onclick:()=>u.onRevokeAccess(u.config),children:(je,ne)=>{me(je,{name:"unplug",size:1})},$$slots:{default:!0}})},$$slots:{default:!0}})}var ce=c(P,2);Ce(ce,(()=>hr.Root),((re,Fe)=>{Fe(re,{color:"success",size:1,variant:"soft",children:(Be,je)=>{var ne=w("Connected");a(Be,ne)},$$slots:{default:!0}})})),a(se,fe)};M(G,(se=>{u.config.isConfigured&&se(ae)}),!0),a(V,ge)};M(ee,(V=>{!u.config.isConfigured&&u.config.authUrl?V(Se):V(Ee,!1)})),a(L,J)},$$slots:{headerRight:!0}});var B=c(I,2),D=H=>{var L=Xu(),J=l(L);j((()=>{xt(L,1,`status-message ${u.config.statusType??""}`,"svelte-1m3ir4e"),de(J,u.config.statusMessage)})),a(H,L)};M(B,(H=>{u.config.showStatus&&H(D)})),a(R,x),Ne()})(k,{get config(){return t(S)},get onAuthenticate(){return e.onAuthenticate},get onRevokeAccess(){return e.onRevokeAccess}})}));var b=c(E,2);mt(b,17,(()=>t(m)),(k=>k.name),((k,S)=>{cv(k,{get server(){return t(S)}})})),a($,T)},$$slots:{title:!0,default:!0}})}Ne(),n()}var vv=y('<tr class="key-val-row svelte-9znzh3"><td class="key-cell svelte-9znzh3"><!></td><td class="value-cell svelte-9znzh3"><!></td><td class="action-cell svelte-9znzh3"><!></td></tr>'),hv=y('<!> <table class="key-val-table svelte-9znzh3"><tbody><!></tbody></table> <div class="new-var-button-container svelte-9znzh3"><!></div>',1);function un(o,e){xe(e,!0);let r=le(e,"keyValEntries",31,(()=>At([]))),s=le(e,"title",3,"Key Value"),n=le(e,"keyPlaceholder",3,"Key"),i=le(e,"valuePlaceholder",3,"Value"),d=le(e,"addButtonText",3,"Entry");var v=hv(),m=O(v);U(m,{size:1,weight:"medium",children:(b,k)=>{var S=w();j((()=>de(S,s()))),a(b,S)},$$slots:{default:!0}});var h=c(m,2),p=l(h),$=l(p),N=b=>{var k=Y(),S=O(k);mt(S,17,r,(R=>R.id),((R,u,_)=>{var f=vv(),A=l(f),C=l(A);Pt(C,{size:1,get placeholder(){return n()},get onfocus(){return e.handleEnterEditMode},onchange:()=>(function(H,L){const J=r().findIndex((ee=>ee.id===H));J!==-1&&r(r()[J].key=L,!0)})(t(u).id,t(u).key),class:"full-width",get value(){return t(u).key},set value(H){t(u).key=H}});var x=c(A),I=l(x);Pt(I,{size:1,get placeholder(){return i()},get onfocus(){return e.handleEnterEditMode},onchange:()=>(function(H,L){const J=r().findIndex((ee=>ee.id===H));J!==-1&&r(r()[J].value=L,!0)})(t(u).id,t(u).value),class:"full-width",get value(){return t(u).value},set value(H){t(u).value=H}});var B=c(x),D=l(B);Ht(D,{content:"Remove",children:(H,L)=>{Ke(H,{variant:"ghost",color:"neutral",get onfocus(){return e.handleEnterEditMode},onclick:()=>{return ee=t(u).id,e.handleEnterEditMode(),void r(r().filter((Se=>Se.id!==ee)));var ee},type:"button",size:1,iconLeft:ee=>{me(ee,{name:"trash-2"})},$$slots:{iconLeft:!0}})},$$slots:{default:!0}}),a(R,f)})),a(b,k)};M($,(b=>{r().length>0&&b(N)}));var T=c(h,2),E=l(T);Ke(E,{size:1,variant:"soft",color:"neutral",onclick:function(){e.handleEnterEditMode(),r([...r(),{id:crypto.randomUUID(),key:"",value:""}])},type:"button",iconLeft:k=>{me(k,{name:"plus"})},children:(k,S)=>{var R=w();j((()=>de(R,d()))),a(k,R)},$$slots:{iconLeft:!0,default:!0}}),a(o,v),Ne()}const qs=class qs{static setPluginMcpConfig(e){this._instance===void 0?this._instance=e:xs("PluginMcpConfig").warn("Attempting to initialize PluginMcpConfig when one is already configured. Keeping existing.")}static getPluginMcpConfig(){if(this._instance===void 0)throw new Error("PluginMcpConfig not set");return this._instance}static reset(){this._instance=void 0}};qs._instance=void 0;let ys=qs;const ls=()=>ys.getPluginMcpConfig(),gv={shouldRefreshTokens:!0};let _s;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(_s="oauth4webapi/v3.8.1");function Yr(o,e){if(o==null)return!1;try{return o instanceof e||Object.getPrototypeOf(o)[Symbol.toStringTag]===e.prototype[Symbol.toStringTag]}catch{return!1}}const vr="ERR_INVALID_ARG_VALUE",Qt="ERR_INVALID_ARG_TYPE";function St(o,e,r){const s=new TypeError(o,{cause:r});return Object.assign(s,{code:e}),s}const Ds=Symbol(),pv=Symbol(),mv=Symbol(),Za=Symbol(),bs=Symbol(),fv=new TextEncoder,yv=new TextDecoder;function ws(o){return typeof o=="string"?fv.encode(o):yv.decode(o)}let $s,On;Uint8Array.prototype.toBase64?$s=o=>(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),o.toBase64({alphabet:"base64url",omitPadding:!0})):$s=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));const r=[];for(let s=0;s<e.byteLength;s+=32768)r.push(String.fromCharCode.apply(null,e.subarray(s,s+32768)));return btoa(r.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};function za(o){return typeof o=="string"?On(o):$s(o)}On=Uint8Array.fromBase64?o=>{try{return Uint8Array.fromBase64(o,{alphabet:"base64url"})}catch(e){throw St("The input to be decoded is not correctly encoded.",vr,e)}}:o=>{try{const e=atob(o.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}catch(e){throw St("The input to be decoded is not correctly encoded.",vr,e)}};class Ia extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Uv,Error.captureStackTrace?.(this,this.constructor)}}class _v extends Error{code;constructor(e,r){super(e,r),this.name=this.constructor.name,r?.code&&(this.code=r?.code),Error.captureStackTrace?.(this,this.constructor)}}function rt(o,e,r){return new _v(o,{code:e,cause:r})}function Ua(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}function Fs(o){Yr(o,Headers)&&(o=Object.fromEntries(o.entries()));const e=new Headers(o??{});if(_s&&!e.has("user-agent")&&e.set("user-agent",_s),e.has("authorization"))throw St('"options.headers" must not include the "authorization" header name',vr);return e}function Bs(o,e){if(e!==void 0){if(typeof e=="function"&&(e=e(o.href)),!(e instanceof AbortSignal))throw St('"options.signal" must return or be an instance of AbortSignal',Qt);return e}}function Xr(o,e,r,s,n){try{if(typeof o!="number"||!Number.isFinite(o))throw St(`${r} must be a number`,Qt,n);if(o>0)return;if(e){if(o!==0)throw St(`${r} must be a non-negative number`,vr,n);return}throw St(`${r} must be a positive number`,vr,n)}catch(i){throw s?rt(i.message,s,n):i}}function Bt(o,e,r,s){try{if(typeof o!="string")throw St(`${e} must be a string`,Qt,s);if(o.length===0)throw St(`${e} must not be empty`,vr,s)}catch(n){throw r?rt(n.message,r,s):n}}function zn(o){(function(e,r){if(s=e,s.headers.get("content-type")?.split(";")[0]!==r)throw(function(n,...i){let d='"response" content-type must be ';if(i.length>2){const v=i.pop();d+=`${i.join(", ")}, or ${v}`}else i.length===2?d+=`${i[0]} or ${i[1]}`:d+=i[0];return rt(d,Dv,n)})(e,r);var s})(o,"application/json")}function cs(){return za(crypto.getRandomValues(new Uint8Array(32)))}function Ss(o){const e=o?.[pv];return typeof e=="number"&&Number.isFinite(e)?e:0}function Es(o){const e=o?.[mv];return typeof e=="number"&&Number.isFinite(e)&&Math.sign(e)!==-1?e:30}function ks(){return Math.floor(Date.now()/1e3)}function ua(o){if(typeof o!="object"||o===null)throw St('"as" must be an object',Qt);Bt(o.issuer,'"as.issuer"')}function La(o){if(typeof o!="object"||o===null)throw St('"client" must be an object',Qt);Bt(o.client_id,'"client.client_id"')}const bv=URL.parse?(o,e)=>URL.parse(o,e):(o,e)=>{try{return new URL(o,e)}catch{return null}};function Un(o,e){if(e&&o.protocol!=="https:")throw rt("only requests to HTTPS are allowed",Fv,o);if(o.protocol!=="https:"&&o.protocol!=="http:")throw rt("only HTTP and HTTPS requests are allowed",Bv,o)}function vn(o,e,r,s){let n;if(typeof o!="string"||!(n=bv(o)))throw rt("authorization server metadata does not contain a valid "+(r?`"as.mtls_endpoint_aliases.${e}"`:`"as.${e}"`),o===void 0?Wv:qv,{attribute:r?`mtls_endpoint_aliases.${e}`:e});return Un(n,s),n}function Ln(o,e,r,s){return r&&o.mtls_endpoint_aliases&&e in o.mtls_endpoint_aliases?vn(o.mtls_endpoint_aliases[e],e,r,s):vn(o[e],e,r,s)}class Dn extends Error{cause;code;error;status;error_description;response;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=zv,this.cause=r.cause,this.error=r.cause.error,this.status=r.response.status,this.error_description=r.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),Error.captureStackTrace?.(this,this.constructor)}}class Fn extends Error{cause;code;error;error_description;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Lv,this.cause=r.cause,this.error=r.cause.get("error"),this.error_description=r.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class wv extends Error{cause;code;response;status;constructor(e,r){super(e,r),this.name=this.constructor.name,this.code=Ov,this.cause=r.cause,this.status=r.response.status,this.response=r.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}const Da="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",$v="("+Da+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"',Sv="("+Da+")\\s*=\\s*("+Da+")",Ev=new RegExp("^[,\\s]*("+Da+")\\s(.*)"),kv=new RegExp("^[,\\s]*"+$v+"[,\\s]*(.*)"),Cv=new RegExp("^[,\\s]*"+Sv+"[,\\s]*(.*)"),Av=new RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function Bn(o,e,r){if(o.status!==e){let s;throw(function(n){let i;if(i=(function(d){if(!Yr(d,Response))throw St('"response" must be an instance of Response',Qt);const v=d.headers.get("www-authenticate");if(v===null)return;const m=[];let h=v;for(;h;){let p=h.match(Ev);const $=p?.[1].toLowerCase();if(h=p?.[2],!$)return;const N={};let T;for(;h;){let b,k;if(p=h.match(kv)){if([,b,k,h]=p,k.includes("\\"))try{k=JSON.parse(`"${k}"`)}catch{}N[b.toLowerCase()]=k}else{if(!(p=h.match(Cv))){if(p=h.match(Av)){if(Object.keys(N).length)break;[,T,h]=p;break}return}[,b,k,h]=p,N[b.toLowerCase()]=k}}const E={scheme:$,parameters:N};T&&(E.token68=T),m.push(E)}return m.length?m:void 0})(n))throw new wv("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:i,response:n})})(o),(s=await(async function(n){if(n.status>399&&n.status<500){aa(n),zn(n);try{const i=await n.clone().json();if(Ua(i)&&typeof i.error=="string"&&i.error.length)return i}catch{}}})(o))?(await o.body?.cancel(),new Dn("server responded with an error in the response body",{cause:s,response:o})):rt(`"response" is not a conform ${r} response (unexpected HTTP status code)`,Rs,o)}}async function hn(o,e,r,s,n,i){const d=Ln(o,"token_endpoint",e.use_mtls_endpoint_aliases,i?.[Ds]!==!0);n.set("grant_type",s);const v=Fs(i?.headers);return v.set("accept","application/json"),await(async function(h,p,$,N,T,E,b){return await $(h,p,T,E),E.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(b?.[Za]||fetch)(N.href,{body:T,headers:Object.fromEntries(E.entries()),method:"POST",redirect:"manual",signal:Bs(N,b?.signal)})})(o,e,r,d,n,v,i)}const Wn=new WeakMap,Rv=new WeakMap;function gn(o){if(!o.id_token)return;const e=Wn.get(o);if(!e)throw St('"ref" was already garbage collected or did not resolve from the proper sources',vr);return e}async function Cs(o,e,r,s,n,i){if(ua(o),La(e),!Yr(r,Response))throw St('"response" must be an instance of Response',Qt);await Bn(r,200,"Token Endpoint"),aa(r);const d=await xa(r);if(Bt(d.access_token,'"response" body "access_token" property',ht,{body:d}),Bt(d.token_type,'"response" body "token_type" property',ht,{body:d}),d.token_type=d.token_type.toLowerCase(),d.expires_in!==void 0){let v=typeof d.expires_in!="number"?parseFloat(d.expires_in):d.expires_in;Xr(v,!0,'"response" body "expires_in" property',ht,{body:d}),d.expires_in=v}if(d.refresh_token!==void 0&&Bt(d.refresh_token,'"response" body "refresh_token" property',ht,{body:d}),d.scope!==void 0&&typeof d.scope!="string")throw rt('"response" body "scope" property must be a string',ht,{body:d});if(d.id_token!==void 0){Bt(d.id_token,'"response" body "id_token" property',ht,{body:d});const v=["aud","exp","iat","iss","sub"];e.require_auth_time===!0&&v.push("auth_time"),e.default_max_age!==void 0&&(Xr(e.default_max_age,!0,'"client.default_max_age"'),v.push("auth_time")),s?.length&&v.push(...s);const{claims:m,jwt:h}=await(async function(p,$,N,T,E){let b,k,{0:S,1:R,length:u}=p.split(".");if(u===5){if(E===void 0)throw new Ia("JWE decryption is not configured",{cause:p});p=await E(p),{0:S,1:R,length:u}=p.split(".")}if(u!==3)throw rt("Invalid JWT",ht,p);try{b=JSON.parse(ws(za(S)))}catch(f){throw rt("failed to parse JWT Header body as base64url encoded JSON",As,f)}if(!Ua(b))throw rt("JWT Header must be a top level object",ht,p);if($(b),b.crit!==void 0)throw new Ia('no JWT "crit" header parameter extensions are supported',{cause:{header:b}});try{k=JSON.parse(ws(za(R)))}catch(f){throw rt("failed to parse JWT Payload body as base64url encoded JSON",As,f)}if(!Ua(k))throw rt("JWT Payload must be a top level object",ht,p);const _=ks()+N;if(k.exp!==void 0){if(typeof k.exp!="number")throw rt('unexpected JWT "exp" (expiration time) claim type',ht,{claims:k});if(k.exp<=_-T)throw rt('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',Fa,{claims:k,now:_,tolerance:T,claim:"exp"})}if(k.iat!==void 0&&typeof k.iat!="number")throw rt('unexpected JWT "iat" (issued at) claim type',ht,{claims:k});if(k.iss!==void 0&&typeof k.iss!="string")throw rt('unexpected JWT "iss" (issuer) claim type',ht,{claims:k});if(k.nbf!==void 0){if(typeof k.nbf!="number")throw rt('unexpected JWT "nbf" (not before) claim type',ht,{claims:k});if(k.nbf>_+T)throw rt('unexpected JWT "nbf" (not before) claim value',Fa,{claims:k,now:_,tolerance:T,claim:"nbf"})}if(k.aud!==void 0&&typeof k.aud!="string"&&!Array.isArray(k.aud))throw rt('unexpected JWT "aud" (audience) claim type',ht,{claims:k});return{header:b,claims:k,jwt:p}})(d.id_token,Gv.bind(void 0,e.id_token_signed_response_alg,o.id_token_signing_alg_values_supported,"RS256"),Ss(e),Es(e),n).then(Mv.bind(void 0,v)).then(Iv.bind(void 0,o)).then(Tv.bind(void 0,e.client_id));if(Array.isArray(m.aud)&&m.aud.length!==1){if(m.azp===void 0)throw rt('ID Token "aud" (audience) claim includes additional untrusted audiences',Cr,{claims:m,claim:"aud"});if(m.azp!==e.client_id)throw rt('unexpected ID Token "azp" (authorized party) claim value',Cr,{expected:e.client_id,claims:m,claim:"azp"})}m.auth_time!==void 0&&Xr(m.auth_time,!0,'ID Token "auth_time" (authentication time)',ht,{claims:m}),Rv.set(r,h),Wn.set(d,m)}if(i?.[d.token_type]!==void 0)i[d.token_type](r,d);else if(d.token_type!=="dpop"&&d.token_type!=="bearer")throw new Ia("unsupported `token_type` value",{cause:{body:d}});return d}function Tv(o,e){if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(o))throw rt('unexpected JWT "aud" (audience) claim value',Cr,{expected:o,claims:e.claims,claim:"aud"})}else if(e.claims.aud!==o)throw rt('unexpected JWT "aud" (audience) claim value',Cr,{expected:o,claims:e.claims,claim:"aud"});return e}function Iv(o,e){const r=o[Yv]?.(e)??o.issuer;if(e.claims.iss!==r)throw rt('unexpected JWT "iss" (issuer) claim value',Cr,{expected:r,claims:e.claims,claim:"iss"});return e}const Ws=new WeakSet,xv=Symbol(),Nv={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function Mv(o,e){for(const r of o)if(e.claims[r]===void 0)throw rt(`JWT "${r}" (${Nv[r]}) claim missing`,ht,{claims:e.claims});return e}const ds=Symbol(),us=Symbol();async function Pv(o,e,r,s){return typeof s?.expectedNonce=="string"||typeof s?.maxAge=="number"||s?.requireIdToken?(async function(n,i,d,v,m,h,p){const $=[];switch(v){case void 0:v=ds;break;case ds:break;default:Bt(v,'"expectedNonce" argument'),$.push("nonce")}switch(m??=i.default_max_age,m){case void 0:m=us;break;case us:break;default:Xr(m,!0,'"maxAge" argument'),$.push("auth_time")}const N=await Cs(n,i,d,$,h,p);Bt(N.id_token,'"response" body "id_token" property',ht,{body:N});const T=gn(N);if(m!==us){const E=ks()+Ss(i),b=Es(i);if(T.auth_time+m<E-b)throw rt("too much time has elapsed since the last End-User authentication",Fa,{claims:T,now:E,tolerance:b,claim:"auth_time"})}if(v===ds){if(T.nonce!==void 0)throw rt('unexpected ID Token "nonce" claim value',Cr,{expected:void 0,claims:T,claim:"nonce"})}else if(T.nonce!==v)throw rt('unexpected ID Token "nonce" claim value',Cr,{expected:v,claims:T,claim:"nonce"});return N})(o,e,r,s.expectedNonce,s.maxAge,s[bs],s.recognizedTokenTypes):(async function(n,i,d,v,m){const h=await Cs(n,i,d,void 0,v,m),p=gn(h);if(p){if(i.default_max_age!==void 0){Xr(i.default_max_age,!0,'"client.default_max_age"');const $=ks()+Ss(i),N=Es(i);if(p.auth_time+i.default_max_age<$-N)throw rt("too much time has elapsed since the last End-User authentication",Fa,{claims:p,now:$,tolerance:N,claim:"auth_time"})}if(p.nonce!==void 0)throw rt('unexpected ID Token "nonce" claim value',Cr,{expected:void 0,claims:p,claim:"nonce"})}return h})(o,e,r,s?.[bs],s?.recognizedTokenTypes)}const Ov="OAUTH_WWW_AUTHENTICATE_CHALLENGE",zv="OAUTH_RESPONSE_BODY_ERROR",Uv="OAUTH_UNSUPPORTED_OPERATION",Lv="OAUTH_AUTHORIZATION_RESPONSE_ERROR",As="OAUTH_PARSE_ERROR",ht="OAUTH_INVALID_RESPONSE",Dv="OAUTH_RESPONSE_IS_NOT_JSON",Rs="OAUTH_RESPONSE_IS_NOT_CONFORM",Fv="OAUTH_HTTP_REQUEST_FORBIDDEN",Bv="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",Fa="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",Cr="OAUTH_JWT_CLAIM_COMPARISON_FAILED",pn="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",Wv="OAUTH_MISSING_SERVER_METADATA",qv="OAUTH_INVALID_SERVER_METADATA";function aa(o){if(o.bodyUsed)throw St('"response" body has been used already',vr)}function Gv(o,e,r,s){if(o===void 0)if(Array.isArray(e)){if(!e.includes(s.alg))throw rt('unexpected JWT "alg" header parameter',ht,{header:s,expected:e,reason:"authorization server metadata"})}else{if(r===void 0)throw rt('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:o,issuer:e,fallback:r});if(typeof r=="string"?s.alg!==r:typeof r=="function"?!r(s.alg):!r.includes(s.alg))throw rt('unexpected JWT "alg" header parameter',ht,{header:s,expected:r,reason:"default value"})}else if(typeof o=="string"?s.alg!==o:!o.includes(s.alg))throw rt('unexpected JWT "alg" header parameter',ht,{header:s,expected:o,reason:"client configuration"})}function Lr(o,e){const{0:r,length:s}=o.getAll(e);if(s>1)throw rt(`"${e}" parameter must be provided only once`,ht);return r}const Hv=Symbol(),Vv=Symbol();function jv(o,e,r,s){if(ua(o),La(e),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw St('"parameters" must be an instance of URLSearchParams, or URL',Qt);if(Lr(r,"response"))throw rt('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',ht,{parameters:r});const n=Lr(r,"iss"),i=Lr(r,"state");if(!n&&o.authorization_response_iss_parameter_supported)throw rt('response parameter "iss" (issuer) missing',ht,{parameters:r});if(n&&n!==o.issuer)throw rt('unexpected "iss" (issuer) response parameter value',ht,{expected:o.issuer,parameters:r});switch(s){case void 0:case Vv:if(i!==void 0)throw rt('unexpected "state" response parameter encountered',ht,{expected:void 0,parameters:r});break;case Hv:break;default:if(Bt(s,'"expectedState" argument'),i!==s)throw rt(i===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',ht,{expected:s,parameters:r})}if(Lr(r,"error"))throw new Fn("authorization response from the server is an error",{cause:r});const d=Lr(r,"id_token"),v=Lr(r,"token");if(d!==void 0||v!==void 0)throw new Ia("implicit and hybrid flows are not supported");return m=new URLSearchParams(r),Ws.add(m),m;var m}async function Jv(o,e,r){ua(o);const s=Ln(o,"registration_endpoint",e.use_mtls_endpoint_aliases,r?.[Ds]!==!0),n=Fs(r?.headers);n.set("accept","application/json"),n.set("content-type","application/json");const i="POST";r?.DPoP&&((function(v){if(!Ws.has(v))throw St('"options.DPoP" is not a valid DPoPHandle',vr)})(r.DPoP),await r.DPoP.addProof(s,n,i,r.initialAccessToken)),r?.initialAccessToken&&n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${r.initialAccessToken}`);const d=await(r?.[Za]||fetch)(s.href,{body:JSON.stringify(e),headers:Object.fromEntries(n.entries()),method:i,redirect:"manual",signal:Bs(s,r?.signal)});return r?.DPoP?.cacheNonce(d),d}async function Kv(o,e){return(async function(r,s,n,i){if(!(r instanceof URL))throw St(`"${s}" must be an instance of URL`,Qt);Un(r,i?.[Ds]!==!0);const d=n(new URL(r.href)),v=Fs(i?.headers);return v.set("accept","application/json"),(i?.[Za]||fetch)(d.href,{body:void 0,headers:Object.fromEntries(v.entries()),method:"GET",redirect:"manual",signal:Bs(d,i?.signal)})})(o,"resourceIdentifier",(r=>((function(s,n,i=!1){var d;s.pathname==="/"?s.pathname=n:s.pathname=(d=`${n}/${i?s.pathname:s.pathname.replace(/(\/)$/,"")}`).includes("//")?d.replace("//","/"):d})(r,".well-known/oauth-protected-resource",!0),r)),e)}async function xa(o,e=zn){let r;try{r=await o.json()}catch(s){throw e(o),rt('failed to parse "response" body as JSON',As,s)}if(!Ua(r))throw rt('"response" body must be a top level object',ht,{body:r});return r}const Aa=Symbol(),Yv=Symbol(),sa=class sa{static get _logger(){return xs("McpOAuth")}static async discover(e){try{const r=await this._discoverResourceMetadata(e),s=r?.authorization_servers?.map((n=>new URL(n)))??[e];for(const n of s){const i=await this._discoverAuthServerMetadataUrl(n);if(i)return i}}catch(r){throw this._formatError(r)}throw new Error("Failed to discover metadata URL")}static async _discoverResourceMetadata(e){try{const r=await Kv(e);return await(async function(s,n){const i=s;if(!(i instanceof URL)&&i!==Aa)throw St('"expectedResourceIdentifier" must be an instance of URL',Qt);if(!Yr(n,Response))throw St('"response" must be an instance of Response',Qt);if(n.status!==200)throw rt('"response" is not a conform Resource Server Metadata response (unexpected HTTP status code)',Rs,n);aa(n);const d=await xa(n);if(Bt(d.resource,'"response" body "resource" property',ht,{body:d}),i!==Aa&&new URL(d.resource).href!==i.href)throw rt('"response" body "resource" property does not match the expected value',pn,{expected:i.href,body:d,attribute:"resource"});return d})(e,r)}catch{return}}static async _discoverAuthServerMetadataUrl(e){for(const r of this._buildWellKnownUrls(e))try{const s=new URL(r,e);if(!(await fetch(s)).ok)continue;return s}catch{continue}}static _buildWellKnownUrls(e){const r=e.pathname.startsWith("/")?e.pathname.substring(1):e.pathname;return[...e.pathname.length>0?[new URL(`/.well-known/oauth-authorization-server/${r}`,e),new URL(`/.well-known/openid-configuration/${r}`,e),new URL(`/${r}/.well-known/openid-configuration`,e)]:[],new URL("/.well-known/oauth-authorization-server",e),new URL("/.well-known/openid-configuration",e)]}static async getAuthServerMetadata(e){try{const r=await fetch(e),s=await this._extractIssuerFromDiscoveryResponse(r.clone());if(!s)throw new Error("Missing issuer from discovery response");return await(async function(n,i){const d=n;if(!(d instanceof URL)&&d!==Aa)throw St('"expectedIssuerIdentifier" must be an instance of URL',Qt);if(!Yr(i,Response))throw St('"response" must be an instance of Response',Qt);if(i.status!==200)throw rt('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',Rs,i);aa(i);const v=await xa(i);if(Bt(v.issuer,'"response" body "issuer" property',ht,{body:v}),d!==Aa&&new URL(v.issuer).href!==d.href)throw rt('"response" body "issuer" property does not match the expected value',pn,{expected:d.href,body:v,attribute:"issuer"});return v})(s,r)}catch(r){throw this._formatError(r)}}static async _extractIssuerFromDiscoveryResponse(e){if(!e.ok)throw new Error("Invalid status code from discovery response");const r=await e.json();if(!r.issuer||typeof r.issuer!="string")throw new Error("Invalid issuer from discovery response");return new URL(r.issuer)}static buildClientFromConfig(e){if(!e.clientId)throw new Error("clientId is required to build client from config");return{client_id:e.clientId}}static async registerClient(e,r){try{const s=await Jv(e,{client_name:this.CLIENT_NAME,client_uri:this.CLIENT_URI,logo_uri:this.LOGO_URI,redirect_uris:r,grant_types:["authorization_code","refresh_token"],response_types:["code"]},{[Za]:this._fetchRegisterClient.bind(this)});return s.ok||this._logger.error(`Dynamic client registration failed with HTTP status ${s.status} (${s.statusText})`),await(async function(n){if(!Yr(n,Response))throw St('"response" must be an instance of Response',Qt);await Bn(n,201,"Dynamic Client Registration Endpoint"),aa(n);const i=await xa(n);return Bt(i.client_id,'"response" body "client_id" property',ht,{body:i}),i.client_secret!==void 0&&Bt(i.client_secret,'"response" body "client_secret" property',ht,{body:i}),i.client_secret&&Xr(i.client_secret_expires_at,!0,'"response" body "client_secret_expires_at" property',ht,{body:i}),i})(s)}catch(s){throw this._formatError(s)}}static async _fetchRegisterClient(e,r){const s=await fetch(e,r);let n=await s.clone().text();const i={status:s.status,statusText:s.statusText,headers:s.headers};if(s.ok||this._logger.error(`Dynamic client registration error response body (HTTP ${s.status} ${s.statusText}): ${n}`),s.status===200&&(i.status=201,i.statusText="Created"),s.status===201){const d=await s.json();d.client_secret_expires_at||(d.client_secret_expires_at=0),n=JSON.stringify(d)}return new Response(n,i)}static async buildAuthorizationState(e,r,s,n){if(!s.authorization_endpoint)throw new Error("No authorization endpoint");const i=cs(),d=await(async function(p){return Bt(p,"codeVerifier"),za(await crypto.subtle.digest("SHA-256",ws(p)))})(i),v=cs();let m;const h=new URL(s.authorization_endpoint);return h.searchParams.set("response_type","code"),h.searchParams.set("client_id",r.client_id),h.searchParams.set("code_challenge",d),h.searchParams.set("code_challenge_method","S256"),h.searchParams.set("redirect_uri",n),h.searchParams.set("resource",e.toString()),h.searchParams.set("state",v),s.code_challenge_methods_supported?.includes("S256")||(m=cs(),h.searchParams.set("nonce",m)),{type:gt.OAUTH,client:r,serverMetadata:s,redirectUri:n,codeVerifier:i,nonce:m,state:v,authUri:h}}static async authorizationCodeGrant(e,r){try{const s=jv(r.serverMetadata,r.client,e,r.state),n=await(async function(d,v,m,h,p,$,N){if(ua(d),La(v),!Ws.has(h))throw St('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',vr);Bt(p,'"redirectUri"');const T=Lr(h,"code");if(!T)throw rt('no authorization code in "callbackParameters"',ht);const E=new URLSearchParams(N?.additionalParameters);return E.set("redirect_uri",p),E.set("code",T),$!==xv&&(Bt($,'"codeVerifier"'),E.set("code_verifier",$)),hn(d,v,m,"authorization_code",E,N)})(r.serverMetadata,r.client,this._getClientAuth(r.client),s,r.redirectUri,r.codeVerifier),i=await Pv(r.serverMetadata,r.client,n,{expectedNonce:r.nonce});return this._buildAuthSecret(i,r.serverMetadata,r.client)}catch(s){throw this._formatError(s)}}static async refreshTokenGrant(e){if(!e.refreshToken)throw new Error("No refresh token available");try{const r=await(async function(n,i,d,v,m){ua(n),La(i),Bt(v,'"refreshToken"');const h=new URLSearchParams(m?.additionalParameters);return h.set("refresh_token",v),hn(n,i,d,"refresh_token",h,m)})(e.serverMetadata,e.client,this._getClientAuth(e.client),e.refreshToken),s=await(async function(n,i,d,v){return Cs(n,i,d,void 0,v?.[bs],v?.recognizedTokenTypes)})(e.serverMetadata,e.client,r);return this._buildAuthSecret(s,e.serverMetadata,e.client)}catch(r){throw this._formatError(r)}}static _getClientAuth(e){const r=e.client_secret;return e.client_secret&&typeof r=="string"?(Bt(s=r,'"clientSecret"'),(n,i,d,v)=>{d.set("client_id",i.client_id),d.set("client_secret",s)}):(n,i,d,v)=>{d.set("client_id",i.client_id)};var s}static _buildAuthSecret(e,r,s){return{type:gt.OAUTH,accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,tokenType:e.token_type,scope:e.scope,serverMetadata:r,client:s}}static _formatError(e){return e instanceof Dn||e instanceof Fn?new Error(`${e.message} (${e.error_description})`,{cause:e}):e}};sa.CLIENT_NAME="Augment Code",sa.CLIENT_URI="https://augmentcode.com",sa.LOGO_URI="https://storage.googleapis.com/augment-bazel-data/public/auth0/2024-10-15-auth0-augment-logo-512x512.png";let pr=sa;const Ba=class Ba{constructor(e=gv,r){this._flags=e,this._onAuthRequiredServersChanged=r,this._logger=xs("McpAuth"),this._authRequired=new Set,this._authState={}}static getAuthTypeFunctional(e){switch(e){case gt.OAUTH:case gt.MIGRATION_OAUTH:return gt.OAUTH;case gt.HEADER:return gt.HEADER;default:return e}}async getAuthHeaders(e){if(!e.name)return void this._logger.error("MCP server config is missing name");if(this._logger.debug(`Getting auth headers for MCP: ${e.name}`),(e.type==="http"||e.type==="sse")&&e.headers)return this._logger.debug(`Using headers from config for MCP: ${e.name}`),e.headers;const r=await this.getAuthSecret(e);if(r)switch(r.type){case gt.OAUTH:case gt.MIGRATION_OAUTH:return{Authorization:`Bearer ${await this.getAccessToken(e.name,r)}`};case gt.HEADER:return r.headers}else this._logger.warn(`No auth secret found for MCP: ${e.name}`)}async getAccessToken(e,r){switch(r.type){case gt.OAUTH:return await this.getAccessTokenOAuthFromSecret(e,r);case gt.MIGRATION_OAUTH:return r.accessToken;default:return}}async getAccessTokenOAuthFromSecret(e,r){const s=Date.now();if(!(r.expiresAt&&s+2e4>=r.expiresAt))return r.accessToken;if(this._logger.debug(`Token for MCP ${e} is expiring soon, attempting refresh`),this._flags.shouldRefreshTokens===!0)try{const n=await pr.refreshTokenGrant(r);return await this.setAuthSecret(e,n),this._logger.debug(`Successfully refreshed and stored new token for MCP: ${e}`),n.accessToken}catch(n){this._logger.error(`Failed to refresh token for MCP ${e}: ${br(n)}`)}else this._logger.debug(`Not refreshing token for MCP ${e} because shouldRefreshTokens is false`);return r.accessToken}async getAuthSecret(e){const r=e.name;if(!r)return void this._logger.error("MCP server config is missing name");let s,n;try{s=await ls().getSecret(this.getAuthSecretKey(r))}catch(i){return void this._logger.error(`Failed to retrieve token data for MCP ${r}: ${br(i)}`)}if(s){try{n=JSON.parse(s)}catch{this._logger.warn(`Failed to parse auth secret data for MCP ${r}, reformatting it into migration format.`),n=await this._migrateAuthSecretMigrationOAuth(r,s)}return typeof n=="string"?(this._logger.error(`Unexpected string value for auth secret for MCP ${r}`),void await this.deleteAuthSecret(r)):(this._logger.debug(`Successfully retrieved auth secret for MCP: ${r}`),n)}this._logger.warn(`No token data found for MCP ${r}`)}async _migrateAuthSecretMigrationOAuth(e,r){const s={type:gt.MIGRATION_OAUTH,accessToken:r};return await this.setAuthSecret(e,s),s}async setAuthSecret(e,r){try{this._logger.debug(`Storing auth secret for MCP: ${e}`),await ls().setSecret(this.getAuthSecretKey(e),JSON.stringify(r)),this._logger.debug(`Successfully stored auth secret for MCP: ${e}`)}catch(s){throw this._logger.error(`Failed to store token data for MCP ${e}: ${br(s)}`),new Error(`Failed to store token data for MCP ${e}: ${br(s)}`)}}async deleteAuthSecret(e){try{this._logger.debug(`Deleting auth secret for MCP: ${e}`),await ls().deleteSecret(this.getAuthSecretKey(e)),this._logger.debug(`Successfully deleted auth secret for MCP: ${e}`)}catch(r){throw this._logger.error(`Failed to delete token data for MCP ${e}: ${br(r)}`),new Error(`Failed to delete token data for MCP ${e}: ${br(r)}`)}}getAuthSecretKey(e){return`${Ba.MCP_ACCESS_TOKEN_KEY_PREFIX}${e}`}getAuthRequiredServers(){return this._authRequired}isAuthRequired(e){return this._authRequired.has(e)}addAuthRequired(e){this._authRequired.has(e)||(this._authRequired.add(e),this._notifyUpdateAuthRequiredServers())}removeAuthRequired(e){this._authRequired.has(e)&&(this._authRequired.delete(e),this._notifyUpdateAuthRequiredServers())}getAuthState(e){return this._authState[e]}setAuthState(e,r){this._authState[e]=r}deleteAuthState(e){delete this._authState[e]}async initiateOAuth(e,r,s){const n=new URL(r.url);this._logger.debug(`Initiating OAuth for MCP ${e} (${n.toString()})`);const i=await pr.discover(n);this._logger.debug(`Discovered OAuth metadata URL for MCP ${e}: ${i.toString()}`);const d=await pr.getAuthServerMetadata(i);this._logger.debug(`Successfully retrieved OAuth metadata for MCP ${e}`);const v=r.clientId?pr.buildClientFromConfig(r):await pr.registerClient(d,[s]);this._logger.debug(`Successfully ${r.clientId?"built":"registered"} client for MCP ${e} (client_id: ${v.client_id})`);const m=await pr.buildAuthorizationState(n,v,d,s);return this._logger.debug(`Successfully built authorization state for MCP ${e}`),this.setAuthState(e,m),m.authUri.toString()}async handleOAuthCallback(e,r){this._logger.debug(`Handling OAuth callback for MCP ${e}`);const s=this.getAuthState(e);if(this.deleteAuthState(e),s?.type!==gt.OAUTH)throw this._logger.error(`Unexpected auth state type for MCP ${e}: expected ${gt.OAUTH}, got ${s?.type}`),new Error(`Unexpected auth state type: ${s?.type}`);let n;try{n=await pr.authorizationCodeGrant(r,s)}catch(i){throw this._logger.error(`Failed to complete OAuth for MCP ${e}: ${br(i)}`),new Error(`Failed to complete OAuth: ${br(i)}`)}this._logger.debug(`Successfully completed OAuth for MCP ${e}`),await this.setAuthSecret(e,n)}_notifyUpdateAuthRequiredServers(){this._onAuthRequiredServersChanged&&this._onAuthRequiredServersChanged()}};Ba.MCP_ACCESS_TOKEN_KEY_PREFIX="augment.mcp-access-token.";let Ts=Ba;var Xv=y("<div></div>"),Zv=y(" <!>",1),Qv=y('<div class="server-name svelte-8g1e5g"><!></div>'),eh=y('<div class="l-header svelte-8g1e5g"><!> <!> <!> <div class="command-text svelte-8g1e5g"><!></div></div>'),th=y('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),rh=y('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),ah=y('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),sh=y('<div class="status-controls-button svelte-8g1e5g"><!> <!></div>'),nh=y("<!> <!> <!> <!>",1),ih=y("<!> <!>",1),oh=y('<div class="server-actions svelte-8g1e5g"><!> <div class="status-controls svelte-8g1e5g"><!> <!></div></div>'),lh=y('<div class="c-tool-item svelte-8g1e5g"><div class="c-tool-info svelte-8g1e5g"><div class="tool-status svelte-8g1e5g"><div></div> <!></div> <div class="c-tool-description svelte-8g1e5g"><!></div></div></div>'),ch=y('<div class="c-tool-items svelte-8g1e5g"></div>'),dh=y('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>',1),uh=y('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!> <div class="connection-type-buttons svelte-8g1e5g"><!> <!></div></div></div>',1),vh=y('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),hh=y('<div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div>'),gh=y('<!> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div> <!>',1),ph=y('<div class="advanced-section svelte-8g1e5g"><div class="advanced-header svelte-8g1e5g"><!></div> <div class="form-row svelte-8g1e5g"><div class="input-field svelte-8g1e5g"><!></div></div></div>'),mh=y('<form><div class="server-edit-form svelte-8g1e5g"><div class="server-header svelte-8g1e5g"><div class="server-title svelte-8g1e5g"><div class="server-icon svelte-8g1e5g"><!></div> <!></div></div> <!> <!> <!> <div class="form-actions-row svelte-8g1e5g"><div><!></div> <div class="form-actions svelte-8g1e5g"><!> <!></div></div></div></form>');function mn(o,e){xe(e,!0);const[r,s]=Ut();let n=le(e,"server",3,null),i=le(e,"mode",15,"view"),d=le(e,"mcpServerError",15,""),v=le(e,"busy",15,!1);const m=e.mcpServerModel.getToolsStore();let h=z((()=>n()?De(m,"$toolsStore",r)[n().name]??[]:[])),p=te(0);const $=e.mcpServerModel.getAuthRequiredStore();let N=z((()=>i()==="add"||i()==="edit"&&zr(n()))),T=z((()=>i()==="addRemote"||i()==="edit"&&Xt(n()))),E=z((()=>Xt(n()))),b=z((()=>Date.now()-t(p)<3e3)),k=z((()=>t(E)&&!n()?.disabled&&n()&&De($,"$authRequiredSet",r).has(n()?.name)&&t(h).length===0&&!t(b))),S=te(At(n()?.name??"")),R=te(At(Xt(n())?"":zr(n())?n().command:"")),u=te(At(Xt(n())?n().url:"")),_=te(At(zr(n())?n().env??{}:{})),f=te(""),A=te(At(Xt(n())?n().type:"http")),C=te(void 0),x=te(At({})),I=te(At(Xt(n())?n().clientId??"":""));async function B(){const ne=Xt(n())?await e.mcpServerModel.getAuthSecret(n().name):void 0;g(C,ne?Ts.getAuthTypeFunctional(ne?.type):gt.OAUTH,!0),g(x,ne?.type===gt.HEADER?ne?.headers:{},!0),ee()}er((async()=>{await B()}));let D=te(At([]));J();let H=te(At([]));ee();let L=te(!0);function J(){g(D,Object.entries(t(_)).map((([ne,ye])=>({id:crypto.randomUUID(),key:ne,value:ye}))),!0)}function ee(){g(H,Object.entries(t(x)).map((([ne,ye])=>({id:crypto.randomUUID(),key:ne,value:ye}))),!0)}let Se=te(void 0);pt((()=>{t(S)&&t(R)&&d("")}));let Ee=z((()=>!((i()!=="add"||t(S).trim()&&t(R).trim())&&(i()!=="addRemote"||t(S).trim()&&t(u).trim())))),V=z((()=>i()==="addJson"&&!t(f).trim())),ge=z((()=>t(Ee)||i()==="view"||t(V))),G=z((()=>(()=>{switch(i()){case"add":return"New MCP Server";case"addRemote":return"New Remote MCP Server";case"addJson":return"Import MCP Server";default:return"Edit MCP Server"}})()));function ae(){n()&&i()==="view"&&(i("edit"),e.onEdit(n()),t(Se)?.requestClose())}function se({key:ne,value:ye}){return ne.trim()&&ye.trim()}async function fe(){d(""),v(!0);const ne=t(D).filter(se);g(_,Object.fromEntries(ne.map((({key:q,value:ue})=>[q.trim(),ue.trim()]))),!0),J();const ye=t(H).filter(se);g(x,Object.fromEntries(ye.map((({key:q,value:ue})=>[q.trim(),ue.trim()]))),!0),ee();const Oe=t(C)===gt.HEADER?{type:gt.HEADER,headers:t(x)}:void 0;try{if(i()==="add"){const q={type:"stdio",name:t(S).trim(),command:t(R).trim(),args:[],useShellInterpolation:!0,env:Object.keys(t(_)).length>0?t(_):void 0};await e.onAdd(q)}else if(i()==="addRemote"){const q={type:t(A),name:t(S).trim(),url:t(u).trim(),...t(I).trim()?{clientId:t(I).trim()}:{}};await e.onAdd(q,Oe)}else if(i()==="addJson"){try{JSON.parse(t(f))}catch(q){const ue=q instanceof Error?q.message:String(q);throw new Jt(`Invalid JSON format: ${ue}`)}await e.onJSONImport(t(f))}else if(i()==="edit"&&n()){if(Xt(n())){const q={...n(),type:t(A),name:t(S).trim(),url:t(u).trim(),clientId:t(I).trim()||void 0};await e.onSave(q,Oe)}else if(zr(n())){const q={...n(),name:t(S).trim(),command:t(R).trim(),args:[],env:Object.keys(t(_)).length>0?t(_):void 0};await e.onSave(q)}}}catch(q){d(q instanceof Jt?q.message:"Failed to save server"),console.warn(q)}finally{v(!1)}}function P(){v(!1),d(""),e.onCancel?.(),g(f,""),g(S,n()?.name??"",!0),g(R,Xt(n())?"":zr(n())?n().command:"",!0),g(u,Xt(n())?n().url:"",!0),g(A,Xt(n())?n().type:"http",!0),g(I,Xt(n())?n().clientId??"":"",!0),g(_,zr(n())&&n().env?{...n().env}:{},!0),J(),B()}var F={loadAuthHeaders:B,setLocalEnvVarFormState:J,setLocalAuthHeaderFormState:ee},ce=Y(),re=O(ce),Fe=ne=>{En(ne,{get collapsed(){return t(L)},set collapsed(q){g(L,q,!0)},header:q=>{zt(q,{transparent:!0,headerLeft:we=>{var oe=eh(),ve=l(oe),$e=X=>{kn(X,{})};M(ve,(X=>{t(h).length>0&&X($e)}));var pe=c(ve,2);{let X=z((()=>e.disabledText||(t(k)?"Authentication required":e.warningText)));Ht(pe,{get content(){return t(X)},children:(ke,Te)=>{var Ae=Xv();let Me;j((()=>Me=xt(Ae,1,"c-dot svelte-8g1e5g",null,Me,{"c-green":!e.disabledText&&!t(k),"c-warning":t(k)||!e.disabledText&&!!e.warningText,"c-red":!!e.disabledText&&!t(k),"c-disabled":n().disabled}))),a(ke,Ae)},$$slots:{default:!0}})}var W=c(pe,2);Ht(W,{get content(){return n().name},side:"top",align:"start",children:(X,ke)=>{var Te=Qv(),Ae=l(Te);U(Ae,{size:1,weight:"medium",children:(Me,Re)=>{var We=Zv(),Ye=O(We),ze=c(Ye),K=Z=>{var _e=w();j((()=>de(_e,`(${t(h).length??""}) tools`))),a(Z,_e)};M(ze,(Z=>{t(h).length>0&&Z(K)})),j((()=>de(Ye,`${n().name??""} `))),a(Me,We)},$$slots:{default:!0}}),a(X,Te)},$$slots:{default:!0}});var Q=c(W,2),he=l(Q);{let X=z((()=>sn(n())));Ht(he,{get content(){return t(X)},side:"top",align:"start",children:(ke,Te)=>{U(ke,{color:"secondary",size:1,weight:"regular",children:(Ae,Me)=>{var Re=w();j((We=>de(Re,We)),[()=>sn(n())]),a(Ae,Re)},$$slots:{default:!0}})},$$slots:{default:!0}})}a(we,oe)},headerRight:we=>{var oe=oh(),ve=l(oe),$e=X=>{Ke(X,{size:1,variant:"surface",color:"warning",onclick:()=>{n().type==="http"&&t(C)===gt.OAUTH?e.onAuthenticate?.(n()):t(C)===gt.HEADER&&ae()},children:(ke,Te)=>{var Ae=w("Authenticate");a(ke,Ae)},$$slots:{default:!0}})};M(ve,(X=>{t(k)&&X($e)}));var pe=c(ve,2),W=l(pe),Q=X=>{{let ke=z((()=>!n().disabled));Tr(X,{size:2,get checked(){return t(ke)},onChange:()=>{n()&&(g(p,Date.now(),!0),e.onToggleDisableServer(n().id)),t(Se)?.requestClose()}})}};M(W,(X=>{(si()||yn())&&X(Q)}));var he=c(W,2);Ce(he,(()=>ot.Root),((X,ke)=>{Zt(ke(X,{children:(Te,Ae)=>{var Me=ih(),Re=O(Me);Ce(Re,(()=>ot.Trigger),((Ye,ze)=>{ze(Ye,{children:(K,Z)=>{Et(K,{size:.5,variant:"ghost-block",color:"neutral",children:(_e,qe)=>{me(_e,{name:"ellipsis"})},$$slots:{default:!0}})},$$slots:{default:!0}})}));var We=c(Re,2);Ce(We,(()=>ot.Content),((Ye,ze)=>{ze(Ye,{side:"bottom",align:"end",children:(K,Z)=>{var _e=nh(),qe=O(_e);Ce(qe,(()=>ot.Item),((Je,at)=>{at(Je,{onSelect:ae,children:(et,Pe)=>{var tt=th(),ct=l(tt);me(ct,{name:"square-pen"});var Ze=c(ct,2);U(Ze,{size:1,weight:"medium",children:(Qe,Le)=>{var st=w("Edit");a(Qe,st)},$$slots:{default:!0}}),a(et,tt)},$$slots:{default:!0}})}));var He=c(qe,2);Ce(He,(()=>ot.Item),((Je,at)=>{at(Je,{onSelect:()=>{(function(){if(n()){const et=ca.convertServerToJSON(n());navigator.clipboard.writeText(et)}})(),t(Se)?.requestClose()},children:(et,Pe)=>{var tt=rh(),ct=l(tt);me(ct,{name:"copy"});var Ze=c(ct,2);U(Ze,{size:1,weight:"medium",children:(Qe,Le)=>{var st=w("Copy JSON");a(Qe,st)},$$slots:{default:!0}}),a(et,tt)},$$slots:{default:!0}})}));var Ue=c(He,2),Ie=Je=>{var at=Y(),et=O(at);Ce(et,(()=>ot.Item),((Pe,tt)=>{tt(Pe,{onSelect:()=>{e.onAuthenticate(n()),t(Se)?.requestClose()},children:(ct,Ze)=>{var Qe=ah(),Le=l(Qe);me(Le,{name:"rotate-cw"});var st=c(Le,2);U(st,{size:1,weight:"medium",children:(nt,it)=>{var lt=w("Reauthenticate");a(nt,lt)},$$slots:{default:!0}}),a(ct,Qe)},$$slots:{default:!0}})})),a(Je,at)};M(Ue,(Je=>{t(E)&&t(C)===gt.OAUTH&&e.onAuthenticate&&Je(Ie)}));var Ve=c(Ue,2);Ce(Ve,(()=>ot.Item),((Je,at)=>{at(Je,{color:"error",onSelect:()=>{e.onDelete(n()),t(Se)?.requestClose()},children:(et,Pe)=>{var tt=sh(),ct=l(tt);me(ct,{name:"trash-2"});var Ze=c(ct,2);U(Ze,{size:1,weight:"medium",children:(Qe,Le)=>{var st=w("Delete");a(Qe,st)},$$slots:{default:!0}}),a(et,tt)},$$slots:{default:!0}})})),a(K,_e)},$$slots:{default:!0}})})),a(Te,Me)},$$slots:{default:!0}}),(Te=>g(Se,Te,!0)),(()=>t(Se)))})),a(we,oe)},$$slots:{headerLeft:!0,headerRight:!0}})},footer:q=>{var ue=ch();mt(ue,21,(()=>t(h)),(ie=>ie.definition.name),((ie,we)=>{zt(ie,{children:(oe,ve)=>{var $e=lh(),pe=l($e),W=l(pe),Q=l(W);let he;var X=c(Q,2);U(X,{size:1,weight:"medium",children:(Ae,Me)=>{var Re=w();j((()=>de(Re,t(we).definition.mcp_tool_name||t(we).definition.name))),a(Ae,Re)},$$slots:{default:!0}});var ke=c(W,2),Te=l(ke);Ht(Te,{get content(){return t(we).definition.description},align:"start",children:(Ae,Me)=>{var Re=Y(),We=O(Re),Ye=ze=>{U(ze,{size:1,color:"secondary",children:(K,Z)=>{var _e=w();j((()=>de(_e,t(we).definition.description))),a(K,_e)},$$slots:{default:!0}})};M(We,(ze=>{t(we).definition.description&&ze(Ye)})),a(Ae,Re)},$$slots:{default:!0}}),j((()=>he=xt(Q,1,"tool-status-dot svelte-8g1e5g",null,he,{enabled:t(we).enabled,disabled:!t(we).enabled}))),a(oe,$e)},$$slots:{default:!0}})})),a(q,ue)},$$slots:{header:!0,footer:!0}})},Be=ne=>{var ye=mh(),Oe=l(ye),q=l(Oe),ue=l(q),ie=l(ue),we=l(ie);me(we,{name:"cpu"});var oe=c(ie,2);U(oe,{color:"secondary",size:1,weight:"medium",children:(K,Z)=>{var _e=w();j((()=>de(_e,t(G)))),a(K,_e)},$$slots:{default:!0}});var ve=c(q,2),$e=K=>{var Z=dh(),_e=O(Z),qe=l(_e),He=l(qe);U(He,{size:1,weight:"medium",children:(Je,at)=>{var et=w("Code Snippet");a(Je,et)},$$slots:{default:!0}});var Ue=c(_e,2),Ie=l(Ue),Ve=l(Ie);Ja(Ve,{size:1,placeholder:"Paste JSON here...",get value(){return t(f)},set value(Je){g(f,Je,!0)}}),a(K,Z)},pe=K=>{var Z=Y(),_e=O(Z),qe=He=>{var Ue=gh(),Ie=O(Ue),Ve=Ze=>{var Qe=uh(),Le=O(Qe),st=l(Le),nt=l(st);U(nt,{size:1,weight:"medium",children:(Dt,Ft)=>{var Ct=w("Connection Type");a(Dt,Ct)},$$slots:{default:!0}});var it=c(nt,2),lt=l(it);{let Dt=z((()=>t(A)==="http"?"solid":"ghost")),Ft=z((()=>t(A)==="http"?"accent":"neutral"));Ke(lt,{size:1,get variant(){return t(Dt)},get color(){return t(Ft)},type:"button",onclick:()=>g(A,"http"),children:(Ct,qt)=>{var Vt=w("HTTP");a(Ct,Vt)},$$slots:{default:!0}})}var ft=c(lt,2);{let Dt=z((()=>t(A)==="sse"?"solid":"ghost")),Ft=z((()=>t(A)==="sse"?"accent":"neutral"));Ke(ft,{size:1,get variant(){return t(Dt)},get color(){return t(Ft)},type:"button",onclick:()=>g(A,"sse"),children:(Ct,qt)=>{var Vt=w("SSE");a(Ct,Vt)},$$slots:{default:!0}})}var Nt=c(Le,2),Lt=l(Nt),tr=l(Lt);U(tr,{size:1,weight:"medium",children:(Dt,Ft)=>{var Ct=w("Authentication Type");a(Dt,Ct)},$$slots:{default:!0}});var Yt=c(tr,2),yt=l(Yt);{let Dt=z((()=>t(C)==="oauth"?"solid":"ghost")),Ft=z((()=>t(C)==="oauth"?"accent":"neutral"));Ke(yt,{size:1,get variant(){return t(Dt)},get color(){return t(Ft)},type:"button",onclick:()=>g(C,gt.OAUTH,!0),children:(Ct,qt)=>{var Vt=w("OAuth");a(Ct,Vt)},$$slots:{default:!0}})}var Mt=c(yt,2);{let Dt=z((()=>t(C)==="header"?"solid":"ghost")),Ft=z((()=>t(C)==="header"?"accent":"neutral"));Ke(Mt,{size:1,get variant(){return t(Dt)},get color(){return t(Ft)},type:"button",onclick:()=>g(C,gt.HEADER,!0),children:(Ct,qt)=>{var Vt=w("Header");a(Ct,Vt)},$$slots:{default:!0}})}a(Ze,Qe)};M(Ie,(Ze=>{t(T)&&Ze(Ve)}));var Je=c(Ie,2),at=l(Je),et=l(at);Pt(et,{size:1,onfocus:ae,placeholder:"Enter a name for your MCP server (e.g., 'Server Memory')",get value(){return t(S)},set value(Qe){g(S,Qe,!0)},label:Qe=>{U(Qe,{size:1,weight:"medium",children:(Le,st)=>{var nt=w("Name");a(Le,nt)},$$slots:{default:!0}})},$$slots:{label:!0}});var Pe=c(Je,2),tt=Ze=>{var Qe=vh(),Le=l(Qe),st=l(Le);Pt(st,{size:1,onfocus:ae,placeholder:"Enter the URL (e.g., 'https://api.example.com/mcp')",get value(){return t(u)},set value(it){g(u,it,!0)},label:it=>{U(it,{size:1,weight:"medium",children:(lt,ft)=>{var Nt=w("URL");a(lt,Nt)},$$slots:{default:!0}})},$$slots:{label:!0}}),a(Ze,Qe)},ct=Ze=>{var Qe=hh(),Le=l(Qe),st=l(Le);Pt(st,{size:1,onfocus:ae,placeholder:"Enter the MCP command (e.g., 'npx -y @modelcontextprotocol/server-memory')",get value(){return t(R)},set value(it){g(R,it,!0)},label:it=>{U(it,{size:1,weight:"medium",children:(lt,ft)=>{var Nt=w("Command");a(lt,Nt)},$$slots:{default:!0}})},$$slots:{label:!0}}),a(Ze,Qe)};M(Pe,(Ze=>{t(T)?Ze(tt):Ze(ct,!1)})),a(He,Ue)};M(_e,(He=>{i()!=="add"&&i()!=="addRemote"&&i()!=="edit"||He(qe)}),!0),a(K,Z)};M(ve,(K=>{i()==="addJson"?K($e):K(pe,!1)}));var W=c(ve,2),Q=K=>{un(K,{handleEnterEditMode:ae,title:"Environment Variables",keyPlaceholder:"Key",valuePlaceholder:"Value",addButtonText:"Variable",get keyValEntries(){return t(D)},set keyValEntries(Z){g(D,Z,!0)}})},he=K=>{var Z=Y(),_e=O(Z),qe=He=>{un(He,{handleEnterEditMode:ae,title:"Headers",keyPlaceholder:"Header",valuePlaceholder:"Value",addButtonText:"Header",get keyValEntries(){return t(H)},set keyValEntries(Ue){g(H,Ue,!0)}})};M(_e,(He=>{t(T)&&t(C)===gt.HEADER&&He(qe)}),!0),a(K,Z)};M(W,(K=>{t(N)?K(Q):K(he,!1)}));var X=c(W,2),ke=K=>{var Z=ph(),_e=l(Z),qe=l(_e);U(qe,{size:1,weight:"medium",color:"secondary",children:(Ve,Je)=>{var at=w("Advanced");a(Ve,at)},$$slots:{default:!0}});var He=c(_e,2),Ue=l(He),Ie=l(Ue);Pt(Ie,{size:1,onfocus:ae,placeholder:"Leave empty to use dynamic client registration",get value(){return t(I)},set value(Je){g(I,Je,!0)},label:Je=>{U(Je,{size:1,weight:"medium",children:(at,et)=>{var Pe=w("OAuth Client ID");a(at,Pe)},$$slots:{default:!0}})},$$slots:{label:!0}}),a(K,Z)};M(X,(K=>{t(T)&&t(C)===gt.OAUTH&&K(ke)}));var Te=c(X,2),Ae=l(Te);let Me;var Re=l(Ae);or(Re,{variant:"soft",color:"error",size:1,icon:Z=>{me(Z,{name:"circle-x"})},children:(Z,_e)=>{var qe=w();j((()=>de(qe,d()))),a(Z,qe)},$$slots:{icon:!0,default:!0}});var We=c(Ae,2),Ye=l(We);Ke(Ye,{size:1,variant:"ghost",color:"neutral",onclick:P,type:"button",children:(K,Z)=>{var _e=w("Cancel");a(K,_e)},$$slots:{default:!0}});var ze=c(Ye,2);Ke(ze,{size:1,variant:"solid",color:"accent",get loading(){return v()},type:"submit",get disabled(){return t(ge)},children:(K,Z)=>{var _e=Y(),qe=O(_e),He=Ie=>{var Ve=w("Import");a(Ie,Ve)},Ue=Ie=>{var Ve=Y(),Je=O(Ve),at=Pe=>{var tt=w("Add");a(Pe,tt)},et=Pe=>{var tt=Y(),ct=O(tt),Ze=Le=>{var st=w("Add");a(Le,st)},Qe=Le=>{var st=Y(),nt=O(st),it=lt=>{var ft=w("Save");a(lt,ft)};M(nt,(lt=>{i()==="edit"&&lt(it)}),!0),a(Le,st)};M(ct,(Le=>{i()==="addRemote"?Le(Ze):Le(Qe,!1)}),!0),a(Pe,tt)};M(Je,(Pe=>{i()==="add"?Pe(at):Pe(et,!1)}),!0),a(Ie,Ve)};M(qe,(Ie=>{i()==="addJson"?Ie(He):Ie(Ue,!1)})),a(K,_e)},$$slots:{default:!0}}),j((()=>{xt(ye,1,"c-mcp-server-card "+(i()==="add"||i()==="addJson"||i()==="addRemote"?"add-server-section":"server-item"),"svelte-8g1e5g"),Me=xt(Ae,1,"error-container svelte-8g1e5g",null,Me,{"is-error":!!d()})})),Kt("submit",ye,(K=>{K.preventDefault(),fe()})),a(ne,ye)};M(re,(ne=>{i()==="view"&&n()?ne(Fe):ne(Be,!1)})),a(o,ce);var je=Ne(F);return s(),je}var fh=y('<div class="mcp-install-left svelte-14uub1e"><!> <!></div>'),yh=y('<div class="mcp-install-header svelte-14uub1e"><!></div>'),_h=y('<div class="user-input-field svelte-14uub1e"><!> <!> <!></div>'),bh=y('<div class="user-input-container svelte-14uub1e"><!> <div class="user-input-actions svelte-14uub1e"><!> <!></div></div>'),wh=y('<div class="mcp-service-content svelte-14uub1e"><!> <div class="mcp-service-info svelte-14uub1e"><div class="mcp-service-title svelte-14uub1e"><!></div> <!> <!></div></div>'),$h=y('<div class="installed-indicator svelte-14uub1e"><!></div>'),Sh=y('<div class="mcp-service-actions svelte-14uub1e"><!></div>'),Eh=y('<div class="mcp-service-item"><!></div>'),kh=y('<div class="mcp-install-content svelte-14uub1e"><div class="mcp-list-container svelte-14uub1e"></div></div>'),Ch=y('<div class="mcp-install-wrapper svelte-14uub1e"><!></div>');function Ah(o,e){xe(e,!0);let r=le(e,"onMCPServerAdd",19,(()=>{})),s=le(e,"servers",19,(()=>[]));const n="easyMCPInstall.collapsed";let i=te(!1),d=te(!1);pt((()=>{const E=localStorage.getItem(n);if(E!==null)try{g(i,JSON.parse(E),!0)}catch{localStorage.removeItem(n)}g(d,!0)})),pt((()=>{typeof window<"u"&&t(d)&&localStorage.setItem(n,JSON.stringify(t(i)))}));let v=te(null),m=te(At({})),h=At({});function p(E){if(!E.userInput)return;for(let R=0;R<E.userInput.length;R++){const u=E.userInput[R];let _;if(_=u.type==="environmentVariable"&&u.envVarName?u.envVarName:u.correspondingArg?u.correspondingArg:`input_${R}`,!t(m)[_]?.trim()){const A=h[_];return void(A&&A.focus())}}let b=[E.command],k={};E.args&&b.push(...E.args);for(let R=0;R<E.userInput.length;R++){const u=E.userInput[R];let _;_=u.type==="environmentVariable"&&u.envVarName?u.envVarName:u.correspondingArg?u.correspondingArg:`input_${R}`;const f=t(m)[_].trim(),A=`"${f}"`;if(u.type==="environmentVariable"&&u.envVarName)k[u.envVarName]=f;else if(u.correspondingArg){const C=b.indexOf(u.correspondingArg);C!==-1?b.splice(C+1,0,A):b.push(u.correspondingArg,A)}else b.push(A)}const S={type:"stdio",name:E.label,command:b.join(" "),args:[],useShellInterpolation:!0,env:Object.keys(k).length>0?k:void 0};r()&&r()(S),g(v,null),g(m,{},!0)}function $(){g(v,null),g(m,{},!0)}var N=Ch(),T=l(N);En(T,{get collapsed(){return t(i)},set collapsed(b){g(i,b,!0)},header:b=>{var k=yh();{const S=R=>{var u=fh(),_=l(u);kn(_,{});var f=c(_,2);U(f,{color:"neutral",size:1,weight:"light",class:"card-title",children:(A,C)=>{var x=w("Easy MCP Installation");a(A,x)},$$slots:{default:!0}}),a(R,u)};zt(l(k),{transparent:!0,headerLeft:S,$$slots:{headerLeft:!0}})}a(b,k)},children:(b,k)=>{var S=kh(),R=l(S);mt(R,21,(()=>Nn),(u=>u.label),((u,_)=>{var f=Eh();{const A=x=>{var I=wh(),B=l(I);me(B,{get name(){return t(_).iconName},size:4});var D=c(B,2),H=l(D),L=l(H);U(L,{size:1,weight:"medium",children:(V,ge)=>{var G=w();j((()=>de(G,t(_).label))),a(V,G)},$$slots:{default:!0}});var J=c(H,2),ee=V=>{U(V,{size:1,color:"secondary",children:(ge,G)=>{var ae=w();j((()=>de(ae,t(_).description))),a(ge,ae)},$$slots:{default:!0}})};M(J,(V=>{t(_).description&&V(ee)}));var Se=c(J,2),Ee=V=>{var ge=bh(),G=l(ge);mt(G,17,(()=>t(_).userInput),fn,((P,F,ce)=>{const re=z((()=>t(F).type==="environmentVariable"&&t(F).envVarName?t(F).envVarName:t(F).type==="argument"&&t(F).correspondingArg||`input_${ce}`));var Fe=_h(),Be=l(Fe);U(Be,{size:1,weight:"medium",color:"neutral",children:(Oe,q)=>{var ue=w();j((()=>de(ue,t(F).label))),a(Oe,ue)},$$slots:{default:!0}});var je=c(Be,2),ne=Oe=>{U(Oe,{size:1,color:"secondary",children:(q,ue)=>{var ie=w();j((()=>de(ie,t(F).description))),a(q,ie)},$$slots:{default:!0}})};M(je,(Oe=>{t(F).description&&Oe(ne)}));var ye=c(je,2);{let Oe=z((()=>t(F).placeholder||""));Pt(ye,{get placeholder(){return t(Oe)},size:1,variant:"surface",onkeydown:q=>{q.key==="Enter"?p(t(_)):q.key==="Escape"&&$()},get value(){return t(m)[t(re)]},set value(q){t(m)[t(re)]=q},get textInput(){return h[t(re)]},set textInput(q){h[t(re)]=q}})}a(P,Fe)}));var ae=c(G,2),se=l(ae);Ke(se,{variant:"ghost-block",color:"accent",size:1,onclick:()=>p(t(_)),children:(P,F)=>{var ce=w("Install");a(P,ce)},$$slots:{default:!0}});var fe=c(se,2);Ke(fe,{variant:"ghost-block",color:"neutral",size:1,onclick:$,children:(P,F)=>{var ce=w("Cancel");a(P,ce)},$$slots:{default:!0}}),a(V,ge)};M(Se,(V=>{t(v)===t(_).label&&t(_).userInput&&V(Ee)})),a(x,I)},C=x=>{var I=Sh(),B=l(I),D=L=>{var J=$h(),ee=l(J);Ce(ee,(()=>hr.Root),((Se,Ee)=>{Ee(Se,{color:"success",size:1,variant:"soft",children:(V,ge)=>{var G=w("Installed");a(V,G)},$$slots:{default:!0}})})),a(L,J)},H=L=>{var J=Y(),ee=O(J),Se=Ee=>{Et(Ee,{variant:"ghost-block",color:"accent",size:1,onclick:()=>(function(V){if(s().some((G=>G.name===V.label)))return;if(V.userInput&&V.userInput.length>0)return g(m,{},!0),V.userInput.forEach(((G,ae)=>{let se;se=G.type==="environmentVariable"&&G.envVarName?G.envVarName:G.correspondingArg?G.correspondingArg:`input_${ae}`,t(m)[se]=G.defaultValue||""})),void g(v,V.label,!0);const ge={type:"stdio",name:V.label,command:V.args?`${V.command} ${V.args.join(" ")}`:V.command,args:[],useShellInterpolation:!0};r()&&r()(ge)})(t(_)),children:(V,ge)=>{me(V,{name:"plus"})},$$slots:{default:!0}})};M(ee,(Ee=>{t(v)!==t(_).label&&Ee(Se)}),!0),a(L,J)};M(B,(L=>{s().some((J=>J.name===t(_).label))?L(D):L(H,!1)})),a(x,I)};zt(l(f),{headerLeft:A,headerRight:C,$$slots:{headerLeft:!0,headerRight:!0}})}a(u,f)})),a(b,S)},$$slots:{header:!0,default:!0}}),a(o,N),Ne()}const Rh={mcpDocsURL:"https://docs.augmentcode.com/setup-augment/mcp"},Th={mcpDocsURL:"https://docs.augmentcode.com/jetbrains/setup-augment/mcp"},Ih=ni(),xh=new class{strings;constructor(o){let e={[ts.vscode]:{},[ts.jetbrains]:Th,[ts.web]:{}};this.strings={...Rh,...e[o]}}get(o){return this.strings[o]}}(Ih.clientType);var Nh=y(`<div class="c-mcp-category svelte-2oxayh"><div class="mcp-servers svelte-2oxayh"><!> <div class="description-text svelte-2oxayh">Configure a new Model Context Protocol server to connect Augment to custom tools. Find out
      more about MCP <a>in the docs</a>.</div> <!> <!></div> <!> <div class="add-mcp-button-container svelte-2oxayh"><!> <!> <!></div></div>`);function Mh(o,e){xe(e,!0);const[r,s]=Ut();let n=le(e,"isMCPImportEnabled",3,!0);const i=sr();function d(se){i.startRemoteMCPAuth(se.name)}let v=te(null),m=te(null),h=z((()=>t(m)==="add"||t(m)==="addJson"||t(m)==="addRemote"||t(v)!==null));function p(){g(v,null),g(m,null),e.onCancel?.()}const $=Xa(),N=$.getServers(),T=$.getToolsStore();let E=z((()=>go(De(N,"$allServers",r))));function b(se){g(v,se.id,!0)}function k(se){return async function(...fe){const P=await se(...fe);return g(m,null),g(v,null),P}}const S=k(e.onMCPServerAdd),R=k(e.onMCPServerSave),u=k(e.onMCPServerJSONImport),_=k(e.onMCPServerDelete),f=k(e.onMCPServerToggleDisable),A=xh.get("mcpDocsURL");let C=z((()=>(De(T,"$toolsStore",r),$.parseServerValidationMessages(t(E)))));var x=Nh(),I=l(x),B=l(I);Rt(B,{level:1,children:(se,fe)=>{var P=w("MCP");a(se,P)},$$slots:{default:!0}});var D=c(B,2),H=c(l(D)),L=c(D,2);Ah(L,{get onMCPServerAdd(){return S},get servers(){return t(E)}});var J=c(L,2);mt(J,17,(()=>t(E)),(se=>se.id),((se,fe)=>{{let P=z((()=>t(v)===t(fe).id?"edit":"view")),F=z((()=>t(C).errors.get(t(fe).id))),ce=z((()=>t(C).warnings.get(t(fe).id)));mn(se,{get mode(){return t(P)},get server(){return t(fe)},get onAdd(){return S},get onSave(){return R},get onDelete(){return _},get onToggleDisableServer(){return f},onEdit:b,onCancel:p,get onJSONImport(){return u},onAuthenticate:d,get disabledText(){return t(F)},get warningText(){return t(ce)},get mcpServerModel(){return $}})}}));var ee=c(I,2),Se=se=>{mn(se,{get mode(){return t(m)},get onAdd(){return S},get onSave(){return R},get onDelete(){return _},get onToggleDisableServer(){return f},onEdit:b,onCancel:p,get onJSONImport(){return u},onAuthenticate:d,get mcpServerModel(){return $}})};M(ee,(se=>{t(m)!=="add"&&t(m)!=="addJson"&&t(m)!=="addRemote"||se(Se)}));var Ee=c(ee,2),V=l(Ee);Ke(V,{get disabled(){return t(h)},color:"neutral",variant:"soft",size:1,onclick:()=>{g(m,"add")},iconLeft:fe=>{me(fe,{name:"plus"})},children:(fe,P)=>{var F=w("Add MCP");a(fe,F)},$$slots:{iconLeft:!0,default:!0}});var ge=c(V,2);Ke(ge,{get disabled(){return t(h)},color:"neutral",variant:"soft",size:1,onclick:()=>{g(m,"addRemote")},iconLeft:fe=>{me(fe,{name:"plus"})},children:(fe,P)=>{var F=w("Add remote MCP");a(fe,F)},$$slots:{iconLeft:!0,default:!0}});var G=c(ge,2),ae=se=>{Ke(se,{get disabled(){return t(h)},color:"neutral",variant:"soft",size:1,title:"Add MCP from JSON",onclick:()=>{g(m,"addJson")},iconLeft:P=>{me(P,{name:"download"})},children:(P,F)=>{var ce=w("Import from JSON");a(P,ce)},$$slots:{iconLeft:!0,default:!0}})};M(G,(se=>{n()&&se(ae)})),j((()=>ar(H,"href",A))),a(o,x),Ne(),s()}var Ph=y('<div class="c-account-category__plan-wrapper svelte-1ptxg1z"><div class="c-account-category__split c-account-category__plan-section c-account-category__sub-box svelte-1ptxg1z"><div class="c-account-category__split-left c-account-category__plan-details svelte-1ptxg1z"><!> <!></div> <div class="c-account-category__split-right c-account-category__plan-buttons svelte-1ptxg1z"><!></div></div></div>'),Oh=y('<div class="ds-meter__indicator svelte-1wh49el"></div>'),zh=y("<div><!></div>"),Uh=y('<div class="c-account-category__banner-icon svelte-18qxvpu"><!></div>'),Lh=y('<div class="c-account-category__split-right c-account-category__banner-buttons svelte-18qxvpu"><!></div>'),Dh=y('<div class="c-account-category__banner-wrapper svelte-18qxvpu"><div class="c-account-category__split c-account-category__banner-section svelte-18qxvpu"><div class="c-account-category__split-left c-account-category__banner-details svelte-18qxvpu"><!> <div class="c-account-category__banner-text svelte-18qxvpu"><!></div></div> <!></div></div>');function Fh(o,e){xe(e,!0);const r=sr(),s=()=>{r.track(bt.WEBVIEW.CREDIT_BANNER_CLICKED,{message:e.message,button:e.button})},n=z((()=>(E=>{switch(E){case ea.PROMOTION:case ea.WARNING:case ea.ALERT:return"info";case ea.INFO:case ea.BANNER_DISPLAY_STYLE_UNKNOWN:default:return"check"}})(e.displayStyle)));var i=Dh(),d=l(i),v=l(d),m=l(v),h=E=>{var b=Uh(),k=l(b);me(k,{get name(){return t(n)}}),a(E,b)};M(m,(E=>{t(n)!==void 0&&E(h)}));var p=c(m,2),$=l(p);U($,{size:1,weight:"light",children:(E,b)=>{var k=w();j((()=>de(k,e.message))),a(E,k)},$$slots:{default:!0}});var N=c(v,2),T=E=>{var b=Lh(),k=l(b);{let S=z((()=>e.button?.url));Ke(k,{variant:"soft",color:"neutral",size:2,get href(){return t(S)},onclick:s,asAnchor:!0,children:(R,u)=>{U(R,{size:1,weight:"medium",children:(_,f)=>{var A=w();j((()=>de(A,e.button?.title))),a(_,A)},$$slots:{default:!0}})},$$slots:{default:!0}})}a(E,b)};M(N,(E=>{e.button?.title&&E(T)})),a(o,i),Ne()}var Bh=y('<div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left svelte-cothnq"><!></div> <div class="c-account-category__split-right svelte-cothnq"><!></div></div>'),Wh=y('<div class="c-account-category__credits-box svelte-cothnq"><div class="c-account-category__credits-upper svelte-cothnq"><div class="c-account-category__split svelte-cothnq"><div class="c-account-category__split-left c-account-category__credits-title svelte-cothnq"><!> <!> <!></div> <div class="c-account-category__split-right c-account-category__credits-count svelte-cothnq"><!></div></div> <!></div> <div class="c-account-category__credits-lower svelte-cothnq"><div class="c-account-category__credits-stats svelte-cothnq"></div> <!></div></div>');function qh(o,e){xe(e,!0);const r=le(e,"enableCreditBannerInSettings",3,!0);var s=Wh(),n=l(s),i=l(n),d=l(i),v=l(d);me(v,{name:"tokens",size:3});var m=c(v,2);U(m,{size:2,weight:"medium",children:(R,u)=>{var _=w();j((()=>de(_,e.usageUnitDisplayName))),a(R,_)},$$slots:{default:!0}});var h=c(m,2),p=R=>{var u=Y(),_=O(u);Ce(_,(()=>hr.Root),((f,A)=>{A(f,{color:"error",size:1,children:(C,x)=>{var I=w("Out of Credits");a(C,I)},$$slots:{default:!0}})})),a(R,u)};M(h,(R=>{e.usageUnitsTotal<=e.usageUnitsUsed&&R(p)}));var $=c(d,2),N=l($);U(N,{size:2,weight:"medium",children:(R,u)=>{var _=w();j(((f,A)=>de(_,`${f??""} / ${A??""}`)),[()=>e.usageUnitsUsed.toLocaleString("en-US"),()=>e.usageUnitsTotal.toLocaleString("en-US")]),a(R,_)},$$slots:{default:!0}});var T=c(i,2);{let R=z((()=>e.isCreditBalanceLow?"error":"accent"));(function(u,_){xe(_,!0),le(_,"ref",11,null);let f=le(_,"max",3,100),A=le(_,"min",3,0),C=le(_,"value",3,0),x=le(_,"color",3,"accent"),I=le(_,"size",3,2),B=le(_,"labelledby",19,wn),D=rr(_,["$$slots","$$events","$$legacy","ref","class","max","min","value","color","size","labelledby"]);const H=z((()=>Math.min(100,Math.max(0,(C()-A())/(f()-A())*100))));var L=zh();ir(L,(ee=>({...ee,class:["ds-meter",`ds-meter--size-${I()}`,_.class]})),[()=>Sn(x())],void 0,void 0,"svelte-1wh49el");var J=l(L);Ce(J,(()=>Mo),((ee,Se)=>{Se(ee,na({get"aria-labelledby"(){return B()},get"aria-valuetext"(){return`${C()??""} out of ${f()??""}`},class:"ds-meter__root",get value(){return C()},get min(){return A()},get max(){return f()}},(()=>D),{children:(Ee,V)=>{var ge=Oh();let G;j((()=>G=Is(ge,"",G,{"--meter-percentage":`${t(H)??""}%`}))),a(Ee,ge)},$$slots:{default:!0}}))})),a(u,L),Ne()})(T,{get value(){return e.usageUnitsUsed},get max(){return e.usageUnitsTotal},get color(){return t(R)},size:1,get"aria-label"(){return e.usageUnitDisplayName}})}var E=c(n,2),b=l(E);mt(b,21,(()=>e.creditDetails),(R=>R.label),((R,u)=>{var _=Bh(),f=l(_),A=l(f);U(A,{size:2,weight:"regular",color:"secondary",children:(I,B)=>{var D=w();j((()=>de(D,t(u).label))),a(I,D)},$$slots:{default:!0}});var C=c(f,2),x=l(C);U(x,{size:2,weight:"regular",color:"secondary",children:(I,B)=>{var D=w();j((H=>de(D,H)),[()=>(t(u).amount??0).toLocaleString("en-US")]),a(I,D)},$$slots:{default:!0}}),a(R,_)}));var k=c(b,2),S=R=>{Fh(R,na((()=>e.alertBanner)))};M(k,(R=>{(u=>{if(!e.alertBanner?.message||!r())return!1;switch(u){case ka.REQUIRE_PAYMENT_FOR_TRIAL:case ka.USAGE_BALANCE_DEPLETED:case ka.USAGE_BALANCE_LOW:break;case ka.BANNER_TYPE_UNKNOWN:default:return!1}return!0})(e.alertBanner?.bannerType)&&R(S)})),a(o,s),Ne()}var Gh=y('<div class="c-account-category__plan-usage-body svelte-126fk15"><!> <!> <!></div>');function Hh(o,e){const r=le(e,"enableCreditBannerInSettings",3,!0);var s=Gh(),n=l(s);(function(v,m){xe(m,!0);const h=sr(),p=z((()=>(u=>{switch(u){case"Enterprise Plan":case"Enterprise":return{backgroundColor:"var(--ds-color-success-3)",nameColor:"var(--ds-color-success-10)",badgeColor:"success",buttonColor:"success"};case"Max Plan":case"Max":return{backgroundColor:"var(--ds-color-premium-3)",nameColor:"var(--ds-color-premium-10)",badgeColor:"premium",buttonColor:"premium"};case"Indie Plan":case"Developer Plan":case"Standard Plan":case"Indie":case"Developer":case"Standard":return{backgroundColor:"var(--ds-color-gold-3)",nameColor:"var(--ds-color-gold-10)",badgeColor:"gold",buttonColor:"gold"};default:return{backgroundColor:"var(--ds-color-accent-a3)",nameColor:"var(--ds-color-accent-10)",badgeColor:"accent",buttonColor:"accent"}}})(m.planDisplayName)));var $=Ph(),N=l($),T=l(N),E=l(T);U(E,{size:2,weight:"medium",color:"neutral",children:(u,_)=>{var f=w();j((()=>de(f,m.planDisplayName))),a(u,f)},$$slots:{default:!0}});var b=c(E,2),k=u=>{var _=Y(),f=O(_);Ce(f,(()=>hr.Root),((A,C)=>{C(A,{variant:"solid",get color(){return t(p).badgeColor},size:1,children:(x,I)=>{var B=w();j((D=>de(B,`${D??""}
          ${m.usageUnitDisplayName??""}/Cycle`)),[()=>m.includedUsageUnitsPerBillingCycle.toLocaleString("en-US")]),a(x,B)},$$slots:{default:!0}})})),a(u,_)};M(b,(u=>{m.includedUsageUnitsPerBillingCycle>0&&u(k)}));var S=c(T,2),R=l(S);Ke(R,{variant:"soft",color:"neutral",href:"https://app.augmentcode.com/account",onclick:()=>{h.track(bt.WEBVIEW.CREDIT_MANAGE_PLAN_CLICKED,{currentPlanName:m.planDisplayName})},asAnchor:!0,children:(u,_)=>{U(u,{size:1,weight:"medium",children:(f,A)=>{var C=w("Manage Plan");a(f,C)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(v,$),Ne()})(n,{get planDisplayName(){return e.planDisplayName},get includedUsageUnitsPerBillingCycle(){return e.includedUsageUnitsPerBillingCycle},get usageUnitDisplayName(){return e.usageUnitDisplayName}});var i=c(n,2);qh(i,{get usageUnitsTotal(){return e.usageUnitsTotal},get usageUnitsUsed(){return e.usageUnitsUsed},get isCreditBalanceLow(){return e.isCreditBalanceLow},get usageUnitDisplayName(){return e.usageUnitDisplayName},get creditDetails(){return e.creditDetails},get alertBanner(){return e.alertBanner},get enableCreditBannerInSettings(){return r()}});var d=c(i,2);U(d,{size:2,color:"secondary",children:(v,m)=>{var h=w();j((()=>de(h,`Your cycle renews in: ${e.daysLeftInPlan??""}
    ${e.daysLeftInPlan===1?"day":"days"}`))),a(v,h)},$$slots:{default:!0}}),a(o,s)}function Vh(o,e){xe(e,!1);const[r,s]=Ut(),n=nr("enableCreditBannerInSettings"),{model:i}=kr.requireContext(),{usageUnitsTotal:d,usageUnitsUsed:v,includedUsageUnitsPerBillingCycle:m,planDisplayName:h,isCreditBalanceLow:p,usageUnitDisplayName:$,daysLeftInPlan:N,creditDetails:T,alertBanner:E}=i;Zr(),Pn(o,{title:k=>{Rt(k,{level:1,children:(S,R)=>{var u=w("Plan & Usage");a(S,u)},$$slots:{default:!0}})},children:(k,S)=>{Hh(k,{get usageUnitsTotal(){return De(d,"$usageUnitsTotal",r)},get usageUnitsUsed(){return De(v,"$usageUnitsUsed",r)},get includedUsageUnitsPerBillingCycle(){return De(m,"$includedUsageUnitsPerBillingCycle",r)},get planDisplayName(){return De(h,"$planDisplayName",r)},get isCreditBalanceLow(){return De(p,"$isCreditBalanceLow",r)},get usageUnitDisplayName(){return De($,"$usageUnitDisplayName",r)},get daysLeftInPlan(){return De(N,"$daysLeftInPlan",r)},get creditDetails(){return De(T,"$creditDetails",r)},get alertBanner(){return De(E,"$alertBanner",r)},get enableCreditBannerInSettings(){return De(n,"$enableCreditBannerInSettings",r)}})},$$slots:{title:!0,default:!0}}),Ne(),s()}var jh=y('<!> <div class="c-settings__footer svelte-tkaslv"><!></div>',1);function Jh(o,e){xe(e,!0);const r=()=>De(D,"$currentSection",p),s=()=>De(se,"$guidelines",p),n=()=>De(J,"$settingsComponentSupported",p),i=()=>De(R,"$enableSettingsHomePage",p),d=()=>De(ee,"$enableAgentMode",p),v=()=>De(S,"$enableCreditsInSettings",p),m=()=>De(fe,"$userEmail",p),h=()=>De(Ee,"$terminalSettingsStore",p),[p,$]=Ut(),N=W=>{(function(Q,he){xe(he,!0);let X=le(he,"size",3,2);var ke=Au();mt(ke,23,(()=>he.items),(Te=>Te.label),((Te,Ae,Me)=>{var Re=Cu(),We=l(Re),Ye=_e=>{U(_e,{get size(){return X()},color:"secondary",truncate:!0,children:(qe,He)=>{var Ue=$u();Ue.__click=function(...Ve){t(Ae).onClick?.apply(this,Ve)};var Ie=l(Ue);j((()=>de(Ie,t(Ae).label))),a(qe,Ue)},$$slots:{default:!0}})},ze=_e=>{var qe=Y(),He=O(qe),Ue=Ve=>{U(Ve,{get size(){return X()},color:"secondary",truncate:!0,children:(Je,at)=>{var et=Su(),Pe=l(et);j((()=>{ar(et,"href",t(Ae).href),de(Pe,t(Ae).label)})),a(Je,et)},$$slots:{default:!0}})},Ie=Ve=>{U(Ve,{get size(){return X()},color:"secondary",truncate:!0,children:(Je,at)=>{var et=Eu(),Pe=l(et);j((()=>de(Pe,t(Ae).label))),a(Je,et)},$$slots:{default:!0}})};M(He,(Ve=>{t(Ae).href?Ve(Ue):Ve(Ie,!1)}),!0),a(_e,qe)};M(We,(_e=>{t(Ae).onClick?_e(Ye):_e(ze,!1)}));var K=c(We,2),Z=_e=>{var qe=ku(),He=l(qe);U(He,{color:"secondary",children:(Ue,Ie)=>{{let Ve=z((()=>Math.min(X()+1,3)));me(Ue,{name:"chevron-right",get size(){return t(Ve)}})}},$$slots:{default:!0}}),a(_e,qe)};M(K,(_e=>{(t(Me)<he.items.length-1||he.showTrailingChevron)&&_e(Z)})),a(Te,Re)})),a(Q,ke),Ne()})(W,{get items(){return t(ve)},showTrailingChevron:!0})},T=nr("enableRules"),E=nr("enablePersonalities"),b=nr("enableExternalSourcesInChat"),k=nr("retryChatStreamTimeouts"),S=nr("enableCreditsInSettings"),R=nr("enableSettingsHomePage"),u=nr("enablePublicBetaPage"),_=nr("areFlagsReady"),f=new ji(It),A=new Wi(It,f,{enableRules:De(T,"$enableRules",p),enablePersonalities:De(E,"$enablePersonalities",p),enableExternalSourcesInChat:De(b,"$enableExternalSourcesInChat",p),retryChatStreamTimeouts:De(k,"$retryChatStreamTimeouts",p)}),C=new Oa(It),x=new Yo,I=new ca(A);Dr(Oa.key,C),qi(A),(function(W){Dr(Tn,W)})(I);const B=Ar(),D=Tu(),{controller:H,model:L}=(function(W){const Q=new kr,he=new Dl(Q,W);return kr.setInContext(Q,he),{model:Q,controller:he}})(A),J=C.getSettingsComponentSupported(),ee=C.getEnableAgentMode();f.registerConsumer(C);const Se=new Ji(f,void 0,io,hs);f.registerConsumer(Se),Dr(hs,Se),Se.fetchStateFromExtension();const Ee=x.getTerminalSettings(),V=z(r),ge=window.augmentFlags?.navigateToSettingsSection,G={handleMessageFromExtension(W){if(!W.data)return!1;if(W.data.type===_t.navigateToSettingsSection){if(W.data.data&&typeof W.data.data=="string"){const Q=W.data.data;B(fr(Q))}return!0}return!!Object.values(Ra).includes(W.data.type)&&I.handleMcpMessage(W)}};f.registerConsumer(G);const ae=C.getDisplayableTools(),se=C.getGuidelines(),fe=C.getUserEmail(),P=z((()=>s().userGuidelines?.contents)),F=z((()=>s().userGuidelines?.lengthLimit)),ce=z((()=>s().workspaceGuidelines?.[0]?.lengthLimit)),re=z((()=>s().workspaceGuidelines?.[0]?.contents||""));async function Fe(W){const Q=W.trim();if(t(F)&&Q.length>t(F))return!1;C.updateLocalUserGuidelines(Q);try{await(await kt(Wt)).updateUserGuidelines({content:W})}catch(he){console.error("Failed to update user guidelines:",he)}return!0}function Be(W){It.postMessage({type:_t.toolConfigStartOAuth,data:W}),C.startPolling()}async function je(W){await A.openConfirmationModal({title:"Revoke Access",message:`Are you sure you want to revoke access for ${W.displayName}? This will disconnect the tool and you'll need to reconnect it to use it again.`,confirmButtonText:"Revoke Access",cancelButtonText:"Cancel"})&&It.postMessage({type:_t.toolConfigRevokeAccess,data:{toolId:W.identifier}})}function ne(W){x.updateSelectedShell(W)}function ye(W){x.updateStartupScript(W)}async function Oe(){await(await kt(Wt)).signOut(Ya)}Na((()=>{C.dispose(),I.dispose()})),C.notifyLoaded(),It.postMessage({type:_t.getOrientationStatus});const q=W=>{It.postMessage({type:_t.updateFeatureFlagOverrides,data:W})};function ue(W,Q){return Q?[W]:[]}const ie=z(n),{refreshedAt:we}=L,oe=z((()=>[...ue({label:"Home",id:"home",icon:"augment-logo"},i()),{label:"Integrations",icon:"plug",items:[{label:"Services",id:"services"},...ue({label:"MCP Servers",id:"mcp-servers"},d()&&t(ie).mcpServerList)]},{label:"Preferences",icon:"globe",items:[...ue({label:"Rules & Guidelines",id:"guidelines"},t(ie).rules),...ue({label:"Secret Manager",id:"secret-manager"},t(ie).secretsManagerEnabled),{label:"Memories",id:"memories"}]},{label:"IDE & Workspace",icon:"code",items:[...ue({label:"Context",id:"context"},t(ie).workspaceContext),...ue({label:"Terminal",id:"terminal"},t(ie).terminal),{label:"User Experience",id:"user-experience"},...ue({label:"Feature Flags",id:"feature-flags"},t(ie).allowFeatureFlagOverrides),...ue({label:"Beta",id:"beta"},De(u,"$enablePublicBetaPage",p))]},{label:"Account",icon:"user",id:"account",items:[...ue({label:"Subscription",id:"subscription"},v()&&!!De(we,"$refreshedAt",p))]}])),ve=z((()=>{const W=t(oe).find((Q=>Q.items?.find((he=>he.id===t(V)))));return W?.label?[{label:W.label}]:[]}));pt((()=>{ge?B(fr(ge)):r()||De(_,"$areFlagsReady",p)&&B(fr(i()?"home":"services"))})),pt((()=>{v()?t(V)==="subscription"?H.foregroundPoll():H.backgroundPoll():H.stop()}));let $e=At(new Set);pt((()=>{t(V)===void 0||$e.has(t(V))||(A.track(bt.WEBVIEW.SETTINGS_TAB_VIEWED,{tab:t(V)}),$e.add(t(V)))})),er((()=>{A.track(bt.WEBVIEW.SETTINGS_PAGE_OPENED,{})})),It.postMessage({type:_t.settingsPanelLoaded});const pe=W=>{B(fr(W.id)),B(as(!1))};Kt("message",va,(function(...W){f.onMessageFromExtension?.apply(this,W)}));{const W=he=>{var X=jh(),ke=O(X);(function(Ae,Me){xe(Me,!0);const Re=(K,Z=Ot,_e)=>{let qe=ra((()=>ai(_e?.(),0)));const He=z((()=>Z().selected||Me.selected===Z()[We()??"label"])),Ue=z((()=>()=>{Z().onClick&&Z().onClick()})),Ie=z((()=>Z().canSelect??!0));var Ve=fu();let Je;var at=l(Ve),et=Ze=>{var Qe=gu(),Le=l(Qe);U(Le,{size:2,weight:"medium",children:(st,nt)=>{var it=hu(),lt=O(it),ft=Lt=>{me(Lt,{get name(){return Z().icon}})};M(lt,(Lt=>{Z().icon&&Lt(ft)}));var Nt=c(lt);j((()=>de(Nt,` ${Z().label??""}`))),a(st,it)},$$slots:{default:!0}}),a(Ze,Qe)},Pe=Ze=>{var Qe=pu();let Le;var st=l(Qe);{const nt=Lt=>{var tr=Y(),Yt=O(tr),yt=Mt=>{me(Mt,{get name(){return Z().icon}})};M(Yt,(Mt=>{Z().icon&&Mt(yt)})),a(Lt,tr)};let it=z((()=>Z().onClick?void 0:Z().href)),lt=z((()=>!Z().onClick&&!!Z().href)),ft=z((()=>Z().onClick?void 0:Z().hrefOptions?.target)),Nt=z((()=>Z().onClick?void 0:Z().hrefOptions?.rel));Ke(st,{variant:"ghost-block",color:"neutral",size:2,onclick:()=>{t(Ue)?.(),Me.onMenuItemClick?.(Z())},alignment:"left",get href(){return t(it)},get asAnchor(){return t(lt)},get target(){return t(ft)},get rel(){return t(Nt)},iconLeft:nt,children:(Lt,tr)=>{U(Lt,{size:2,weight:"medium",children:(Yt,yt)=>{var Mt=w();j((()=>de(Mt,Z().label))),a(Yt,Mt)},$$slots:{default:!0}})},$$slots:{iconLeft:!0,default:!0}})}j((()=>Le=xt(Qe,1,"svelte-1wb34mv",null,Le,{"c-sidebar-menu__item--selected":t(He)}))),a(Ze,Qe)};M(at,(Ze=>{t(Ie)?Ze(Pe,!1):Ze(et)}));var tt=c(at,2),ct=Ze=>{var Qe=mu();mt(Qe,21,(()=>Z().items),(Le=>Le.label),((Le,st)=>{Re(Le,(()=>t(st)),(()=>t(qe)+1))})),a(Ze,Qe)};M(tt,(Ze=>{Z().items&&Z().items.length>0&&Ze(ct)})),j((()=>Je=xt(Ve,1,"c-sidebar-menu__item svelte-1wb34mv",null,Je,{"c-sidebar-menu__item--top-level":t(qe)===0}))),a(K,Ve)};let We=le(Me,"trackBy",3,"label");const Ye=z((()=>Me.items.some((K=>K.icon))));var ze=wu();mt(ze,21,(()=>Me.items),(K=>K.label),((K,Z)=>{var _e=Y(),qe=O(_e),He=Ie=>{Re(Ie,(()=>t(Z)))},Ue=Ie=>{var Ve=Y(),Je=O(Ve),at=et=>{var Pe=bu(),tt=l(Pe),ct=Qe=>{U(Qe,{size:2,color:"secondary",weight:"medium",children:(Le,st)=>{var nt=_u(),it=l(nt),lt=yt=>{me(yt,{get name(){return t(Z).icon},size:3})},ft=yt=>{var Mt=Y(),Dt=O(Mt),Ft=Ct=>{var qt=yu();a(Ct,qt)};M(Dt,(Ct=>{t(Ye)&&Ct(Ft)}),!0),a(yt,Mt)};M(it,(yt=>{t(Z).icon?yt(lt):yt(ft,!1)}));var Nt=c(it,2),Lt=l(Nt),tr=c(Nt,2),Yt=yt=>{var Mt=Y(),Dt=O(Mt);Ce(Dt,(()=>hr.Root),((Ft,Ct)=>{Ct(Ft,{get color(){return t(Z).badge.color},get variant(){return t(Z).badge.variant},children:(qt,Vt)=>{var _r=w();j((()=>de(_r,t(Z).badge.text))),a(qt,_r)},$$slots:{default:!0}})})),a(yt,Mt)};M(tr,(yt=>{t(Z).badge&&yt(Yt)})),j((()=>de(Lt,t(Z).label))),a(Le,nt)},$$slots:{default:!0}})};M(tt,(Qe=>{t(Z).label&&Qe(ct)}));var Ze=c(tt,2);mt(Ze,21,(()=>t(Z).items),(Qe=>Qe.label),((Qe,Le)=>{Re(Qe,(()=>t(Le)),(()=>1))})),a(et,Pe)};M(Je,(et=>{t(Z).items.length>0&&et(at)}),!0),a(Ie,Ve)};M(qe,(Ie=>{var Ve;"href"in(Ve=t(Z))||"id"in Ve||"onClick"in Ve||Ve.canSelect===!0?Ie(He):Ie(Ue,!1)})),a(K,_e)})),a(Ae,ze),Ne()})(ke,{get items(){return t(oe)},get selected(){return t(V)},trackBy:"id",onMenuItemClick:pe});var Te=c(ke,2);(function(Ae,Me){function Re(){It.postMessage({type:_t.augmentLink,data:"https://www.augmentcode.com/changelog"})}xe(Me,!1),Zr(),ot.Root(Ae,{children:(We,Ye)=>{var ze=Pu(),K=O(ze);ot.Trigger(K,{children:(_e,qe)=>{Et(_e,{variant:"soft",size:2,children:(He,Ue)=>{me(He,{name:"message-circle-question-mark",size:2})},$$slots:{default:!0}})},$$slots:{default:!0}});var Z=c(K,2);ot.Content(Z,{side:"bottom",align:"start",children:(_e,qe)=>{ot.Item(_e,{onSelect:Re,children:(He,Ue)=>{var Ie=w("Augment Updates");a(He,Ie)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(We,ze)},$$slots:{default:!0}}),Ne()})(l(Te),{}),a(he,X)};let Q=z((()=>t(ve).length>0?N:void 0));(function(he,X){xe(X,!0);const ke=()=>De(Ye,"$drawerOpen",Te),[Te,Ae]=Ut();let Me=te(1200),Re=z((()=>!!X.sidebar&&t(Me)<=800));const We=Ar(),Ye=Iu();function ze(Pe){Pe!==ke()&&We(as(Pe))}pt((()=>{!t(Re)&&ke()&&We(as(!1))}));var K=Mu(),Z=l(K),_e=Pe=>{var tt=Y(),ct=O(tt),Ze=Le=>{var st=Y(),nt=O(st);Ce(nt,(()=>dn.Root),((it,lt)=>{lt(it,{get open(){return ke()},onOpenChange:ze,children:(ft,Nt)=>{var Lt=Y(),tr=O(Lt);Ce(tr,(()=>dn.Content),((Yt,yt)=>{yt(Yt,{position:"left",children:(Mt,Dt)=>{var Ft=xu(),Ct=l(Ft);Et(Ct,{variant:"ghost-block",color:"neutral",size:2,onclick:()=>ze(!1),children:(Vt,_r)=>{me(Vt,{name:"x"})},$$slots:{default:!0}});var qt=c(Ct,2);ut(qt,(()=>X.sidebar)),a(Mt,Ft)},$$slots:{default:!0}})})),a(ft,Lt)},$$slots:{default:!0}})})),a(Le,st)},Qe=Le=>{var st=Nu(),nt=l(st);ut(nt,(()=>X.sidebar)),a(Le,st)};M(ct,(Le=>{t(Re)?Le(Ze):Le(Qe,!1)})),a(Pe,tt)};M(Z,(Pe=>{X.sidebar&&Pe(_e)}));var qe=c(Z,2),He=l(qe),Ue=l(He),Ie=l(Ue),Ve=Pe=>{Et(Pe,{variant:"ghost-block",color:"neutral",size:2,onclick:()=>ze(!0),children:(tt,ct)=>{me(tt,{name:"menu"})},$$slots:{default:!0}})};M(Ie,(Pe=>{t(Re)&&Pe(Ve)}));var Je=c(Ie,2),at=l(Je);ut(at,(()=>X.header??Ot));var et=c(Ue,2);ut(et,(()=>X.children)),ho(K,"clientWidth",(Pe=>g(Me,Pe))),a(he,K),Ne(),Ae()})(o,{get header(){return t(Q)},sidebar:W,children:(he,X)=>{var ke=Y(),Te=O(ke),Ae=Re=>{cn(Re,{get userEmail(){return m()},onSignOut:Oe})},Me=Re=>{var We=Y(),Ye=O(We),ze=Z=>{uv(Z,{get tools(){return De(ae,"$displayableTools",p)},onAuthenticate:Be,onRevokeAccess:je})},K=Z=>{var _e=Y(),qe=O(_e),He=Ie=>{{let Ve=z((()=>d()&&n().mcpServerImport));Mh(Ie,{onMCPServerAdd:(Je,at)=>I.addServer(Je,at),onMCPServerSave:(Je,at)=>I.updateServer(Je,at),onMCPServerDelete:Je=>I.deleteServer(Je),onMCPServerToggleDisable:Je=>I.toggleDisabledServer(Je),onMCPServerJSONImport:Je=>I.importServersFromJSON(Je),get isMCPImportEnabled(){return t(Ve)}})}},Ue=Ie=>{var Ve=Y(),Je=O(Ve),at=Pe=>{var tt=Y(),ct=O(tt),Ze=Le=>{Ul(Le,{get userGuidelines(){return t(P)},get userGuidelinesLengthLimit(){return t(F)},get workspaceGuidelinesLengthLimit(){return t(ce)},get workspaceGuidelinesContent(){return t(re)},updateUserGuideline:Fe})},Qe=Le=>{Rn(Le,{get userGuidelines(){return t(P)},get userGuidelinesLengthLimit(){return t(F)},updateUserGuideline:Fe})};M(ct,(Le=>{n().rules?Le(Ze):Le(Qe,!1)})),a(Pe,tt)},et=Pe=>{var tt=Y(),ct=O(tt),Ze=Le=>{Kl(Le,{})},Qe=Le=>{var st=Y(),nt=O(st),it=ft=>{ul(ft,{})},lt=ft=>{var Nt=Y(),Lt=O(Nt),tr=yt=>{ld(yt,{})},Yt=yt=>{var Mt=Y(),Dt=O(Mt),Ft=qt=>{(function(Vt,_r){xe(_r,!0);var pa=gc(),ma=O(pa);Rt(ma,{level:1,children:(dr,Qr)=>{var Qa=w("Feature Flags");a(dr,Qa)},$$slots:{default:!0}}),hc(c(ma,2),{onFlagToggle:(dr,Qr)=>{_r.onUpdateFlags({flagName:dr,value:Qr})}}),a(Vt,pa),Ne()})(qt,{onUpdateFlags:q})},Ct=qt=>{var Vt=Y(),_r=O(Vt),pa=dr=>{_c(dr,{onUpdateFlags:q})},ma=dr=>{var Qr=Y(),Qa=O(Qr),qn=Fr=>{Du(Fr,{get supportedShells(){return h().supportedShells},get selectedShell(){return h().selectedShell},get startupScript(){return h().startupScript},onShellSelect:ne,onStartupScriptChange:ye})},Gn=Fr=>{var Gs=Y(),Hn=O(Gs),Vn=Br=>{(function(fa){var ya=Vu(),_a=l(ya);Rt(_a,{level:1,children:(es,xr)=>{var ba=w("User Experience");a(es,ba)},$$slots:{default:!0}}),Hu(c(_a,2),{}),a(fa,ya)})(Br)},jn=Br=>{var fa=Y(),ya=O(fa),_a=xr=>{nn(xr,{onSignOut:Oe})},es=xr=>{var ba=Y(),Jn=O(ba),Kn=Wr=>{Vh(Wr,{})},Yn=Wr=>{var Hs=Y(),Xn=O(Hs),Zn=qr=>{cn(qr,{get userEmail(){return m()},onSignOut:Oe})},Qn=qr=>{nn(qr,{onSignOut:Oe})};M(Xn,(qr=>{i()?qr(Zn):qr(Qn,!1)}),!0),a(Wr,Hs)};M(Jn,(Wr=>{t(V)==="subscription"?Wr(Kn):Wr(Yn,!1)}),!0),a(xr,ba)};M(ya,(xr=>{t(V)==="account"?xr(_a):xr(es,!1)}),!0),a(Br,fa)};M(Hn,(Br=>{t(V)==="user-experience"?Br(Vn):Br(jn,!1)}),!0),a(Fr,Gs)};M(Qa,(Fr=>{t(V)==="terminal"?Fr(qn):Fr(Gn,!1)}),!0),a(dr,Qr)};M(_r,(dr=>{t(V)==="beta"?dr(pa):dr(ma,!1)}),!0),a(qt,Vt)};M(Dt,(qt=>{t(V)==="feature-flags"?qt(Ft):qt(Ct,!1)}),!0),a(yt,Mt)};M(Lt,(yt=>{t(V)==="secret-manager"?yt(tr):yt(Yt,!1)}),!0),a(ft,Nt)};M(nt,(ft=>{t(V)==="context"?ft(it):ft(lt,!1)}),!0),a(Le,st)};M(ct,(Le=>{t(V)==="memories"?Le(Ze):Le(Qe,!1)}),!0),a(Pe,tt)};M(Je,(Pe=>{t(V)==="guidelines"?Pe(at):Pe(et,!1)}),!0),a(Ie,Ve)};M(qe,(Ie=>{t(V)==="mcp-servers"?Ie(He):Ie(Ue,!1)}),!0),a(Z,_e)};M(Ye,(Z=>{t(V)==="services"?Z(ze):Z(K,!1)}),!0),a(Re,We)};M(Te,(Re=>{t(V)==="home"?Re(Ae):Re(Me,!1)})),a(he,ke)},$$slots:{sidebar:!0,default:!0}})}Ne(),$()}function Kh(o){Gi(o,{children:(e,r)=>{Hi(e,{fetch:!0,children:(s,n)=>{Jh(s,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}(async function(){It?.initialize&&await It.initialize(),ii(Kh,{target:document.getElementById("app")})})();
//# sourceMappingURL=settings-D80qYmbV.js.map
