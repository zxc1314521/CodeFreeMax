const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D67B6SlF.js","./_commonjsHelpers-CwkBNZ52.js"])))=>i.map(i=>d[i]);
import{w as x,aC as K,ah as V,F,ac as I,aD as X,aF as Y,y as B,D as A,E as M,k,a6 as W,K as z,av as U,_ as G,R as P,H as j,I as q,J as S,o as r,a0 as w,$ as T,ay as J,aw as O,P as N,S as Q,T as Z,O as ee,G as te}from"./debounce-BNOmQ76Y.js";try{L=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},($=new L.Error().stack)&&(L._sentryDebugIds=L._sentryDebugIds||{},L._sentryDebugIds[$]="3d1488a1-2635-4b1c-96f2-4760841e45c2",L._sentryDebugIdIdentifier="sentry-dbid-3d1488a1-2635-4b1c-96f2-4760841e45c2")}catch{}var L,$;class D{static CONTEXT_KEY="augment-monaco-provider";_monaco=x(null);_isLoading=x(!0);_error=x(null);constructor(){K(D.CONTEXT_KEY,this),this._initializeMonaco()}async _initializeMonaco(){try{if(this._isLoading.set(!0),!window.augmentDeps?.monaco)throw new Error("Monaco is not available. Make sure monaco-bootstrap.js is included in your HTML.");const e=await window.augmentDeps.monaco;this._monaco.set(e),this._isLoading.set(!1)}catch(e){this._error.set(e instanceof Error?e:new Error(String(e))),this._isLoading.set(!1),console.error("Failed to load Monaco:",e)}}get monaco(){return this._monaco}get isLoading(){return this._isLoading}get error(){return this._error}isReady=V([this._monaco,this._isLoading,this._error],(([e,t,i])=>e!==null&&!t&&i===null));static getContext(){const e=F(D.CONTEXT_KEY);if(!e)throw new Error("Monaco context not found. Make sure you're using MonacoProvider.Root as a parent component.");return e}}const re=new Map([[I.light,"hc-light"],[I.dark,"hc-black"]]),oe=new Map([[I.light,"vs"],[I.dark,"vs-dark"]]);function ae(m,e){if(!m)return"";let t=oe;return e==="high-contrast"&&(t=re),t.get(m)||""}function ne(m,e,t){var i=!0,p=!0;if(typeof m!="function")throw new TypeError("Expected a function");return Y(t)&&(i="leading"in t?!!t.leading:i,p="trailing"in t?!!t.trailing:p),X(m,e,{leading:i,maxWait:e,trailing:p})}class C{static instance;registeredTargets=new Map;throttledPerformLayout;constructor(){this.throttledPerformLayout=ne(this.performLayout.bind(this),333,{leading:!1,trailing:!0})}static getInstance(){return C.instance||(C.instance=new C),C.instance}registerEditor(e){return this.registeredTargets.set(e.editor,e),()=>{this.registeredTargets.delete(e.editor)}}requestLayout(){this.throttledPerformLayout()}async performLayout(){await B();for(const[e,t]of this.registeredTargets)try{t.updateHeight&&t.updateHeight(),e.layout()}catch(i){console.warn(`Monaco layout failed for editor ${t.id||"unknown"}:`,i)}}getRegisteredEditorCount(){return this.registeredTargets.size}clearAllEditors(){this.registeredTargets.clear(),this.throttledPerformLayout.cancel()}isEditorRegistered(e){return this.registeredTargets.has(e)}}function ie(){return C.getInstance()}var se=z('<div class="c-codeblock svelte-1ma8iy5"><div class="c-codeblock__monaco svelte-1ma8iy5"></div></div>');function ce(m,e){A(e,!0);const t=()=>S(h,"$monaco",i),[i,p]=q(),b={tabSize:4,readOnly:!0,scrollBeyondLastLine:!1,minimap:{enabled:!1},scrollbar:{alwaysConsumeMouseWheel:!1,vertical:"hidden"},wordWrap:"on",theme:"vs-dark",automaticLayout:!0,unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1}};let u,g=M(e,"options",19,(()=>({}))),n=M(e,"decorations",19,(()=>{})),a=M(e,"height",19,(()=>{})),o=M(e,"editorInstance",15),s=T(void 0);const h=D.getContext().monaco,d=ie();let f=T(void 0);function E(){if(!o()||!r(s))return;if(a()!==void 0)return r(s).style.height=`${a()}px`,void o().layout();const l=Math.min(1e3,o().getContentHeight());r(s).style.height=`${l}px`,o().layout()}function c(l,y){o()&&(o().setModel(l),y.length>0&&(u?.clear(),u=o().createDecorationsCollection(y)),l.onDidChangeContent(E),E())}function v(l){Array.from(l.attributes).map((y=>y.name)).filter((y=>y.startsWith("data-keybinding-context")||y.startsWith("data-mode-id")||y.startsWith("monaco-"))).forEach((y=>l.removeAttribute(y)))}k((()=>{if(t()&&r(s)&&!o()){v(r(s));const l={...b,...g()};o(t().editor.create(r(s),l)),r(f)&&r(f)(),w(f,d.registerEditor({editor:o(),updateHeight:E,id:`monaco-${crypto.randomUUID().slice(0,8)}`}),!0),c(e.model,n()||[]),o().onDidChangeModel(E)}})),k((()=>{c(e.model,n()||[])})),k((()=>{const l=S(J,"$themeStore",i),y=ae(l?.category,l?.intensity);o()?.updateOptions({theme:y}),o()?.layout(void 0)})),W((()=>{r(f)?.(),o()?.dispose(),r(s)&&v(r(s))}));var _=se();U("focus",O,(()=>d.requestLayout())),U("resize",O,(()=>d.requestLayout()));var R=N(_);G(R,(l=>w(s,l)),(()=>r(s))),P(m,_),j(),p()}const H={},de=function(m,e,t){let i=Promise.resolve();if(e&&e.length>0){const u=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),n=g?.nonce||g?.getAttribute("nonce");p=e.map((a=>{if(a=(function(d,f){return new URL(d,f).href})(a,t),a in H)return;H[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(t)for(let d=u.length-1;d>=0;d--){const f=u[d];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const h=document.createElement("link");return h.rel=o?"stylesheet":"modulepreload",o||(h.as="script"),h.crossOrigin="",h.href=a,n&&h.setAttribute("nonce",n),document.head.appendChild(h),o?new Promise(((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",(()=>f(new Error(`Unable to preload CSS for ${a}`))))})):void 0})),i=Promise.all(p.map((a=>Promise.resolve(a).then((o=>({status:"fulfilled",value:o})),(o=>({status:"rejected",reason:o}))))))}var p;function b(u){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=u,window.dispatchEvent(g),!g.defaultPrevented)throw u}return i.then((u=>{for(const g of u||[])g.status==="rejected"&&b(g.reason);return m().catch(b)}))};var le=z('<div class="c-monaco-simple svelte-1im8grv"><!></div>');function ue(m,e){A(e,!0);const t=()=>S(g,"$monaco",i),[i,p]=q();let b=M(e,"options",19,(()=>({}))),u=M(e,"editorInstance",15);const g=D.getContext().monaco;let n=T(void 0),a=T(void 0),o=T(void 0),s=T(!0),h=te((()=>t()?.languages.getLanguages().map((c=>c.id))||[]));k((()=>{r(n)&&!r(s)&&r(n).getValue()!==e.text&&r(n).setValue(e.text)})),k((()=>{e.lang!==void 0&&t()&&(async function(){if(e.lang&&r(h).includes(e.lang))w(a,e.lang,!0);else{const{default:c}=await de((async()=>{const{default:_}=await import("./index-D67B6SlF.js");return{default:_}}),__vite__mapDeps([0,1]),import.meta.url),v=c.highlightAuto(e.text,r(h));w(a,v.language,!0)}r(n)&&r(a)&&t()&&t().editor.setModelLanguage(r(n),r(a))})()})),k((()=>{t()&&(function(c){if(!t()||r(n)&&c===r(o))return;const v=c?t().Uri.parse(`file://${c}#${crypto.randomUUID()}`):t().Uri.parse(`file://#${crypto.randomUUID()}`);r(n)?.dispose(),w(n,t().editor.createModel(e.text,r(a),v),!0),w(o,c,!0),w(s,!1)})(e.pathName)})),W((()=>{r(n)?.dispose()}));var d=Q(),f=Z(d),E=c=>{var v=le();ce(N(v),{get options(){return b()},get model(){return r(n)},get height(){return e.height},get editorInstance(){return u()},set editorInstance(_){u(_)}}),P(c,v)};ee(f,(c=>{r(n)&&c(E)})),P(m,d),j(),p()}const he=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{oe as C,D as M,ue as S,de as _,ce as a,ie as b,he as c,ae as g,ne as t};
//# sourceMappingURL=SimpleMonaco-BBDXOnfl.js.map
