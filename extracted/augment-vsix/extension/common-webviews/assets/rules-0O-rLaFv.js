import{D as X,aD as ge,K as g,a0 as L,$ as he,o as e,G as d,P as a,R as r,H as Z,T as be,Q as m,Y as O,O as ee,ai as C,W as N,ae as ye,av as $e,aw as we,I as Ie,w as Te,J as De,ax as Ee}from"./debounce-BNOmQ76Y.js";import"./design-system-init-DYAh9Pko.js";import"./legacy-2-VBD5Kq.js";import{i as Fe}from"./lifecycle-CWu4CNTE.js";import{B as Se}from"./ButtonAugment-BCcs6kST.js";import{M as ze}from"./MonacoMarkdownEditor-DPJhsvvf.js";import{I as Re,T as j}from"./Icon-CohttyM7.js";import{b as _e,R as S,s as ke,o as xe,T as Me,S as Le,F as Oe}from"./extension-client-context-CN64fWtK.js";import{T as Ce}from"./TextTooltipAugment-CGvqFHAr.js";import{R as Ne,M as je}from"./message-broker-DUQuEFlt.js";import{O as Ae}from"./OpenFileButton-gT822Pcb.js";import{R as Ge}from"./RulesModeSelector-Cb4x8pjl.js";import"./IconButtonAugment-DO0xxfgT.js";import"./index-Ba8SPQX6.js";import"./SimpleMonaco-BBDXOnfl.js";import"./index-C6s5m6Q5.js";import"./file-type-utils-CHwkiE7w.js";import"./_commonjsHelpers-CwkBNZ52.js";import"./types-M1pd3FSp.js";import"./await-B0-dHWqK.js";import"./Chevron-DgXCK6y3.js";import"./input-rvYD24wa.js";import"./BaseTextInput-D02l0mHz.js";import"./index-Dqp5W2S2.js";import"./remote-agents-client-DkZKHKJj.js";import"./SuccessfulButton-BTRD1tJd.js";try{c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Y=new c.Error().stack)&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[Y]="01b607c0-7ff3-43b0-9d9a-61c2b2282ac4",c._sentryDebugIdIdentifier="sentry-dbid-01b607c0-7ff3-43b0-9d9a-61c2b2282ac4")}catch{}var c,Y,Qe=g('<div class="c-rule-config svelte-w4thrv"><div class="c-rule-field c-rule-field-full-width svelte-w4thrv"><!> <!></div></div>'),We=g('<div class="l-file-controls svelte-w4thrv"><div class="l-file-controls-left svelte-w4thrv"><div class="c-trigger-section svelte-w4thrv"><!> <!> <!></div></div> <!></div> <!>',1),qe=g('<div class="l-rules-editor svelte-w4thrv"><div class="c-rules-editor__content svelte-w4thrv"><!></div></div>'),Be=g("<div>Loading...</div>"),Ke=g('<div class="c-rules-container svelte-1qamlzv"><!></div>');Ee((function(A,te){X(te,!1);const G=()=>De(W,"$rule",se),[se,ae]=Ie(),Q=new je(C),W=Te(null),re={handleMessageFromExtension(p){const i=p.data;if(i&&i.type===N.loadFile&&i){const h=i.data.content;if(h!==void 0){const b=h.replace(/^\n+/,""),y=S.getDescriptionFrontmatterKey(b),z=S.getRuleTypeFromContent(b),R=S.extractContent(b);W.set({path:i.data.pathName,content:R,type:z,description:y})}}return!0}};ye((()=>{Q.registerConsumer(re),C.postMessage({type:N.rulesLoaded})})),Fe(),$e("message",we,(function(...p){Q.onMessageFromExtension?.apply(this,p)})),Le(A,{children:(p,i)=>{Oe(p,{fetch:!0,children:(h,b)=>{var y=Ke(),z=a(y),R=n=>{(function(_,o){X(o,!0);let $=d((()=>o.rule.path)),w=d((()=>o.rule.type)),q=d((()=>o.rule.content)),u=d((()=>o.rule.description)),B=d((()=>S.extractContent(e(q)))),I=he(void 0),ie=d((()=>({path:e($),type:e(w),content:e(q),description:e(u),settingsStored:o.rule.settingsStored})));const K=_e(),P=async(T,t)=>{if(!e(I))return;const D=e(I).getValue(),E=T??e(w),F=t??e(u),k={type:E,path:e($),content:D,description:F,settingsStored:o.rule.settingsStored};K(ke(k))},H=(T,t)=>P(T,t),ne=ge(H,500),le=()=>{C.postMessage({type:N.openSettingsPage,data:"guidelines"})};var J=qe(),ce=a(J),de=a(ce);ze(de,{saveFunction:P,get value(){return e(B)},set value(t){L(B,t)},get editorInstance(){return e(I)},set editorInstance(t){L(I,t,!0)},header:t=>{var D=We(),E=be(D),F=a(E),k=a(F),U=a(k);Ce(U,{content:"Navigate back to all Rules & Guidelines",children:(s,v)=>{Se(s,{size:1,variant:"ghost-block",color:"neutral",class:"c-back-button",onclick:le,iconLeft:f=>{Re(f,{name:"chevron-left"})},$$slots:{iconLeft:!0}})},$$slots:{default:!0}});var V=m(U,2);j(V,{size:1,class:"c-field-label",children:(s,v)=>{var l=O("Trigger:");r(s,l)},$$slots:{default:!0}});var pe=m(V,2);Ge(pe,{onSave:H,get rule(){return e(ie)}});var ue=m(F,2);Ae(ue,{size:1,get path(){return e($)},onOpenLocalFile:async()=>(K(xe({repoRoot:"",pathName:e($)})),"success"),children:(s,v)=>{j(s,{size:1,children:(l,f)=>{var x=O("Open file");r(l,x)},$$slots:{default:!0}})},$$slots:{default:!0}});var ve=m(E,2),fe=s=>{var v=Qe(),l=a(v),f=a(l);j(f,{size:1,class:"c-field-label",children:(M,Pe)=>{var me=O("Description");r(M,me)},$$slots:{default:!0}});var x=m(f,2);Me(x,{oninput:()=>ne(e(w),e(u)),placeholder:"When should this rules file be fetched by the Agent?",size:1,get value(){return e(u)},set value(M){L(u,M)}}),r(s,v)};ee(ve,(s=>{e(w)===Ne.AGENT_REQUESTED&&s(fe)})),r(t,D)},$$slots:{header:!0}}),r(_,J),Z()})(n,{get rule(){return G()}})},oe=n=>{var _=Be();r(n,_)};ee(z,(n=>{G()!==null?n(R):n(oe,!1)})),r(h,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(),ae()}),{target:document.getElementById("app")});
//# sourceMappingURL=rules-0O-rLaFv.js.map
