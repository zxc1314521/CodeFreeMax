try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="744138e4-4db3-4bf3-a9c3-d2490387dcec",t._sentryDebugIdIdentifier="sentry-dbid-744138e4-4db3-4bf3-a9c3-d2490387dcec")})()}catch{}(function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver((n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)})).observe(document,{childList:!0,subtree:!0})}function e(n){if(n.ep)return;n.ep=!0;const r=(function(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o})(n);fetch(n.href,r)}})();let un;function oh(t){if(!un)throw new Error(`Logger not initialized. Call setLibraryLogger() before using getLogger("${t}").`);return(e=un)&&typeof e.child=="function"&&typeof e.warn=="function"?un.child({prefix:t}):(function(n,r){return{log:(s,o,...i)=>{r.log(s,`[${n}] ${o}`,...i)},info:(s,...o)=>{r.info(`[${n}] ${s}`,...o)},debug:(s,...o)=>{r.debug(`[${n}] ${s}`,...o)},warn:(s,...o)=>{r.warn(`[${n}] ${s}`,...o)},error:(s,...o)=>{r.error(`[${n}] ${s}`,...o)},verbose:(s,...o)=>{r.verbose(`[${n}] ${s}`,...o)}}})(t,un);var e}const z=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,et=globalThis,gn="10.32.1";function An(){return So(et),et}function So(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||gn,e[gn]=e[gn]||{}}function rr(t,e,n=et){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[gn]=r[gn]||{};return s[t]||(s[t]=e())}const Ol=["debug","info","warn","error","log","assert","trace"],ih="Sentry Logger ",Ys={};function On(t){if(!("console"in et))return t();const e=et.console,n={},r=Object.keys(Ys);r.forEach((s=>{const o=Ys[s];n[s]=e[s],e[s]=o}));try{return t()}finally{r.forEach((s=>{e[s]=n[s]}))}}function Pl(){return fi().enabled}function No(t,...e){z&&Pl()&&On((()=>{et.console[t](`${ih}[${t}]:`,...e)}))}function fi(){return z?rr("loggerSettings",(()=>({enabled:!1}))):{enabled:!1}}const N={enable:function(){fi().enabled=!0},disable:function(){fi().enabled=!1},isEnabled:Pl,log:function(...t){No("log",...t)},warn:function(...t){No("warn",...t)},error:function(...t){No("error",...t)}},tc=50,yn="?",ec=/\(error: (.*)\)/,nc=/captureMessage|captureException/;function Dl(...t){const e=t.sort(((n,r)=>n[0]-r[0])).map((n=>n[1]));return(n,r=0,s=0)=>{const o=[],i=n.split(`
`);for(let c=r;c<i.length;c++){let a=i[c];a.length>1024&&(a=a.slice(0,1024));const u=ec.test(a)?a.replace(ec,"$1"):a;if(!u.match(/\S*Error: /)){for(const l of e){const d=l(u);if(d){o.push(d);break}}if(o.length>=tc+s)break}}return(function(c){if(!c.length)return[];const a=Array.from(c);return/sentryWrapped/.test(bs(a).function||"")&&a.pop(),a.reverse(),nc.test(bs(a).function||"")&&(a.pop(),nc.test(bs(a).function||"")&&a.pop()),a.slice(0,tc).map((u=>({...u,filename:u.filename||bs(a).filename,function:u.function||yn})))})(o.slice(s))}}function bs(t){return t[t.length-1]||{}}const rc="<anonymous>";function Pe(t){try{return t&&typeof t=="function"&&t.name||rc}catch{return rc}}function sc(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach((r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)})),n}catch{return}}}function Ll(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Ls={},oc={};function nn(t,e){Ls[t]=Ls[t]||[],Ls[t].push(e)}function rn(t,e){if(!oc[t]){oc[t]=!0;try{e()}catch(n){z&&N.error(`Error while instrumenting ${t}`,n)}}}function se(t,e){const n=t&&Ls[t];if(n)for(const r of n)try{r(e)}catch(s){z&&N.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Pe(r)}
Error:`,s)}}let Fo=null;function Nl(t){const e="error";nn(e,t),rn(e,ah)}function ah(){Fo=et.onerror,et.onerror=function(t,e,n,r,s){return se("error",{column:r,error:s,line:n,msg:t,url:e}),!!Fo&&Fo.apply(this,arguments)},et.onerror.__SENTRY_INSTRUMENTED__=!0}let qo=null;function Fl(t){const e="unhandledrejection";nn(e,t),rn(e,ch)}function ch(){qo=et.onunhandledrejection,et.onunhandledrejection=function(t){return se("unhandledrejection",t),!qo||qo.apply(this,arguments)},et.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ql=Object.prototype.toString;function ra(t){switch(ql.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return De(t,Error)}}function vr(t,e){return ql.call(t)===`[object ${e}]`}function $l(t){return vr(t,"ErrorEvent")}function ic(t){return vr(t,"DOMError")}function Te(t){return vr(t,"String")}function sa(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function sr(t){return t===null||sa(t)||typeof t!="object"&&typeof t!="function"}function Kr(t){return vr(t,"Object")}function wo(t){return typeof Event<"u"&&De(t,Event)}function _r(t){return!!(t?.then&&typeof t.then=="function")}function De(t,e){try{return t instanceof e}catch{return!1}}function jl(t){return!(typeof t!="object"||t===null||!(t.__isVue||t._isVue||t.__v_isVNode))}function oa(t){return typeof Request<"u"&&De(t,Request)}const ia=et,uh=80;function Ht(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let o=0,i=0;const c=" > ",a=c.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||uh;for(;n&&o++<r&&(u=lh(n,l),!(u==="html"||o>1&&i+s.length*a+u.length>=d));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function lh(t,e){const n=t,r=[];if(!n?.tagName)return"";if(ia.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e?.length?e.filter((i=>n.getAttribute(i))).map((i=>[i,n.getAttribute(i)])):null;if(s?.length)s.forEach((i=>{r.push(`[${i[0]}="${i[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&Te(i)){const c=i.split(/\s+/);for(const a of c)r.push(`.${a}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const c=n.getAttribute(i);c&&r.push(`[${i}="${c}"]`)}return r.join("")}function br(){try{return ia.document.location.href}catch{return""}}function Ul(t){if(!ia.HTMLElement)return null;let e=t;for(let n=0;n<5;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function Bt(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Bl(s,r);try{t[e]=s}catch{z&&N.log(`Failed to replace method "${e}" in object`,t)}}function Qt(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{z&&N.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Bl(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Qt(t,"__sentry_original__",e)}catch{}}function aa(t){return t.__sentry_original__}function zl(t){if(ra(t))return{message:t.message,name:t.name,stack:t.stack,...cc(t)};if(wo(t)){const e={type:t.type,target:ac(t.target),currentTarget:ac(t.currentTarget),...cc(t)};return typeof CustomEvent<"u"&&De(t,CustomEvent)&&(e.detail=t.detail),e}return t}function ac(t){try{return e=t,typeof Element<"u"&&De(e,Element)?Ht(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function cc(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function hi(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Xs(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{jl(s)?n.push(Ll(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Ns(t,e,n=!1){return!!Te(t)&&(vr(e,"RegExp")?e.test(t):!!Te(e)&&(n?t===e:t.includes(e)))}function Ce(t,e=[],n=!1){return e.some((r=>Ns(t,r,n)))}let $o;function Yt(t=(function(){const e=et;return e.crypto||e.msCrypto})()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return $o||($o="10000000100040008000"+1e11),$o.replace(/[018]/g,(e=>(e^(16*Math.random()&15)>>e/4).toString(16)))}function Wl(t){return t.exception?.values?.[0]}function an(t){const{message:e,event_id:n}=t;if(e)return e;const r=Wl(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function mi(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type="Error")}function xn(t,e){const n=Wl(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const s={...r?.data,...e.data};n.mechanism.data=s}}function uc(t){if((function(e){try{return e.__sentry_captured__}catch{}})(t))return!0;try{Qt(t,"__sentry_captured__",!0)}catch{}return!1}const Hl=1e3;function Tn(){return Date.now()/Hl}let lc,jo;function Ct(){return(lc??(lc=(function(){const{performance:t}=et;if(!t?.now||!t.timeOrigin)return Tn;const e=t.timeOrigin;return()=>(e+t.now())/Hl})()))()}function zt(){return jo||(jo=(function(){const{performance:t}=et;if(!t?.now)return[void 0,"none"];const e=36e5,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=s<e,i=t.timing?.navigationStart,c=typeof i=="number"?Math.abs(i+n-r):e;return o||c<e?s<=c?[t.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]})()),jo[0]}function dh(t){const e=Ct(),n={sid:Yt(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>(function(r){return{sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}}})(n)};return t&&or(n,t),n}function or(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Ct(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Yt()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function as(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=as(r[s],e[s],n-1));return r}function Le(){return Yt()}function Ie(){return Yt().substring(16)}const gi="_sentrySpan";function ir(t,e){e?Qt(t,gi,e):delete t[gi]}function Qs(t){return t[gi]}class be{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Le(),sampleRand:Math.random()}}clone(){const e=new be;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ir(e,Qs(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&or(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof be?n.getScopeData():Kr(n)?e:void 0,{tags:s,attributes:o,extra:i,user:c,contexts:a,level:u,fingerprint:l=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},c&&Object.keys(c).length&&(this._user=c),u&&(this._level=u),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ir(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Le(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const s={timestamp:Tn(),...e,message:e.message?hi(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Qs(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=as(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||Yt();if(!this._client)return z&&N.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r?.event_id||Yt();if(!this._client)return z&&N.warn("No client configured on scope - will not capture message!"),s;const o=r?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:o,...r,event_id:s},this),s}captureEvent(e,n){const r=n?.event_id||Yt();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(z&&N.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class ph{constructor(e,n){let r,s;r=e||new be,s=n||new be,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return _r(r)?r.then((s=>(this._popScope(),s)),(s=>{throw this._popScope(),s})):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ar(){const t=So(An());return t.stack=t.stack||new ph(rr("defaultCurrentScope",(()=>new be)),rr("defaultIsolationScope",(()=>new be)))}function fh(t){return ar().withScope(t)}function hh(t,e){const n=ar();return n.withScope((()=>(n.getStackTop().scope=t,e(t))))}function dc(t){return ar().withScope((()=>t(ar().getIsolationScope())))}function Sr(t){const e=So(t);return e.acs?e.acs:{withIsolationScope:dc,withScope:fh,withSetScope:hh,withSetIsolationScope:(n,r)=>dc(r),getCurrentScope:()=>ar().getScope(),getIsolationScope:()=>ar().getIsolationScope()}}function dt(){return Sr(An()).getCurrentScope()}function oe(){return Sr(An()).getIsolationScope()}function cs(...t){const e=Sr(An());if(t.length===2){const[n,r]=t;return n?e.withSetScope(n,r):e.withScope(r)}return e.withScope(t[0])}function rt(){return dt().getClient()}function mh(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,o={trace_id:n,span_id:s||Ie()};return r&&(o.parent_span_id=r),o}const de="sentry.source",ca="sentry.sample_rate",Gl="sentry.previous_trace_sample_rate",Ne="sentry.op",xt="sentry.origin",$r="sentry.idle_span_finish_reason",us="sentry.measurement_unit",ls="sentry.measurement_value",pc="sentry.custom_span_name",yi="sentry.profile_id",cr="sentry.exclusive_time",gh="sentry.link.type",yh=0,ua=1,Et=2;function Vl(t,e){t.setAttribute("http.response.status_code",e);const n=(function(r){if(r<400&&r>=100)return{code:ua};if(r>=400&&r<500)switch(r){case 401:return{code:Et,message:"unauthenticated"};case 403:return{code:Et,message:"permission_denied"};case 404:return{code:Et,message:"not_found"};case 409:return{code:Et,message:"already_exists"};case 413:return{code:Et,message:"failed_precondition"};case 429:return{code:Et,message:"resource_exhausted"};case 499:return{code:Et,message:"cancelled"};default:return{code:Et,message:"invalid_argument"}}if(r>=500&&r<600)switch(r){case 501:return{code:Et,message:"unimplemented"};case 503:return{code:Et,message:"unavailable"};case 504:return{code:Et,message:"deadline_exceeded"};default:return{code:Et,message:"internal_error"}}return{code:Et,message:"internal_error"}})(e);n.message!=="unknown_error"&&t.setStatus(n)}const Kl="_sentryScope",Jl="_sentryIsolationScope";function vh(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function _h(t,e,n){t&&(Qt(t,Jl,(function(r){try{const s=et.WeakRef;if(typeof s=="function")return new s(r)}catch{}return r})(n)),Qt(t,Kl,e))}function Zs(t){const e=t;return{scope:e[Kl],isolationScope:vh(e[Jl])}}const la="sentry-",bh=/^sentry-/,Sh=8192;function Yl(t){const e=(function(r){if(!(!r||!Te(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce(((s,o)=>{const i=fc(o);return Object.entries(i).forEach((([c,a])=>{s[c]=a})),s}),{}):fc(r)})(t);if(!e)return;const n=Object.entries(e).reduce(((r,[s,o])=>(s.match(bh)&&(r[s.slice(la.length)]=o),r)),{});return Object.keys(n).length>0?n:void 0}function wh(t){if(t)return(function(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce(((n,[r,s],o)=>{const i=`${encodeURIComponent(r)}=${encodeURIComponent(s)}`,c=o===0?i:`${n},${i}`;return c.length>Sh?(z&&N.warn(`Not adding key: ${r} with val: ${s} to baggage header due to exceeding baggage size limits.`),n):c}),"")})(Object.entries(t).reduce(((e,[n,r])=>(r&&(e[`${la}${n}`]=r),e)),{}))}function fc(t){return t.split(",").map((e=>{const n=e.indexOf("=");return n===-1?[]:[e.slice(0,n),e.slice(n+1)].map((r=>{try{return decodeURIComponent(r.trim())}catch{return}}))})).reduce(((e,[n,r])=>(n&&r&&(e[n]=r),e)),{})}const kh=/^o(\d+)\./,Eh=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ur(t,e=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:c,publicKey:a}=t;return`${c}://${a}${e&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function hc(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function xh(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=(function(s){return s.match(kh)?.[1]})(n)),r}function Th(t){const e=typeof t=="string"?(function(n){const r=Eh.exec(n);if(!r)return void On((()=>{console.error(`Invalid Sentry Dsn: ${n}`)}));const[s,o,i="",c="",a="",u=""]=r.slice(1);let l="",d=u;const p=d.split("/");if(p.length>1&&(l=p.slice(0,-1).join("/"),d=p.pop()),d){const h=d.match(/^\d+/);h&&(d=h[0])}return hc({host:c,pass:i,path:l,projectId:d,port:a,protocol:s,publicKey:o})})(t):hc(t);if(e&&(function(n){if(!z)return!0;const{port:r,projectId:s,protocol:o}=n;return!(["protocol","publicKey","host","projectId"].find((c=>!n[c]&&(N.error(`Invalid Sentry Dsn: ${c} missing`),!0)))||(s.match(/^\d+$/)?(function(c){return c==="http"||c==="https"})(o)?r&&isNaN(parseInt(r,10))&&(N.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(N.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(N.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),1)))})(e))return e}function Cn(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)||e<0||e>1?void 0:e}const Xl=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Ch(t,e){const n=(function(a){if(!a)return;const u=a.match(Xl);if(!u)return;let l;return u[3]==="1"?l=!0:u[3]==="0"&&(l=!1),{traceId:u[1],parentSampled:l,parentSpanId:u[2]}})(t),r=Yl(e);if(!n?.traceId)return{traceId:Le(),sampleRand:Math.random()};const s=(function(a,u){const l=Cn(u?.sample_rand);if(l!==void 0)return l;const d=Cn(u?.sample_rate);return d&&a?.parentSampled!==void 0?a.parentSampled?Math.random()*d:d+Math.random()*(1-d):Math.random()})(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:c}=n;return{traceId:o,parentSpanId:i,sampled:c,dsc:r||{},sampleRand:s}}function mc(t=Le(),e=Ie(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function gc(t=Le(),e=Ie(),n){return`00-${t}-${e}-${n?"01":"00"}`}const da=1;let yc=!1;function Ih(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:c,links:a}=ct(t);return{parent_span_id:o,span_id:e,trace_id:n,data:r,op:s,status:i,origin:c,links:a}}function Rh(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:ct(t).parent_span_id,o=Zs(t).scope;return{parent_span_id:s,span_id:r?o?.getPropagationContext().propagationSpanId||Ie():e,trace_id:n}}function Ql(t){return t&&t.length>0?t.map((({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:o})=>({span_id:e,trace_id:n,sampled:r===da,attributes:o,...s}))):void 0}function vn(t){return typeof t=="number"?vc(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?vc(t.getTime()):Ct()}function vc(t){return t>9999999999?t/1e3:t}function ct(t){if((function(r){return typeof r.getSpanJSON=="function"})(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if((function(r){const s=r;return!!(s.attributes&&s.startTime&&s.name&&s.endTime&&s.status)})(t)){const{attributes:r,startTime:s,name:o,endTime:i,status:c,links:a}=t;return{span_id:e,trace_id:n,data:r,description:o,parent_span_id:"parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0,start_timestamp:vn(s),timestamp:vn(i)||void 0,status:Zl(c),op:r[Ne],origin:r[xt],links:Ql(a)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Ge(t){const{traceFlags:e}=t.spanContext();return e===da}function Zl(t){if(t&&t.code!==yh)return t.code===ua?"ok":t.message||"internal_error"}const _n="_sentryChildSpans",vi="_sentryRootSpan";function _c(t,e){const n=t[vi]||t;Qt(e,vi,n),t[_n]?t[_n].add(e):Qt(t,_n,new Set([e]))}function Fs(t){const e=new Set;return(function n(r){if(!e.has(r)&&Ge(r)){e.add(r);const s=r[_n]?Array.from(r[_n]):[];for(const o of s)n(o)}})(t),Array.from(e)}function Lt(t){return t[vi]||t}function jt(){const t=Sr(An());return t.getActiveSpan?t.getActiveSpan():Qs(dt())}function _i(){yc||(On((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")})),yc=!0)}let bc=!1;function pe(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||rt()?.getOptions();return!(!e||e.tracesSampleRate==null&&!e.tracesSampler)}function Sc(t){N.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function to(t,e){if(!e?.length||!t.description)return!1;for(const r of e){if(typeof(n=r)=="string"||n instanceof RegExp){if(Ns(t.description,r))return z&&Sc(t),!0;continue}if(!r.name&&!r.op)continue;const s=!r.name||Ns(t.description,r.name),o=!r.op||t.op&&Ns(t.op,r.op);if(s&&o)return z&&Sc(t),!0}var n;return!1}function Mh(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}const pa="production",td="_frozenDsc";function qs(t,e){Qt(t,td,e)}function ed(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||pa,release:n.release,public_key:r,trace_id:t,org_id:xh(e)};return e.emit("createDsc",s),s}function nd(t,e){const n=e.getPropagationContext();return n.dsc||ed(n.traceId,t)}function Fe(t){const e=rt();if(!e)return{};const n=Lt(t),r=ct(n),s=r.data,o=n.spanContext().traceState,i=o?.get("sentry.sample_rate")??s[ca]??s[Gl];function c(f){return typeof i!="number"&&typeof i!="string"||(f.sample_rate=`${i}`),f}const a=n[td];if(a)return c(a);const u=o?.get("sentry.dsc"),l=u&&Yl(u);if(l)return c(l);const d=ed(t.spanContext().traceId,e),p=s[de],h=r.description;return p!=="url"&&h&&(d.transaction=h),pe()&&(d.sampled=String(Ge(n)),d.sample_rand=o?.get("sentry.sample_rand")??Zs(n).scope?.getPropagationContext().sampleRand.toString()),c(d),e.emit("createDsc",d,n),d}class Qe{constructor(e={}){this._traceId=e.traceId||Le(),this._spanId=e.spanId||Ie()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function ue(t,e=100,n=1/0){try{return bi("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function rd(t,e=3,n=102400){const r=ue(t,e);return s=r,(function(o){return~-encodeURI(o).split(/%..|./).length})(JSON.stringify(s))>n?rd(t,e-1,n):r;var s}function bi(t,e,n=1/0,r=1/0,s=(function(){const o=new WeakSet;function i(a){return!!o.has(a)||(o.add(a),!1)}function c(a){o.delete(a)}return[i,c]})()){const[o,i]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const c=(function(h,f){try{if(h==="domain"&&f&&typeof f=="object"&&f._events)return"[Domain]";if(h==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&f===global)return"[Global]";if(typeof window<"u"&&f===window)return"[Window]";if(typeof document<"u"&&f===document)return"[Document]";if(jl(f))return Ll(f);if(Kr(m=f)&&"nativeEvent"in m&&"preventDefault"in m&&"stopPropagation"in m)return"[SyntheticEvent]";if(typeof f=="number"&&!Number.isFinite(f))return`[${f}]`;if(typeof f=="function")return`[Function: ${Pe(f)}]`;if(typeof f=="symbol")return`[${String(f)}]`;if(typeof f=="bigint")return`[BigInt: ${String(f)}]`;const g=(function(y){const S=Object.getPrototypeOf(y);return S?.constructor?S.constructor.name:"null prototype"})(f);return/^HTML(\w*)Element$/.test(g)?`[HTMLElement: ${g}]`:`[object ${g}]`}catch(g){return`**non-serializable** (${g})`}var m})(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const a=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(a===0)return c.replace("object ","");if(o(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{return bi("",u.toJSON(),a-1,r,s)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const p=zl(e);for(const h in p){if(!Object.prototype.hasOwnProperty.call(p,h))continue;if(d>=r){l[h]="[MaxProperties ~]";break}const f=p[h];l[h]=bi(h,f,a-1,r,s),d++}return i(e),l}function Ve(t,e=[]){return[t,e]}function Ah(t,e){const[n,r]=t;return[n,[...r,e]]}function wc(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Si(t){const e=So(et);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function Oh(t){const[e,n]=t;let r=JSON.stringify(e);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[Si(r),o]:r.push(typeof o=="string"?Si(o):o)}for(const o of n){const[i,c]=o;if(s(`
${JSON.stringify(i)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let a;try{a=JSON.stringify(c)}catch{a=JSON.stringify(ue(c))}s(a)}}return typeof r=="string"?r:(function(o){const i=o.reduce(((u,l)=>u+l.length),0),c=new Uint8Array(i);let a=0;for(const u of o)c.set(u,a),a+=u.length;return c})(r)}function Ph(t){return[{type:"span"},t]}function Dh(t){const e=typeof t.data=="string"?Si(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const Lh={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function kc(t){return Lh[t]}function wi(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function sd(t,e,n,r){const s=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:ur(r)},...s&&{trace:s}}}function Ec(t){if(!t||t.length===0)return;const e={};return t.forEach((n=>{const r=n.attributes||{},s=r[us],o=r[ls];typeof s=="string"&&typeof o=="number"&&(e[n.name]={value:o,unit:s})})),e}class ds{constructor(e={}){this._traceId=e.traceId||Le(),this._spanId=e.spanId||Ie(),this._startTime=e.startTimestamp||Ct(),this._links=e.links,this._attributes={},this.setAttributes({[xt]:"manual",[Ne]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?da:0}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach((n=>this.setAttribute(n,e[n]))),this}updateStartTime(e){this._startTime=vn(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(de,"custom"),this}end(e){this._endTime||(this._endTime=vn(e),(function(n){if(!z)return;const{description:r="< unknown name >",op:s="< unknown op >"}=ct(n),{spanId:o}=n.spanContext(),i=`[Tracing] Finishing "${s}" ${Lt(n)===n?"root ":""}span "${r}" with ID ${o}`;N.log(i)})(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ne],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Zl(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[xt],profile_id:this._attributes[yi],exclusive_time:this._attributes[cr],measurements:Ec(this._events),is_segment:this._isStandaloneSpan&&Lt(this)===this||void 0,segment_id:this._isStandaloneSpan?Lt(this).spanContext().spanId:void 0,links:Ql(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){z&&N.log("[Tracing] Adding an event to span:",e);const s=xc(n)?n:r||Ct(),o=xc(n)?{}:n||{},i={name:e,time:vn(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=rt();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Lt(this)))return;if(this._isStandaloneSpan)return void(this._sampled?(function(r){const s=rt();if(!s)return;const o=r[1];if(!o||o.length===0)return void s.recordDroppedEvent("before_send","span");s.sendEnvelope(r)})((function(r,s){const o=Fe(r[0]),i=s?.getDsn(),c=s?.getOptions().tunnel,a={sent_at:new Date().toISOString(),...(function(m){return!!m.trace_id&&!!m.public_key})(o)&&{trace:o},...!!c&&i&&{dsn:ur(i)}},{beforeSendSpan:u,ignoreSpans:l}=s?.getOptions()||{},d=l?.length?r.filter((m=>!to(ct(m),l))):r,p=r.length-d.length;p&&s?.recordDroppedEvent("before_send","span",p);const h=u?m=>{const g=ct(m);return u(g)||(_i(),g)}:ct,f=[];for(const m of d){const g=h(m);g&&f.push(Ph(g))}return Ve(a,f)})([this],e)):(z&&N.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const n=this._convertSpanToTransaction();n&&(Zs(this).scope||dt()).captureEvent(n)}_convertSpanToTransaction(){if(!Tc(ct(this)))return;this._name||(z&&N.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=Zs(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const s=Fs(this).filter((a=>a!==this&&!(function(u){return u instanceof ds&&u.isStandaloneSpan()})(a))).map((a=>ct(a))).filter(Tc),o=this._attributes[de];delete this._attributes[pc],s.forEach((a=>{delete a.data[pc]}));const i={contexts:{trace:Ih(this)},spans:s.length>1e3?s.sort(((a,u)=>a.start_timestamp-u.start_timestamp)).slice(0,1e3):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:Fe(this)},request:r,...o&&{transaction_info:{source:o}}},c=Ec(this._events);return c&&Object.keys(c).length&&(z&&N.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),i.measurements=c),i}}function xc(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Tc(t){return!!(t.start_timestamp&&t.timestamp&&t.span_id&&t.trace_id)}function Nh(t,e,n=(()=>{}),r=(()=>{})){let s;try{s=t()}catch(o){throw e(o),n(),o}return(function(o,i,c,a){return _r(o)?o.then((u=>(c(),a(u),u)),(u=>{throw i(u),c(),u})):(c(),a(o),o)})(s,e,n,r)}const od="__SENTRY_SUPPRESS_TRACING__";function id(t,e){const n=ha();if(n.startSpan)return n.startSpan(t,e);const r=cd(t),{forceTransaction:s,parentSpan:o,scope:i}=t,c=i?.clone();return cs(c,(()=>{const a=(u=o)!==void 0?l=>fa(u,l):l=>l();var u;return a((()=>{const l=dt(),d=ud(l,o),p=t.onlyIfParent&&!d?new Qe:ad({parentSpan:d,spanArguments:r,forceTransaction:s,scope:l});return ir(l,p),Nh((()=>e(p)),(()=>{const{status:h}=ct(p);!p.isRecording()||h&&h!=="ok"||p.setStatus({code:Et,message:"internal_error"})}),(()=>{p.end()}))}))}))}function Ze(t){const e=ha();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=cd(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?o=>cs(t.scope,o):s!==void 0?o=>fa(s,o):o=>o())((()=>{const o=dt(),i=ud(o,s);return t.onlyIfParent&&!i?new Qe:ad({parentSpan:i,spanArguments:n,forceTransaction:r,scope:o})}))}function fa(t,e){const n=ha();return n.withActiveSpan?n.withActiveSpan(t,e):cs((r=>(ir(r,t||void 0),e(r))))}function ad({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!pe()){const i=new Qe;return(n||!t)&&qs(i,{sampled:"false",sample_rate:"0",transaction:e.name,...Fe(i)}),i}const s=oe();let o;if(t&&!n)o=(function(i,c,a){const{spanId:u,traceId:l}=i.spanContext(),d=!c.getScopeData().sdkProcessingMetadata[od]&&Ge(i),p=d?new ds({...a,parentSpanId:u,traceId:l,sampled:d}):new Qe({traceId:l});_c(i,p);const h=rt();return h&&(h.emit("spanStart",p),a.endTimestamp&&h.emit("spanEnd",p)),p})(t,r,e),_c(t,o);else if(t){const i=Fe(t),{traceId:c,spanId:a}=t.spanContext(),u=Ge(t);o=Cc({traceId:c,parentSpanId:a,...e},r,u),qs(o,i)}else{const{traceId:i,dsc:c,parentSpanId:a,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=Cc({traceId:i,parentSpanId:a,...e},r,u),c&&qs(o,c)}return(function(i){if(!z)return;const{description:c="< unknown name >",op:a="< unknown op >",parent_span_id:u}=ct(i),{spanId:l}=i.spanContext(),d=Ge(i),p=Lt(i),h=p===i,f=`[Tracing] Starting ${d?"sampled":"unsampled"} ${h?"root ":""}span`,m=[`op: ${a}`,`name: ${c}`,`ID: ${l}`];if(u&&m.push(`parent ID: ${u}`),!h){const{op:g,description:y}=ct(p);m.push(`root ID: ${p.spanContext().spanId}`),g&&m.push(`root op: ${g}`),y&&m.push(`root description: ${y}`)}N.log(`${f}
  ${m.join(`
  `)}`)})(o),_h(o,r,s),o}function cd(t){const e={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...e};return n.startTimestamp=vn(t.startTime),delete n.startTime,n}return e}function ha(){return Sr(An())}function Cc(t,e,n){const r=rt(),s=r?.getOptions()||{},{name:o=""}=t,i={spanAttributes:{...t.attributes},spanName:o,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const c=i.parentSampled??n,a=i.spanAttributes,u=e.getPropagationContext(),[l,d,p]=e.getScopeData().sdkProcessingMetadata[od]?[!1]:(function(f,m,g){if(!pe(f))return[!1];let y,S;typeof f.tracesSampler=="function"?(S=f.tracesSampler({...m,inheritOrSampleWith:T=>typeof m.parentSampleRate=="number"?m.parentSampleRate:typeof m.parentSampled=="boolean"?Number(m.parentSampled):T}),y=!0):m.parentSampled!==void 0?S=m.parentSampled:f.tracesSampleRate!==void 0&&(S=f.tracesSampleRate,y=!0);const v=Cn(S);if(v===void 0)return z&&N.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(S)} of type ${JSON.stringify(typeof S)}.`),[!1];if(!v)return z&&N.log("[Tracing] Discarding transaction because "+(typeof f.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,v,y];const w=g<v;return w||z&&N.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(S)})`),[w,v,y]})(s,{name:o,parentSampled:c,attributes:a,parentSampleRate:Cn(u.dsc?.sample_rate)},u.sampleRand),h=new ds({...t,attributes:{[de]:"custom",[ca]:d!==void 0&&p?d:void 0,...a},sampled:l});return!l&&r&&(z&&N.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",h),h}function ud(t,e){if(e)return e;if(e===null)return;const n=Qs(t);if(!n)return;const r=rt();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Lt(n):n}const $s={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Fh="heartbeatFailed",qh="idleTimeout",$h="finalTimeout",jh="externalFinish";function Ic(t,e={}){const n=new Map;let r,s=!1,o=jh,i=!e.disableAutoFinish;const c=[],{idleTimeout:a=$s.idleTimeout,finalTimeout:u=$s.finalTimeout,childSpanTimeout:l=$s.childSpanTimeout,beforeSpanEnd:d,trimIdleSpanEndTimestamp:p=!0}=e,h=rt();if(!h||!pe()){const T=new Qe;return qs(T,{sample_rate:"0",sampled:"false",...Fe(T)}),T}const f=dt(),m=jt(),g=(function(T){const x=Ze(T);return ir(dt(),x),z&&N.log("[Tracing] Started span is an idle span"),x})(t);function y(){r&&(clearTimeout(r),r=void 0)}function S(T){y(),r=setTimeout((()=>{!s&&n.size===0&&i&&(o=qh,g.end(T))}),a)}function v(T){r=setTimeout((()=>{!s&&i&&(o=Fh,g.end(T))}),l)}function w(T){s=!0,n.clear(),c.forEach((I=>I())),ir(f,m);const x=ct(g),{start_timestamp:_}=x;if(!_)return;x.data[$r]||g.setAttribute($r,o);const b=x.status;b&&b!=="unknown"||g.setStatus({code:ua}),N.log(`[Tracing] Idle span "${x.op}" finished`);const E=Fs(g).filter((I=>I!==g));let R=0;E.forEach((I=>{I.isRecording()&&(I.setStatus({code:Et,message:"cancelled"}),I.end(T),z&&N.log("[Tracing] Cancelling span since span ended early",JSON.stringify(I,void 0,2)));const C=ct(I),{timestamp:M=0,start_timestamp:D=0}=C,P=D<=T,$=M-D<=(u+a)/1e3;if(z){const L=JSON.stringify(I,void 0,2);P?$||N.log("[Tracing] Discarding span since it finished after idle span final timeout",L):N.log("[Tracing] Discarding span since it happened after idle span was finished",L)}$&&P||((function(L,A){L[_n]&&L[_n].delete(A)})(g,I),R++)})),R>0&&g.setAttribute("sentry.idle_span_discarded_spans",R)}return g.end=new Proxy(g.end,{apply(T,x,_){if(d&&d(g),x instanceof Qe)return;const[b,...E]=_,R=vn(b||Ct()),I=Fs(g).filter((L=>L!==g)),C=ct(g);if(!I.length||!p)return w(R),Reflect.apply(T,x,[R,...E]);const M=h.getOptions().ignoreSpans,D=I?.reduce(((L,A)=>{const F=ct(A);return F.timestamp?M&&to(F,M)?L:L?Math.max(L,F.timestamp):F.timestamp:L}),void 0),P=C.start_timestamp,$=Math.min(P?P+u/1e3:1/0,Math.max(P||-1/0,Math.min(R,D||1/0)));return w($),Reflect.apply(T,x,[$,...E])}}),c.push(h.on("spanStart",(T=>{if(!(s||T===g||ct(T).timestamp||T instanceof ds&&T.isStandaloneSpan())){var x;Fs(g).includes(T)&&(x=T.spanContext().spanId,y(),n.set(x,!0),v(Ct()+l/1e3))}}))),c.push(h.on("spanEnd",(T=>{var x;s||(x=T.spanContext().spanId,n.has(x)&&n.delete(x),n.size===0&&S(Ct()+a/1e3))}))),c.push(h.on("idleSpanEnableAutoFinish",(T=>{T===g&&(i=!0,S(),n.size&&v())}))),e.disableAutoFinish||S(),setTimeout((()=>{s||(g.setStatus({code:Et,message:"deadline_exceeded"}),o=$h,g.end())}),u),g}function eo(t){return new Jr((e=>{e(t)}))}function ma(t){return new Jr(((e,n)=>{n(t)}))}class Jr{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,n){return new Jr(((r,s)=>{this._handlers.push([!1,o=>{if(e)try{r(e(o))}catch(i){s(i)}else r(o)},o=>{if(n)try{r(n(o))}catch(i){s(i)}else s(o)}]),this._executeHandlers()}))}catch(e){return this.then((n=>n),e)}finally(e){return new Jr(((n,r)=>{let s,o;return this.then((i=>{o=!1,s=i,e&&e()}),(i=>{o=!0,s=i,e&&e()})).then((()=>{o?r(s):n(s)}))}))}_executeHandlers(){if(this._state===0)return;const e=this._handlers.slice();this._handlers=[],e.forEach((n=>{n[0]||(this._state===1&&n[1](this._value),this._state===2&&n[2](this._value),n[0]=!0)}))}_runExecutor(e){const n=(o,i)=>{this._state===0&&(_r(i)?i.then(r,s):(this._state=o,this._value=i,this._executeHandlers()))},r=o=>{n(1,o)},s=o=>{n(2,o)};try{e(r,s)}catch(o){s(o)}}}function Uh(t,e,n,r=0){try{const s=ki(e,n,t,r);return _r(s)?s:eo(s)}catch(s){return ma(s)}}function ki(t,e,n,r){const s=n[r];if(!t||!s)return t;const o=s({...t},e);return z&&o===null&&N.log(`Event processor "${s.id||"?"}" dropped event`),_r(o)?o.then((i=>ki(i,e,n,r+1))):ki(o,e,n,r+1)}function Bh(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=e;(function(i,c){const{extra:a,tags:u,user:l,contexts:d,level:p,transactionName:h}=c;Object.keys(a).length&&(i.extra={...a,...i.extra}),Object.keys(u).length&&(i.tags={...u,...i.tags}),Object.keys(l).length&&(i.user={...l,...i.user}),Object.keys(d).length&&(i.contexts={...d,...i.contexts}),p&&(i.level=p),h&&i.type!=="transaction"&&(i.transaction=h)})(t,e),r&&(function(i,c){i.contexts={trace:Rh(c),...i.contexts},i.sdkProcessingMetadata={dynamicSamplingContext:Fe(c),...i.sdkProcessingMetadata};const a=Lt(c),u=ct(a).description;u&&!i.transaction&&i.type==="transaction"&&(i.transaction=u)})(t,r),(function(i,c){i.fingerprint=i.fingerprint?Array.isArray(i.fingerprint)?i.fingerprint:[i.fingerprint]:[],c&&(i.fingerprint=i.fingerprint.concat(c)),i.fingerprint.length||delete i.fingerprint})(t,n),(function(i,c){const a=[...i.breadcrumbs||[],...c];i.breadcrumbs=a.length?a:void 0})(t,s),(function(i,c){i.sdkProcessingMetadata={...i.sdkProcessingMetadata,...c}})(t,o)}function Rc(t,e){const{extra:n,tags:r,attributes:s,user:o,contexts:i,level:c,sdkProcessingMetadata:a,breadcrumbs:u,fingerprint:l,eventProcessors:d,attachments:p,propagationContext:h,transactionName:f,span:m}=e;Cr(t,"extra",n),Cr(t,"tags",r),Cr(t,"attributes",s),Cr(t,"user",o),Cr(t,"contexts",i),t.sdkProcessingMetadata=as(t.sdkProcessingMetadata,a,2),c&&(t.level=c),f&&(t.transactionName=f),m&&(t.span=m),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...h}}function Cr(t,e,n){t[e]=as(t[e],n,1)}let on,Mc,Ac,je;function ld(t,e,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:c=1e3}=t,a={...e,event_id:e.event_id||n.event_id||Yt(),timestamp:e.timestamp||Tn()},u=n.integrations||t.integrations.map((f=>f.name));(function(f,m){const{environment:g,release:y,dist:S,maxValueLength:v}=m;f.environment=f.environment||g||pa,!f.release&&y&&(f.release=y),!f.dist&&S&&(f.dist=S);const w=f.request;w?.url&&v&&(w.url=hi(w.url,v)),v&&f.exception?.values?.forEach((T=>{T.value&&(T.value=hi(T.value,v))}))})(a,t),(function(f,m){m.length>0&&(f.sdk=f.sdk||{},f.sdk.integrations=[...f.sdk.integrations||[],...m])})(a,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&(function(f,m){const g=(function(y){const S=et._sentryDebugIds,v=et._debugIds;if(!S&&!v)return{};const w=S?Object.keys(S):[],T=v?Object.keys(v):[];if(je&&w.length===Mc&&T.length===Ac)return je;Mc=w.length,Ac=T.length,je={},on||(on={});const x=(_,b)=>{for(const E of _){const R=b[E],I=on?.[E];if(I&&je&&R)je[I[0]]=R,on&&(on[E]=[I[0],R]);else if(R){const C=y(E);for(let M=C.length-1;M>=0;M--){const D=C[M],P=D?.filename;if(P&&je&&on){je[P]=R,on[E]=[P,R];break}}}}};return S&&x(w,S),v&&x(T,v),je})(m);f.exception?.values?.forEach((y=>{y.stacktrace?.frames?.forEach((S=>{S.filename&&(S.debug_id=g[S.filename])}))}))})(a,t.stackParser);const l=(function(f,m){if(!m)return f;const g=f?f.clone():new be;return g.update(m),g})(r,n.captureContext);n.mechanism&&xn(a,n.mechanism);const d=s?s.getEventProcessors():[],p=rr("globalScope",(()=>new be)).getScopeData();o&&Rc(p,o.getScopeData()),l&&Rc(p,l.getScopeData());const h=[...n.attachments||[],...p.attachments];return h.length&&(n.attachments=h),Bh(a,p),Uh([...d,...p.eventProcessors],a,n).then((f=>(f&&(function(m){const g={};if(m.exception?.values?.forEach((S=>{S.stacktrace?.frames?.forEach((v=>{v.debug_id&&(v.abs_path?g[v.abs_path]=v.debug_id:v.filename&&(g[v.filename]=v.debug_id),delete v.debug_id)}))})),Object.keys(g).length===0)return;m.debug_meta=m.debug_meta||{},m.debug_meta.images=m.debug_meta.images||[];const y=m.debug_meta.images;Object.entries(g).forEach((([S,v])=>{y.push({type:"sourcemap",code_file:S,debug_id:v})}))})(f),typeof i=="number"&&i>0?(function(m,g,y){if(!m)return null;const S={...m,...m.breadcrumbs&&{breadcrumbs:m.breadcrumbs.map((v=>({...v,...v.data&&{data:ue(v.data,g,y)}})))},...m.user&&{user:ue(m.user,g,y)},...m.contexts&&{contexts:ue(m.contexts,g,y)},...m.extra&&{extra:ue(m.extra,g,y)}};return m.contexts?.trace&&S.contexts&&(S.contexts.trace=m.contexts.trace,m.contexts.trace.data&&(S.contexts.trace.data=ue(m.contexts.trace.data,g,y))),m.spans&&(S.spans=m.spans.map((v=>({...v,...v.data&&{data:ue(v.data,g,y)}})))),m.contexts?.flags&&S.contexts&&(S.contexts.flags=ue(m.contexts.flags,3,y)),S})(f,i,c):f)))}function zh(t){if(t)return(function(e){return e instanceof be||typeof e=="function"})(t)||(function(e){return Object.keys(e).some((n=>Wh.includes(n)))})(t)?{captureContext:t}:t}const Wh=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function ga(t,e){return dt().captureException(t,zh(e))}function M_(t,e){const n=e;return dt().captureMessage(t,n,void 0)}function Oc(t,e){return dt().captureEvent(t,e)}function Pc(t){const e=oe(),n=dt(),{userAgent:r}=et.navigator||{},s=dh({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),o=e.getSession();return o?.status==="ok"&&or(o,{status:"exited"}),dd(),e.setSession(s),s}function dd(){const t=oe(),e=dt().getSession()||t.getSession();e&&(function(n,r){let s={};n.status==="ok"&&(s={status:"exited"}),or(n,s)})(e),pd(),t.setSession()}function pd(){const t=oe(),e=rt(),n=t.getSession();n&&e&&e.captureSession(n)}function Dc(t=!1){t?dd():pd()}const Hh="7";function Gh(t,e,n){return e||`${(function(r){return`${(function(s){const o=s.protocol?`${s.protocol}:`:"",i=s.port?`:${s.port}`:"";return`${o}//${s.host}${i}${s.path?`/${s.path}`:""}/api/`})(r)}${r.projectId}/envelope/`})(t)}?${(function(r,s){const o={sentry_version:Hh};return r.publicKey&&(o.sentry_key=r.publicKey),s&&(o.sentry_client=`${s.name}/${s.version}`),new URLSearchParams(o).toString()})(t,n)}`}const Lc=[];function Vh(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;if(e.forEach((s=>{s.isDefaultInstance=!0})),Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const s=n(e);r=Array.isArray(s)?s:[s]}else r=e;return(function(s){const o={};return s.forEach((i=>{const{name:c}=i,a=o[c];a&&!a.isDefaultInstance&&i.isDefaultInstance||(o[c]=i)})),Object.values(o)})(r)}function Nc(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function Fc(t,e,n){if(n[e.name])z&&N.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,Lc.includes(e.name)||typeof e.setupOnce!="function"||(e.setupOnce(),Lc.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",((s,o)=>r(s,o,t)))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign(((o,i)=>r(o,i,t)),{id:e.name});t.addEventProcessor(s)}z&&N.log(`Integration installed: ${e.name}`)}}function fd(t,e){const n=e??(function(o){return qc().get(o)})(t)??[];if(n.length===0)return;const r=t.getOptions(),s=(function(o,i,c,a){const u={};return i?.sdk&&(u.sdk={name:i.sdk.name,version:i.sdk.version}),c&&a&&(u.dsn=ur(a)),Ve(u,[(l=o,[{type:"log",item_count:l.length,content_type:"application/vnd.sentry.items.log+json"},{items:l}])]);var l})(n,r._metadata,r.tunnel,t.getDsn());qc().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function qc(){return rr("clientToLogBufferMap",(()=>new WeakMap))}function hd(t,e){const n=e??(function(o){return $c().get(o)})(t)??[];if(n.length===0)return;const r=t.getOptions(),s=(function(o,i,c,a){const u={};return i?.sdk&&(u.sdk={name:i.sdk.name,version:i.sdk.version}),c&&a&&(u.dsn=ur(a)),Ve(u,[(l=o,[{type:"trace_metric",item_count:l.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:l}])]);var l})(n,r._metadata,r.tunnel,t.getDsn());$c().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(s)}function $c(){return rr("clientToMetricBufferMap",(()=>new WeakMap))}const ya=Symbol.for("SentryBufferFullError");function Ei(t=100){const e=new Set;function n(r){e.delete(r)}return{get $(){return Array.from(e)},add:function(r){if(!(e.size<t))return ma(ya);const s=r();return e.add(s),s.then((()=>n(s)),(()=>n(s))),s},drain:function(r){if(!e.size)return eo(!0);const s=Promise.allSettled(Array.from(e)).then((()=>!0));if(!r)return s;const o=[s,new Promise((i=>setTimeout((()=>i(!1)),r)))];return Promise.race(o)}}}const Kh=6e4;function md(t,e,n=Date.now()){return(function(r,s){return r[s]||r.all||0})(t,e)>n}function gd(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},o=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(o)for(const c of o.trim().split(",")){const[a,u,,,l]=c.split(":",5),d=parseInt(a,10),p=1e3*(isNaN(d)?60:d);if(u)for(const h of u.split(";"))h==="metric_bucket"&&l&&!l.split(";").includes("custom")||(s[h]=r+p);else s.all=r+p}else i?s.all=r+(function(c,a=Date.now()){const u=parseInt(`${c}`,10);if(!isNaN(u))return 1e3*u;const l=Date.parse(`${c}`);return isNaN(l)?Kh:l-a})(i,r):e===429&&(s.all=r+6e4);return s}const yd=64;function vd(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}const jc="Not capturing exception because it's already been captured.",Uc="Discarded session because of missing or non-string release",_d=Symbol.for("SentryInternalError"),bd=Symbol.for("SentryDoNotSendEventError");function Ss(t){return{message:t,[_d]:!0}}function Uo(t){return{message:t,[bd]:!0}}function Bc(t){return!!t&&typeof t=="object"&&_d in t}function zc(t){return!!t&&typeof t=="object"&&bd in t}function Wc(t,e,n,r,s){let o,i=0,c=!1;t.on(n,(()=>{i=0,clearTimeout(o),c=!1})),t.on(e,(a=>{i+=r(a),i>=8e5?s(t):c||(c=!0,o=setTimeout((()=>{s(t)}),5e3))})),t.on("flush",(()=>{s(t)}))}class Jh{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Ei(e.transportOptions?.bufferSize??yd),e.dsn?this._dsn=Th(e.dsn):z&&N.warn("No DSN provided, client will not send events."),this._dsn){const n=Gh(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Wc(this,"afterCaptureLog","flushLogs",Xh,fd),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Wc(this,"afterCaptureMetric","flushMetrics",Yh,hd)}captureException(e,n,r){const s=Yt();if(uc(e))return z&&N.log(jc),s;const o={event_id:s,...n};return this._process((()=>this.eventFromException(e,o).then((i=>this._captureEvent(i,o,r))).then((i=>i))),"error"),o.event_id}captureMessage(e,n,r,s){const o={event_id:Yt(),...r},i=sa(e)?e:String(e),c=sr(e),a=c?this.eventFromMessage(i,n,o):this.eventFromException(e,o);return this._process((()=>a.then((u=>this._captureEvent(u,o,s)))),c?"unknown":"error"),o.event_id}captureEvent(e,n,r){const s=Yt();if(n?.originalException&&uc(n.originalException))return z&&N.log(jc),s;const o={event_id:s,...n},i=e.sdkProcessingMetadata||{},c=i.capturedSpanScope,a=i.capturedSpanIsolationScope,u=Hc(e.type);return this._process((()=>this._captureEvent(e,o,c||r,a)),u),o.event_id}captureSession(e){this.sendSession(e),or(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(e),s=await n.flush(e);return r&&s}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Fc(this,e,this._integrations),n||Nc(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=(function(s,o,i,c){const a=wi(i),u=s.type&&s.type!=="replay_event"?s.type:"event";(function(d,p){if(!p)return d;const h=d.sdk||{};d.sdk={...h,name:h.name||p.name,version:h.version||p.version,integrations:[...d.sdk?.integrations||[],...p.integrations||[]],packages:[...d.sdk?.packages||[],...p.packages||[]],settings:d.sdk?.settings||p.settings?{...d.sdk?.settings,...p.settings}:void 0}})(s,i?.sdk);const l=sd(s,a,c,o);return delete s.sdkProcessingMetadata,Ve(l,[[{type:u},s]])})(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Ah(r,Dh(s));this.sendEnvelope(r).then((s=>this.emit("afterSendEvent",e,s)))}sendSession(e){const{release:n,environment:r=pa}=this._options;if("aggregates"in e){const o=e.attrs||{};if(!o.release&&!n)return void(z&&N.warn(Uc));o.release=o.release||n,o.environment=o.environment||r,e.attrs=o}else{if(!e.release&&!n)return void(z&&N.warn(Uc));e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=(function(o,i,c,a){const u=wi(c);return Ve({sent_at:new Date().toISOString(),...u&&{sdk:u},...!!a&&i&&{dsn:ur(i)}},["aggregates"in o?[{type:"sessions"},o]:[{type:"session"},o.toJSON()]])})(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s=`${e}:${n}`;z&&N.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||new Set,s=(...o)=>n(...o);return r.add(s),()=>{r.delete(s)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach((s=>s(...n)))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return z&&N.error("Error while sending envelope:",n),{}}return z&&N.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=(function(n,r){const s={};return r.forEach((o=>{o&&Fc(n,o,s)})),s})(this,e),Nc(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",s=!1;const o=n.exception?.values;if(o){s=!0,r=!1;for(const c of o)if(c.mechanism?.handled===!1){r=!0;break}}const i=e.status==="ok";(i&&e.errors===0||i&&r)&&(or(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise((r=>setTimeout(r,1))),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",e,n),e.type||s.setLastEventId(e.event_id||n.event_id),ld(o,e,n,r,this,s).then((c=>{if(c===null)return c;this.emit("postprocessEvent",c,n),c.contexts={trace:mh(r),...c.contexts};const a=nd(this,r);return c.sdkProcessingMetadata={dynamicSamplingContext:a,...c.sdkProcessingMetadata},c}))}_captureEvent(e,n={},r=dt(),s=oe()){return z&&Bo(e)&&N.log(`Captured error event \`${vd(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,s).then((o=>o.event_id),(o=>{z&&(zc(o)?N.log(o.message):Bc(o)?N.warn(o.message):N.warn(o))}))}_processEvent(e,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,c=Gc(e),a=Bo(e),u=`before send for type \`${e.type||"error"}\``,l=i===void 0?void 0:Cn(i);if(a&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),ma(Uo(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const d=Hc(e.type);return this._prepareEvent(e,n,r,s).then((p=>{if(p===null)throw this.recordDroppedEvent("event_processor",d),Uo("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const h=(function(f,m,g,y){const{beforeSend:S,beforeSendTransaction:v,beforeSendSpan:w,ignoreSpans:T}=m;let x=g;if(Bo(x)&&S)return S(x,y);if(Gc(x)){if(w||T){const b=(function(E){const{trace_id:R,parent_span_id:I,span_id:C,status:M,origin:D,data:P,op:$}=E.contexts?.trace??{};return{data:P??{},description:E.transaction,op:$,parent_span_id:I,span_id:C??"",start_timestamp:E.start_timestamp??0,status:M,timestamp:E.timestamp,trace_id:R??"",origin:D,profile_id:P?.[yi],exclusive_time:P?.[cr],measurements:E.measurements,is_segment:!0}})(x);if(T?.length&&to(b,T))return null;if(w){const E=w(b);E?x=as(g,{type:"transaction",timestamp:(_=E).timestamp,start_timestamp:_.start_timestamp,transaction:_.description,contexts:{trace:{trace_id:_.trace_id,span_id:_.span_id,parent_span_id:_.parent_span_id,op:_.op,status:_.status,origin:_.origin,data:{..._.data,..._.profile_id&&{[yi]:_.profile_id},..._.exclusive_time&&{[cr]:_.exclusive_time}}}},measurements:_.measurements}):_i()}if(x.spans){const E=[],R=x.spans;for(const C of R)if(T?.length&&to(C,T))Mh(R,C);else if(w){const M=w(C);M?E.push(M):(_i(),E.push(C))}else E.push(C);const I=x.spans.length-E.length;I&&f.recordDroppedEvent("before_send","span",I),x.spans=E}}if(v){if(x.spans){const b=x.spans.length;x.sdkProcessingMetadata={...g.sdkProcessingMetadata,spanCountBeforeProcessing:b}}return v(x,y)}}var _;return x})(this,o,p,n);return(function(f,m){const g=`${m} must return \`null\` or a valid event.`;if(_r(f))return f.then((y=>{if(!Kr(y)&&y!==null)throw Ss(g);return y}),(y=>{throw Ss(`${m} rejected with ${y}`)}));if(!Kr(f)&&f!==null)throw Ss(g);return f})(h,u)})).then((p=>{if(p===null){if(this.recordDroppedEvent("before_send",d),c){const m=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",m)}throw Uo(`${u} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(a&&h&&this._updateSessionFromEvent(h,p),c){const m=(p.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(p.spans?p.spans.length:0);m>0&&this.recordDroppedEvent("before_send","span",m)}const f=p.transaction_info;if(c&&f&&p.transaction!==e.transaction){const m="custom";p.transaction_info={...f,source:m}}return this.sendEvent(p,n),p})).then(null,(p=>{throw zc(p)||Bc(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Ss(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))}))}_process(e,n){this._numProcessing++,this._promiseBuffer.add(e).then((r=>(this._numProcessing--,r)),(r=>(this._numProcessing--,r===ya&&this.recordDroppedEvent("queue_overflow",n),r)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}}))}_flushOutcomes(){z&&N.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(z&&N.log("No outcomes to send"));if(!this._dsn)return void(z&&N.log("No dsn provided, will not send outcomes"));z&&N.log("Sending outcomes:",e);const n=(r=e,Ve((s=this._options.tunnel&&ur(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:Tn(),discarded_events:r}]]));var r,s;this.sendEnvelope(n)}}function Hc(t){return t==="replay_event"?"replay":t||"error"}function Bo(t){return t.type===void 0}function Gc(t){return t.type==="transaction"}function Yh(t){let e=0;return t.name&&(e+=2*t.name.length),e+=8,e+Sd(t.attributes)}function Xh(t){let e=0;return t.message&&(e+=2*t.message.length),e+Sd(t.attributes)}function Sd(t){if(!t)return 0;let e=0;return Object.values(t).forEach((n=>{Array.isArray(n)?e+=n.length*Vc(n[0]):sr(n)?e+=Vc(n):e+=100})),e}function Vc(t){return typeof t=="string"?2*t.length:typeof t=="number"?8:typeof t=="boolean"?4:0}function Qh(t,e){e.debug===!0&&(z?N.enable():On((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),dt().update(e.initialScope);const n=new t(e);return(function(r){dt().setClient(r)})(n),n.init(),n}const Zh="thismessage:/";function va(t){return"isRelative"in t}function _a(t,e){const n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=n?Zh:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const s=new URL(t,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function tm(t){if(va(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function tr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function em(t,e){const n=e?.getDsn(),r=e?.getOptions().tunnel;return(function(s,o){const i=_a(s);return!i||va(i)?!1:!!o&&i.host.includes(o.host)&&/(^|&|\?)sentry_key=/.test(i.search)})(t,n)||(function(s,o){return o?Kc(s)===Kc(o):!1})(t,r)}function Kc(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function nm(t){"aggregates"in t?t.attrs?.ip_address===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function wd(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map((o=>({name:`${r}:@sentry/${o}`,version:gn}))),version:gn}),t._metadata=s}function kd(t={}){const e=t.client||rt();if(!(function(){const a=rt();return a?.getOptions().enabled!==!1&&!!a?.getTransport()})()||!e)return{};const n=Sr(An());if(n.getTraceData)return n.getTraceData(t);const r=t.scope||dt(),s=t.span||jt(),o=s?(function(a){const{traceId:u,spanId:l}=a.spanContext();return mc(u,l,Ge(a))})(s):(function(a){const{traceId:u,sampled:l,propagationSpanId:d}=a.getPropagationContext();return mc(u,d,l)})(r),i=wh(s?Fe(s):nd(e,r));if(!Xl.test(o))return N.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const c={"sentry-trace":o,baggage:i};return t.propagateTraceparent&&(c.traceparent=s?(function(a){const{traceId:u,spanId:l}=a.spanContext();return gc(u,l,Ge(a))})(s):(function(a){const{traceId:u,sampled:l,propagationSpanId:d}=a.getPropagationContext();return gc(u,d,l)})(r)),c}const rm=100;function Ee(t,e){const n=rt(),r=oe();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=rm}=n.getOptions();if(o<=0)return;const i={timestamp:Tn(),...t},c=s?On((()=>s(i,e))):i;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,o))}let Jc;const Yc=new WeakMap,sm=()=>({name:"FunctionToString",setupOnce(){Jc=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=aa(this),n=Yc.has(rt())&&e!==void 0?e:this;return Jc.apply(n,t)}}catch{}},setup(t){Yc.set(t,!0)}}),om=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],im=(t={})=>{let e;return{name:"EventFilters",setup(n){const r=n.getOptions();e=Xc(t,r)},processEvent(n,r,s){if(!e){const o=s.getOptions();e=Xc(t,o)}return(function(o,i){if(o.type){if(o.type==="transaction"&&(function(c,a){if(!a?.length)return!1;const u=c.transaction;return!!u&&Ce(u,a)})(o,i.ignoreTransactions))return z&&N.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${an(o)}`),!0}else{if((function(c,a){return a?.length?vd(c).some((u=>Ce(u,a))):!1})(o,i.ignoreErrors))return z&&N.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${an(o)}`),!0;if((function(c){return c.exception?.values?.length?!c.message&&!c.exception.values.some((a=>a.stacktrace||a.type&&a.type!=="Error"||a.value)):!1})(o))return z&&N.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${an(o)}`),!0;if((function(c,a){if(!a?.length)return!1;const u=ws(c);return!!u&&Ce(u,a)})(o,i.denyUrls))return z&&N.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${an(o)}.
Url: ${ws(o)}`),!0;if(!(function(c,a){if(!a?.length)return!0;const u=ws(c);return!u||Ce(u,a)})(o,i.allowUrls))return z&&N.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${an(o)}.
Url: ${ws(o)}`),!0}return!1})(n,e)?null:n}}},am=(t={})=>({...im(t),name:"InboundFilters"});function Xc(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:om],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function ws(t){try{const e=[...t.exception?.values??[]].reverse().find((r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)),n=e?.stacktrace?.frames;return n?(function(r=[]){for(let s=r.length-1;s>=0;s--){const o=r[s];if(o&&o.filename!=="<anonymous>"&&o.filename!=="[native code]")return o.filename||null}return null})(n):null}catch{return z&&N.error(`Cannot extract url for event ${an(t)}`),null}}function cm(t,e,n,r,s,o){if(!s.exception?.values||!o||!De(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=xi(t,e,r,o.originalException,n,s.exception.values,i,0))}function xi(t,e,n,r,s,o,i,c){if(o.length>=n+1)return o;let a=[...o];if(De(r[s],Error)){Qc(i,c);const u=t(e,r[s]),l=a.length;Zc(u,s,l,c),a=xi(t,e,n,r[s],s,[u,...a],u,l)}return Array.isArray(r.errors)&&r.errors.forEach(((u,l)=>{if(De(u,Error)){Qc(i,c);const d=t(e,u),p=a.length;Zc(d,`errors[${l}]`,p,c),a=xi(t,e,n,u,s,[d,...a],d,p)}})),a}function Qc(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Zc(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Ed(t){const e="console";nn(e,t),rn(e,um)}function um(){"console"in et&&Ol.forEach((function(t){t in et.console&&Bt(et.console,t,(function(e){return Ys[t]=e,function(...n){se("console",{args:n,level:t}),Ys[t]?.apply(et.console,n)}}))}))}function no(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const lm=(t={})=>{const e=t.levels||Ol,n=t.handled??!0;return{name:"CaptureConsole",setup(r){"console"in et&&Ed((({args:s,level:o})=>{rt()===r&&e.includes(o)&&(function(i,c,a){const u=no(c),l=new Error,d={level:no(c),extra:{arguments:i}};cs((p=>{if(p.addEventProcessor((m=>(m.logger="console",xn(m,{handled:a,type:"auto.core.capture_console"}),m))),c==="assert"){if(!i[0]){const m=`Assertion failed: ${Xs(i.slice(1)," ")||"console.assert"}`;p.setExtra("arguments",i.slice(1)),p.captureMessage(m,u,{captureContext:d,syntheticException:l})}return}const h=i.find((m=>m instanceof Error));if(h)return void ga(h,d);const f=Xs(i," ");p.captureMessage(f,u,{captureContext:d,syntheticException:l})}))})(s,o,n)}))}}},dm=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if((function(n,r){return r?!!((function(s,o){const i=s.message,c=o.message;return!(!i&&!c||i&&!c||!i&&c||i!==c||!eu(s,o)||!tu(s,o))})(n,r)||(function(s,o){const i=nu(o),c=nu(s);return!(!i||!c||i.type!==c.type||i.value!==c.value||!eu(s,o)||!tu(s,o))})(n,r)):!1})(e,t))return z&&N.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function tu(t,e){let n=sc(t),r=sc(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function eu(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function nu(t){return t.exception?.values?.[0]}const pm=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function ru(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){const s=r>=0?t[r]:"/";s&&(e=`${s}/${e}`,n=s.charAt(0)==="/")}return e=(function(r,s){let o=0;for(let i=r.length-1;i>=0;i--){const c=r[i];c==="."?r.splice(i,1):c===".."?(r.splice(i,1),o++):o&&(r.splice(i,1),o--)}if(s)for(;o--;o)r.unshift("..");return r})(e.split("/").filter((r=>!!r)),!n).join("/"),(n?"/":"")+e||"."}function su(t){let e=0;for(;e<t.length&&t[e]==="";e++);let n=t.length-1;for(;n>=0&&t[n]==="";n--);return e>n?[]:t.slice(e,n-e+1)}function fm(t,e){return(function(n){const r=n.length>1024?`<truncated>${n.slice(-1024)}`:n,s=pm.exec(r);return s?s.slice(1):[]})(t)[2]||""}const hm=(t={})=>{const e=t.root,n=t.prefix||"app:///",r="window"in et&&!!et.window,s=t.iteratee||(function({isBrowser:o,root:i,prefix:c}){return a=>{if(!a.filename)return a;const u=/^[a-zA-Z]:\\/.test(a.filename)||a.filename.includes("\\")&&!a.filename.includes("/"),l=/^\//.test(a.filename);if(o){if(i){const d=a.filename;d.indexOf(i)===0&&(a.filename=d.replace(i,c))}}else if(u||l){const d=u?a.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):a.filename,p=i?(function(h,f){h=ru(h).slice(1),f=ru(f).slice(1);const m=su(h.split("/")),g=su(f.split("/")),y=Math.min(m.length,g.length);let S=y;for(let w=0;w<y;w++)if(m[w]!==g[w]){S=w;break}let v=[];for(let w=S;w<m.length;w++)v.push("..");return v=v.concat(g.slice(S)),v.join("/")})(i,d):fm(d);a.filename=`${c}${p}`}return a}})({isBrowser:r,root:e,prefix:n});return{name:"RewriteFrames",processEvent(o){let i=o;return o.exception&&Array.isArray(o.exception.values)&&(i=(function(c){try{return{...c,exception:{...c.exception,values:c.exception.values.map((a=>{return{...a,...a.stacktrace&&{stacktrace:(u=a.stacktrace,{...u,frames:u?.frames?.map((l=>s(l)))})}};var u}))}}}catch{return c}})(i)),i}}};function mm(t,e,n,r,s){if(!t.fetchData)return;const{method:o,url:i}=t.fetchData,c=pe()&&e(i);if(t.endTimestamp&&c){const h=t.fetchData.__span;if(!h)return;const f=r[h];return void(f&&((function(m,g){if(g.response){Vl(m,g.response.status);const y=g.response?.headers?.get("content-length");if(y){const S=parseInt(y);S>0&&m.setAttribute("http.response_content_length",S)}}else g.error&&m.setStatus({code:Et,message:"internal_error"});m.end()})(f,t),(function(m,g,y){(typeof y=="object"&&y!==null?y.onRequestSpanEnd:void 0)?.(m,{headers:g.response?.headers,error:g.error})})(f,t,s),delete r[h]))}const{spanOrigin:a="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},l=!!jt(),d=c&&l?Ze((function(h,f,m){const g=_a(h);return{name:g?`${f} ${tm(g)}`:f,attributes:gm(h,g,f,m)}})(i,o,a)):new Qe;if(t.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(t.fetchData.url)){const h=t.args[0],f=t.args[1]||{},m=(function(g,y,S,v){const w=kd({span:S,propagateTraceparent:v}),T=w["sentry-trace"],x=w.baggage,_=w.traceparent;if(!T)return;const b=y.headers||(oa(g)?g.headers:void 0);if(b){if((function(E){return typeof Headers<"u"&&De(E,Headers)})(b)){const E=new Headers(b);if(E.get("sentry-trace")||E.set("sentry-trace",T),v&&_&&!E.get("traceparent")&&E.set("traceparent",_),x){const R=E.get("baggage");R?ks(R)||E.set("baggage",`${R},${x}`):E.set("baggage",x)}return E}if(Array.isArray(b)){const E=[...b];b.find((I=>I[0]==="sentry-trace"))||E.push(["sentry-trace",T]),v&&_&&!b.find((I=>I[0]==="traceparent"))&&E.push(["traceparent",_]);const R=b.find((I=>I[0]==="baggage"&&ks(I[1])));return x&&!R&&E.push(["baggage",x]),E}{const E="sentry-trace"in b?b["sentry-trace"]:void 0,R="traceparent"in b?b.traceparent:void 0,I="baggage"in b?b.baggage:void 0,C=I?Array.isArray(I)?[...I]:[I]:[],M=I&&(Array.isArray(I)?I.find((P=>ks(P))):ks(I));x&&!M&&C.push(x);const D={...b,"sentry-trace":E??T,baggage:C.length>0?C.join(","):void 0};return v&&_&&!R&&(D.traceparent=_),D}}return{...w}})(h,f,pe()&&l?d:void 0,u);m&&(t.args[1]=f,f.headers=m)}const p=rt();if(p){const h={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};p.emit("beforeOutgoingRequestSpan",d,h)}return d}function ks(t){return t.split(",").some((e=>e.trim().startsWith(la)))}function gm(t,e,n,r){const s={url:t,type:"fetch","http.method":n,[xt]:r,[Ne]:"http.client"};return e&&(va(e)||(s["http.url"]=e.href,s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function ou(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const jr=et;function Ti(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ym(){if(typeof EdgeRuntime=="string")return!0;if(!(function(){if(!("fetch"in jr))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}})())return!1;if(Ti(jr.fetch))return!0;let t=!1;const e=jr.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=Ti(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){z&&N.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function xd(t,e){const n="fetch";nn(n,t),rn(n,(()=>Td(void 0,e)))}function Td(t,e=!1){e&&!ym()||Bt(et,"fetch",(function(n){return function(...r){const s=new Error,{method:o,url:i}=(function(a){if(a.length===0)return{method:"GET",url:""};if(a.length===2){const[l,d]=a;return{url:iu(l),method:js(d,"method")?String(d.method).toUpperCase():oa(l)&&js(l,"method")?String(l.method).toUpperCase():"GET"}}const u=a[0];return{url:iu(u),method:js(u,"method")?String(u.method).toUpperCase():"GET"}})(r),c={args:r,fetchData:{method:o,url:i},startTimestamp:1e3*Ct(),virtualError:s,headers:_m(r)};return t||se("fetch",{...c}),n.apply(et,r).then((async a=>(t?t(a):se("fetch",{...c,endTimestamp:1e3*Ct(),response:a}),a)),(a=>{if(se("fetch",{...c,endTimestamp:1e3*Ct(),error:a}),ra(a)&&a.stack===void 0&&(a.stack=s.stack,Qt(a,"framesToPop",1)),a instanceof TypeError&&(a.message==="Failed to fetch"||a.message==="Load failed"||a.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(c.fetchData.url);a.message=`${a.message} (${u.host})`}catch{}throw a}))}}))}function vm(t){let e;try{e=t.clone()}catch{return}(async function(n,r){if(n?.body){const s=n.body,o=s.getReader(),i=setTimeout((()=>{s.cancel().then(null,(()=>{}))}),9e4);let c=!0;for(;c;){let a;try{a=setTimeout((()=>{s.cancel().then(null,(()=>{}))}),5e3);const{done:u}=await o.read();clearTimeout(a),u&&(r(),c=!1)}catch{c=!1}finally{clearTimeout(a)}}clearTimeout(i),o.releaseLock(),s.cancel().then(null,(()=>{}))}})(e,(()=>{se("fetch-body-resolved",{endTimestamp:1e3*Ct(),response:t})}))}function js(t,e){return!!t&&typeof t=="object"&&!!t[e]}function iu(t){return typeof t=="string"?t:t?js(t,"url")?t.url:t.toString?t.toString():"":""}function _m(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(oa(e))return new Headers(e.headers)}catch{}}function bm(){return!(typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Ci(){return typeof window<"u"&&(!bm()||(function(){return et.process?.type==="renderer"})())}const at=et;let Ii=0;function au(){return Ii>0}function lr(t,e={}){if(!(function(r){return typeof r=="function"})(t))return t;try{const r=t.__sentry_wrapped__;if(r)return typeof r=="function"?r:t;if(aa(t))return t}catch{return t}const n=function(...r){try{const s=r.map((o=>lr(o,e)));return t.apply(this,s)}catch(s){throw Ii++,setTimeout((()=>{Ii--})),cs((o=>{o.addEventProcessor((i=>(e.mechanism&&(mi(i,void 0),xn(i,e.mechanism)),i.extra={...i.extra,arguments:r},i))),ga(s)})),s}};try{for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}catch{}Bl(n,t),Qt(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}function Ri(){const t=br(),{referrer:e}=at.document||{},{userAgent:n}=at.navigator||{};return{url:t,headers:{...e&&{Referer:e},...n&&{"User-Agent":n}}}}function ba(t,e){const n=Sa(t,e),r={type:km(e),value:Em(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Sm(t,e,n,r){const s=rt(),o=s?.getOptions().normalizeDepth,i=(function(u){for(const l in u)if(Object.prototype.hasOwnProperty.call(u,l)){const d=u[l];if(d instanceof Error)return d}})(e),c={__serialized__:rd(e,o)};if(i)return{exception:{values:[ba(t,i)]},extra:c};const a={exception:{values:[{type:wo(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:xm(e,{isUnhandledRejection:r})}]},extra:c};if(n){const u=Sa(t,n);u.length&&(a.exception.values[0].stacktrace={frames:u})}return a}function zo(t,e){return{exception:{values:[ba(t,e)]}}}function Sa(t,e){const n=e.stacktrace||e.stack||"",r=(function(o){return o&&wm.test(o.message)?1:0})(e),s=(function(o){return typeof o.framesToPop=="number"?o.framesToPop:0})(e);try{return t(n,r,s)}catch{}return[]}const wm=/Minified React error #\d+;/i;function Cd(t){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&t instanceof WebAssembly.Exception}function km(t){const e=t?.name;return!e&&Cd(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Em(t){const e=t?.message;return Cd(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Mi(t,e,n,r,s){let o;if($l(e)&&e.error)return zo(t,e.error);if(ic(e)||vr(e,"DOMException")){const i=e;if("stack"in e)o=zo(t,e);else{const c=i.name||(ic(i)?"DOMError":"DOMException"),a=i.message?`${c}: ${i.message}`:c;o=Ai(t,a,n,r),mi(o,a)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return ra(e)?zo(t,e):Kr(e)||wo(e)?(o=Sm(t,e,n,s),xn(o,{synthetic:!0}),o):(o=Ai(t,e,n,r),mi(o,`${e}`),xn(o,{synthetic:!0}),o)}function Ai(t,e,n,r){const s={};if(r&&n){const o=Sa(t,n);o.length&&(s.exception={values:[{value:e,stacktrace:{frames:o}}]}),xn(s,{synthetic:!0})}if(sa(e)){const{__sentry_template_string__:o,__sentry_template_values__:i}=e;return s.logentry={message:o,params:i},s}return s.message=e,s}function xm(t,{isUnhandledRejection:e}){const n=(function(s){const o=Object.keys(zl(s));return o.sort(),o[0]?o.join(", "):"[object has no keys]"})(t),r=e?"promise rejection":"exception";return $l(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:wo(t)?`Event \`${(function(s){try{const o=Object.getPrototypeOf(s);return o?o.constructor.name:void 0}catch{}})(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class Tm extends Jh{constructor(e){const n=(r=e,{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:at.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...r});var r;wd(n,"browser",["browser"],at.SENTRY_SDK_SOURCE||"npm"),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i,_experiments:c,enableMetrics:a}=this._options,u=a??c?.enableMetrics??!0;at.document&&(o||i||u)&&at.document.addEventListener("visibilitychange",(()=>{at.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&fd(this),u&&hd(this))})),s&&this.on("beforeSendSession",nm)}eventFromException(e,n){return(function(r,s,o,i){const c=Mi(r,s,o?.syntheticException||void 0,i);return xn(c),c.level="error",o?.event_id&&(c.event_id=o.event_id),eo(c)})(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return(function(s,o,i="info",c,a){const u=Ai(s,o,c?.syntheticException||void 0,a);return u.level=i,c?.event_id&&(u.event_id=c.event_id),eo(u)})(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,s)}}const In=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Y=et,Yr=(t,e,n,r)=>{let s,o;return i=>{e.value>=0&&(i||r)&&(o=e.value-(s??0),(o||s===void 0)&&(s=e.value,e.delta=o,e.rating=((c,a)=>c>a[1]?"poor":c>a[0]?"needs-improvement":"good")(e.value,n),t(e)))}},Xr=(t=!0)=>{const e=Y.performance?.getEntriesByType?.("navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},wr=()=>Xr()?.activationStart??0;function bn(t,e,n){Y.document&&Y.addEventListener(t,e,n)}function wa(t,e,n){Y.document&&Y.removeEventListener(t,e,n)}let er=-1;const Id=new Set,Us=t=>{if((function(e){return e.type==="pagehide"||Y.document?.visibilityState==="hidden"})(t)&&er>-1){if(t.type==="visibilitychange"||t.type==="pagehide")for(const e of Id)e();isFinite(er)||(er=t.type==="visibilitychange"?t.timeStamp:0,wa("prerenderingchange",Us,!0))}},Qr=()=>{if(Y.document&&er<0){const t=wr();er=(Y.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>t))[0]?.startTime)??(Y.document?.visibilityState!=="hidden"||Y.document?.prerendering?1/0:0),bn("visibilitychange",Us,!0),bn("pagehide",Us,!0),bn("prerenderingchange",Us,!0)}return{get firstHiddenTime(){return er},onHidden(t){Id.add(t)}}},Zr=(t,e=-1)=>{const n=Xr();let r="navigate";return n&&(Y.document?.prerendering||wr()>0?r="prerender":Y.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Wo=new WeakMap;function ka(t,e){return Wo.get(t)||Wo.set(t,new e),Wo.get(t)}class ro{constructor(){ro.prototype.__init.call(this),ro.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}const dr=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((s=>{Promise.resolve().then((()=>{e(s.getEntries())}))}));return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Ea=t=>{let e=!1;return()=>{e||(t(),e=!0)}},ko=t=>{Y.document?.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},Cm=[1800,3e3],Im=[.1,.25],Rm=(t,e={})=>{((n,r={})=>{ko((()=>{const s=Qr(),o=Zr("FCP");let i;const c=dr("paint",(a=>{for(const u of a)u.name==="first-contentful-paint"&&(c.disconnect(),u.startTime<s.firstHiddenTime&&(o.value=Math.max(u.startTime-wr(),0),o.entries.push(u),i(!0)))}));c&&(i=Yr(n,o,Cm,r.reportAllChanges))}))})(Ea((()=>{const n=Zr("CLS",0);let r;const s=Qr(),o=ka(e,ro),i=a=>{for(const u of a)o._processEntry(u);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},c=dr("layout-shift",i);c&&(r=Yr(t,n,Im,e.reportAllChanges),s.onHidden((()=>{i(c.takeRecords()),r(!0)})),Y?.setTimeout?.(r))})))};let Rd=0,Ho=1/0,Es=0;const Mm=t=>{t.forEach((e=>{e.interactionId&&(Ho=Math.min(Ho,e.interactionId),Es=Math.max(Es,e.interactionId),Rd=Es?(Es-Ho)/7+1:0)}))};let Oi;const cu=()=>Oi?Rd:performance.interactionCount||0,Am=()=>{"interactionCount"in performance||Oi||(Oi=dr("event",Mm,{type:"event",buffered:!0,durationThreshold:0}))};let uu=0;class so{constructor(){so.prototype.__init.call(this),so.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){uu=cu(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor((cu()-uu)/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!e.interactionId&&e.entryType!=="first-input")return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<10||e.duration>n._latency){if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort(((s,o)=>o._latency-s._latency)),this._longestInteractionList.length>10){const s=this._longestInteractionList.splice(10);for(const o of s)this._longestInteractionMap.delete(o.id)}this._onAfterProcessingINPCandidate?.(r)}}}const Md=t=>{const e=n=>{n.type!=="pagehide"&&Y.document?.visibilityState!=="hidden"||t(n)};bn("visibilitychange",e,!0),bn("pagehide",e,!0)},Ad=t=>{const e=Y.requestIdleCallback||Y.setTimeout;Y.document?.visibilityState==="hidden"?t():(bn("visibilitychange",t=Ea(t),{once:!0,capture:!0}),e((()=>{t(),wa("visibilitychange",t,{capture:!0})})),Md(t))},Om=[200,500],Pm=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Qr();ko((()=>{Am();const r=Zr("INP");let s;const o=ka(e,so),i=a=>{Ad((()=>{for(const l of a)o._processEntry(l);const u=o._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,s())}))},c=dr("event",i,{durationThreshold:e.durationThreshold??40});s=Yr(t,r,Om,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{i(c.takeRecords()),s(!0)})))}))};class Dm{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const Lm=[2500,4e3],Nm=(t,e={})=>{ko((()=>{const n=Qr(),r=Zr("LCP");let s;const o=ka(e,Dm),i=a=>{e.reportAllChanges||(a=a.slice(-1));for(const u of a)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-wr(),0),r.entries=[u],s())},c=dr("largest-contentful-paint",i);if(c){s=Yr(t,r,Lm,e.reportAllChanges);const a=Ea((()=>{i(c.takeRecords()),c.disconnect(),s(!0)})),u=l=>{l.isTrusted&&(Ad(a),wa(l.type,u,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])bn(l,u,{capture:!0})}}))},Fm=[800,1800],Pi=t=>{Y.document?.prerendering?ko((()=>Pi(t))):Y.document?.readyState!=="complete"?addEventListener("load",(()=>Pi(t)),!0):setTimeout(t)},qm=(t,e={})=>{const n=Zr("TTFB"),r=Yr(t,n,Fm,e.reportAllChanges);Pi((()=>{const s=Xr();s&&(n.value=Math.max(s.responseStart-wr(),0),n.entries=[s],r(!0))}))},Ur={},oo={};let Od,Pd,Dd,Ld;function xa(t,e=!1){return Eo("cls",t,$m,Od,e)}function Ta(t,e=!1){return Eo("lcp",t,jm,Pd,e)}function Nd(t){return Eo("inp",t,Bm,Ld)}function Sn(t,e){return Fd(t,e),oo[t]||((function(n){const r={};n==="event"&&(r.durationThreshold=0),dr(n,(s=>{ps(n,{entries:s})}),r)})(t),oo[t]=!0),qd(t,e)}function ps(t,e){const n=Ur[t];if(n?.length)for(const r of n)try{r(e)}catch(s){In&&N.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Pe(r)}
Error:`,s)}}function $m(){return Rm((t=>{ps("cls",{metric:t}),Od=t}),{reportAllChanges:!0})}function jm(){return Nm((t=>{ps("lcp",{metric:t}),Pd=t}),{reportAllChanges:!0})}function Um(){return qm((t=>{ps("ttfb",{metric:t}),Dd=t}))}function Bm(){return Pm((t=>{ps("inp",{metric:t}),Ld=t}))}function Eo(t,e,n,r,s=!1){let o;return Fd(t,e),oo[t]||(o=n(),oo[t]=!0),r&&e({metric:r}),qd(t,e,s?o:void 0)}function Fd(t,e){Ur[t]=Ur[t]||[],Ur[t].push(e)}function qd(t,e,n){return()=>{n&&n();const r=Ur[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function Go(t){return typeof t=="number"&&isFinite(t)}function He(t,e,n,{...r}){const s=ct(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),fa(t,(()=>{const o=Ze({startTime:e,...r});return o&&o.end(n),o}))}function Ca(t){const e=rt();if(!e)return;const{name:n,transaction:r,attributes:s,startTime:o}=t,{release:i,environment:c,sendDefaultPii:a}=e.getOptions(),u=e.getIntegrationByName("Replay"),l=u?.getReplayId(),d=dt(),p=d.getUser(),h=p!==void 0?p.email||p.id||p.ip_address:void 0;let f;try{f=d.getScopeData().contexts.profile.profile_id}catch{}return Ze({name:n,attributes:{release:i,environment:c,user:h||void 0,profile_id:f||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":Y.navigator?.userAgent,"client.address":a?"{{auto}}":void 0,...s},startTime:o,experimental:{standalone:!0}})}function fs(){return Y.addEventListener&&Y.performance}function _t(t){return t/1e3}function $d(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function jd(t,e){let n,r=!1;function s(c){!r&&n&&e(c,n),r=!0}Md((()=>{s("pagehide")}));const o=t.on("beforeStartNavigationSpan",((c,a)=>{a?.isRedirect||(s("navigation"),o(),i())})),i=t.on("afterStartPageLoadSpan",(c=>{n=c.spanContext().spanId,i()}))}function zm(t){let e,n=0;if(!$d("layout-shift"))return;const r=xa((({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(n=s.value,e=o)}),!0);jd(t,((s,o)=>{(function(i,c,a,u){In&&N.log(`Sending CLS span (${i})`);const l=c?_t((zt()||0)+c.startTime):Ct(),d=dt().getScopeData().transactionName,p=c?Ht(c.sources[0]?.node):"Layout shift",h={[xt]:"auto.http.browser.cls",[Ne]:"ui.webvital.cls",[cr]:0,"sentry.pageload.span_id":a,"sentry.report_event":u};c?.sources&&c.sources.forEach(((m,g)=>{h[`cls.source.${g+1}`]=Ht(m.node)}));const f=Ca({name:p,transaction:d,attributes:h,startTime:l});f&&(f.addEvent("cls",{[us]:"",[ls]:i}),f.end(l))})(n,e,o,s),r()}))}function Wm(t){let e,n=0;if(!$d("largest-contentful-paint"))return;const r=Ta((({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(n=s.value,e=o)}),!0);jd(t,((s,o)=>{(function(i,c,a,u){In&&N.log(`Sending LCP span (${i})`);const l=_t((zt()||0)+(c?.startTime||0)),d=dt().getScopeData().transactionName,p=c?Ht(c.element):"Largest contentful paint",h={[xt]:"auto.http.browser.lcp",[Ne]:"ui.webvital.lcp",[cr]:0,"sentry.pageload.span_id":a,"sentry.report_event":u};c&&(c.element&&(h["lcp.element"]=Ht(c.element)),c.id&&(h["lcp.id"]=c.id),c.url&&(h["lcp.url"]=c.url),c.loadTime!=null&&(h["lcp.loadTime"]=c.loadTime),c.renderTime!=null&&(h["lcp.renderTime"]=c.renderTime),c.size!=null&&(h["lcp.size"]=c.size));const f=Ca({name:p,transaction:d,attributes:h,startTime:l});f&&(f.addEvent("lcp",{[us]:"millisecond",[ls]:i}),f.end(l))})(n,e,o,s),r()}))}function Zt(t){return t&&((zt()||performance.timeOrigin)+t)/1e3}function Ud(t){const e={};if(t.nextHopProtocol!=null){const{name:r,version:s}=(function(o){let i="unknown",c="unknown",a="";for(const u of o){if(u==="/"){[i,c]=o.split("/");break}if(!isNaN(Number(u))){i=a==="h"?"http":a,c=o.split(a)[1];break}a+=u}return a===o&&(i=a),{name:i,version:c}})(t.nextHopProtocol);e["network.protocol.version"]=s,e["network.protocol.name"]=r}return zt()||fs()?.timeOrigin?(n={...e,"http.request.redirect_start":Zt(t.redirectStart),"http.request.redirect_end":Zt(t.redirectEnd),"http.request.worker_start":Zt(t.workerStart),"http.request.fetch_start":Zt(t.fetchStart),"http.request.domain_lookup_start":Zt(t.domainLookupStart),"http.request.domain_lookup_end":Zt(t.domainLookupEnd),"http.request.connect_start":Zt(t.connectStart),"http.request.secure_connection_start":Zt(t.secureConnectionStart),"http.request.connection_end":Zt(t.connectEnd),"http.request.request_start":Zt(t.requestStart),"http.request.response_start":Zt(t.responseStart),"http.request.response_end":Zt(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0},Object.fromEntries(Object.entries(n).filter((([,r])=>r!=null)))):e;var n}const Hm=2147483647;let Ut,Bs,lu=0,ce={};function Gm({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=fs();if(r&&zt()){r.mark&&Y.performance.mark("sentry-tracing-init");const s=e?Wm(n):Ta((({metric:c})=>{const a=c.entries[c.entries.length-1];a&&(ce.lcp={value:c.value,unit:"millisecond"},Ut=a)}),!0),o=Eo("ttfb",(({metric:c})=>{c.entries[c.entries.length-1]&&(ce.ttfb={value:c.value,unit:"millisecond"})}),Um,Dd),i=t?zm(n):xa((({metric:c})=>{const a=c.entries[c.entries.length-1];a&&(ce.cls={value:c.value,unit:""},Bs=a)}),!0);return()=>{s?.(),o(),i?.()}}return()=>{}}function Vm(t,e){const n=fs(),r=zt();if(!n?.getEntries||!r)return;const s=_t(r),o=n.getEntries(),{op:i,start_timestamp:c}=ct(t);o.slice(lu).forEach((a=>{const u=_t(a.startTime),l=_t(Math.max(0,a.duration));if(!(i==="navigation"&&c&&s+u<c))switch(a.entryType){case"navigation":(function(d,p,h){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((f=>{xs(d,p,f,h)})),xs(d,p,"secureConnection",h,"TLS/SSL"),xs(d,p,"fetch",h,"cache"),xs(d,p,"domainLookup",h,"DNS"),(function(f,m,g){const y=g+_t(m.requestStart),S=g+_t(m.responseEnd),v=g+_t(m.responseStart);m.responseEnd&&(He(f,y,S,{op:"browser.request",name:m.name,attributes:{[xt]:"auto.ui.browser.metrics"}}),He(f,v,S,{op:"browser.response",name:m.name,attributes:{[xt]:"auto.ui.browser.metrics"}}))})(d,p,h)})(t,a,s);break;case"mark":case"paint":case"measure":{(function(h,f,m,g,y,S){if((function(E){if(E?.entryType==="measure")try{return E.detail.devtools.track==="Components "}catch{return}})(f)||["mark","measure"].includes(f.entryType)&&Ce(f.name,S))return;const v=Xr(!1),w=_t(v?v.requestStart:0),T=y+Math.max(m,w),x=y+m,_=x+g,b={[xt]:"auto.resource.browser.metrics"};T!==x&&(b["sentry.browser.measure_happened_before_request"]=!0,b["sentry.browser.measure_start_time"]=T),(function(E,R){try{const I=R.detail;if(!I)return;if(typeof I=="object"){for(const[C,M]of Object.entries(I))if(M&&sr(M))E[`sentry.browser.measure.detail.${C}`]=M;else if(M!==void 0)try{E[`sentry.browser.measure.detail.${C}`]=JSON.stringify(M)}catch{}return}if(sr(I))return void(E["sentry.browser.measure.detail"]=I);try{E["sentry.browser.measure.detail"]=JSON.stringify(I)}catch{}}catch{}})(b,f),T<=_&&He(h,T,_,{name:f.name,op:f.entryType,attributes:b})})(t,a,u,l,s,e.ignorePerformanceApiSpans);const d=Qr(),p=a.startTime<d.firstHiddenTime;a.name==="first-paint"&&p&&(ce.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&p&&(ce.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":(function(d,p,h,f,m,g,y){if(p.initiatorType==="xmlhttprequest"||p.initiatorType==="fetch")return;const S=p.initiatorType?`resource.${p.initiatorType}`:"resource.other";if(y?.includes(S))return;const v={[xt]:"auto.resource.browser.metrics"},w=tr(h);w.protocol&&(v["url.scheme"]=w.protocol.split(":").pop()),w.host&&(v["server.address"]=w.host),v["url.same_origin"]=h.includes(Y.location.origin),(function(b,E,R){R.forEach((([I,C])=>{const M=b[I];M!=null&&(typeof M=="number"&&M<Hm||typeof M=="string")&&(E[C]=M)}))})(p,v,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const T={...v,...Ud(p)},x=g+f,_=x+m;He(d,x,_,{name:h.replace(Y.location.origin,""),op:S,attributes:T})})(t,a,a.name,u,l,s,e.ignoreResourceSpans)}})),lu=Math.max(o.length-1,0),(function(a){const u=Y.navigator;if(!u)return;const l=u.connection;l&&(l.effectiveType&&a.setAttribute("effectiveConnectionType",l.effectiveType),l.type&&a.setAttribute("connectionType",l.type),Go(l.rtt)&&(ce["connection.rtt"]={value:l.rtt,unit:"millisecond"})),Go(u.deviceMemory)&&a.setAttribute("deviceMemory",`${u.deviceMemory} GB`),Go(u.hardwareConcurrency)&&a.setAttribute("hardwareConcurrency",String(u.hardwareConcurrency))})(t),i==="pageload"&&((function(a){const u=Xr(!1);if(!u)return;const{responseStart:l,requestStart:d}=u;d<=l&&(a["ttfb.requestTime"]={value:l-d,unit:"millisecond"})})(ce),e.recordClsOnPageloadSpan||delete ce.cls,e.recordLcpOnPageloadSpan||delete ce.lcp,Object.entries(ce).forEach((([a,u])=>{(function(l,d,p,h=jt()){const f=h&&Lt(h);f&&(z&&N.log(`[Measurement] Setting measurement on root span: ${l} = ${d} ${p}`),f.addEvent(l,{[ls]:d,[us]:p}))})(a,u.value,u.unit)})),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",wr()),(function(a,u){Ut&&u.recordLcpOnPageloadSpan&&(Ut.element&&a.setAttribute("lcp.element",Ht(Ut.element)),Ut.id&&a.setAttribute("lcp.id",Ut.id),Ut.url&&a.setAttribute("lcp.url",Ut.url.trim().slice(0,200)),Ut.loadTime!=null&&a.setAttribute("lcp.loadTime",Ut.loadTime),Ut.renderTime!=null&&a.setAttribute("lcp.renderTime",Ut.renderTime),a.setAttribute("lcp.size",Ut.size)),Bs?.sources&&u.recordClsOnPageloadSpan&&Bs.sources.forEach(((l,d)=>a.setAttribute(`cls.source.${d+1}`,Ht(l.node))))})(t,e)),Ut=void 0,Bs=void 0,ce={}}function xs(t,e,n,r,s=n){const o=(function(a){return a==="secureConnection"?"connectEnd":a==="fetch"?"domainLookupStart":`${a}End`})(n),i=e[o],c=e[`${n}Start`];c&&i&&He(t,r+_t(c),r+_t(i),{op:`browser.${s}`,name:e.name,attributes:{[xt]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}const Km=({entries:t})=>{const e=jt(),n=e?Lt(e):void 0,r=n?ct(n).description:dt().getScopeData().transactionName;t.forEach((s=>{const o=s;if(!o.identifier)return;const i=o.name,c=o.renderTime,a=o.loadTime,[u,l]=a?[_t(a),"load-time"]:c?[_t(c),"render-time"]:[Ct(),"entry-emission"],d=i==="image-paint"?_t(Math.max(0,(c??0)-(a??0))):0,p={[xt]:"auto.ui.browser.elementtiming",[Ne]:"ui.elementtiming",[de]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":r,"element.id":o.id,"element.type":o.element?.tagName?.toLowerCase()||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":c,"element.load_time":a,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};id({name:`element[${o.identifier}]`,attributes:p,startTime:u,onlyIfParent:!0},(h=>{h.end(u+d)}))}))},Jm=1e3;let du,Vo,Ko,Ts;function Bd(t){nn("dom",t),rn("dom",Ym)}function Ym(){if(!Y.document)return;const t=se.bind(null,"dom"),e=pu(t,!0);Y.document.addEventListener("click",e,!1),Y.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((n=>{const r=Y,s=r[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(Bt(s,"addEventListener",(function(o){return function(i,c,a){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){const d=pu(t);l.handler=d,o.call(this,i,d,a)}l.refCount++}catch{}return o.call(this,i,c,a)}})),Bt(s,"removeEventListener",(function(o){return function(i,c,a){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(o.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,c,a)}})))}))}function pu(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=(function(o){try{return o.target}catch{return null}})(n);if((function(o,i){return o==="keypress"&&(!i?.tagName||i.tagName!=="INPUT"&&i.tagName!=="TEXTAREA"&&!i.isContentEditable)})(n.type,r))return;Qt(n,"_sentryCaptured",!0),r&&!r._sentryId&&Qt(r,"_sentryId",Yt());const s=n.type==="keypress"?"input":n.type;(function(o){if(o.type!==Vo)return!1;try{if(!o.target||o.target._sentryId!==Ko)return!1}catch{}return!0})(n)||(t({event:n,name:s,global:e}),Vo=n.type,Ko=r?r._sentryId:void 0),clearTimeout(du),du=Y.setTimeout((()=>{Ko=void 0,Vo=void 0}),Jm)}}function xo(t){const e="history";nn(e,t),rn(e,Xm)}function Xm(){function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=Ts,o=(function(i){try{return new URL(i,Y.location.origin).toString()}catch{return i}})(String(r));if(Ts=o,s===o)return e.apply(this,n);se("history",{from:s,to:o})}return e.apply(this,n)}}Y.addEventListener("popstate",(()=>{const e=Y.location.href,n=Ts;Ts=e,n!==e&&se("history",{from:n,to:e})})),"history"in jr&&jr.history&&(Bt(Y.history,"pushState",t),Bt(Y.history,"replaceState",t))}const zs={};function zd(t){const e=zs[t];if(e)return e;let n=Y[t];if(Ti(n))return zs[t]=n.bind(Y);const r=Y.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o?.[t]&&(n=o[t]),r.head.removeChild(s)}catch(s){In&&N.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return n&&(zs[t]=n.bind(Y))}function hs(...t){return zd("setTimeout")(...t)}const ln="__sentry_xhr_v3__";function Wd(t){nn("xhr",t),rn("xhr",Qm)}function Qm(){if(!Y.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const s=new Error,o=1e3*Ct(),i=Te(r[0])?r[0].toUpperCase():void 0,c=(function(u){if(Te(u))return u;try{return u.toString()}catch{}})(r[1]);if(!i||!c)return e.apply(n,r);n[ln]={method:i,url:c,request_headers:{}},i==="POST"&&c.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const a=()=>{const u=n[ln];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}se("xhr",{endTimestamp:1e3*Ct(),startTimestamp:o,xhr:n,virtualError:s})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(u,l,d)=>(a(),u.apply(l,d))}):n.addEventListener("readystatechange",a),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,l,d){const[p,h]=d,f=l[ln];return f&&Te(p)&&Te(h)&&(f.request_headers[p.toLowerCase()]=h),u.apply(l,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const s=n[ln];return s?(r[0]!==void 0&&(s.body=r[0]),se("xhr",{startTimestamp:1e3*Ct(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}const Zm=Symbol.for("sentry__originalRequestBody");function Hd(t){return new URLSearchParams(t).toString()}function Gd(t,e=N){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Hd(t)];if(!t)return[void 0]}catch(n){return In&&e.error(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return In&&e.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Vd(t=[]){if(t.length>=2&&t[1]&&typeof t[1]=="object"&&"body"in t[1])return t[1].body;if(t.length>=1&&t[0]instanceof Request){const e=t[0][Zm];return e!==void 0?e:void 0}}function Kd(t){let e;try{e=t.getAllResponseHeaders()}catch(n){return In&&N.error(n,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce(((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n}),{}):{}}const Jo=[],Ws=new Map,Fn=new Map;function tg(){if(fs()&&zt()){const t=Nd(eg);return()=>{t()}}return()=>{}}const Di={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},eg=({metric:t})=>{if(t.value==null)return;const e=_t(t.value);if(e>60)return;const n=t.entries.find((p=>p.duration===t.value&&Di[p.name]));if(!n)return;const{interactionId:r}=n,s=Di[n.name],o=_t(zt()+n.startTime),i=jt(),c=i?Lt(i):void 0,a=r!=null?Ws.get(r):void 0,u=a?.span||c,l=u?ct(u).description:dt().getScopeData().transactionName,d=Ca({name:a?.elementName||Ht(n.target),transaction:l,attributes:{[xt]:"auto.http.browser.inp",[Ne]:`ui.interaction.${s}`,[cr]:n.duration},startTime:o});d&&(d.addEvent("inp",{[us]:"millisecond",[ls]:t.value}),d.end(o+e))};function ng(){const t=Object.keys(Di);function e(r){const s=r.target;if(!s)return;const o=Ht(s),i=Math.round(r.timeStamp);if(Fn.set(i,o),Fn.size>50){const c=Fn.keys().next().value;c!==void 0&&Fn.delete(c)}}Ci()&&t.forEach((r=>{Y.addEventListener(r,e,{capture:!0,passive:!0})}));const n=({entries:r})=>{const s=jt(),o=s&&Lt(s);r.forEach((i=>{if(!(function(u){return"duration"in u})(i))return;const c=i.interactionId;if(c==null||Ws.has(c))return;const a=i.target?Ht(i.target):(function(u){const l=Math.round(u.startTime);let d=Fn.get(l);if(!d)for(let p=-5;p<=5;p++){const h=Fn.get(l+p);if(h){d=h;break}}return d||"<unknown>"})(i);if(Jo.length>10){const u=Jo.shift();Ws.delete(u)}Jo.push(c),Ws.set(c,{span:o,elementName:a})}))};Sn("event",n),Sn("first-input",n)}const rg=40;function sg(t,e=zd("fetch")){let n=0,r=0;return(function(s,o,i=Ei(s.bufferSize||yd)){let c={};return{send:function(a){const u=[];if(wc(a,((p,h)=>{const f=kc(h);md(c,f)?s.recordDroppedEvent("ratelimit_backoff",f):u.push(p)})),u.length===0)return Promise.resolve({});const l=Ve(a[0],u),d=p=>{wc(l,((h,f)=>{s.recordDroppedEvent(p,kc(f))}))};return i.add((()=>o({body:Oh(l)}).then((p=>(p.statusCode!==void 0&&(p.statusCode<200||p.statusCode>=300)&&z&&N.warn(`Sentry responded with status code ${p.statusCode} to sent event.`),c=gd(c,p),p)),(p=>{throw d("network_error"),z&&N.error("Encountered error running transport request:",p),p})))).then((p=>p),(p=>{if(p===ya)return z&&N.error("Skipped sending event because buffer is full."),d("queue_overflow"),Promise.resolve({});throw p}))},flush:a=>i.drain(a)}})(t,(async function(s){const o=s.body.length;n+=o,r++;const i={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const c=await e(t.url,i);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw zs.fetch=void 0,c}finally{n-=o,r--}}),Ei(t.bufferSize||rg))}const ne=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Yo(t,e,n,r){const s={filename:t,function:e==="<anonymous>"?yn:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const og=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ig=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ag=/\((\S*)(?::(\d+))(?::(\d+))\)/,cg=/at (.+?) ?\(data:(.+?),/,ug=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,lg=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,dg=Dl([30,t=>{const e=t.match(cg);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=og.exec(t);if(n){const[,s,o,i]=n;return Yo(s,yn,+o,+i)}const r=ig.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const i=ag.exec(r[2]);i&&(r[2]=i[1],r[3]=i[2],r[4]=i[3])}const[s,o]=fu(r[1]||yn,r[2]);return Yo(o,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,t=>{const e=ug.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=lg.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let n=e[3],r=e[1]||yn;return[r,n]=fu(r,n),Yo(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),fu=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:yn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},hu=1024,pg=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){e.console&&Ed((function(r){return function(s){if(rt()!==r)return;const o={category:"console",data:{arguments:s.args,logger:"console"},level:no(s.level),message:Xs(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;o.message=`Assertion failed: ${Xs(s.args.slice(1)," ")||"console.assert"}`,o.data.arguments=s.args.slice(1)}Ee(o,{input:s.args,level:s.level})}})(n)),e.dom&&Bd((function(r,s){return function(o){if(rt()!==r)return;let i,c,a=typeof s=="object"?s.serializeAttribute:void 0,u=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;u&&u>hu&&(ne&&N.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${u} was configured. Sentry will use 1024 instead.`),u=hu),typeof a=="string"&&(a=[a]);try{const d=o.event,p=(function(h){return!!h&&!!h.target})(d)?d.target:d;i=Ht(p,{keyAttrs:a,maxStringLength:u}),c=Ul(p)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${o.name}`,message:i};c&&(l.data={"ui.component_name":c}),Ee(l,{event:o.event,name:o.name,global:o.global})}})(n,e.dom)),e.xhr&&Wd((function(r){return function(s){if(rt()!==r)return;const{startTimestamp:o,endTimestamp:i}=s,c=s.xhr[ln];if(!o||!i||!c)return;const{method:a,url:u,status_code:l,body:d}=c,p={method:a,url:u,status_code:l},h={xhr:s.xhr,input:d,startTimestamp:o,endTimestamp:i},f={category:"xhr",data:p,type:"http",level:ou(l)};r.emit("beforeOutgoingRequestBreadcrumb",f,h),Ee(f,h)}})(n)),e.fetch&&xd((function(r){return function(s){if(rt()!==r)return;const{startTimestamp:o,endTimestamp:i}=s;if(i&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.fetchData.method,s.fetchData.url,s.error){const c=s.fetchData,a={data:s.error,input:s.args,startTimestamp:o,endTimestamp:i},u={category:"fetch",data:c,level:"error",type:"http"};r.emit("beforeOutgoingRequestBreadcrumb",u,a),Ee(u,a)}else{const c=s.response,a={...s.fetchData,status_code:c?.status};s.fetchData.request_body_size,s.fetchData.response_body_size;const u={input:s.args,response:c,startTimestamp:o,endTimestamp:i},l={category:"fetch",data:a,type:"http",level:ou(a.status_code)};r.emit("beforeOutgoingRequestBreadcrumb",l,u),Ee(l,u)}}})(n)),e.history&&xo((function(r){return function(s){if(rt()!==r)return;let o=s.from,i=s.to;const c=tr(at.location.href);let a=o?tr(o):void 0;const u=tr(i);a?.path||(a=c),c.protocol===u.protocol&&c.host===u.host&&(i=u.relative),c.protocol===a.protocol&&c.host===a.host&&(o=a.relative),Ee({category:"navigation",data:{from:o,to:i}})}})(n)),e.sentry&&n.on("beforeSendEvent",(function(r){return function(s){rt()===r&&Ee({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:an(s)},{event:s})}})(n))}}},fg=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],hg=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Bt(at,"setTimeout",mu),e.setInterval&&Bt(at,"setInterval",mu),e.requestAnimationFrame&&Bt(at,"requestAnimationFrame",mg),e.XMLHttpRequest&&"XMLHttpRequest"in at&&Bt(XMLHttpRequest.prototype,"send",gg);const n=e.eventTarget;n&&(Array.isArray(n)?n:fg).forEach((r=>(function(s,o){const i=at,c=i[s]?.prototype;c?.hasOwnProperty?.("addEventListener")&&(Bt(c,"addEventListener",(function(a){return function(u,l,d){try{typeof l.handleEvent=="function"&&(l.handleEvent=lr(l.handleEvent,{mechanism:{data:{handler:Pe(l),target:s},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return o.unregisterOriginalCallbacks&&(function(p,h,f){p&&typeof p=="object"&&"removeEventListener"in p&&typeof p.removeEventListener=="function"&&p.removeEventListener(h,f)})(this,u,l),a.apply(this,[u,lr(l,{mechanism:{data:{handler:Pe(l),target:s},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),d])}})),Bt(c,"removeEventListener",(function(a){return function(u,l,d){try{const p=l.__sentry_wrapped__;p&&a.call(this,u,p,d)}catch{}return a.call(this,u,l,d)}})))})(r,e)))}}};function mu(t){return function(...e){const n=e[0];return e[0]=lr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Pe(t)}`}}),t.apply(this,e)}}function mg(t){return function(e){return t.apply(this,[lr(e,{mechanism:{data:{handler:Pe(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function gg(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((r=>{r in n&&typeof n[r]=="function"&&Bt(n,r,(function(s){const o={mechanism:{data:{handler:Pe(s)},handled:!1,type:`auto.browser.browserapierrors.xhr.${r}`}},i=aa(s);return i&&(o.mechanism.data.handler=Pe(i)),lr(s,o)}))})),t.apply(this,e)}}const yg=()=>({name:"BrowserSession",setupOnce(){at.document!==void 0?(Pc({ignoreDuration:!0}),Dc(),xo((({from:t,to:e})=>{t!==void 0&&t!==e&&(Pc({ignoreDuration:!0}),Dc())}))):ne&&N.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),vg=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&((function(r){Nl((s=>{const{stackParser:o,attachStacktrace:i}=yu();if(rt()!==r||au())return;const{msg:c,url:a,line:u,column:l,error:d}=s,p=(function(h,f,m,g){const y=h.exception=h.exception||{},S=y.values=y.values||[],v=S[0]=S[0]||{},w=v.stacktrace=v.stacktrace||{},T=w.frames=w.frames||[],x=g,_=m,b=(function(E){if(!(!Te(E)||E.length===0)){if(E.startsWith("data:")){const R=E.match(/^data:([^;]+)/);return`<data:${R?R[1]:"text/javascript"}${E.includes("base64,")?",base64":""}>`}return E}})(f)??br();return T.length===0&&T.push({colno:x,filename:b,function:yn,in_app:!0,lineno:_}),h})(Mi(o,d||c,void 0,i,!1),a,u,l);p.level="error",Oc(p,{originalException:d,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})}))})(n),gu("onerror")),e.onunhandledrejection&&((function(r){Fl((s=>{const{stackParser:o,attachStacktrace:i}=yu();if(rt()!==r||au())return;const c=(function(u){if(sr(u))return u;try{if("reason"in u)return u.reason;if("detail"in u&&"reason"in u.detail)return u.detail.reason}catch{}return u})(s),a=sr(c)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(c)}`}]}}:Mi(o,c,void 0,i,!0);a.level="error",Oc(a,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})}))})(n),gu("onunhandledrejection"))}}};function gu(t){ne&&N.log(`Global Handler attached: ${t}`)}function yu(){return rt()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const _g=()=>({name:"HttpContext",preprocessEvent(t){if(!at.navigator&&!at.location&&!at.document)return;const e=Ri(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),bg=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,s,o){cm(ba,o.getOptions().stackParser,n,e,r,s)}}};function Sg(){return!!(function(){if(at.window===void 0)return!1;const t=at;if(t.nw||!(t.chrome||t.browser)?.runtime?.id)return!1;const n=br(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(at===at.top&&r.some((s=>n.startsWith(`${s}://`))))})()&&(ne&&On((()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")})),!0)}function wg(t={}){const e=!t.skipBrowserExtensionCheck&&Sg();let n=t.defaultIntegrations==null?[am(),sm(),hg(),pg(),vg(),bg(),dm(),_g(),yg()]:t.defaultIntegrations;const r={...t,enabled:!e&&t.enabled,stackParser:(s=t.stackParser||dg,Array.isArray(s)?Dl(...s):s),integrations:Vh({integrations:t.integrations,defaultIntegrations:n}),transport:t.transport||sg};var s;return Qh(Tm,r)}const mt=et,Ia="sentryReplaySession",kg="replay_event",Ra="Unable to send Replay",vu=15e4,Cs=5e3,Jd=2e7,Eg=36e5;var xg=Object.defineProperty,_u=(t,e,n)=>((r,s,o)=>s in r?xg(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o)(t,typeof e!="symbol"?e+"":e,n),St=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(St||{});function Br(t){return t?.host?.shadowRoot===t}function zr(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Hs(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,Yd).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e):null}catch{return null}var e}function Yd(t){let e;if((function(n){return"styleSheet"in n})(t))try{e=Hs(t.styleSheet)||(function(n){const{cssText:r}=n;if(r.split('"').length<3)return r;const s=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?s.push("layer"):n.layerName&&s.push(`layer(${n.layerName})`),n.supportsText&&s.push(`supports(${n.supportsText})`),n.media.length&&s.push(n.media.mediaText),s.join(" ")+";"})(t)}catch{}else if((function(n){return"selectorText"in n})(t)){let n=t.cssText;const r=t.selectorText.includes(":"),s=typeof t.style.all=="string"&&t.style.all;if(s&&(n=(function(o){let i="";for(let c=0;c<o.style.length;c++){const a=o.style,u=a[c],l=a.getPropertyPriority(u);i+=`${u}:${a.getPropertyValue(u)}${l?" !important":""};`}return`${o.selectorText} { ${i} }`})(t)),r&&(n=(function(o){const i=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return o.replace(i,"$1\\$2")})(n)),r||s)return n}return e||t.cssText}class Xd{constructor(){_u(this,"idNodeMap",new Map),_u(this,"nodeMetaMap",new WeakMap)}getId(e){return e?this.getMeta(e)?.id??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((r=>this.removeNodeFromMap(r)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function io({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function ts({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function pr(t){return t.toLowerCase()}function Li(t){return t.toUpperCase()}const bu="__rrweb_original__";function Ma(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?pr(e):null}function ao(t,e,n){return e!=="INPUT"||n!=="radio"&&n!=="checkbox"?t.value:t.getAttribute("value")||""}function Su(t,e){let n;try{n=new URL(t,e??window.location.href)}catch{return null}return n.pathname.match(/\.([0-9a-z]+)(?:$)/i)?.[1]??null}const wu={};function Qd(t){const e=wu[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[t]&&(r=o[t]),n.head.removeChild(s)}catch{}return wu[t]=r.bind(window)}function Xo(...t){return Qd("setTimeout")(...t)}function ku(...t){return Qd("clearTimeout")(...t)}function Zd(t){try{return t.contentDocument}catch{}}let Tg=1;const Cg=new RegExp("[^a-z0-9-_:]"),es=-2;function Aa(){return Tg++}let qn,Eu;const Ig=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Rg=/^(?:[a-z+]+:)?\/\//i,Mg=/^www\..*/i,Ag=/^(data:)([^,]*),(.*)/i;function Gs(t,e){return(t||"").replace(Ig,((n,r,s,o,i,c)=>{const a=s||i||c,u=r||o||"";if(!a)return n;if(Rg.test(a)||Mg.test(a))return`url(${u}${a}${u})`;if(Ag.test(a))return`url(${u}${a}${u})`;if(a[0]==="/")return`url(${u}${(function(p){let h="";return h=p.indexOf("//")>-1?p.split("/").slice(0,3).join("/"):p.split("/")[0],h=h.split("?")[0],h})(e)+a}${u})`;const l=e.split("/"),d=a.split("/");l.pop();for(const p of d)p!=="."&&(p===".."?l.pop():l.push(p));return`url(${u}${l.join("/")}${u})`}))}const Og=/^[^ \t\n\r\u000c]+/,Pg=/^[, \t\n\r\u000c]+/,xu=new WeakMap;function $n(t,e){return e&&e.trim()!==""?co(t,e):e}function Dg(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function co(t,e){let n=xu.get(t);if(n||(n=t.createElement("a"),xu.set(t,n)),e){if(e.startsWith("blob:")||e.startsWith("data:"))return e}else e="";return n.setAttribute("href",e),n.href}function tp(t,e,n,r,s,o,i){if(!r)return r;if(n==="src"||n==="href"&&(e!=="use"||r[0]!=="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th"))return $n(t,r);if(n==="srcset")return(function(c,a){if(a.trim()==="")return a;let u=0;function l(p){let h;const f=p.exec(a.substring(u));return f?(h=f[0],u+=h.length,h):""}const d=[];for(;l(Pg),!(u>=a.length);){let p=l(Og);if(p.slice(-1)===",")p=$n(c,p.substring(0,p.length-1)),d.push(p);else{let h="";p=$n(c,p);let f=!1;for(;;){const m=a.charAt(u);if(m===""){d.push((p+h).trim());break}if(f)m===")"&&(f=!1);else{if(m===","){u+=1,d.push((p+h).trim());break}m==="("&&(f=!0)}h+=m,u+=1}}}return d.join(", ")})(t,r);if(n==="style"){let c=Gs(r,co(t));return i&&i.size>0&&(c=(function(a,u){if(!a||u.size===0)return a;try{const l=a.split(";"),d=[];for(let p of l){if(p=p.trim(),!p)continue;const h=p.indexOf(":");if(h===-1){d.push(p);continue}const f=p.slice(0,h).trim();u.has(f)||d.push(p)}return d.join("; ")+(d.length>0&&a.endsWith(";")?";":"")}catch(l){return console.warn("Error filtering CSS properties:",l),a}})(c,i)),c}return e==="object"&&n==="data"?$n(t,r):typeof o=="function"?o(n,r,s):r}function ep(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function dn(t,e,n=1/0,r=0){return t?t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:dn(t.parentNode,e,n,r+1):-1}function Vn(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if((function(s,o){for(let i=s.classList.length;i--;){const c=s.classList[i];if(o.test(c))return!0}return!1})(r,t))return!0}return!(!e||!r.matches(e))}catch{return!1}}}function nr(t,e,n,r,s,o){try{const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let c=-1,a=-1;if(o){if(a=dn(i,Vn(r,s)),a<0)return!0;c=dn(i,Vn(e,n),a>=0?a:1/0)}else{if(c=dn(i,Vn(e,n)),c<0)return!1;a=dn(i,Vn(r,s),c>=0?c:1/0)}return c>=0?!(a>=0)||c<=a:!(a>=0)&&!!o}catch{}return!!o}function Lg(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:c,maskAttributeFn:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:S,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:T=!1,ignoreCSSAttributes:x}=e,_=(function(b,E){if(!E.hasNode(b))return;const R=E.getId(b);return R===1?void 0:R})(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:St.Document,childNodes:[],compatMode:t.compatMode}:{type:St.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:St.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:_};case t.ELEMENT_NODE:return(function(b,E){const{doc:R,blockClass:I,blockSelector:C,unblockSelector:M,inlineStylesheet:D,maskInputOptions:P={},maskAttributeFn:$,maskInputFn:L,dataURLOptions:A={},inlineImages:F,recordCanvas:k,keepIframeSrcFn:O,newlyAddedElement:j=!1,rootId:q,maskTextClass:B,unmaskTextClass:W,maskTextSelector:tt,unmaskTextSelector:Q,ignoreCSSAttributes:ft}=E,gt=(function(U,X,wt,bt){try{if(bt&&U.matches(bt))return!1;if(typeof X=="string"){if(U.classList.contains(X))return!0}else for(let Nt=U.classList.length;Nt--;){const V=U.classList[Nt];if(X.test(V))return!0}if(wt)return U.matches(wt)}catch{}return!1})(b,I,C,M),nt=(function(U){if(U instanceof HTMLFormElement)return"form";const X=pr(U.tagName);return Cg.test(X)?"div":X})(b);let st={};const Se=b.attributes.length;for(let U=0;U<Se;U++){const X=b.attributes[U];X.name&&!ep(nt,X.name,X.value)&&(st[X.name]=tp(R,nt,pr(X.name),X.value,b,$,ft))}if(nt==="link"&&D){const U=Array.from(R.styleSheets).find((wt=>wt.href===b.href));let X=null;U&&(X=Hs(U)),X&&(st.rel=null,st.href=null,st.crossorigin=null,st._cssText=Gs(X,U.href))}if(nt==="style"&&b.sheet&&!(b.innerText||b.textContent||"").trim().length){const U=Hs(b.sheet);U&&(st._cssText=Gs(U,co(R)))}if(nt==="input"||nt==="textarea"||nt==="select"||nt==="option"){const U=b,X=Ma(U),wt=ao(U,Li(nt),X),bt=U.checked;if(X!=="submit"&&X!=="button"&&wt){const Nt=nr(U,B,tt,W,Q,io({type:X,tagName:Li(nt),maskInputOptions:P}));st.value=ts({isMasked:Nt,element:U,value:wt,maskInputFn:L})}bt&&(st.checked=bt)}if(nt==="option"&&(b.selected&&!P.select?st.selected=!0:delete st.selected),nt==="canvas"&&k){if(b.__context==="2d")(function(U){const X=U.getContext("2d");if(!X)return!0;for(let wt=0;wt<U.width;wt+=50)for(let bt=0;bt<U.height;bt+=50){const Nt=X.getImageData,V=bu in Nt?Nt[bu]:Nt;if(new Uint32Array(V.call(X,wt,bt,Math.min(50,U.width-wt),Math.min(50,U.height-bt)).data.buffer).some((Tt=>Tt!==0)))return!1}return!0})(b)||(st.rr_dataURL=b.toDataURL(A.type,A.quality));else if(!("__context"in b)){const U=b.toDataURL(A.type,A.quality),X=R.createElement("canvas");X.width=b.width,X.height=b.height,U!==X.toDataURL(A.type,A.quality)&&(st.rr_dataURL=U)}}if(nt==="img"&&F){qn||(qn=R.createElement("canvas"),Eu=qn.getContext("2d"));const U=b,X=U.currentSrc||U.getAttribute("src")||"<unknown-src>",wt=U.crossOrigin,bt=()=>{U.removeEventListener("load",bt);try{qn.width=U.naturalWidth,qn.height=U.naturalHeight,Eu.drawImage(U,0,0),st.rr_dataURL=qn.toDataURL(A.type,A.quality)}catch(Nt){if(U.crossOrigin!=="anonymous")return U.crossOrigin="anonymous",void(U.complete&&U.naturalWidth!==0?bt():U.addEventListener("load",bt));console.warn(`Cannot inline img src=${X}! Error: ${Nt}`)}U.crossOrigin==="anonymous"&&(wt?st.crossOrigin=wt:U.removeAttribute("crossorigin"))};U.complete&&U.naturalWidth!==0?bt():U.addEventListener("load",bt)}if(nt!=="audio"&&nt!=="video"||(st.rr_mediaState=b.paused?"paused":"played",st.rr_mediaCurrentTime=b.currentTime),j||(b.scrollLeft&&(st.rr_scrollLeft=b.scrollLeft),b.scrollTop&&(st.rr_scrollTop=b.scrollTop)),gt){const{width:U,height:X}=b.getBoundingClientRect();st={class:st.class,rr_width:`${U}px`,rr_height:`${X}px`}}nt!=="iframe"||O(st.src)||(gt||Zd(b)||(st.rr_src=st.src),delete st.src);let Dt;try{customElements.get(nt)&&(Dt=!0)}catch{}return{type:St.Element,tagName:nt,attributes:st,childNodes:[],isSVG:Dg(b)||void 0,needBlock:gt,rootId:q,isCustom:Dt}})(t,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:a,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:S,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:T,rootId:_,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,ignoreCSSAttributes:x});case t.TEXT_NODE:return(function(b,E){const{maskAllText:R,maskTextClass:I,unmaskTextClass:C,maskTextSelector:M,unmaskTextSelector:D,maskTextFn:P,maskInputOptions:$,maskInputFn:L,rootId:A}=E,F=b.parentNode&&b.parentNode.tagName;let k=b.textContent;const O=F==="STYLE"||void 0,j=F==="SCRIPT"||void 0,q=F==="TEXTAREA"||void 0;if(O&&k){try{b.nextSibling||b.previousSibling||b.parentNode.sheet?.cssRules&&(k=Hs(b.parentNode.sheet))}catch(W){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${W}`,b)}k=Gs(k,co(E.doc))}j&&(k="SCRIPT_PLACEHOLDER");const B=nr(b,I,M,C,D,R);return O||j||q||!k||!B||(k=P?P(k,b.parentElement):k.replace(/[\S]/g,"*")),q&&k&&($.textarea||B)&&(k=L?L(k,b.parentNode):k.replace(/[\S]/g,"*")),F==="OPTION"&&k&&(k=ts({isMasked:nr(b,I,M,C,D,io({type:null,tagName:F,maskInputOptions:$})),element:b,value:k,maskInputFn:L})),{type:St.Text,textContent:k||"",isStyle:O,rootId:A}})(t,{doc:n,maskAllText:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:_});case t.CDATA_SECTION_NODE:return{type:St.CDATA,textContent:"",rootId:_};case t.COMMENT_NODE:return{type:St.Comment,textContent:t.textContent||"",rootId:_};default:return!1}}function ht(t){return t==null?"":t.toLowerCase()}function Kn(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:c,maskTextClass:a,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:v={},inlineImages:w=!1,recordCanvas:T=!1,onSerialize:x,onIframeLoad:_,iframeLoadTimeout:b=5e3,onBlockedImageLoad:E,onStylesheetLoad:R,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:M=!1,ignoreCSSAttributes:D}=e;let{preserveWhiteSpace:P=!0}=e;const $=Lg(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:c,unblockSelector:i,maskTextClass:a,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:w,recordCanvas:T,keepIframeSrcFn:C,newlyAddedElement:M,ignoreCSSAttributes:D});if(!$)return console.warn(t,"not serialized"),null;let L;L=r.hasNode(t)?r.getId(t):!(function(k,O){return!!(O.comment&&k.type===St.Comment||k.type===St.Element&&(O.script&&(k.tagName==="script"||k.tagName==="link"&&(k.attributes.rel==="preload"||k.attributes.rel==="modulepreload")||k.tagName==="link"&&k.attributes.rel==="prefetch"&&typeof k.attributes.href=="string"&&Su(k.attributes.href)==="js")||O.headFavicon&&(k.tagName==="link"&&k.attributes.rel==="shortcut icon"||k.tagName==="meta"&&(ht(k.attributes.name).match(/^msapplication-tile(image|color)$/)||ht(k.attributes.name)==="application-name"||ht(k.attributes.rel)==="icon"||ht(k.attributes.rel)==="apple-touch-icon"||ht(k.attributes.rel)==="shortcut icon"))||k.tagName==="meta"&&(O.headMetaDescKeywords&&ht(k.attributes.name).match(/^description|keywords$/)||O.headMetaSocial&&(ht(k.attributes.property).match(/^(og|twitter|fb):/)||ht(k.attributes.name).match(/^(og|twitter):/)||ht(k.attributes.name)==="pinterest")||O.headMetaRobots&&(ht(k.attributes.name)==="robots"||ht(k.attributes.name)==="googlebot"||ht(k.attributes.name)==="bingbot")||O.headMetaHttpEquiv&&k.attributes["http-equiv"]!==void 0||O.headMetaAuthorship&&(ht(k.attributes.name)==="author"||ht(k.attributes.name)==="generator"||ht(k.attributes.name)==="framework"||ht(k.attributes.name)==="publisher"||ht(k.attributes.name)==="progid"||ht(k.attributes.property).match(/^article:/)||ht(k.attributes.property).match(/^product:/))||O.headMetaVerification&&(ht(k.attributes.name)==="google-site-verification"||ht(k.attributes.name)==="yandex-verification"||ht(k.attributes.name)==="csrf-token"||ht(k.attributes.name)==="p:domain_verify"||ht(k.attributes.name)==="verify-v1"||ht(k.attributes.name)==="verification"||ht(k.attributes.name)==="shopify-checkout-api-token"))))})($,S)&&(P||$.type!==St.Text||$.isStyle||$.textContent.replace(/^\s+|\s+$/gm,"").length)?Aa():es;const A=Object.assign($,{id:L});if(r.add(t,A),L===es)return null;x&&x(t);let F=!p;if(A.type===St.Element){F=F&&!A.needBlock;const k=t.shadowRoot;k&&zr(k)&&(A.isShadowHost=!0)}if((A.type===St.Document||A.type===St.Element)&&F){S.headWhitespace&&A.type===St.Element&&A.tagName==="head"&&(P=!1);const k={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:c,unblockSelector:i,maskTextClass:a,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:v,inlineImages:w,recordCanvas:T,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:_,iframeLoadTimeout:b,onBlockedImageLoad:E,onStylesheetLoad:R,stylesheetLoadTimeout:I,keepIframeSrcFn:C,ignoreCSSAttributes:D},O=t.childNodes?Array.from(t.childNodes):[];for(const j of O){const q=Kn(j,k);q&&A.childNodes.push(q)}if((function(j){return j.nodeType===j.ELEMENT_NODE})(t)&&t.shadowRoot)for(const j of Array.from(t.shadowRoot.childNodes)){const q=Kn(j,k);q&&(zr(t.shadowRoot)&&(q.isShadow=!0),A.childNodes.push(q))}}if(t.parentNode&&Br(t.parentNode)&&zr(t.parentNode)&&(A.isShadow=!0),A.type!==St.Element||A.tagName!=="iframe"||A.needBlock||(function(k,O,j){const q=k.contentWindow;if(!q)return;let B,W=!1;try{B=q.document.readyState}catch{return}if(B!=="complete"){const Q=Xo((()=>{W||(O(),W=!0)}),j);return void k.addEventListener("load",(()=>{ku(Q),W=!0,O()}))}const tt="about:blank";if(q.location.href!==tt||k.src===tt||k.src==="")return Xo(O,0),k.addEventListener("load",O);k.addEventListener("load",O)})(t,(()=>{const k=Zd(t);if(k&&_){const O=Kn(k,{doc:k,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:c,maskTextClass:a,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:v,inlineImages:w,recordCanvas:T,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:_,iframeLoadTimeout:b,onStylesheetLoad:R,stylesheetLoadTimeout:I,keepIframeSrcFn:C,ignoreCSSAttributes:D});O&&_(t,O)}}),b),A.type===St.Element&&A.tagName==="img"&&!t.complete&&A.needBlock){const k=t,O=()=>{if(k.isConnected&&!k.complete&&E)try{const j=k.getBoundingClientRect();j.width>0&&j.height>0&&E(k,A,j)}catch{}k.removeEventListener("load",O)};k.isConnected&&k.addEventListener("load",O)}return A.type===St.Element&&A.tagName==="link"&&typeof A.attributes.rel=="string"&&(A.attributes.rel==="stylesheet"||A.attributes.rel==="preload"&&typeof A.attributes.href=="string"&&Su(A.attributes.href)==="css")&&(function(k,O,j){let q,B=!1;try{q=k.sheet}catch{return}if(q)return;const W=Xo((()=>{B||(O(),B=!0)}),j);k.addEventListener("load",(()=>{ku(W),B=!0,O()}))})(t,(()=>{if(R){const k=Kn(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:c,maskTextClass:a,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:v,inlineImages:w,recordCanvas:T,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:_,iframeLoadTimeout:b,onStylesheetLoad:R,stylesheetLoadTimeout:I,keepIframeSrcFn:C,ignoreCSSAttributes:D});k&&R(t,k)}}),I),A.type===St.Element&&delete A.needBlock,A}function qt(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Wn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Tu={map:{},getId:()=>(console.error(Wn),-1),getNode:()=>(console.error(Wn),null),removeNodeFromMap(){console.error(Wn)},has:()=>(console.error(Wn),!1),reset(){console.error(Wn)}};function Nr(t,e,n={}){let r=null,s=0;return function(...o){const i=Date.now();s||n.leading!==!1||(s=i);const c=e-(i-s),a=this;c<=0||c>e?(r&&((function(...u){Oa("clearTimeout")(...u)})(r),r=null),s=i,t.apply(a,o)):r||n.trailing===!1||(r=To((()=>{s=n.leading===!1?0:Date.now(),r=null,t.apply(a,o)}),c))}}function np(t,e,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(i){To((()=>{n.set.call(this,i)}),0),o&&o.set&&o.set.call(this,i)}}),()=>np(t,e,o||{},!0)}function Ni(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Tu=new Proxy(Tu,{get:(t,e,n)=>(e==="map"&&console.error(Wn),Reflect.get(t,e,n))}));let uo=Date.now;function rp(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:e?.documentElement.scrollLeft||e?.body?.parentElement?.scrollLeft||e?.body?.scrollLeft||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:e?.documentElement.scrollTop||e?.body?.parentElement?.scrollTop||e?.body?.scrollTop||0}}function sp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function op(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ip(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function Kt(t,e,n,r,s){if(!t)return!1;const o=ip(t);if(!o)return!1;const i=Vn(e,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const c=dn(o,i);let a=-1;return!(c<0)&&(r&&(a=dn(o,Vn(null,r))),c>-1&&a<0||c<a)}function Qo(t,e){return e.getId(t)===es}function ap(t,e){if(Br(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||ap(t.parentNode,e))}function Fi(t){return!!t.changedTouches}function cp(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function up(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function qi(t){return!!t?.shadowRoot}/[1-9][0-9]{12}/.test(Date.now().toString())||(uo=()=>new Date().getTime());class Ng{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return r=n===void 0?this.id++:n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function lp(t){let e=null;return t.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function Fg(t){const e=t.ownerDocument;if(!e)return!1;const n=(function(r){let s,o=r;for(;s=lp(o);)o=s;return o})(t);return e.contains(n)}function dp(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||Fg(t))}const Cu={};function Oa(t){const e=Cu[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[t]&&(r=o[t]),n.head.removeChild(s)}catch{}return Cu[t]=r.bind(window)}function To(...t){return Oa("setTimeout")(...t)}var Z=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Z||{}),K=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(K||{}),Ft=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Ft||{}),we=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(we||{}),Hn=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Hn||{});function Pa(t){try{return t.contentDocument}catch{}}function Iu(t){return"__ln"in t}class qg{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=n?.next||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&Iu(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&Iu(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Ru=(t,e)=>`${t}@${e}`;class $g{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new qg,s=a=>{let u=a,l=es;for(;l===es;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},o=a=>{if(!a.parentNode||!dp(a))return;const u=Br(a.parentNode)?this.mirror.getId(lp(a)):this.mirror.getId(a.parentNode),l=s(a);if(u===-1||l===-1)return r.addNode(a);const d=Kn(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{cp(p,this.mirror)&&!Kt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),up(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),qi(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,this.doc)},onIframeLoad:(p,h)=>{Kt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,h),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,h)=>{this.stylesheetManager.attachLinkElement(p,h)},onBlockedImageLoad:(p,h,{width:f,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:h.id,attributes:{style:{width:`${f}px`,height:`${m}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});d&&(e.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)Mu(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(const a of this.addedSet)Au(this.droppedSet,a)||Mu(this.removes,a,this.mirror)?Au(this.movedSet,a)?o(a):this.droppedSet.add(a):o(a);let i=null;for(;r.length;){let a=null;if(i){const u=this.mirror.getId(i.value.parentNode),l=s(i.value);u!==-1&&l!==-1&&(a=i)}if(!a){let u=r.tail;for(;u;){const l=u;if(u=u.previous,l){const d=this.mirror.getId(l.value.parentNode);if(s(l.value)===-1)continue;if(d!==-1){a=l;break}{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){a=l;break}}}}}}if(!a){for(;r.head;)r.removeNode(r.head.value);break}i=a.previous,r.removeNode(a.value),o(a.value)}const c={texts:this.texts.map((a=>({id:this.mirror.getId(a.node),value:a.value}))).filter((a=>!n.has(a.id))).filter((a=>this.mirror.has(a.id))),attributes:this.attributes.map((a=>{const{attributes:u}=a;if(typeof u.style=="string"){const l=JSON.stringify(a.styleDiff),d=JSON.stringify(a._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=a.styleDiff)}return{id:this.mirror.getId(a.node),attributes:u}})).filter((a=>!n.has(a.id))).filter((a=>this.mirror.has(a.id))),removes:this.removes,adds:e};(c.texts.length||c.attributes.length||c.removes.length||c.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=e=>{if(!Qo(e.target,this.mirror))switch(e.type){case"characterData":{const n=e.target.textContent;Kt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||n===e.oldValue||this.texts.push({value:nr(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,ip(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,s=e.target.getAttribute(r);if(r==="value"){const i=Ma(n),c=n.tagName;s=ao(n,c,i);const a=io({maskInputOptions:this.maskInputOptions,tagName:c,type:i});s=ts({isMasked:nr(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,a),element:n,value:s,maskInputFn:this.maskInputFn})}if(Kt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let o=this.attributeMap.get(e.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s)){if(Pa(n))return;r="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),r==="type"&&n.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!ep(n.tagName,r)&&(o.attributes[r]=tp(this.doc,pr(n.tagName),pr(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");e.oldValue&&i.setAttribute("style",e.oldValue);for(const c of Array.from(n.style)){const a=n.style.getPropertyValue(c),u=n.style.getPropertyPriority(c);a!==i.style.getPropertyValue(c)||u!==i.style.getPropertyPriority(c)?o.styleDiff[c]=u===""?a:[a,u]:o._unchangedStyles[c]=[a,u]}for(const c of Array.from(i.style))n.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":if(Kt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((n=>this.genAdds(n,e.target))),e.removedNodes.forEach((n=>{const r=this.mirror.getId(n),s=Br(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Kt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Qo(n,this.mirror)||!(function(o,i){return i.getId(o)!==-1})(n,this.mirror)||(this.addedSet.has(n)?($i(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(e.target)&&r===-1||ap(e.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Ru(r,s)]?$i(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:!(!Br(e.target)||!zr(e.target))||void 0})),this.mapRemoves.push(n))}))}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Qo(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Ru(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Kt(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach((r=>this.genAdds(r))),qi(e)&&e.shadowRoot.childNodes.forEach((r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach((n=>{this[n]=e[n]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function $i(t,e){t.delete(e),e.childNodes?.forEach((n=>$i(t,n)))}function Mu(t,e,n){return t.length!==0&&(function(r,s,o){let i=s.parentNode;for(;i;){const c=o.getId(i);if(r.some((a=>a.id===c)))return!0;i=i.parentNode}return!1})(t,e,n)}function Au(t,e){return t.size!==0&&pp(t,e)}function pp(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||pp(t,n))}let Wr;const ot=t=>Wr?(...e)=>{try{return t(...e)}catch(n){if(Wr&&Wr(n)===!0)return()=>{};throw n}}:t,Jn=[];function ns(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function fp(t,e){const n=new $g;Jn.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(ot((i=>{t.onMutation&&t.onMutation(i)===!1||n.processMutations.bind(n)(i)})));return o.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function jg({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const c=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,a=[];let u=null;return Object.keys(Ft).filter((l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&c[l]!==!1)).forEach((l=>{let d=pr(l);const p=(h=>f=>{const m=ns(f);if(Kt(m,r,s,o,!0))return;let g=null,y=h;if("pointerType"in f){switch(f.pointerType){case"mouse":g=we.Mouse;break;case"touch":g=we.Touch;break;case"pen":g=we.Pen}g===we.Touch?Ft[h]===Ft.MouseDown?y="TouchStart":Ft[h]===Ft.MouseUp&&(y="TouchEnd"):we.Pen}else Fi(f)&&(g=we.Touch);g!==null?(u=g,(y.startsWith("Touch")&&g===we.Touch||y.startsWith("Mouse")&&g===we.Mouse)&&(g=null)):Ft[h]===Ft.Click&&(g=u,u=null);const S=Fi(f)?f.changedTouches[0]:f;if(!S)return;const v=n.getId(m),{clientX:w,clientY:T}=S;ot(t)({type:Ft[y],id:v,x:w,y:T,...g!==null&&{pointerType:g}})})(l);if(window.PointerEvent)switch(Ft[l]){case Ft.MouseDown:case Ft.MouseUp:d=d.replace("mouse","pointer");break;case Ft.TouchStart:case Ft.TouchEnd:return}a.push(qt(d,p,e))})),ot((()=>{a.forEach((l=>l()))}))}function hp({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){return qt("scroll",ot(Nr(ot((c=>{const a=ns(c);if(!a||Kt(a,r,s,o,!0))return;const u=n.getId(a);if(a===e&&e.defaultView){const l=rp(e.defaultView);t({id:u,x:l.left,y:l.top})}else t({id:u,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),e)}const Ug=["INPUT","TEXTAREA","SELECT"],Ou=new WeakMap;function Bg({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:c,maskInputOptions:a,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(x){let _=ns(x);const b=x.isTrusted,E=_&&Li(_.tagName);if(E==="OPTION"&&(_=_.parentElement),!_||!E||Ug.indexOf(E)<0||Kt(_,r,s,o,!0))return;const R=_;if(R.classList.contains(i)||c&&R.matches(c))return;const I=Ma(_);let C=ao(R,E,I),M=!1;const D=io({maskInputOptions:a,tagName:E,type:I}),P=nr(_,p,f,h,m,D);I!=="radio"&&I!=="checkbox"||(M=_.checked),C=ts({isMasked:P,element:_,value:C,maskInputFn:u}),y(_,d?{text:C,isChecked:M,userTriggered:b}:{text:C,isChecked:M});const $=_.name;I==="radio"&&$&&M&&e.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach((L=>{if(L!==_){const A=ts({isMasked:P,element:L,value:ao(L,E,I),maskInputFn:u});y(L,d?{text:A,isChecked:!M,userTriggered:!1}:{text:A,isChecked:!M})}}))}function y(x,_){const b=Ou.get(x);if(!b||b.text!==_.text||b.isChecked!==_.isChecked){Ou.set(x,_);const E=n.getId(x);ot(t)({..._,id:E})}}const S=(l.input==="last"?["change"]:["input","change"]).map((x=>qt(x,ot(g),e))),v=e.defaultView;if(!v)return()=>{S.forEach((x=>x()))};const w=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),T=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return w&&w.set&&S.push(...T.map((x=>np(x[0],x[1],{set(){ot(g)({target:this,isTrusted:!1})}},!1,v)))),ot((()=>{S.forEach((x=>x()))}))}function Is(t){return(function(e,n){if(Rs("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Rs("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Rs("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Rs("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const r=Array.from(e.parentRule.cssRules).indexOf(e);n.unshift(r)}else if(e.parentStyleSheet){const r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);n.unshift(r)}return n})(t,[])}function Ue(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function mp({mirror:t,stylesheetManager:e},n){let r=null;r=n.nodeName==="#document"?t.getId(n):t.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,o=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r!==null&&r!==-1&&s&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return o.get?.call(this)},set(i){const c=o.set?.call(this,i);if(r!==null&&r!==-1)try{e.adoptStyleSheets(i,r)}catch{}return c}}),ot((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))):()=>{}}function zg(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};let r;t.recordDOM&&(r=fp(t,t.doc));const s=(function({mousemoveCb:y,sampling:S,doc:v,mirror:w}){if(S.mousemove===!1)return()=>{};const T=typeof S.mousemove=="number"?S.mousemove:50,x=typeof S.mousemoveCallback=="number"?S.mousemoveCallback:500;let _,b=[];const E=Nr(ot((C=>{const M=Date.now()-_;y(b.map((D=>(D.timeOffset-=M,D))),C),b=[],_=null})),x),R=ot(Nr(ot((C=>{const M=ns(C),{clientX:D,clientY:P}=Fi(C)?C.changedTouches[0]:C;_||(_=uo()),b.push({x:D,y:P,id:w.getId(M),timeOffset:uo()-_}),E(typeof DragEvent<"u"&&C instanceof DragEvent?K.Drag:C instanceof MouseEvent?K.MouseMove:K.TouchMove)})),T,{trailing:!1})),I=[qt("mousemove",R,v),qt("touchmove",R,v),qt("drag",R,v)];return ot((()=>{I.forEach((C=>C()))}))})(t),o=jg(t),i=hp(t),c=(function({viewportResizeCb:y},{win:S}){let v=-1,w=-1;return qt("resize",ot(Nr(ot((()=>{const T=sp(),x=op();v===T&&w===x||(y({width:Number(x),height:Number(T)}),v=T,w=x)})),200)),S)})(t,{win:n}),a=Bg(t),u=(function({mediaInteractionCb:y,blockClass:S,blockSelector:v,unblockSelector:w,mirror:T,sampling:x,doc:_}){const b=ot((R=>Nr(ot((I=>{const C=ns(I);if(!C||Kt(C,S,v,w,!0))return;const{currentTime:M,volume:D,muted:P,playbackRate:$}=C;y({type:R,id:T.getId(C),currentTime:M,volume:D,muted:P,playbackRate:$})})),x.media||500))),E=[qt("play",b(Hn.Play),_),qt("pause",b(Hn.Pause),_),qt("seeked",b(Hn.Seeked),_),qt("volumechange",b(Hn.VolumeChange),_),qt("ratechange",b(Hn.RateChange),_)];return ot((()=>{E.forEach((R=>R()))}))})(t);let l=()=>{},d=()=>{},p=()=>{},h=()=>{};t.recordDOM&&(l=(function({styleSheetRuleCb:y,mirror:S,stylesheetManager:v},{win:w}){if(!w.CSSStyleSheet||!w.CSSStyleSheet.prototype)return()=>{};const T=w.CSSStyleSheet.prototype.insertRule;w.CSSStyleSheet.prototype.insertRule=new Proxy(T,{apply:ot(((I,C,M)=>{const[D,P]=M,{id:$,styleId:L}=Ue(C,S,v.styleMirror);return($&&$!==-1||L&&L!==-1)&&y({id:$,styleId:L,adds:[{rule:D,index:P}]}),I.apply(C,M)}))});const x=w.CSSStyleSheet.prototype.deleteRule;let _,b;w.CSSStyleSheet.prototype.deleteRule=new Proxy(x,{apply:ot(((I,C,M)=>{const[D]=M,{id:P,styleId:$}=Ue(C,S,v.styleMirror);return(P&&P!==-1||$&&$!==-1)&&y({id:P,styleId:$,removes:[{index:D}]}),I.apply(C,M)}))}),w.CSSStyleSheet.prototype.replace&&(_=w.CSSStyleSheet.prototype.replace,w.CSSStyleSheet.prototype.replace=new Proxy(_,{apply:ot(((I,C,M)=>{const[D]=M,{id:P,styleId:$}=Ue(C,S,v.styleMirror);return(P&&P!==-1||$&&$!==-1)&&y({id:P,styleId:$,replace:D}),I.apply(C,M)}))})),w.CSSStyleSheet.prototype.replaceSync&&(b=w.CSSStyleSheet.prototype.replaceSync,w.CSSStyleSheet.prototype.replaceSync=new Proxy(b,{apply:ot(((I,C,M)=>{const[D]=M,{id:P,styleId:$}=Ue(C,S,v.styleMirror);return(P&&P!==-1||$&&$!==-1)&&y({id:P,styleId:$,replaceSync:D}),I.apply(C,M)}))}));const E={};Ms("CSSGroupingRule")?E.CSSGroupingRule=w.CSSGroupingRule:(Ms("CSSMediaRule")&&(E.CSSMediaRule=w.CSSMediaRule),Ms("CSSConditionRule")&&(E.CSSConditionRule=w.CSSConditionRule),Ms("CSSSupportsRule")&&(E.CSSSupportsRule=w.CSSSupportsRule));const R={};return Object.entries(E).forEach((([I,C])=>{R[I]={insertRule:C.prototype.insertRule,deleteRule:C.prototype.deleteRule},C.prototype.insertRule=new Proxy(R[I].insertRule,{apply:ot(((M,D,P)=>{const[$,L]=P,{id:A,styleId:F}=Ue(D.parentStyleSheet,S,v.styleMirror);return(A&&A!==-1||F&&F!==-1)&&y({id:A,styleId:F,adds:[{rule:$,index:[...Is(D),L||0]}]}),M.apply(D,P)}))}),C.prototype.deleteRule=new Proxy(R[I].deleteRule,{apply:ot(((M,D,P)=>{const[$]=P,{id:L,styleId:A}=Ue(D.parentStyleSheet,S,v.styleMirror);return(L&&L!==-1||A&&A!==-1)&&y({id:L,styleId:A,removes:[{index:[...Is(D),$]}]}),M.apply(D,P)}))})})),ot((()=>{w.CSSStyleSheet.prototype.insertRule=T,w.CSSStyleSheet.prototype.deleteRule=x,_&&(w.CSSStyleSheet.prototype.replace=_),b&&(w.CSSStyleSheet.prototype.replaceSync=b),Object.entries(E).forEach((([I,C])=>{C.prototype.insertRule=R[I].insertRule,C.prototype.deleteRule=R[I].deleteRule}))}))})(t,{win:n}),d=mp(t,t.doc),p=(function({styleDeclarationCb:y,mirror:S,ignoreCSSAttributes:v,stylesheetManager:w},{win:T}){const x=T.CSSStyleDeclaration.prototype.setProperty;T.CSSStyleDeclaration.prototype.setProperty=new Proxy(x,{apply:ot(((b,E,R)=>{const[I,C,M]=R;if(v.has(I))return x.apply(E,[I,C,M]);const{id:D,styleId:P}=Ue(E.parentRule?.parentStyleSheet,S,w.styleMirror);return(D&&D!==-1||P&&P!==-1)&&y({id:D,styleId:P,set:{property:I,value:C,priority:M},index:Is(E.parentRule)}),b.apply(E,R)}))});const _=T.CSSStyleDeclaration.prototype.removeProperty;return T.CSSStyleDeclaration.prototype.removeProperty=new Proxy(_,{apply:ot(((b,E,R)=>{const[I]=R;if(v.has(I))return _.apply(E,[I]);const{id:C,styleId:M}=Ue(E.parentRule?.parentStyleSheet,S,w.styleMirror);return(C&&C!==-1||M&&M!==-1)&&y({id:C,styleId:M,remove:{property:I},index:Is(E.parentRule)}),b.apply(E,R)}))}),ot((()=>{T.CSSStyleDeclaration.prototype.setProperty=x,T.CSSStyleDeclaration.prototype.removeProperty=_}))})(t,{win:n}),t.collectFonts&&(h=(function({fontCb:y,doc:S}){const v=S.defaultView;if(!v)return()=>{};const w=[],T=new WeakMap,x=v.FontFace;v.FontFace=function(b,E,R){const I=new x(b,E,R);return T.set(I,{family:b,buffer:typeof E!="string",descriptors:R,fontSource:typeof E=="string"?E:JSON.stringify(Array.from(new Uint8Array(E)))}),I};const _=Ni(S.fonts,"add",(function(b){return function(E){return To(ot((()=>{const R=T.get(E);R&&(y(R),T.delete(E))})),0),b.apply(this,[E])}}));return w.push((()=>{v.FontFace=x})),w.push(_),ot((()=>{w.forEach((b=>b()))}))})(t)));const f=(function(y){const{doc:S,mirror:v,blockClass:w,blockSelector:T,unblockSelector:x,selectionCb:_}=y;let b=!0;const E=ot((()=>{const R=S.getSelection();if(!R||b&&R?.isCollapsed)return;b=R.isCollapsed||!1;const I=[],C=R.rangeCount||0;for(let M=0;M<C;M++){const D=R.getRangeAt(M),{startContainer:P,startOffset:$,endContainer:L,endOffset:A}=D;Kt(P,w,T,x,!0)||Kt(L,w,T,x,!0)||I.push({start:v.getId(P),startOffset:$,end:v.getId(L),endOffset:A})}_({ranges:I})}));return E(),qt("selectionchange",E)})(t),m=(function({doc:y,customElementCb:S}){const v=y.defaultView;return v&&v.customElements?Ni(v.customElements,"define",(function(w){return function(T,x,_){try{S({define:{name:T}})}catch{}return w.apply(this,[T,x,_])}})):()=>{}})(t),g=[];for(const y of t.plugins)g.push(y.observer(y.callback,n,y.options));return ot((()=>{Jn.forEach((y=>y.reset())),r?.disconnect(),s(),o(),i(),c(),a(),u(),l(),d(),p(),h(),f(),m(),g.forEach((y=>y()))}))}function Rs(t){return window[t]!==void 0}function Ms(t){return!!(window[t]!==void 0&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class ji{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,s){const o=r||this.getIdToRemoteIdMap(e),i=s||this.getRemoteIdToIdMap(e);let c=o.get(n);return c||(c=this.generateIdFn(),o.set(n,c),i.set(c,n)),c}getIds(e,n){const r=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return n.map((o=>this.getId(e,o,r,s)))}getRemoteId(e,n,r){const s=r||this.getRemoteIdToIdMap(e);return typeof n!="number"?n:s.get(n)||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map((s=>this.getRemoteId(e,s,r)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}class Wg{constructor(){this.crossOriginIframeMirror=new ji(Aa),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Hg{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ji(Aa),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ji(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(e);const r=Pa(e);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const r=this.crossOriginIframeMap.get(e.source);if(!r)return;const s=this.transformCrossOriginEvent(r,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(e,n){switch(n.type){case Z.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:Z.IncrementalSnapshot,data:{source:K.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Z.Meta:case Z.Load:case Z.DomContentLoaded:return!1;case Z.Plugin:return n;case Z.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case Z.IncrementalSnapshot:switch(n.data.source){case K.Mutation:return n.data.adds.forEach((r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(r.node,s)})),n.data.removes.forEach((r=>{this.replaceIds(r,e,["parentId","id"])})),n.data.attributes.forEach((r=>{this.replaceIds(r,e,["id"])})),n.data.texts.forEach((r=>{this.replaceIds(r,e,["id"])})),n;case K.Drag:case K.TouchMove:case K.MouseMove:return n.data.positions.forEach((r=>{this.replaceIds(r,e,["id"])})),n;case K.ViewportResize:return!1;case K.MediaInteraction:case K.MouseInteraction:case K.Scroll:case K.CanvasMutation:case K.Input:return this.replaceIds(n.data,e,["id"]),n;case K.StyleSheetRule:case K.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case K.Font:return n;case K.Selection:return n.data.ranges.forEach((r=>{this.replaceIds(r,e,["start","end"])})),n;case K.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),n.data.styles?.forEach((r=>{this.replaceStyleIds(r,e,["styleId"])})),n}}return!1}replace(e,n,r,s){for(const o of s)(Array.isArray(n[o])||typeof n[o]=="number")&&(Array.isArray(n[o])?n[o]=e.getIds(r,n[o]):n[o]=e.getId(r,n[o]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((r=>{this.replaceIdOnNode(r,n)}))}patchRootIdOnNode(e,n){e.type===St.Document||e.rootId||(e.rootId=n),"childNodes"in e&&e.childNodes.forEach((r=>{this.patchRootIdOnNode(r,n)}))}}class Gg{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Vg{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!zr(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const r=fp({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>r.disconnect())),this.restoreHandlers.push(hp({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),To((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(mp({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){const n=Pa(e),r=(function(s){try{return s.contentWindow}catch{}})(e);n&&r&&this.patchAttachShadow(r.Element,n)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(Ni(e.prototype,"attachShadow",(function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&dp(this)&&r.addShadowRoot(this.shadowRoot,n),i}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch{}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var Kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jg=typeof Uint8Array>"u"?[]:new Uint8Array(256),As=0;As<64;As++)Jg[Kg.charCodeAt(As)]=As;class Pu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Yg{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ng,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of e){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,((c,a)=>({rule:Yd(c),index:a})))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Xg{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some((s=>s!==n))}add(e,n){this.active||(this.active=!0,(function(...r){Oa("requestAnimationFrame")(...r)})((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}destroy(){}}let vt,lo;try{if(Array.from([1],(t=>2*t))[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=t.contentWindow?.Array.from||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const ae=new Xd;function Re(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:c="rr-ignore",ignoreSelector:a=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:S,maskInputFn:v,maskTextFn:w,maxCanvasSize:T=null,packFn:x,sampling:_={},dataURLOptions:b={},mousemoveWait:E,recordDOM:R=!0,recordCanvas:I=!1,recordCrossOriginIframes:C=!1,recordAfter:M=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:D=!1,collectFonts:P=!1,inlineImages:$=!1,plugins:L,keepIframeSrcFn:A=(()=>!1),ignoreCSSAttributes:F=new Set([]),errorHandler:k,onMutation:O,getCanvasManager:j}=t;Wr=k;const q=!C||window.parent===window;let B=!1;if(!q)try{window.parent.document&&(B=!1)}catch{B=!0}if(q&&!e)throw new Error("emit function is required");if(!q&&!B)return()=>{};E!==void 0&&_.mousemove===void 0&&(_.mousemove=E),ae.reset();const W=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},tt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};let Q;(function(V=window){"NodeList"in V&&!V.NodeList.prototype.forEach&&(V.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in V&&!V.DOMTokenList.prototype.forEach&&(V.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...Tt)=>{let J=Tt[0];if(!(0 in Tt))throw new TypeError("1 argument is required");do if(this===J)return!0;while(J=J&&J.parentNode);return!1})})();let ft=0;const gt=V=>{for(const Tt of L||[])Tt.eventProcessor&&(V=Tt.eventProcessor(V));return x&&!B&&(V=x(V)),V};vt=(V,Tt)=>{const J=V;if(J.timestamp=uo(),!Jn[0]?.isFrozen()||J.type===Z.FullSnapshot||J.type===Z.IncrementalSnapshot&&J.data.source===K.Mutation||Jn.forEach((kt=>kt.unfreeze())),q)e?.(gt(J),Tt);else if(B){const kt={type:"rrweb",event:gt(J),origin:window.location.origin,isCheckout:Tt};window.parent.postMessage(kt,"*")}if(J.type===Z.FullSnapshot)Q=J,ft=0;else if(J.type===Z.IncrementalSnapshot){if(J.data.source===K.Mutation&&J.data.isAttachIframe)return;ft++;const kt=r&&ft>=r,it=n&&Q&&J.timestamp-Q.timestamp>n;(kt||it)&&Nt(!0)}};const nt=V=>{vt({type:Z.IncrementalSnapshot,data:{source:K.Mutation,...V}})},st=V=>vt({type:Z.IncrementalSnapshot,data:{source:K.Scroll,...V}}),Se=V=>vt({type:Z.IncrementalSnapshot,data:{source:K.CanvasMutation,...V}}),Dt=new Yg({mutationCb:nt,adoptedStyleSheetCb:V=>vt({type:Z.IncrementalSnapshot,data:{source:K.AdoptedStyleSheet,...V}})}),U=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Wg:new Hg({mirror:ae,mutationCb:nt,stylesheetManager:Dt,recordCrossOriginIframes:C,wrappedEmit:vt});for(const V of L||[])V.getMirror&&V.getMirror({nodeMirror:ae,crossOriginIframeMirror:U.crossOriginIframeMirror,crossOriginIframeStyleMirror:U.crossOriginIframeStyleMirror});const X=new Xg,wt=(function(V,Tt){try{return V?V(Tt):new Pu}catch{return console.warn("Unable to initialize CanvasManager"),new Pu}})(j,{mirror:ae,win:window,mutationCb:V=>vt({type:Z.IncrementalSnapshot,data:{source:K.CanvasMutation,...V}}),recordCanvas:I,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:T,sampling:_.canvas,dataURLOptions:b,errorHandler:k}),bt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Gg:new Vg({mutationCb:nt,scrollCb:st,bypassOptions:{onMutation:O,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:W,dataURLOptions:b,maskAttributeFn:S,maskTextFn:w,maskInputFn:v,recordCanvas:I,inlineImages:$,sampling:_,slimDOMOptions:tt,iframeManager:U,stylesheetManager:Dt,canvasManager:wt,keepIframeSrcFn:A,processedNodeManager:X,ignoreCSSAttributes:F},mirror:ae}),Nt=(V=!1)=>{if(!R)return;vt({type:Z.Meta,data:{href:window.location.href,width:op(),height:sp()}},V),Dt.reset(),bt.init(),Jn.forEach((J=>J.lock()));const Tt=(function(J,kt){const{mirror:it=new Xd,blockClass:sn="rr-block",blockSelector:Nf=null,unblockSelector:Ff=null,maskAllText:qf=!1,maskTextClass:$f="rr-mask",unmaskTextClass:jf=null,maskTextSelector:Uf=null,unmaskTextSelector:Bf=null,inlineStylesheet:zf=!0,inlineImages:Wf=!1,recordCanvas:Hf=!1,maskAllInputs:Lo=!1,maskAttributeFn:Gf,maskTextFn:Vf,maskInputFn:Kf,slimDOM:Tr=!1,dataURLOptions:Jf,preserveWhiteSpace:Yf,onSerialize:Xf,onIframeLoad:Qf,iframeLoadTimeout:Zf,onBlockedImageLoad:th,onStylesheetLoad:eh,stylesheetLoadTimeout:nh,keepIframeSrcFn:rh=(()=>!1),ignoreCSSAttributes:sh=new Set([])}=kt||{};return Kn(J,{doc:J,mirror:it,blockClass:sn,blockSelector:Nf,unblockSelector:Ff,maskAllText:qf,maskTextClass:$f,unmaskTextClass:jf,maskTextSelector:Uf,unmaskTextSelector:Bf,skipChild:!1,inlineStylesheet:zf,maskInputOptions:Lo===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:Lo===!1?{}:Lo,maskAttributeFn:Gf,maskTextFn:Vf,maskInputFn:Kf,slimDOMOptions:Tr===!0||Tr==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Tr==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Tr===!1?{}:Tr,dataURLOptions:Jf,inlineImages:Wf,recordCanvas:Hf,preserveWhiteSpace:Yf,onSerialize:Xf,onIframeLoad:Qf,iframeLoadTimeout:Zf,onBlockedImageLoad:th,onStylesheetLoad:eh,stylesheetLoadTimeout:nh,keepIframeSrcFn:rh,newlyAddedElement:!1,ignoreCSSAttributes:sh})})(document,{mirror:ae,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:W,maskAttributeFn:S,maskInputFn:v,maskTextFn:w,slimDOM:tt,dataURLOptions:b,recordCanvas:I,inlineImages:$,onSerialize:J=>{cp(J,ae)&&U.addIframe(J),up(J,ae)&&Dt.trackLinkElement(J),qi(J)&&bt.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,kt)=>{U.attachIframe(J,kt),J.contentWindow&&wt.addWindow(J.contentWindow),bt.observeAttachShadow(J)},onStylesheetLoad:(J,kt)=>{Dt.attachLinkElement(J,kt)},onBlockedImageLoad:(J,kt,{width:it,height:sn})=>{nt({adds:[],removes:[],texts:[],attributes:[{id:kt.id,attributes:{style:{width:`${it}px`,height:`${sn}px`}}}]})},keepIframeSrcFn:A,ignoreCSSAttributes:F});if(!Tt)return console.warn("Failed to snapshot the document");vt({type:Z.FullSnapshot,data:{node:Tt,initialOffset:rp(window)}}),Jn.forEach((J=>J.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Dt.adoptStyleSheets(document.adoptedStyleSheets,ae.getId(document))};lo=Nt;try{const V=[],Tt=kt=>ot(zg)({onMutation:O,mutationCb:nt,mousemoveCb:(it,sn)=>vt({type:Z.IncrementalSnapshot,data:{source:sn,positions:it}}),mouseInteractionCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.MouseInteraction,...it}}),scrollCb:st,viewportResizeCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.ViewportResize,...it}}),inputCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.Input,...it}}),mediaInteractionCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.MediaInteraction,...it}}),styleSheetRuleCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.StyleSheetRule,...it}}),styleDeclarationCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.StyleDeclaration,...it}}),canvasMutationCb:Se,fontCb:it=>vt({type:Z.IncrementalSnapshot,data:{source:K.Font,...it}}),selectionCb:it=>{vt({type:Z.IncrementalSnapshot,data:{source:K.Selection,...it}})},customElementCb:it=>{vt({type:Z.IncrementalSnapshot,data:{source:K.CustomElement,...it}})},blockClass:s,ignoreClass:c,ignoreSelector:a,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:W,inlineStylesheet:f,sampling:_,recordDOM:R,recordCanvas:I,inlineImages:$,userTriggeredOnInput:D,collectFonts:P,doc:kt,maskAttributeFn:S,maskInputFn:v,maskTextFn:w,keepIframeSrcFn:A,blockSelector:o,unblockSelector:i,slimDOMOptions:tt,dataURLOptions:b,mirror:ae,iframeManager:U,stylesheetManager:Dt,shadowDomManager:bt,processedNodeManager:X,canvasManager:wt,ignoreCSSAttributes:F,plugins:L?.filter((it=>it.observer))?.map((it=>({observer:it.observer,options:it.options,callback:sn=>vt({type:Z.Plugin,data:{plugin:it.name,payload:sn}})})))||[]},{});U.addLoadListener((kt=>{try{V.push(Tt(kt.contentDocument))}catch(it){console.warn(it)}}));const J=()=>{Nt(),V.push(Tt(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(V.push(qt("DOMContentLoaded",(()=>{vt({type:Z.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&J()}))),V.push(qt("load",(()=>{vt({type:Z.Load,data:{}}),M==="load"&&J()}),window))),()=>{V.forEach((kt=>kt())),X.destroy(),lo=void 0,Wr=void 0}}catch(V){console.warn(V)}}var Du,jn;Re.mirror=ae,Re.takeFullSnapshot=function(t){if(!lo)throw new Error("please take full snapshot after start recording");lo(t)},(jn=Du||(Du={}))[jn.NotStarted=0]="NotStarted",jn[jn.Running=1]="Running",jn[jn.Stopped=2]="Stopped";const Qg=3;function Da(t){return t>9999999999?t:1e3*t}function Zo(t){return t>9999999999?t/1e3:t}function ms(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(t.throttledAddEvent({type:Z.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:ue(e,10,1e3)}}),e.category==="console"))))}const Zg="button,a";function gp(t){return t.closest(Zg)||t}function Lu(t){const e=yp(t);return e&&e instanceof Element?gp(e):e}function yp(t){return(function(e){return typeof e=="object"&&!!e&&"target"in e})(t)?t.target:t}let Be;function ty(t){return Be||(Be=[],Bt(mt,"open",(function(e){return function(...n){if(Be)try{Be.forEach((r=>r()))}catch{}return e.apply(mt,n)}}))),Be.push(t),()=>{const e=Be?Be.indexOf(t):-1;e>-1&&Be.splice(e,1)}}const ey=new Set([K.Mutation,K.StyleSheetRule,K.StyleDeclaration,K.AdoptedStyleSheet,K.CanvasMutation,K.Selection,K.MediaInteraction]);class ny{constructor(e,n,r=ms){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=ty((()=>{this._lastMutation=Nu()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if((function(s,o){return!!(!ry.includes(s.tagName)||s.tagName==="INPUT"&&!["submit","button"].includes(s.getAttribute("type")||"")||s.tagName==="A"&&(s.hasAttribute("download")||s.hasAttribute("target")&&s.getAttribute("target")!=="_self")||o&&s.matches(o))})(n,this._ignoreSelector)||!(function(s){return!(!s.data||typeof s.data.nodeId!="number"||!s.timestamp)})(e))return;const r={timestamp:Zo(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some((s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1))||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Zo(e)}registerScroll(e=Date.now()){this._lastScroll=Zo(e)}registerClick(e){const n=gp(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach((n=>{n.clickCount++}))}_getClicks(e){return this._clicks.filter((n=>n.node===e))}_checkClicks(){const e=[],n=Nu();this._clicks.forEach((r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)}));for(const r of e){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:c}=e;if(o){const a=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),u=a<1e3*this._timeout?"mutation":"timeout",l={type:"default",message:c.message,timestamp:c.timestamp,category:"ui.slowClickDetected",data:{...c.data,url:mt.location.href,route:n.getCurrentRoute(),timeAfterClickMs:a,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,l)}else if(i>1){const a={type:"default",message:c.message,timestamp:c.timestamp,category:"ui.multiClick",data:{...c.data,url:mt.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,a)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=hs((()=>this._checkClicks()),1e3)}}const ry=["A","BUTTON","INPUT"];function Nu(){return Date.now()/1e3}function sy(t,e){try{if(!(function(r){return r.type===Qg})(e))return;const{source:n}=e.data;if(ey.has(n)&&t.registerMutation(e.timestamp),n===K.Scroll&&t.registerScroll(e.timestamp),(function(r){return r.data.source===K.MouseInteraction})(e)){const{type:r,id:s}=e.data,o=Re.mirror.getNode(s);o instanceof HTMLElement&&r===Ft.Click&&t.registerClick(o)}}catch{}}function ge(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var Ui=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(Ui||{});const oy=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function iy(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const n in t)if(oy.has(n)){let r=n;n!=="data-testid"&&n!=="data-test-id"||(r="testId"),e[r]=t[n]}return e}const ay=t=>e=>{if(!t.isEnabled())return;const n=(function(a){const{target:u,message:l}=(function(d){const p=d.name==="click";let h,f=null;try{f=p?Lu(d.event):yp(d.event),h=Ht(f,{maxStringLength:200})||"<unknown>"}catch{h="<unknown>"}return{target:f,message:h}})(a);return ge({category:`ui.${a.name}`,...vp(u,l)})})(e);if(!n)return;const r=e.name==="click",s=r?e.event:void 0;var o,i,c;!(r&&t.clickDetector&&s?.target)||s.altKey||s.metaKey||s.ctrlKey||s.shiftKey||(o=t.clickDetector,i=n,c=Lu(e.event),o.handleClick(i,c)),ms(t,n)};function vp(t,e){const n=Re.mirror.getId(t),r=n&&Re.mirror.getNode(n),s=r&&Re.mirror.getMeta(r),o=s&&(function(i){return i.type===Ui.Element})(s)?s:null;return{message:e,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map((i=>i.type===Ui.Text&&i.textContent)).filter(Boolean).map((i=>i.trim())).join(""),attributes:iy(o.attributes)}}:{}}}function cy(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=(function(r){const{metaKey:s,shiftKey:o,ctrlKey:i,altKey:c,key:a,target:u}=r;if(!u||(function(f){return f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.isContentEditable})(u)||!a)return null;const l=s||i||c,d=a.length===1;if(!l&&d)return null;const p=Ht(u,{maxStringLength:200})||"<unknown>",h=vp(u,p);return ge({category:"ui.keyDown",message:p,data:{...h.data,metaKey:s,shiftKey:o,ctrlKey:i,altKey:c,key:a}})})(e);n&&ms(t,n)}const uy={resource:function(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:c,responseStatus:a,transferSize:u}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:Gn(o),end:Gn(s),name:r,data:{size:u,statusCode:a,decodedBodySize:i,encodedBodySize:c}}},paint:function(t){const{duration:e,entryType:n,name:r,startTime:s}=t,o=Gn(s);return{type:n,name:r,start:o,end:o+e,data:void 0}},navigation:function(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:c,domContentLoadedEventEnd:a,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=t;return s===0?null:{type:`${e}.${m}`,start:Gn(h),end:Gn(o),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:c,domContentLoadedEventEnd:a,loadEventStart:l,loadEventEnd:d,domComplete:o,redirectCount:p}}}};function ti(t,e){return({metric:n})=>{e.replayPerformanceEntries.push(t(n))}}function ly(t){const e=uy[t.entryType];return e?e(t):null}function Gn(t){return((zt()||mt.performance.timeOrigin)+t)/1e3}function dy(t){const e=t.entries[t.entries.length-1];return La(t,"largest-contentful-paint",e?.element?[e.element]:void 0)}function py(t){return t.sources!==void 0}function fy(t){const e=[],n=[];for(const r of t.entries)if(py(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=Re.mirror.getId(o.node);i&&s.push(i)}e.push({value:r.value,nodeIds:s.length?s:void 0})}return La(t,"cumulative-layout-shift",n,e)}function hy(t){const e=t.entries[t.entries.length-1];return La(t,"interaction-to-next-paint",e?.target?[e.target]:void 0)}function La(t,e,n,r){const s=t.value,o=t.rating,i=Gn(s);return{type:"web-vital",name:e,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map((c=>Re.mirror.getId(c))):void 0,attributions:r}}}const H=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,my='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});',Fu=["log","warn","error"],Vs="[Replay] ";function ei(t,e="info"){Ee({category:"console",data:{logger:"replay"},level:e,message:`${Vs}${t}`},{level:e})}const G=(function(){let t=!1,e=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{t=!!r.captureExceptions,e=!!r.traceInternals}};return H?(Fu.forEach((r=>{n[r]=(...s)=>{N[r](Vs,...s),e&&ei(s.join(""),no(r))}})),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),N.error(Vs,r),t?ga(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):e&&ei(r,"error")},n.infoTick=(...r)=>{N.log(Vs,...r),e&&setTimeout((()=>ei(r[0])),0)}):Fu.forEach((r=>{n[r]=()=>{}})),n})();class Na extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class _p{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>Jd)throw new Na;this.events.push(e)}finish(){return new Promise((e=>{const n=this.events;this.clear(),e(JSON.stringify(n))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((n=>n.timestamp)).sort()[0];return e?Da(e):null}}class gy{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,n)=>{this._worker.addEventListener("message",(({data:r})=>{r.success?e():n()}),{once:!0}),this._worker.addEventListener("error",(r=>{n(r)}),{once:!0})}))),this._ensureReadyPromise}destroy(){H&&G.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise(((s,o)=>{const i=({data:c})=>{const a=c;if(a.method===e&&a.id===r){if(this._worker.removeEventListener("message",i),!a.success)return H&&G.error("Error in compression worker: ",a.response),void o(new Error("Error in compression worker"));s(a.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:e,arg:n})}))}_getAndIncrementId(){return this._id++}}class yy{constructor(e){this._worker=new gy(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=Da(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>Jd?Promise.reject(new Na):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{H&&G.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class vy{constructor(e){this._fallback=new _p,this._compression=new yy(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(H&&G.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of e)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){H&&G.exception(o,"Failed to add events when switching buffers.")}}}function _y({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=(function(r){try{const s=r||(function(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?(function(){const i=new Blob([my]);return URL.createObjectURL(i)})():""})();if(!s)return;H&&G.log("Using compression worker"+(r?` from ${r}`:""));const o=new Worker(s);return new vy(o)}catch(s){H&&G.exception(s,"Failed to create compression worker")}})(e);if(n)return n}return H&&G.log("Using simple buffer"),new _p}function Fa(){try{return"sessionStorage"in mt&&!!mt.sessionStorage}catch{return!1}}function by(t){(function(){if(Fa())try{mt.sessionStorage.removeItem(Ia)}catch{}})(),t.session=void 0}function bp(t){return t!==void 0&&Math.random()<t}function Co(t){if(Fa())try{mt.sessionStorage.setItem(Ia,JSON.stringify(t))}catch{}}function Sp(t){const e=Date.now();return{id:t.id||Yt(),started:t.started||e,lastActivity:t.lastActivity||e,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId,dirty:t.dirty||!1}}function qu({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=(function(i,c){return bp(i)?"session":!!c&&"buffer"})(t,e),o=Sp({sampled:s,previousSessionId:r});return n&&Co(o),o}function Bi(t,e,n=+new Date){return t===null||e===void 0||e<0||e!==0&&t+e<=n}function wp(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return Bi(t.started,e,r)||Bi(t.lastActivity,n,r)}function kp(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!!wp(t,{sessionIdleExpire:e,maxReplayDuration:n})&&(t.sampled!=="buffer"||t.segmentId!==0)}function ni({sessionIdleExpire:t,maxReplayDuration:e,previousSessionId:n},r){const s=r.stickySession&&(function(){if(!Fa())return null;try{const o=mt.sessionStorage.getItem(Ia);if(!o)return null;const i=JSON.parse(o);return H&&G.infoTick("Loading existing session"),Sp(i)}catch{return null}})();return s?kp(s,{sessionIdleExpire:t,maxReplayDuration:e})?(H&&G.infoTick("Session in sessionStorage is expired, creating new one..."),qu(r,{previousSessionId:s.id})):s:(H&&G.infoTick("Creating new session"),qu(r,{previousSessionId:n}))}function zi(t,e,n){return!!xp(t,e)&&(Ep(t,e,n),!0)}async function Ep(t,e,n){const{eventBuffer:r}=t;if(!r||r.waitForCheckout&&!n)return null;const s=t.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=(function(i,c){try{if(typeof c=="function"&&(function(a){return a.type===Z.Custom})(i))return c(i)}catch(a){return H&&G.exception(a,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return i})(e,t.getOptions().beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(o){const i=o&&o instanceof Na,c=i?"addEventSizeExceeded":"addEvent",a=rt();if(a){const u=i?"buffer_overflow":"internal_sdk_error";a.recordDroppedEvent(u,"replay")}if(i&&s)return r.clear(),r.waitForCheckout=!0,null;t.handleException(o),await t.stop({reason:c})}}function xp(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Da(e.timestamp);return!(n+t.timeouts.sessionIdlePause<Date.now())&&(!(n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration)||(H&&G.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function qa(t){return!t.type}function Wi(t){return t.type==="transaction"}function $u(t){return t.type==="feedback"}function Sy(t){return(e,n)=>{if(!t.isEnabled()||!qa(e)&&!Wi(e))return;const r=n.statusCode;!r||r<200||r>=300||(Wi(e)?(function(s,o){const i=s.getContext();o.contexts?.trace?.trace_id&&i.traceIds.size<100&&i.traceIds.add(o.contexts.trace.trace_id)})(t,e):(function(s,o){const i=s.getContext();if(o.event_id&&i.errorIds.size<100&&i.errorIds.add(o.event_id),s.recordingMode!=="buffer"||!o.tags||!o.tags.replayId)return;const{beforeErrorSampling:c}=s.getOptions();typeof c=="function"&&!c(o)||hs((async()=>{try{await s.sendBufferedReplayOrFlush()}catch(a){s.handleException(a)}}))})(t,e))}}function wy(t){return e=>{t.isEnabled()&&qa(e)&&(function(n,r){const s=r.exception?.values?.[0]?.value;typeof s=="string"&&(s.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||s.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&ms(n,ge({category:"replay.hydrate-error",data:{url:br()}}))})(t,e)}}function ky(t){const e=rt();e&&e.on("beforeAddBreadcrumb",(n=>(function(r,s){if(!r.isEnabled()||!ju(s))return;const o=(function(i){return!ju(i)||["fetch","xhr","sentry.event","sentry.transaction"].includes(i.category)||i.category.startsWith("ui.")?null:i.category==="console"?(function(c){const a=c.data?.arguments;if(!Array.isArray(a)||a.length===0)return ge(c);let u=!1;const l=a.map((d=>{if(!d)return d;if(typeof d=="string")return d.length>Cs?(u=!0,`${d.slice(0,Cs)}`):d;if(typeof d=="object")try{const p=ue(d,7);return JSON.stringify(p).length>Cs?(u=!0,`${JSON.stringify(p,null,2).slice(0,Cs)}`):p}catch{}return d}));return ge({...c,data:{...c.data,arguments:l,...u?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})})(i):ge(i)})(s);o&&ms(r,o)})(t,n)))}function ju(t){return!!t.category}function Tp(){const t=dt().getPropagationContext().dsc;t&&delete t.replay_id;const e=jt();e&&delete Fe(e).replay_id}function Ey(t){return Object.assign(((e,n)=>{if(!t.isEnabled()||t.isPaused())return e;if((function(s){return s.type==="replay_event"})(e))return delete e.breadcrumbs,e;if(!qa(e)&&!Wi(e)&&!$u(e))return e;if(!t.checkAndHandleExpiredSession())return Tp(),e;if($u(e))return t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),(function(s,o){s.triggerUserActivity(),s.addUpdate((()=>!o.timestamp||(s.throttledAddEvent({type:Z.Custom,timestamp:1e3*o.timestamp,data:{tag:"breadcrumb",payload:{timestamp:o.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:o.event_id}}}}),!1)))})(t,e),e;if((function(s,o){return!(s.type||!s.exception?.values?.length||!o.originalException?.__rrweb__)})(e,n)&&!t.getOptions()._experiments.captureExceptions)return H&&G.log("Ignoring error from rrweb internals",e),null;const r=(function(s,o){return s.recordingMode==="buffer"&&o.message!==Ra&&!(!o.exception||o.type)&&bp(s.getOptions().errorSampleRate)})(t,e);if((r||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),r&&t.recordingMode==="buffer"&&t.session?.sampled==="buffer"){const s=t.session;s.dirty=!0,t.getOptions().stickySession&&Co(s)}return e}),{id:"Replay"})}function po(t,e){return e.map((({type:n,start:r,end:s,name:o,data:i})=>{const c=t.throttledAddEvent({type:Z.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof c=="string"?Promise.resolve(null):c}))}function xy(t){return e=>{if(!t.isEnabled())return;const n=(function(r){const{from:s,to:o}=r,i=Date.now()/1e3;return{type:"navigation.push",start:i,end:i,name:o,data:{previous:s}}})(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate((()=>(po(t,[n]),!1))))}}function Cp(t,e){t.isEnabled()&&e!==null&&((function(n,r){return(!H||!n.getOptions()._experiments.traceInternals)&&em(r,rt())})(t,e.name)||t.addUpdate((()=>(po(t,[e]),!0))))}function fo(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Hd(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function Ip(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function ho(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function Rp(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:c,response:a}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:c,response:a}}}function Hr(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function cn(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:o}=(function(i){if(!i||typeof i!="string")return{body:i};const c=i.length>vu,a=(function(u){const l=u[0],d=u[u.length-1];return l==="["&&d==="]"||l==="{"&&d==="}"})(i);if(c){const u=i.slice(0,vu);return a?{body:u,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${u}`,warnings:["TEXT_TRUNCATED"]}}if(a)try{return{body:JSON.parse(i)}}catch{}return{body:i}})(n);return r.body=s,o?.length&&(r._meta={warnings:o}),r}function Hi(t,e){return Object.entries(t).reduce(((n,[r,s])=>{const o=r.toLowerCase();return e.includes(o)&&t[r]&&(n[o]=s),n}),{})}function mo(t,e){const n=(function(r,s=mt.document.baseURI){if(r.startsWith("http://")||r.startsWith("https://")||r.startsWith(mt.location.origin))return r;const o=new URL(r,s);if(o.origin!==new URL(s).origin)return r;const i=o.href;return!r.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i})(t);return Ce(n,e)}async function Ty(t,e,n){try{const r=await(async function(o,i,c){const a=Date.now(),{startTimestamp:u=a,endTimestamp:l=a}=i,{url:d,method:p,status_code:h=0,request_body_size:f,response_body_size:m}=o.data,g=mo(d,c.networkDetailAllowUrls)&&!mo(d,c.networkDetailDenyUrls),y=g?(function({networkCaptureBodies:v,networkRequestHeaders:w},T,x){const _=T?(function(C,M){return C.length===1&&typeof C[0]!="string"?Uu(C[0],M):C.length===2?Uu(C[1],M):{}})(T,w):{};if(!v)return cn(_,x,void 0);const b=Vd(T),[E,R]=Gd(b,G),I=cn(_,x,E);return R?ho(I,R):I})(c,i.input,f):Hr(f),S=await(async function(v,{networkCaptureBodies:w,networkResponseHeaders:T},x,_){if(!v&&_!==void 0)return Hr(_);const b=x?Mp(x.headers,T):{};if(!x||!w&&_!==void 0)return cn(b,_,void 0);const[E,R]=await(async function(C){const M=(function(D){try{return D.clone()}catch(P){H&&G.exception(P,"Failed to clone response body")}})(C);if(!M)return[void 0,"BODY_PARSE_ERROR"];try{return[await(function(P){return new Promise((($,L)=>{const A=hs((()=>L(new Error("Timeout while trying to read response body"))),500);(async function(F){return await F.text()})(P).then((F=>$(F)),(F=>L(F))).finally((()=>clearTimeout(A)))}))})(M)]}catch(D){return D instanceof Error&&D.message.indexOf("Timeout")>-1?(H&&G.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(H&&G.exception(D,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}})(x),I=(function(C,{networkCaptureBodies:M,responseBodySize:D,captureDetails:P,headers:$}){try{const L=C?.length&&D===void 0?fo(C):D;return P?cn($,L,M?C:void 0):Hr(L)}catch(L){return H&&G.exception(L,"Failed to serialize response body"),cn($,D,void 0)}})(E,{networkCaptureBodies:w,responseBodySize:_,captureDetails:v,headers:b});return R?ho(I,R):I})(g,c,i.response,m);return{startTimestamp:u,endTimestamp:l,url:d,method:p,statusCode:h,request:y,response:S}})(t,e,n),s=Rp("resource.fetch",r);Cp(n.replay,s)}catch(r){H&&G.exception(r,"Failed to capture fetch breadcrumb")}}function Mp(t,e){const n={};return e.forEach((r=>{t.get(r)&&(n[r]=t.get(r))})),n}function Uu(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?Mp(n,e):Array.isArray(n)?{}:Hi(n,e):{}}async function Cy(t,e,n){try{const r=(function(o,i,c){const a=Date.now(),{startTimestamp:u=a,endTimestamp:l=a,input:d,xhr:p}=i,{url:h,method:f,status_code:m=0,request_body_size:g,response_body_size:y}=o.data;if(!h)return null;if(!p||!mo(h,c.networkDetailAllowUrls)||mo(h,c.networkDetailDenyUrls))return{startTimestamp:u,endTimestamp:l,url:h,method:f,statusCode:m,request:Hr(g),response:Hr(y)};const S=p[ln],v=S?Hi(S.request_headers,c.networkRequestHeaders):{},w=Hi(Kd(p),c.networkResponseHeaders),[T,x]=c.networkCaptureBodies?Gd(d,G):[void 0],[_,b]=c.networkCaptureBodies?(function(I){const C=[];try{return[I.responseText]}catch(M){C.push(M)}try{return(function(M,D){try{if(typeof M=="string")return[M];if(M instanceof Document)return[M.body.outerHTML];if(D==="json"&&M&&typeof M=="object")return[JSON.stringify(M)];if(!M)return[void 0]}catch(P){return H&&G.exception(P,"Failed to serialize body",M),[void 0,"BODY_PARSE_ERROR"]}return H&&G.log("Skipping network body because of body type",M),[void 0,"UNPARSEABLE_BODY_TYPE"]})(I.response,I.responseType)}catch(M){C.push(M)}return H&&G.warn("Failed to get xhr response body",...C),[void 0]})(p):[void 0],E=cn(v,g,T),R=cn(w,y,_);return{startTimestamp:u,endTimestamp:l,url:h,method:f,statusCode:m,request:x?ho(E,x):E,response:b?ho(R,b):R}})(t,e,n),s=Rp("resource.xhr",r);Cp(n.replay,s)}catch(r){H&&G.exception(r,"Failed to capture xhr breadcrumb")}}function Iy(t,e){const{xhr:n,input:r}=e;if(!n)return;const s=fo(r),o=n.getResponseHeader("content-length")?Ip(n.getResponseHeader("content-length")):(function(i,c){try{return fo(c==="json"&&i&&typeof i=="object"?JSON.stringify(i):i)}catch{return}})(n.response,n.responseType);s!==void 0&&(t.data.request_body_size=s),o!==void 0&&(t.data.response_body_size=o)}function Ry(t){const e=rt();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=t.getOptions(),c={replay:t,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};e&&e.on("beforeAddBreadcrumb",((a,u)=>(function(l,d,p){if(d.data)try{(function(h){return h.category==="xhr"})(d)&&(function(h){return h?.xhr})(p)&&(Iy(d,p),Cy(d,p,l)),(function(h){return h.category==="fetch"})(d)&&(function(h){return h?.response})(p)&&((function(h,f){const{input:m,response:g}=f,y=fo(m?Vd(m):void 0),S=g?Ip(g.headers.get("content-length")):void 0;y!==void 0&&(h.data.request_body_size=y),S!==void 0&&(h.data.response_body_size=S)})(d,p),Ty(d,p,l))}catch(h){H&&G.exception(h,"Error when enriching network breadcrumb")}})(c,a,u)))}catch{}}function My(t){const e=rt();Bd(ay(t)),xo(xy(t)),ky(t),Ry(t);const n=Ey(t);var r;r=n,oe().addEventProcessor(r),e&&(e.on("beforeSendEvent",wy(t)),e.on("afterSendEvent",Sy(t)),e.on("createDsc",(s=>{const o=t.getSessionId();o&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(s.replay_id=o)})),e.on("spanStart",(s=>{t.lastActiveSpan=s})),e.on("spanEnd",(s=>{t.lastActiveSpan=s})),e.on("beforeSendFeedback",(async(s,o)=>{const i=t.getSessionId();o?.includeReplay&&t.isEnabled()&&i&&s.contexts?.feedback&&(s.contexts.feedback.source==="api"&&await t.sendBufferedReplayOrFlush(),s.contexts.feedback.replay_id=i)})),e.on("openFeedbackWidget",(async()=>{await t.sendBufferedReplayOrFlush()})))}function Ay(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Oy(t,e,n){return(function(r,s,o){let i,c,a;const u=o?.maxWait?Math.max(o.maxWait,s):0,l=o?.setTimeoutImpl||setTimeout;function d(){return p(),i=r(),i}function p(){c!==void 0&&clearTimeout(c),a!==void 0&&clearTimeout(a),c=a=void 0}function h(){return c&&clearTimeout(c),c=l(d,s),u&&a===void 0&&(a=l(d,u)),i}return h.cancel=p,h.flush=function(){return c!==void 0||a!==void 0?d():i},h})(t,e,{...n,setTimeoutImpl:hs})}const Os=et.navigator;function Py(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession())return void(H&&G.warn("Received replay event after session expired."));const s=r||!e;e=!0,t.clickDetector&&sy(t.clickDetector,n),t.addUpdate((()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!zi(t,n,s))return!0;if(!s)return!1;const o=t.session;if((function(i,c){!c||!i.session||i.session.segmentId!==0||zi(i,(function(a){const u=a.getOptions();return{type:Z.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:a.isRecordingCanvas(),sessionSampleRate:u.sessionSampleRate,errorSampleRate:u.errorSampleRate,useCompressionOption:u.useCompression,blockAllMedia:u.blockAllMedia,maskAllText:u.maskAllText,maskAllInputs:u.maskAllInputs,useCompression:!!a.eventBuffer&&a.eventBuffer.type==="worker",networkDetailHasUrls:u.networkDetailAllowUrls.length>0,networkCaptureBodies:u.networkCaptureBodies,networkRequestHasHeaders:u.networkRequestHeaders.length>0,networkResponseHasHeaders:u.networkResponseHeaders.length>0}}}})(i),!1)})(t,s),t.recordingMode==="buffer"&&o&&t.eventBuffer&&!o.dirty){const i=t.eventBuffer.getEarliestTimestamp();i&&(H&&G.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,t.getOptions().stickySession&&Co(o))}return o?.previousSessionId||t.recordingMode==="session"&&t.flush(),!0}))}}async function Dy({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=(function({recordingData:w,headers:T}){let x;const _=`${JSON.stringify(T)}
`;if(typeof w=="string")x=`${_}${w}`;else{const b=new TextEncoder().encode(_);x=new Uint8Array(b.length+w.length),x.set(b),x.set(w,b.length)}return x})({recordingData:t,headers:{segment_id:n}}),{urls:c,errorIds:a,traceIds:u,initialTimestamp:l}=r,d=rt(),p=dt(),h=d?.getTransport(),f=d?.getDsn();if(!(d&&h&&f&&o.sampled))return Promise.resolve({});const m={type:kg,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:a,trace_ids:u,urls:c,replay_id:e,segment_id:n,replay_type:o.sampled},g=await(async function({client:w,scope:T,replayId:x,event:_}){const b={event_id:x,integrations:typeof w._integrations!="object"||w._integrations===null||Array.isArray(w._integrations)?void 0:Object.keys(w._integrations)};w.emit("preprocessEvent",_,b);const E=await ld(w.getOptions(),_,b,T,w,oe());if(!E)return null;w.emit("postprocessEvent",E,b),E.platform=E.platform||"javascript";const R=w.getSdkMetadata(),{name:I,version:C,settings:M}=R?.sdk||{};return E.sdk={...E.sdk,name:I||"sentry.javascript.unknown",version:C||"0.0.0",settings:M},E})({scope:p,client:d,replayId:e,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay"),H&&G.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;const y=(function(w,T,x,_){return Ve(sd(w,wi(w),_,x),[[{type:"replay_event"},w],[{type:"replay_recording",length:typeof T=="string"?new TextEncoder().encode(T).length:T.length},T]])})(g,i,f,d.getOptions().tunnel);let S;try{S=await h.send(y)}catch(w){const T=new Error(Ra);try{T.cause=w}catch{}throw T}if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new Ap(S.statusCode);const v=gd({},S);if(md(v,"replay"))throw new $a(v);return S}class Ap extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class $a extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Op(t,e={count:0,interval:5e3}){const{recordingData:n,onError:r}=t;var s,o;if(n.length)try{return await Dy(t),!0}catch(i){if(i instanceof Ap||i instanceof $a)throw i;if(s="Replays",o={_retryCount:e.count},oe().setContext(s,o),r&&r(i),e.count>=3){const c=new Error(`${Ra} - max retries exceeded`);try{c.cause=i}catch{}throw c}return e.interval*=++e.count,new Promise(((c,a)=>{hs((async()=>{try{await Op(t,e),c(!0)}catch(u){a(u)}}),e.interval)}))}}const Pp="__THROTTLED";function Ly(t,e,n){const r=new Map;let s=!1;return(...o)=>{const i=Math.floor(Date.now()/1e3);if((a=>{const u=a-n;r.forEach(((l,d)=>{d<u&&r.delete(d)}))})(i),[...r.values()].reduce(((a,u)=>a+u),0)>=e){const a=s;return s=!0,a?"__SKIPPED":Pp}s=!1;const c=r.get(i)||0;return r.set(i,c+1),t(...o)}}class Ny{constructor({options:e,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=Oy((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Ly(((i,c)=>(function(a,u,l){return xp(a,u)?Ep(a,u,l):Promise.resolve(null)})(this,i,c)),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(3e3,r),timeout:r,scrollTimeout:300,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new ny(this,o)),H){const i=e._experiments;G.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{mt.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=ge({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=ge({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{cy(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){H&&G.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;this._requiresManualStart=s,s||(this._initializeSessionForSampling(e),this.session?this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",H&&G.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):H&&G.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&this.recordingMode==="session")return void(H&&G.log("Recording is already in progress"));if(this._isEnabled&&this.recordingMode==="buffer")return void(H&&G.log("Buffering is in progress, call `flush()` to save the replay"));H&&G.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=ni({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(H&&G.log("Buffering is in progress, call `flush()` to save the replay"));H&&G.infoTick("Starting replay in buffer mode");const e=ni({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Re({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Py(this),.../iPhone|iPad|iPod/i.test(Os?.userAgent??"")||/Macintosh/i.test(Os?.userAgent??"")&&Os?.maxTouchPoints&&Os?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{H&&G.log("Stopping Replay"+(n?` triggered by ${n}`:"")),Tp(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,by(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),H&&G.log("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),H&&G.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();H&&G.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();e&&r&&this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode!=="buffer"&&this._isEnabled&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(e){if(!e||this.session?.sampled!==!1)return this.session?.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Bi(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"))return!!this._checkSession();this.pause()}setInitialState(){const e=`${mt.location.pathname}${mt.location.hash}${mt.location.search}`,n=`${mt.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===Pp){const s=ge({category:"replay.throttled"});this.addUpdate((()=>!zi(this,{type:5,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}})))}return r}getCurrentRoute(){const e=this.lastActiveSpan||jt(),n=e&&Lt(e),r=(n&&ct(n).data||{})[de];if(n&&r&&["route","custom"].includes(r))return ct(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=_y({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=ni({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return!kp(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{mt.document.addEventListener("visibilitychange",this._handleVisibilityChange),mt.addEventListener("blur",this._handleWindowBlur),mt.addEventListener("focus",this._handleWindowFocus),mt.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(My(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=(function(e){function n(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function r({entries:o}){o.forEach(n)}const s=[];return["navigation","paint","resource"].forEach((o=>{s.push(Sn(o,r))})),s.push(Ta(ti(dy,e)),xa(ti(fy,e)),Nd(ti(hy,e))),()=>{s.forEach((o=>o()))}})(this)}_removeListeners(){try{mt.document.removeEventListener("visibilitychange",this._handleVisibilityChange),mt.removeEventListener("blur",this._handleWindowBlur),mt.removeEventListener("focus",this._handleWindowFocus),mt.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){this.session&&(wp(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush()))}_doChangeToForegroundTasks(e){this.session&&(this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):H&&G.log("Document has become active, but session has expired"))}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Z.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(n=this.performanceEntries,n.map(ly).filter(Boolean)).concat(this.replayPerformanceEntries);var n;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;e=e.filter((s=>s.start>=r))}return Promise.all(po(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||this._requiresManualStart||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer?.hasEvents&&(await(async function(n){try{return Promise.all(po(n,[Ay(mt.performance.memory)]))}catch{return[]}})(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Op({replayId:e,recordingData:o,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:i=>this.handleException(i)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=rt();if(r){const s=n instanceof $a?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}else H&&G.error("No session or eventBuffer found to flush.")}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(H&&G.error("Attempting to finish replay event after session expired."));if(!this.session)return;const n=this.session.started,r=Date.now()-n;this._debouncedFlush.cancel();const s=r<this._options.minReplayDuration,o=r>this._options.maxReplayDuration+5e3;if(s||o)return H&&G.log(`Session duration (${Math.floor(r/1e3)}s) is too ${s?"short":"long"}, not sending replay.`),void(s&&this._debouncedFlush());const i=this.eventBuffer;i&&this.session.segmentId===0&&!i.hasCheckout&&H&&G.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(a){this.handleException(a)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Co(this.session)}_onMutationHandler(e){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&e.some((i=>{const c=(function(u){if(!u)return null;try{return u.nodeType===u.ELEMENT_NODE?u:u.parentElement}catch{return null}})(i.target),a=n.join(",");return c?.matches(a)})))return!1;const r=e.length,s=this._options.mutationLimit,o=s&&r>s;if(r>this._options.mutationBreadcrumbLimit||o){const i=ge({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(i)}return!o||(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1)}}function Ir(t,e){return[...t,...e].join(",")}const Bu='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Fy=["content-length","content-type","accept"],qy=Symbol.for("sentry__originalRequestBody");let zu=!1,Wu=!1;class $y{constructor({flushMinDelay:e=5e3,flushMaxDelay:n=5500,minReplayDuration:r=4999,maxReplayDuration:s=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:c,_experiments:a={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:h=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:S=!0,networkRequestHeaders:v=[],networkResponseHeaders:w=[],mask:T=[],maskAttributes:x=["title","placeholder","aria-label"],unmask:_=[],block:b=[],unblock:E=[],ignore:R=[],maskFn:I,beforeAddRecordingEvent:C,beforeErrorSampling:M,onError:D,attachRawBodyFromRequest:P=!1}={}){this.name="Replay";const $=(function({mask:L,unmask:A,block:F,unblock:k,ignore:O}){return{maskTextSelector:Ir(L,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Ir(A,[]),blockSelector:Ir(F,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:Ir(k,[]),ignoreSelector:Ir(O,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}})({mask:T,unmask:_,block:b,unblock:E,ignore:R});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(L,A,F)=>(function({el:k,key:O,maskAttributes:j,maskAllText:q,privacyOptions:B,value:W}){return q?B.unmaskTextSelector&&k.matches(B.unmaskTextSelector)?W:j.includes(O)||O==="value"&&k.tagName==="INPUT"&&["submit","button"].includes(k.getAttribute("type")||"")?W.replace(/[\S]/g,"*"):W:W})({maskAttributes:x,maskAllText:u,privacyOptions:$,key:L,value:A,el:F}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:L=>{try{L.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!a.recordCrossOriginIframes},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,5e4),maxReplayDuration:Math.min(s,Eg),stickySession:o,useCompression:i,workerUrl:c,blockAllMedia:d,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:h,slowClickTimeout:f,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:S,networkRequestHeaders:Hu(v),networkResponseHeaders:Hu(w),beforeAddRecordingEvent:C,beforeErrorSampling:M,onError:D,attachRawBodyFromRequest:P,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Bu}`:Bu,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&Ci())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return zu}set _isInitialized(e){zu=e}afterAllSetup(e){Ci()&&!this._replay&&(this._initialOptions.attachRawBodyFromRequest&&(function(){if(typeof Request>"u"||Wu)return;const n=Request;try{const r=function(s,o){const i=new n(s,o);return o?.body!=null&&(i[qy]=o.body),i};r.prototype=n.prototype,et.Request=r,Wu=!0}catch{}})(),this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(e){if(this._replay?.isEnabled())return this._replay.getSessionId(e)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const n=(function(r,s){const o=s.getOptions(),i={sessionSampleRate:0,errorSampleRate:0,...r},c=Cn(o.replaysSessionSampleRate),a=Cn(o.replaysOnErrorSampleRate);return c==null&&a==null&&On((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")})),c!=null&&(i.sessionSampleRate=c),a!=null&&(i.errorSampleRate=a),i})(this._initialOptions,e);this._replay=new Ny({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const n=e.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Hu(t){return[...Fy,...t.map((e=>e.toLowerCase()))]}function Gu(t){try{return new URL(t,at.location.origin).href}catch{return}}function Vu(t){try{return new Headers(t)}catch{return}}const Ku=new WeakMap,ri=new Map,Dp={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function jy(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:c,onRequestSpanStart:a,onRequestSpanEnd:u}={...Dp,...e},l=typeof o=="function"?o:f=>!0,d=f=>(function(m,g){const y=br();if(y){let S,v;try{S=new URL(m,y),v=new URL(y).origin}catch{return!1}const w=S.origin===v;return g?Ce(S.toString(),g)||w&&Ce(S.pathname,g):w}{const S=!!m.match(/^\/(?!\/)/);return g?Ce(m,g):S}})(f,c),p={},h=t.getOptions().propagateTraceparent;n&&(t.addEventProcessor((f=>(f.type==="transaction"&&f.spans&&f.spans.forEach((m=>{if(m.op==="http.client"){const g=ri.get(m.span_id);g&&(m.timestamp=g/1e3,ri.delete(m.span_id))}})),f))),s&&(function(f){const m="fetch-body-resolved";nn(m,f),rn(m,(()=>Td(vm)))})((f=>{if(f.response){const m=Ku.get(f.response);m&&f.endTimestamp&&ri.set(m,f.endTimestamp)}})),xd((f=>{const m=mm(f,l,d,p,{propagateTraceparent:h,onRequestSpanEnd:u});if(f.response&&f.fetchData.__span&&Ku.set(f.response,f.fetchData.__span),m){const g=Gu(f.fetchData.url),y=g?tr(g).host:void 0;m.setAttributes({"http.url":g,"server.address":y}),i&&Ju(m),a?.(m,{headers:f.headers})}}))),r&&Wd((f=>{const m=(function(g,y,S,v,w,T){const x=g.xhr,_=x?.[ln];if(!x||x.__sentry_own_request__||!_)return;const{url:b,method:E}=_,R=pe()&&y(b);if(g.endTimestamp&&R){const A=x.__sentry_xhr_span_id__;if(!A)return;const F=v[A];return void(F&&_.status_code!==void 0&&(Vl(F,_.status_code),F.end(),T?.(F,{headers:Vu(Kd(x)),error:g.error}),delete v[A]))}const I=Gu(b),C=tr(I||b),M=($=b,$.split(/[?#]/,1)[0]),D=!!jt(),P=R&&D?Ze({name:`${E} ${M}`,attributes:{url:b,type:"xhr","http.method":E,"http.url":I,"server.address":C?.host,[xt]:"auto.http.browser",[Ne]:"http.client",...C?.search&&{"http.query":C?.search},...C?.hash&&{"http.fragment":C?.hash}}}):new Qe;var $;x.__sentry_xhr_span_id__=P.spanContext().spanId,v[x.__sentry_xhr_span_id__]=P,S(b)&&(function(A,F,k){const{"sentry-trace":O,baggage:j,traceparent:q}=kd({span:F,propagateTraceparent:k});O&&(function(B,W,tt,Q){const ft=B.__sentry_xhr_v3__?.request_headers;if(!(ft?.["sentry-trace"]||!B.setRequestHeader))try{if(B.setRequestHeader("sentry-trace",W),Q&&!ft?.traceparent&&B.setRequestHeader("traceparent",Q),tt){const gt=ft?.baggage;gt&&gt.split(",").some((nt=>nt.trim().startsWith("sentry-")))||B.setRequestHeader("baggage",tt)}}catch{}})(A,O,j,q)})(x,pe()&&D?P:void 0,w);const L=rt();return L&&L.emit("beforeOutgoingRequestSpan",P,g),P})(f,l,d,p,h,u);m&&(i&&Ju(m),a?.(m,{headers:Vu(f.xhr.__sentry_xhr_v3__?.request_headers)}))}))}function Ju(t){const{url:e}=ct(t).data;if(!e||typeof e!="string")return;const n=Sn("resource",(({entries:r})=>{r.forEach((s=>{(function(o){return o.entryType==="resource"&&"initiatorType"in o&&typeof o.nextHopProtocol=="string"&&(o.initiatorType==="fetch"||o.initiatorType==="xmlhttprequest")})(s)&&s.name.endsWith(e)&&(t.setAttributes(Ud(s)),setTimeout(n))}))}))}const Uy=3600,Yu="sentry_previous_trace",By="sentry.previous_trace";function zy(t,{linkPreviousTrace:e,consistentTraceSampling:n}){const r=e==="session-storage";let s=r?(function(){try{const i=at.sessionStorage?.getItem(Yu);return JSON.parse(i)}catch{return}})():void 0;t.on("spanStart",(i=>{if(Lt(i)!==i)return;const c=dt().getPropagationContext();s=(function(a,u,l){const d=ct(u);function p(){try{return Number(l.dsc?.sample_rate)??Number(d.data?.[ca])}catch{return 0}}const h={spanContext:u.spanContext(),startTimestamp:d.start_timestamp,sampleRate:p(),sampleRand:l.sampleRand};if(!a)return h;const f=a.spanContext;return f.traceId===d.trace_id?a:(Date.now()/1e3-a.startTimestamp<=Uy&&(ne&&N.log(`Adding previous_trace \`${JSON.stringify(f)}\` link to span \`${JSON.stringify({op:d.op,...u.spanContext()})}\``),u.addLink({context:f,attributes:{[gh]:"previous_trace"}}),u.setAttribute(By,`${f.traceId}-${f.spanId}-${si(f)?1:0}`)),h)})(s,i,c),r&&(function(a){try{at.sessionStorage.setItem(Yu,JSON.stringify(a))}catch(u){ne&&N.warn("Could not store previous trace in sessionStorage",u)}})(s)}));let o=!0;n&&t.on("beforeSampling",(i=>{if(!s)return;const c=dt(),a=c.getPropagationContext();o&&a.parentSpanId?o=!1:(c.setPropagationContext({...a,dsc:{...a.dsc,sample_rate:String(s.sampleRate),sampled:String(si(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=si(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[Gl]:s.sampleRate})}))}function si(t){return t.traceFlags===1}const Wy={...$s,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Dp},Hy=(t={})=>{const e={name:void 0,source:void 0},n=at.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:c,enableStandaloneClsSpans:a,enableStandaloneLcpSpans:u},beforeStartSpan:l,idleTimeout:d,finalTimeout:p,childSpanTimeout:h,markBackgroundSpan:f,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:S,enableHTTPTimings:v,ignoreResourceSpans:w,ignorePerformanceApiSpans:T,instrumentPageLoad:x,instrumentNavigation:_,detectRedirects:b,linkPreviousTrace:E,consistentTraceSampling:R,enableReportPageLoaded:I,onRequestSpanStart:C,onRequestSpanEnd:M}={...Wy,...t};let D,P,$;function L(A,F,k=!0){const O=F.op==="pageload",j=F.name,q=l?l(F):F,B=q.attributes||{};if(j!==q.name&&(B[de]="custom",q.attributes=B),!k){const Q=Tn();return void Ze({...q,startTime:Q}).end(Q)}e.name=q.name,e.source=B[de];const W=Ic(q,{idleTimeout:d,finalTimeout:p,childSpanTimeout:h,disableAutoFinish:O,beforeSpanEnd:Q=>{D?.(),Vm(Q,{recordClsOnPageloadSpan:!a,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:w,ignorePerformanceApiSpans:T}),Qu(A,void 0);const ft=dt(),gt=ft.getPropagationContext();ft.setPropagationContext({...gt,traceId:W.spanContext().traceId,sampled:Ge(W),dsc:Fe(Q)}),O&&($=void 0)},trimIdleSpanEndTimestamp:!I});function tt(){n&&["interactive","complete"].includes(n.readyState)&&A.emit("idleSpanEnableAutoFinish",W)}O&&I&&($=W),Qu(A,W),O&&!I&&n&&(n.addEventListener("readystatechange",(()=>{tt()})),tt())}return{name:"BrowserTracing",setup(A){if((function(){function k(){const O=jt(),j=O&&Lt(O);if(j){const q="internal_error";z&&N.log(`[Tracing] Root span: ${q} -> Global error occurred`),j.setStatus({code:Et,message:q})}}bc||(k.tag="sentry_tracingErrorCallback",bc=!0,Nl(k),Fl(k))})(),D=Gm({recordClsStandaloneSpans:a||!1,recordLcpStandaloneSpans:u||!1,client:A}),r&&tg(),s&&fs()&&zt()&&Sn("element",Km),i&&et.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((k=>{const O=jt();if(O)for(const j of k.getEntries()){if(!j.scripts[0])continue;const q=_t(zt()+j.startTime),{start_timestamp:B,op:W}=ct(O);if(W==="navigation"&&B&&q<B)continue;const tt=_t(j.duration),Q={[xt]:"auto.ui.browser.metrics"},ft=j.scripts[0],{invoker:gt,invokerType:nt,sourceURL:st,sourceFunctionName:Se,sourceCharPosition:Dt}=ft;Q["browser.script.invoker"]=gt,Q["browser.script.invoker_type"]=nt,st&&(Q["code.filepath"]=st),Se&&(Q["code.function"]=Se),Dt!==-1&&(Q["browser.script.source_char_position"]=Dt),He(O,q,q+tt,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:Q})}})).observe({type:"long-animation-frame",buffered:!0}):o&&Sn("longtask",(({entries:k})=>{const O=jt();if(!O)return;const{op:j,start_timestamp:q}=ct(O);for(const B of k){const W=_t(zt()+B.startTime),tt=_t(B.duration);j==="navigation"&&q&&W<q||He(O,W,W+tt,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[xt]:"auto.ui.browser.metrics"}})}})),c&&Sn("event",(({entries:k})=>{const O=jt();if(O){for(const j of k)if(j.name==="click"){const q=_t(zt()+j.startTime),B=_t(j.duration),W={name:Ht(j.target),op:`ui.interaction.${j.name}`,startTime:q,attributes:{[xt]:"auto.ui.browser.metrics"}},tt=Ul(j.target);tt&&(W.attributes["ui.component_name"]=tt),He(O,q,q+B,W)}}})),b&&n){const k=()=>{P=Ct()};addEventListener("click",k,{capture:!0}),addEventListener("keydown",k,{capture:!0,passive:!0})}function F(){const k=Rr(A);k&&!ct(k).timestamp&&(ne&&N.log(`[Tracing] Finishing current active span with op: ${ct(k).op}`),k.setAttribute($r,"cancelled"),k.end())}A.on("startNavigationSpan",((k,O)=>{if(rt()!==A)return;if(O?.isRedirect)return ne&&N.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),void L(A,{op:"navigation.redirect",...k},!1);P=void 0,F(),oe().setPropagationContext({traceId:Le(),sampleRand:Math.random(),propagationSpanId:pe()?void 0:Ie()});const j=dt();j.setPropagationContext({traceId:Le(),sampleRand:Math.random(),propagationSpanId:pe()?void 0:Ie()}),j.setSDKProcessingMetadata({normalizedRequest:void 0}),L(A,{op:"navigation",...k,parentSpan:null,forceTransaction:!0})})),A.on("startPageLoadSpan",((k,O={})=>{if(rt()!==A)return;F();const j=Ch(O.sentryTrace||Xu("sentry-trace"),O.baggage||Xu("baggage")),q=dt();q.setPropagationContext(j),pe()||(q.getPropagationContext().propagationSpanId=Ie()),q.setSDKProcessingMetadata({normalizedRequest:Ri()}),L(A,{op:"pageload",...k})})),A.on("endPageloadSpan",(()=>{I&&$&&($.setAttribute($r,"reportPageLoaded"),$.end())}))},afterAllSetup(A){let F=br();if(E!=="off"&&zy(A,{linkPreviousTrace:E,consistentTraceSampling:R}),at.location){if(x){const k=zt();(function(O,j,q){O.emit("startPageLoadSpan",j,q),dt().setTransactionName(j.name);const B=Rr(O);B&&O.emit("afterStartPageLoadSpan",B)})(A,{name:at.location.pathname,startTime:k?k/1e3:void 0,attributes:{[de]:"url",[xt]:"auto.pageload.browser"}})}_&&xo((({to:k,from:O})=>{if(O===void 0&&F?.indexOf(k)!==-1)return void(F=void 0);F=void 0;const j=_a(k),q=Rr(A),B=q&&b&&(function(W,tt){const Q=ct(W),ft=Tn(),gt=Q.start_timestamp;return!(ft-gt>Zu||tt&&ft-tt<=Zu)})(q,P);(function(W,tt,Q){const{url:ft,isRedirect:gt}=Q||{};W.emit("beforeStartNavigationSpan",tt,{isRedirect:gt}),W.emit("startNavigationSpan",tt,{isRedirect:gt});const nt=dt();nt.setTransactionName(tt.name),ft&&!gt&&nt.setSDKProcessingMetadata({normalizedRequest:{...Ri(),url:ft}}),Rr(W)})(A,{name:j?.pathname||at.location.pathname,attributes:{[de]:"url",[xt]:"auto.navigation.browser"}},{url:k,isRedirect:B})}))}f&&(at.document?at.document.addEventListener("visibilitychange",(()=>{const k=jt();if(!k)return;const O=Lt(k);if(at.document.hidden&&O){const j="cancelled",{op:q,status:B}=ct(O);ne&&N.log(`[Tracing] Transaction: ${j} -> since tab moved to the background, op: ${q}`),B||O.setStatus({code:Et,message:j}),O.setAttribute("sentry.cancellation_reason","document.hidden"),O.end()}})):ne&&N.warn("[Tracing] Could not set up background tab detection due to lack of global document")),c&&(function(k,O,j,q,B){const W=at.document;let tt;const Q=()=>{const ft="ui.action.click",gt=Rr(k);if(gt){const nt=ct(gt).op;if(["navigation","pageload"].includes(nt))return void(ne&&N.warn(`[Tracing] Did not create ${ft} span because a pageload or navigation span is in progress.`))}tt&&(tt.setAttribute($r,"interactionInterrupted"),tt.end(),tt=void 0),B.name?tt=Ic({name:B.name,op:ft,attributes:{[de]:B.source||"url"}},{idleTimeout:O,finalTimeout:j,childSpanTimeout:q}):ne&&N.warn(`[Tracing] Did not create ${ft} transaction because _latestRouteName is missing.`)};W&&addEventListener("click",Q,{capture:!0})})(A,d,p,h,e),r&&ng(),jy(A,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,tracePropagationTargets:A.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:S,enableHTTPTimings:v,onRequestSpanStart:C,onRequestSpanEnd:M})}}};function Xu(t){return at.document?.querySelector(`meta[name=${t}]`)?.getAttribute("content")||void 0}const Lp="_sentry_idleSpan";function Rr(t){return t[Lp]}function Qu(t,e){Qt(t,Lp,e)}const Zu=1.5,Gy=!1;var ja=Array.isArray,Vy=Array.prototype.indexOf,Ks=Array.from,Np=Object.defineProperty,Ke=Object.getOwnPropertyDescriptor,Fp=Object.getOwnPropertyDescriptors,Ky=Object.prototype,Jy=Array.prototype,Ua=Object.getPrototypeOf,tl=Object.isExtensible;function Mr(t){return typeof t=="function"}const Me=()=>{};function A_(t){return typeof t?.then=="function"}function O_(t){return t()}function qp(t){for(var e=0;e<t.length;e++)t[e]()}function $p(){var t,e;return{promise:new Promise(((n,r)=>{t=n,e=r})),resolve:t,reject:e}}function P_(t,e,n=!1){return t===void 0?n?e():e:t}function D_(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const Pt=2,Ba=4,Io=8,jp=1<<24,qe=16,$e=32,Pn=64,Ro=128,fe=512,Rt=1024,Gt=2048,he=4096,Xt=8192,Ae=16384,za=32768,tn=65536,el=1<<17,Up=1<<18,kr=1<<19,Bp=1<<20,ke=1<<25,Rn=32768,Gi=1<<21,Wa=1<<22,Je=1<<23,_e=Symbol("$state"),zp=Symbol("legacy props"),Yy=Symbol(""),Yn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Mo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const Xy=1,Qy=2,nl=4,Zy=8,tv=16,L_=1,N_=2,F_=4,It=Symbol(),ev="http://www.w3.org/1999/xhtml",q_="http://www.w3.org/2000/svg",nv="@attach";function Wp(t){return t===this.v}function Hp(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Gp(t){return!Hp(t,this.v)}let Er=!1,rv=!1;function $_(){Er=!0}let pt=null;function fr(t){pt=t}function j_(t){return Ha().get(t)}function U_(t,e){return Ha().set(t,e),e}function B_(t){return Ha().has(t)}function sv(t,e=!1,n){pt={p:pt,i:!1,c:null,e:null,s:t,x:null,l:Er&&!e?{s:null,u:null,$:[]}:null}}function ov(t){var e=pt,n=e.e;if(n!==null)for(var r of(e.e=null,n))cf(r);return t!==void 0&&(e.x=t),e.i=!0,pt=e.p,t??{}}function gs(){return!Er||pt!==null&&pt.l===null}function Ha(t){return pt===null&&Mo(),pt.c??=new Map((function(e){let n=e.p;for(;n!==null;){const r=n.c;if(r!==null)return r;n=n.p}return null})(pt)||void 0)}let pn=[];function Vp(){var t=pn;pn=[],qp(t)}function Dn(t){if(pn.length===0&&!Gr){var e=pn;queueMicrotask((()=>{e===pn&&Vp()}))}pn.push(t)}function iv(){for(;pn.length>0;)Vp()}function Kp(t){var e=lt;if(e===null)return ut.f|=Je,t;if(e.f&za)hr(t,e);else{if(!(e.f&Ro))throw t;e.b.error(t)}}function hr(t,e){for(;e!==null;){if(e.f&Ro)try{return void e.b.error(t)}catch(n){t=n}e=e.parent}throw t}const Ps=new Set;let yt=null,oi=null,re=null,ee=[],Ao=null,Vi=!1,Gr=!1;class ye{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#c=null;#i=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){ee=[],oi=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)this.#o(r,n);this.is_fork||this.#l(),this.is_deferred()?(this.#a(n.effects),this.#a(n.render_effects)):(oi=this,yt=null,rl(n.render_effects),rl(n.effects),oi=null,this.#c?.resolve()),re=null}#o(e,n){e.f^=Rt;for(var r=e.first;r!==null;){var s=r.f,o=!!(s&($e|Pn)),i=o&&!!(s&Rt)||!!(s&Xt)||this.skipped_effects.has(r);if(r.f&Ro&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!i&&r.fn!==null){o?r.f^=Rt:s&Ba?n.effects.push(r):xr(r)&&(r.f&qe&&this.#i.add(r),yr(r));var c=r.first;if(c!==null){r=c;continue}}var a=r.parent;for(r=r.next;r===null&&a!==null;)a===n.effect&&(this.#a(n.effects),this.#a(n.render_effects),n=n.parent),r=a.next,a=a.parent}}#a(e){for(const n of e)n.f&Gt?this.#i.add(n):n.f&he&&this.#s.add(n),this.#u(n.deps),Ot(n,Rt)}#u(e){if(e!==null)for(const n of e)n.f&Pt&&n.f&Rn&&(n.f^=Rn,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),e.f&Je||(this.current.set(e,e.v),re?.set(e,e.v))}activate(){yt=this,this.apply()}deactivate(){yt===this&&(yt=null,re=null)}flush(){if(this.activate(),ee.length>0){if(Jp(),yt!==null&&yt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#l(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#d()}#d(){if(Ps.size>1){this.previous.clear();var e=re,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const o of Ps){if(o===this){n=!1;continue}const i=[];for(const[a,u]of this.current){if(o.current.has(a)){if(!n||u===o.current.get(a))continue;o.current.set(a,u)}i.push(a)}if(i.length===0)continue;const c=[...o.current.keys()].filter((a=>!this.current.has(a)));if(c.length>0){var s=ee;ee=[];const a=new Set,u=new Map;for(const l of i)Yp(l,c,a,u);if(ee.length>0){yt=o,o.apply();for(const l of ee)o.#o(l,r);o.deactivate()}ee=s}}yt=null,re=e}this.committed=!0,Ps.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#i)this.#s.delete(e),Ot(e,Gt),Mn(e);for(const e of this.#s)Ot(e,he),Mn(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#c??=$p()).promise}static ensure(){if(yt===null){const e=yt=new ye;Ps.add(yt),Gr||ye.enqueue((()=>{yt===e&&e.flush()}))}return yt}static enqueue(e){Dn(e)}apply(){}}function av(t){var e=Gr;Gr=!0;try{for(;;){if(iv(),ee.length===0&&(yt?.flush(),ee.length===0))return void(Ao=null);Jp()}}finally{Gr=e}}function Jp(){var t=kn;Vi=!0;try{var e=0;for(go(!0);ee.length>0;){var n=ye.ensure();e++>1e3&&cv(),n.process(ee),Ye.clear()}}finally{Vi=!1,go(t),Ao=null}}function cv(){try{(function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")})()}catch(t){hr(t,Ao)}}let xe=null;function rl(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if(!(r.f&(Ae|Xt))&&xr(r)&&(xe=new Set,yr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?pf(r):r.fn=null),xe?.size>0)){Ye.clear();for(const s of xe){if(s.f&(Ae|Xt))continue;const o=[s];let i=s.parent;for(;i!==null;)xe.has(i)&&(xe.delete(i),o.push(i)),i=i.parent;for(let c=o.length-1;c>=0;c--){const a=o[c];a.f&(Ae|Xt)||yr(a)}}xe.clear()}}xe=null}}function Yp(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const s of t.reactions){const o=s.f;o&Pt?Yp(s,e,n,r):o&(Wa|qe)&&!(o&Gt)&&Xp(s,e,r)&&(Ot(s,Gt),Mn(s))}}function Xp(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if(s.f&Pt&&Xp(s,e,n))return n.set(s,!0),!0}return n.set(t,!1),!1}function Mn(t){for(var e=Ao=t;e.parent!==null;){var n=(e=e.parent).f;if(Vi&&e===lt&&n&qe&&!(n&Up))return;if(n&(Pn|$e)){if(!(n&Rt))return;e.f^=Rt}}ee.push(e)}function uv(t){let e,n=0,r=en(0);return()=>{rs()&&(Mt(r),Do((()=>(n===0&&(e=Nn((()=>t((()=>Vr(r)))))),n+=1,()=>{Dn((()=>{n-=1,n===0&&(e?.(),e=void 0,Vr(r))}))}))))}}var lv=tn|kr|Ro;class dv{parent;#t=!1;#e;#r=null;#n;#c;#i;#s=null;#o=null;#a=null;#u=null;#l=null;#d=0;#p=0;#h=!1;#f=null;#_=uv((()=>(this.#f=en(this.#d),()=>{this.#f=null})));constructor(e,n,r){this.#e=e,this.#n=n,this.#c=r,this.parent=lt.b,this.#t=!!this.#n.pending,this.#i=_s((()=>{lt.b=this;var s=this.#y();try{this.#s=Jt((()=>r(s)))}catch(o){this.error(o)}return this.#p>0?this.#g():this.#t=!1,()=>{this.#l?.remove()}}),lv)}#b(){try{this.#s=Jt((()=>this.#c(this.#e)))}catch(e){this.error(e)}this.#t=!1}#S(){const e=this.#n.pending;e&&(this.#o=Jt((()=>e(this.#e))),ye.enqueue((()=>{var n=this.#y();this.#s=this.#m((()=>(ye.ensure(),Jt((()=>this.#c(n)))))),this.#p>0?this.#g():(wn(this.#o,(()=>{this.#o=null})),this.#t=!1)})))}#y(){var e=this.#e;return this.#t&&(this.#l=Xe(),this.#e.before(this.#l),e=this.#l),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#m(e){var n=lt,r=ut,s=pt;ie(this.#i),Wt(this.#i),fr(this.#i.ctx);try{return e()}catch(o){return Kp(o),null}finally{ie(n),Wt(r),fr(s)}}#g(){const e=this.#n.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#l),mf(this.#s,this.#u)),this.#o===null&&(this.#o=Jt((()=>e(this.#e))))}#v(e){this.has_pending_snippet()?(this.#p+=e,this.#p===0&&(this.#t=!1,this.#o&&wn(this.#o,(()=>{this.#o=null})),this.#u&&(this.#e.before(this.#u),this.#u=null))):this.parent&&this.parent.#v(e)}update_pending_count(e){this.#v(e),this.#d+=e,this.#f&&mr(this.#f,this.#d)}get_effect_pending(){return this.#_(),Mt(this.#f)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw e;this.#s&&(At(this.#s),this.#s=null),this.#o&&(At(this.#o),this.#o=null),this.#a&&(At(this.#a),this.#a=null);var s=!1,o=!1;const i=()=>{s?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(s=!0,o&&(function(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")})(),ye.ensure(),this.#d=0,this.#a!==null&&wn(this.#a,(()=>{this.#a=null})),this.#t=this.has_pending_snippet(),this.#s=this.#m((()=>(this.#h=!1,Jt((()=>this.#c(this.#e)))))),this.#p>0?this.#g():this.#t=!1)};var c=ut;try{Wt(null),o=!0,n?.(e,i),o=!1}catch(a){hr(a,this.#i&&this.#i.parent)}finally{Wt(c)}r&&Dn((()=>{this.#a=this.#m((()=>{ye.ensure(),this.#h=!0;try{return Jt((()=>{r(this.#e,(()=>e),(()=>i))}))}catch(a){return hr(a,this.#i.parent),null}finally{this.#h=!1}}))}))}}function Qp(t,e,n,r){const s=gs()?Oo:Ga;if(n.length!==0||t.length!==0){var o=yt,i=lt,c=pv();t.length>0?Promise.all(t).then((()=>{c();try{return a()}finally{o?.deactivate(),Ds()}})):a()}else r(e.map(s));function a(){Promise.all(n.map((u=>(function(l,d){let p=lt;p===null&&(function(){throw new Error("https://svelte.dev/e/async_derived_orphan")})();var h=p.b,f=void 0,m=en(It),g=!ut,y=new Map;return(function(S){me(Wa|kr,S,!0)})((()=>{var S=$p();f=S.promise;try{Promise.resolve(l()).then(S.resolve,S.reject).then((()=>{v===yt&&v.committed&&v.deactivate(),Ds()}))}catch(x){S.reject(x),Ds()}var v=yt;if(g){var w=!h.is_pending();h.update_pending_count(1),v.increment(w),y.get(v)?.reject(Yn),y.delete(v),y.set(v,S)}const T=(x,_=void 0)=>{if(v.activate(),_)_!==Yn&&(m.f|=Je,mr(m,_));else{m.f&Je&&(m.f^=Je),mr(m,x);for(const[b,E]of y){if(y.delete(b),b===v)break;E.reject(Yn)}}g&&(h.update_pending_count(-1),v.decrement(w))};S.promise.then(T,(x=>T(null,x||"unknown")))})),vs((()=>{for(const S of y.values())S.reject(Yn)})),new Promise((S=>{function v(w){function T(){w===f?S(m):v(f)}w.then(T,T)}v(f)}))})(u)))).then((u=>{c();try{r([...e.map(s),...u])}catch(l){i.f&Ae||hr(l,i)}o?.deactivate(),Ds()})).catch((u=>{hr(u,i)}))}}function pv(){var t=lt,e=ut,n=pt,r=yt;return function(s=!0){ie(t),Wt(e),fr(n),s&&r?.activate()}}function Ds(){ie(null),Wt(null),fr(null)}function Oo(t){var e=Pt|Gt,n=ut!==null&&ut.f&Pt?ut:null;return lt!==null&&(lt.f|=kr),{ctx:pt,deps:null,effects:null,equals:Wp,f:e,fn:t,reactions:null,rv:0,v:It,wv:0,parent:n??lt,ac:null}}function z_(t){const e=Oo(t);return gf(e),e}function Ga(t){const e=Oo(t);return e.equals=Gp,e}function Zp(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)At(e[n])}}function Va(t){var e,n=lt;ie((function(r){for(var s=r.parent;s!==null;){if(!(s.f&Pt))return s.f&Ae?null:s;s=s.parent}return null})(t));try{t.f&=~Rn,Zp(t),e=bf(t)}finally{ie(n)}return e}function tf(t){var e=Va(t);t.equals(e)||(yt?.is_fork||(t.v=e),t.wv=vf()),Ln||(re!==null?(rs()||yt?.is_fork)&&re.set(t,e):Ot(t,t.f&fe?Rt:he))}let ii=new Set;const Ye=new Map;let sl=!1;function en(t,e){return{f:0,v:t,reactions:null,equals:Wp,rv:0,wv:0}}function ze(t,e){const n=en(t);return gf(n),n}function ef(t,e=!1,n=!0){const r=en(t);return e||(r.equals=Gp),Er&&n&&pt!==null&&pt.l!==null&&(pt.l.s??=[]).push(r),r}function le(t,e,n=!1){return ut!==null&&(!ve||ut.f&el)&&gs()&&ut.f&(Pt|qe|Wa|el)&&!Oe?.includes(t)&&(function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")})(),mr(t,n?Xn(e):e)}function mr(t,e){if(!t.equals(e)){var n=t.v;Ln?Ye.set(t,e):Ye.set(t,n),t.v=e;var r=ye.ensure();r.capture(t,n),t.f&Pt&&(t.f&Gt&&Va(t),Ot(t,t.f&fe?Rt:he)),t.wv=vf(),nf(t,Gt),gs()&&lt!==null&&lt.f&Rt&&!(lt.f&($e|Pn))&&(te===null?(function(s){te=s})([t]):te.push(t)),!r.is_fork&&ii.size>0&&!sl&&(function(){sl=!1;var s=kn;go(!0);const o=Array.from(ii);try{for(const i of o)i.f&Rt&&Ot(i,he),xr(i)&&yr(i)}finally{go(s)}ii.clear()})()}return e}function ol(t,e=1){var n=Mt(t),r=e===1?n++:n--;return le(t,n),r}function W_(t,e=1){var n=Mt(t);return le(t,e===1?++n:--n)}function Vr(t){le(t,t.v+1)}function nf(t,e){var n=t.reactions;if(n!==null)for(var r=gs(),s=n.length,o=0;o<s;o++){var i=n[o],c=i.f;if(r||i!==lt){var a=!(c&Gt);if(a&&Ot(i,e),c&Pt){var u=i;re?.delete(u),c&Rn||(c&fe&&(i.f|=Rn),nf(u,he))}else a&&(c&qe&&xe!==null&&xe.add(i),Mn(i))}}}function Xn(t){if(typeof t!="object"||t===null||_e in t)return t;const e=Ua(t);if(e!==Ky&&e!==Jy)return t;var n=new Map,r=ja(t),s=ze(0),o=En,i=c=>{if(En===o)return c();var a=ut,u=En;Wt(null),ll(o);var l=c();return Wt(a),ll(u),l};return r&&n.set("length",ze(t.length)),new Proxy(t,{defineProperty(c,a,u){"value"in u&&u.configurable!==!1&&u.enumerable!==!1&&u.writable!==!1||(function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")})();var l=n.get(a);return l===void 0?l=i((()=>{var d=ze(u.value);return n.set(a,d),d})):le(l,u.value,!0),!0},deleteProperty(c,a){var u=n.get(a);if(u===void 0){if(a in c){const l=i((()=>ze(It)));n.set(a,l),Vr(s)}}else le(u,It),Vr(s);return!0},get(c,a,u){if(a===_e)return t;var l=n.get(a),d=a in c;if(l!==void 0||d&&!Ke(c,a)?.writable||(l=i((()=>ze(Xn(d?c[a]:It)))),n.set(a,l)),l!==void 0){var p=Mt(l);return p===It?void 0:p}return Reflect.get(c,a,u)},getOwnPropertyDescriptor(c,a){var u=Reflect.getOwnPropertyDescriptor(c,a);if(u&&"value"in u){var l=n.get(a);l&&(u.value=Mt(l))}else if(u===void 0){var d=n.get(a),p=d?.v;if(d!==void 0&&p!==It)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(c,a){if(a===_e)return!0;var u=n.get(a),l=u!==void 0&&u.v!==It||Reflect.has(c,a);return(u!==void 0||lt!==null&&(!l||Ke(c,a)?.writable))&&(u===void 0&&(u=i((()=>ze(l?Xn(c[a]):It))),n.set(a,u)),Mt(u)===It)?!1:l},set(c,a,u,l){var d=n.get(a),p=a in c;if(r&&a==="length")for(var h=u;h<d.v;h+=1){var f=n.get(h+"");f!==void 0?le(f,It):h in c&&(f=i((()=>ze(It))),n.set(h+"",f))}d===void 0?p&&!Ke(c,a)?.writable||(le(d=i((()=>ze(void 0))),Xn(u)),n.set(a,d)):(p=d.v!==It,le(d,i((()=>Xn(u)))));var m=Reflect.getOwnPropertyDescriptor(c,a);if(m?.set&&m.set.call(l,u),!p){if(r&&typeof a=="string"){var g=n.get("length"),y=Number(a);Number.isInteger(y)&&y>=g.v&&le(g,y+1)}Vr(s)}return!0},ownKeys(c){Mt(s);var a=Reflect.ownKeys(c).filter((d=>{var p=n.get(d);return p===void 0||p.v!==It}));for(var[u,l]of n)l.v===It||u in c||a.push(u);return a},setPrototypeOf(){(function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")})()}})}function il(t){try{if(t!==null&&typeof t=="object"&&_e in t)return t[_e]}catch{}return t}var al,fv,rf,sf,of;function Xe(t=""){return document.createTextNode(t)}function gr(t){return sf.call(t)}function ys(t){return of.call(t)}function H_(t,e){return gr(t)}function G_(t,e=!1){var n=gr(t);return n instanceof Comment&&n.data===""?ys(n):n}function V_(t,e=1,n=!1){let r=t;for(;e--;)r=ys(r);return r}function hv(t,e){if(e){const n=document.body;t.autofocus=!0,Dn((()=>{document.activeElement===n&&t.focus()}))}}let cl=!1;function K_(t,e,n,r=!0){for(var s of(r&&n(),e))t.addEventListener(s,n);vs((()=>{for(var o of e)t.removeEventListener(o,n)}))}function Po(t){var e=ut,n=lt;Wt(null),ie(null);try{return t()}finally{Wt(e),ie(n)}}function J_(t,e,n,r=n){t.addEventListener(e,(()=>Po(n)));const s=t.__on_r;t.__on_r=s?()=>{s(),r(!0)}:()=>r(!0),cl||(cl=!0,document.addEventListener("reset",(o=>{Promise.resolve().then((()=>{if(!o.defaultPrevented)for(const i of o.target.elements)i.__on_r?.()}))}),{capture:!0}))}function af(t){lt===null&&(ut===null&&(function(e){throw new Error("https://svelte.dev/e/effect_orphan")})(),(function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")})()),Ln&&(function(e){throw new Error("https://svelte.dev/e/effect_in_teardown")})()}function me(t,e,n){var r=lt;r!==null&&r.f&Xt&&(t|=Xt);var s={ctx:pt,deps:null,nodes:null,f:t|Gt|fe,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{yr(s),s.f|=za}catch(c){throw At(s),c}else e!==null&&Mn(s);var o=s;if(!n||o.deps!==null||o.teardown!==null||o.nodes!==null||o.first!==o.last||o.f&kr||(o=o.first,t&qe&&t&tn&&o!==null&&(o.f|=tn)),o!==null&&(o.parent=r,r!==null&&(function(c,a){var u=a.last;u===null?a.last=a.first=c:(u.next=c,c.prev=u,a.last=c)})(o,r),ut!==null&&ut.f&Pt&&!(t&Pn))){var i=ut;(i.effects??=[]).push(o)}return s}function rs(){return ut!==null&&!ve}function vs(t){const e=me(Io,null,!1);return Ot(e,Rt),e.teardown=t,e}function mv(t){af();var e=lt.f;if(ut||!(e&$e)||e&za)return cf(t);var n=pt;(n.e??=[]).push(t)}function cf(t){return me(Ba|Bp,t,!1)}function Y_(t){return af(),me(Io|Bp,t,!0)}function Ka(t){return me(Ba,t,!1)}function X_(t,e){var n={effect:null,ran:!1,deps:t};pt.l.$.push(n),n.effect=Do((()=>{t(),n.ran||(n.ran=!0,Nn(e))}))}function Q_(){var t=pt;Do((()=>{for(var e of t.l.$){e.deps();var n=e.effect;n.f&Rt&&Ot(n,he),xr(n)&&yr(n),e.ran=!1}}))}function Do(t,e=0){return me(Io|e,t,!0)}function Z_(t,e=[],n=[],r=[]){Qp(r,e,n,(s=>{me(Io,(()=>t(...s.map(Mt))),!0)}))}function _s(t,e=0){return me(qe|e,t,!0)}function uf(t,e=0){return me(jp|e,t,!0)}function Jt(t){return me($e|kr,t,!0)}function lf(t){var e=t.teardown;if(e!==null){const n=Ln,r=ut;ul(!0),Wt(null);try{e.call(null)}finally{ul(n),Wt(r)}}}function df(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Po((()=>{s.abort(Yn)}));var r=n.next;n.f&Pn?n.parent=null:At(n,e),n=r}}function At(t,e=!0){var n=!1;(e||t.f&Up)&&t.nodes!==null&&t.nodes.end!==null&&(gv(t.nodes.start,t.nodes.end),n=!0),df(t,e&&!n),yo(t,0),Ot(t,Ae);var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)o.stop();lf(t);var s=t.parent;s!==null&&s.first!==null&&pf(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function gv(t,e){for(;t!==null;){var n=t===e?null:ys(t);t.remove(),t=n}}function pf(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function wn(t,e,n=!0){var r=[];ff(t,r,!0);var s=()=>{n&&At(t),e&&e()},o=r.length;if(o>0){var i=()=>--o||s();for(var c of r)c.out(i)}else s()}function ff(t,e,n){if(!(t.f&Xt)){t.f^=Xt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const i of r)(i.is_global||n)&&e.push(i);for(var s=t.first;s!==null;){var o=s.next;ff(s,e,!!(s.f&tn||s.f&$e&&t.f&qe)&&n),s=o}}}function Ki(t){hf(t,!0)}function hf(t,e){if(t.f&Xt){t.f^=Xt,t.f&Rt||(Ot(t,Gt),Mn(t));for(var n=t.first;n!==null;){var r=n.next;hf(n,!!(n.f&tn||n.f&$e)&&e),n=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const o of s)(o.is_global||e)&&o.in()}}function mf(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var s=n===r?null:ys(n);e.append(n),n=s}}let kn=!1;function go(t){kn=t}let Ln=!1;function ul(t){Ln=t}let ut=null,ve=!1;function Wt(t){ut=t}let lt=null;function ie(t){lt=t}let Oe=null;function gf(t){ut!==null&&(Oe===null?Oe=[t]:Oe.push(t))}let $t=null,Vt=0,te=null,yf=1,ss=0,En=ss;function ll(t){En=t}function vf(){return++yf}function xr(t){var e=t.f;if(e&Gt)return!0;if(e&Pt&&(t.f&=~Rn),e&he){var n=t.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var o=n[s];if(xr(o)&&tf(o),o.wv>t.wv)return!0}e&fe&&re===null&&Ot(t,Rt)}return!1}function _f(t,e,n=!0){var r=t.reactions;if(r!==null&&!Oe?.includes(t))for(var s=0;s<r.length;s++){var o=r[s];o.f&Pt?_f(o,e,!1):e===o&&(n?Ot(o,Gt):o.f&Rt&&Ot(o,he),Mn(o))}}function bf(t){var e=$t,n=Vt,r=te,s=ut,o=Oe,i=pt,c=ve,a=En,u=t.f;$t=null,Vt=0,te=null,ut=u&($e|Pn)?null:t,Oe=null,fr(t.ctx),ve=!1,En=++ss,t.ac!==null&&(Po((()=>{t.ac.abort(Yn)})),t.ac=null);try{t.f|=Gi;var l=(0,t.fn)(),d=t.deps;if($t!==null){var p;if(yo(t,Vt),d!==null&&Vt>0)for(d.length=Vt+$t.length,p=0;p<$t.length;p++)d[Vt+p]=$t[p];else t.deps=d=$t;if(rs()&&t.f&fe)for(p=Vt;p<d.length;p++)(d[p].reactions??=[]).push(t)}else d!==null&&Vt<d.length&&(yo(t,Vt),d.length=Vt);if(gs()&&te!==null&&!ve&&d!==null&&!(t.f&(Pt|he|Gt)))for(p=0;p<te.length;p++)_f(te[p],t);return s!==null&&s!==t&&(ss++,te!==null&&(r===null?r=te:r.push(...te))),t.f&Je&&(t.f^=Je),l}catch(h){return Kp(h)}finally{t.f^=Gi,$t=e,Vt=n,te=r,ut=s,Oe=o,fr(i),ve=c,En=a}}function yv(t,e){let n=e.reactions;if(n!==null){var r=Vy.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&e.f&Pt&&($t===null||!$t.includes(e))&&(Ot(e,he),e.f&fe&&(e.f^=fe,e.f&=~Rn),Zp(e),yo(e,0))}function yo(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)yv(t,n[r])}function yr(t){var e=t.f;if(!(e&Ae)){Ot(t,Rt);var n=lt,r=kn;lt=t,kn=!0;try{e&(qe|jp)?(function(o){for(var i=o.first;i!==null;){var c=i.next;i.f&$e||At(i),i=c}})(t):df(t),lf(t);var s=bf(t);t.teardown=typeof s=="function"?s:null,t.wv=yf,Gy&&rv&&t.f&Gt&&t.deps}finally{kn=r,lt=n}}}async function tb(){await Promise.resolve(),av()}function Mt(t){var e=!!(t.f&Pt);if(ut!==null&&!ve&&!(lt!==null&&lt.f&Ae)&&!Oe?.includes(t)){var n=ut.deps;if(ut.f&Gi)t.rv<ss&&(t.rv=ss,$t===null&&n!==null&&n[Vt]===t?Vt++:$t===null?$t=[t]:$t.includes(t)||$t.push(t));else{(ut.deps??=[]).push(t);var r=t.reactions;r===null?t.reactions=[ut]:r.includes(ut)||r.push(ut)}}if(Ln){if(Ye.has(t))return Ye.get(t);if(e){var s=t,o=s.v;return(s.f&Rt||s.reactions===null)&&!wf(s)||(o=Va(s)),Ye.set(s,o),o}}else e&&(!re?.has(t)||yt?.is_fork&&!rs())&&(xr(s=t)&&tf(s),!kn||!rs()||s.f&fe||Sf(s));if(re?.has(t))return re.get(t);if(t.f&Je)throw t.v;return t.v}function Sf(t){if(t.deps!==null){t.f^=fe;for(const e of t.deps)(e.reactions??=[]).push(t),e.f&Pt&&!(e.f&fe)&&Sf(e)}}function wf(t){if(t.v===It)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Ye.has(e)||e.f&Pt&&wf(e))return!0;return!1}function Nn(t){var e=ve;try{return ve=!0,t()}finally{ve=e}}const vv=-7169;function Ot(t,e){t.f=t.f&vv|e}function eb(t){if(typeof t=="object"&&t&&!(t instanceof EventTarget)){if(_e in t)Ji(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&_e in n&&Ji(n)}}}function Ji(t,e=new Set){if(!(typeof t!="object"||t===null||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ji(t[r],e)}catch{}const n=Ua(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Fp(n);for(let s in r){const o=r[s].get;if(o)try{o.call(t)}catch{}}}}}function _v(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const bv=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Sv(t){return bv.includes(t)}const wv={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function kv(t){return t=t.toLowerCase(),wv[t]??t}const Ev=["touchstart","touchmove"];function xv(t){return Ev.includes(t)}const kf=new Set,Yi=new Set;function Ja(t,e,n,r={}){function s(o){if(r.capture||Fr.call(e,o),!o.cancelBubble)return Po((()=>n?.call(this,o)))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Dn((()=>{e.addEventListener(t,s,r)})):e.addEventListener(t,s,r),s}function nb(t,e,n,r={}){var s=Ja(e,t,n,r);return()=>{t.removeEventListener(e,s,r)}}function rb(t,e,n,r,s){var o={capture:r,passive:s},i=Ja(t,e,n,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&vs((()=>{e.removeEventListener(t,i,o)}))}function Tv(t){for(var e=0;e<t.length;e++)kf.add(t[e]);for(var n of Yi)n(t)}let dl=null;function Fr(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],o=s[0]||t.target;dl=t;var i=0,c=dl===t&&t.__root;if(c){var a=s.indexOf(c);if(a!==-1&&(e===document||e===window))return void(t.__root=e);var u=s.indexOf(e);if(u===-1)return;a<=u&&(i=a)}if((o=s[i]||t.target)!==e){Np(t,"currentTarget",{configurable:!0,get:()=>o||n});var l=ut,d=lt;Wt(null),ie(null);try{for(var p,h=[];o!==null;){var f=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];m==null||o.disabled&&t.target!==o||m.call(o,t)}catch(g){p?h.push(g):p=g}if(t.cancelBubble||f===e||f===null)break;o=f}if(p){for(let g of h)queueMicrotask((()=>{throw g}));throw p}}finally{t.__root=e,delete t.currentTarget,Wt(l),ie(d)}}}function Ef(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function os(t,e){var n=lt;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function sb(t,e){var n,r=!!(1&e),s=!!(2&e),o=!t.startsWith("<!>");return()=>{n===void 0&&(n=Ef(o?t:"<!>"+t),r||(n=gr(n)));var i=s||rf?document.importNode(n,!0):n.cloneNode(!0);return r?os(gr(i),i.lastChild):os(i,i),i}}function ob(t,e){return(function(n,r,s="svg"){var o,i=`<${s}>${n.startsWith("<!>")?"<!>"+n:n}</${s}>`;return()=>{if(!o){var c=gr(Ef(i));o=gr(c)}var a=o.cloneNode(!0);return os(a,a),a}})(t,0,"svg")}function ib(t=""){var e=Xe(t+"");return os(e,e),e}function ab(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Xe();return t.append(e,n),os(e,n),t}function cb(t,e){t!==null&&t.before(e)}function ub(){return(window.__svelte??={}).uid??=1,"c"+window.__svelte.uid++}let Xi=!0;function lb(t){Xi=t}function db(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function pb(t,e){return(function(n,{target:r,anchor:s,props:o={},events:i,context:c,intro:a=!0}){(function(){if(al===void 0){al=window,fv=document,rf=/Firefox/.test(navigator.userAgent);var h=Element.prototype,f=Node.prototype,m=Text.prototype;sf=Ke(f,"firstChild").get,of=Ke(f,"nextSibling").get,tl(h)&&(h.__click=void 0,h.__className=void 0,h.__attributes=null,h.__style=void 0,h.__e=void 0),tl(m)&&(m.__t=void 0)}})();var u=new Set,l=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!u.has(m)){u.add(m);var g=xv(m);r.addEventListener(m,Fr,{passive:g});var y=Un.get(m);y===void 0?(document.addEventListener(m,Fr,{passive:g}),Un.set(m,1)):Un.set(m,y+1)}}};l(Ks(kf)),Yi.add(l);var d=void 0,p=(function(h){ye.ensure();const f=me(Pn|kr,h,!0);return(m={})=>new Promise((g=>{m.outro?wn(f,(()=>{At(f),g(void 0)})):(At(f),g(void 0))}))})((()=>{var h=s??r.appendChild(Xe());return(function(f,m,g){new dv(f,m,g)})(h,{pending:()=>{}},(f=>{c&&(sv({}),pt.c=c),i&&(o.$$events=i),Xi=a,d=n(f,o)||{},Xi=!0,c&&ov()})),()=>{for(var f of u){r.removeEventListener(f,Fr);var m=Un.get(f);--m==0?(document.removeEventListener(f,Fr),Un.delete(f)):Un.set(f,m)}Yi.delete(l),h!==s&&h.parentNode?.removeChild(h)}}));return Qi.set(d,p),d})(t,e)}const Un=new Map;let Qi=new WeakMap;function fb(t,e){const n=Qi.get(t);return n?(Qi.delete(t),n(e)):Promise.resolve()}class Ya{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#c=!0;constructor(e,n=!0){this.anchor=e,this.#c=n}#i=()=>{var e=yt;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)Ki(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#e.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,i]of this.#t){if(this.#t.delete(o),o===e)break;const c=this.#r.get(i);c&&(At(c.effect),this.#r.delete(i))}for(const[o,i]of this.#e){if(o===n||this.#n.has(o))continue;const c=()=>{if(Array.from(this.#t.values()).includes(o)){var a=document.createDocumentFragment();mf(i,a),a.append(Xe()),this.#r.set(o,{effect:i,fragment:a})}else At(i);this.#n.delete(o),this.#e.delete(o)};this.#c||!r?(this.#n.add(o),wn(i,c,!1)):c()}}};#s=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,s]of this.#r)n.includes(r)||(At(s.effect),this.#r.delete(r))};ensure(e,n){var r=yt;!n||this.#e.has(e)||this.#r.has(e)||this.#e.set(e,Jt((()=>n(this.anchor)))),this.#t.set(r,e),this.#i()}}function hb(t,e,n=!1){var r=new Ya(t);function s(o,i){r.ensure(o,i)}_s((()=>{var o=!1;e(((i,c=!0)=>{o=!0,s(c,i)})),o||s(!1,null)}),n?tn:0)}function mb(t,e){return e}function ai(t,e=!0){for(var n=0;n<t.length;n++)At(t[n],e)}var pl;function gb(t,e,n,r,s,o=null){var i=t,c=new Map;!(e&nl)||(i=t.appendChild(Xe()));var a,u=null,l=Ga((()=>{var m=n();return ja(m)?m:m==null?[]:Ks(m)})),d=!0;function p(){f.fallback=u,(function(m,g,y,S,v){var w,T,x,_,b,E=!!(S&Zy),R=g.length,I=m.items,C=m.effect.first,M=null,D=[],P=[];if(E)for(b=0;b<R;b+=1)x=v(g[b],b),(_=I.get(x).e).f&ke||(_.nodes?.a?.measure(),(T??=new Set).add(_));for(b=0;b<R;b+=1){if(x=v(g[b],b),_=I.get(x).e,m.outrogroups!==null)for(const B of m.outrogroups)B.pending.delete(_),B.done.delete(_);if(_.f&ke){if(_.f^=ke,_!==C){var $=M?M.next:C;_===m.effect.last&&(m.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),We(m,M,_),We(m,_,$),Ar(_,$,y),D=[],P=[],C=(M=_).next;continue}Ar(_,null,y)}if(_.f&Xt&&(Ki(_),E&&(_.nodes?.a?.unfix(),(T??=new Set).delete(_))),_!==C){if(w!==void 0&&w.has(_)){if(D.length<P.length){var L,A=P[0];M=A.prev;var F=D[0],k=D[D.length-1];for(L=0;L<D.length;L+=1)Ar(D[L],A,y);for(L=0;L<P.length;L+=1)w.delete(P[L]);We(m,F.prev,k.next),We(m,M,F),We(m,k,A),C=A,M=k,b-=1,D=[],P=[]}else w.delete(_),Ar(_,C,y),We(m,_.prev,_.next),We(m,_,M===null?m.effect.first:M.next),We(m,M,_),M=_;continue}for(D=[],P=[];C!==null&&C!==_;)(w??=new Set).add(C),P.push(C),C=C.next;if(C===null)continue}_.f&ke||D.push(_),M=_,C=_.next}if(m.outrogroups!==null){for(const B of m.outrogroups)B.pending.size===0&&(ai(Ks(B.done)),m.outrogroups?.delete(B));m.outrogroups.size===0&&(m.outrogroups=null)}if(C!==null||w!==void 0){var O=[];if(w!==void 0)for(_ of w)_.f&Xt||O.push(_);for(;C!==null;)C.f&Xt||C===m.fallback||O.push(C),C=C.next;var j=O.length;if(j>0){var q=S&nl&&R===0?y:null;if(E){for(b=0;b<j;b+=1)O[b].nodes?.a?.measure();for(b=0;b<j;b+=1)O[b].nodes?.a?.fix()}(function(B,W,tt){for(var Q,ft=W.length,gt=W.length,nt=0;nt<ft;nt++){let U=W[nt];wn(U,(()=>{if(Q){if(Q.pending.delete(U),Q.done.add(U),Q.pending.size===0){var X=B.outrogroups;ai(Ks(Q.done)),X.delete(Q),X.size===0&&(B.outrogroups=null)}}else gt-=1}),!1)}if(gt===0){var st=tt!==null;if(st){var Se=tt,Dt=Se.parentNode;Dt.textContent="",Dt.append(Se),B.items.clear()}ai(W,!st)}else Q={pending:new Set(W),done:new Set},(B.outrogroups??=new Set).add(Q)})(m,O,q)}}E&&Dn((()=>{if(T!==void 0)for(_ of T)_.nodes?.a?.apply()}))})(f,a,i,e,r),u!==null&&(a.length===0?u.f&ke?(u.f^=ke,Ar(u,null,i)):Ki(u):wn(u,(()=>{u=null})))}var h=_s((()=>{for(var m=(a=Mt(l)).length,g=new Set,y=0;y<m;y+=1){var S=a[y],v=r(S,y),w=d?null:c.get(v);w?(w.v&&mr(w.v,S),w.i&&mr(w.i,y)):(w=Cv(c,d?i:pl??=Xe(),S,v,y,s,e,n),d||(w.e.f|=ke),c.set(v,w)),g.add(v)}m===0&&o&&!u&&(d?u=Jt((()=>o(i))):(u=Jt((()=>o(pl??=Xe())))).f|=ke),d||p(),Mt(l)})),f={effect:h,items:c,outrogroups:null,fallback:u};d=!1}function Cv(t,e,n,r,s,o,i,c){var a=i&Xy?i&tv?en(n):ef(n,!1,!1):null,u=i&Qy?en(s):null;return{v:a,i:u,e:Jt((()=>(o(e,a??n,u??s,c),()=>{t.delete(r)})))}}function Ar(t,e,n){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end,o=!e||e.f&ke?n:e.nodes.start;r!==null;){var i=ys(r);if(o.before(r),r===s)return;r=i}}function We(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}function yb(t,e,...n){var r=new Ya(t);_s((()=>{const s=e()??null;r.ensure(s,s&&(o=>s(o,...n)))}),tn)}function vb(t,e,n){var r=new Ya(t);_s((()=>{var s=e()??null;r.ensure(s,s&&(o=>n(o,s)))}),tn)}function Iv(t,e){var n,r=void 0;uf((()=>{r!==(r=e())&&(n&&(At(n),n=null),r&&(n=Jt((()=>{Ka((()=>r(t)))}))))}))}function xf(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=xf(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rv(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=xf(t))&&(r&&(r+=" "),r+=e);return r}function Mv(t){return typeof t=="object"?Rv(t):t??""}const fl=[...` 	
\r\f\v\uFEFF`];function hl(t,e=!1){var n=e?" !important;":";",r="";for(var s in t){var o=t[s];o!=null&&o!==""&&(r+=" "+s+": "+o+n)}return r}function ci(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Av(t,e,n,r,s,o){var i=t.__className;if(i!==n||i===void 0){var c=(function(l,d,p){var h=l==null?"":""+l;if(d&&(h=h?h+" "+d:d),p){for(var f in p)if(p[f])h=h?h+" "+f:f;else if(h.length)for(var m=f.length,g=0;(g=h.indexOf(f,g))>=0;){var y=g+m;g!==0&&!fl.includes(h[g-1])||y!==h.length&&!fl.includes(h[y])?g=y:h=(g===0?"":h.substring(0,g))+h.substring(y+1)}}return h===""?null:h})(n,r,o);c==null?t.removeAttribute("class"):e?t.className=c:t.setAttribute("class",c),t.__className=n}else if(o&&s!==o)for(var a in o){var u=!!o[a];s!=null&&u===!!s[a]||t.classList.toggle(a,u)}return o}function ui(t,e={},n,r){for(var s in n){var o=n[s];e[s]!==o&&(n[s]==null?t.style.removeProperty(s):t.style.setProperty(s,o,r))}}function Ov(t,e,n,r){if(t.__style!==e){var s=(function(o,i){if(i){var c,a,u="";if(Array.isArray(i)?(c=i[0],a=i[1]):c=i,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var l=!1,d=0,p=!1,h=[];c&&h.push(...Object.keys(c).map(ci)),a&&h.push(...Object.keys(a).map(ci));var f=0,m=-1;const v=o.length;for(var g=0;g<v;g++){var y=o[g];if(p?y==="/"&&o[g-1]==="*"&&(p=!1):l?l===y&&(l=!1):y==="/"&&o[g+1]==="*"?p=!0:y==='"'||y==="'"?l=y:y==="("?d++:y===")"&&d--,!p&&l===!1&&d===0){if(y===":"&&m===-1)m=g;else if(y===";"||g===v-1){if(m!==-1){var S=ci(o.substring(f,m).trim());h.includes(S)||(y!==";"&&g++,u+=" "+o.substring(f,g).trim()+";")}f=g+1,m=-1}}}}return c&&(u+=hl(c)),a&&(u+=hl(a,!0)),(u=u.trim())===""?null:u}return o==null?null:String(o)})(e,r);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}else r&&(Array.isArray(r)?(ui(t,n?.[0],r[0]),ui(t,n?.[1],r[1],"important")):ui(t,n,r));return r}function li(t,e,n=!1){if(t.multiple){if(e==null)return;if(!ja(e))return void console.warn("https://svelte.dev/e/select_multiple_invalid_value");for(var r of t.options)r.selected=e.includes(ml(r))}else{for(r of t.options){var s=ml(r);if(o=s,i=e,Object.is(il(o),il(i)))return void(r.selected=!0)}var o,i;n&&e===void 0||(t.selectedIndex=-1)}}function ml(t){return"__value"in t?t.__value:t.value}const Or=Symbol("class"),Pr=Symbol("style"),Tf=Symbol("is custom element"),Cf=Symbol("is html");function _b(t,e){var n=Xa(t);n.value!==(n.value=e??void 0)&&(t.value!==e||e===0&&t.nodeName==="PROGRESS")&&(t.value=e??"")}function Pv(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function gl(t,e,n,r){var s=Xa(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[Yy]=n),n==null?t.removeAttribute(e):typeof n!="string"&&If(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function bb(t,e,n=[],r=[],s=[],o,i=!1,c=!1){Qp(s,n,r,(a=>{var u=void 0,l={},d=t.nodeName==="SELECT",p=!1;if(uf((()=>{var f=e(...a.map(Mt)),m=(function(y,S,v,w,T=!1,x=!1){var _=Xa(y),b=_[Tf],E=!_[Cf],R=S||{},I=y.tagName==="OPTION";for(var C in S)C in v||(v[C]=null);v.class?v.class=Mv(v.class):(w||v[Or])&&(v.class=null),v[Pr]&&(v.style??=null);var M=If(y);for(const F in v){let k=v[F];if(I&&F==="value"&&k==null)y.value=y.__value="",R[F]=k;else if(F!=="class")if(F!=="style"){var D=R[F];if(k!==D||k===void 0&&y.hasAttribute(F)){R[F]=k;var P=F[0]+F[1];if(P!=="$$")if(P==="on"){const O={},j="$$"+F;let q=F.slice(2);var $=Sv(q);if(_v(q)&&(q=q.slice(0,-7),O.capture=!0),!$&&D){if(k!=null)continue;y.removeEventListener(q,R[j],O),R[j]=null}if(k!=null)if($)y[`__${q}`]=k,Tv([q]);else{let B=function(W){R[F].call(this,W)};R[j]=Ja(q,y,B,O)}else $&&(y[`__${q}`]=void 0)}else if(F==="style")gl(y,F,k);else if(F==="autofocus")hv(y,!!k);else if(b||F!=="__value"&&(F!=="value"||k==null))if(F==="selected"&&I)Pv(y,k);else{var L=F;E||(L=kv(L));var A=L==="defaultValue"||L==="defaultChecked";if(k!=null||b||A)A||M.includes(L)&&(b||typeof k!="string")?(y[L]=k,L in _&&(_[L]=It)):typeof k!="function"&&gl(y,L,k);else if(_[F]=null,L==="value"||L==="checked"){let O=y;const j=S===void 0;if(L==="value"){let q=O.defaultValue;O.removeAttribute(L),O.defaultValue=q,O.value=O.__value=j?q:null}else{let q=O.defaultChecked;O.removeAttribute(L),O.defaultChecked=q,O.checked=!!j&&q}}else y.removeAttribute(F)}else y.value=y.__value=k}}else Ov(y,k,S?.[Pr],v[Pr]),R[F]=k,R[Pr]=v[Pr];else Av(y,y.namespaceURI==="http://www.w3.org/1999/xhtml",k,w,S?.[Or],v[Or]),R[F]=k,R[Or]=v[Or]}return R})(t,u,f,o,i,c);p&&d&&"value"in f&&li(t,f.value);for(let y of Object.getOwnPropertySymbols(l))f[y]||At(l[y]);for(let y of Object.getOwnPropertySymbols(f)){var g=f[y];y.description!==nv||u&&g===u[y]||(l[y]&&At(l[y]),l[y]=Jt((()=>Iv(t,(()=>g))))),m[y]=g}u=m})),d){var h=t;Ka((()=>{li(h,u.value,!0),(function(f){var m=new MutationObserver((()=>{li(f,f.__value)}));m.observe(f,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vs((()=>{m.disconnect()}))})(h)}))}p=!0}))}function Xa(t){return t.__attributes??={[Tf]:t.nodeName.includes("-"),[Cf]:t.namespaceURI===ev}}var yl=new Map;function If(t){var e,n=t.getAttribute("is")||t.nodeName,r=yl.get(n);if(r)return r;yl.set(n,r=[]);for(var s=t,o=Element.prototype;o!==s;){for(var i in e=Fp(s))e[i].set&&r.push(i);s=Ua(s)}return r}function vl(t,e){return t===e||t?.[_e]===e}function Sb(t={},e,n,r){return Ka((()=>{var s,o;return Do((()=>{s=o,o=r?.()||[],Nn((()=>{t!==n(...o)&&(e(t,...o),s&&vl(n(...s),t)&&e(null,...s))}))})),()=>{Dn((()=>{o&&vl(n(...o),t)&&e(null,...o)}))}})),t}function Qa(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Me;const r=Nn((()=>t.subscribe(e,n)));return r.unsubscribe?()=>r.unsubscribe():r}const Bn=[];function Dv(t,e){return{subscribe:Rf(t,e).subscribe}}function Rf(t,e=Me){let n=null;const r=new Set;function s(i){if(Hp(t,i)&&(t=i,n)){const c=!Bn.length;for(const a of r)a[1](),Bn.push(a,t);if(c){for(let a=0;a<Bn.length;a+=2)Bn[a][0](Bn[a+1]);Bn.length=0}}}function o(i){s(i(t))}return{set:s,update:o,subscribe:function(i,c=Me){const a=[i,c];return r.add(a),r.size===1&&(n=e(s,o)||Me),i(t),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}}}function wb(t,e,n){const r=!Array.isArray(t),s=r?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Dv(n,((i,c)=>{let a=!1;const u=[];let l=0,d=Me;const p=()=>{if(l)return;d();const f=e(r?u[0]:u,i,c);o?i(f):d=typeof f=="function"?f:Me},h=s.map(((f,m)=>Qa(f,(g=>{u[m]=g,l&=~(1<<m),a&&p()}),(()=>{l|=1<<m}))));return a=!0,p(),function(){qp(h),d(),a=!1}}))}function kb(t){return{subscribe:t.subscribe.bind(t)}}function Lv(t){let e;return Qa(t,(n=>e=n))(),e}let qr=!1,Zi=Symbol();function Eb(t,e,n){const r=n[e]??={store:null,source:ef(void 0),unsubscribe:Me};if(r.store!==t&&!(Zi in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Me;else{var s=!0;r.unsubscribe=Qa(t,(o=>{s?r.source.v=o:le(r.source,o)})),s=!1}return t&&Zi in n?Lv(t):Mt(r.source)}function xb(t,e,n){let r=n[e];return r&&r.store!==t&&(r.unsubscribe(),r.unsubscribe=Me),t}function Tb(t,e){return t.set(e),e}function Cb(){const t={};return[t,function(){vs((()=>{for(var e in t)t[e].unsubscribe();Np(t,Zi,{enumerable:!1,value:!0})}))}]}function Ib(t,e,n){return t.set(n),e}function Rb(){qr=!0}const Nv={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set:(t,e)=>!1,getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Mb(t,e,n){return new Proxy({props:t,exclude:e},Nv)}const Fv={get(t,e){if(!t.exclude.includes(e))return Mt(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,n){if(!(e in t.special)){var r=lt;try{ie(t.parent_effect),t.special[e]=$v({get[e](){return t.props[e]}},e,4)}finally{ie(r)}}return t.special[e](n),ol(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},deleteProperty:(t,e)=>(t.exclude.includes(e)||(t.exclude.push(e),ol(t.version)),!0),has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Ab(t,e){return new Proxy({props:t,exclude:e,special:{},version:en(0),parent_effect:lt},Fv)}const qv={get(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(Mr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,n){let r=t.props.length;for(;r--;){let s=t.props[r];Mr(s)&&(s=s());const o=Ke(s,e);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(Mr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const s=Ke(r,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(t,e){if(e===_e||e===zp)return!1;for(let n of t.props)if(Mr(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(Mr(n)&&(n=n()),n){for(const r in n)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(n))e.includes(r)||e.push(r)}return e}};function Ob(...t){return new Proxy({props:t},qv)}function $v(t,e,n,r){var s,o,i=!Er||!!(2&n),c=!!(8&n),a=!!(16&n),u=r,l=!0,d=()=>(l&&(l=!1,u=a?Nn(r):r),u);if(c){var p=_e in t||zp in t;s=Ke(t,e)?.set??(p&&e in t?v=>t[e]=v:void 0)}var h,f=!1;if(c?[o,f]=(function(v){var w=qr;try{return qr=!1,[v(),qr]}finally{qr=w}})((()=>t[e])):o=t[e],o===void 0&&r!==void 0&&(o=d(),s&&(i&&(function(v){throw new Error("https://svelte.dev/e/props_invalid_value")})(),s(o))),h=i?()=>{var v=t[e];return v===void 0?d():(l=!0,v)}:()=>{var v=t[e];return v!==void 0&&(u=void 0),v===void 0?u:v},i&&!(4&n))return h;if(s){var m=t.$$legacy;return function(v,w){return arguments.length>0?(i&&w&&!m&&!f||s(w?h():v),v):h()}}var g=!1,y=(1&n?Oo:Ga)((()=>(g=!1,h())));c&&Mt(y);var S=lt;return function(v,w){if(arguments.length>0){const T=w?Mt(y):i&&c?Xn(v):v;return le(y,T),g=!0,u!==void 0&&(u=T),v}return Ln&&g||S.f&Ae?y.v:Mt(y)}}function jv(t){pt===null&&Mo(),Er&&pt.l!==null?Mf(pt).m.push(t):mv((()=>{const e=Nn(t);if(typeof e=="function")return e}))}function Pb(t){pt===null&&Mo(),jv((()=>()=>Nn(t)))}function Db(t){pt===null&&Mo(),pt.l===null&&(function(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")})(),Mf(pt).b.push(t)}function Mf(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}var Za=(t=>(t.vscode="vscode",t.jetbrains="jetbrains",t.web="web",t))(Za||{});let Uv=document.documentElement;function fn(){return Uv??document.documentElement}var Qn=(t=>(t.light="light",t.dark="dark",t))(Qn||{}),Zn=(t=>(t.regular="regular",t.highContrast="high-contrast",t))(Zn||{});const vo="data-augment-theme-category",_o="data-augment-theme-intensity";function Af(){const t=fn().getAttribute(vo);if(t&&Object.values(Qn).includes(t))return t}function Of(){const t=fn().getAttribute(_o);if(t&&Object.values(Zn).includes(t))return t}const ta="data-vscode-theme-kind";function Bv(){return self.acquireVsCodeApi!==void 0}function _l(){var t,e;(t=(function(){const n=document.body.getAttribute(ta);if(n)return Wv[n]})())===void 0?fn().removeAttribute(vo):fn().setAttribute(vo,t),(e=(function(){const n=document.body.getAttribute(ta);if(n)return Hv[n]})())===void 0?fn().removeAttribute(_o):fn().setAttribute(_o,e)}function zv(){if(self.acquireVsCodeApi===void 0)throw new Error("acquireVsCodeAPI not available");return(function(){new MutationObserver(_l).observe(document.body,{attributeFilter:[ta],attributes:!0}),_l()})(),{...self.acquireVsCodeApi(),clientType:Za.vscode}}const Wv={"vscode-dark":Qn.dark,"vscode-high-contrast":Qn.dark,"vscode-light":Qn.light,"vscode-high-contrast-light":Qn.light},Hv={"vscode-dark":Zn.regular,"vscode-light":Zn.regular,"vscode-high-contrast":Zn.highContrast,"vscode-high-contrast-light":Zn.highContrast};function Gv(){return window.augment_intellij!==void 0}function di(t,e,n={},r){return id({name:t,op:e,attributes:n},(s=>{try{const o=r(s);return s?.setStatus({code:1}),o}catch(o){throw s?.setStatus({code:2,message:o instanceof Error?o.message:"Unknown error"}),o}}))}function Vv(){if(Bv())return zv();if(Gv())return(function(){const t=window.augment_intellij;if(t===void 0||t.setState===void 0||t.getState===void 0||t.postMessage===void 0)throw new Error("Augment IntelliJ host not available");window.augment=window.augment||{};let e=!1;return window.augment.host={clientType:Za.jetbrains,setState:n=>di("hostSetState","hostOperation",{hostClientType:"jetbrains",hostInitialized:e},(r=>{e||(console.error("Host not initialized"),r?.setStatus({code:2,message:"Host not initialized"})),t.setState(n)})),getState:()=>di("hostGetState","hostOperation",{hostClientType:"jetbrains",hostInitialized:e},(n=>(e||(console.error("Host not initialized"),n?.setStatus({code:2,message:"Host not initialized"})),t.getState()))),postMessage:n=>di("hostPostMessage","hostOperation",{hostClientType:"jetbrains",hostInitialized:e,messageType:n?.type??"unknown"},(r=>{e||(console.error("Host not initialized"),r?.setStatus({code:2,message:"Host not initialized"})),t.postMessage(n)})),initialize:async()=>{await t.initializationPromise,e=!0}},window.augment.host})();if(!window.augment?.host)throw new Error("Augment host not available");return window.augment.host}function Kv(){return window.augment?.host||(window.augment=window.augment||{},window.augment.host=Vv()),window.augment.host}const Jv=Kv();var is=(t=>(t.asyncWrapper="async-wrapper",t.historyLoaded="history-loaded",t.historyInitialize="history-initialize",t.completionRating="completion-rating",t.completionRatingDone="completion-rating-done",t.nextEditRating="next-edit-rating",t.nextEditRatingDone="next-edit-rating-done",t.completions="completions",t.historyConfig="history-config",t.copyRequestID="copy-request-id-to-clipboard",t.openFile="open-file",t.openDiffInBuffer="open-diff-in-buffer",t.saveFile="save-file",t.loadFile="load-file",t.importFileRequest="import-file-request",t.importDirectoryRequest="import-directory-request",t.triggerImportDialogRequest="trigger-import-dialog-request",t.triggerImportDialogResponse="trigger-import-dialog-response",t.openMemoriesFile="open-memories-file",t.openAndEditFile="open-and-edit-file",t.diffViewNotifyReinit="diff-view-notify-reinit",t.diffViewLoaded="diff-view-loaded",t.diffViewInitialize="diff-view-initialize",t.diffViewResolveChunk="diff-view-resolve-chunk",t.diffViewFetchPendingStream="diff-view-fetch-pending-stream",t.diffViewDiffStreamStarted="diff-view-diff-stream-started",t.diffViewDiffStreamChunk="diff-view-diff-stream-chunk",t.diffViewDiffStreamEnded="diff-view-diff-stream-ended",t.diffViewAcceptAllChunks="diff-view-accept-all-chunks",t.diffViewAcceptFocusedChunk="diff-view-accept-selected-chunk",t.diffViewRejectFocusedChunk="diff-view-reject-focused-chunk",t.diffViewFocusPrevChunk="diff-view-focus-prev-chunk",t.diffViewFocusNextChunk="diff-view-focus-next-chunk",t.diffViewWindowFocusChange="diff-view-window-focus-change",t.diffViewFileFocus="diff-view-file-focus",t.disposeDiffView="dispose-diff-view",t.hostWindowFocusChange="host-window-focus-change",t.reportWebviewClientMetric="report-webview-client-metric",t.reportChatInputCompletionResolution="report-chat-input-completion-resolution",t.reportError="report-error",t.showNotification="show-notification",t.showBannerNotification="show-banner-notification",t.dismissBannerNotification="dismiss-banner-notification",t.openConfirmationModal="open-confirmation-modal",t.confirmationModalResponse="confirmation-modal-response",t.clientTools="client-tools",t.currentlyOpenFiles="currently-open-files",t.findFileRequest="find-file-request",t.resolveFileRequest="resolve-file-request",t.resolveFilePathsRequest="resolve-file-paths-request",t.findFileResponse="find-file-response",t.resolveFileResponse="resolve-file-response",t.resolveFilePathsResponse="resolve-file-paths-response",t.findRecentlyOpenedFilesRequest="find-recently-opened-files",t.findRecentlyOpenedFilesResponse="find-recently-opened-files-response",t.findFolderRequest="find-folder-request",t.findFolderResponse="find-folder-response",t.findExternalSourcesRequest="find-external-sources-request",t.findExternalSourcesResponse="find-external-sources-response",t.findSymbolRequest="find-symbol-request",t.findSymbolRegexRequest="find-symbol-regex-request",t.findSymbolResponse="find-symbol-response",t.fileRangesSelected="file-ranges-selected",t.getDiagnosticsRequest="get-diagnostics-request",t.getDiagnosticsResponse="get-diagnostics-response",t.resolveWorkspaceFileChunkRequest="resolve-workspace-file-chunk",t.resolveWorkspaceFileChunkResponse="resolve-workspace-file-chunk-response",t.sourceFoldersUpdated="source-folders-updated",t.sourceFoldersSyncStatus="source-folders-sync-status",t.syncEnabledState="sync-enabled-state",t.shouldShowSummary="should-show-summary",t.showAugmentPanel="show-augment-panel",t.updateGuidelinesState="update-guidelines-state",t.openGuidelines="open-guidelines",t.updateWorkspaceGuidelines="update-workspace-guidelines",t.updateUserGuidelines="update-user-guidelines",t.updateFeatureFlagOverrides="update-feature-flag-overrides",t.updateFeatureFlagOverridesResponse="update-feature-flag-overrides-response",t.resetFeatureFlagOverride="reset-feature-flag-override",t.resetFeatureFlagOverrideResponse="reset-feature-flag-override-response",t.featureFlagsUpdated="feature-flags-updated",t.getKeybindingsRequest="get-keybindings-request",t.getKeybindingsResponse="get-keybindings-response",t.keybindingsUpdated="keybindings-updated",t.triggerShortcut="trigger-shortcut",t.setChatCommandAvailability="set-chat-command-availability",t.setChatContextVariables="set-chat-context-variables",t.chatMemoryHasUpdates="chat-memory-has-updates",t.getAgentEditContentsByRequestId="getAgentEditContentsByRequestId",t.chatModeChanged="chat-mode-changed",t.chatClearMetadata="chat-clear-metadata",t.chatLoaded="chat-loaded",t.chatInitialize="chat-initialize",t.chatGetStreamRequest="chat-get-stream-request",t.chatUserMessage="chat-user-message",t.generateCommitMessage="generate-commit-message",t.generateProjectOverview="generate-project-overview",t.promptEnhancer="prompt-enhancer",t.chatUserCancel="chat-user-cancel",t.chatModelReply="chat-model-reply",t.chatInstructionMessage="chat-instruction-message",t.chatInstructionModelReply="chat-instruction-model-reply",t.chatCreateFile="chat-create-file",t.chatSmartPaste="chat-smart-paste",t.chatRating="chat-rating",t.chatRatingDone="chat-rating-done",t.chatStreamDone="chat-stream-done",t.runSlashCommand="run-slash-command",t.callTool="call-tool",t.callToolResponse="call-tool-response",t.cancelToolRun="cancel-tool-run",t.cancelToolRunResponse="cancel-tool-run-response",t.toolCheckSafe="check-safe",t.toolCheckSafeResponse="check-safe-response",t.checkToolExists="checkToolExists",t.checkToolExistsResponse="checkToolExistsResponse",t.startRemoteMCPAuth="start-remote-mcp-auth",t.getToolCallCheckpoint="get-tool-call-checkpoint",t.getToolCallCheckpointResponse="get-tool-call-checkpoint-response",t.updateAditionalChatModels="update-additional-chat-models",t.saveChat="save-chat",t.saveChatDone="save-chat-done",t.newThread="new-thread",t.appendConversationDraft="append-conversation-draft",t.sendUserMessage="send-user-message",t.addFileToChat="add-file-to-chat",t.addFolderToChat="add-folder-to-chat",t.addTerminalOutputToChat="add-terminal-output-to-chat",t.chatSaveImageRequest="chat-save-image-request",t.chatSaveImageResponse="chat-save-image-response",t.chatLoadImageRequest="chat-load-image-request",t.chatLoadImageResponse="chat-load-image-response",t.chatDeleteImageRequest="chat-delete-image-request",t.chatDeleteImageResponse="chat-delete-image-response",t.chatSaveAttachmentRequest="chat-save-attachment-request",t.chatSaveAttachmentResponse="chat-save-attachment-response",t.chatNotification="chat-notification",t.addHookMessages="add-hook-messages",t.setStopHookMessages="set-stop-hook-messages",t.addPostToolUseMessages="add-post-tool-use-messages",t.openImageGallery="open-image-gallery",t.getChatInputCompletion="get-chat-input-completion",t.getChatInputCompletionResponse="get-chat-input-completion-response",t.grpcAuthTokenRequest="get-grpc-auth-token-request",t.grpcAuthTokenResponse="get-grpc-auth-token-response",t.grpcInitializationRequest="grpc-initialization-request",t.grpcInitializationResponse="grpc-initialization-response",t.contextCanvasListRequest="context-canvas-list-request",t.contextCanvasListResponse="context-canvas-list-response",t.contextCanvasGetRequest="context-canvas-get-request",t.contextCanvasGetResponse="context-canvas-get-response",t.instructions="instructions",t.nextEditDismiss="next-edit-dismiss",t.nextEditLoaded="next-edit-loaded",t.nextEditSuggestions="next-edit-suggestions",t.nextEditSuggestionsAction="next-edit-suggestions-action",t.nextEditRefreshStarted="next-edit-refresh-started",t.nextEditRefreshFinished="next-edit-refresh-finished",t.nextEditCancel="next-edit-cancel",t.nextEditPreviewActive="next-edit-preview-active",t.nextEditSuggestionsChanged="next-edit-suggestions-changed",t.nextEditNextSuggestionChanged="next-edit-next-suggestion-changed",t.nextEditOpenSuggestion="next-edit-open-suggestion",t.nextEditToggleSuggestionTree="next-edit-toggle-suggestion-tree",t.nextEditActiveSuggestionChanged="next-edit-active-suggestion",t.nextEditPanelFocus="next-edit-panel-focus",t.onboardingLoaded="onboarding-loaded",t.onboardingUpdateState="onboarding-update-state",t.usedChat="used-chat",t.preferencePanelLoaded="preference-panel-loaded",t.preferenceInit="preference-init",t.preferenceResultMessage="preference-result-message",t.preferenceNotify="preference-notify",t.openSettingsPage="open-settings-page",t.settingsPanelLoaded="settings-panel-loaded",t.navigateToSettingsSection="navigate-to-settings-section",t.mainPanelDisplayApp="main-panel-display-app",t.mainPanelLoaded="main-panel-loaded",t.mainPanelActions="main-panel-actions",t.mainPanelPerformAction="main-panel-perform-action",t.mainPanelCreateProject="main-panel-create-project",t.usedSlashAction="used-slash-action",t.signInLoaded="sign-in-loaded",t.signInLoadedResponse="sign-in-loaded-response",t.signOut="sign-out",t.awaitingSyncingPermissionLoaded="awaiting-syncing-permission-loaded",t.awaitingSyncingPermissionInitialize="awaiting-syncing-permission-initialize",t.readFileRequest="read-file-request",t.readFileResponse="read-file-response",t.wsContextGetChildrenRequest="ws-context-get-children-request",t.wsContextGetChildrenResponse="ws-context-get-children-response",t.wsContextGetSourceFoldersRequest="ws-context-get-source-folders-request",t.wsContextGetSourceFoldersResponse="ws-context-get-source-folders-response",t.wsContextAddMoreSourceFolders="ws-context-add-more-source-folders",t.wsContextRemoveSourceFolder="ws-context-remove-source-folder",t.wsContextSourceFoldersChanged="ws-context-source-folders-changed",t.wsContextFolderContentsChanged="ws-context-folder-contents-changed",t.wsContextUserRequestedRefresh="ws-context-user-requested-refresh",t.augmentLink="augment-link",t.resetAgentOnboarding="reset-agent-onboarding",t.empty="empty",t.chatGetAgentOnboardingPromptRequest="chat-get-agent-onboarding-prompt-request",t.chatGetAgentOnboardingPromptResponse="chat-get-agent-onboarding-prompt-response",t.getWorkspaceInfoRequest="get-workspace-info-request",t.getWorkspaceInfoResponse="get-workspace-info-response",t.getRemoteAgentOverviewsRequest="get-remote-agent-overviews-request",t.getRemoteAgentOverviewsResponse="get-remote-agent-overviews-response",t.remoteAgentOverviewsStreamRequest="remote-agent-overviews-stream-request",t.remoteAgentOverviewsStreamResponse="remote-agent-overviews-stream-response",t.getRemoteAgentChatHistoryRequest="get-remote-agent-chat-history-request",t.getRemoteAgentChatHistoryResponse="get-remote-agent-chat-history-response",t.remoteAgentHistoryStreamRequest="remote-agent-history-stream-request",t.remoteAgentHistoryStreamResponse="remote-agent-history-stream-response",t.cancelRemoteAgentsStreamRequest="cancel-remote-agents-stream-request",t.createRemoteAgentRequest="create-remote-agent-request",t.createRemoteAgentResponse="create-remote-agent-response",t.deleteRemoteAgentRequest="delete-remote-agent-request",t.deleteRemoteAgentResponse="delete-remote-agent-response",t.remoteAgentChatRequest="remote-agent-chat-request",t.remoteAgentChatResponse="remote-agent-chat-response",t.remoteAgentInterruptRequest="remote-agent-interrupt-request",t.remoteAgentInterruptResponse="remote-agent-interrupt-response",t.listSetupScriptsRequest="list-setup-scripts-request",t.listSetupScriptsResponse="list-setup-scripts-response",t.saveSetupScriptRequest="save-setup-script-request",t.saveSetupScriptResponse="save-setup-script-response",t.deleteSetupScriptRequest="delete-setup-script-request",t.deleteSetupScriptResponse="delete-setup-script-response",t.renameSetupScriptRequest="rename-setup-script-request",t.renameSetupScriptResponse="rename-setup-script-response",t.remoteAgentSshRequest="remote-agent-ssh-request",t.remoteAgentSshResponse="remote-agent-ssh-response",t.setRemoteAgentNotificationEnabled="set-remote-agent-notification-enabled",t.getRemoteAgentNotificationEnabledRequest="get-remote-agent-notification-enabled-request",t.getRemoteAgentNotificationEnabledResponse="get-remote-agent-notification-enabled-response",t.deleteRemoteAgentNotificationEnabled="delete-remote-agent-notification-enabled",t.setRemoteAgentPinnedStatus="set-remote-agent-pinned-status",t.getRemoteAgentPinnedStatusRequest="get-remote-agent-pinned-status-request",t.getRemoteAgentPinnedStatusResponse="get-remote-agent-pinned-status-response",t.deleteRemoteAgentPinnedStatus="delete-remote-agent-pinned-status",t.remoteAgentNotifyReady="remote-agent-notify-ready",t.remoteAgentSelectAgentId="remote-agent-select-agent-id",t.remoteAgentWorkspaceLogsRequest="remote-agent-workspace-logs-request",t.remoteAgentWorkspaceLogsResponse="remote-agent-workspace-logs-response",t.remoteAgentPauseRequest="remote-agent-pause-request",t.remoteAgentResumeRequest="remote-agent-resume-request",t.remoteAgentResumeHintRequest="remote-agent-resume-hint-request",t.updateRemoteAgentRequest="update-remote-agent-request",t.updateRemoteAgentResponse="update-remote-agent-response",t.remoteAgentGenerateSummaryRequest="remote-agent-generate-summary-request",t.remoteAgentGenerateSummaryResponse="remote-agent-generate-summary-response",t.remoteAgentGenerateSummaryForDiffDescriptionsRequest="remote-agent-generate-summary-for-diff-descriptions-request",t.updateSharedWebviewState="update-shared-webview-state",t.getSharedWebviewState="get-shared-webview-state",t.getSharedWebviewStateResponse="get-shared-webview-state-response",t.getGitBranchesRequest="get-git-branches-request",t.getGitBranchesResponse="get-git-branches-response",t.gitFetchRequest="git-fetch-request",t.gitFetchResponse="git-fetch-response",t.gitUpdateEvent="git-update-event",t.isGitRepositoryRequest="is-git-repository-request",t.isGitRepositoryResponse="is-git-repository-response",t.getWorkspaceDiffRequest="get-workspace-diff-request",t.getWorkspaceDiffResponse="get-workspace-diff-response",t.getRemoteUrlRequest="get-remote-url-request",t.getRemoteUrlResponse="get-remote-url-response",t.diffDescriptionsResponse="get-diff-descriptions-response",t.canApplyChangesRequest="can-apply-changes-request",t.canApplyChangesResponse="can-apply-changes-response",t.applyChangesRequest="apply-changes-request",t.applyChangesResponse="apply-changes-response",t.previewApplyChangesRequest="preview-apply-changes-request",t.previewApplyChangesResponse="preview-apply-changes-response",t.openFileRequest="open-file-request",t.openFileResponse="open-file-response",t.stashUnstagedChangesRequest="stash-unstaged-changes-request",t.stashUnstagedChangesResponse="stash-unstaged-changes-response",t.isGithubAuthenticatedRequest="is-github-authenticated-request",t.isGithubAuthenticatedResponse="is-github-authenticated-response",t.authenticateGithubRequest="authenticate-github-request",t.authenticateGithubResponse="authenticate-github-response",t.revokeGithubAccessRequest="revoke-github-access-request",t.revokeGithubAccessResponse="revoke-github-access-response",t.listGithubReposForAuthenticatedUserRequest="list-github-repos-for-authenticated-user-request",t.listGithubReposForAuthenticatedUserResponse="list-github-repos-for-authenticated-user-response",t.listGithubRepoBranchesRequest="list-github-repo-branches-request",t.listGithubRepoBranchesResponse="list-github-repo-branches-response",t.getGithubRepoRequest="get-github-repo-request",t.getGithubRepoResponse="get-github-repo-response",t.getCurrentLocalBranchRequest="get-current-local-branch-request",t.getCurrentLocalBranchResponse="get-current-local-branch-response",t.remoteAgentDiffPanelLoaded="remote-agent-diff-panel-loaded",t.remoteAgentDiffPanelSetOpts="remote-agent-diff-panel-set-opts",t.showRemoteAgentDiffPanel="show-remote-agent-diff-panel",t.closeRemoteAgentDiffPanel="close-remote-agent-diff-panel",t.remoteAgentHomePanelLoaded="remote-agent-home-panel-loaded",t.showRemoteAgentHomePanel="show-remote-agent-home-panel",t.closeRemoteAgentHomePanel="close-remote-agent-home-panel",t.secretsHomePanelLoaded="secrets-home-panel-loaded",t.showSecretsHomePanel="show-secrets-home-panel",t.closeSecretsHomePanel="close-secrets-home-panel",t.listSecretsRequest="list-secrets-request",t.listSecretsResponse="list-secrets-response",t.updateSecretRequest="update-secret-request",t.updateSecretResponse="update-secret-response",t.deleteSecretRequest="delete-secret-request",t.deleteSecretResponse="delete-secret-response",t.createSecretRequest="create-secret-request",t.createSecretResponse="create-secret-response",t.triggerInitialOrientation="trigger-initial-orientation",t.executeInitialOrientation="execute-initial-orientation",t.orientationStatusUpdate="orientation-status-update",t.getOrientationStatus="get-orientation-status",t.checkAgentAutoModeApproval="check-agent-auto-mode-approval",t.checkAgentAutoModeApprovalResponse="check-agent-auto-mode-approval-response",t.setAgentAutoModeApproved="set-agent-auto-mode-approved",t.toolConfigLoaded="tool-config-loaded",t.toolConfigInitialize="tool-config-initialize",t.toolConfigGetDefinitions="tool-config-get-definitions",t.toolConfigDefinitionsResponse="tool-config-definitions-response",t.toolConfigStartOAuth="tool-config-start-oauth",t.toolConfigStartOAuthResponse="tool-config-start-oauth-response",t.toolConfigRevokeAccess="tool-config-revoke-access",t.toolApprovalConfigGetRequest="tool-approval-config-get-request",t.toolApprovalConfigGetResponse="tool-approval-config-get-response",t.getChatRequestIdeStateRequest="get-ide-state-node-request",t.getChatRequestIdeStateResponse="get-ide-state-node-response",t.executeCommand="execute-command",t.toggleCollapseUnchangedRegions="toggle-collapse-unchanged-regions",t.openScratchFileRequest="open-scratch-file-request",t.getTerminalSettings="get-terminal-settings",t.terminalSettingsResponse="terminal-settings-response",t.updateTerminalSettings="update-terminal-settings",t.canShowTerminal="can-show-terminal",t.canShowTerminalResponse="can-show-terminal-response",t.showTerminal="show-terminal",t.showTerminalResponse="show-terminal-response",t.runCommandInTerminal="run-command-in-terminal",t.getCreditInfoRequest="get-credit-info-request",t.getCreditInfoResponse="get-credit-info-response",t.getRemoteAgentStatus="get-remote-agent-status",t.remoteAgentStatusResponse="remote-agent-status-response",t.remoteAgentStatusChanged="remote-agent-status-changed",t.saveLastRemoteAgentSetupRequest="save-last-remote-agent-setup-request",t.getLastRemoteAgentSetupRequest="get-last-remote-agent-setup-request",t.getLastRemoteAgentSetupResponse="get-last-remote-agent-setup-response",t.rulesLoaded="rules-loaded",t.memoriesLoaded="memories-loaded",t.loadMemoriesFileRequest="load-memories-file-request",t.loadMemoriesFileResponse="load-memories-file-response",t.saveMemoriesFileRequest="save-memories-file-request",t.saveMemoriesFileResponse="save-memories-file-response",t.getRulesListResponse="get-rules-list-response",t.getSubscriptionBanner="get-subscription-banner",t.getSubscriptionBannerResponse="get-subscription-banner-response",t.reportRemoteAgentEvent="report-remote-agent-event",t.reportAgentChangesApplied="report-agent-changes-applied",t.setPermissionToWriteToSSHConfig="set-permission-to-write-to-ssh-config",t.getShouldShowSSHConfigPermissionPromptRequest="get-should-show-ssh-config-permission-prompt-request",t.getShouldShowSSHConfigPermissionPromptResponse="get-should-show-ssh-config-permission-prompt-response",t.folderSelectionLoaded="folder-selection-loaded",t.folderSelectionInitialize="folder-selection-initialize",t.modelRegistryUpdated="model-registry-updated",t.openMermaidDiagramPanel="open-mermaid-diagram-panel",t.mermaidDiagramPanelLoaded="mermaid-diagram-panel-loaded",t.mermaidDiagramPanelSetOpts="mermaid-diagram-panel-set-opts",t))(is||{}),Yv=(t=>(t.off="off",t.visibleHover="visible-hover",t.visible="visible",t.on="on",t))(Yv||{}),Xv=(t=>(t.accept="accept",t.reject="reject",t))(Xv||{}),Qv=(t=>(t.loading="loading",t.signIn="sign-in",t.chat="chat",t.workspaceContext="workspace-context",t.awaitingSyncingPermission="awaiting-syncing-permission",t.folderSelection="folder-selection",t))(Qv||{}),Zv=(t=>(t.included="included",t.excluded="excluded",t.partial="partial",t))(Zv||{}),t_=(t=>(t[t.unspecified=0]="unspecified",t[t.typingMessage=1]="typingMessage",t[t.viewingAgent=2]="viewingAgent",t))(t_||{});function e_(t){if(t==null)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return console.error("Failed to serialize data to plain object:",e),Array.isArray(t)?[]:typeof t=="object"||typeof t=="function"||typeof t=="symbol"?{}:t}}class n_ extends Error{originalRequest;responseError;constructor(e,{cause:n,originalRequest:r,responseError:s}){super(e,{cause:n}),this.name=this.constructor.name,this.originalRequest=r,this.responseError=s}}class Lb{constructor(e,n=5e3){this._postMsgFn=e,this._timeoutMs=n,window.addEventListener("message",this._wrappedHandler)}_idToPromiseFns=new Map;_wrappedHandler=e=>{this.resolveAsyncMsg(e.data)};destroy(){window.removeEventListener("message",this._wrappedHandler),this._idToPromiseFns.clear()}registerPromiseContext=e=>new Promise(((n,r)=>{this._idToPromiseFns.set(e.requestId,{resolve:n,reject:r,originalRequest:e})}));resolveAsyncMsg=e=>{if(e.type!==is.asyncWrapper)return!1;const n=e,r=this._idToPromiseFns.get(n.requestId);if(!r)return!1;if(this._idToPromiseFns.delete(n.requestId),n.error){const s=r.originalRequest.baseMsg?.type;console.warn(`AsyncMsgSender: Rejecting request, original request type=${s}, requestId=${n.requestId}`,n.error),r.reject(new n_(`Extension host responded with error to webview request, original request type=${s}, requestId=${n.requestId}`,{cause:n.error,originalRequest:r.originalRequest,responseError:n.error}))}else r.resolve(n);return!0};rejectAsyncMsg=(e,n)=>{const r=this._idToPromiseFns.get(e.requestId);r&&(this._idToPromiseFns.delete(e.requestId),console.warn(`AsyncMsgSender: Rejecting request, reason: ${n}`,e),r.reject(n))};sendOrTimeout=(e,n=this._timeoutMs)=>{this._postMsgFn(e),n>0&&setTimeout((()=>this.rejectAsyncMsg(e,new zn(`MessageTimeout - requestType=${e?.baseMsg?.type}`,`Request timed out after ${n}ms, requestType=${e?.baseMsg?.type}, requestId=${e?.requestId}`))),n)};send=async(e,n=this._timeoutMs)=>{const r=Js(e),s=this.registerPromiseContext(r);this.sendOrTimeout(r,n);const o=await s;if(o.error)throw new Error(o.error);if(!o.baseMsg)throw new zn("InvalidResponse","No response or error message");return o.baseMsg};sendToSidecar=async(e,n=this._timeoutMs)=>{const r=Js(e.data!==void 0?{...e,data:e_(e.data)}:e,"sidecar"),s=this.registerPromiseContext(r);this.sendOrTimeout(r,n);const o=await s;if(o.error)throw new Error(o.error);if(!o.baseMsg)throw new zn("InvalidResponse","No response or error message");return o.baseMsg};async*stream(e,n=this._timeoutMs,r=this._timeoutMs){let s=Js(e);s.streamCtx={streamMsgIdx:0,streamNextRequestId:""};let o,i=0,c=!1;try{let a=this.registerPromiseContext(s);this.sendOrTimeout(s,n);const u=new Promise(((l,d)=>{r<=0||(o=setTimeout((()=>d(new zn("StreamTimeout","Stream timed out"))),r))}));for(;!c;){const l=await Promise.race([a,u]);if(l?.type!==is.asyncWrapper)throw new zn("InvalidResponse",`Received unexpected message: ${l}`);if(l.error)throw new Error(l.error);if(!l.streamCtx||l.streamCtx.isStreamComplete)return void(o!==void 0&&clearTimeout(o));if(!l.baseMsg)throw new zn("InvalidResponse","No response or error message");if(l.streamCtx.streamMsgIdx!==i){const d=l.streamCtx.streamMsgIdx;throw new Error(`Received out of order stream chunk. Expected ${i} but got ${d}`)}i=l.streamCtx.streamMsgIdx+1,s={...s,streamCtx:{streamMsgIdx:i,streamNextRequestId:""},requestId:l.streamCtx.streamNextRequestId},a=this.registerPromiseContext(s),yield l.baseMsg}}finally{if(o!==void 0&&clearTimeout(o),!c){c=!0;try{this._idToPromiseFns.delete(s.requestId)}catch(a){console.warn("Error sending stream cancellation message:",a)}}}}}function Js(t,e="host"){return{type:is.asyncWrapper,requestId:crypto.randomUUID(),error:null,baseMsg:t,destination:e}}class zn extends Error{name;message;constructor(e,n){super(),this.name=e,this.message=n}}var Pf=(t=>(t.chat="chat",t))(Pf||{}),r_=(t=>(t.chatMentionFolder="chat-mention-folder",t.chatMentionFile="chat-mention-file",t.chatMentionExternalSource="chat-mention-external-source",t.chatClearContext="chat-clear-context",t.chatRestoreDefaultContext="chat-restore-default-context",t.chatUseActionFind="chat-use-action-find",t.chatUseActionExplain="chat-use-action-explain",t.chatUseActionWriteTest="chat-use-action-write-test",t.chatNewConversation="chat-new-conversation",t.chatEditConversationName="chat-edit-conversation-name",t.chatFailedSmartPasteResolveFile="chat-failed-smart-paste-resolve-file",t.chatPrecomputeSmartPaste="chat-precompute-smart-paste",t.chatSmartPaste="chat-smart-paste",t.chatCodeblockCopy="chat-codeblock-copy",t.chatCodeblockCreate="chat-codeblock-create",t.chatCodeblockGoToFile="chat-codeblock-go-to-file",t.chatCodespanGoToFile="chat-codespan-go-to-file",t.chatCodespanGoToSymbol="chat-codespan-go-to-symbol",t.chatMermaidblockInitialize="chat-mermaidblock-initialize",t.chatMermaidblockToggle="chat-mermaidblock-toggle",t.chatMermaidblockInteract="chat-mermaidblock-interact",t.chatMermaidBlockError="chat-mermaidblock-error",t.chatUseSuggestedQuestion="chat-use-suggested-question",t.chatDisplaySuggestedQuestions="chat-display-suggested-questions",t.setWorkspaceGuidelines="chat-set-workspace-guidelines",t.clearWorkspaceGuidelines="chat-clear-workspace-guidelines",t.setUserGuidelines="chat-set-user-guidelines",t.clearUserGuidelines="chat-clear-user-guidelines",t))(r_||{});function bl(t,e){const n={type:is.reportWebviewClientMetric,data:{webviewName:Pf.chat,client_metric:t,value:e}};Jv.postMessage(Js(n))}const s_=6e4;let Dr=null;function Sl(){const t=Math.round((function(){try{const n=window.augmentPerformance?.getAverageFramerate;return typeof n=="function"?n():0}catch{return 0}})()),e=Math.round((function(){try{const n=window.augmentPerformance?.getWorstINP;return typeof n=="function"?n():0}catch{return 0}})());t>0&&bl("framerate",t),e>0&&bl("slowest_inp_ms_per_interval",e)}function o_(t){if(window.augmentPerformance=window.augmentPerformance||{},window.augmentPerformance.initialized)return;window.augmentPerformance.initialized=!0;let e=0,n=performance.now(),r=60;const s=[];let o=0;const i=t.lowFramerateThreshold,c=t.slowInpThreshold;if(requestAnimationFrame((function u(l){const d=l-n;if(e++,d>1e3){r=1e3*e/d,e=0,n=l,s.push(r),s.length>10&&s.shift();const p=s.reduce(((h,f)=>h+f),0)/s.length;if(r<i){console.error(`[Augment Performance] Slow framerate detected: ${r.toFixed(1)} fps`),console.error(`[Augment Performance] Avg framerate detected: ${p.toFixed(1)} fps`);const h=Ze({name:"slow_framerate",op:"performance.monitoring",attributes:{"performance.fps":r,"performance.avg_fps":p,"performance.threshold":i,"performance.is_critical":r<15,"webview.url":window.location.href}});h.setStatus({code:2,message:`Slow framerate: ${r.toFixed(1)} fps`}),h.end()}}requestAnimationFrame(u)})),PerformanceObserver.supportedEntryTypes.includes("event"))try{new PerformanceObserver((u=>{(l=>{const d=l.getEntries().filter((f=>"interactionId"in f&&"duration"in f&&f.startTime>0&&f.duration<1e6));if(d.length===0)return;d.sort(((f,m)=>m.duration-f.duration));const p=Math.floor(.98*d.length),h=d[Math.min(p,d.length-1)].duration;if(h>c){console.error(`[Augment Performance] Slow INP detected: ${h.toFixed(1)} ms`);let f=null;const m=d[0];m&&"target"in m&&(f=m.target,console.error("[Augment Performance] Slow interaction target:",f,m));const g=Ze({name:"slow_inp",op:"performance.monitoring",attributes:{"performance.inp":h,"performance.threshold":c,"performance.target":f?String(f):void 0,"webview.url":window.location.href}});g.setStatus({code:2,message:`Slow INP: ${h.toFixed(1)} ms`}),g.end(),h>o&&(o=h)}})(u)})).observe({entryTypes:["event","first-input"],buffered:!0})}catch(u){console.error("[Augment Performance] Error setting up INP monitoring:",u)}else console.warn("[Augment Performance] PerformanceObserver not supported for INP monitoring");window.augmentPerformance.getFramerate=()=>r,window.augmentPerformance.getWorstINP=()=>o,window.augmentPerformance.getAverageFramerate=()=>a();const a=()=>s.length===0?0:s.reduce(((u,l)=>u+l),0)/s.length;(function(u){if(Dr===null){const l=s_;Dr=window.setInterval(Sl,l)}})(),window.addEventListener("beforeunload",(()=>{Sl(),Dr!==null&&(window.clearInterval(Dr),Dr=null)}))}const wl=16,kl=200;function El(){return window.augmentFlags?.enablePerformanceMonitoring??!1}let hn=[],mn=null;const i_=1e3;function ea(){if(mn!==null&&(clearTimeout(mn),mn=null),hn.length!==0){for(const t of hn)Ee({category:"redux.action",message:t.count>1?`${t.type} (${t.count})`:t.type,level:"info",timestamp:t.timestamp});hn=[]}}function a_(t){const e=Date.now()/1e3,n=hn[hn.length-1];n&&n.type===t?n.count++:hn.push({type:t,count:1,timestamp:e}),hn.length>=100?ea():(mn!==null&&clearTimeout(mn),mn=setTimeout((()=>{ea(),mn=null}),i_))}const Nb=()=>t=>(t.getState,e=>n=>{const r=(function(s){return s.type})(n);return a_(r),e(n)});let xl=!1;function Tl(t,e,n,r,s=!1){const o=new RegExp(`${n}=([^,\\s]+)`),i=e.match(o);return i&&(t.tags=t.tags||{},t.tags[r||n]=i[1],s)?e.replace(new RegExp(`\\s*,?\\s*${n}=([^,\\s]+)`),"").trim():e}function c_(t){if(t.filename){if(t.filename.includes("augment.vscode")){const e=t.filename.lastIndexOf("augment.vscode");t.filename="/"+t.filename.substring(e)}t.filename=t.filename.replace(/\/Users\/[^/]+/,"/Users/***").replace(/\\Users\\[^\\]+/,"\\Users\\***")}return t}var Cl;Cl={log:(t,e,...n)=>{console.log(`[${t}] ${e}`,...n)},info:(t,...e)=>{console.info(t,...e)},debug:(t,...e)=>{console.debug(t,...e)},warn:(t,...e)=>{console.warn(t,...e)},error:(t,...e)=>{console.error(t,...e)},verbose:(t,...e)=>{console.debug(t,...e)}},un?un.warn("Attempting to initialize logger when one is already configured. Keeping existing logger."):un=Cl,oh("initialize").info("Logger initialized"),(function(){const t=!!window.augmentFlags?.sentry?.enabled;var e;(e={enabled:El(),lowFramerateThreshold:wl,slowInpThreshold:kl}).enabled&&o_({lowFramerateThreshold:e.lowFramerateThreshold||wl,slowInpThreshold:e.slowInpThreshold||kl}),El()&&!t&&console.warn("[Augment Performance] Performance monitoring enabled but Sentry is not initialized. Performance issues will not be reported to Sentry.")})(),(function(){const t=window.augmentFlags?.sentry;var e;if(t)if(t.enabled)if(xl)console.warn("Sentry is already initialized, duplicate initialization attempt");else try{(function(n){const r={...n};wd(r,"svelte"),wg(r)})({dsn:t.dsn,release:t.release,environment:t.environment,debug:t.debug||!1,tracesSampleRate:t.tracesSampleRate||0,replaysSessionSampleRate:t.replaysSessionSampleRate||0,replaysOnErrorSampleRate:t.replaysOnErrorSampleRate||0,sampleRate:t.errorSampleRate||0,sendDefaultPii:t.sendDefaultPii!==void 0&&t.sendDefaultPii,enableLogs:!0,integrations:(()=>{const n=[];t.tracesSampleRate&&t.tracesSampleRate>0&&n.push(Hy());const{replaysSessionSampleRate:r=0,replaysOnErrorSampleRate:s=0}=t;var o;return(r>0||s>0)&&n.push(new $y(o)),n.push(hm({iteratee:c_})),n.push(lm({levels:["error"]})),n})(),beforeSend:n=>{try{ea()}catch(r){console.error("Failed to flush Redux data to Sentry:",r)}if(t.release?.endsWith("@999.999.999")&&!t.debug)return null;if(n.exception?.values)for(const r of n.exception.values)r.type=Tl(n,r.type||"","requestType","request.type"),r.value=Tl(n,r.value||"","requestId","request.id",!0);return n}}),t.tags&&Object.entries(t.tags).forEach((([n,r])=>{(function(s,o){oe().setTag(s,o)})(n,String(r))})),e={id:t.userId||"default-user"},oe().setUser(e),xl=!0}catch(n){console.error("Failed to initialize Sentry:",n)}else console.warn("Sentry is disabled in webview configuration");else console.warn("Sentry configuration not found in window.augmentFlags.sentry")})();const Il=Rf(void 0);function u_(t){const e=new MutationObserver((n=>{for(const r of n)if(r.type==="attributes"){t(Af(),Of());break}}));return e.observe(fn(),{attributeFilter:[vo,_o],attributes:!0}),e}u_(((t,e)=>{Il.update((()=>({category:t,intensity:e})))})),Il.update((()=>({category:Af(),intensity:Of()})));function na(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");var l_=typeof global=="object"&&global&&global.Object===Object&&global,d_=typeof self=="object"&&self&&self.Object===Object&&self,Df=l_||d_||Function("return this")(),pi=function(){return Df.Date.now()},p_=/\s/,f_=/^\s+/;function h_(t){return t&&t.slice(0,(function(e){for(var n=e.length;n--&&p_.test(e.charAt(n)););return n})(t)+1).replace(f_,"")}var bo=Df.Symbol,Lf=Object.prototype,m_=Lf.hasOwnProperty,g_=Lf.toString,Lr=bo?bo.toStringTag:void 0,y_=Object.prototype.toString,v_="[object Null]",__="[object Undefined]",Rl=bo?bo.toStringTag:void 0;function b_(t){return t==null?t===void 0?__:v_:Rl&&Rl in Object(t)?(function(e){var n=m_.call(e,Lr),r=e[Lr];try{e[Lr]=void 0;var s=!0}catch{}var o=g_.call(e);return s&&(n?e[Lr]=r:delete e[Lr]),o})(t):(function(e){return y_.call(e)})(t)}function S_(t){return t!=null&&typeof t=="object"}var w_="[object Symbol]";function k_(t){return typeof t=="symbol"||S_(t)&&b_(t)==w_}var Ml=NaN,E_=/^[-+]0x[0-9a-f]+$/i,x_=/^0b[01]+$/i,T_=/^0o[0-7]+$/i,C_=parseInt;function Al(t){if(typeof t=="number")return t;if(k_(t))return Ml;if(na(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=na(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=h_(t);var n=x_.test(t);return n||T_.test(t)?C_(t.slice(2),n?2:8):E_.test(t)?Ml:+t}var I_=Math.max,R_=Math.min;function Fb(t,e,n){var r,s,o,i,c,a,u=0,l=!1,d=!1,p=!0;if(typeof t!="function")throw new TypeError("Expected a function");function h(S){var v=r,w=s;return r=s=void 0,u=S,i=t.apply(w,v)}function f(S){var v=S-a;return a===void 0||v>=e||v<0||d&&S-u>=o}function m(){var S=pi();if(f(S))return g(S);c=setTimeout(m,(function(v){var w=e-(v-a);return d?R_(w,o-(v-u)):w})(S))}function g(S){return c=void 0,p&&r?h(S):(r=s=void 0,i)}function y(){var S=pi(),v=f(S);if(r=arguments,s=this,a=S,v){if(c===void 0)return(function(w){return u=w,c=setTimeout(m,e),l?h(w):i})(a);if(d)return clearTimeout(c),c=setTimeout(m,e),h(a)}return c===void 0&&(c=setTimeout(m,e)),i}return e=Al(e)||0,na(n)&&(l=!!n.leading,o=(d="maxWait"in n)?I_(Al(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==void 0&&clearTimeout(c),u=0,r=a=s=c=void 0},y.flush=function(){return c===void 0?i:g(pi())},y}export{ze as $,oi as A,Ya as B,$_ as C,sv as D,$v as E,j_ as F,z_ as G,ov as H,Cb as I,Eb as J,sb as K,bb as L,Mb as M,Or as N,hb as O,H_ as P,V_ as Q,cb as R,ab as S,G_ as T,It as U,yb as V,is as W,Me as X,ib as Y,vb as Z,Sb as _,A_ as a,Rv as a$,le as a0,Z_ as a1,db as a2,gb as a3,Av as a4,Xn as a5,Pb as a6,Ob as a7,Mv as a8,Lb as a9,Ov as aA,k_ as aB,U_ as aC,Fb as aD,_b as aE,na as aF,Hp as aG,mb as aH,kb as aI,Xv as aJ,xb as aK,bo as aL,S_ as aM,Tb as aN,ob as aO,K_ as aP,Rb as aQ,Dv as aR,nv as aS,gv as aT,Ef as aU,os as aV,gr as aW,ja as aX,Ab as aY,X_ as aZ,Q_ as a_,u_ as aa,Af as ab,Qn as ac,Lv as ad,jv as ae,Pr as af,gl as ag,wb as ah,Jv as ai,t_ as aj,lt as ak,tn as al,qe as am,za as an,Ka as ao,F_ as ap,Po as aq,Mr as ar,Xi as as,L_ as at,N_ as au,rb as av,al as aw,pb as ax,Il as ay,Tv as az,_s as b,uv as b0,nb as b1,B_ as b2,ub as b3,vs as b4,D_ as b5,Ib as b6,fv as b7,Al as b8,Zv as b9,M_ as bA,Ga as ba,P_ as bb,Gv as bc,oh as bd,Bv as be,Kv as bf,Za as bg,q_ as bh,Xe as bi,lb as bj,r_ as bk,Yv as bl,W_ as bm,ga as bn,b_ as bo,Df as bp,l_ as bq,Ua as br,Ky as bs,Db as bt,Qv as bu,Nb as bv,fb as bw,Pf as bx,zn as by,bl as bz,mr as c,pv as d,ye as e,Gr as f,av as g,pt as h,gs as i,Y_ as j,mv as k,Nn as l,ef as m,O_ as n,Mt as o,eb as p,Dn as q,qp as r,en as s,Oo as t,Ds as u,J_ as v,Rf as w,yt as x,tb as y,Do as z};
//# sourceMappingURL=debounce-BNOmQ76Y.js.map
