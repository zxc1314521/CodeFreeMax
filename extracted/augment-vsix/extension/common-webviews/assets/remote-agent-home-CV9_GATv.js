import{D as ve,E as ae,$ as ze,a5 as Le,a6 as We,K as m,Y as M,a1 as T,a2 as J,R as i,P as f,Q as u,T as I,O as y,o as e,H as me,a0 as X,G as l,a4 as Ge,az as Qe,ag as qe,a3 as ne,aH as Je,S as Be,F as xe,I as Me,J as Ke,k as Xe,ai as Ye,aC as Ne,ae as Ze,av as Ve,aw as et,ax as tt}from"./debounce-BNOmQ76Y.js";import"./design-system-init-DYAh9Pko.js";/* empty css                                */import"./legacy-2-VBD5Kq.js";import{i as at}from"./lifecycle-CWu4CNTE.js";import{M as nt}from"./message-broker-DUQuEFlt.js";import{R as st,g as rt,S as je,v as it,a as ot}from"./RemoteAgentStatusIndicator-gpVGge6K.js";import{S as lt}from"./shared-webview-store-model-CL3-OUxX.js";import{T as K,I as se,S as dt}from"./Icon-CohttyM7.js";import{a as Y,R as Oe,s as gt}from"./index-Dqp5W2S2.js";import{T as Ie,a as Pe,C as ct}from"./TextTooltipAugment-CGvqFHAr.js";import{C as ut}from"./CalloutAugment-BTDUhyqD.js";import{I as Ee}from"./IconButtonAugment-DO0xxfgT.js";import{b as vt,s as mt}from"./utils-C8k4ijpS.js";import{R as pt,B as ft}from"./RepoBadge-DNGwkTuQ.js";import{R as Te}from"./remote-agents-client-DkZKHKJj.js";import"./types-M1pd3FSp.js";try{ge=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},(Ue=new ge.Error().stack)&&(ge._sentryDebugIds=ge._sentryDebugIds||{},ge._sentryDebugIds[Ue]="8e89a396-8780-4be4-85fd-2136f93a49c5",ge._sentryDebugIdIdentifier="sentry-dbid-8e89a396-8780-4be4-85fd-2136f93a49c5")}catch{}var ge,Ue,_t=m(" <!>",1),ht=m('<div class="agent-card-footer svelte-1paeqiw"><!> <div class="time-container"><!></div></div>'),wt=m('<div class="task-text-container svelte-4rg3b7"><!></div>'),St=m('<div class="task-status-indicator svelte-4rg3b7"><!></div>'),yt=m('<div class="task-item svelte-4rg3b7"><div></div> <!> <!></div>'),$t=m(' <button class="error-dismiss svelte-6tidju" aria-label="Dismiss error">×</button>',1),bt=m('<div class="deletion-error svelte-6tidju"><!></div>'),kt=m('<span class="setup-script-title svelte-6tidju">Generate a setup script</span>'),At=m('<div class="setup-script-title-container svelte-6tidju"><div class="setup-script-badge svelte-6tidju"><!></div> <!></div>'),Rt=m('<div class="tasks-list svelte-6tidju"></div>'),It=m('<div class="card-commit-info svelte-6tidju"><!> <!></div>'),Pt=m('<div class="card-header svelte-6tidju"><div class="session-summary-container svelte-6tidju"><!></div> <div class="card-info"><!></div></div> <div class="card-content svelte-6tidju"><!> <!></div> <div class="card-actions svelte-6tidju"><!> <!> <!></div> <!>',1),Tt=m("<div><!> <!></div>");function zt(L,a){ve(a,!0);let k=ae(a,"selected",3,!1),P=ae(a,"isPinned",3,!1),z=ae(a,"deletionError",15,null),E=ae(a,"isDeleting",11,!1),$=l((()=>a.sshConfig||{onSSH:()=>Promise.resolve(!1),canSSH:!1})),j=l((()=>e($).onSSH)),C=l((()=>e($).canSSH)),h=ze(null);function R(){z(null),e(h)&&(clearTimeout(e(h)),X(h,null))}let S=l((()=>a.agent.turn_summaries||[])),U=l((()=>a.agent.workspace_setup?.starting_files?.github_commit_ref?.repository_url)),Z=l((()=>e(U)?rt(e(U)):void 0)),Q=l((()=>a.agent.workspace_setup?.starting_files?.github_commit_ref?.git_ref));We((()=>{R()}));var V=Tt();let A;var b=f(V),W=w=>{var pe=bt(),re=f(pe);ut(re,{variant:"soft",color:"error",size:1,icon:p=>{se(p,{name:"circle-alert"})},children:(p,g)=>{var q=$t(),G=I(q);u(G).__click=R,T((()=>J(G,`${z()??""} `))),i(p,q)},$$slots:{icon:!0,default:!0}}),i(w,pe)};y(b,(w=>{z()&&w(W)}));var d=u(b,2);ct(d,{variant:"surface",size:2,interactive:!0,onclick:()=>a.onSelect(a.agent.remote_agent_id),onkeydown:w=>w.key==="Enter"&&a.onSelect(a.agent.remote_agent_id),class:"agent-card",children:(w,pe)=>{var re=Pt(),fe=I(re),p=f(fe),g=f(p),q=c=>{var n=At(),r=f(n),o=f(r);se(o,{name:"terminal"});var v=u(r,2);K(v,{size:2,weight:"medium",children:(s,t)=>{var _=kt();i(s,_)},$$slots:{default:!0}}),i(c,n)},G=c=>{K(c,{size:2,weight:"medium",class:"session-text",children:(n,r)=>{var o=M();T((()=>J(o,a.agent.session_summary))),i(n,o)},$$slots:{default:!0}})};y(g,(c=>{a.agent.is_setup_script_agent?c(q):c(G,!1)}));var _e=u(p,2),x=f(_e);st(x,{get status(){return a.agent.status},get workspaceStatus(){return a.agent.workspace_status},isExpanded:!0,get hasUpdates(){return a.agent.has_updates}});var N=u(fe,2),B=f(N),he=c=>{var n=Rt();ne(n,21,(()=>e(S).slice(0,3)),Je,((r,o)=>{(function(v,s){ve(s,!0);let t=ae(s,"status",3,"info"),_=l((()=>(function(D){switch(D){case"success":return"task-success";case"warning":return"task-warning";case"error":return"task-error";default:return"task-info"}})(t())));var ie=yt(),oe=f(ie),F=u(oe,2);{let D=l((()=>[Pe.Hover]));Ie(F,{get content(){return s.text},get triggerOn(){return e(D)},maxWidth:"400px",children:(le,Re)=>{var de=wt(),O=f(de);K(O,{size:1,color:"secondary",children:(te,De)=>{var Ce=M();T((()=>J(Ce,s.text))),i(te,Ce)},$$slots:{default:!0}}),i(le,de)},$$slots:{default:!0}})}var H=u(F,2),ee=D=>{var le=St(),Re=f(le);{let de=l((()=>t()==="error"?"error":"neutral"));K(Re,{size:1,get color(){return e(de)},children:(O,te)=>{var De=M();T((()=>J(De,t()==="error"?"!":t()==="warning"?"⚠":""))),i(O,De)},$$slots:{default:!0}})}i(D,le)};y(H,(D=>{t()!=="error"&&t()!=="warning"||D(ee)})),T((()=>Ge(oe,1,`bullet-point ${e(_)??""}`,"svelte-4rg3b7"))),i(v,ie),me()})(r,{get text(){return e(o)},status:"success"})})),i(c,n)};y(B,(c=>{e(S).length>0&&c(he)}));var we=u(B,2),Se=c=>{var n=It(),r=f(n);pt(r,{get repoUrl(){return e(U)},get repoName(){return e(Z)}});var o=u(r,2);ft(o,{get repoUrl(){return e(U)},get branchName(){return e(Q)}}),i(c,n)};y(we,(c=>{e(U)&&e(Z)&&e(Q)&&c(Se)}));var ye=u(N,2),$e=f(ye),be=c=>{{let n=l((()=>P()?"Unpin agent":"Pin agent")),r=l((()=>[Pe.Hover]));Ie(c,{get content(){return e(n)},get triggerOn(){return e(r)},side:"top",children:(o,v)=>{Ee(o,{variant:"ghost",color:"neutral",size:1,onclick:s=>{s.stopPropagation(),a.onTogglePinned()},children:(s,t)=>{var _=Be(),ie=I(_),oe=H=>{se(H,{name:"pin-off"})},F=H=>{se(H,{name:"pin"})};y(ie,(H=>{P()?H(oe):H(F,!1)})),i(s,_)},$$slots:{default:!0}})},$$slots:{default:!0}})}};y($e,(c=>{a.onTogglePinned&&c(be)}));var ke=u($e,2),Ae=c=>{{let n=l((()=>[Pe.Hover]));Ie(c,{content:"SSH to agent",get triggerOn(){return e(n)},side:"top",children:(r,o)=>{{let v=l((()=>!e(C))),s=l((()=>e(C)?"SSH to agent":"SSH to agent (agent must be running or idle)"));Ee(r,{get disabled(){return e(v)},variant:"ghost",color:"neutral",size:1,onclick:t=>{t.stopPropagation(),e(j)()},get title(){return e(s)},children:(t,_)=>{se(t,{name:"terminal"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}};y(ke,(c=>{a.sshConfig&&c(Ae)}));var Fe=u(ke,2);{let c=l((()=>[Pe.Hover]));Ie(Fe,{content:"Delete agent",get triggerOn(){return e(c)},side:"top",children:(n,r)=>{{let o=l((()=>E()?"Deleting agent...":"Delete agent"));Ee(n,{variant:"ghost",color:"neutral",size:1,get disabled(){return E()},onclick:v=>{v.stopPropagation(),a.onDelete(a.agent.remote_agent_id)},get title(){return e(o)},children:(v,s)=>{se(v,{name:"trash-2"})},$$slots:{default:!0}})}},$$slots:{default:!0}})}var He=u(ye,2);{let c=l((()=>a.agent.updated_at||a.agent.started_at));(function(n,r){ve(r,!0);let o=ae(r,"isRemote",3,!1),v=ze(Le(vt(r.timestamp)));const s=mt(r.timestamp,(F=>{X(v,F,!0)}));We((()=>{s()}));var t=ht(),_=f(t);K(_,{size:1,color:"secondary",class:"location-text",children:(F,H)=>{var ee=M();T((()=>J(ee,o()?"Running in the cloud":"Running locally"))),i(F,ee)},$$slots:{default:!0}});var ie=u(_,2),oe=f(ie);K(oe,{size:1,color:"secondary",class:"time-text",children:(F,H)=>{var ee=_t(),D=I(ee),le=u(D),Re=O=>{var te=M();T((()=>J(te,e(v)))),i(O,te)},de=O=>{var te=M("Unknown time");i(O,te)};y(le,(O=>{r.timestamp?O(Re):O(de,!1)})),T((()=>J(D,(r.status===Y.agentRunning?"Last updated":"Started")+" "))),i(F,ee)},$$slots:{default:!0}}),i(n,t),me()})(He,{isRemote:!0,get status(){return a.agent.status},get timestamp(){return e(c)}})}T((()=>qe(p,"title",a.agent.is_setup_script_agent?"Generate a setup script":a.agent.session_summary))),i(w,re)},$$slots:{default:!0}}),T((()=>A=Ge(V,1,"card-wrapper svelte-6tidju",null,A,{"selected-card":k(),"setup-script-card":a.agent.is_setup_script_agent,deleting:E()}))),i(L,V),me()}function ce(L,a){ve(a,!0);const k=()=>Ke(j,"$sharedWebviewStore",P),[P,z]=Me();let E=ae(a,"selected",3,!1);const $=xe(Te.key),j=xe(je);let C=ze(!1),h=ze(null),R=null;function S(){X(h,null),R&&(clearTimeout(R),R=null)}let U=l((()=>k().state?.pinnedAgents||{})),Z=l((()=>e(U)?.[a.agent.remote_agent_id]===!0)),Q=l((()=>a.agent.status===Y.agentRunning||a.agent.status===Y.agentIdle));async function V(){return!!e(Q)&&await(async A=>await $.sshToRemoteAgent(A.remote_agent_id))(a.agent)}{let A=l((()=>({onSSH:V,canSSH:e(Q)})));zt(L,{get agent(){return a.agent},get selected(){return E()},get isPinned(){return e(Z)},get onSelect(){return a.onSelect},onDelete:()=>(async function(b){S(),X(C,!0);const W=k().state?.agentOverviews||[];try{if(!await $.deleteRemoteAgent(b))throw new Error("Failed to delete agent");if(j.update((d=>{if(d)return{...d,agentOverviews:d.agentOverviews.filter((w=>w.remote_agent_id!==b))}})),(k().state?.pinnedAgents||{})[b])try{await $.deletePinnedAgentFromStore(b);const d=await $.getPinnedAgentsFromStore();j.update((w=>{if(w)return{...w,pinnedAgents:d}}))}catch(d){console.error("Failed to remove pinned status:",d)}}catch(d){console.error("Failed to delete agent:",d),j.update((w=>{if(w)return{...w,agentOverviews:W}})),X(h,d instanceof Error?d.message:"Failed to delete agent",!0),R=setTimeout((()=>{S()}),5e3)}finally{X(C,!1)}})(a.agent.remote_agent_id),onTogglePinned:()=>(async function(b){try{e(Z)?await $.deletePinnedAgentFromStore(b):await $.savePinnedAgentToStore(b,!0);const W=await $.getPinnedAgentsFromStore();j.update((d=>{if(d)return{...d,pinnedAgents:W}}))}catch(W){console.error("Failed to toggle pinned status:",W)}})(a.agent.remote_agent_id),get sshConfig(){return e(A)},get deletionError(){return e(h)},set deletionError(b){X(h,b,!0)},get isDeleting(){return e(C)},set isDeleting(b){X(C,b,!0)}})}me(),z()}Qe(["click"]);var xt=m('<div class="section-header svelte-te8d84"><!></div>');function ue(L,a){var k=xt(),P=f(k);K(P,{size:2,color:"secondary",children:(z,E)=>{var $=M();T((()=>J($,a.title))),i(z,$)},$$slots:{default:!0}}),i(L,k)}var Ft=m('<div class="empty-state svelte-1verd7n"><div class="l-loading-container svelte-1verd7n"><!> <!></div></div>'),Ht=m('<div class="empty-state svelte-1verd7n"><!></div>'),Dt=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),Ot=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),Et=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),jt=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),Ct=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),Ut=m('<!> <div class="agent-grid svelte-1verd7n"></div>',1),Wt=m("<!> <!> <!> <!> <!> <!>",1),Gt=m('<div class="agent-list svelte-1verd7n"><!></div>'),Nt=m('<div class="l-main svelte-1foua77"><h1 class="l-main__title svelte-1foua77"><span class="l-main__title-logo svelte-1foua77"><!></span> Remote Agents</h1> <!></div>');tt((function(L,a){ve(a,!1);const k=new nt(Ye),P=new lt(k,void 0,it,ot);k.registerConsumer(P),Ne(je,P);const z=new Te(k);Ne(Te.key,z),Ze((()=>(P.fetchStateFromExtension().then((()=>{P.update((h=>{if(!h)return;const R=[...h.activeWebviews,"home"];return h.pinnedAgents?{...h,activeWebviews:R}:{...h,activeWebviews:R,pinnedAgents:{}}}))})),()=>{k.dispose(),z.dispose()}))),at();var E=Nt();Ve("message",et,(function(...h){k.onMessageFromExtension?.apply(this,h)}));var $=f(E),j=f($),C=f(j);se(C,{name:"augment-logo"}),(function(h,R){ve(R,!0);const S=()=>Ke(Q,"$sharedWebviewStore",U),[U,Z]=Me(),Q=xe(je),V=xe(Te.key);function A(p){Q.update((g=>{if(g)return{...g,selectedAgentId:p}}))}let b=l((()=>gt(S().state?.agentOverviews||[]))),W=l((()=>S().state?.pinnedAgents||{})),d=l((()=>e(b).reduce(((p,g)=>(e(W)?.[g.remote_agent_id]===!0?p.pinned.push(g):g.status===Y.agentIdle&&g.has_updates?p.readyToReview.push(g):g.status===Y.agentRunning||g.status===Y.agentStarting||g.workspace_status===Oe.workspaceResuming?p.running.push(g):g.status===Y.agentFailed?p.failed.push(g):g.status===Y.agentIdle||g.workspace_status===Oe.workspacePaused||g.workspace_status===Oe.workspacePausing?p.idle.push(g):p.additional.push(g),p)),{pinned:[],readyToReview:[],running:[],idle:[],failed:[],additional:[]})));Xe((()=>{S().state?.agentOverviews||V.focusAugmentPanel()}));var w=Gt(),pe=f(w),re=p=>{var g=Ft(),q=f(g),G=f(q);dt(G,{});var _e=u(G,2);K(_e,{size:3,color:"secondary",children:(x,N)=>{var B=M("Loading the Augment panel...");i(x,B)},$$slots:{default:!0}}),i(p,g)},fe=p=>{var g=Be(),q=I(g),G=x=>{var N=Ht(),B=f(N);K(B,{size:3,color:"secondary",children:(he,we)=>{var Se=M("No agents available");i(he,Se)},$$slots:{default:!0}}),i(x,N)},_e=x=>{var N=Wt(),B=I(N),he=n=>{var r=Dt(),o=I(r);ue(o,{title:"Pinned"});var v=u(o,2);ne(v,23,(()=>e(d).pinned),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(B,(n=>{e(d).pinned.length>0&&n(he)}));var we=u(B,2),Se=n=>{var r=Ot(),o=I(r);ue(o,{title:"Ready to review"});var v=u(o,2);ne(v,23,(()=>e(d).readyToReview),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(we,(n=>{e(d).readyToReview.length>0&&n(Se)}));var ye=u(we,2),$e=n=>{var r=Et(),o=I(r);ue(o,{title:"Running agents"});var v=u(o,2);ne(v,23,(()=>e(d).running),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(ye,(n=>{e(d).running.length>0&&n($e)}));var be=u(ye,2),ke=n=>{var r=jt(),o=I(r);ue(o,{title:"Idle agents"});var v=u(o,2);ne(v,23,(()=>e(d).idle),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(be,(n=>{e(d).idle.length>0&&n(ke)}));var Ae=u(be,2),Fe=n=>{var r=Ct(),o=I(r);ue(o,{title:"Failed agents"});var v=u(o,2);ne(v,23,(()=>e(d).failed),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(Ae,(n=>{e(d).failed.length>0&&n(Fe)}));var He=u(Ae,2),c=n=>{var r=Ut(),o=I(r);ue(o,{title:"Other agents"});var v=u(o,2);ne(v,23,(()=>e(d).additional),((s,t)=>s.remote_agent_id+t),((s,t)=>{{let _=l((()=>e(t).remote_agent_id===S().state?.selectedAgentId));ce(s,{get agent(){return e(t)},get selected(){return e(_)},onSelect:A})}})),i(n,r)};y(He,(n=>{e(d).additional.length>0&&n(c)})),i(x,N)};y(q,(x=>{S().state?.agentOverviews.length===0?x(G):x(_e,!1)}),!0),i(p,g)};y(pe,(p=>{S().state?.agentOverviews?p(fe,!1):p(re)})),i(h,w),me(),Z()})(u($,2),{}),i(L,E),me()}),{target:document.getElementById("app")});
//# sourceMappingURL=remote-agent-home-CV9_GATv.js.map
