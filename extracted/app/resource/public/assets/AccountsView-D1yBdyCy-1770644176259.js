import{h as So,i as zt,j as Ae,k as ae,l as Y,m as pt,p as me,q as $o,s as zo,x as It,r as c,y as mt,z as Pt,A as Rt,B as gt,C as Ye,d as Ce,D as Me,E as Ro,F as it,G as U,H as dt,I as Lt,J as Nt,K as To,L as Fo,c as l,b as t,g as a,M as ht,N as Vt,O as Mo,P as le,Q as D,R as d,S as _e,T as $,U as m,f as _,V as Tt,t as u,W as Ao,X as Fe,Y as Ft,Z as Uo,_ as Do,o as Bo,$ as Io,a0 as Mt,a1 as f,a2 as Po,a3 as pe,n as h,a4 as Lo,a5 as No,a6 as Ie,a7 as vt,a8 as ke,a9 as bt,aa as oe,ab as ft,w as se,ac as At,ad as Te,ae as Ut,af as Vo,ag as jo,ah as Eo,ai as Ho,aj as Wo,ak as Oo,al as qo,am as Go,an as Jo,ao as Ko,ap as Xo,aq as Qo}from"./index-BOz7fGOk-1770644176259.js";import{N as Dt,a as Yo,C as Zo}from"./Copy-ZN2Hw16M-1770644176259.js";import{_ as jt}from"./_plugin-vue_export-helper-DlAUqK2U-1770644176259.js";function es(v,n="default",r=[]){const w=v.$slots[n];return w===void 0?r:w()}const ts={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"};function os(v){const{borderColor:n,primaryColor:r,baseColor:p,textColorDisabled:w,inputColorDisabled:R,textColor2:z,opacityDisabled:F,borderRadius:k,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:T,heightSmall:B,heightMedium:j,heightLarge:x,lineHeight:M}=v;return Object.assign(Object.assign({},ts),{labelLineHeight:M,buttonHeightSmall:B,buttonHeightMedium:j,buttonHeightLarge:x,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:T,boxShadow:`inset 0 0 0 1px ${n}`,boxShadowActive:`inset 0 0 0 1px ${r}`,boxShadowFocus:`inset 0 0 0 1px ${r}, 0 0 0 2px ${zt(r,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${r}`,boxShadowDisabled:`inset 0 0 0 1px ${n}`,color:p,colorDisabled:R,colorActive:"#0000",textColor:z,textColorDisabled:w,dotColorActive:r,dotColorDisabled:n,buttonBorderColor:n,buttonBorderColorActive:r,buttonBorderColorHover:n,buttonColor:p,buttonColorActive:p,buttonTextColor:z,buttonTextColorActive:r,buttonTextColorHover:r,opacityDisabled:F,buttonBoxShadowFocus:`inset 0 0 0 1px ${r}, 0 0 0 2px ${zt(r,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:k})}const Et={common:So,self:os},ss=Ae("radio",`
 line-height: var(--n-label-line-height);
 outline: none;
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 align-items: flex-start;
 flex-wrap: nowrap;
 font-size: var(--n-font-size);
 word-break: break-word;
`,[ae("checked",[Y("dot",`
 background-color: var(--n-color-active);
 `)]),Y("dot-wrapper",`
 position: relative;
 flex-shrink: 0;
 flex-grow: 0;
 width: var(--n-radio-size);
 `),Ae("radio-input",`
 position: absolute;
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),Y("dot",`
 position: absolute;
 top: 50%;
 left: 0;
 transform: translateY(-50%);
 height: var(--n-radio-size);
 width: var(--n-radio-size);
 background: var(--n-color);
 box-shadow: var(--n-box-shadow);
 border-radius: 50%;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `,[me("&::before",`
 content: "";
 opacity: 0;
 position: absolute;
 left: 4px;
 top: 4px;
 height: calc(100% - 8px);
 width: calc(100% - 8px);
 border-radius: 50%;
 transform: scale(.8);
 background: var(--n-dot-color-active);
 transition: 
 opacity .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 transform .3s var(--n-bezier);
 `),ae("checked",{boxShadow:"var(--n-box-shadow-active)"},[me("&::before",`
 opacity: 1;
 transform: scale(1);
 `)])]),Y("label",`
 color: var(--n-text-color);
 padding: var(--n-label-padding);
 font-weight: var(--n-label-font-weight);
 display: inline-block;
 transition: color .3s var(--n-bezier);
 `),pt("disabled",`
 cursor: pointer;
 `,[me("&:hover",[Y("dot",{boxShadow:"var(--n-box-shadow-hover)"})]),ae("focus",[me("&:not(:active)",[Y("dot",{boxShadow:"var(--n-box-shadow-focus)"})])])]),ae("disabled",`
 cursor: not-allowed;
 `,[Y("dot",{boxShadow:"var(--n-box-shadow-disabled)",backgroundColor:"var(--n-color-disabled)"},[me("&::before",{backgroundColor:"var(--n-dot-color-disabled)"}),ae("checked",`
 opacity: 1;
 `)]),Y("label",{color:"var(--n-text-color-disabled)"}),Ae("radio-input",`
 cursor: not-allowed;
 `)])]),ls={name:String,value:{type:[String,Number,Boolean],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},label:String,size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,default:void 0}},Ht=$o("n-radio-group");function as(v){const n=zo(Ht,null),r=It(v,{mergedSize(A){const{size:K}=v;if(K!==void 0)return K;if(n){const{mergedSizeRef:{value:L}}=n;if(L!==void 0)return L}return A?A.mergedSize.value:"medium"},mergedDisabled(A){return!!(v.disabled||n?.disabledRef.value||A?.disabled.value)}}),{mergedSizeRef:p,mergedDisabledRef:w}=r,R=c(null),z=c(null),F=c(v.defaultChecked),k=mt(v,"checked"),y=Pt(k,F),C=Rt(()=>n?n.valueRef.value===v.value:y.value),T=Rt(()=>{const{name:A}=v;if(A!==void 0)return A;if(n)return n.nameRef.value}),B=c(!1);function j(){if(n){const{doUpdateValue:A}=n,{value:K}=v;Ye(A,K)}else{const{onUpdateChecked:A,"onUpdate:checked":K}=v,{nTriggerFormInput:L,nTriggerFormChange:I}=r;A&&Ye(A,!0),K&&Ye(K,!0),L(),I(),F.value=!0}}function x(){w.value||C.value||j()}function M(){x(),R.value&&(R.value.checked=C.value)}function X(){B.value=!1}function H(){B.value=!0}return{mergedClsPrefix:n?n.mergedClsPrefixRef:gt(v).mergedClsPrefixRef,inputRef:R,labelRef:z,mergedName:T,mergedDisabled:w,renderSafeChecked:C,focus:B,mergedSize:p,handleRadioInputChange:M,handleRadioInputBlur:X,handleRadioInputFocus:H}}const rs=Object.assign(Object.assign({},it.props),ls),nt=Ce({name:"Radio",props:rs,setup(v){const n=as(v),r=it("Radio","-radio",ss,Et,v,n.mergedClsPrefix),p=U(()=>{const{mergedSize:{value:y}}=n,{common:{cubicBezierEaseInOut:C},self:{boxShadow:T,boxShadowActive:B,boxShadowDisabled:j,boxShadowFocus:x,boxShadowHover:M,color:X,colorDisabled:H,colorActive:A,textColor:K,textColorDisabled:L,dotColorActive:I,dotColorDisabled:N,labelPadding:q,labelLineHeight:ge,labelFontWeight:he,[dt("fontSize",y)]:ce,[dt("radioSize",y)]:W}}=r.value;return{"--n-bezier":C,"--n-label-line-height":ge,"--n-label-font-weight":he,"--n-box-shadow":T,"--n-box-shadow-active":B,"--n-box-shadow-disabled":j,"--n-box-shadow-focus":x,"--n-box-shadow-hover":M,"--n-color":X,"--n-color-active":A,"--n-color-disabled":H,"--n-dot-color-active":I,"--n-dot-color-disabled":N,"--n-font-size":ce,"--n-radio-size":W,"--n-text-color":K,"--n-text-color-disabled":L,"--n-label-padding":q}}),{inlineThemeDisabled:w,mergedClsPrefixRef:R,mergedRtlRef:z}=gt(v),F=Lt("Radio",z,R),k=w?Nt("radio",U(()=>n.mergedSize.value[0]),p,v):void 0;return Object.assign(n,{rtlEnabled:F,cssVars:w?void 0:p,themeClass:k?.themeClass,onRender:k?.onRender})},render(){const{$slots:v,mergedClsPrefix:n,onRender:r,label:p}=this;return r?.(),Me("label",{class:[`${n}-radio`,this.themeClass,this.rtlEnabled&&`${n}-radio--rtl`,this.mergedDisabled&&`${n}-radio--disabled`,this.renderSafeChecked&&`${n}-radio--checked`,this.focus&&`${n}-radio--focus`],style:this.cssVars},Me("div",{class:`${n}-radio__dot-wrapper`}," ",Me("div",{class:[`${n}-radio__dot`,this.renderSafeChecked&&`${n}-radio__dot--checked`]}),Me("input",{ref:"inputRef",type:"radio",class:`${n}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur})),Ro(v.default,w=>!w&&!p?null:Me("div",{ref:"labelRef",class:`${n}-radio__label`},w||p)))}}),ns=Ae("radio-group",`
 display: inline-block;
 font-size: var(--n-font-size);
`,[Y("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 background: var(--n-button-border-color);
 `,[ae("checked",{backgroundColor:"var(--n-button-border-color-active)"}),ae("disabled",{opacity:"var(--n-opacity-disabled)"})]),ae("button-group",`
 white-space: nowrap;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[Ae("radio-button",{height:"var(--n-height)",lineHeight:"var(--n-height)"}),Y("splitor",{height:"var(--n-height)"})]),Ae("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 background: var(--n-button-color);
 color: var(--n-button-text-color);
 border-top: 1px solid var(--n-button-border-color);
 border-bottom: 1px solid var(--n-button-border-color);
 `,[Ae("radio-input",`
 pointer-events: none;
 position: absolute;
 border: 0;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 opacity: 0;
 z-index: 1;
 `),Y("state-border",`
 z-index: 1;
 pointer-events: none;
 position: absolute;
 box-shadow: var(--n-button-box-shadow);
 transition: box-shadow .3s var(--n-bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),me("&:first-child",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 border-left: 1px solid var(--n-button-border-color);
 `,[Y("state-border",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 `)]),me("&:last-child",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 border-right: 1px solid var(--n-button-border-color);
 `,[Y("state-border",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 `)]),pt("disabled",`
 cursor: pointer;
 `,[me("&:hover",[Y("state-border",`
 transition: box-shadow .3s var(--n-bezier);
 box-shadow: var(--n-button-box-shadow-hover);
 `),pt("checked",{color:"var(--n-button-text-color-hover)"})]),ae("focus",[me("&:not(:active)",[Y("state-border",{boxShadow:"var(--n-button-box-shadow-focus)"})])])]),ae("checked",`
 background: var(--n-button-color-active);
 color: var(--n-button-text-color-active);
 border-color: var(--n-button-border-color-active);
 `),ae("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `)])]);function ds(v,n,r){var p;const w=[];let R=!1;for(let z=0;z<v.length;++z){const F=v[z],k=(p=F.type)===null||p===void 0?void 0:p.name;k==="RadioButton"&&(R=!0);const y=F.props;if(k!=="RadioButton"){w.push(F);continue}if(z===0)w.push(F);else{const C=w[w.length-1].props,T=n===C.value,B=C.disabled,j=n===y.value,x=y.disabled,M=(T?2:0)+(B?0:1),X=(j?2:0)+(x?0:1),H={[`${r}-radio-group__splitor--disabled`]:B,[`${r}-radio-group__splitor--checked`]:T},A={[`${r}-radio-group__splitor--disabled`]:x,[`${r}-radio-group__splitor--checked`]:j},K=M<X?A:H;w.push(Me("div",{class:[`${r}-radio-group__splitor`,K]}),F)}}return{children:w,isButtonGroup:R}}const is=Object.assign(Object.assign({},it.props),{name:String,value:[String,Number,Boolean],defaultValue:{type:[String,Number,Boolean],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),Bt=Ce({name:"RadioGroup",props:is,setup(v){const n=c(null),{mergedSizeRef:r,mergedDisabledRef:p,nTriggerFormChange:w,nTriggerFormInput:R,nTriggerFormBlur:z,nTriggerFormFocus:F}=It(v),{mergedClsPrefixRef:k,inlineThemeDisabled:y,mergedRtlRef:C}=gt(v),T=it("Radio","-radio-group",ns,Et,v,k),B=c(v.defaultValue),j=mt(v,"value"),x=Pt(j,B);function M(I){const{onUpdateValue:N,"onUpdate:value":q}=v;N&&Ye(N,I),q&&Ye(q,I),B.value=I,w(),R()}function X(I){const{value:N}=n;N&&(N.contains(I.relatedTarget)||F())}function H(I){const{value:N}=n;N&&(N.contains(I.relatedTarget)||z())}Fo(Ht,{mergedClsPrefixRef:k,nameRef:mt(v,"name"),valueRef:x,disabledRef:p,mergedSizeRef:r,doUpdateValue:M});const A=Lt("Radio",C,k),K=U(()=>{const{value:I}=r,{common:{cubicBezierEaseInOut:N},self:{buttonBorderColor:q,buttonBorderColorActive:ge,buttonBorderRadius:he,buttonBoxShadow:ce,buttonBoxShadowFocus:W,buttonBoxShadowHover:b,buttonColor:V,buttonColorActive:xe,buttonTextColor:Se,buttonTextColorActive:Z,buttonTextColorHover:Le,opacityDisabled:$e,[dt("buttonHeight",I)]:we,[dt("fontSize",I)]:Ne}}=T.value;return{"--n-font-size":Ne,"--n-bezier":N,"--n-button-border-color":q,"--n-button-border-color-active":ge,"--n-button-border-radius":he,"--n-button-box-shadow":ce,"--n-button-box-shadow-focus":W,"--n-button-box-shadow-hover":b,"--n-button-color":V,"--n-button-color-active":xe,"--n-button-text-color":Se,"--n-button-text-color-hover":Le,"--n-button-text-color-active":Z,"--n-height":we,"--n-opacity-disabled":$e}}),L=y?Nt("radio-group",U(()=>r.value[0]),K,v):void 0;return{selfElRef:n,rtlEnabled:A,mergedClsPrefix:k,mergedValue:x,handleFocusout:H,handleFocusin:X,cssVars:y?void 0:K,themeClass:L?.themeClass,onRender:L?.onRender}},render(){var v;const{mergedValue:n,mergedClsPrefix:r,handleFocusin:p,handleFocusout:w}=this,{children:R,isButtonGroup:z}=ds(To(es(this)),n,r);return(v=this.onRender)===null||v===void 0||v.call(this),Me("div",{onFocusin:p,onFocusout:w,ref:"selfElRef",class:[`${r}-radio-group`,this.rtlEnabled&&`${r}-radio-group--rtl`,this.themeClass,z&&`${r}-radio-group--button-group`],style:this.cssVars},R)}}),us={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},cs=Ce({name:"Create",render:function(n,r){return a(),l("svg",us,r[0]||(r[0]=[t("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),t("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),t("path",{d:"M386.34 193.66L264.45 315.79A41.08 41.08 0 0 1 247.58 326l-25.9 8.67a35.92 35.92 0 0 1-44.33-44.33l8.67-25.9a41.08 41.08 0 0 1 10.19-16.87l122.13-121.91a8 8 0 0 0-5.65-13.66H104a56 56 0 0 0-56 56v240a56 56 0 0 0 56 56h240a56 56 0 0 0 56-56V199.31a8 8 0 0 0-13.66-5.65z",fill:"currentColor"},null,-1)]))}}),vs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},bs=Ce({name:"Flash",render:function(n,r){return a(),l("svg",vs,r[0]||(r[0]=[t("path",{d:"M194.82 496a18.36 18.36 0 0 1-18.1-21.53v-.11L204.83 320H96a16 16 0 0 1-12.44-26.06L302.73 23a18.45 18.45 0 0 1 32.8 13.71c0 .3-.08.59-.13.89L307.19 192H416a16 16 0 0 1 12.44 26.06L209.24 489a18.45 18.45 0 0 1-14.42 7z",fill:"currentColor"},null,-1)]))}}),fs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ps=Ce({name:"Refresh",render:function(n,r){return a(),l("svg",fs,r[0]||(r[0]=[t("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),ms={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gs=Ce({name:"Trash",render:function(n,r){return a(),l("svg",ms,r[0]||(r[0]=[t("path",{d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z",fill:"none"},null,-1),t("path",{d:"M432 96h-96V72a40 40 0 0 0-40-40h-80a40 40 0 0 0-40 40v24H80a16 16 0 0 0 0 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 0 0 0-32zM192.57 416H192a16 16 0 0 1-16-15.43l-8-224a16 16 0 1 1 32-1.14l8 224A16 16 0 0 1 192.57 416zM272 400a16 16 0 0 1-32 0V176a16 16 0 0 1 32 0zm32-304h-96V72a7.91 7.91 0 0 1 8-8h80a7.91 7.91 0 0 1 8 8zm32 304.57A16 16 0 0 1 320 416h-.58A16 16 0 0 1 304 399.43l8-224a16 16 0 1 1 32 1.14z",fill:"currentColor"},null,-1)]))}}),hs={class:"space-y-4"},xs={key:0},ws={class:"flex justify-end gap-2"},ys={class:"relative"},ks={class:"p-3 bg-muted rounded-lg text-sm whitespace-pre-wrap break-all max-h-[400px] overflow-auto"},_s={key:0,class:"mt-3 text-sm text-muted-foreground"},Cs={key:0},Ss={key:1,class:"mx-2"},$s={key:2},zs=Ce({__name:"TestDialog",props:{show:{type:Boolean},accountId:{},channel:{}},emits:["update:show","test-complete"],setup(v,{emit:n}){const{message:r}=ht(["message"]),p=v,w=n,R=c(""),z=c(""),F=c(""),k=c(!0),y=c(!0),C=c(!1),T=c(""),B=c(!1),j=c(0),x=c(0),M=c(0),X=c(null),H=c([]),A=c(!1),K=U(()=>Vt[p.channel]),L=U(()=>{const W=H.value.map(b=>({label:b.name||b.model_id,value:b.model_id}));return W.push({label:"自定义模型",value:"custom"}),W}),I=U(()=>z.value==="custom"?F.value:z.value||"");async function N(){A.value=!0;try{const b=(await Fe.get("/api/model/list",{params:{channel:p.channel,page:1,page_size:100}})).data;if(b.code===0){H.value=(b.data.list||[]).filter(xe=>xe.is_enabled);const V=H.value.find(xe=>xe.is_default);V?z.value=V.model_id:H.value.length>0&&(z.value=H.value[0].model_id)}}catch(W){console.error("获取模型列表失败:",W)}finally{A.value=!1}}Mo(()=>p.show,W=>{W&&(R.value="",z.value="",F.value="",k.value=!0,y.value=!0,T.value="",x.value=0,M.value=0,N())});async function q(){if(C.value)return;C.value=!0,T.value="",x.value=0,M.value=0,j.value=performance.now(),X.value=new AbortController;const W={account_id:p.accountId,channel:p.channel,model:I.value,input:R.value||"Hello",stream:k.value,max_tokens:1024};try{if(k.value)await Ft(W,b=>{x.value===0&&(x.value=performance.now()-j.value),T.value+=b,y.value&&!B.value&&(B.value=!0)},X.value.signal),M.value=performance.now()-j.value,y.value&&T.value&&!B.value&&(B.value=!0),T.value?x.value>0?r.success(`测试成功！首字用时: ${(x.value/1e3).toFixed(2)}s，总耗时: ${(M.value/1e3).toFixed(2)}s`):r.success(`测试成功！总耗时: ${(M.value/1e3).toFixed(2)}s`):r.error("测试失败：未收到任何响应内容");else{const b=await Ft(W,void 0,X.value.signal);M.value=performance.now()-j.value,b.choices?.[0]?.message?.content?(T.value=b.choices[0].message.content,y.value&&(B.value=!0),r.success(`测试成功！总耗时: ${(M.value/1e3).toFixed(2)}s`)):b.code===1?r.error(b.message||"测试失败"):r.success("测试成功")}}catch(b){b.name==="AbortError"?r.warning("测试已取消"):r.error(b.message||"测试失败")}finally{C.value=!1,X.value=null,w("test-complete")}}function ge(){X.value&&X.value.abort()}function he(){navigator.clipboard.writeText(T.value).then(()=>{r.success("已复制到剪贴板")}).catch(()=>{r.error("复制失败")})}function ce(){C.value&&ge(),w("update:show",!1)}return(W,b)=>(a(),l(le,null,[D(d(_e),{show:v.show,preset:"card",title:`测速 ${K.value?.name||v.channel} 账号（ID: ${v.accountId}）`,style:{width:"500px"},"mask-closable":!C.value,closable:!C.value,"onUpdate:show":ce},{footer:$(()=>[t("div",ws,[D(d(Tt),{onClick:ce,disabled:C.value},{default:$(()=>[...b[15]||(b[15]=[_("取消",-1)])]),_:1},8,["disabled"]),D(d(Tt),{type:"primary",loading:C.value,onClick:q},{default:$(()=>[_(u(C.value?"测试中...":"测试"),1)]),_:1},8,["loading"])])]),default:$(()=>[t("div",hs,[t("div",null,[b[6]||(b[6]=t("label",{class:"block text-sm font-medium mb-1.5"},"测试文本",-1)),D(d(Dt),{value:R.value,"onUpdate:value":b[0]||(b[0]=V=>R.value=V),placeholder:"为空默认发送 Hello",disabled:C.value},null,8,["value","disabled"])]),t("div",null,[b[7]||(b[7]=t("label",{class:"block text-sm font-medium mb-1.5"},"测试模型",-1)),D(d(Yo),{value:z.value,"onUpdate:value":b[1]||(b[1]=V=>z.value=V),options:L.value,disabled:C.value,loading:A.value,placeholder:"请选择模型",filterable:""},null,8,["value","options","disabled","loading"])]),z.value==="custom"?(a(),l("div",xs,[b[8]||(b[8]=t("label",{class:"block text-sm font-medium mb-1.5"},"自定义模型名称",-1)),D(d(Dt),{value:F.value,"onUpdate:value":b[2]||(b[2]=V=>F.value=V),placeholder:"请输入模型名称",disabled:C.value},null,8,["value","disabled"])])):m("",!0),t("div",null,[b[11]||(b[11]=t("label",{class:"block text-sm font-medium mb-1.5"},"输出类型",-1)),D(d(Bt),{value:k.value,"onUpdate:value":b[3]||(b[3]=V=>k.value=V),disabled:C.value},{default:$(()=>[D(d(nt),{value:!0},{default:$(()=>[...b[9]||(b[9]=[_("流式",-1)])]),_:1}),D(d(nt),{value:!1},{default:$(()=>[...b[10]||(b[10]=[_("非流式",-1)])]),_:1})]),_:1},8,["value","disabled"])]),t("div",null,[b[14]||(b[14]=t("label",{class:"block text-sm font-medium mb-1.5"},"是否展示测试结果",-1)),D(d(Bt),{value:y.value,"onUpdate:value":b[4]||(b[4]=V=>y.value=V),disabled:C.value},{default:$(()=>[D(d(nt),{value:!0},{default:$(()=>[...b[12]||(b[12]=[_("是",-1)])]),_:1}),D(d(nt),{value:!1},{default:$(()=>[...b[13]||(b[13]=[_("否",-1)])]),_:1})]),_:1},8,["value","disabled"])])])]),_:1},8,["show","title","mask-closable","closable"]),D(d(_e),{show:B.value,"onUpdate:show":b[5]||(b[5]=V=>B.value=V),preset:"card",title:"测试结果",style:{width:"600px"}},{default:$(()=>[t("div",ys,[t("pre",ks,u(T.value||"(空)"),1),t("button",{onClick:he,class:"absolute top-2 right-2 p-1.5 rounded hover:bg-accent transition-colors",title:"复制"},[D(d(Ao),{size:"16"},{default:$(()=>[D(d(Zo))]),_:1})])]),x.value>0||M.value>0?(a(),l("div",_s,[x.value>0?(a(),l("span",Cs,"首字用时: "+u((x.value/1e3).toFixed(2))+"s",1)):m("",!0),x.value>0&&M.value>0?(a(),l("span",Ss,"|")):m("",!0),M.value>0?(a(),l("span",$s,"总耗时: "+u((M.value/1e3).toFixed(2))+"s",1)):m("",!0)])):m("",!0)]),_:1},8,["show"])],64))}}),Rs=jt(zs,[["__scopeId","data-v-59103c36"]]),{message:dn}=ht(["message"]);c([]);c(!1);const Ts=c(0),Fs=c(0);c(1);c(20);c([]);c(new Set);U(()=>{const v=Ts.value,n=Fs.value,r=v-n;return{total:v,normal:n,abnormal:r}});function Pe(v){if(v.request_limit!==void 0||v.requests_used!==void 0){const z=v.requests_used||0,F=v.request_limit||0,k=v.is_unlimited||!1,y=F>0&&!k?Math.round(z/F*100):0;return{totalUsed:z,totalLimit:k?"∞":F,percentage:y,resetDate:"",subscriptionType:k?"UNLIMITED":(F>0,"FREE")}}const n=v.usage_summary;if(!n)return{totalUsed:0,totalLimit:550,percentage:0,resetDate:"",subscriptionType:v.plan_type?.toUpperCase()||"FREE"};const r=n.monthly_used+n.free_trial_used,p=n.monthly_limit+n.free_trial_limit,w=p>0?Math.round(r/p*100):0,R=n.next_reset_date?new Date(n.next_reset_date*1e3).toLocaleDateString():"";return{totalUsed:r,totalLimit:p,percentage:w,resetDate:R,subscriptionType:n.subscription_type?.toUpperCase()||v.plan_type?.toUpperCase()||"FREE"}}const Ms={class:"accounts-page"},As={class:"accounts-header"},Us={class:"page-title"},Ds={class:"stats-grid"},Bs={class:"stat-card"},Is={class:"stat-content"},Ps={class:"stat-value text-foreground"},Ls={class:"stat-card"},Ns={class:"stat-content"},Vs={class:"stat-value text-green-600 dark:text-green-400"},js={class:"stat-card"},Es={class:"stat-content"},Hs={class:"stat-value text-red-600 dark:text-red-400"},Ws={class:"stat-card"},Os={class:"stat-content"},qs={class:"stat-value text-purple-600 dark:text-purple-400"},Gs={class:"toolbar"},Js={class:"toolbar-left"},Ks={class:"channel-tabs"},Xs=["onClick"],Qs={class:"flex items-center gap-1.5 flex-wrap"},Ys=["disabled"],Zs=["disabled"],el={key:0,class:"absolute left-0 mt-1.5 py-1 bg-card rounded-xl shadow-lg border border-border z-50 min-w-[120px]"},tl={key:0,class:"absolute left-0 mt-1.5 py-1 bg-card rounded-xl shadow-lg border border-border z-50 min-w-[120px]"},ol={key:0,class:"absolute left-0 mt-1.5 py-1 bg-card rounded-xl shadow-lg border border-border z-50 min-w-[120px]"},sl={key:0,class:"absolute left-0 mt-1.5 py-1 bg-card rounded-xl shadow-lg border border-border z-50 min-w-[120px]"},ll={class:"relative batch-dropdown"},al={key:0,class:"absolute right-0 mt-1.5 p-2 bg-card rounded-xl shadow-lg border border-border z-50 w-[200px]"},rl={class:"grid grid-cols-2 gap-1.5"},nl=["disabled"],dl=["disabled"],il=["disabled"],ul={key:0,class:"mx-4 mb-2 p-3 bg-card rounded-lg border border-border"},cl={class:"flex items-center justify-between text-sm text-muted-foreground mb-2"},vl={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},bl={class:"table-container"},fl={key:0,class:"flex items-center justify-center h-full"},pl={key:1,class:"flex flex-col items-center justify-center h-full text-muted-foreground"},ml={key:2,class:"h-full overflow-x-auto overflow-y-auto"},gl={class:"bg-muted sticky top-0 z-10"},hl={class:"text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"},xl={key:0,class:"py-3 pl-3 pr-0 whitespace-nowrap",style:{width:"24px"}},wl={class:"px-4 py-3 whitespace-nowrap",style:{width:"40px"}},yl=["checked","indeterminate"],kl={class:"divide-y divide-border"},_l=["onClick"],Cl={key:0,class:"py-3 pl-3 pr-0 text-muted-foreground"},Sl=["checked","onChange"],$l=["onClick"],zl=["onClick","title"],Rl=["onClick","title"],Tl={key:7,class:"flex items-center gap-2"},Fl={class:"w-20 h-2 bg-muted rounded-full overflow-hidden"},Ml={class:"text-xs text-muted-foreground whitespace-nowrap"},Al={key:8,class:"flex items-center gap-2"},Ul={class:"w-16 h-2 bg-muted rounded-full overflow-hidden"},Dl={class:"text-xs text-muted-foreground whitespace-nowrap"},Bl={key:9,class:"text-xs text-foreground"},Il={key:10,class:"text-xs text-muted-foreground"},Pl=["onClick","disabled","title"],Ll=["onClick"],Nl=["onClick"],Vl=["onClick","disabled"],jl=["onClick"],El={key:0,class:"bg-accent/30"},Hl=["colspan"],Wl={class:"space-y-3"},Ol={key:0,class:"text-sm text-muted-foreground"},ql={key:1,class:"text-sm text-red-500"},Gl={key:2,class:"space-y-3"},Jl={key:0},Kl={class:"flex items-center justify-between mb-1"},Xl={class:"text-xs text-foreground font-medium"},Ql={key:0,class:"text-amber-500 ml-1"},Yl={class:"text-xs text-muted-foreground"},Zl={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},ea={key:1},ta={class:"flex items-center justify-between mb-1"},oa={class:"text-xs text-foreground font-medium"},sa={key:0,class:"text-amber-500 ml-1"},la={class:"text-xs text-muted-foreground"},aa={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},ra={key:2},na={class:"flex items-center justify-between mb-1"},da={class:"text-xs text-foreground font-medium"},ia={key:0,class:"text-amber-500 ml-1"},ua={class:"text-xs text-muted-foreground"},ca={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},va={key:3},ba={class:"flex items-center justify-between mb-1"},fa={class:"text-xs text-foreground font-medium"},pa={key:0,class:"text-amber-500 ml-1"},ma={class:"text-xs text-muted-foreground"},ga={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},ha={class:"pagination-bar"},xa={class:"pagination-content"},wa={class:"text-sm text-muted-foreground"},ya={class:"font-medium text-foreground"},ka={class:"flex items-center gap-3"},_a=["value"],Ca=["value"],Sa={class:"flex items-center gap-1"},$a=["disabled"],za=["disabled"],Ra={class:"px-3 py-1 text-sm font-medium bg-accent text-primary rounded-lg"},Ta=["disabled"],Fa=["disabled"],Ma={class:"w-full"},Aa={key:0,class:"mb-4"},Ua={class:"flex justify-between text-sm mb-2"},Da={class:"text-green-600 dark:text-green-400"},Ba={key:0,class:"text-red-500 dark:text-red-400 ml-2"},Ia={class:"w-full h-5 bg-muted rounded-full overflow-hidden"},Pa={class:"mt-3 max-h-32 overflow-y-auto text-xs"},La={class:"text-foreground truncate"},Na={class:"text-muted-foreground ml-auto"},Va={key:1},ja={key:0,class:"mb-4 p-4 bg-muted rounded-lg border border-border"},Ea={key:1,class:"mb-4 p-4 bg-muted rounded-lg border border-border"},Ha=["disabled"],Wa={key:2,class:"mb-4 p-4 bg-amber-500/10 rounded-lg border border-amber-500/30"},Oa={key:3,class:"relative my-4"},qa={class:"block text-sm font-medium text-foreground mb-2"},Ga={key:4,class:"mb-4 space-y-3"},Ja={class:"block text-sm font-medium text-foreground mb-1"},Ka=["onUpdate:modelValue"],Xa=["value"],Qa=["onUpdate:modelValue","placeholder"],Ya={class:"mb-4"},Za={key:5,class:"mb-3 p-3 bg-amber-500/10 rounded-lg border border-amber-500/30"},er=["placeholder"],tr={class:"text-xs text-muted-foreground mt-2"},or={class:"flex justify-end gap-2"},sr=["disabled"],lr=["disabled"],ar={class:"text-sm text-muted-foreground"},rr={class:"bg-muted p-3 rounded-lg text-xs font-mono mb-3 text-foreground"},nr={key:0},dr={key:1},ir={key:0,class:"mt-2 p-2 bg-amber-500/10 rounded border border-amber-500/30"},ur={class:"flex justify-end gap-2"},cr={class:"text-sm text-muted-foreground"},vr={key:0},br={key:1},fr={class:"font-bold text-red-600"},pr={key:2},mr={key:3},gr={class:"flex justify-end gap-2"},hr={class:"w-full"},xr={key:0,class:"mb-4"},wr={class:"flex justify-between text-sm mb-2"},yr={class:"text-green-600 dark:text-green-400"},kr={key:0,class:"text-red-500 dark:text-red-400 ml-2"},_r={class:"w-full h-5 bg-muted rounded-full overflow-hidden"},Cr={class:"mt-3 max-h-32 overflow-y-auto text-xs"},Sr={class:"text-foreground truncate"},$r={class:"text-muted-foreground ml-auto"},zr={key:1},Rr={class:"mb-4"},Tr={key:0,value:"plus"},Fr={key:1,value:"ultra"},Mr={class:"mb-4"},Ar={class:"flex gap-4"},Ur={class:"flex items-center gap-2 cursor-pointer"},Dr={class:"text-sm text-muted-foreground"},Br={class:"flex items-center gap-2 cursor-pointer"},Ir={class:"flex justify-end gap-2"},Pr=["disabled"],Lr=["disabled"],Nr={class:"w-full"},Vr={class:"flex justify-end gap-2"},jr=["disabled"],Er=["disabled"],Hr={class:"w-full"},Wr={key:0},Or={class:"mb-4"},qr={class:"mb-4"},Gr={class:"mb-4"},Jr={key:1},Kr={class:"text-center mb-4"},Xr={class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500/10 rounded-lg border border-blue-500/30 mb-3"},Qr={class:"text-2xl font-bold font-mono text-blue-600 dark:text-blue-400 tracking-widest"},Yr={class:"mb-4"},Zr={class:"flex items-center gap-2"},en=["value"],tn=["href"],on={class:"flex justify-end gap-2"},sn=["disabled"],ln=Ce({__name:"AccountsView",setup(v){const{message:n}=ht(["message"]),r=U(()=>Uo()),p=U(()=>Do()),w=U(()=>{const s=window.location.hostname;return s==="localhost"||s==="127.0.0.1"}),R=U(()=>p.value.accounts),z=U(()=>p.value.loading),F=U(()=>p.value.totalCount),k=U(()=>p.value.normalCount),y=U(()=>p.value.selectedIds),C=U(()=>p.value.refreshingIds),T=U(()=>p.value.currentPage),B=U(()=>p.value.currentPageSize),j=U(()=>p.value.filterStatus),x=U(()=>p.value.filterPlanType),M=U(()=>p.value.filterNsfw),X=U(()=>p.value.filteredTotal||p.value.totalCount);function H(){Mt(f.value)}function A(s){Qo(f.value,s)}function K(s){Vo(f.value,s)}const L=c(""),I=c(!1),N=c(!1),q=c({}),ge=c(!1),he=c(!1),ce=c(!1),W=c(!1),b=c(!1),V=c(!1),xe=c(null),Se=c(!1),Z=c("batch"),Le=c(null),$e=c(!1),we=c(!1),Ne=c(""),Ve=c("current_page"),O=c({show:!1,current:0,total:0,success:0,failed:0,results:[]}),E=c({show:!1,current:0,total:0,success:0,failed:0,results:[]}),je=c(new Set),Ee=c(!1),ee=c({show:!1,current:0,total:0,success:0,failed:0,action:"开启"}),Ze=c(!1),xt=c("");let ve=null;const He=c(!1),Ue=c(""),We=c("us-east-1"),et=c(""),De=c(!1),re=c(null),Oe=c(!1),qe=c(null),S=c(null),ut=c(!1);function Wt(s){if(qe.value===s){qe.value=null,S.value=null;return}qe.value=s,S.value=null,ut.value=!0,Fe.get(`/api/claude_api/account/usage/${s}`).then(e=>{S.value=e.data||null}).catch(()=>{S.value=null}).finally(()=>{ut.value=!1})}function tt(s){const e=new Date(s).getTime(),o=Date.now(),i=e-o;if(i<=0)return"已重置";const g=Math.floor(i/36e5),P=Math.floor(i%36e5/6e4);return g>0?`${g}小时${P}分钟`:`${P}分钟`}function ot(s){return s>=100?"bg-red-500":s>=50?"bg-amber-500":"bg-green-500"}const Ge=c(!1),wt=c(0),st=c(""),Je=c(!1),be=c(""),ct=c(!1),yt=c(0);function Ot(s){yt.value=s,ct.value=!0}async function qt(){const s=r.value;if(s.oauth?.enabled){Ze.value=!0;try{const o=(await Fe.get(s.oauth.authorizeUrl)).data;o.code===0?(xt.value=o.data.state,window.open(o.data.authUrl,"_blank","width=600,height=700"),kt(o.data.state),n.info("请在新窗口中完成 Google 授权")):n.error(o.message||o.msg||"获取授权链接失败")}catch{n.error("系统错误")}finally{Ze.value=!1}}}function Gt(){Ue.value="",We.value="us-east-1",et.value="",re.value=null,Oe.value=!1,De.value=!1,He.value=!0}function Jt(){He.value=!1,Oe.value=!1,re.value=null,xt.value}async function Kt(){const s=r.value;if(!(!s.oauth?.enabled||s.oauth.type!=="device_code")){if(!Ue.value){n.warning("请输入 Start URL");return}De.value=!0;try{const o=(await Fe.get(s.oauth.authorizeUrl,{params:{startUrl:Ue.value,region:We.value,proxy:et.value}})).data;o.code===0?(re.value={userCode:o.data.userCode,verificationUrl:o.data.verificationUrl,verificationUrlFull:o.data.verificationUrlFull,state:o.data.state},Oe.value=!0,window.open(o.data.verificationUrlFull||o.data.verificationUrl,"_blank"),kt(o.data.state)):n.error(o.msg||"发起授权失败")}catch{n.error("系统错误")}finally{De.value=!1}}}function kt(s){ve&&clearInterval(ve);let e=0;const o=60;ve=setInterval(async()=>{if(e++,e>o){ve&&clearInterval(ve),n.warning("授权超时，请重试");return}try{const i=r.value,P=(await Fe.get(`${i.oauth?.statusUrl}/${s}`)).data;P.status==="success"?(ve&&clearInterval(ve),n.success("授权成功！"),He.value=!1,Oe.value=!1,re.value=null,H()):(P.status==="failed"||P.status==="expired")&&(ve&&clearInterval(ve),Oe.value=!1,n.error(P.message||P.msg||"授权失败"))}catch{}},5e3)}const Xt=U(()=>R.value.length>0&&y.value.length===R.value.length),Qt=U(()=>y.value.length>0&&y.value.length<R.value.length);function Yt(){jo(f.value)}function Zt(s){Eo(f.value,s)}const Ke=U(()=>Math.ceil(X.value/B.value)),eo=[10,20,50,100];function lt(s){s<1||s>Ke.value||Ho(f.value,s)}function to(s){const e=s.target;Wo(f.value,parseInt(e.value))}const Xe=c(!1),ne=c(!1),Q=c(!1),de=c(!1);function Be(s){switch(Xe.value=!1,s){case"batch-delete":rt("batch");break;case"delete-abnormal":rt("abnormal");break;case"recover-abnormal":rt("recover");break;case"batch-refresh":$e.value=!0;break;case"nsfw-enable":$t(!0);break;case"nsfw-disable":$t(!1);break}}function oo(s){return{free:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",pro:"bg-amber-500/15 text-amber-600 dark:text-amber-400",plus:"bg-purple-500/15 text-purple-600 dark:text-purple-400",ultra:"bg-amber-500/15 text-amber-600 dark:text-amber-400"}[(s||"").toLowerCase()]||"bg-muted text-foreground"}function so(s){return(s||"").toLowerCase()==="pro"?"bg-amber-500/15 text-amber-600 dark:text-amber-400":"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400"}function lo(s){return(s||"").toLowerCase()==="pro"?"Pro":"Free"}function Qe(s){return!s||!Array.isArray(s.tags)?!1:s.tags.includes("nsfw")}function at(s){const o=(s.pool||"").toLowerCase()==="pro"?140:80,i=s.quota||0,g=Math.max(0,o-i),P=o>0?Math.round(g/o*100):0;return{used:g,remaining:i,totalLimit:o,percentage:P}}function ao(s){if(!s)return"-";const e=s.replace(" ","T"),o=new Date(e);if(isNaN(o.getTime()))return"-";const g=new Date().getTime()-o.getTime();return g<60*1e3?"刚刚":g<3600*1e3?`${Math.floor(g/60/1e3)}分钟前`:g<1440*60*1e3?`${Math.floor(g/60/60/1e3)}小时前`:g<10080*60*1e3?`${Math.floor(g/24/60/60/1e3)}天前`:o.toLocaleDateString()}function _t(s){return s>80?"bg-red-500 dark:bg-red-400":s>50?"bg-amber-500 dark:bg-amber-400":"bg-emerald-500 dark:bg-emerald-400"}function ro(s){if(!s)return"-";const e=new Date(s),o=new Date,i=e.getTime()-o.getTime(),g=Math.floor(i/(1440*60*1e3));return g<0?"已过期":g===0?"今天":g===1?"明天":g<7?`${g}天`:e.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})}function no(s){if(!s)return"text-muted-foreground";const e=new Date(s).getTime()-Date.now(),o=Math.floor(e/864e5);return o<0?"text-red-600 dark:text-red-400 font-bold":o<3?"text-red-500 dark:text-red-400 font-semibold":o<7?"text-amber-500 dark:text-amber-400":"text-foreground"}function io(){const s=r.value.columns;let e=40;for(const o of s)o.width?e+=parseInt(o.width)||80:o.minWidth?e+=parseInt(o.minWidth)||120:e+=100;return Math.max(e,800)}function uo(s){const e={};return s.width&&(e.width=s.width),s.minWidth&&(e.minWidth=s.minWidth),e}function G(s,e){if(!e)return null;if(Array.isArray(e)){for(const o of e)if(s[o]!==void 0&&s[o]!==null&&s[o]!=="")return s[o];return null}return s[e]}function co(s){return s.requests_used!==void 0&&s.request_limit!==void 0?`${s.requests_used}/${s.request_limit}`:s.quota?s.quota:"-"}function rt(s,e){Z.value=s,Le.value=e||null,Se.value=!0}async function vo(){Se.value=!1,Z.value==="single"&&Le.value?await A(Le.value):Z.value==="batch"?await go():Z.value==="abnormal"?await ho():Z.value==="recover"&&await xo()}function bo(s){wt.value=s.id,st.value=s.proxy||"",Ge.value=!0}async function fo(){Je.value=!0;try{await Oo(f.value,wt.value,st.value)&&(Ge.value=!1)}finally{Je.value=!1}}function po(){be.value="";const s=r.value;if(s.extraFields){const e={};for(const o of s.extraFields)e[o.name]=o.default||"";q.value=e}else q.value={}}async function mo(){if(!L.value.trim()){n.warning(`请输入 ${r.value.tokenFieldLabel}`);return}const s=L.value.split(`
`).map(e=>e.trim()).filter(e=>e.length>0);if(s.length===0){n.warning(`请输入有效的 ${r.value.tokenFieldLabel}`);return}I.value=!0;try{if(s.length===1){const e={[r.value.tokenFieldName]:s[0]};if(r.value.extraFields)for(const g of r.value.extraFields)q.value[g.name]&&(e[g.name]=q.value[g.name]);be.value.trim()&&(e.proxy=be.value.trim());const i=(await Fe.post(`${r.value.apiBase}/add`,e)).data;i.code===0?(n.success("添加成功"),L.value="",be.value="",N.value=!1,H()):n.error(i.message||i.msg||"添加失败")}else await Ct(s)}catch{n.error("系统错误"),E.value.show=!1}finally{I.value=!1}}async function Ct(s){E.value={show:!0,current:0,total:s.length,success:0,failed:0,results:[]};const e={[r.value.batchTokenFieldName]:s};if(r.value.extraFields)for(const ue of r.value.extraFields)q.value[ue.name]&&(e[ue.name]=q.value[ue.name]);be.value.trim()&&(e.proxy=be.value.trim());const o=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};o&&(i["X-Auth-Token"]=o);const P=(await fetch(`${r.value.apiBase}/batch-add-stream`,{method:"POST",headers:i,body:JSON.stringify(e)})).body?.getReader(),J=new TextDecoder;let ie="";if(P)for(;;){const{done:ue,value:ze}=await P.read();if(ue)break;ie+=J.decode(ze,{stream:!0});const fe=ie.split(`
`);ie=fe.pop()||"";let ye="";for(const te of fe)if(te.startsWith("event: "))ye=te.slice(7);else if(te.startsWith("data: ")){const Re=JSON.parse(te.slice(6));ye==="result"?(E.value.current=Re.index,E.value.success=Re.success,E.value.failed=Re.index-Re.success,E.value.results.push(Re.result)):ye==="done"&&n.success(`批量添加完成: 成功 ${Re.success} 个, 失败 ${Re.failed} 个`)}}L.value="",be.value="",N.value=!1,E.value.show=!1,H()}async function go(){if(y.value.length!==0){ge.value=!0;try{await qo(f.value,y.value)}catch{n.error("系统错误")}finally{ge.value=!1}}}async function ho(){he.value=!0;try{await Go(f.value)}catch{n.error("系统错误")}finally{he.value=!1}}async function xo(){ce.value=!0;try{await Jo(f.value)}catch{n.error("系统错误")}finally{ce.value=!1}}async function wo(){W.value=!0;try{await Ko(f.value)}catch{n.error("系统错误")}finally{W.value=!1}}function yo(){V.value=!1,xe.value?.click()}async function ko(s){const e=s.target,o=e.files?.[0];if(o){b.value=!0;try{const i=await o.text(),g=JSON.parse(i);if(!Array.isArray(g)){n.error("JSON格式错误：需要是数组格式");return}const P=g.map(J=>{const ie=J.refreshToken||J.refresh_token||J.token||J.clientJwt||J.client_jwt;if(!ie||typeof ie!="string")return null;const ue=J.clientId||J.client_id||"",ze=J.clientSecret||J.client_secret||"",fe=J.region||"";return ue&&ze?`${ie}----${ue}----${ze}----${fe}`:ie}).filter(J=>J!==null&&J.trim().length>0);if(P.length===0){n.error("未找到有效的refreshToken");return}E.value={show:!0,current:0,total:P.length,success:0,failed:0,results:[]},N.value=!0,await Ct(P)}catch{n.error("JSON解析失败，请检查文件格式"),E.value.show=!1}finally{b.value=!1,e.value=""}}}async function _o(){we.value=!0,O.value={show:!0,current:0,total:0,success:0,failed:0,results:[]};try{await Xo(f.value,Ne.value,Ve.value,s=>{O.value.current=s.current,O.value.total=s.total,O.value.success=s.success,O.value.failed=s.failed,O.value.results.push(s.result)})}catch{n.error("批量刷新失败")}finally{we.value=!1,setTimeout(()=>{$e.value=!1,O.value.show=!1},1500)}}function St(s){const e=s.target;e.closest(".batch-dropdown")||(Xe.value=!1),e.closest(".filter-dropdown")||(ne.value=!1,Q.value=!1,de.value=!1)}async function Co(s){const e=s.id;if(je.value.has(e))return;const i=!Qe(s);je.value.add(e);try{const P=(await Fe.post("/api/grok/account/nsfw-toggle",{id:e,enabled:i})).data;P.code===0?(n.success(`NSFW ${i?"开启":"关闭"}成功`),await H()):n.error(P.message||P.msg||`NSFW ${i?"开启":"关闭"}失败`)}catch{n.error("系统错误")}finally{je.value.delete(e)}}async function $t(s){if(!Ee.value){Ee.value=!0,ee.value={show:!0,current:0,total:0,success:0,failed:0,action:s?"开启":"关闭"};try{const e=localStorage.getItem("auth_token"),o={"Content-Type":"application/json"};e&&(o["X-Auth-Token"]=e);const i=await fetch("/api/grok/account/nsfw-batch",{method:"POST",headers:o,body:JSON.stringify({enabled:s})});if(!i.ok||!i.body)throw new Error(`请求失败 (${i.status})`);const g=i.body.getReader(),P=new TextDecoder;let J="";for(;;){const{done:ie,value:ue}=await g.read();if(ie)break;J+=P.decode(ue,{stream:!0});const ze=J.split(`
`);J=ze.pop()||"";let fe="";for(const ye of ze)if(ye.startsWith("event: "))fe=ye.slice(7);else if(ye.startsWith("data: ")){const te=JSON.parse(ye.slice(6));if(fe==="progress")ee.value={...ee.value,show:!0,current:te.current,total:te.total,success:te.success,failed:te.failed};else if(fe==="done")n.success(`NSFW 批量${s?"开启":"关闭"}完成：成功 ${te.success} 个，失败 ${te.failed} 个`);else if(fe==="error")throw new Error(te.message||"批量切换失败")}}}catch(e){n.error(e.message||`NSFW 批量${s?"开启":"关闭"}失败`)}finally{Ee.value=!1,setTimeout(()=>{ee.value.show=!1,H()},1e3)}}}return Bo(async()=>{await Io(),Mt(f.value),document.addEventListener("click",St)}),Po(()=>{document.removeEventListener("click",St)}),(s,e)=>(a(),l("div",Ms,[t("div",As,[t("div",Us,[e[58]||(e[58]=t("h1",null,"账号管理",-1)),t("p",null,"管理您的 "+u(r.value.name)+" API 凭证",1)]),t("div",Ds,[t("div",Bs,[t("div",Is,[e[59]||(e[59]=t("p",{class:"stat-label"},"总账号数",-1)),t("p",Ps,u(F.value),1)]),e[60]||(e[60]=t("div",{class:"stat-icon bg-amber-500/15 text-amber-600 dark:text-amber-400"},[t("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))]),t("div",Ls,[t("div",Ns,[e[61]||(e[61]=t("p",{class:"stat-label"},"状态正常",-1)),t("p",Vs,u(k.value),1)]),e[62]||(e[62]=t("div",{class:"stat-icon bg-green-500/15 text-green-600 dark:text-green-400"},[t("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),t("div",js,[t("div",Es,[e[63]||(e[63]=t("p",{class:"stat-label"},"状态异常",-1)),t("p",Hs,u(F.value-k.value),1)]),e[64]||(e[64]=t("div",{class:"stat-icon bg-red-500/15 text-red-600 dark:text-red-400"},[t("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),t("div",Ws,[t("div",Os,[e[65]||(e[65]=t("p",{class:"stat-label"},"已选中",-1)),t("p",qs,u(y.value.length),1)]),e[66]||(e[66]=t("div",{class:"stat-icon bg-purple-500/15 text-purple-600 dark:text-purple-400"},[t("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})])],-1))])]),t("div",Gs,[t("div",Js,[t("div",Ks,[(a(!0),l(le,null,pe(d(No),o=>(a(),l("button",{key:o,onClick:i=>d(Lo)(o),class:h(["channel-tab",{"channel-tab-active":d(f)===o}])},u(d(Vt)[o]?.name||o),11,Xs))),128))])]),t("div",Qs,[t("button",{onClick:e[0]||(e[0]=o=>V.value=!0),disabled:b.value,class:"btn btn-outline"},u(b.value?"导入中...":"导入"),9,Ys),t("button",{onClick:wo,disabled:W.value,class:"btn btn-outline"},u(W.value?"导出中...":"导出"),9,Zs),t("div",{class:"relative filter-dropdown",onClick:e[5]||(e[5]=Ie(()=>{},["stop"]))},[t("button",{onClick:e[1]||(e[1]=o=>{ne.value=!ne.value,Q.value=!1,de.value=!1}),class:"btn btn-outline"},[_(u(j.value==="normal"?"正常":j.value==="abnormal"?"异常":"全部状态")+" ",1),e[67]||(e[67]=t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),ne.value?(a(),l("div",el,[t("button",{onClick:e[2]||(e[2]=o=>{d(vt)(d(f),""),ne.value=!1}),class:h(["dropdown-item",{active:!j.value}])},"全部状态",2),t("button",{onClick:e[3]||(e[3]=o=>{d(vt)(d(f),"normal"),ne.value=!1}),class:h(["dropdown-item",{active:j.value==="normal"}])},"正常",2),t("button",{onClick:e[4]||(e[4]=o=>{d(vt)(d(f),"abnormal"),ne.value=!1}),class:h(["dropdown-item",{active:j.value==="abnormal"}])},"异常",2)])):m("",!0)]),d(f)==="kiro"?(a(),l("div",{key:0,class:"relative filter-dropdown",onClick:e[12]||(e[12]=Ie(()=>{},["stop"]))},[t("button",{onClick:e[6]||(e[6]=o=>{Q.value=!Q.value,ne.value=!1,de.value=!1}),class:"btn btn-outline"},[_(u(x.value?x.value.charAt(0).toUpperCase()+x.value.slice(1):"全部订阅")+" ",1),e[68]||(e[68]=t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),Q.value?(a(),l("div",tl,[t("button",{onClick:e[7]||(e[7]=o=>{d(ke)(d(f),""),Q.value=!1}),class:h(["dropdown-item",{active:!x.value}])},"全部订阅",2),t("button",{onClick:e[8]||(e[8]=o=>{d(ke)(d(f),"free"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="free"}])},"Free",2),t("button",{onClick:e[9]||(e[9]=o=>{d(ke)(d(f),"pro"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="pro"}])},"Pro",2),t("button",{onClick:e[10]||(e[10]=o=>{d(ke)(d(f),"plus"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="plus"}])},"Plus",2),t("button",{onClick:e[11]||(e[11]=o=>{d(ke)(d(f),"ultra"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="ultra"}])},"Ultra",2)])):m("",!0)])):m("",!0),d(f)==="grok"?(a(),l("div",{key:1,class:"relative filter-dropdown",onClick:e[17]||(e[17]=Ie(()=>{},["stop"]))},[t("button",{onClick:e[13]||(e[13]=o=>{Q.value=!Q.value,ne.value=!1,de.value=!1}),class:"btn btn-outline"},[_(u(x.value?x.value==="pro"?"Pro":"Free":"全部订阅")+" ",1),e[69]||(e[69]=t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),Q.value?(a(),l("div",ol,[t("button",{onClick:e[14]||(e[14]=o=>{d(ke)(d(f),""),Q.value=!1}),class:h(["dropdown-item",{active:!x.value}])},"全部订阅",2),t("button",{onClick:e[15]||(e[15]=o=>{d(ke)(d(f),"free"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="free"}])},"Free",2),t("button",{onClick:e[16]||(e[16]=o=>{d(ke)(d(f),"pro"),Q.value=!1}),class:h(["dropdown-item",{active:x.value==="pro"}])},"Pro",2)])):m("",!0)])):m("",!0),d(f)==="grok"?(a(),l("div",{key:2,class:"relative filter-dropdown",onClick:e[22]||(e[22]=Ie(()=>{},["stop"]))},[t("button",{onClick:e[18]||(e[18]=o=>{de.value=!de.value,ne.value=!1,Q.value=!1}),class:"btn btn-outline"},[_(u(M.value==="enabled"?"已开NSFW":M.value==="disabled"?"未开NSFW":"全部NSFW")+" ",1),e[70]||(e[70]=t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),de.value?(a(),l("div",sl,[t("button",{onClick:e[19]||(e[19]=o=>{d(bt)(d(f),""),de.value=!1}),class:h(["dropdown-item",{active:!M.value}])},"全部NSFW",2),t("button",{onClick:e[20]||(e[20]=o=>{d(bt)(d(f),"enabled"),de.value=!1}),class:h(["dropdown-item",{active:M.value==="enabled"}])},"已开NSFW",2),t("button",{onClick:e[21]||(e[21]=o=>{d(bt)(d(f),"disabled"),de.value=!1}),class:h(["dropdown-item",{active:M.value==="disabled"}])},"未开NSFW",2)])):m("",!0)])):m("",!0),t("div",ll,[t("button",{onClick:e[23]||(e[23]=o=>Xe.value=!Xe.value),class:"btn btn-dark"},[...e[71]||(e[71]=[_(" 批量操作 ",-1),t("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),Xe.value?(a(),l("div",al,[t("div",rl,[t("button",{onClick:e[24]||(e[24]=o=>Be("batch-delete")),disabled:y.value.length===0,class:"btn btn-danger btn-sm"},"批量删除",8,nl),t("button",{onClick:e[25]||(e[25]=o=>Be("delete-abnormal")),class:"btn btn-dark btn-sm"},"清空异常"),d(f)==="kiro"||d(f)==="warp"||d(f)==="claude_api"?(a(),l("button",{key:0,onClick:e[26]||(e[26]=o=>Be("recover-abnormal")),class:"btn btn-success btn-sm"},"恢复异常")):m("",!0),d(f)==="kiro"||d(f)==="grok"?(a(),l("button",{key:1,onClick:e[27]||(e[27]=o=>Be("batch-refresh")),class:"btn btn-dark btn-sm"},"刷新用量")):m("",!0),d(f)==="grok"?(a(),l("button",{key:2,onClick:e[28]||(e[28]=o=>Be("nsfw-enable")),disabled:Ee.value,class:"btn btn-sm",style:{background:"rgb(219 39 119)",color:"white"}},"开启NSFW",8,dl)):m("",!0),d(f)==="grok"?(a(),l("button",{key:3,onClick:e[29]||(e[29]=o=>Be("nsfw-disable")),disabled:Ee.value,class:"btn btn-dark btn-sm"},"关闭NSFW",8,il)):m("",!0)])])):m("",!0)]),t("button",{onClick:e[30]||(e[30]=o=>{po(),N.value=!0}),class:"btn btn-primary"},"添加账号")])])]),ee.value.show?(a(),l("div",ul,[t("div",cl,[t("span",null,"NSFW "+u(ee.value.action)+"进度: "+u(ee.value.current)+" / "+u(ee.value.total),1),t("span",null,"成功: "+u(ee.value.success)+" / 失败: "+u(ee.value.failed),1)]),t("div",vl,[t("div",{class:"h-full rounded-full transition-all bg-pink-500",style:oe({width:(ee.value.total>0?Math.round(ee.value.current/ee.value.total*100):0)+"%"})},null,4)])])):m("",!0),t("div",bl,[z.value?(a(),l("div",fl,[...e[72]||(e[72]=[t("div",{class:"text-muted-foreground"},"加载中...",-1)])])):R.value.length===0?(a(),l("div",pl,[...e[73]||(e[73]=[t("svg",{class:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),t("p",null,"暂无账号数据",-1)])])):(a(),l("div",ml,[t("table",{class:"w-full",style:oe({minWidth:io()+"px"})},[t("thead",gl,[t("tr",hl,[d(f)==="claude_api"?(a(),l("th",xl)):m("",!0),t("th",wl,[t("input",{type:"checkbox",checked:Xt.value,indeterminate:Qt.value,onChange:Yt,class:"w-4 h-4 rounded border-border text-primary focus:ring-primary"},null,40,yl)]),(a(!0),l(le,null,pe(r.value.columns,o=>(a(),l("th",{key:o.key,class:h(["px-4 py-3 whitespace-nowrap",{"text-center":o.align==="center","text-right":o.align==="right","sticky-col-th":o.type==="actions"}]),style:oe(uo(o))},u(o.label),7))),128))])]),t("tbody",kl,[(a(!0),l(le,null,pe(R.value,o=>(a(),l(le,{key:o.id},[t("tr",{class:h(["hover:bg-accent/50 transition-colors",{"selected-row":y.value.includes(o.id),"cursor-pointer":d(f)==="claude_api"}]),onClick:i=>d(f)==="claude_api"&&Wt(o.id)},[d(f)==="claude_api"?(a(),l("td",Cl,[(a(),l("svg",{class:h(["w-4 h-4 transition-transform duration-200",qe.value===o.id?"rotate-90":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[74]||(e[74]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))])):m("",!0),t("td",{class:"px-4 py-3",onClick:e[31]||(e[31]=Ie(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:y.value.includes(o.id),onChange:i=>Zt(o.id),class:"w-4 h-4 rounded border-border text-primary focus:ring-primary"},null,40,Sl)]),(a(!0),l(le,null,pe(r.value.columns,i=>(a(),l("td",{key:i.key,class:h(["px-4 py-3",{"text-center":i.align==="center","text-right":i.align==="right","sticky-col-td":i.type==="actions"}])},[i.type==="text"?(a(),l("span",{key:0,class:h(["text-sm text-foreground truncate block",i.copyable?"cursor-pointer hover:text-primary":""]),onClick:g=>i.copyable&&d(ft)(G(o,i.field))},u(G(o,i.field)||"-"),11,$l)):i.type==="email"?(a(),l("span",{key:1,class:"text-sm text-foreground cursor-pointer hover:text-primary truncate block max-w-[200px]",onClick:g=>d(ft)(G(o,i.field)),title:G(o,i.field)},u(G(o,i.field)||"-"),9,zl)):i.type==="token"?(a(),l("span",{key:2,class:"text-xs text-muted-foreground cursor-pointer hover:text-primary truncate block max-w-[400px] font-mono",onClick:g=>d(ft)(G(o,i.field)),title:G(o,i.field)},u(G(o,i.field)||"-"),9,Rl)):i.type==="status"?(a(),l("span",{key:3,class:h(["px-2.5 py-1 text-xs font-medium rounded-full",G(o,i.field)==="normal"?"bg-green-500/15 text-green-600 dark:text-green-400":G(o,i.field)==="limited"?"bg-amber-500/15 text-amber-600 dark:text-amber-400":"bg-red-500/15 text-red-600 dark:text-red-400"])},u(G(o,i.field)==="normal"?"正常":G(o,i.field)==="limited"?"限速":"异常"),3)):i.type==="plan"?(a(),l("span",{key:4,class:h(["px-2.5 py-1 text-xs font-medium rounded-full",oo(G(o,i.field)||d(Pe)(o).subscriptionType)])},u(G(o,i.field)||d(Pe)(o).subscriptionType||"FREE"),3)):i.type==="pool"?(a(),l("span",{key:5,class:h(["px-2.5 py-1 text-xs font-medium rounded-full",so(G(o,i.field))])},u(lo(G(o,i.field))),3)):i.type==="nsfw"?(a(),l("span",{key:6,class:h(["px-2.5 py-1 text-xs font-medium rounded-full",Qe(o)?"bg-pink-500/15 text-pink-600 dark:text-pink-400":"bg-muted text-muted-foreground"])},u(Qe(o)?"已开":"未开"),3)):i.type==="usage"?(a(),l("div",Tl,[t("div",Fl,[t("div",{class:h(["h-full rounded-full transition-all",_t(d(Pe)(o).percentage)]),style:oe({width:d(Pe)(o).percentage+"%"})},null,6)]),t("span",Ml,u(d(Pe)(o).totalUsed)+"/"+u(d(Pe)(o).totalLimit),1)])):i.type==="grok_usage"?(a(),l("div",Al,[t("div",Ul,[t("div",{class:h(["h-full rounded-full transition-all",_t(at(o).percentage)]),style:oe({width:at(o).percentage+"%"})},null,6)]),t("span",Dl,u(at(o).used)+"/"+u(at(o).totalLimit),1)])):i.type==="quota"?(a(),l("span",Bl,u(co(o)),1)):i.type==="date"?(a(),l("span",Il,u(ao(G(o,i.field))),1)):i.type==="expire"?(a(),l("span",{key:11,class:h(["text-xs whitespace-nowrap",no(G(o,i.field))])},u(ro(G(o,i.field))),3)):i.type==="actions"?(a(),l("div",{key:12,class:"flex items-center justify-center gap-1",onClick:e[32]||(e[32]=Ie(()=>{},["stop"]))},[d(f)==="grok"?(a(),l("button",{key:0,onClick:g=>Co(o),disabled:je.value.has(o.id),class:h(["p-1.5 rounded-lg transition-colors",Qe(o)?"text-pink-500 hover:text-pink-600 hover:bg-pink-500/10":"text-gray-400 hover:text-gray-500 hover:bg-gray-500/10"]),title:Qe(o)?"关闭 NSFW":"开启 NSFW"},[(a(),l("svg",{class:h(["w-4 h-4",je.value.has(o.id)?"animate-pulse":""]),viewBox:"0 0 24 24",fill:"currentColor"},[...e[75]||(e[75]=[t("text",{x:"50%",y:"50%","dominant-baseline":"central","text-anchor":"middle","font-size":"18","font-weight":"bold","font-family":"Arial, sans-serif"},"N",-1)])],2))],10,Pl)):m("",!0),t("button",{onClick:g=>bo(o),class:"p-1.5 text-muted-foreground hover:text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",title:"编辑代理"},[D(d(cs),{class:"w-4 h-4"})],8,Ll),t("button",{onClick:g=>Ot(o.id),class:"p-1.5 text-muted-foreground hover:text-amber-500 hover:bg-amber-500/10 rounded-lg transition-colors",title:"测试"},[D(d(bs),{class:"w-4 h-4"})],8,Nl),t("button",{onClick:g=>K(o.id),disabled:C.value.has(o.id),class:"p-1.5 text-muted-foreground hover:text-primary hover:bg-accent rounded-lg transition-colors disabled:opacity-50",title:"刷新Token"},[D(d(ps),{class:h(["w-4 h-4",C.value.has(o.id)?"animate-spin":""])},null,8,["class"])],8,Vl),t("button",{onClick:g=>rt("single",o.id),class:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-lg transition-colors",title:"删除"},[D(d(gs),{class:"w-4 h-4"})],8,jl)])):m("",!0)],2))),128))],10,_l),d(f)==="claude_api"&&qe.value===o.id?(a(),l("tr",El,[t("td",{colspan:r.value.columns.length+2,class:"px-6 py-4"},[t("div",Wl,[e[80]||(e[80]=t("div",{class:"font-semibold text-sm text-foreground"},"用量信息",-1)),ut.value?(a(),l("div",Ol,"加载中...")):!S.value||Object.keys(S.value).length===0?(a(),l("div",ql," 获取用量信息失败，请检查Token状态是否正常 ")):(a(),l("div",Gl,[S.value.five_hour?(a(),l("div",Jl,[t("div",Kl,[t("span",Xl,[e[76]||(e[76]=_(" 五小时用量占比 ",-1)),S.value.five_hour.resets_at?(a(),l("span",Ql," （在"+u(tt(S.value.five_hour.resets_at))+"后重置） ",1)):m("",!0)]),t("span",Yl,u(S.value.five_hour.utilization?.toFixed(1))+"%",1)]),t("div",Zl,[t("div",{class:h(["h-full rounded-full transition-all",ot(S.value.five_hour.utilization)]),style:oe({width:Math.min(S.value.five_hour.utilization,100)+"%"})},null,6)])])):m("",!0),S.value.seven_day?(a(),l("div",ea,[t("div",ta,[t("span",oa,[e[77]||(e[77]=_(" 周用量占比 ",-1)),S.value.seven_day.resets_at?(a(),l("span",sa," （在"+u(tt(S.value.seven_day.resets_at))+"后重置） ",1)):m("",!0)]),t("span",la,u(S.value.seven_day.utilization?.toFixed(1))+"%",1)]),t("div",aa,[t("div",{class:h(["h-full rounded-full transition-all",ot(S.value.seven_day.utilization)]),style:oe({width:Math.min(S.value.seven_day.utilization,100)+"%"})},null,6)])])):m("",!0),S.value.seven_day_sonnet?(a(),l("div",ra,[t("div",na,[t("span",da,[e[78]||(e[78]=_(" 周Sonnet用量占比 ",-1)),S.value.seven_day_sonnet.resets_at?(a(),l("span",ia," （在"+u(tt(S.value.seven_day_sonnet.resets_at))+"后重置） ",1)):m("",!0)]),t("span",ua,u(S.value.seven_day_sonnet.utilization?.toFixed(1))+"%",1)]),t("div",ca,[t("div",{class:h(["h-full rounded-full transition-all",ot(S.value.seven_day_sonnet.utilization)]),style:oe({width:Math.min(S.value.seven_day_sonnet.utilization,100)+"%"})},null,6)])])):m("",!0),S.value.seven_day_opus?(a(),l("div",va,[t("div",ba,[t("span",fa,[e[79]||(e[79]=_(" 周Opus用量占比 ",-1)),S.value.seven_day_opus.resets_at?(a(),l("span",pa," （在"+u(tt(S.value.seven_day_opus.resets_at))+"后重置） ",1)):m("",!0)]),t("span",ma,u(S.value.seven_day_opus.utilization?.toFixed(1))+"%",1)]),t("div",ga,[t("div",{class:h(["h-full rounded-full transition-all",ot(S.value.seven_day_opus.utilization)]),style:oe({width:Math.min(S.value.seven_day_opus.utilization,100)+"%"})},null,6)])])):m("",!0)]))])],8,Hl)])):m("",!0)],64))),128))])],4)]))]),t("div",ha,[t("div",xa,[t("div",wa,[e[81]||(e[81]=_(" 共 ",-1)),t("span",ya,u(X.value),1),_(" 条记录，第 "+u(T.value)+"/"+u(Ke.value||1)+" 页 ",1)]),t("div",ka,[t("select",{value:B.value,onChange:to,class:"px-2 py-1.5 text-sm border border-border bg-card text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"},[(a(),l(le,null,pe(eo,o=>t("option",{key:o,value:o},u(o)+" 条/页",9,Ca)),64))],40,_a),t("div",Sa,[t("button",{onClick:e[33]||(e[33]=o=>lt(1)),disabled:T.value<=1,class:"px-2 py-1 text-sm border border-border bg-card text-foreground rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed"}," 首页 ",8,$a),t("button",{onClick:e[34]||(e[34]=o=>lt(T.value-1)),disabled:T.value<=1,class:"px-3 py-1 text-sm border border-border bg-card text-foreground rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed"}," 上一页 ",8,za),t("span",Ra,u(T.value),1),t("button",{onClick:e[35]||(e[35]=o=>lt(T.value+1)),disabled:T.value>=Ke.value,class:"px-3 py-1 text-sm border border-border bg-card text-foreground rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 ",8,Ta),t("button",{onClick:e[36]||(e[36]=o=>lt(Ke.value)),disabled:T.value>=Ke.value,class:"px-2 py-1 text-sm border border-border bg-card text-foreground rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed"}," 末页 ",8,Fa)])])])]),D(d(_e),{show:N.value,"onUpdate:show":e[40]||(e[40]=o=>N.value=o),preset:"card",style:{width:"600px","max-width":"95vw"},"mask-closable":!I.value},{header:$(()=>[...e[82]||(e[82]=[t("span",{class:"text-lg font-medium"},"添加账号",-1)])]),footer:$(()=>[t("div",or,[t("button",{onClick:e[39]||(e[39]=o=>N.value=!1),disabled:I.value,class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors disabled:opacity-50"}," 取消 ",8,sr),t("button",{onClick:mo,disabled:I.value||E.value.show,class:"px-4 py-2 text-sm text-white bg-amber-500 rounded-md hover:bg-amber-700 transition-colors disabled:opacity-50"},u(E.value.show?"处理中...":I.value?"添加中...":"确认添加"),9,lr)])]),default:$(()=>[t("div",Ma,[E.value.show?(a(),l("div",Aa,[t("div",Ua,[t("span",null,"处理进度: "+u(E.value.current)+" / "+u(E.value.total),1),t("span",null,[t("span",Da,"成功 "+u(E.value.success),1),E.value.failed>0?(a(),l("span",Ba,"失败 "+u(E.value.failed),1)):m("",!0)])]),t("div",Ia,[t("div",{class:h(["h-full rounded-full transition-all duration-300",E.value.failed>0?"bg-amber-500":"bg-emerald-500"]),style:oe({width:Math.round(E.value.current/E.value.total*100)+"%"})},null,6)]),t("div",Pa,[(a(!0),l(le,null,pe(E.value.results.slice(-5).reverse(),(o,i)=>(a(),l("div",{key:i,class:"py-1 border-b border-border flex items-center gap-2"},[t("span",{class:h(["px-1.5 py-0.5 rounded text-xs",o.success?"bg-green-500/15 text-green-600 dark:text-green-400":"bg-red-500/15 text-red-600 dark:text-red-400"])},u(o.success?"成功":"失败"),3),t("span",La,u(o.email||o.token),1),t("span",Na,u(o.message),1)]))),128))])])):(a(),l("div",Va,[r.value.oauth?.enabled&&r.value.oauth.type==="device_code"?(a(),l("div",ja,[e[84]||(e[84]=t("p",{class:"text-sm text-muted-foreground mb-3"},"使用 AWS Identity Center (IDC) 授权登录，自动获取凭据：",-1)),t("button",{onClick:Gt,class:"w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 dark:bg-blue-500 rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors"},[e[83]||(e[83]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),_(" "+u(r.value.oauth.buttonText),1)])])):m("",!0),r.value.oauth?.enabled&&r.value.oauth.type!=="device_code"&&w.value?(a(),l("div",Ea,[e[86]||(e[86]=t("p",{class:"text-sm text-muted-foreground mb-3"},"推荐使用 Google 账号授权登录，自动获取凭据：",-1)),t("button",{onClick:qt,disabled:Ze.value,class:"w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-green-600 dark:bg-green-500 rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors disabled:opacity-50"},[e[85]||(e[85]=t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})],-1)),_(" "+u(Ze.value?"授权中...":r.value.oauth.buttonText),1)],8,Ha)])):m("",!0),r.value.oauth?.enabled&&r.value.oauth.type!=="device_code"&&!w.value?(a(),l("div",Wa,[...e[87]||(e[87]=[t("p",{class:"text-sm text-amber-700 dark:text-amber-400"}," ⚠️ Google OAuth 授权仅支持本地环境 (localhost)。服务器部署请使用以下方式添加账号： ",-1),t("ol",{class:"text-sm text-amber-600 dark:text-amber-500 mt-2 ml-4 list-decimal"},[t("li",null,"本地运行服务完成 OAuth 授权，然后导出数据库"),t("li",null,"或使用 Antigravity-Manager 等工具获取凭据，然后手动粘贴")],-1)])])):m("",!0),r.value.oauth?.enabled?(a(),l("div",Oa,[...e[88]||(e[88]=[t("div",{class:"absolute inset-0 flex items-center"},[t("div",{class:"w-full border-t border-border"})],-1),t("div",{class:"relative flex justify-center text-sm"},[t("span",{class:"px-2 bg-card text-muted-foreground"},"或者手动添加凭据")],-1)])])):m("",!0),t("label",qa,u(r.value.tokenFieldLabel),1),r.value.extraFields&&r.value.extraFields.length>0?(a(),l("div",Ga,[(a(!0),l(le,null,pe(r.value.extraFields,o=>(a(),l("div",{key:o.name},[t("label",Ja,u(o.label),1),o.type==="select"?se((a(),l("select",{key:0,"onUpdate:modelValue":i=>q.value[o.name]=i,class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm"},[(a(!0),l(le,null,pe(o.options,i=>(a(),l("option",{key:i.value,value:i.value},u(i.label),9,Xa))),128))],8,Ka)),[[At,q.value[o.name]]]):se((a(),l("input",{key:1,type:"text","onUpdate:modelValue":i=>q.value[o.name]=i,class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm",placeholder:`请输入${o.label}`},null,8,Qa)),[[Te,q.value[o.name]]])]))),128))])):m("",!0),t("div",Ya,[e[89]||(e[89]=t("label",{class:"block text-sm font-medium text-foreground mb-1"},"代理 (可选)",-1)),se(t("input",{type:"text","onUpdate:modelValue":e[37]||(e[37]=o=>be.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm font-mono",placeholder:"http://user:pass@host:port 或留空"},null,512),[[Te,be.value]]),e[90]||(e[90]=t("p",{class:"text-xs text-muted-foreground mt-1"},"批量添加时所有账号共用此代理，留空则使用全局代理",-1))]),d(f)==="kiro"?(a(),l("div",Za,[...e[91]||(e[91]=[t("p",{class:"text-sm text-amber-700 dark:text-amber-400 font-medium mb-1"},"支持两种格式：",-1),t("ul",{class:"text-xs text-amber-600 dark:text-amber-500 ml-4 list-disc space-y-1"},[t("li",null,[t("span",{class:"font-mono bg-amber-500/20 px-1 rounded"},"refreshToken"),_(" - 普通格式")]),t("li",null,[t("span",{class:"font-mono bg-amber-500/20 px-1 rounded"},"refreshToken----clientId----clientSecret----region"),_(" - IDC格式")])],-1)])])):m("",!0),se(t("textarea",{"onUpdate:modelValue":e[38]||(e[38]=o=>L.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary font-mono text-sm whitespace-nowrap overflow-x-auto",style:{resize:"vertical"},placeholder:r.value.tokenPlaceholder,rows:"6",wrap:"off"},null,8,er),[[Te,L.value]]),t("p",tr," 支持批量添加：每行一个 "+u(r.value.tokenFieldLabel)+"，系统会自动处理 ",1)]))])]),_:1},8,["show","mask-closable"]),D(d(_e),{show:V.value,"onUpdate:show":e[42]||(e[42]=o=>V.value=o),preset:"card",style:{width:"500px","max-width":"95vw"}},{header:$(()=>[...e[92]||(e[92]=[t("span",{class:"text-lg font-medium"},"导入数据",-1)])]),footer:$(()=>[t("div",ur,[t("button",{onClick:e[41]||(e[41]=o=>V.value=!1),class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors"}," 取消 "),t("button",{onClick:yo,class:"px-4 py-2 text-sm text-white bg-amber-500 rounded-md hover:bg-amber-700 transition-colors"}," 选择文件 ")])]),default:$(()=>[t("div",ar,[e[94]||(e[94]=t("p",{class:"mb-3"},"请选择符合以下格式的 JSON 文件：",-1)),t("div",rr,[d(f)==="kiro"?(a(),l("pre",nr,`[
  { "refreshToken": "普通token..." },
  {
    "refreshToken": "idcToken...",
    "clientId": "amzn1.xxx",
    "clientSecret": "xxx",
    "region": "us-west-2"
  }
]`)):(a(),l("pre",dr,`[
  { "refreshToken": "xxx..." },
  { "refreshToken": "yyy..." }
]`))]),e[95]||(e[95]=t("p",{class:"text-muted-foreground text-xs mb-1"},[_(" 支持的字段名："),t("code",{class:"bg-muted px-1 rounded"},"refreshToken"),_("、"),t("code",{class:"bg-muted px-1 rounded"},"refresh_token"),_("、"),t("code",{class:"bg-muted px-1 rounded"},"token")],-1)),d(f)==="kiro"?(a(),l("div",ir,[...e[93]||(e[93]=[t("p",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"IDC 格式支持额外字段：",-1),t("p",{class:"text-xs text-amber-600 dark:text-amber-500 mt-1"},[t("code",{class:"bg-amber-500/20 px-1 rounded"},"clientId"),_("、"),t("code",{class:"bg-amber-500/20 px-1 rounded"},"clientSecret"),_("、"),t("code",{class:"bg-amber-500/20 px-1 rounded"},"region")],-1)])])):m("",!0),e[96]||(e[96]=t("p",{class:"text-muted-foreground text-xs mt-2"},"只需包含 refreshToken 字段即可，IDC 字段可选",-1))])]),_:1},8,["show"]),D(d(_e),{show:Se.value,"onUpdate:show":e[44]||(e[44]=o=>Se.value=o),preset:"card",style:{width:"400px","max-width":"95vw"}},{header:$(()=>[t("span",{class:h(["text-lg font-medium",Z.value==="recover"?"text-green-600":"text-red-600"])},u(Z.value==="recover"?"确认恢复":"确认删除"),3)]),footer:$(()=>[t("div",gr,[t("button",{onClick:e[43]||(e[43]=o=>Se.value=!1),class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors"}," 取消 "),t("button",{onClick:vo,class:h(["px-4 py-2 text-sm text-white rounded-md transition-colors",Z.value==="recover"?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"])},u(Z.value==="recover"?"确认恢复":"确认删除"),3)])]),default:$(()=>[t("div",cr,[Z.value==="single"?(a(),l("p",vr,"确定要删除此账号吗？此操作不可恢复！")):Z.value==="batch"?(a(),l("p",br,[e[97]||(e[97]=_("确定要删除选中的 ",-1)),t("span",fr,u(y.value.length),1),e[98]||(e[98]=_(" 个账号吗？此操作不可恢复！",-1))])):Z.value==="recover"?(a(),l("p",pr,"确定要将所有异常状态的账号恢复为正常吗？恢复后账号将重新加入调度队列。")):(a(),l("p",mr,"确定要删除所有异常状态的账号吗？此操作不可恢复！"))])]),_:1},8,["show"]),D(d(_e),{show:$e.value,"onUpdate:show":e[49]||(e[49]=o=>$e.value=o),preset:"card",style:{width:"500px","max-width":"95vw"},"mask-closable":!we.value},{header:$(()=>[...e[99]||(e[99]=[t("span",{class:"text-lg font-medium"},"批量刷新用量",-1)])]),footer:$(()=>[t("div",Ir,[t("button",{onClick:e[48]||(e[48]=o=>$e.value=!1),disabled:we.value,class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors disabled:opacity-50"}," 取消 ",8,Pr),t("button",{onClick:_o,disabled:we.value||O.value.show,class:"px-4 py-2 text-sm text-white bg-amber-500 rounded-md hover:bg-amber-700 transition-colors disabled:opacity-50"},u(O.value.show?"处理中...":we.value?"刷新中...":"开始刷新"),9,Lr)])]),default:$(()=>[t("div",hr,[O.value.show?(a(),l("div",xr,[t("div",wr,[t("span",null,"处理进度: "+u(O.value.current)+" / "+u(O.value.total),1),t("span",null,[t("span",yr,"成功 "+u(O.value.success),1),O.value.failed>0?(a(),l("span",kr,"失败 "+u(O.value.failed),1)):m("",!0)])]),t("div",_r,[t("div",{class:h(["h-full rounded-full transition-all duration-300",O.value.failed>0?"bg-amber-500":"bg-emerald-500"]),style:oe({width:O.value.total>0?Math.round(O.value.current/O.value.total*100)+"%":"0%"})},null,6)]),t("div",Cr,[(a(!0),l(le,null,pe(O.value.results.slice(-5).reverse(),(o,i)=>(a(),l("div",{key:i,class:"py-1 border-b border-border flex items-center gap-2"},[t("span",{class:h(["px-1.5 py-0.5 rounded text-xs",o.success?"bg-green-500/15 text-green-600 dark:text-green-400":"bg-red-500/15 text-red-600 dark:text-red-400"])},u(o.success?"成功":"失败"),3),t("span",Sr,u(o.email||o.id),1),t("span",$r,u(o.message),1)]))),128))])])):(a(),l("div",zr,[t("div",Rr,[e[103]||(e[103]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},"订阅类型",-1)),se(t("select",{"onUpdate:modelValue":e[45]||(e[45]=o=>Ne.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm"},[e[100]||(e[100]=t("option",{value:""},"全部类型",-1)),e[101]||(e[101]=t("option",{value:"free"},"Free (免费版)",-1)),e[102]||(e[102]=t("option",{value:"pro"},"Pro (专业版)",-1)),d(f)==="kiro"?(a(),l("option",Tr,"Plus (增强版)")):m("",!0),d(f)==="kiro"?(a(),l("option",Fr,"Ultra (旗舰版)")):m("",!0)],512),[[At,Ne.value]])]),t("div",Mr,[e[105]||(e[105]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},"刷新范围",-1)),t("div",Ar,[t("label",Ur,[se(t("input",{type:"radio","onUpdate:modelValue":e[46]||(e[46]=o=>Ve.value=o),value:"current_page",class:"text-amber-600"},null,512),[[Ut,Ve.value]]),t("span",Dr,"当前页 ("+u(R.value.length)+" 个)",1)]),t("label",Br,[se(t("input",{type:"radio","onUpdate:modelValue":e[47]||(e[47]=o=>Ve.value=o),value:"all",class:"text-amber-600"},null,512),[[Ut,Ve.value]]),e[104]||(e[104]=t("span",{class:"text-sm text-muted-foreground"},"全部账号",-1))])])]),e[106]||(e[106]=t("div",{class:"p-3 bg-amber-500/10 rounded-lg border border-amber-500/30"},[t("p",{class:"text-sm text-amber-700 dark:text-amber-400"},"⚠️ 注意：批量刷新用量会调用 API 更新每个账号的用量信息，可能需要较长时间。")],-1))]))])]),_:1},8,["show","mask-closable"]),D(d(_e),{show:Ge.value,"onUpdate:show":e[52]||(e[52]=o=>Ge.value=o),preset:"card",style:{width:"500px","max-width":"95vw"}},{header:$(()=>[...e[107]||(e[107]=[t("span",{class:"text-lg font-medium"},"编辑代理",-1)])]),footer:$(()=>[t("div",Vr,[t("button",{onClick:e[51]||(e[51]=o=>Ge.value=!1),disabled:Je.value,class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors disabled:opacity-50"}," 取消 ",8,jr),t("button",{onClick:fo,disabled:Je.value,class:"px-4 py-2 text-sm text-white bg-amber-500 rounded-md hover:bg-amber-700 transition-colors disabled:opacity-50"},u(Je.value?"保存中...":"保存"),9,Er)])]),default:$(()=>[t("div",Nr,[e[108]||(e[108]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},"代理地址",-1)),se(t("input",{type:"text","onUpdate:modelValue":e[50]||(e[50]=o=>st.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm font-mono",placeholder:"http://user:pass@host:port 或留空清除代理"},null,512),[[Te,st.value]]),e[109]||(e[109]=t("p",{class:"text-xs text-muted-foreground mt-2"},"留空表示不使用单独代理，将使用全局代理设置",-1))])]),_:1},8,["show"]),D(d(_e),{show:He.value,"onUpdate:show":e[56]||(e[56]=o=>He.value=o),preset:"card",style:{width:"520px","max-width":"95vw"},"mask-closable":!De.value},{header:$(()=>[...e[110]||(e[110]=[t("span",{class:"text-lg font-medium"},"AWS IDC 授权登录",-1)])]),footer:$(()=>[t("div",on,[t("button",{onClick:Jt,class:"px-4 py-2 text-sm border border-border bg-card text-foreground rounded-md hover:bg-muted transition-colors"},u(re.value?"关闭":"取消"),1),re.value?m("",!0):(a(),l("button",{key:0,onClick:Kt,disabled:De.value||!Ue.value||!We.value,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},u(De.value?"请求中...":"开始授权"),9,sn))])]),default:$(()=>[t("div",Hr,[re.value?(a(),l("div",Jr,[t("div",Kr,[t("div",Xr,[t("span",Qr,u(re.value.userCode),1)]),e[116]||(e[116]=t("p",{class:"text-sm text-muted-foreground"},"请在浏览器中输入上方验证码完成授权",-1))]),t("div",Yr,[e[117]||(e[117]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},"验证地址",-1)),t("div",Zr,[t("input",{type:"text",value:re.value.verificationUrl,readonly:"",class:"flex-1 px-3 py-2 border border-border bg-muted text-foreground rounded-lg text-sm font-mono"},null,8,en),t("a",{href:re.value.verificationUrl,target:"_blank",class:"px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap"}," 打开链接 ",8,tn)])]),e[118]||(e[118]=t("div",{class:"p-3 bg-amber-500/10 rounded-lg border border-amber-500/30"},[t("p",{class:"text-sm text-amber-700 dark:text-amber-400"}," ⏳ 正在等待授权完成... 请在浏览器中完成验证。授权成功后将自动添加账号。 ")],-1))])):(a(),l("div",Wr,[t("div",Or,[e[111]||(e[111]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},[_("Start URL "),t("span",{class:"text-red-500"},"*")],-1)),se(t("input",{type:"text","onUpdate:modelValue":e[53]||(e[53]=o=>Ue.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm font-mono",placeholder:"https://d-xxxxxx.awsapps.com/start"},null,512),[[Te,Ue.value]]),e[112]||(e[112]=t("p",{class:"text-xs text-muted-foreground mt-1"},"AWS Identity Center 的 Start URL",-1))]),t("div",qr,[e[113]||(e[113]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},[_("区域 "),t("span",{class:"text-red-500"},"*")],-1)),se(t("input",{type:"text","onUpdate:modelValue":e[54]||(e[54]=o=>We.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm font-mono",placeholder:"us-east-1"},null,512),[[Te,We.value]])]),t("div",Gr,[e[114]||(e[114]=t("label",{class:"block text-sm font-medium text-foreground mb-2"},[_("代理地址 "),t("span",{class:"text-muted-foreground font-normal"},"(可选)")],-1)),se(t("input",{type:"text","onUpdate:modelValue":e[55]||(e[55]=o=>et.value=o),class:"w-full px-3 py-2 border border-border bg-card text-foreground rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm font-mono",placeholder:"http://user:pass@host:port"},null,512),[[Te,et.value]]),e[115]||(e[115]=t("p",{class:"text-xs text-muted-foreground mt-1"},"留空使用全局代理设置",-1))])]))])]),_:1},8,["show","mask-closable"]),t("input",{ref_key:"importFileInput",ref:xe,type:"file",accept:".json",onChange:ko,class:"hidden"},null,544),D(Rs,{show:ct.value,"onUpdate:show":e[57]||(e[57]=o=>ct.value=o),"account-id":yt.value,channel:d(f),onTestComplete:H},null,8,["show","account-id","channel"])]))}}),un=jt(ln,[["__scopeId","data-v-cb8ef260"]]);export{un as default};
