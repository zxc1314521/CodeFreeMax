import{d as C,o as M,c as o,a as e,t as d,F as v,g as x,r as f,i as _,h as g,f as a,n as N,P as B}from"./index-BgxrR1pb.js";import{e as y,C as D}from"./channels-CdsIN6g2.js";import{u as F}from"./use-message-C3dFIHTI.js";const I={class:"h-full overflow-auto bg-background"},P={class:"p-4 space-y-4"},V={class:"flex items-center justify-between"},$=["disabled"],j={class:"flex items-center gap-2 flex-wrap"},A=["onClick"],E={class:"bg-card rounded-xl shadow-sm border border-border overflow-hidden"},L={key:0,class:"p-8 text-center text-muted-foreground"},S={key:1,class:"p-8 text-center text-muted-foreground"},z={key:2,class:"divide-y divide-border"},H={class:"flex items-center gap-3"},O={class:"text-sm font-mono text-foreground"},T={class:"flex items-center gap-2"},q={key:0,class:"text-xs text-muted-foreground"},G=["onClick"],J={class:"text-xs text-muted-foreground"},W=C({__name:"ModelsView",setup(K){const i=F(),n=f(!1),l=f("kiro"),c=f({}),b=_(()=>y.map(t=>({label:D[t].name,value:t}))),u=_(()=>c.value[l.value]||[]);async function h(){const t=(await g.get("/api/models/list")).data;return t.code===0&&t.data?(c.value=t.data,!0):!1}async function m(){await Promise.all(y.map(async t=>{var r;try{const s=await g.get(`/${t}/v1/models`);(r=s.data)!=null&&r.data&&(c.value[t]=s.data.data)}catch{}}))}async function p(){n.value=!0;try{await h()||await m(),i.success("模型列表已刷新")}catch{try{await m(),i.success("模型列表已刷新")}catch{i.error("刷新失败")}}finally{n.value=!1}}function k(t){navigator.clipboard.writeText(t),i.success("已复制模型 ID")}return M(()=>{p()}),(t,r)=>(a(),o("div",I,[e("div",P,[e("div",V,[r[0]||(r[0]=e("div",null,[e("h1",{class:"text-xl font-bold text-foreground"},"模型管理"),e("p",{class:"text-sm text-muted-foreground mt-0.5"},"查看各渠道支持的模型列表")],-1)),e("button",{onClick:p,disabled:n.value,class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50"},d(n.value?"刷新中...":"刷新模型"),9,$)]),e("div",j,[(a(!0),o(v,null,x(b.value,s=>(a(),o("button",{key:s.value,onClick:w=>l.value=s.value,class:N(["px-4 py-2 text-sm font-medium rounded-lg transition-all border",l.value===s.value?"bg-primary text-primary-foreground border-primary":"bg-card text-muted-foreground border-border hover:border-primary/30"])},d(s.label),11,A))),128))]),e("div",E,[n.value?(a(),o("div",L," 加载中... ")):u.value.length===0?(a(),o("div",S," 暂无模型数据 ")):(a(),o("div",z,[(a(!0),o(v,null,x(u.value,s=>(a(),o("div",{key:s.id,class:"flex items-center justify-between px-4 py-3 hover:bg-accent/50 transition-colors"},[e("div",H,[r[1]||(r[1]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("code",O,d(s.id),1)]),e("div",T,[s.owned_by?(a(),o("span",q,d(s.owned_by),1)):B("",!0),e("button",{onClick:w=>k(s.id),class:"px-2 py-1 text-xs text-muted-foreground hover:text-foreground transition-colors"}," 复制 ",8,G)])]))),128))]))]),e("div",J," 共 "+d(u.value.length)+" 个模型 ",1)])]))}});export{W as default};
