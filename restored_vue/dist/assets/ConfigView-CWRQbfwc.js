import{x as tt,V as bn,U as dt,X as yn,d as Ke,p as P,k as $t,i as wn,j as _n,l as an,E as Me,Y as xn,C as re,D as st,Z as _e,g as z,r as x,$ as rn,q as St,s as qt,a0 as It,z as Je,H as Ge,e as ln,y as sn,K as kn,a1 as Sn,a2 as Nt,a3 as Oe,a4 as Fn,a5 as Ie,a6 as Rn,m as Et,N as jt,a7 as Bt,J as Le,a8 as Cn,a9 as Lt,aa as Pn,ab as On,ac as $n,ad as qn,ae as Tn,c as ae,a as d,O as p,Q as j,L as g,S as Ut,h as oe,o as G,F as Qe,f as Ye,R as Dt,t as T,w as Ne,af as Ee,P as yt,M as Ve,b as Vn,_ as Mn}from"./index-0b7F522w.js";import{i as An,h as on,j as wt,f as we,u as zn,k as In,l as Nn,e as ye,b as Ue,d as En,g as Wt,c as jn}from"./Switch-JDRwT0tw.js";import{u as Bn}from"./use-message-III38vxu.js";function Ln(n,e,t){var a;const i=tt(n,null);if(i===null)return;const l=(a=bn())===null||a===void 0?void 0:a.proxy;dt(t,s),s(t.value),yn(()=>{s(void 0,t.value)});function s(h,m){if(!i)return;const _=i[e];m!==void 0&&f(_,m),h!==void 0&&v(_,h)}function f(h,m){h[m]||(h[m]=[]),h[m].splice(h[m].findIndex(_=>_===l),1)}function v(h,m){h[m]||(h[m]=[]),~h[m].findIndex(_=>_===l)||h[m].push(l)}}const Un=Ke({name:"Add",render(){return P("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),Dn=Ke({name:"Remove",render(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},P("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),Wn={feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 6px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right",labelFontWeight:"400"};function Hn(n){const{heightSmall:e,heightMedium:t,heightLarge:a,textColor1:i,errorColor:l,warningColor:s,lineHeight:f,textColor3:v}=n;return Object.assign(Object.assign({},Wn),{blankHeightSmall:e,blankHeightMedium:t,blankHeightLarge:a,lineHeight:f,labelTextColor:i,asteriskColor:l,feedbackTextColorError:l,feedbackTextColorWarning:s,feedbackTextColor:v})}const Kn={common:$t,self:Hn};function Gn(n){const{textColorDisabled:e}=n;return{iconColorDisabled:e}}const Qn=wn({name:"InputNumber",common:$t,peers:{Button:_n,Input:An},self:Gn});function Yn(n){const{opacityDisabled:e,heightTiny:t,heightSmall:a,heightMedium:i,heightLarge:l,heightHuge:s,primaryColor:f,fontSize:v}=n;return{fontSize:v,textColor:f,sizeTiny:t,sizeSmall:a,sizeMedium:i,sizeLarge:l,sizeHuge:s,color:f,opacitySpinning:e}}const Jn={common:$t,self:Yn},ft=an("n-form"),Zn=an("n-form-item-insts");function Be(){return Be=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Be.apply(this,arguments)}function Xn(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,et(n,e)}function Ft(n){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(n)}function et(n,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},et(n,e)}function ea(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ut(n,e,t){return ea()?ut=Reflect.construct.bind():ut=function(i,l,s){var f=[null];f.push.apply(f,l);var v=Function.bind.apply(i,f),h=new v;return s&&et(h,s.prototype),h},ut.apply(null,arguments)}function ta(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Rt(n){var e=typeof Map=="function"?new Map:void 0;return Rt=function(a){if(a===null||!ta(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(a))return e.get(a);e.set(a,i)}function i(){return ut(a,arguments,Ft(this).constructor)}return i.prototype=Object.create(a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),et(i,a)},Rt(n)}var na=/%[sdj%]/g,aa=function(){};function Ct(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var a=t.field;e[a]=e[a]||[],e[a].push(t)}),e}function ge(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var i=0,l=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var s=n.replace(na,function(f){if(f==="%%")return"%";if(i>=l)return f;switch(f){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return f}});return s}return n}function ra(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Z(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||ra(e)&&typeof n=="string"&&!n)}function ia(n,e,t){var a=[],i=0,l=n.length;function s(f){a.push.apply(a,f||[]),i++,i===l&&t(a)}n.forEach(function(f){e(f,s)})}function Ht(n,e,t){var a=0,i=n.length;function l(s){if(s&&s.length){t(s);return}var f=a;a=a+1,f<i?e(n[f],l):t([])}l([])}function la(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var Kt=function(n){Xn(e,n);function e(t,a){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=a,i}return e}(Rt(Error));function sa(n,e,t,a,i){if(e.first){var l=new Promise(function(F,I){var w=function(y){return a(y),y.length?I(new Kt(y,Ct(y))):F(i)},b=la(n);Ht(b,t,w)});return l.catch(function(F){return F}),l}var s=e.firstFields===!0?Object.keys(n):e.firstFields||[],f=Object.keys(n),v=f.length,h=0,m=[],_=new Promise(function(F,I){var w=function(C){if(m.push.apply(m,C),h++,h===v)return a(m),m.length?I(new Kt(m,Ct(m))):F(i)};f.length||(a(m),F(i)),f.forEach(function(b){var C=n[b];s.indexOf(b)!==-1?Ht(C,t,w):ia(C,t,w)})});return _.catch(function(F){return F}),_}function oa(n){return!!(n&&n.message!==void 0)}function ua(n,e){for(var t=n,a=0;a<e.length;a++){if(t==null)return t;t=t[e[a]]}return t}function Gt(n,e){return function(t){var a;return n.fullFields?a=ua(e,n.fullFields):a=e[t.field||n.fullField],oa(t)?(t.field=t.field||n.fullField,t.fieldValue=a,t):{message:typeof t=="function"?t():t,fieldValue:a,field:t.field||n.fullField}}}function Qt(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];typeof a=="object"&&typeof n[t]=="object"?n[t]=Be({},n[t],a):n[t]=a}}return n}var un=function(e,t,a,i,l,s){e.required&&(!a.hasOwnProperty(e.field)||Z(t,s||e.type))&&i.push(ge(l.messages.required,e.fullField))},da=function(e,t,a,i,l){(/^\s+$/.test(t)||t==="")&&i.push(ge(l.messages.whitespace,e.fullField))},ot,fa=function(){if(ot)return ot;var n="[a-fA-F\\d:]",e=function(V){return V&&V.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+t+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+t+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+t+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+t+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+t+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+t+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+t+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),l=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),s=new RegExp("^"+t+"$"),f=new RegExp("^"+i+"$"),v=function(V){return V&&V.exact?l:new RegExp("(?:"+e(V)+t+e(V)+")|(?:"+e(V)+i+e(V)+")","g")};v.v4=function(k){return k&&k.exact?s:new RegExp(""+e(k)+t+e(k),"g")},v.v6=function(k){return k&&k.exact?f:new RegExp(""+e(k)+i+e(k),"g")};var h="(?:(?:[a-z]+:)?//)",m="(?:\\S+(?::\\S*)?@)?",_=v.v4().source,F=v.v6().source,I="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",w="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",b="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",C="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',X="(?:"+h+"|www\\.)"+m+"(?:localhost|"+_+"|"+F+"|"+I+w+b+")"+C+y;return ot=new RegExp("(?:^"+X+"$)","i"),ot},Yt={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Ze={integer:function(e){return Ze.number(e)&&parseInt(e,10)===e},float:function(e){return Ze.number(e)&&!Ze.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Ze.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Yt.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(fa())},hex:function(e){return typeof e=="string"&&!!e.match(Yt.hex)}},ca=function(e,t,a,i,l){if(e.required&&t===void 0){un(e,t,a,i,l);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=e.type;s.indexOf(f)>-1?Ze[f](t)||i.push(ge(l.messages.types[f],e.fullField,e.type)):f&&typeof t!==e.type&&i.push(ge(l.messages.types[f],e.fullField,e.type))},va=function(e,t,a,i,l){var s=typeof e.len=="number",f=typeof e.min=="number",v=typeof e.max=="number",h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=t,_=null,F=typeof t=="number",I=typeof t=="string",w=Array.isArray(t);if(F?_="number":I?_="string":w&&(_="array"),!_)return!1;w&&(m=t.length),I&&(m=t.replace(h,"_").length),s?m!==e.len&&i.push(ge(l.messages[_].len,e.fullField,e.len)):f&&!v&&m<e.min?i.push(ge(l.messages[_].min,e.fullField,e.min)):v&&!f&&m>e.max?i.push(ge(l.messages[_].max,e.fullField,e.max)):f&&v&&(m<e.min||m>e.max)&&i.push(ge(l.messages[_].range,e.fullField,e.min,e.max))},De="enum",ma=function(e,t,a,i,l){e[De]=Array.isArray(e[De])?e[De]:[],e[De].indexOf(t)===-1&&i.push(ge(l.messages[De],e.fullField,e[De].join(", ")))},ga=function(e,t,a,i,l){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(ge(l.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(t)||i.push(ge(l.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},O={required:un,whitespace:da,type:ca,range:va,enum:ma,pattern:ga},pa=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t,"string")&&!e.required)return a();O.required(e,t,i,s,l,"string"),Z(t,"string")||(O.type(e,t,i,s,l),O.range(e,t,i,s,l),O.pattern(e,t,i,s,l),e.whitespace===!0&&O.whitespace(e,t,i,s,l))}a(s)},ha=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&O.type(e,t,i,s,l)}a(s)},ba=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(t===""&&(t=void 0),Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&(O.type(e,t,i,s,l),O.range(e,t,i,s,l))}a(s)},ya=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&O.type(e,t,i,s,l)}a(s)},wa=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),Z(t)||O.type(e,t,i,s,l)}a(s)},_a=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&(O.type(e,t,i,s,l),O.range(e,t,i,s,l))}a(s)},xa=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&(O.type(e,t,i,s,l),O.range(e,t,i,s,l))}a(s)},ka=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(t==null&&!e.required)return a();O.required(e,t,i,s,l,"array"),t!=null&&(O.type(e,t,i,s,l),O.range(e,t,i,s,l))}a(s)},Sa=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&O.type(e,t,i,s,l)}a(s)},Fa="enum",Ra=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l),t!==void 0&&O[Fa](e,t,i,s,l)}a(s)},Ca=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t,"string")&&!e.required)return a();O.required(e,t,i,s,l),Z(t,"string")||O.pattern(e,t,i,s,l)}a(s)},Pa=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t,"date")&&!e.required)return a();if(O.required(e,t,i,s,l),!Z(t,"date")){var v;t instanceof Date?v=t:v=new Date(t),O.type(e,v,i,s,l),v&&O.range(e,v.getTime(),i,s,l)}}a(s)},Oa=function(e,t,a,i,l){var s=[],f=Array.isArray(t)?"array":typeof t;O.required(e,t,i,s,l,f),a(s)},_t=function(e,t,a,i,l){var s=e.type,f=[],v=e.required||!e.required&&i.hasOwnProperty(e.field);if(v){if(Z(t,s)&&!e.required)return a();O.required(e,t,i,f,l,s),Z(t,s)||O.type(e,t,i,f,l)}a(f)},$a=function(e,t,a,i,l){var s=[],f=e.required||!e.required&&i.hasOwnProperty(e.field);if(f){if(Z(t)&&!e.required)return a();O.required(e,t,i,s,l)}a(s)},Xe={string:pa,method:ha,number:ba,boolean:ya,regexp:wa,integer:_a,float:xa,array:ka,object:Sa,enum:Ra,pattern:Ca,date:Pa,url:_t,hex:_t,email:_t,required:Oa,any:$a};function Pt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Ot=Pt(),He=function(){function n(t){this.rules=null,this._messages=Ot,this.define(t)}var e=n.prototype;return e.define=function(a){var i=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(l){var s=a[l];i.rules[l]=Array.isArray(s)?s:[s]})},e.messages=function(a){return a&&(this._messages=Qt(Pt(),a)),this._messages},e.validate=function(a,i,l){var s=this;i===void 0&&(i={}),l===void 0&&(l=function(){});var f=a,v=i,h=l;if(typeof v=="function"&&(h=v,v={}),!this.rules||Object.keys(this.rules).length===0)return h&&h(null,f),Promise.resolve(f);function m(b){var C=[],y={};function X(V){if(Array.isArray(V)){var B;C=(B=C).concat.apply(B,V)}else C.push(V)}for(var k=0;k<b.length;k++)X(b[k]);C.length?(y=Ct(C),h(C,y)):h(null,f)}if(v.messages){var _=this.messages();_===Ot&&(_=Pt()),Qt(_,v.messages),v.messages=_}else v.messages=this.messages();var F={},I=v.keys||Object.keys(this.rules);I.forEach(function(b){var C=s.rules[b],y=f[b];C.forEach(function(X){var k=X;typeof k.transform=="function"&&(f===a&&(f=Be({},f)),y=f[b]=k.transform(y)),typeof k=="function"?k={validator:k}:k=Be({},k),k.validator=s.getValidationMethod(k),k.validator&&(k.field=b,k.fullField=k.fullField||b,k.type=s.getType(k),F[b]=F[b]||[],F[b].push({rule:k,value:y,source:f,field:b}))})});var w={};return sa(F,v,function(b,C){var y=b.rule,X=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");X=X&&(y.required||!y.required&&b.value),y.field=b.field;function k(L,D){return Be({},D,{fullField:y.fullField+"."+L,fullFields:y.fullFields?[].concat(y.fullFields,[L]):[L]})}function V(L){L===void 0&&(L=[]);var D=Array.isArray(L)?L:[L];!v.suppressWarning&&D.length&&n.warning("async-validator:",D),D.length&&y.message!==void 0&&(D=[].concat(y.message));var K=D.map(Gt(y,f));if(v.first&&K.length)return w[y.field]=1,C(K);if(!X)C(K);else{if(y.required&&!b.value)return y.message!==void 0?K=[].concat(y.message).map(Gt(y,f)):v.error&&(K=[v.error(y,ge(v.messages.required,y.field))]),C(K);var W={};y.defaultField&&Object.keys(b.value).map(function(N){W[N]=y.defaultField}),W=Be({},W,b.rule.fields);var Ce={};Object.keys(W).forEach(function(N){var Q=W[N],$=Array.isArray(Q)?Q:[Q];Ce[N]=$.map(k.bind(null,N))});var ue=new n(Ce);ue.messages(v.messages),b.rule.options&&(b.rule.options.messages=v.messages,b.rule.options.error=v.error),ue.validate(b.value,b.rule.options||v,function(N){var Q=[];K&&K.length&&Q.push.apply(Q,K),N&&N.length&&Q.push.apply(Q,N),C(Q.length?Q:null)})}}var B;if(y.asyncValidator)B=y.asyncValidator(y,b.value,V,b.source,v);else if(y.validator){try{B=y.validator(y,b.value,V,b.source,v)}catch(L){console.error==null||console.error(L),v.suppressValidatorError||setTimeout(function(){throw L},0),V(L.message)}B===!0?V():B===!1?V(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):B instanceof Array?V(B):B instanceof Error&&V(B.message)}B&&B.then&&B.then(function(){return V()},function(L){return V(L)})},function(b){m(b)},f)},e.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!Xe.hasOwnProperty(a.type))throw new Error(ge("Unknown rule type %s",a.type));return a.type||"string"},e.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var i=Object.keys(a),l=i.indexOf("message");return l!==-1&&i.splice(l,1),i.length===1&&i[0]==="required"?Xe.required:Xe[this.getType(a)]||void 0},n}();He.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Xe[e]=t};He.warning=aa;He.messages=Ot;He.validators=Xe;const{cubicBezierEaseInOut:Jt}=xn;function qa({name:n="fade-down",fromOffset:e="-4px",enterDuration:t=".3s",leaveDuration:a=".3s",enterCubicBezier:i=Jt,leaveCubicBezier:l=Jt}={}){return[Me(`&.${n}-transition-enter-from, &.${n}-transition-leave-to`,{opacity:0,transform:`translateY(${e})`}),Me(`&.${n}-transition-enter-to, &.${n}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),Me(`&.${n}-transition-leave-active`,{transition:`opacity ${a} ${l}, transform ${a} ${l}`}),Me(`&.${n}-transition-enter-active`,{transition:`opacity ${t} ${i}, transform ${t} ${i}`})]}const Ta=re("form-item",`
 display: grid;
 line-height: var(--n-line-height);
`,[re("form-item-label",`
 grid-area: label;
 align-items: center;
 line-height: 1.25;
 text-align: var(--n-label-text-align);
 font-size: var(--n-label-font-size);
 min-height: var(--n-label-height);
 padding: var(--n-label-padding);
 color: var(--n-label-text-color);
 transition: color .3s var(--n-bezier);
 box-sizing: border-box;
 font-weight: var(--n-label-font-weight);
 `,[st("asterisk",`
 white-space: nowrap;
 user-select: none;
 -webkit-user-select: none;
 color: var(--n-asterisk-color);
 transition: color .3s var(--n-bezier);
 `),st("asterisk-placeholder",`
 grid-area: mark;
 user-select: none;
 -webkit-user-select: none;
 visibility: hidden; 
 `)]),re("form-item-blank",`
 grid-area: blank;
 min-height: var(--n-blank-height);
 `),_e("auto-label-width",[re("form-item-label","white-space: nowrap;")]),_e("left-labelled",`
 grid-template-areas:
 "label blank"
 "label feedback";
 grid-template-columns: auto minmax(0, 1fr);
 grid-template-rows: auto 1fr;
 align-items: flex-start;
 `,[re("form-item-label",`
 display: grid;
 grid-template-columns: 1fr auto;
 min-height: var(--n-blank-height);
 height: auto;
 box-sizing: border-box;
 flex-shrink: 0;
 flex-grow: 0;
 `,[_e("reverse-columns-space",`
 grid-template-columns: auto 1fr;
 `),_e("left-mark",`
 grid-template-areas:
 "mark text"
 ". text";
 `),_e("right-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),_e("right-hanging-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),st("text",`
 grid-area: text; 
 `),st("asterisk",`
 grid-area: mark; 
 align-self: end;
 `)])]),_e("top-labelled",`
 grid-template-areas:
 "label"
 "blank"
 "feedback";
 grid-template-rows: minmax(var(--n-label-height), auto) 1fr;
 grid-template-columns: minmax(0, 100%);
 `,[_e("no-label",`
 grid-template-areas:
 "blank"
 "feedback";
 grid-template-rows: 1fr;
 `),re("form-item-label",`
 display: flex;
 align-items: flex-start;
 justify-content: var(--n-label-text-align);
 `)]),re("form-item-blank",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 position: relative;
 `),re("form-item-feedback-wrapper",`
 grid-area: feedback;
 box-sizing: border-box;
 min-height: var(--n-feedback-height);
 font-size: var(--n-feedback-font-size);
 line-height: 1.25;
 transform-origin: top left;
 `,[Me("&:not(:empty)",`
 padding: var(--n-feedback-padding);
 `),re("form-item-feedback",{transition:"color .3s var(--n-bezier)",color:"var(--n-feedback-text-color)"},[_e("warning",{color:"var(--n-feedback-text-color-warning)"}),_e("error",{color:"var(--n-feedback-text-color-error)"}),qa({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]);function Va(n){const e=tt(ft,null);return{mergedSize:z(()=>n.size!==void 0?n.size:(e==null?void 0:e.props.size)!==void 0?e.props.size:"medium")}}function Ma(n){const e=tt(ft,null),t=z(()=>{const{labelPlacement:w}=n;return w!==void 0?w:e!=null&&e.props.labelPlacement?e.props.labelPlacement:"top"}),a=z(()=>t.value==="left"&&(n.labelWidth==="auto"||(e==null?void 0:e.props.labelWidth)==="auto")),i=z(()=>{if(t.value==="top")return;const{labelWidth:w}=n;if(w!==void 0&&w!=="auto")return wt(w);if(a.value){const b=e==null?void 0:e.maxChildLabelWidthRef.value;return b!==void 0?wt(b):void 0}if((e==null?void 0:e.props.labelWidth)!==void 0)return wt(e.props.labelWidth)}),l=z(()=>{const{labelAlign:w}=n;if(w)return w;if(e!=null&&e.props.labelAlign)return e.props.labelAlign}),s=z(()=>{var w;return[(w=n.labelProps)===null||w===void 0?void 0:w.style,n.labelStyle,{width:i.value}]}),f=z(()=>{const{showRequireMark:w}=n;return w!==void 0?w:e==null?void 0:e.props.showRequireMark}),v=z(()=>{const{requireMarkPlacement:w}=n;return w!==void 0?w:(e==null?void 0:e.props.requireMarkPlacement)||"right"}),h=x(!1),m=x(!1),_=z(()=>{const{validationStatus:w}=n;if(w!==void 0)return w;if(h.value)return"error";if(m.value)return"warning"}),F=z(()=>{const{showFeedback:w}=n;return w!==void 0?w:(e==null?void 0:e.props.showFeedback)!==void 0?e.props.showFeedback:!0}),I=z(()=>{const{showLabel:w}=n;return w!==void 0?w:(e==null?void 0:e.props.showLabel)!==void 0?e.props.showLabel:!0});return{validationErrored:h,validationWarned:m,mergedLabelStyle:s,mergedLabelPlacement:t,mergedLabelAlign:l,mergedShowRequireMark:f,mergedRequireMarkPlacement:v,mergedValidationStatus:_,mergedShowFeedback:F,mergedShowLabel:I,isAutoLabelWidth:a}}function Aa(n){const e=tt(ft,null),t=z(()=>{const{rulePath:s}=n;if(s!==void 0)return s;const{path:f}=n;if(f!==void 0)return f}),a=z(()=>{const s=[],{rule:f}=n;if(f!==void 0&&(Array.isArray(f)?s.push(...f):s.push(f)),e){const{rules:v}=e.props,{value:h}=t;if(v!==void 0&&h!==void 0){const m=on(v,h);m!==void 0&&(Array.isArray(m)?s.push(...m):s.push(m))}}return s}),i=z(()=>a.value.some(s=>s.required)),l=z(()=>i.value||n.required);return{mergedRules:a,mergedRequired:l}}var Zt=function(n,e,t,a){function i(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function f(m){try{h(a.next(m))}catch(_){s(_)}}function v(m){try{h(a.throw(m))}catch(_){s(_)}}function h(m){m.done?l(m.value):i(m.value).then(f,v)}h((a=a.apply(n,e||[])).next())})};const za=Object.assign(Object.assign({},Ge.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,feedbackClass:String,feedbackStyle:[String,Object],showLabel:{type:Boolean,default:void 0},labelProps:Object,contentClass:String,contentStyle:[String,Object]});function Xt(n,e){return(...t)=>{try{const a=n(...t);return!e&&(typeof a=="boolean"||a instanceof Error||Array.isArray(a))||a!=null&&a.then?a:(a===void 0||Nt("form-item/validate",`You return a ${typeof a} typed value in the validator method, which is not recommended. Please use ${e?"`Promise`":"`boolean`, `Error` or `Promise`"} typed value instead.`),!0)}catch(a){Nt("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),console.error(a);return}}}const fe=Ke({name:"FormItem",props:za,setup(n){Ln(Zn,"formItems",Je(n,"path"));const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=qt(n),a=tt(ft,null),i=Va(n),l=Ma(n),{validationErrored:s,validationWarned:f}=l,{mergedRequired:v,mergedRules:h}=Aa(n),{mergedSize:m}=i,{mergedLabelPlacement:_,mergedLabelAlign:F,mergedRequireMarkPlacement:I}=l,w=x([]),b=x(It()),C=a?Je(a.props,"disabled"):x(!1),y=Ge("Form","-form-item",Ta,Kn,n,e);dt(Je(n,"path"),()=>{n.ignorePathChange||X()});function X(){w.value=[],s.value=!1,f.value=!1,n.feedback&&(b.value=It())}const k=(...$)=>Zt(this,[...$],void 0,function*(Y=null,ne=()=>!0,E={suppressWarning:!0}){const{path:ce}=n;E?E.first||(E.first=n.first):E={};const{value:de}=h,xe=a?on(a.props.model,ce||""):void 0,ie={},pe={},J=(Y?de.filter(M=>Array.isArray(M.trigger)?M.trigger.includes(Y):M.trigger===Y):de).filter(ne).map((M,U)=>{const A=Object.assign({},M);if(A.validator&&(A.validator=Xt(A.validator,!1)),A.asyncValidator&&(A.asyncValidator=Xt(A.asyncValidator,!0)),A.renderMessage){const te=`__renderMessage__${U}`;pe[te]=A.message,A.message=te,ie[te]=A.renderMessage}return A}),le=J.filter(M=>M.level!=="warning"),ke=J.filter(M=>M.level==="warning"),ee={valid:!0,errors:void 0,warnings:void 0};if(!J.length)return ee;const ve=ce??"__n_no_path__",Fe=new He({[ve]:le}),$e=new He({[ve]:ke}),{validateMessages:R}=(a==null?void 0:a.props)||{};R&&(Fe.messages(R),$e.messages(R));const qe=M=>{w.value=M.map(U=>{const A=(U==null?void 0:U.message)||"";return{key:A,render:()=>A.startsWith("__renderMessage__")?ie[A]():A}}),M.forEach(U=>{var A;!((A=U.message)===null||A===void 0)&&A.startsWith("__renderMessage__")&&(U.message=pe[U.message])})};if(le.length){const M=yield new Promise(U=>{Fe.validate({[ve]:xe},E,U)});M!=null&&M.length&&(ee.valid=!1,ee.errors=M,qe(M))}if(ke.length&&!ee.errors){const M=yield new Promise(U=>{$e.validate({[ve]:xe},E,U)});M!=null&&M.length&&(qe(M),ee.warnings=M)}return!ee.errors&&!ee.warnings?X():(s.value=!!ee.errors,f.value=!!ee.warnings),ee});function V(){k("blur")}function B(){k("change")}function L(){k("focus")}function D(){k("input")}function K($,Y){return Zt(this,void 0,void 0,function*(){let ne,E,ce,de;return typeof $=="string"?(ne=$,E=Y):$!==null&&typeof $=="object"&&(ne=$.trigger,E=$.callback,ce=$.shouldRuleBeApplied,de=$.options),yield new Promise((xe,ie)=>{k(ne,ce,de).then(({valid:pe,errors:J,warnings:le})=>{pe?(E&&E(void 0,{warnings:le}),xe({warnings:le})):(E&&E(J,{warnings:le}),ie(J))})})})}kn(Sn,{path:Je(n,"path"),disabled:C,mergedSize:i.mergedSize,mergedValidationStatus:l.mergedValidationStatus,restoreValidation:X,handleContentBlur:V,handleContentChange:B,handleContentFocus:L,handleContentInput:D});const W={validate:K,restoreValidation:X,internalValidate:k},Ce=x(null);ln(()=>{if(!l.isAutoLabelWidth.value)return;const $=Ce.value;if($!==null){const Y=$.style.whiteSpace;$.style.whiteSpace="nowrap",$.style.width="",a==null||a.deriveMaxChildLabelWidth(Number(getComputedStyle($).width.slice(0,-2))),$.style.whiteSpace=Y}});const ue=z(()=>{var $;const{value:Y}=m,{value:ne}=_,E=ne==="top"?"vertical":"horizontal",{common:{cubicBezierEaseInOut:ce},self:{labelTextColor:de,asteriskColor:xe,lineHeight:ie,feedbackTextColor:pe,feedbackTextColorWarning:J,feedbackTextColorError:le,feedbackPadding:ke,labelFontWeight:ee,[Oe("labelHeight",Y)]:ve,[Oe("blankHeight",Y)]:Fe,[Oe("feedbackFontSize",Y)]:$e,[Oe("feedbackHeight",Y)]:R,[Oe("labelPadding",E)]:qe,[Oe("labelTextAlign",E)]:M,[Oe(Oe("labelFontSize",ne),Y)]:U}}=y.value;let A=($=F.value)!==null&&$!==void 0?$:M;return ne==="top"&&(A=A==="right"?"flex-end":"flex-start"),{"--n-bezier":ce,"--n-line-height":ie,"--n-blank-height":Fe,"--n-label-font-size":U,"--n-label-text-align":A,"--n-label-height":ve,"--n-label-padding":qe,"--n-label-font-weight":ee,"--n-asterisk-color":xe,"--n-label-text-color":de,"--n-feedback-padding":ke,"--n-feedback-font-size":$e,"--n-feedback-height":R,"--n-feedback-text-color":pe,"--n-feedback-text-color-warning":J,"--n-feedback-text-color-error":le}}),N=t?sn("form-item",z(()=>{var $;return`${m.value[0]}${_.value[0]}${(($=F.value)===null||$===void 0?void 0:$[0])||""}`}),ue,n):void 0,Q=z(()=>_.value==="left"&&I.value==="left"&&F.value==="left");return Object.assign(Object.assign(Object.assign(Object.assign({labelElementRef:Ce,mergedClsPrefix:e,mergedRequired:v,feedbackId:b,renderExplains:w,reverseColSpace:Q},l),i),W),{cssVars:t?void 0:ue,themeClass:N==null?void 0:N.themeClass,onRender:N==null?void 0:N.onRender})},render(){const{$slots:n,mergedClsPrefix:e,mergedShowLabel:t,mergedShowRequireMark:a,mergedRequireMarkPlacement:i,onRender:l}=this,s=a!==void 0?a:this.mergedRequired;l==null||l();const f=()=>{const v=this.$slots.label?this.$slots.label():this.label;if(!v)return null;const h=P("span",{class:`${e}-form-item-label__text`},v),m=s?P("span",{class:`${e}-form-item-label__asterisk`},i!=="left"?" *":"* "):i==="right-hanging"&&P("span",{class:`${e}-form-item-label__asterisk-placeholder`}," *"),{labelProps:_}=this;return P("label",Object.assign({},_,{class:[_==null?void 0:_.class,`${e}-form-item-label`,`${e}-form-item-label--${i}-mark`,this.reverseColSpace&&`${e}-form-item-label--reverse-columns-space`],style:this.mergedLabelStyle,ref:"labelElementRef"}),i==="left"?[m,h]:[h,m])};return P("div",{class:[`${e}-form-item`,this.themeClass,`${e}-form-item--${this.mergedSize}-size`,`${e}-form-item--${this.mergedLabelPlacement}-labelled`,this.isAutoLabelWidth&&`${e}-form-item--auto-label-width`,!t&&`${e}-form-item--no-label`],style:this.cssVars},t&&f(),P("div",{class:[`${e}-form-item-blank`,this.contentClass,this.mergedValidationStatus&&`${e}-form-item-blank--${this.mergedValidationStatus}`],style:this.contentStyle},n),this.mergedShowFeedback?P("div",{key:this.feedbackId,style:this.feedbackStyle,class:[`${e}-form-item-feedback-wrapper`,this.feedbackClass]},P(rn,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const{mergedValidationStatus:v}=this;return St(n.feedback,h=>{var m;const{feedback:_}=this,F=h||_?P("div",{key:"__feedback__",class:`${e}-form-item-feedback__line`},h||_):this.renderExplains.length?(m=this.renderExplains)===null||m===void 0?void 0:m.map(({key:I,render:w})=>P("div",{key:I,class:`${e}-form-item-feedback__line`},w())):null;return F?v==="warning"?P("div",{key:"controlled-warning",class:`${e}-form-item-feedback ${e}-form-item-feedback--warning`},F):v==="error"?P("div",{key:"controlled-error",class:`${e}-form-item-feedback ${e}-form-item-feedback--error`},F):v==="success"?P("div",{key:"controlled-success",class:`${e}-form-item-feedback ${e}-form-item-feedback--success`},F):P("div",{key:"controlled-default",class:`${e}-form-item-feedback`},F):null})}})):null)}}),Ia=Me([re("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),re("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);function Na(n){return n==null||typeof n=="string"&&n.trim()===""?null:Number(n)}function Ea(n){return n.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(n)||/^-?\d*$/.test(n))||n==="-"||n==="-0"}function xt(n){return n==null?!0:!Number.isNaN(n)}function en(n,e){return typeof n!="number"?"":e===void 0?String(n):n.toFixed(e)}function kt(n){if(n===null)return null;if(typeof n=="number")return n;{const e=Number(n);return Number.isNaN(e)?null:e}}const tn=800,nn=100,ja=Object.assign(Object.assign({},Ge.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),je=Ke({name:"InputNumber",props:ja,slots:Object,setup(n){const{mergedBorderedRef:e,mergedClsPrefixRef:t,mergedRtlRef:a}=qt(n),i=Ge("InputNumber","-input-number",Ia,Qn,n,t),{localeRef:l}=zn("InputNumber"),s=Fn(n),{mergedSizeRef:f,mergedDisabledRef:v,mergedStatusRef:h}=s,m=x(null),_=x(null),F=x(null),I=x(n.defaultValue),w=Je(n,"value"),b=In(w,I),C=x(""),y=c=>{const S=String(c).split(".")[1];return S?S.length:0},X=c=>{const S=[n.min,n.max,n.step,c].map(q=>q===void 0?0:y(q));return Math.max(...S)},k=Ie(()=>{const{placeholder:c}=n;return c!==void 0?c:l.value.placeholder}),V=Ie(()=>{const c=kt(n.step);return c!==null?c===0?1:Math.abs(c):1}),B=Ie(()=>{const c=kt(n.min);return c!==null?c:null}),L=Ie(()=>{const c=kt(n.max);return c!==null?c:null}),D=()=>{const{value:c}=b;if(xt(c)){const{format:S,precision:q}=n;S?C.value=S(c):c===null||q===void 0||y(c)>q?C.value=en(c,void 0):C.value=en(c,q)}else C.value=String(c)};D();const K=c=>{const{value:S}=b;if(c===S){D();return}const{"onUpdate:value":q,onUpdateValue:H,onChange:se}=n,{nTriggerFormInput:me,nTriggerFormChange:Se}=s;se&&Le(se,c),H&&Le(H,c),q&&Le(q,c),I.value=c,me(),Se()},W=({offset:c,doUpdateIfValid:S,fixPrecision:q,isInputing:H})=>{const{value:se}=C;if(H&&Ea(se))return!1;const me=(n.parse||Na)(se);if(me===null)return S&&K(null),null;if(xt(me)){const Se=y(me),{precision:Re}=n;if(Re!==void 0&&Re<Se&&!q)return!1;let he=Number.parseFloat((me+c).toFixed(Re??X(me)));if(xt(he)){const{value:Ae}=L,{value:Te}=B;if(Ae!==null&&he>Ae){if(!S||H)return!1;he=Ae}if(Te!==null&&he<Te){if(!S||H)return!1;he=Te}return n.validator&&!n.validator(he)?!1:(S&&K(he),he)}}return!1},Ce=Ie(()=>W({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),ue=Ie(()=>{const{value:c}=b;if(n.validator&&c===null)return!1;const{value:S}=V;return W({offset:-S,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),N=Ie(()=>{const{value:c}=b;if(n.validator&&c===null)return!1;const{value:S}=V;return W({offset:+S,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Q(c){const{onFocus:S}=n,{nTriggerFormFocus:q}=s;S&&Le(S,c),q()}function $(c){var S,q;if(c.target===((S=m.value)===null||S===void 0?void 0:S.wrapperElRef))return;const H=W({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(H!==!1){const Se=(q=m.value)===null||q===void 0?void 0:q.inputElRef;Se&&(Se.value=String(H||"")),b.value===H&&D()}else D();const{onBlur:se}=n,{nTriggerFormBlur:me}=s;se&&Le(se,c),me(),Cn(()=>{D()})}function Y(c){const{onClear:S}=n;S&&Le(S,c)}function ne(){const{value:c}=N;if(!c){Fe();return}const{value:S}=b;if(S===null)n.validator||K(xe());else{const{value:q}=V;W({offset:q,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function E(){const{value:c}=ue;if(!c){ee();return}const{value:S}=b;if(S===null)n.validator||K(xe());else{const{value:q}=V;W({offset:-q,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const ce=Q,de=$;function xe(){if(n.validator)return null;const{value:c}=B,{value:S}=L;return c!==null?Math.max(0,c):S!==null?Math.min(0,S):0}function ie(c){Y(c),K(null)}function pe(c){var S,q,H;!((S=F.value)===null||S===void 0)&&S.$el.contains(c.target)&&c.preventDefault(),!((q=_.value)===null||q===void 0)&&q.$el.contains(c.target)&&c.preventDefault(),(H=m.value)===null||H===void 0||H.activate()}let J=null,le=null,ke=null;function ee(){ke&&(window.clearTimeout(ke),ke=null),J&&(window.clearInterval(J),J=null)}let ve=null;function Fe(){ve&&(window.clearTimeout(ve),ve=null),le&&(window.clearInterval(le),le=null)}function $e(){ee(),ke=window.setTimeout(()=>{J=window.setInterval(()=>{E()},nn)},tn),Lt("mouseup",document,ee,{once:!0})}function R(){Fe(),ve=window.setTimeout(()=>{le=window.setInterval(()=>{ne()},nn)},tn),Lt("mouseup",document,Fe,{once:!0})}const qe=()=>{le||ne()},M=()=>{J||E()};function U(c){var S,q;if(c.key==="Enter"){if(c.target===((S=m.value)===null||S===void 0?void 0:S.wrapperElRef))return;W({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((q=m.value)===null||q===void 0||q.deactivate())}else if(c.key==="ArrowUp"){if(!N.value||n.keyboard.ArrowUp===!1)return;c.preventDefault(),W({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ne()}else if(c.key==="ArrowDown"){if(!ue.value||n.keyboard.ArrowDown===!1)return;c.preventDefault(),W({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&E()}}function A(c){C.value=c,n.updateValueOnInput&&!n.format&&!n.parse&&n.precision===void 0&&W({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}dt(b,()=>{D()});const te={focus:()=>{var c;return(c=m.value)===null||c===void 0?void 0:c.focus()},blur:()=>{var c;return(c=m.value)===null||c===void 0?void 0:c.blur()},select:()=>{var c;return(c=m.value)===null||c===void 0?void 0:c.select()}},ct=Rn("InputNumber",a,t);return Object.assign(Object.assign({},te),{rtlEnabled:ct,inputInstRef:m,minusButtonInstRef:_,addButtonInstRef:F,mergedClsPrefix:t,mergedBordered:e,uncontrolledValue:I,mergedValue:b,mergedPlaceholder:k,displayedValueInvalid:Ce,mergedSize:f,mergedDisabled:v,displayedValue:C,addable:N,minusable:ue,mergedStatus:h,handleFocus:ce,handleBlur:de,handleClear:ie,handleMouseDown:pe,handleAddClick:qe,handleMinusClick:M,handleAddMousedown:R,handleMinusMousedown:$e,handleKeyDown:U,handleUpdateDisplayedValue:A,mergedTheme:i,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:z(()=>{const{self:{iconColorDisabled:c}}=i.value,[S,q,H,se]=Pn(c);return{textColorTextDisabled:`rgb(${S}, ${q}, ${H})`,opacityDisabled:`${se}`}})})},render(){const{mergedClsPrefix:n,$slots:e}=this,t=()=>P(Bt,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Et(e["minus-icon"],()=>[P(jt,{clsPrefix:n},{default:()=>P(Dn,null)})])}),a=()=>P(Bt,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Et(e["add-icon"],()=>[P(jt,{clsPrefix:n},{default:()=>P(Un,null)})])});return P("div",{class:[`${n}-input-number`,this.rtlEnabled&&`${n}-input-number--rtl`]},P(we,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&this.buttonPlacement==="both"?[t(),St(e.prefix,l=>l?P("span",{class:`${n}-input-number-prefix`},l):null)]:(i=e.prefix)===null||i===void 0?void 0:i.call(e)},suffix:()=>{var i;return this.showButton?[St(e.suffix,l=>l?P("span",{class:`${n}-input-number-suffix`},l):null),this.buttonPlacement==="right"?t():null,a()]:(i=e.suffix)===null||i===void 0?void 0:i.call(e)}}))}}),Ba=Me([Me("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),re("spin-container",`
 position: relative;
 `,[re("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[On()])]),re("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),re("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[_e("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),re("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),re("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[_e("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),La={small:20,medium:18,large:16},Ua=Object.assign(Object.assign({},Ge.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),We=Ke({name:"Spin",props:Ua,slots:Object,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=qt(n),a=Ge("Spin","-spin",Ba,Jn,n,e),i=z(()=>{const{size:v}=n,{common:{cubicBezierEaseInOut:h},self:m}=a.value,{opacitySpinning:_,color:F,textColor:I}=m,w=typeof v=="number"?Tn(v):m[Oe("size",v)];return{"--n-bezier":h,"--n-opacity-spinning":_,"--n-size":w,"--n-color":F,"--n-text-color":I}}),l=t?sn("spin",z(()=>{const{size:v}=n;return typeof v=="number"?String(v):v[0]}),i,n):void 0,s=Nn(n,["spinning","show"]),f=x(!1);return qn(v=>{let h;if(s.value){const{delay:m}=n;if(m){h=window.setTimeout(()=>{f.value=!0},m),v(()=>{clearTimeout(h)});return}}f.value=s.value}),{mergedClsPrefix:e,active:f,mergedStrokeWidth:z(()=>{const{strokeWidth:v}=n;if(v!==void 0)return v;const{size:h}=n;return La[typeof h=="number"?"medium":h]}),cssVars:t?void 0:i,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var n,e;const{$slots:t,mergedClsPrefix:a,description:i}=this,l=t.icon&&this.rotate,s=(i||t.description)&&P("div",{class:`${a}-spin-description`},i||((n=t.description)===null||n===void 0?void 0:n.call(t))),f=t.icon?P("div",{class:[`${a}-spin-body`,this.themeClass]},P("div",{class:[`${a}-spin`,l&&`${a}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),s):P("div",{class:[`${a}-spin-body`,this.themeClass]},P($n,{clsPrefix:a,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${a}-spin`}),s);return(e=this.onRender)===null||e===void 0||e.call(this),t.default?P("div",{class:[`${a}-spin-container`,this.themeClass],style:this.cssVars},P("div",{class:[`${a}-spin-content`,this.active&&`${a}-spin-content--spinning`,this.contentClass],style:this.contentStyle},t),P(rn,{name:"fade-in-transition"},{default:()=>this.active?f:null})):f}}),Da={class:"config-view"},Wa={class:"tab-bar"},Ha=["onClick"],Ka={class:"tab-panel"},Ga={class:"config-section"},Qa={class:"input-row"},Ya={class:"config-section"},Ja={class:"input-row"},Za={class:"config-section"},Xa={class:"form-grid-3"},er={class:"config-section"},tr={class:"form-grid-2"},nr={class:"config-section"},ar={class:"switch-row"},rr={class:"switch-row"},ir={class:"config-section"},lr={class:"switch-row"},sr={class:"switch-row"},or={key:0,class:"cache-config"},ur={class:"cache-row"},dr={class:"cache-row"},fr={class:"cache-stats"},cr={key:0},vr={key:1,class:"error"},mr=["disabled"],gr=["disabled"],pr={class:"config-section"},hr={class:"switch-row"},br={class:"tab-panel"},yr={class:"config-section"},wr={class:"tag-row"},_r={key:0,class:"hint"},xr={class:"config-section"},kr={class:"hint"},Sr={class:"config-section"},Fr=["disabled"],Rr={class:"tab-panel"},Cr={class:"config-section"},Pr={key:0,class:"config-section"},Or={class:"switch-row"},$r={key:0,class:"hint warning"},qr={class:"config-section"},Tr={class:"tab-panel"},Vr={class:"channel-tabs"},Mr=["onClick"],Ar={class:"channel-panel"},zr={class:"config-section"},Ir={class:"model-label"},Nr=["disabled"],Er={class:"channel-panel"},jr={class:"config-section"},Br={class:"switch-row"},Lr={class:"channel-panel"},Ur={class:"config-section"},Dr={class:"switch-row"},Wr={class:"switch-row"},Hr={class:"switch-row"},Kr={class:"config-section"},Gr={class:"config-section"},Qr={class:"form-grid-2"},Yr={class:"config-section"},Jr={class:"form-grid-2"},Zr={class:"config-section"},Xr={class:"switch-row"},ei={key:0,class:"progress-info"},ti={class:"hint"},ni={class:"config-section"},ai={class:"switch-row"},ri={class:"cache-stats-grid"},ii={class:"cache-stat-card"},li={class:"btn-row"},si=["disabled"],oi={class:"cache-stat-card"},ui={class:"btn-row"},di=["disabled"],fi=["disabled"],ci={class:"save-bar"},vi=["disabled"],mi={class:"cache-file-list"},gi={class:"file-name"},pi={class:"file-size"},hi={class:"file-date"},bi=["onClick"],yi=["onClick"],wi={key:0,class:"empty-hint"},_i=["src"],xi=["src"],ki=Ke({__name:"ConfigView",setup(n){const e=Bn(),t=x({api_key:"",proxy_url:"",max_retries:"3",retry_delay:"1000",credential_retries:"5",request_timeout:"120",auto_refresh_token:"true",refresh_interval:"30",admin_password:"",enable_token_refresh:"false",enable_usage_refresh:"false",enable_token_count:"true",enable_token_cache:"true",token_cache_ttl:"300",token_cache_strategy:"1",kiro_proxy_url:"",orchids_proxy_url:"",antigravity_proxy_url:"",warp_proxy_url:"",kiro_use_builtin_proxy:"false",warp_use_builtin_proxy:"false",orchids_use_builtin_proxy:"false",antigravity_use_builtin_proxy:"false",warp_credit_refund:"false",enable_context_compress:"true"}),a=x(!1),i=x(!1),l=x(!1),s=x(!1),f=x("basic");async function v(){a.value=!0;try{const u=(await oe.get("/api/config/list")).data;u.code===0&&(t.value={...t.value,...u.data})}catch(u){console.error("获取配置失败:",u)}finally{a.value=!1}}async function h(){i.value=!0;try{const u=(await oe.post("/api/config/save",t.value)).data;u.code===0?e.success("保存成功"):e.error(u.message||u.msg||"保存失败")}catch{e.error("系统错误")}finally{i.value=!1}}function m(){navigator.clipboard.writeText(t.value.api_key),e.success("已复制到剪贴板")}const _=x(""),F=x([]),I=x(!1),w=x(!1),b=x([]),C=x({current:0,limit:0,remaining:0,percent:0});async function y(){I.value=!0;try{const u=(await oe.get("/api/license/status")).data;u.code===0&&(_.value=u.data.key||"",F.value=u.data.authorized_channels||[],b.value=u.data.builtin_proxy_configs||[]);const r=await oe.get("/api/license/usage");r.data.code===0&&(C.value=r.data.data)}catch(u){console.error("Failed to fetch license status:",u)}finally{I.value=!1}}async function X(){var u,r;if(!_.value.trim()){e.warning("请输入授权码");return}w.value=!0;try{const o=(await oe.post("/api/license/save",{key:_.value})).data;o.code===0?(F.value=((u=o.data)==null?void 0:u.authorized_channels)||[],e.success("授权验证成功，已授权渠道: "+F.value.join(", "))):(F.value=((r=o.data)==null?void 0:r.authorized_channels)||[],e.error(o.message||o.msg||"授权验证失败"))}catch(o){F.value=[],e.error(o.message||"授权验证失败")}finally{w.value=!1}}const k=x("kiro"),V=z(()=>{const u=k.value;return u==="kiro"?"kiro_proxy_url":u==="orchids"?"orchids_proxy_url":u==="antigravity"?"antigravity_proxy_url":u==="cursor"?"cursor_proxy_url":u==="warp"?"warp_proxy_url":u==="grok"?"grok_proxy_url":"proxy_url"}),B=z(()=>{const u=k.value;return u==="kiro"?"kiro_use_builtin_proxy":u==="orchids"?"orchids_use_builtin_proxy":u==="antigravity"?"antigravity_use_builtin_proxy":u==="warp"?"warp_use_builtin_proxy":""}),L=z({get:()=>t.value[V.value]||"",set:u=>{t.value[V.value]=u}}),D=z({get:()=>{const u=B.value;return u?t.value[u]==="true":!1},set:u=>{const r=B.value;r&&(t.value[r]=u?"true":"false")}}),K=z(()=>{const u=k.value;return b.value.find(r=>r.channel===u)||{channel:u,enabled:!1,available:!1}}),W=[{label:"1 分钟",value:"60"},{label:"5 分钟",value:"300"},{label:"15 分钟",value:"900"},{label:"30 分钟",value:"1800"},{label:"1 小时",value:"3600"},{label:"1 天",value:"86400"},{label:"3 天",value:"259200"},{label:"1 周",value:"604800"},{label:"自定义",value:"custom"}],Ce=[{label:"完整匹配 (System + Tools)",value:"0"},{label:"分离缓存 (推荐)",value:"1"},{label:"仅缓存 System",value:"2"},{label:"仅缓存 Tools",value:"3"}],ue=x(300),N=x(!1),Q=z({get:()=>{if(N.value)return"custom";const u=t.value.token_cache_ttl;return W.find(o=>o.value===u&&o.value!=="custom")?u:(ue.value=parseInt(u)||300,N.value=!0,"custom")},set:u=>{u==="custom"?(N.value=!0,t.value.token_cache_ttl=String(ue.value)):(N.value=!1,t.value.token_cache_ttl=u)}});dt(ue,u=>{Q.value==="custom"&&(t.value.token_cache_ttl=String(u))});const $=x({key_count:0,memory_used:0,memory_used_str:"0 B",connected:!1}),Y=x(!1),ne=x(!1);async function E(){Y.value=!0;try{const u=await oe.get("/api/token-cache/stats");u.data.code===0&&($.value=u.data.data)}catch(u){console.error("Failed to fetch cache stats:",u)}finally{Y.value=!1}}async function ce(){ne.value=!0;try{const u=await oe.post("/api/token-cache/clear");u.data.code===0?(e.success(`已清空 ${u.data.data.deleted} 条缓存`),await E()):e.error(u.data.msg||"清空失败")}catch(u){e.error(u.message||"清空失败")}finally{ne.value=!1}}const de=x("kiro"),xe=[{label:"Kiro",value:"kiro"},{label:"Warp",value:"warp"},{label:"Grok",value:"grok"}],ie=x([]),pe=x(!1),J=x(!1),le=[{label:"Ultra",value:"ultra"},{label:"Plus",value:"plus"},{label:"Pro",value:"pro"},{label:"Free",value:"free"}],ke=[{label:"claude-opus-*",value:"claude-opus-"},{label:"claude-sonnet-*",value:"claude-sonnet-"},{label:"claude-haiku-*",value:"claude-haiku-"},{label:"其它模型",value:"default"}],ee=u=>{var r;return((r=ie.value.find(o=>o.model===u))==null?void 0:r.queues)||[]},ve=(u,r)=>{const o=ie.value.findIndex(be=>be.model===u);r.length===0?o!==-1&&ie.value.splice(o,1):o!==-1?ie.value[o].queues=r:ie.value.push({model:u,queues:r})};async function Fe(){pe.value=!0;try{const u=await oe.get("/api/kiro/model-queue-config");u.data.code===0&&u.data.data&&(ie.value=Object.entries(u.data.data).map(([r,o])=>({model:r,queues:o})))}catch(u){console.error("Failed to fetch kiro config:",u)}finally{pe.value=!1}}async function $e(){J.value=!0;try{const u={};for(const o of ie.value)o.model&&o.queues.length>0&&(u[o.model]=o.queues);const r=await oe.post("/api/kiro/model-queue-config",u);r.data.code===0?e.success("Kiro 模型队列配置保存成功"):e.error(r.data.msg||"保存失败")}catch(u){e.error(u.message||"保存失败")}finally{J.value=!1}}const R=x({temporary:!0,stream:!0,thinking:!1,timeout:120,cf_clearance:"",app_url:"",image_format:"url",video_format:"url",nsfw_max_concurrent:10,nsfw_batch_size:50,assets_max_concurrent:25,media_max_concurrent:50,cache_enable_auto_clean:!0,cache_limit_mb:1024,nsfw_enabled:!1,media_allow_exhaust:!0}),qe=z(()=>window.location.origin),M=x(!1),U=x(!1),A=x(!1),te=x({show:!1,current:0,total:0,success:0,failed:0,action:"开启"});async function ct(){M.value=!0;try{const u=await oe.get("/api/grok/config");u.data.code===0&&u.data.data&&Object.assign(R.value,u.data.data)}catch(u){console.error("Failed to fetch grok config:",u)}finally{M.value=!1}}async function c(){U.value=!0;try{const u=await oe.post("/api/grok/config/save",R.value);u.data.code===0?e.success("Grok 配置保存成功"):e.error(u.data.msg||"保存失败")}catch(u){e.error(u.message||"保存失败")}finally{U.value=!1}}async function S(u){A.value=!0,te.value={show:!0,current:0,total:0,success:0,failed:0,action:u?"开启":"关闭"};let r=!1,o=u;try{const be=localStorage.getItem("auth_token"),At={"Content-Type":"application/json"};be&&(At["X-Auth-Token"]=be);const rt=await fetch("/api/grok/account/nsfw-batch",{method:"POST",headers:At,body:JSON.stringify({enabled:u})});if(!rt.ok||!rt.body)throw new Error(`请求失败 (${rt.status})`);const mn=rt.body.getReader(),gn=new TextDecoder;let bt="";for(;;){const{done:pn,value:hn}=await mn.read();if(pn)break;bt+=gn.decode(hn,{stream:!0});const zt=bt.split(`
`);bt=zt.pop()||"";let it="";for(const lt of zt)if(lt.startsWith("event: "))it=lt.slice(7);else if(lt.startsWith("data: ")){const Pe=JSON.parse(lt.slice(6));if(it==="progress")te.value={...te.value,show:!0,current:Pe.current,total:Pe.total,success:Pe.success,failed:Pe.failed};else if(it==="done")r=!0,typeof Pe.enabled=="boolean"&&(o=Pe.enabled),e.success(`NSFW 批量${u?"开启":"关闭"}完成：成功 ${Pe.success} 个，失败 ${Pe.failed} 个`);else if(it==="error")throw new Error(Pe.message||"批量切换失败")}}}catch(be){e.error(be.message||`NSFW 批量${u?"开启":"关闭"}失败`)}finally{A.value=!1,setTimeout(()=>{te.value.show=!1},1e3)}return r&&(R.value.nsfw_enabled=o),r}async function q(u){A.value||await S(u)}async function H(){var u;try{const r=await oe.post("/api/grok/account/clear-assets-batch",{});r.data.code===0?e.success(`已清理 ${((u=r.data.data)==null?void 0:u.cleared)||0} 个账号的资源缓存`):e.error(r.data.msg||"清理失败")}catch(r){e.error(r.message||"清理失败")}}const se=x({local_image:{count:0,size_mb:0},local_video:{count:0,size_mb:0}}),me=x(!1),Se=x(!1),Re=x(!1),he=x([]),Ae=x(0),Te=x(1),vt=x(20),ze=x("image"),mt=x(!1),nt=x(!1),gt=x(""),Tt=x("image"),pt=x(!1);async function ht(){me.value=!0;try{const u=await oe.get("/api/grok/cache/stats");u.data.code===0&&u.data.data&&(se.value=u.data.data)}catch(u){console.error("Failed to fetch grok cache stats:",u)}finally{me.value=!1}}async function at(){mt.value=!0;try{const u=await oe.get("/api/grok/cache/list",{params:{type:ze.value,page:Te.value,page_size:vt.value}});u.data.code===0&&u.data.data&&(he.value=u.data.data.items||[],Ae.value=u.data.data.total||0)}catch(u){console.error("Failed to fetch grok cache files:",u)}finally{mt.value=!1}}function Vt(u){ze.value=u,Te.value=1,nt.value=!0,at()}function dn(u){const r=ze.value==="video"&&u.preview_url?u.preview_url:u.view_url;if(!r)return;const o=r.startsWith("http")?r:(R.value.app_url||"")+r;gt.value=o,Tt.value=ze.value,pt.value=!0}async function fn(u){var r;try{const o=await oe.post("/api/grok/cache/delete",{type:ze.value,name:u});o.data.code===0&&((r=o.data.data)!=null&&r.deleted)?(e.success("删除成功"),await at(),await ht()):e.error(o.data.msg||"删除失败")}catch(o){e.error(o.message||"删除失败")}}async function Mt(u){u==="image"?Se.value=!0:Re.value=!0;try{const r=await oe.post("/api/grok/cache/clear",{type:u});if(r.data.code===0){const o=r.data.data||{};e.success(`已清理 ${o.count||0} 个${u==="image"?"图片":"视频"} (${(o.size_mb||0).toFixed(2)} MB)`),await ht(),nt.value&&ze.value===u&&await at()}else e.error(r.data.msg||"清理失败")}catch(r){e.error(r.message||"清理失败")}finally{u==="image"?Se.value=!1:Re.value=!1}}const cn=u=>u<1024?u+" B":u<1024*1024?(u/1024).toFixed(1)+" KB":(u/1024/1024).toFixed(2)+" MB",vn=u=>new Date(u).toLocaleString("zh-CN",{timeZone:"Asia/Shanghai"});return ln(()=>{v(),y(),E(),Fe(),ct(),ht()}),(u,r)=>(G(),ae("div",Da,[r[80]||(r[80]=d("div",{class:"page-header"},[d("h1",null,"配置管理"),d("p",null,"管理系统基础配置、负载均衡、授权等设置")],-1)),p(g(We),{show:a.value},{default:j(()=>[d("div",Wa,[(G(),ae(Qe,null,Ye([{key:"basic",name:"基础配置"},{key:"license",name:"授权配置"},{key:"proxy",name:"代理配置"},{key:"channel",name:"渠道配置"}],o=>d("button",{key:o.key,onClick:be=>f.value=o.key,class:Dt(["tab-btn",f.value===o.key?"active":""])},T(o.name),11,Ha)),64))]),Ne(d("div",Ka,[d("div",Ga,[r[43]||(r[43]=d("h3",null,"管理员密码",-1)),d("div",Qa,[p(g(we),{value:t.value.admin_password,"onUpdate:value":r[0]||(r[0]=o=>t.value.admin_password=o),type:s.value?"text":"password",placeholder:"设置管理后台登录密码"},null,8,["value","type"]),d("button",{onClick:r[1]||(r[1]=o=>s.value=!s.value),class:"icon-btn"},T(s.value?"隐藏":"显示"),1)]),r[44]||(r[44]=d("p",{class:"hint"},"用于管理后台登录认证，修改后需要重新登录",-1))]),d("div",Ya,[r[45]||(r[45]=d("h3",null,"API密钥",-1)),d("div",Ja,[p(g(we),{value:t.value.api_key,"onUpdate:value":r[2]||(r[2]=o=>t.value.api_key=o),type:l.value?"text":"password",placeholder:"设置API访问密钥"},null,8,["value","type"]),d("button",{onClick:r[3]||(r[3]=o=>l.value=!l.value),class:"icon-btn"},T(l.value?"隐藏":"显示"),1),d("button",{onClick:m,class:"icon-btn"},"复制")]),r[46]||(r[46]=d("p",{class:"hint"},"用于API接口认证，留空则不启用认证",-1))]),d("div",Za,[r[47]||(r[47]=d("h3",null,"重试配置",-1)),d("div",Xa,[p(g(fe),{label:"最大重试次数"},{default:j(()=>[p(g(we),{value:t.value.max_retries,"onUpdate:value":r[4]||(r[4]=o=>t.value.max_retries=o),placeholder:"3"},null,8,["value"])]),_:1}),p(g(fe),{label:"重试延迟(ms)"},{default:j(()=>[p(g(we),{value:t.value.retry_delay,"onUpdate:value":r[5]||(r[5]=o=>t.value.retry_delay=o),placeholder:"1000"},null,8,["value"])]),_:1}),p(g(fe),{label:"凭证切换次数"},{default:j(()=>[p(g(we),{value:t.value.credential_retries,"onUpdate:value":r[6]||(r[6]=o=>t.value.credential_retries=o),placeholder:"5"},null,8,["value"])]),_:1})])]),d("div",er,[r[48]||(r[48]=d("h3",null,"请求配置",-1)),d("div",tr,[p(g(fe),{label:"请求超时(秒)"},{default:j(()=>[p(g(we),{value:t.value.request_timeout,"onUpdate:value":r[7]||(r[7]=o=>t.value.request_timeout=o),placeholder:"120"},null,8,["value"])]),_:1}),p(g(fe),{label:"Token刷新间隔(分钟)"},{default:j(()=>[p(g(we),{value:t.value.refresh_interval,"onUpdate:value":r[8]||(r[8]=o=>t.value.refresh_interval=o),placeholder:"30"},null,8,["value"])]),_:1})])]),d("div",nr,[r[49]||(r[49]=d("h3",null,"自动刷新设置",-1)),d("div",ar,[p(g(ye),{value:t.value.enable_token_refresh==="true","onUpdate:value":r[9]||(r[9]=o=>t.value.enable_token_refresh=o?"true":"false")},null,8,["value"]),d("span",null,"自动刷新Token "+T(t.value.enable_token_refresh==="true"?"(已开启)":"(已关闭)"),1)]),r[50]||(r[50]=d("p",{class:"hint indent"},"开启后系统每10分钟执行一次定时任务",-1)),d("div",rr,[p(g(ye),{value:t.value.enable_usage_refresh==="true","onUpdate:value":r[10]||(r[10]=o=>t.value.enable_usage_refresh=o?"true":"false")},null,8,["value"]),d("span",null,"自动刷新用量 "+T(t.value.enable_usage_refresh==="true"?"(已开启)":"(已关闭)"),1)]),r[51]||(r[51]=d("p",{class:"hint warning"},"建议关闭自动刷新，避免频繁刷新被检测",-1))]),d("div",ir,[r[55]||(r[55]=d("h3",null,"Token计数设置",-1)),d("div",lr,[p(g(ye),{value:t.value.enable_token_count==="true","onUpdate:value":r[11]||(r[11]=o=>t.value.enable_token_count=o?"true":"false")},null,8,["value"]),d("span",null,"输出Token计数 "+T(t.value.enable_token_count==="true"?"(已开启)":"(已关闭)"),1)]),d("div",sr,[p(g(ye),{value:t.value.enable_token_cache==="true",disabled:t.value.enable_token_count!=="true","onUpdate:value":r[12]||(r[12]=o=>t.value.enable_token_cache=o?"true":"false")},null,8,["value","disabled"]),r[52]||(r[52]=d("span",null,"缓存Token计数",-1))]),t.value.enable_token_cache==="true"&&t.value.enable_token_count==="true"?(G(),ae("div",or,[d("div",ur,[r[53]||(r[53]=d("span",null,"缓存时间",-1)),p(g(Ue),{value:Q.value,"onUpdate:value":r[13]||(r[13]=o=>Q.value=o),options:W,style:{width:"160px"}},null,8,["value"]),Q.value==="custom"?(G(),yt(g(je),{key:0,value:ue.value,"onUpdate:value":r[14]||(r[14]=o=>ue.value=o),min:10,max:2592e3,style:{width:"140px"}},null,8,["value"])):Ve("",!0)]),d("div",dr,[r[54]||(r[54]=d("span",null,"缓存策略",-1)),p(g(Ue),{value:t.value.token_cache_strategy,"onUpdate:value":r[15]||(r[15]=o=>t.value.token_cache_strategy=o),options:Ce,style:{width:"280px"}},null,8,["value"])]),d("div",fr,[$.value.connected?(G(),ae("span",cr,"缓存: "+T($.value.key_count)+" 条 / "+T($.value.memory_used_str),1)):(G(),ae("span",vr,"Redis 未连接")),d("button",{onClick:E,disabled:Y.value,class:"small-btn"},"刷新",8,mr),d("button",{onClick:ce,disabled:ne.value||$.value.key_count===0,class:"small-btn danger"},"清空",8,gr)])])):Ve("",!0)]),d("div",pr,[r[56]||(r[56]=d("h3",null,"上下文压缩",-1)),d("div",hr,[p(g(ye),{value:t.value.enable_context_compress==="true","onUpdate:value":r[16]||(r[16]=o=>t.value.enable_context_compress=o?"true":"false")},null,8,["value"]),d("span",null,"上下文压缩 "+T(t.value.enable_context_compress==="true"?"(已开启)":"(已关闭)"),1)])])],512),[[Ee,f.value==="basic"]]),Ne(d("div",br,[p(g(We),{show:I.value},{default:j(()=>[d("div",yr,[r[57]||(r[57]=d("h3",null,"当前授权状态",-1)),d("div",wr,[(G(!0),ae(Qe,null,Ye(F.value,o=>(G(),yt(g(En),{key:o,type:"success",size:"small"},{default:j(()=>[Vn(T(o),1)]),_:2},1024))),128)),F.value.length===0?(G(),ae("span",_r,"暂无授权渠道")):Ve("",!0)])]),d("div",xr,[r[58]||(r[58]=d("h3",null,"每日用量",-1)),p(g(Wt),{percentage:C.value.percent,"indicator-placement":"inside"},null,8,["percentage"]),d("p",kr,"已使用 "+T(C.value.current)+" / "+T(C.value.limit)+"，剩余 "+T(C.value.remaining),1)]),d("div",Sr,[r[59]||(r[59]=d("h3",null,"授权码",-1)),p(g(we),{value:_.value,"onUpdate:value":r[17]||(r[17]=o=>_.value=o),type:"textarea",placeholder:"请输入授权码",rows:3},null,8,["value"]),d("button",{onClick:X,disabled:w.value,class:"primary-btn mt-3"},T(w.value?"验证中...":"保存并验证"),9,Fr)])]),_:1},8,["show"])],512),[[Ee,f.value==="license"]]),Ne(d("div",Rr,[d("div",Cr,[r[60]||(r[60]=d("h3",null,"选择渠道",-1)),p(g(Ue),{value:k.value,"onUpdate:value":r[18]||(r[18]=o=>k.value=o),options:[{label:"Kiro",value:"kiro"},{label:"Warp",value:"warp"},{label:"Orchids",value:"orchids"},{label:"Antigravity",value:"antigravity"},{label:"Cursor",value:"cursor"},{label:"Grok",value:"grok"}],style:{width:"200px"}},null,8,["value"])]),B.value?(G(),ae("div",Pr,[r[61]||(r[61]=d("h3",null,"内置代理",-1)),d("div",Or,[p(g(ye),{value:D.value,"onUpdate:value":r[19]||(r[19]=o=>D.value=o),disabled:!K.value.available},null,8,["value","disabled"]),d("span",null,"使用内置代理 "+T(D.value?"(已开启)":"(已关闭)"),1)]),K.value.available?Ve("",!0):(G(),ae("p",$r,"当前渠道暂无可用内置代理"))])):Ve("",!0),d("div",qr,[r[62]||(r[62]=d("h3",null,"自定义代理地址",-1)),p(g(we),{value:L.value,"onUpdate:value":r[20]||(r[20]=o=>L.value=o),placeholder:"http://127.0.0.1:7890 或 socks5://127.0.0.1:1080",disabled:D.value},null,8,["value","disabled"]),r[63]||(r[63]=d("p",{class:"hint"},"支持 HTTP/HTTPS/SOCKS5 代理协议",-1))])],512),[[Ee,f.value==="proxy"]]),Ne(d("div",Tr,[d("div",Vr,[(G(),ae(Qe,null,Ye(xe,o=>d("button",{key:o.value,onClick:be=>de.value=o.value,class:Dt(["tab-btn small",de.value===o.value?"active":""])},T(o.label),11,Mr)),64))]),Ne(d("div",Ar,[p(g(We),{show:pe.value},{default:j(()=>[d("div",zr,[r[64]||(r[64]=d("h3",null,"模型队列配置",-1)),r[65]||(r[65]=d("p",{class:"hint"},"为不同模型设置优先使用的队列等级",-1)),(G(),ae(Qe,null,Ye(ke,o=>d("div",{key:o.value,class:"queue-row"},[d("span",Ir,T(o.label),1),p(g(Ue),{multiple:"",value:ee(o.value),"onUpdate:value":be=>ve(o.value,be),options:le,style:{flex:"1"},placeholder:"选择队列"},null,8,["value","onUpdate:value"])])),64)),d("button",{onClick:$e,disabled:J.value,class:"primary-btn mt-3"},T(J.value?"保存中...":"保存 Kiro 配置"),9,Nr)])]),_:1},8,["show"])],512),[[Ee,de.value==="kiro"]]),Ne(d("div",Er,[d("div",jr,[r[66]||(r[66]=d("h3",null,"Warp 设置",-1)),d("div",Br,[p(g(ye),{value:t.value.warp_credit_refund==="true","onUpdate:value":r[21]||(r[21]=o=>t.value.warp_credit_refund=o?"true":"false")},null,8,["value"]),d("span",null,"Credit Refund "+T(t.value.warp_credit_refund==="true"?"(已开启)":"(已关闭)"),1)]),r[67]||(r[67]=d("p",{class:"hint indent"},"开启后Warp渠道会在请求完成后尝试退还Credit",-1))])],512),[[Ee,de.value==="warp"]]),Ne(d("div",Lr,[p(g(We),{show:M.value},{default:j(()=>[d("div",Ur,[r[71]||(r[71]=d("h3",null,"基础设置",-1)),d("div",Dr,[p(g(ye),{value:R.value.temporary,"onUpdate:value":r[22]||(r[22]=o=>R.value.temporary=o)},null,8,["value"]),r[68]||(r[68]=d("span",null,"临时对话模式",-1))]),d("div",Wr,[p(g(ye),{value:R.value.stream,"onUpdate:value":r[23]||(r[23]=o=>R.value.stream=o)},null,8,["value"]),r[69]||(r[69]=d("span",null,"流式输出",-1))]),d("div",Hr,[p(g(ye),{value:R.value.thinking,"onUpdate:value":r[24]||(r[24]=o=>R.value.thinking=o)},null,8,["value"]),r[70]||(r[70]=d("span",null,"思考模式",-1))]),p(g(fe),{label:"请求超时(秒)"},{default:j(()=>[p(g(je),{value:R.value.timeout,"onUpdate:value":r[25]||(r[25]=o=>R.value.timeout=o),min:10,max:600},null,8,["value"])]),_:1})]),d("div",Kr,[r[72]||(r[72]=d("h3",null,"网络设置",-1)),p(g(fe),{label:"CF Clearance"},{default:j(()=>[p(g(we),{value:R.value.cf_clearance,"onUpdate:value":r[26]||(r[26]=o=>R.value.cf_clearance=o),placeholder:"cf_clearance cookie"},null,8,["value"])]),_:1}),p(g(fe),{label:"应用地址"},{default:j(()=>[p(g(we),{value:R.value.app_url,"onUpdate:value":r[27]||(r[27]=o=>R.value.app_url=o),placeholder:qe.value},null,8,["value","placeholder"])]),_:1})]),d("div",Gr,[r[73]||(r[73]=d("h3",null,"媒体格式",-1)),d("div",Qr,[p(g(fe),{label:"图片格式"},{default:j(()=>[p(g(Ue),{value:R.value.image_format,"onUpdate:value":r[28]||(r[28]=o=>R.value.image_format=o),options:[{label:"URL",value:"url"},{label:"Base64",value:"base64"},{label:"本地缓存",value:"local"}]},null,8,["value"])]),_:1}),p(g(fe),{label:"视频格式"},{default:j(()=>[p(g(Ue),{value:R.value.video_format,"onUpdate:value":r[29]||(r[29]=o=>R.value.video_format=o),options:[{label:"URL",value:"url"},{label:"本地缓存",value:"local"}]},null,8,["value"])]),_:1})])]),d("div",Yr,[r[74]||(r[74]=d("h3",null,"并发设置",-1)),d("div",Jr,[p(g(fe),{label:"NSFW最大并发"},{default:j(()=>[p(g(je),{value:R.value.nsfw_max_concurrent,"onUpdate:value":r[30]||(r[30]=o=>R.value.nsfw_max_concurrent=o),min:1,max:100},null,8,["value"])]),_:1}),p(g(fe),{label:"NSFW批量大小"},{default:j(()=>[p(g(je),{value:R.value.nsfw_batch_size,"onUpdate:value":r[31]||(r[31]=o=>R.value.nsfw_batch_size=o),min:1,max:200},null,8,["value"])]),_:1}),p(g(fe),{label:"资源最大并发"},{default:j(()=>[p(g(je),{value:R.value.assets_max_concurrent,"onUpdate:value":r[32]||(r[32]=o=>R.value.assets_max_concurrent=o),min:1,max:100},null,8,["value"])]),_:1}),p(g(fe),{label:"媒体最大并发"},{default:j(()=>[p(g(je),{value:R.value.media_max_concurrent,"onUpdate:value":r[33]||(r[33]=o=>R.value.media_max_concurrent=o),min:1,max:200},null,8,["value"])]),_:1})])]),d("div",Zr,[r[75]||(r[75]=d("h3",null,"NSFW 批量管理",-1)),d("div",Xr,[p(g(ye),{value:R.value.nsfw_enabled,"onUpdate:value":q,disabled:A.value},null,8,["value","disabled"]),d("span",null,"NSFW "+T(R.value.nsfw_enabled?"(已开启)":"(已关闭)"),1)]),te.value.show?(G(),ae("div",ei,[p(g(Wt),{percentage:te.value.total?Math.round(te.value.current/te.value.total*100):0,"indicator-placement":"inside"},null,8,["percentage"]),d("p",ti,T(te.value.action)+"中: "+T(te.value.current)+"/"+T(te.value.total),1)])):Ve("",!0),d("button",{onClick:H,class:"small-btn mt-2"},"清理资源缓存")]),d("div",ni,[r[79]||(r[79]=d("h3",null,"缓存管理",-1)),d("div",ai,[p(g(ye),{value:R.value.cache_enable_auto_clean,"onUpdate:value":r[34]||(r[34]=o=>R.value.cache_enable_auto_clean=o)},null,8,["value"]),r[76]||(r[76]=d("span",null,"自动清理",-1))]),p(g(fe),{label:"缓存上限(MB)"},{default:j(()=>[p(g(je),{value:R.value.cache_limit_mb,"onUpdate:value":r[35]||(r[35]=o=>R.value.cache_limit_mb=o),min:100,max:10240},null,8,["value"])]),_:1}),p(g(We),{show:me.value},{default:j(()=>[d("div",ri,[d("div",ii,[r[77]||(r[77]=d("span",null,"图片缓存",-1)),d("strong",null,T(se.value.local_image.count)+" 个 / "+T(se.value.local_image.size_mb.toFixed(2))+" MB",1),d("div",li,[d("button",{onClick:r[36]||(r[36]=o=>Vt("image")),class:"small-btn"},"查看"),d("button",{onClick:r[37]||(r[37]=o=>Mt("image")),disabled:Se.value,class:"small-btn danger"},T(Se.value?"清理中...":"清理"),9,si)])]),d("div",oi,[r[78]||(r[78]=d("span",null,"视频缓存",-1)),d("strong",null,T(se.value.local_video.count)+" 个 / "+T(se.value.local_video.size_mb.toFixed(2))+" MB",1),d("div",ui,[d("button",{onClick:r[38]||(r[38]=o=>Vt("video")),class:"small-btn"},"查看"),d("button",{onClick:r[39]||(r[39]=o=>Mt("video")),disabled:Re.value,class:"small-btn danger"},T(Re.value?"清理中...":"清理"),9,di)])])])]),_:1},8,["show"])]),d("button",{onClick:c,disabled:U.value,class:"primary-btn mt-3"},T(U.value?"保存中...":"保存 Grok 配置"),9,fi)]),_:1},8,["show"])],512),[[Ee,de.value==="grok"]])],512),[[Ee,f.value==="channel"]]),d("div",ci,[d("button",{onClick:h,disabled:i.value,class:"primary-btn large"},T(i.value?"保存中...":"保存配置"),9,vi)])]),_:1},8,["show"]),p(g(Ut),{show:nt.value,"onUpdate:show":r[41]||(r[41]=o=>nt.value=o),preset:"card",title:ze.value==="image"?"图片缓存":"视频缓存",style:{width:"700px","max-width":"90vw"}},{default:j(()=>[p(g(We),{show:mt.value},{default:j(()=>[d("div",mi,[(G(!0),ae(Qe,null,Ye(he.value,o=>(G(),ae("div",{key:o.name,class:"cache-file-item"},[d("span",gi,T(o.name),1),d("span",pi,T(cn(o.size)),1),d("span",hi,T(vn(o.modified)),1),d("button",{onClick:be=>dn(o),class:"small-btn"},"预览",8,bi),d("button",{onClick:be=>fn(o.name),class:"small-btn danger"},"删除",8,yi)]))),128)),he.value.length===0?(G(),ae("div",wi,"暂无缓存文件")):Ve("",!0)]),Ae.value>vt.value?(G(),yt(g(jn),{key:0,page:Te.value,"onUpdate:page":[r[40]||(r[40]=o=>Te.value=o),at],"page-count":Math.ceil(Ae.value/vt.value),style:{"margin-top":"12px"}},null,8,["page","page-count"])):Ve("",!0)]),_:1},8,["show"])]),_:1},8,["show","title"]),p(g(Ut),{show:pt.value,"onUpdate:show":r[42]||(r[42]=o=>pt.value=o),preset:"card",title:"预览",style:{width:"800px","max-width":"90vw"}},{default:j(()=>[Tt.value==="image"?(G(),ae("img",{key:0,src:gt.value,style:{"max-width":"100%","max-height":"70vh","object-fit":"contain"}},null,8,_i)):(G(),ae("video",{key:1,src:gt.value,controls:"",style:{"max-width":"100%","max-height":"70vh"}},null,8,xi))]),_:1},8,["show"])]))}}),Ci=Mn(ki,[["__scopeId","data-v-59f96b55"]]);export{Ci as default};
