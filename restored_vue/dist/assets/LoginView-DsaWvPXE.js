import{d as v,c as s,a as o,w as h,v as k,b as w,r as d,u as f,o as t,_ as m}from"./index-0b7F522w.js";import{u as y}from"./use-message-III38vxu.js";const _={class:"login-page"},C={class:"login-card"},b={class:"login-form"},x={class:"input-wrapper"},M=["type"],B={key:0,width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},V={key:1,width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},j=["disabled"],L={key:0,class:"btn-loading"},S={key:1},A=v({__name:"LoginView",setup(I){const p=f(),n=y(),a=d(""),l=d(!1),i=d(!1),c=async()=>{if(!a.value){n.warning("请输入密码");return}l.value=!0;try{const e=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a.value})})).json();e.code===0?(localStorage.setItem("auth_token",e.data.token),localStorage.setItem("auth_expires",e.data.expiresAt),n.success("登录成功"),p.push("/accounts")):n.error(e.message||"认证失败")}catch{n.error("网络连接错误")}finally{l.value=!1}},g=r=>{r.key==="Enter"&&c()};return(r,e)=>(t(),s("div",_,[o("div",C,[e[6]||(e[6]=o("div",{class:"login-header"},[o("div",{class:"logo-mark"},"C"),o("h1",{class:"login-title"},"CodeFreeMax"),o("p",{class:"login-subtitle"},"管理面板登录")],-1)),o("div",b,[e[5]||(e[5]=o("label",{class:"form-label"},"密码",-1)),o("div",x,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),type:i.value?"text":"password",class:"form-input",placeholder:"请输入管理密码",onKeydown:g,autofocus:""},null,40,M),[[k,a.value]]),o("button",{onClick:e[1]||(e[1]=u=>i.value=!i.value),class:"toggle-btn",type:"button"},[i.value?(t(),s("svg",V,[...e[3]||(e[3]=[o("path",{d:"M2 2L16 16M7.5 7.6A2.5 2.5 0 0010.4 10.5M1.5 9C1.5 9 4 4 9 4C10.2 4 11.3 4.3 12.2 4.8M16.5 9C16.5 9 15.2 11.5 12.5 13",stroke:"currentColor","stroke-width":"1.4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(t(),s("svg",B,[...e[2]||(e[2]=[o("path",{d:"M1.5 9C1.5 9 4 4 9 4C14 4 16.5 9 16.5 9C16.5 9 14 14 9 14C4 14 1.5 9 1.5 9Z",stroke:"currentColor","stroke-width":"1.4","stroke-linejoin":"round"},null,-1),o("circle",{cx:"9",cy:"9",r:"2.5",stroke:"currentColor","stroke-width":"1.4"},null,-1)])]))])]),o("button",{class:"login-btn",disabled:l.value,onClick:c},[l.value?(t(),s("span",L,[...e[4]||(e[4]=[o("svg",{class:"spinner",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[o("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"2",opacity:"0.25"}),o("path",{d:"M14 8A6 6 0 002 8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),w(" 登录中... ",-1)])])):(t(),s("span",S,"登录"))],8,j)]),e[7]||(e[7]=o("p",{class:"login-hint"},"默认密码: admin123",-1))])]))}}),D=m(A,[["__scopeId","data-v-05cccd61"]]);export{D as default};
